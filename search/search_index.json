{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"SQA::TAI - Technical Analysis Indicators <p>Ruby wrapper around the legendary TA-Lib C library, providing 132 technical analysis indicators with a clean Ruby API.       Part of the SQA (Simple Qualitative Analysis) ecosystem.</p> Features \ud83d\udcca **132 Indicators** - Comprehensive coverage with 94% of trading-relevant TA-Lib indicators \u26a1 **Blazing Fast** - C library performance with Ruby convenience \ud83c\udfaf **Clean API** - Simple, intuitive interface with keyword arguments \u2705 **Well Tested** - 73 tests, 332 assertions, comprehensive coverage \ud83d\udd12 **Type Safe** - Parameter validation and error handling \ud83d\udc1b **Bug Fixed** - Includes monkey patch for ta_lib_ffi 0.3.0 multi-array parameter bug"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>require 'sqa/tai'\n\n# NOTE: All arrays passed to the TA-Lib functions\n#       are in ascending order oldest data to newest\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08]\n\n# Calculate indicators\nsma = SQA::TAI.sma(prices, period: 5)\nrsi = SQA::TAI.rsi(prices, period: 14)\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\nputs \"SMA: #{sma.last}\"\nputs \"RSI: #{rsi.last}\"\n</code></pre>"},{"location":"#installation","title":"Installation","text":"<p>First, install the TA-Lib C library:</p> macOSUbuntu/DebianWindows <pre><code>brew install ta-lib\n</code></pre> <pre><code>wget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz\ntar -xzf ta-lib-0.4.0-src.tar.gz\ncd ta-lib/\n./configure --prefix=/usr\nmake\nsudo make install\n</code></pre> <p>Download from ta-lib.org</p> <p>Then install the gem:</p> <pre><code>gem install sqa-tai\n</code></pre>"},{"location":"#indicator-categories-132-total","title":"Indicator Categories (132 Total)","text":""},{"location":"#overlap-studies-15","title":"Overlap Studies (15)","text":"<p>Moving averages and bands for trend analysis:</p> <ul> <li>SMA - Simple Moving Average</li> <li>EMA - Exponential Moving Average</li> <li>WMA - Weighted Moving Average</li> <li>DEMA - Double Exponential Moving Average</li> <li>TEMA - Triple Exponential Moving Average</li> <li>TRIMA - Triangular Moving Average</li> <li>KAMA - Kaufman Adaptive Moving Average</li> <li>T3 - Triple Exponential Moving Average (T3)</li> <li>BBANDS - Bollinger Bands</li> <li>SAREXT - Parabolic SAR Extended</li> <li>HT_TRENDLINE - Hilbert Transform Instantaneous Trendline</li> <li>MAMA - MESA Adaptive Moving Average</li> <li>MAVP - Moving Average with Variable Period</li> <li>MIDPOINT - Midpoint over period</li> <li>MIDPRICE - Midpoint Price over period</li> </ul>"},{"location":"#momentum-indicators-30","title":"Momentum Indicators (30)","text":"<p>Measure rate of price change:</p> <ul> <li>RSI - Relative Strength Index</li> <li>MACD - Moving Average Convergence/Divergence</li> <li>STOCH - Stochastic Oscillator</li> <li>MOM - Momentum</li> <li>CCI - Commodity Channel Index</li> <li>WILLR - Williams' %R</li> <li>ROC - Rate of Change</li> <li>ROCP - Rate of Change Percentage</li> <li>ROCR - Rate of Change Ratio</li> <li>PPO - Percentage Price Oscillator</li> <li>ADX - Average Directional Index</li> <li>ADXR - Average Directional Movement Index Rating</li> <li>APO - Absolute Price Oscillator</li> <li>AROON - Aroon Indicator</li> <li>AROONOSC - Aroon Oscillator</li> <li>BOP - Balance of Power</li> <li>CMO - Chande Momentum Oscillator</li> <li>DX - Directional Movement Index</li> <li>MACDEXT - MACD with Controllable MA Type</li> <li>MACDFIX - MACD Fix 12/26</li> <li>MFI - Money Flow Index</li> <li>MINUS_DI - Minus Directional Indicator</li> <li>MINUS_DM - Minus Directional Movement</li> <li>PLUS_DI - Plus Directional Indicator</li> <li>PLUS_DM - Plus Directional Movement</li> <li>ROCR100 - Rate of Change Ratio 100 scale</li> <li>STOCHF - Stochastic Fast</li> <li>STOCHRSI - Stochastic RSI</li> <li>TRIX - 1-day ROC of Triple Smooth EMA</li> <li>ULTOSC - Ultimate Oscillator</li> </ul>"},{"location":"#volatility-indicators-4","title":"Volatility Indicators (4)","text":"<p>Measure price volatility:</p> <ul> <li>ATR - Average True Range</li> <li>NATR - Normalized Average True Range</li> <li>TRANGE - True Range</li> <li>SAR - Parabolic SAR</li> </ul>"},{"location":"#volume-indicators-3","title":"Volume Indicators (3)","text":"<p>Analyze trading volume:</p> <ul> <li>OBV - On Balance Volume</li> <li>AD - Chaikin A/D Line</li> <li>ADOSC - Chaikin A/D Oscillator</li> </ul>"},{"location":"#price-transform-4","title":"Price Transform (4)","text":"<p>Price averaging and transformation:</p> <ul> <li>AVGPRICE - Average Price</li> <li>MEDPRICE - Median Price</li> <li>TYPPRICE - Typical Price</li> <li>WCLPRICE - Weighted Close Price</li> </ul>"},{"location":"#cycle-indicators-5","title":"Cycle Indicators (5)","text":"<p>Identify market cycles:</p> <ul> <li>HT_DCPERIOD - Hilbert Transform - Dominant Cycle Period</li> <li>HT_TRENDMODE - Hilbert Transform - Trend vs Cycle Mode</li> <li>HT_DCPHASE - Hilbert Transform - Dominant Cycle Phase</li> <li>HT_PHASOR - Hilbert Transform - Phasor Components</li> <li>HT_SINE - Hilbert Transform - SineWave</li> </ul>"},{"location":"#statistical-functions-9","title":"Statistical Functions (9)","text":"<p>Statistical analysis and regression:</p> <ul> <li>CORREL - Pearson's Correlation Coefficient</li> <li>BETA - Beta Coefficient</li> <li>VAR - Variance</li> <li>STDDEV - Standard Deviation</li> <li>LINEARREG - Linear Regression</li> <li>LINEARREG_ANGLE - Linear Regression Angle</li> <li>LINEARREG_INTERCEPT - Linear Regression Intercept</li> <li>LINEARREG_SLOPE - Linear Regression Slope</li> <li>TSF - Time Series Forecast</li> </ul>"},{"location":"#pattern-recognition-61","title":"Pattern Recognition (61)","text":"<p>Identify candlestick patterns:</p> <ul> <li>Doji - Doji Pattern</li> <li>Hammer - Hammer Pattern</li> <li>Engulfing - Engulfing Pattern</li> <li>Morning Star - Morning Star Pattern</li> <li>Evening Star - Evening Star Pattern</li> <li>Harami - Harami Pattern</li> <li>Piercing - Piercing Pattern</li> <li>Shooting Star - Shooting Star Pattern</li> <li>Marubozu - Marubozu Pattern</li> <li>Spinning Top - Spinning Top Pattern</li> <li>Dragonfly Doji - Dragonfly Doji Pattern</li> <li>Gravestone Doji - Gravestone Doji Pattern</li> <li>Two Crows - Two Crows Pattern</li> <li>Three Black Crows - Three Black Crows Pattern</li> <li>Three Inside - Three Inside Up/Down Pattern</li> <li>Three Line Strike - Three Line Strike Pattern</li> <li>Three Outside - Three Outside Up/Down Pattern</li> <li>Three White Soldiers - Three Advancing White Soldiers</li> <li>Dark Cloud Cover - Dark Cloud Cover Pattern</li> <li>Abandoned Baby - Abandoned Baby Pattern</li> <li>Hanging Man - Hanging Man Pattern</li> <li>Inverted Hammer - Inverted Hammer Pattern</li> <li>Kicking - Kicking Pattern</li> <li>Morning Doji Star - Morning Doji Star Pattern</li> <li>Evening Doji Star - Evening Doji Star Pattern</li> <li>High Wave - High-Wave Candle Pattern</li> <li>Hikkake - Hikkake Pattern</li> <li>Rickshaw Man - Rickshaw Man Pattern</li> <li>Takuri - Takuri (Dragonfly Doji with very long lower shadow)</li> <li>Tristar - Tristar Pattern</li> <li>Three Stars In The South - Three Stars In The South Pattern</li> <li>Advance Block - Advance Block Pattern</li> <li>Belt-hold - Belt-hold Pattern</li> <li>Breakaway - Breakaway Pattern</li> <li>Closing Marubozu - Closing Marubozu Pattern</li> <li>Concealing Baby Swallow - Concealing Baby Swallow Pattern</li> <li>Counterattack - Counterattack Pattern</li> <li>Doji Star - Doji Star Pattern</li> <li>Gap Side-by-Side White - Gap Side-by-Side White Pattern</li> <li>Harami Cross - Harami Cross Pattern</li> <li>Modified Hikkake - Modified Hikkake Pattern</li> <li>Homing Pigeon - Homing Pigeon Pattern</li> <li>Identical Three Crows - Identical Three Crows Pattern</li> <li>In-Neck - In-Neck Pattern</li> <li>Kicking by Length - Kicking by Length Pattern</li> <li>Ladder Bottom - Ladder Bottom Pattern</li> <li>Long Legged Doji - Long Legged Doji Pattern</li> <li>Long Line - Long Line Candle Pattern</li> <li>Matching Low - Matching Low Pattern</li> <li>Mat Hold - Mat Hold Pattern</li> <li>On-Neck - On-Neck Pattern</li> <li>Rising/Falling Three Methods - Rising/Falling Three Methods Pattern</li> <li>Separating Lines - Separating Lines Pattern</li> <li>Short Line - Short Line Candle Pattern</li> <li>Stalled Pattern - Stalled Pattern</li> <li>Stick Sandwich - Stick Sandwich Pattern</li> <li>Tasuki Gap - Tasuki Gap Pattern</li> <li>Thrusting - Thrusting Pattern</li> <li>Unique 3 River - Unique 3 River Pattern</li> <li>Upside Gap Two Crows - Upside Gap Two Crows Pattern</li> <li>Upside/Downside Gap Three Methods - Upside/Downside Gap Three Methods Pattern</li> </ul>"},{"location":"#sqa-ecosystem","title":"SQA Ecosystem","text":"<p>SQA::TAI is part of a larger ecosystem:</p> <ul> <li>sqa - Trading strategy framework</li> <li>sqa-tai - Technical indicators (this gem)</li> <li>sqa-cli - CLI tool with AI integration</li> </ul>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Installation Guide</li> <li>Quick Start Tutorial</li> <li>API Reference</li> <li>Examples</li> </ul>"},{"location":"#support","title":"Support","text":"<ul> <li>GitHub: Issues</li> <li>Email: dvanhoozer@gmail.com</li> </ul>"},{"location":"#license","title":"License","text":"<p>MIT License - see LICENSE for details.</p>"},{"location":"api-reference/","title":"API Reference","text":"<p>Complete API reference for SQA::TAI.</p>"},{"location":"api-reference/#module-methods","title":"Module Methods","text":""},{"location":"api-reference/#sqataiavailable","title":"<code>SQA::TAI.available?</code>","text":"<p>Check if TA-Lib C library is available.</p> <p>Returns: <code>Boolean</code></p> <pre><code>if SQA::TAI.available?\n  puts \"TA-Lib is ready\"\nend\n</code></pre>"},{"location":"api-reference/#sqataicheck_available","title":"<code>SQA::TAI.check_available!</code>","text":"<p>Verify TA-Lib is available, raise error if not.</p> <p>Raises: <code>SQA::TAI::TAINotInstalledError</code></p> <pre><code>SQA::TAI.check_available!\n# Raises error if TA-Lib not found\n</code></pre>"},{"location":"api-reference/#overlap-studies","title":"Overlap Studies","text":""},{"location":"api-reference/#sqataismaprices-period","title":"<code>SQA::TAI.sma(prices, period:)</code>","text":"<p>Simple Moving Average.</p> <p>Parameters:</p> <ul> <li><code>prices</code> (Array) - Price data <li><code>period</code> (Integer) - Time period (default: 30)</li> <p>Returns: Array <pre><code>sma = SQA::TAI.sma(prices, period: 20)\n</code></pre>"},{"location":"api-reference/#sqataiemaprices-period","title":"<code>SQA::TAI.ema(prices, period:)</code>","text":"<p>Exponential Moving Average.</p> <p>Parameters:</p> <ul> <li><code>prices</code> (Array) - Price data <li><code>period</code> (Integer) - Time period (default: 30)</li> <p>Returns: Array <pre><code>ema = SQA::TAI.ema(prices, period: 20)\n</code></pre>"},{"location":"api-reference/#sqataiwmaprices-period","title":"<code>SQA::TAI.wma(prices, period:)</code>","text":"<p>Weighted Moving Average.</p> <p>Parameters:</p> <ul> <li><code>prices</code> (Array) - Price data <li><code>period</code> (Integer) - Time period (default: 30)</li> <p>Returns: Array <pre><code>wma = SQA::TAI.wma(prices, period: 20)\n</code></pre>"},{"location":"api-reference/#sqataibbandsprices-period-nbdev_up-nbdev_down","title":"<code>SQA::TAI.bbands(prices, period:, nbdev_up:, nbdev_down:)</code>","text":"<p>Bollinger Bands.</p> <p>Parameters:</p> <ul> <li><code>prices</code> (Array) - Price data <li><code>period</code> (Integer) - Time period (default: 5)</li> <li><code>nbdev_up</code> (Float) - Upper deviation (default: 2.0)</li> <li><code>nbdev_down</code> (Float) - Lower deviation (default: 2.0)</li> <p>Returns: Array&gt; - [upper, middle, lower] <pre><code>upper, middle, lower = SQA::TAI.bbands(\n  prices,\n  period: 20,\n  nbdev_up: 2.0,\n  nbdev_down: 2.0\n)\n</code></pre>"},{"location":"api-reference/#momentum-indicators","title":"Momentum Indicators","text":""},{"location":"api-reference/#sqatairsiprices-period","title":"<code>SQA::TAI.rsi(prices, period:)</code>","text":"<p>Relative Strength Index.</p> <p>Parameters: - <code>prices</code> (Array) - Price data - <code>period</code> (Integer) - Time period (default: 14) <p>Returns: Array - Values between 0-100 <pre><code>rsi = SQA::TAI.rsi(prices, period: 14)\n</code></pre>"},{"location":"api-reference/#sqataimacdprices-fast_period-slow_period-signal_period","title":"<code>SQA::TAI.macd(prices, fast_period:, slow_period:, signal_period:)</code>","text":"<p>Moving Average Convergence/Divergence.</p> <p>Parameters:</p> <ul> <li><code>prices</code> (Array) - Price data <li><code>fast_period</code> (Integer) - Fast period (default: 12)</li> <li><code>slow_period</code> (Integer) - Slow period (default: 26)</li> <li><code>signal_period</code> (Integer) - Signal period (default: 9)</li> <p>Returns: Array&gt; - [macd, signal, histogram] <pre><code>macd, signal, histogram = SQA::TAI.macd(prices)\n\n# With custom periods\nmacd, signal, histogram = SQA::TAI.macd(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9\n)\n</code></pre>"},{"location":"api-reference/#sqataistochhigh-low-close-fastk_period-slowk_period-slowd_period","title":"<code>SQA::TAI.stoch(high, low, close, fastk_period:, slowk_period:, slowd_period:)</code>","text":"<p>Stochastic Oscillator.</p> <p>Parameters:</p> <ul> <li><code>high</code> (Array) - High prices <li><code>low</code> (Array) - Low prices <li><code>close</code> (Array) - Close prices <li><code>fastk_period</code> (Integer) - Fast K period (default: 5)</li> <li><code>slowk_period</code> (Integer) - Slow K period (default: 3)</li> <li><code>slowd_period</code> (Integer) - Slow D period (default: 3)</li> <p>Returns: Array&gt; - [slowk, slowd] <pre><code>slowk, slowd = SQA::TAI.stoch(high, low, close)\n</code></pre>"},{"location":"api-reference/#sqataimomprices-period","title":"<code>SQA::TAI.mom(prices, period:)</code>","text":"<p>Momentum.</p> <p>Parameters:</p> <ul> <li><code>prices</code> (Array) - Price data <li><code>period</code> (Integer) - Time period (default: 10)</li> <p>Returns: Array <pre><code>mom = SQA::TAI.mom(prices, period: 10)\n</code></pre>"},{"location":"api-reference/#volatility-indicators","title":"Volatility Indicators","text":""},{"location":"api-reference/#sqataiatrhigh-low-close-period","title":"<code>SQA::TAI.atr(high, low, close, period:)</code>","text":"<p>Average True Range.</p> <p>Parameters:</p> <ul> <li><code>high</code> (Array) - High prices <li><code>low</code> (Array) - Low prices <li><code>close</code> (Array) - Close prices <li><code>period</code> (Integer) - Time period (default: 14)</li> <p>Returns: Array <pre><code>atr = SQA::TAI.atr(high, low, close, period: 14)\n</code></pre>"},{"location":"api-reference/#sqataitrangehigh-low-close","title":"<code>SQA::TAI.trange(high, low, close)</code>","text":"<p>True Range.</p> <p>Parameters:</p> <ul> <li><code>high</code> (Array) - High prices <li><code>low</code> (Array) - Low prices <li><code>close</code> (Array) - Close prices <p>Returns: Array <pre><code>tr = SQA::TAI.trange(high, low, close)\n</code></pre>"},{"location":"api-reference/#volume-indicators","title":"Volume Indicators","text":""},{"location":"api-reference/#sqataiobvclose-volume","title":"<code>SQA::TAI.obv(close, volume)</code>","text":"<p>On Balance Volume.</p> <p>Parameters:</p> <ul> <li><code>close</code> (Array) - Close prices <li><code>volume</code> (Array) - Volume data <p>Returns: Array <pre><code>obv = SQA::TAI.obv(close, volume)\n</code></pre>"},{"location":"api-reference/#sqataiadhigh-low-close-volume","title":"<code>SQA::TAI.ad(high, low, close, volume)</code>","text":"<p>Chaikin A/D Line.</p> <p>Parameters:</p> <ul> <li><code>high</code> (Array) - High prices <li><code>low</code> (Array) - Low prices <li><code>close</code> (Array) - Close prices <li><code>volume</code> (Array) - Volume data <p>Returns: Array <pre><code>ad = SQA::TAI.ad(high, low, close, volume)\n</code></pre>"},{"location":"api-reference/#pattern-recognition","title":"Pattern Recognition","text":""},{"location":"api-reference/#sqataicdl_dojiopen-high-low-close","title":"<code>SQA::TAI.cdl_doji(open, high, low, close)</code>","text":"<p>Doji candlestick pattern.</p> <p>Parameters:</p> <ul> <li><code>open</code> (Array) - Open prices <li><code>high</code> (Array) - High prices <li><code>low</code> (Array) - Low prices <li><code>close</code> (Array) - Close prices <p>Returns: Array - Values: -100, 0, or 100 <pre><code>doji = SQA::TAI.cdl_doji(open, high, low, close)\n</code></pre>"},{"location":"api-reference/#sqataicdl_hammeropen-high-low-close","title":"<code>SQA::TAI.cdl_hammer(open, high, low, close)</code>","text":"<p>Hammer candlestick pattern.</p> <p>Returns: Array - Values: -100, 0, or 100 <pre><code>hammer = SQA::TAI.cdl_hammer(open, high, low, close)\n</code></pre>"},{"location":"api-reference/#sqataicdl_engulfingopen-high-low-close","title":"<code>SQA::TAI.cdl_engulfing(open, high, low, close)</code>","text":"<p>Engulfing candlestick pattern.</p> <p>Returns: Array - Values: -100, 0, or 100 <pre><code>engulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n</code></pre>"},{"location":"api-reference/#exceptions","title":"Exceptions","text":""},{"location":"api-reference/#sqataierror","title":"<code>SQA::TAI::Error</code>","text":"<p>Base error class for all SQA::TAI errors.</p>"},{"location":"api-reference/#sqataitainotinstallederror","title":"<code>SQA::TAI::TAINotInstalledError</code>","text":"<p>Raised when TA-Lib C library is not installed or not found.</p>"},{"location":"api-reference/#sqataiinvalidparametererror","title":"<code>SQA::TAI::InvalidParameterError</code>","text":"<p>Raised when invalid parameters are provided to an indicator function.</p> <p>Common causes: - Empty or nil price array - Period larger than data size - Negative period values - Non-array parameters</p> <pre><code>begin\n  SQA::TAI.sma([], period: 5)\nrescue SQA::TAI::InvalidParameterError =&gt; e\n  puts e.message\n  # =&gt; \"Prices array cannot be empty\"\nend\n</code></pre>"},{"location":"basics/","title":"Technical Analysis Basics","text":"<p>A foundational guide to understanding technical analysis concepts used throughout the SQA::TAI library.</p>"},{"location":"basics/#what-is-technical-analysis","title":"What is Technical Analysis?","text":"<p>Technical analysis is the study of historical price and volume data to forecast future price movements. Unlike fundamental analysis which examines company financials, technical analysis focuses solely on price action and market behavior.</p>"},{"location":"basics/#core-principles","title":"Core Principles","text":"<ol> <li>Price Discounts Everything: All information is reflected in the price</li> <li>Price Moves in Trends: Markets trend more often than they range</li> <li>History Tends to Repeat: Human psychology creates repeating patterns</li> </ol>"},{"location":"basics/#basic-concepts","title":"Basic Concepts","text":""},{"location":"basics/#price-data-ohlc","title":"Price Data (OHLC)","text":"<p>Every trading period has four key prices:</p> <pre><code>open  = [50.0, 51.0, 52.0]  # Opening price\nhigh  = [51.5, 52.5, 53.0]  # Highest price\nlow   = [49.5, 50.5, 51.5]  # Lowest price\nclose = [51.0, 52.0, 52.5]  # Closing price\n</code></pre> <p>Understanding OHLC: - Open: First traded price of the period - High: Highest price during the period - Low: Lowest price during the period - Close: Last traded price of the period (most important)</p>"},{"location":"basics/#candlesticks","title":"Candlesticks","text":"<p>Visual representation of OHLC data:</p> <pre><code>      High\n       |\n    |-----|    Body (Open to Close)\n    |     |\n    |-----|\n       |\n      Low\n</code></pre> <p>Candlestick Colors: - Bullish (Green/White): Close &gt; Open (prices rose) - Bearish (Red/Black): Close &lt; Open (prices fell)</p>"},{"location":"basics/#trends","title":"Trends","text":"<p>Market direction over time:</p> <p>Uptrend: Higher highs and higher lows <pre><code>      /\\    /\\\n     /  \\  /  \\\n    /    \\/    \\\n</code></pre></p> <p>Downtrend: Lower highs and lower lows <pre><code>\\    /\\    /\n \\  /  \\  /\n  \\/    \\/\n</code></pre></p> <p>Sideways: No clear direction, ranging between support and resistance</p>"},{"location":"basics/#support-and-resistance","title":"Support and Resistance","text":"<p>Support: Price level where buying pressure overcomes selling pressure - Acts as a \"floor\" for prices - Price tends to bounce up from support</p> <p>Resistance: Price level where selling pressure overcomes buying pressure - Acts as a \"ceiling\" for prices - Price tends to reverse down at resistance</p>"},{"location":"basics/#using-sqatai","title":"Using SQA::TAI","text":""},{"location":"basics/#basic-indicator-usage","title":"Basic Indicator Usage","text":"<pre><code>require 'sqa/tai'\n\n# Load price data\nclose_prices = [44.34, 44.09, 44.15, 43.61, 44.33,\n                44.83, 45.10, 45.42, 45.84, 46.08]\n\n# Calculate a simple moving average\nsma = SQA::TAI.sma(close_prices, period: 5)\n\nputs \"SMA: #{sma.last}\"\n# Output: SMA: 45.156\n</code></pre>"},{"location":"basics/#working-with-multiple-outputs","title":"Working with Multiple Outputs","text":"<p>Some indicators return multiple arrays:</p> <pre><code># Bollinger Bands returns 3 arrays\nupper, middle, lower = SQA::TAI.bbands(close_prices, period: 20)\n\nputs \"Upper Band: #{upper.last}\"\nputs \"Middle Band: #{middle.last}\"\nputs \"Lower Band: #{lower.last}\"\n</code></pre>"},{"location":"basics/#handling-nil-values","title":"Handling Nil Values","text":"<p>Indicators need warmup periods:</p> <pre><code>prices = [10, 11, 12, 13, 14]\nsma = SQA::TAI.sma(prices, period: 5)\n\n# First 4 values will be nil (warmup period)\nputs sma.inspect\n# =&gt; [nil, nil, nil, nil, 12.0]\n\n# Get only valid values\nvalid_sma = sma.compact\nputs valid_sma.last  # Most recent valid value\n</code></pre>"},{"location":"basics/#common-indicator-types","title":"Common Indicator Types","text":""},{"location":"basics/#trend-indicators","title":"Trend Indicators","text":"<p>Identify market direction: - Moving Averages (SMA, EMA) - MACD - ADX</p>"},{"location":"basics/#momentum-indicators","title":"Momentum Indicators","text":"<p>Measure rate of price change: - RSI - Stochastic - CCI</p>"},{"location":"basics/#volatility-indicators","title":"Volatility Indicators","text":"<p>Measure price variation: - Bollinger Bands - ATR - Standard Deviation</p>"},{"location":"basics/#volume-indicators","title":"Volume Indicators","text":"<p>Analyze trading volume: - OBV - A/D Line - Money Flow Index</p>"},{"location":"basics/#essential-technical-analysis-concepts","title":"Essential Technical Analysis Concepts","text":""},{"location":"basics/#moving-averages","title":"Moving Averages","text":"<p>Average price over a period, smoothing out noise:</p> <pre><code># 20-period Simple Moving Average\nsma_20 = SQA::TAI.sma(close, period: 20)\n\n# Price above MA = uptrend\n# Price below MA = downtrend\n</code></pre>"},{"location":"basics/#crossovers","title":"Crossovers","text":"<p>When two indicators cross, signaling potential trades:</p> <pre><code># Golden Cross (bullish)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif sma_50.last &gt; sma_200.last &amp;&amp; sma_50[-2] &lt;= sma_200[-2]\n  puts \"Golden Cross - Bullish signal\"\nend\n</code></pre>"},{"location":"basics/#overboughtoversold","title":"Overbought/Oversold","text":"<p>When price has moved too far, too fast:</p> <pre><code>rsi = SQA::TAI.rsi(close, period: 14)\n\nif rsi.last &gt; 70\n  puts \"Overbought - potential reversal down\"\nelsif rsi.last &lt; 30\n  puts \"Oversold - potential reversal up\"\nend\n</code></pre>"},{"location":"basics/#divergence","title":"Divergence","text":"<p>When price and indicator disagree:</p> <pre><code># Bearish divergence\nif close.last &gt; close[-10] &amp;&amp; rsi.last &lt; rsi[-10]\n  puts \"Bearish divergence - price up, RSI down\"\n  puts \"Potential trend reversal\"\nend\n</code></pre>"},{"location":"basics/#trading-strategy-basics","title":"Trading Strategy Basics","text":""},{"location":"basics/#entry-signals","title":"Entry Signals","text":"<p>Combine multiple indicators:</p> <pre><code># Trend + Momentum + Pattern\nema_20 = SQA::TAI.ema(close, period: 20)\nrsi = SQA::TAI.rsi(close, period: 14)\nmacd, signal, hist = SQA::TAI.macd(close)\n\n# All aligned for long entry\nif close.last &gt; ema_20.last &amp;&amp;    # Uptrend\n   rsi.last &gt; 50 &amp;&amp; rsi.last &lt; 70 &amp;&amp;  # Strong but not overbought\n   macd.last &gt; signal.last          # MACD bullish\n  puts \"Strong buy setup\"\nend\n</code></pre>"},{"location":"basics/#risk-management","title":"Risk Management","text":"<p>Always use stop losses:</p> <pre><code>entry_price = close.last\natr = SQA::TAI.atr(high, low, close, period: 14)\n\n# Stop loss 2 ATR below entry\nstop_loss = entry_price - (2 * atr.last)\n\n# Target 3 ATR above entry (1:1.5 risk:reward)\ntake_profit = entry_price + (3 * atr.last)\n\nputs \"Entry: $#{entry_price.round(2)}\"\nputs \"Stop: $#{stop_loss.round(2)}\"\nputs \"Target: $#{take_profit.round(2)}\"\n</code></pre>"},{"location":"basics/#position-sizing","title":"Position Sizing","text":"<p>Risk only 1-2% per trade:</p> <pre><code>account_size = 10000\nrisk_per_trade = 0.02  # 2%\nrisk_amount = account_size * risk_per_trade\n\nstop_distance = entry_price - stop_loss\nshares = (risk_amount / stop_distance).floor\n\nputs \"Position size: #{shares} shares\"\nputs \"Risk: $#{risk_amount}\"\n</code></pre>"},{"location":"basics/#best-practices","title":"Best Practices","text":""},{"location":"basics/#1-use-multiple-timeframes","title":"1. Use Multiple Timeframes","text":"<p>Analyze larger timeframe first: - Daily chart: Identify overall trend - 4-hour chart: Find entry points - 1-hour chart: Fine-tune timing</p>"},{"location":"basics/#2-confirm-signals","title":"2. Confirm Signals","text":"<p>Don't act on single indicator: - Trend confirmation (moving averages) - Momentum confirmation (RSI, MACD) - Volume confirmation (OBV, volume) - Pattern confirmation (candlesticks)</p>"},{"location":"basics/#3-manage-risk","title":"3. Manage Risk","text":"<p>Every trade should have: - Predetermined stop loss - Position size calculated on risk - Take profit target - Risk/reward ratio of 1:2 or better</p>"},{"location":"basics/#4-keep-a-trading-journal","title":"4. Keep a Trading Journal","text":"<p>Track: - Entry and exit prices - Indicators used - Why you entered the trade - What went right/wrong - Lessons learned</p>"},{"location":"basics/#common-mistakes-to-avoid","title":"Common Mistakes to Avoid","text":"<ol> <li>Overtrading: Not every signal is worth trading</li> <li>No Stop Loss: Always protect your capital</li> <li>Fighting the Trend: Trade with the trend, not against it</li> <li>Overleveraging: Risk too much on single trades</li> <li>Indicator Overload: Too many indicators create confusion</li> <li>Ignoring Volume: Volume validates price movements</li> <li>Emotional Trading: Stick to your system</li> </ol>"},{"location":"basics/#timeframes","title":"Timeframes","text":"<p>Different timeframes for different styles:</p> Timeframe Trading Style Hold Time 1-5 min Scalping Minutes 15-60 min Day Trading Hours 4-hour, Daily Swing Trading Days to weeks Weekly, Monthly Position Trading Months to years"},{"location":"basics/#getting-started","title":"Getting Started","text":""},{"location":"basics/#1-learn-the-basics","title":"1. Learn the Basics","text":"<ul> <li>Read Getting Started Guide</li> <li>Understand Pattern Recognition</li> <li>Study Indicator Categories</li> </ul>"},{"location":"basics/#2-practice","title":"2. Practice","text":"<ul> <li>Use historical data for backtesting</li> <li>Paper trade before using real money</li> <li>Start with simple strategies</li> </ul>"},{"location":"basics/#3-build-your-system","title":"3. Build Your System","text":"<ul> <li>Choose 2-3 complementary indicators</li> <li>Define clear entry and exit rules</li> <li>Test on different market conditions</li> <li>Track performance</li> </ul>"},{"location":"basics/#resources","title":"Resources","text":""},{"location":"basics/#documentation","title":"Documentation","text":"<ul> <li>Indicator Reference</li> <li>API Documentation</li> <li>Pattern Recognition Guide</li> </ul>"},{"location":"basics/#learning-path","title":"Learning Path","text":"<ol> <li>Beginner: SMA, RSI, MACD, basic candlesticks</li> <li>Intermediate: Bollinger Bands, Stochastic, ADX, pattern combinations</li> <li>Advanced: Cycle analysis, multi-timeframe strategies, custom systems</li> </ol>"},{"location":"basics/#example-complete-analysis","title":"Example: Complete Analysis","text":"<pre><code>require 'sqa/tai'\n\n# Load data\nopen, high, low, close, volume = load_market_data('AAPL')\n\n# Trend Analysis\nsma_20 = SQA::TAI.sma(close, period: 20)\nsma_50 = SQA::TAI.sma(close, period: 50)\ntrend = close.last &gt; sma_50.last ? \"Uptrend\" : \"Downtrend\"\n\n# Momentum\nrsi = SQA::TAI.rsi(close, period: 14)\nmacd, signal, hist = SQA::TAI.macd(close)\n\n# Volatility\natr = SQA::TAI.atr(high, low, close, period: 14)\nupper, middle, lower = SQA::TAI.bbands(close, period: 20)\n\n# Volume\nobv = SQA::TAI.obv(close, volume)\n\nputs \"Technical Analysis Summary\"\nputs \"=\" * 50\nputs \"Trend: #{trend}\"\nputs \"Price: $#{close.last.round(2)}\"\nputs \"SMA(20): $#{sma_20.last.round(2)}\"\nputs \"SMA(50): $#{sma_50.last.round(2)}\"\nputs \"RSI(14): #{rsi.last.round(2)}\"\nputs \"MACD: #{macd.last.round(2)}\"\nputs \"ATR(14): $#{atr.last.round(2)}\"\nputs \"BB Position: #{((close.last - lower.last) / (upper.last - lower.last) * 100).round(0)}%\"\n\n# Trading Decision\nif trend == \"Uptrend\" &amp;&amp;\n   rsi.last &gt; 40 &amp;&amp; rsi.last &lt; 70 &amp;&amp;\n   macd.last &gt; signal.last &amp;&amp;\n   obv.last &gt; obv[-5]\n  puts \"\\nSignal: STRONG BUY\"\n  puts \"Confluence of trend, momentum, and volume\"\nend\n</code></pre>"},{"location":"basics/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide</li> <li>Pattern Recognition</li> <li>Browse All Indicators</li> <li>View Code Examples</li> </ul>"},{"location":"contributing/","title":"Contributing to SQA::TAI","text":"<p>Thank you for your interest in contributing to SQA::TAI! This document provides guidelines for contributing to the project.</p>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>We are committed to providing a welcoming and inspiring community for all. Please be respectful and constructive in all interactions.</p>"},{"location":"contributing/#how-to-contribute","title":"How to Contribute","text":""},{"location":"contributing/#reporting-bugs","title":"Reporting Bugs","text":"<p>If you find a bug, please create an issue on GitHub with:</p> <ul> <li>Clear description of the problem</li> <li>Steps to reproduce</li> <li>Expected vs actual behavior</li> <li>Ruby version and gem version</li> <li>TA-Lib version</li> <li>Sample code if applicable</li> </ul> <p>Example Bug Report:</p> <pre><code>**Description:** RSI calculation returns nil values\n\n**Steps to Reproduce:**\n1. Install gem version X.X.X\n2. Run: SQA::TAI.rsi([1,2,3,4,5], period: 14)\n3. Observe nil values in output\n\n**Expected:** Array with RSI values\n**Actual:** Array with many nil values\n\n**Environment:**\n- Ruby: 3.2.0\n- sqa-tai: 0.1.0\n- TA-Lib: 0.4.0\n</code></pre>"},{"location":"contributing/#suggesting-enhancements","title":"Suggesting Enhancements","text":"<p>Enhancement suggestions are welcome! Please create an issue with:</p> <ul> <li>Clear description of the enhancement</li> <li>Use case / motivation</li> <li>Proposed implementation (if any)</li> <li>Examples of how it would be used</li> </ul>"},{"location":"contributing/#pull-requests","title":"Pull Requests","text":"<p>We love pull requests! Here's the process:</p> <ol> <li>Fork the repository</li> <li>Create a feature branch <pre><code>git checkout -b feature/your-feature-name\n</code></pre></li> <li>Make your changes</li> <li>Add tests (required for new features)</li> <li>Run the test suite <pre><code>bundle exec rake test\n</code></pre></li> <li>Update documentation if needed</li> <li>Commit your changes <pre><code>git commit -m \"Add feature: your feature description\"\n</code></pre></li> <li>Push to your fork <pre><code>git push origin feature/your-feature-name\n</code></pre></li> <li>Create a Pull Request on GitHub</li> </ol>"},{"location":"contributing/#development-setup","title":"Development Setup","text":""},{"location":"contributing/#prerequisites","title":"Prerequisites","text":"<ol> <li>Install TA-Lib C library</li> </ol> <p>macOS: <pre><code>brew install ta-lib\n</code></pre></p> <p>Ubuntu/Debian: <pre><code>wget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz\ntar -xzf ta-lib-0.4.0-src.tar.gz\ncd ta-lib/\n./configure --prefix=/usr\nmake\nsudo make install\n</code></pre></p> <ol> <li> <p>Clone the repository <pre><code>git clone https://github.com/MadBomber/sqa-tai.git\ncd sqa-tai\n</code></pre></p> </li> <li> <p>Install dependencies <pre><code>bundle install\n</code></pre></p> </li> </ol>"},{"location":"contributing/#running-tests","title":"Running Tests","text":"<p>Run the full test suite: <pre><code>bundle exec rake test\n</code></pre></p> <p>Run a specific test file: <pre><code>bundle exec ruby test/sqa/tai_test.rb\n</code></pre></p> <p>Run tests with coverage: <pre><code>COVERAGE=true bundle exec rake test\n</code></pre></p>"},{"location":"contributing/#code-style","title":"Code Style","text":"<p>We follow standard Ruby style guidelines:</p> <ul> <li>Use 2 spaces for indentation</li> <li>Keep lines under 120 characters</li> <li>Use descriptive variable names</li> <li>Add comments for complex logic</li> <li>Follow Ruby naming conventions</li> </ul>"},{"location":"contributing/#testing-guidelines","title":"Testing Guidelines","text":"<ul> <li>Write tests for all new features</li> <li>Ensure existing tests pass</li> <li>Aim for high code coverage</li> <li>Use descriptive test names</li> <li>Test edge cases and error conditions</li> </ul> <p>Example Test:</p> <pre><code>require 'test_helper'\n\nclass TAITest &lt; Minitest::Test\n  def test_sma_calculates_correctly\n    prices = [1, 2, 3, 4, 5]\n    result = SQA::TAI.sma(prices, period: 3)\n\n    assert_equal 5, result.length\n    assert_nil result[0]\n    assert_nil result[1]\n    assert_in_delta 2.0, result[2], 0.001\n    assert_in_delta 3.0, result[3], 0.001\n    assert_in_delta 4.0, result[4], 0.001\n  end\n\n  def test_sma_handles_insufficient_data\n    prices = [1, 2]\n    result = SQA::TAI.sma(prices, period: 10)\n\n    assert_equal 2, result.length\n    assert result.all?(&amp;:nil?)\n  end\nend\n</code></pre>"},{"location":"contributing/#documentation","title":"Documentation","text":""},{"location":"contributing/#code-documentation","title":"Code Documentation","text":"<ul> <li>Add YARD documentation comments to all public methods</li> <li>Include parameter types and return types</li> <li>Provide usage examples</li> </ul> <p>Example:</p> <pre><code># Calculate Simple Moving Average\n#\n# @param prices [Array&lt;Float&gt;] Array of price values\n# @param period [Integer] Number of periods for calculation\n# @return [Array&lt;Float, nil&gt;] Array of SMA values (nil for warmup period)\n#\n# @example Calculate 10-period SMA\n#   prices = [44.34, 44.09, 44.15, 43.61, 44.33]\n#   sma = SQA::TAI.sma(prices, period: 5)\n#   puts sma.last\ndef sma(prices, period: 30)\n  # Implementation\nend\n</code></pre>"},{"location":"contributing/#user-documentation","title":"User Documentation","text":"<p>When adding features that affect users:</p> <ol> <li>Update README.md if needed</li> <li>Add examples to docs/examples/</li> <li>Update indicator documentation in docs/indicators/</li> <li>Add to CHANGELOG.md</li> </ol>"},{"location":"contributing/#documentation-style","title":"Documentation Style","text":"<ul> <li>Use clear, simple language</li> <li>Include code examples</li> <li>Explain the \"why\" not just the \"how\"</li> <li>Link to related documentation</li> </ul>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<pre><code>sqa-tai/\n\u251c\u2500\u2500 lib/\n\u2502   \u2514\u2500\u2500 sqa/\n\u2502       \u2514\u2500\u2500 tai.rb            # Main library code\n\u251c\u2500\u2500 test/\n\u2502   \u2514\u2500\u2500 sqa/\n\u2502       \u2514\u2500\u2500 tai_test.rb       # Test files\n\u251c\u2500\u2500 docs/                     # MkDocs documentation\n\u2502   \u251c\u2500\u2500 index.md\n\u2502   \u251c\u2500\u2500 getting-started/\n\u2502   \u251c\u2500\u2500 indicators/\n\u2502   \u2514\u2500\u2500 examples/\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 CHANGELOG.md\n\u251c\u2500\u2500 Gemfile\n\u2514\u2500\u2500 sqa-tai.gemspec\n</code></pre>"},{"location":"contributing/#commit-message-guidelines","title":"Commit Message Guidelines","text":"<p>Write clear, descriptive commit messages:</p> <ul> <li>Use present tense (\"Add feature\" not \"Added feature\")</li> <li>Use imperative mood (\"Move cursor to...\" not \"Moves cursor to...\")</li> <li>First line: brief summary (50 chars or less)</li> <li>Blank line</li> <li>Detailed description if needed</li> </ul> <p>Good examples: <pre><code>Add RSI divergence detection\n\nImplement bullish and bearish RSI divergence detection.\nIncludes tests and documentation.\n</code></pre></p> <pre><code>Fix: SMA calculation with insufficient data\n\nPreviously returned incorrect nil placement.\nNow correctly handles edge cases.\n</code></pre>"},{"location":"contributing/#release-process","title":"Release Process","text":"<p>(For maintainers)</p> <ol> <li>Update version in <code>lib/sqa/tai/version.rb</code></li> <li>Update CHANGELOG.md</li> <li>Commit changes</li> <li>Create git tag: <code>git tag v0.1.0</code></li> <li>Push tag: <code>git push --tags</code></li> <li>Build gem: <code>gem build sqa-tai.gemspec</code></li> <li>Push to RubyGems: <code>gem push sqa-tai-0.1.0.gem</code></li> </ol>"},{"location":"contributing/#getting-help","title":"Getting Help","text":"<ul> <li>Documentation: https://madbomber.github.io/sqa-tai</li> <li>Issues: GitHub Issues</li> <li>Email: dvanhoozer@gmail.com</li> </ul>"},{"location":"contributing/#recognition","title":"Recognition","text":"<p>Contributors will be acknowledged in: - CHANGELOG.md - GitHub contributors page - Documentation (for significant contributions)</p>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing to SQA::TAI, you agree that your contributions will be licensed under the MIT License.</p>"},{"location":"contributing/#questions","title":"Questions?","text":"<p>Don't hesitate to ask questions by: - Opening an issue - Emailing the maintainer - Starting a discussion on GitHub</p> <p>We appreciate all contributions, whether it's: - Reporting bugs - Suggesting features - Writing documentation - Submitting code - Helping other users</p> <p>Thank you for making SQA::TAI better!</p>"},{"location":"concepts/support-resistance/","title":"Support and Resistance","text":"<p>Support and resistance are fundamental concepts in technical analysis representing price levels where buying or selling pressure tends to overcome opposing forces.</p>"},{"location":"concepts/support-resistance/#what-is-support","title":"What is Support?","text":"<p>Support is a price level where buying demand is strong enough to prevent the price from falling further.</p> <p>Think of support as a \"floor\" under the price: - Price approaches support and bounces upward - Buyers outnumber sellers at this level - Acts as a potential entry point for long positions</p>"},{"location":"concepts/support-resistance/#what-is-resistance","title":"What is Resistance?","text":"<p>Resistance is a price level where selling pressure is strong enough to prevent the price from rising further.</p> <p>Think of resistance as a \"ceiling\" above the price: - Price approaches resistance and reverses downward - Sellers outnumber buyers at this level - Acts as a potential exit point or short entry</p>"},{"location":"concepts/support-resistance/#identifying-support-and-resistance","title":"Identifying Support and Resistance","text":""},{"location":"concepts/support-resistance/#historical-price-levels","title":"Historical Price Levels","text":"<pre><code># Find support - lowest price in recent period\nsupport = low_prices.last(20).min\n\n# Find resistance - highest price in recent period\nresistance = high_prices.last(20).max\n</code></pre>"},{"location":"concepts/support-resistance/#round-numbers","title":"Round Numbers","text":"<p>Psychological levels often act as support/resistance: - $50, $100, $1000 (round numbers) - Previous all-time highs - 52-week highs/lows</p>"},{"location":"concepts/support-resistance/#moving-averages","title":"Moving Averages","text":"<p>Dynamic support/resistance: <pre><code>sma_200 = SQA::TAI.sma(close, period: 200)\n\n# 200-day SMA often acts as major support/resistance\nif close.last &gt; sma_200.last\n  puts \"Price above 200 SMA - bullish\"\nelse\n  puts \"Price below 200 SMA - bearish\"\nend\n</code></pre></p>"},{"location":"concepts/support-resistance/#previous-highs-and-lows","title":"Previous Highs and Lows","text":"<ul> <li>Previous resistance often becomes support after breakout</li> <li>Previous support often becomes resistance after breakdown</li> </ul>"},{"location":"concepts/support-resistance/#trading-with-support-and-resistance","title":"Trading with Support and Resistance","text":""},{"location":"concepts/support-resistance/#buying-at-support","title":"Buying at Support","text":"<pre><code>support_level = 48.50\n\nif close.last &lt;= support_level * 1.01  # Within 1% of support\n  rsi = SQA::TAI.rsi(close, period: 14)\n\n  if rsi.last &lt; 40\n    puts \"Buy signal: Price at support + oversold RSI\"\n    puts \"Entry: $#{close.last}\"\n    puts \"Stop: $#{(support_level * 0.98).round(2)}\"  # Below support\n    puts \"Target: $#{resistance_level.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"concepts/support-resistance/#selling-at-resistance","title":"Selling at Resistance","text":"<pre><code>resistance_level = 52.00\n\nif close.last &gt;= resistance_level * 0.99  # Within 1% of resistance\n  rsi = SQA::TAI.rsi(close, period: 14)\n\n  if rsi.last &gt; 60\n    puts \"Sell signal: Price at resistance + overbought RSI\"\n    puts \"Entry: $#{close.last}\"\n    puts \"Stop: $#{(resistance_level * 1.02).round(2)}\"  # Above resistance\n    puts \"Target: $#{support_level.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"concepts/support-resistance/#breakout-trading","title":"Breakout Trading","text":"<p>When price breaks through support or resistance:</p> <pre><code># Breakout above resistance\nif close.last &gt; resistance &amp;&amp; close[-2] &lt;= resistance\n  volume_surge = volume.last &gt; (volume[-20..-2].sum / 19 * 1.5)\n\n  if volume_surge\n    puts \"Valid breakout above resistance on high volume\"\n    puts \"New support formed at: $#{resistance.round(2)}\"\n  else\n    puts \"Weak breakout - low volume, may be false\"\n  end\nend\n</code></pre>"},{"location":"concepts/support-resistance/#support-and-resistance-strength","title":"Support and Resistance Strength","text":""},{"location":"concepts/support-resistance/#multiple-tests","title":"Multiple Tests","text":"<p>The more times a level is tested without breaking, the stronger it becomes: - 2 tests: Weak support/resistance - 3-4 tests: Moderate strength - 5+ tests: Strong support/resistance</p>"},{"location":"concepts/support-resistance/#volume","title":"Volume","text":"<p>Higher volume at a level increases its significance: <pre><code># Check volume at price level\nif price_at_level &amp;&amp; volume.last &gt; avg_volume * 1.5\n  puts \"Strong support/resistance - high volume\"\nend\n</code></pre></p>"},{"location":"concepts/support-resistance/#timeframe","title":"Timeframe","text":"<p>Support/resistance on higher timeframes is more significant: - Monthly levels &gt; Weekly levels &gt; Daily levels</p>"},{"location":"concepts/support-resistance/#role-reversal","title":"Role Reversal","text":"<p>Support becomes resistance (and vice versa) after a break:</p> <pre><code>old_resistance = 50.00\n\n# After breakout above\nif close.last &gt; old_resistance\n  puts \"Old resistance at $50 now acts as support\"\n  puts \"Look for pullbacks to $50 for entries\"\nend\n</code></pre>"},{"location":"concepts/support-resistance/#using-sqatai-with-supportresistance","title":"Using SQA::TAI with Support/Resistance","text":""},{"location":"concepts/support-resistance/#pivot-points","title":"Pivot Points","text":"<pre><code># Calculate pivot points\ntypical_price = SQA::TAI.typprice(high, low, close)\npivot = typical_price.last\n\nresistance_1 = (2 * pivot) - low.last\nsupport_1 = (2 * pivot) - high.last\n\nputs \"Pivot: $#{pivot.round(2)}\"\nputs \"R1: $#{resistance_1.round(2)}\"\nputs \"S1: $#{support_1.round(2)}\"\n</code></pre>"},{"location":"concepts/support-resistance/#bollinger-bands","title":"Bollinger Bands","text":"<pre><code># Bands act as dynamic support/resistance\nupper, middle, lower = SQA::TAI.bbands(close, period: 20)\n\nif close.last &lt; lower.last\n  puts \"Price at lower band (support)\"\nelsif close.last &gt; upper.last\n  puts \"Price at upper band (resistance)\"\nend\n</code></pre>"},{"location":"concepts/support-resistance/#atr-for-stop-placement","title":"ATR for Stop Placement","text":"<pre><code>atr = SQA::TAI.atr(high, low, close, period: 14)\n\n# Place stop below support using ATR\nstop_distance = 2 * atr.last\nstop_loss = support_level - stop_distance\n\nputs \"Support: $#{support_level.round(2)}\"\nputs \"Stop Loss: $#{stop_loss.round(2)}\"\n</code></pre>"},{"location":"concepts/support-resistance/#see-also","title":"See Also","text":"<ul> <li>Basics Guide</li> <li>Pattern Recognition</li> <li>Bollinger Bands</li> <li>ATR</li> </ul>"},{"location":"examples/adaptive-indicators/","title":"Adaptive Indicator Examples","text":"<p>Examples of adaptive indicators that adjust to market conditions.</p>"},{"location":"examples/adaptive-indicators/#adaptive-moving-average","title":"Adaptive Moving Average","text":"<pre><code>require 'sqa/tai'\n\n# KAMA - Kaufman Adaptive Moving Average\ndef adaptive_ma_example(close)\n  kama = SQA::TAI.kama(close, period: 10)\n\n  # KAMA adapts to volatility\n  # Faster in trending markets, slower in choppy markets\n\n  if close.last &gt; kama.last\n    puts \"Price above adaptive MA - bullish\"\n  else\n    puts \"Price below adaptive MA - bearish\"\n  end\n\n  kama\nend\n</code></pre>"},{"location":"examples/adaptive-indicators/#adaptive-period-based-on-volatility","title":"Adaptive Period Based on Volatility","text":"<pre><code>def adaptive_period_strategy(high, low, close)\n  # Use ATR to determine market volatility\n  atr = SQA::TAI.atr(high, low, close, period: 14)\n  atr_pct = (atr.last / close.last * 100)\n\n  # Adjust indicator period based on volatility\n  period = if atr_pct &gt; 3.0\n    10  # Use shorter period in volatile markets\n  elsif atr_pct &gt; 1.5\n    20  # Medium period\n  else\n    30  # Longer period in calm markets\n  end\n\n  # Apply adaptive period to RSI\n  rsi = SQA::TAI.rsi(close, period: period)\n\n  {\n    atr_pct: atr_pct.round(2),\n    period: period,\n    rsi: rsi.last.round(2)\n  }\nend\n</code></pre>"},{"location":"examples/adaptive-indicators/#see-also","title":"See Also","text":"<ul> <li>Basics</li> <li>KAMA</li> <li>ATR</li> </ul>"},{"location":"examples/momentum-trading/","title":"Momentum Trading Examples","text":"<p>Examples of using momentum indicators like RSI, MACD, and Stochastic for trading strategies.</p>"},{"location":"examples/momentum-trading/#rsi-overboughtoversold-strategy","title":"RSI Overbought/Oversold Strategy","text":"<p>Classic RSI trading strategy using 70/30 levels.</p> <pre><code>require 'sqa/tai'\n\ndef rsi_strategy(prices)\n  rsi = SQA::TAI.rsi(prices, period: 14)\n  current_rsi = rsi.last\n  current_price = prices.last\n\n  signal = if current_rsi &lt; 30\n    { action: :buy, reason: \"Oversold (RSI: #{current_rsi.round(2)})\" }\n  elsif current_rsi &gt; 70\n    { action: :sell, reason: \"Overbought (RSI: #{current_rsi.round(2)})\" }\n  else\n    { action: :hold, reason: \"Neutral (RSI: #{current_rsi.round(2)})\" }\n  end\n\n  signal.merge(price: current_price.round(2), rsi: current_rsi.round(2))\nend\n\n# Generate sample data with oversold/overbought conditions\nprices = [50.0, 48.5, 47.0, 45.5, 44.0, 42.5, 41.0, 40.0, 39.0, 38.5,  # Oversold\n          40.0, 42.0, 44.0, 46.0, 48.0, 50.0, 52.0, 54.0, 56.0, 58.0]  # Recovery\n\nsignal = rsi_strategy(prices)\n\nputs \"RSI Strategy Signal:\"\nputs \"Action: #{signal[:action]}\"\nputs \"Reason: #{signal[:reason]}\"\nputs \"Price: $#{signal[:price]}\"\n</code></pre>"},{"location":"examples/momentum-trading/#macd-crossover-system","title":"MACD Crossover System","text":"<p>Trade based on MACD line crossing the signal line.</p> <pre><code>require 'sqa/tai'\n\nclass MACDStrategy\n  def initialize(fast: 12, slow: 26, signal: 9)\n    @fast = fast\n    @slow = slow\n    @signal = signal\n  end\n\n  def analyze(prices)\n    macd, signal, histogram = SQA::TAI.macd(\n      prices,\n      fast_period: @fast,\n      slow_period: @slow,\n      signal_period: @signal\n    )\n\n    # Check for crossovers\n    signal_type = detect_crossover(macd, signal)\n\n    # Histogram momentum\n    histogram_momentum = if histogram[-1] &gt; histogram[-2] &amp;&amp; histogram[-1] &gt; 0\n      :increasing_bullish\n    elsif histogram[-1] &lt; histogram[-2] &amp;&amp; histogram[-1] &lt; 0\n      :increasing_bearish\n    elsif histogram[-1] &gt; 0\n      :decreasing_bullish\n    else\n      :decreasing_bearish\n    end\n\n    {\n      macd: macd.last.round(4),\n      signal: signal.last.round(4),\n      histogram: histogram.last.round(4),\n      crossover: signal_type,\n      momentum: histogram_momentum,\n      trend: macd.last &gt; 0 ? :bullish : :bearish\n    }\n  end\n\n  def generate_signal(prices)\n    analysis = analyze(prices)\n\n    if analysis[:crossover] == :bullish\n      {\n        action: :buy,\n        strength: analysis[:histogram] &gt; 0 ? :strong : :moderate,\n        reason: \"MACD bullish crossover\"\n      }\n    elsif analysis[:crossover] == :bearish\n      {\n        action: :sell,\n        strength: analysis[:histogram] &lt; 0 ? :strong : :moderate,\n        reason: \"MACD bearish crossover\"\n      }\n    elsif analysis[:momentum] == :increasing_bullish &amp;&amp; analysis[:trend] == :bullish\n      {\n        action: :hold_long,\n        strength: :moderate,\n        reason: \"Bullish momentum strengthening\"\n      }\n    elsif analysis[:momentum] == :increasing_bearish &amp;&amp; analysis[:trend] == :bearish\n      {\n        action: :hold_short,\n        strength: :moderate,\n        reason: \"Bearish momentum strengthening\"\n      }\n    else\n      {\n        action: :hold,\n        strength: :weak,\n        reason: \"No clear signal\"\n      }\n    end\n  end\n\n  private\n\n  def detect_crossover(macd, signal)\n    return nil if macd[-2].nil? || signal[-2].nil?\n\n    if macd[-2] &lt; signal[-2] &amp;&amp; macd[-1] &gt; signal[-1]\n      :bullish\n    elsif macd[-2] &gt; signal[-2] &amp;&amp; macd[-1] &lt; signal[-1]\n      :bearish\n    else\n      nil\n    end\n  end\nend\n\n# Example usage\nprices = Array.new(50) { |i| 100 + Math.sin(i * 0.2) * 15 + i * 0.3 }\n\nstrategy = MACDStrategy.new\nsignal = strategy.generate_signal(prices)\n\nputs \"MACD Strategy Signal:\"\nputs \"Action: #{signal[:action]}\"\nputs \"Strength: #{signal[:strength]}\"\nputs \"Reason: #{signal[:reason]}\"\n</code></pre>"},{"location":"examples/momentum-trading/#rsi-divergence-detection","title":"RSI Divergence Detection","text":"<p>Identify bullish and bearish divergences between price and RSI.</p> <pre><code>require 'sqa/tai'\n\ndef find_divergence(prices, lookback: 20)\n  rsi = SQA::TAI.rsi(prices, period: 14)\n\n  # Find recent peaks and troughs\n  price_peak_idx = find_peak_index(prices, lookback)\n  rsi_peak_idx = find_peak_index(rsi.compact, lookback)\n\n  price_trough_idx = find_trough_index(prices, lookback)\n  rsi_trough_idx = find_trough_index(rsi.compact, lookback)\n\n  divergences = []\n\n  # Bearish divergence: price higher high, RSI lower high\n  if price_peak_idx &amp;&amp; rsi_peak_idx\n    price_current_peak = prices[-1..-lookback/2].max\n    price_prev_peak = prices[-lookback..-(lookback/2+1)].max\n\n    rsi_current_peak = rsi.compact[-1..-lookback/2].max\n    rsi_prev_peak = rsi.compact[-lookback..-(lookback/2+1)].max\n\n    if price_current_peak &gt; price_prev_peak &amp;&amp; rsi_current_peak &lt; rsi_prev_peak\n      divergences &lt;&lt; {\n        type: :bearish,\n        reason: \"Price higher high but RSI lower high\"\n      }\n    end\n  end\n\n  # Bullish divergence: price lower low, RSI higher low\n  if price_trough_idx &amp;&amp; rsi_trough_idx\n    price_current_trough = prices[-1..-lookback/2].min\n    price_prev_trough = prices[-lookback..-(lookback/2+1)].min\n\n    rsi_current_trough = rsi.compact[-1..-lookback/2].min\n    rsi_prev_trough = rsi.compact[-lookback..-(lookback/2+1)].min\n\n    if price_current_trough &lt; price_prev_trough &amp;&amp; rsi_current_trough &gt; rsi_prev_trough\n      divergences &lt;&lt; {\n        type: :bullish,\n        reason: \"Price lower low but RSI higher low\"\n      }\n    end\n  end\n\n  divergences\nend\n\ndef find_peak_index(data, lookback)\n  recent_data = data.compact.last(lookback)\n  return nil if recent_data.length &lt; lookback\n  recent_data.index(recent_data.max)\nend\n\ndef find_trough_index(data, lookback)\n  recent_data = data.compact.last(lookback)\n  return nil if recent_data.length &lt; lookback\n  recent_data.index(recent_data.min)\nend\n\n# Example: Create data with bearish divergence\nprices = Array.new(40) { |i| 100 + i * 2 }  # Uptrend\n# Add a peak, then higher peak with weakening momentum\nprices += [175, 178, 180, 178, 176, 174, 172, 170, 168, 166]\n\ndivergences = find_divergence(prices, lookback: 20)\n\nif divergences.any?\n  puts \"Divergences Detected:\"\n  divergences.each do |div|\n    puts \"#{div[:type].to_s.capitalize} Divergence: #{div[:reason]}\"\n  end\nelse\n  puts \"No divergences detected\"\nend\n</code></pre>"},{"location":"examples/momentum-trading/#multi-indicator-momentum-system","title":"Multi-Indicator Momentum System","text":"<p>Combine RSI, MACD, and Momentum for stronger signals.</p> <pre><code>require 'sqa/tai'\n\nclass MultiMomentumSystem\n  def analyze(prices)\n    # Calculate indicators\n    rsi = SQA::TAI.rsi(prices, period: 14)\n    macd, signal, histogram = SQA::TAI.macd(prices)\n    mom = SQA::TAI.mom(prices, period: 10)\n\n    # Individual signals\n    rsi_signal = get_rsi_signal(rsi.last)\n    macd_signal = get_macd_signal(macd.last, signal.last)\n    mom_signal = get_mom_signal(mom.last)\n\n    # Combine signals\n    bullish_count = [rsi_signal, macd_signal, mom_signal].count(:bullish)\n    bearish_count = [rsi_signal, macd_signal, mom_signal].count(:bearish)\n\n    overall_signal = if bullish_count &gt;= 2\n      :buy\n    elsif bearish_count &gt;= 2\n      :sell\n    else\n      :hold\n    end\n\n    {\n      signal: overall_signal,\n      confidence: [bullish_count, bearish_count].max,\n      indicators: {\n        rsi: { value: rsi.last.round(2), signal: rsi_signal },\n        macd: { value: macd.last.round(4), signal: macd_signal },\n        momentum: { value: mom.last.round(2), signal: mom_signal }\n      }\n    }\n  end\n\n  private\n\n  def get_rsi_signal(rsi_value)\n    if rsi_value &lt; 30\n      :bullish\n    elsif rsi_value &gt; 70\n      :bearish\n    else\n      :neutral\n    end\n  end\n\n  def get_macd_signal(macd_value, signal_value)\n    if macd_value &gt; signal_value\n      :bullish\n    elsif macd_value &lt; signal_value\n      :bearish\n    else\n      :neutral\n    end\n  end\n\n  def get_mom_signal(mom_value)\n    if mom_value &gt; 0\n      :bullish\n    elsif mom_value &lt; 0\n      :bearish\n    else\n      :neutral\n    end\n  end\nend\n\n# Example usage\nprices = Array.new(30) { |i| 100 + i * 0.5 + rand(-2.0..2.0) }\n\nsystem = MultiMomentumSystem.new\nanalysis = system.analyze(prices)\n\nputs \"Multi-Indicator Momentum Analysis:\"\nputs \"Overall Signal: #{analysis[:signal]}\"\nputs \"Confidence: #{analysis[:confidence]}/3 indicators agree\"\nputs \"\\nIndividual Indicators:\"\nputs \"RSI (#{analysis[:indicators][:rsi][:value]}): #{analysis[:indicators][:rsi][:signal]}\"\nputs \"MACD (#{analysis[:indicators][:macd][:value]}): #{analysis[:indicators][:macd][:signal]}\"\nputs \"Momentum (#{analysis[:indicators][:momentum][:value]}): #{analysis[:indicators][:momentum][:signal]}\"\n</code></pre>"},{"location":"examples/momentum-trading/#stochastic-oscillator-strategy","title":"Stochastic Oscillator Strategy","text":"<p>Use Stochastic for entry timing in trending markets.</p> <pre><code>require 'sqa/tai'\n\ndef stochastic_strategy(high, low, close)\n  # Calculate Stochastic\n  slowk, slowd = SQA::TAI.stoch(high, low, close)\n\n  # Calculate trend\n  sma_50 = SQA::TAI.sma(close, period: 50)\n  trend = close.last &gt; sma_50.last ? :up : :down\n\n  current_k = slowk.last\n  current_d = slowd.last\n  prev_k = slowk[-2]\n  prev_d = slowd[-2]\n\n  # Detect crossovers\n  bullish_cross = prev_k &lt; prev_d &amp;&amp; current_k &gt; current_d\n  bearish_cross = prev_k &gt; prev_d &amp;&amp; current_k &lt; current_d\n\n  # Generate signals based on trend\n  if trend == :up &amp;&amp; bullish_cross &amp;&amp; current_k &lt; 20\n    {\n      action: :buy,\n      strength: :strong,\n      reason: \"Stochastic bullish crossover in oversold zone (uptrend)\",\n      k: current_k.round(2),\n      d: current_d.round(2)\n    }\n  elsif trend == :down &amp;&amp; bearish_cross &amp;&amp; current_k &gt; 80\n    {\n      action: :sell,\n      strength: :strong,\n      reason: \"Stochastic bearish crossover in overbought zone (downtrend)\",\n      k: current_k.round(2),\n      d: current_d.round(2)\n    }\n  elsif bullish_cross\n    {\n      action: :buy,\n      strength: :moderate,\n      reason: \"Stochastic bullish crossover\",\n      k: current_k.round(2),\n      d: current_d.round(2)\n    }\n  elsif bearish_cross\n    {\n      action: :sell,\n      strength: :moderate,\n      reason: \"Stochastic bearish crossover\",\n      k: current_k.round(2),\n      d: current_d.round(2)\n    }\n  else\n    {\n      action: :hold,\n      strength: :none,\n      reason: \"No clear signal\",\n      k: current_k.round(2),\n      d: current_d.round(2)\n    }\n  end\nend\n\n# Generate sample OHLC data\nlength = 60\nhigh = Array.new(length) { |i| 100 + i * 0.3 + rand(0..2.0) }\nlow = high.map { |h| h - rand(1.0..3.0) }\nclose = low.zip(high).map { |l, h| l + (h - l) * rand(0.3..0.7) }\n\nsignal = stochastic_strategy(high, low, close)\n\nputs \"Stochastic Strategy Signal:\"\nputs \"Action: #{signal[:action]}\"\nputs \"Strength: #{signal[:strength]}\"\nputs \"Reason: #{signal[:reason]}\"\nputs \"Stochastic K: #{signal[:k]}\"\nputs \"Stochastic D: #{signal[:d]}\"\n</code></pre>"},{"location":"examples/momentum-trading/#momentum-breakout-system","title":"Momentum Breakout System","text":"<p>Combine momentum with price breakouts for high-probability trades.</p> <pre><code>require 'sqa/tai'\n\ndef momentum_breakout(prices, volume, lookback: 20)\n  # Find resistance\n  resistance = prices[-lookback..-1].max\n\n  # Calculate momentum\n  rsi = SQA::TAI.rsi(prices, period: 14)\n  macd, signal, histogram = SQA::TAI.macd(prices)\n\n  # Volume analysis\n  avg_volume = volume[-lookback..-1].sum / lookback.to_f\n  volume_surge = volume.last &gt; avg_volume * 1.5\n\n  current_price = prices.last\n\n  # Breakout conditions\n  price_breakout = current_price &gt; resistance\n  momentum_positive = rsi.last &gt; 50 &amp;&amp; macd.last &gt; signal.last\n\n  if price_breakout &amp;&amp; momentum_positive &amp;&amp; volume_surge\n    {\n      signal: :strong_buy,\n      reason: \"Price breakout with momentum and volume confirmation\",\n      price: current_price.round(2),\n      resistance: resistance.round(2),\n      rsi: rsi.last.round(2),\n      volume_ratio: (volume.last / avg_volume).round(2)\n    }\n  elsif price_breakout &amp;&amp; momentum_positive\n    {\n      signal: :buy,\n      reason: \"Price breakout with momentum (low volume)\",\n      price: current_price.round(2),\n      resistance: resistance.round(2),\n      rsi: rsi.last.round(2),\n      volume_ratio: (volume.last / avg_volume).round(2)\n    }\n  else\n    {\n      signal: :hold,\n      reason: \"No breakout or momentum confirmation\",\n      price: current_price.round(2),\n      resistance: resistance.round(2),\n      rsi: rsi.last.round(2),\n      volume_ratio: (volume.last / avg_volume).round(2)\n    }\n  end\nend\n\n# Example usage\nprices = Array.new(50) { |i| 100 + i * 0.2 + rand(-1.0..1.0) }\n# Add breakout\nprices += [115, 118, 120, 122, 125]\n\nvolume = Array.new(50) { 1000 + rand(-200..200) }\n# Volume surge on breakout\nvolume += [1800, 2200, 2500, 2100, 1900]\n\nresult = momentum_breakout(prices, volume, lookback: 20)\n\nputs \"Momentum Breakout Analysis:\"\nputs \"Signal: #{result[:signal]}\"\nputs \"Reason: #{result[:reason]}\"\nputs \"Price: $#{result[:price]} (Resistance: $#{result[:resistance]})\"\nputs \"RSI: #{result[:rsi]}\"\nputs \"Volume Ratio: #{result[:volume_ratio]}x\"\n</code></pre>"},{"location":"examples/momentum-trading/#see-also","title":"See Also","text":"<ul> <li>Trend Analysis Examples</li> <li>Volatility Analysis Examples</li> <li>RSI Indicator</li> <li>MACD Indicator</li> <li>Stochastic Indicator</li> </ul>"},{"location":"examples/trend-analysis/","title":"Trend Analysis Examples","text":"<p>Learn how to use SQA::TAI indicators to identify and analyze market trends.</p>"},{"location":"examples/trend-analysis/#moving-average-crossover-strategy","title":"Moving Average Crossover Strategy","text":"<p>One of the most popular trend-following strategies using moving averages.</p> <pre><code>require 'sqa/tai'\n\n# Load historical data\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83, 45.10, 45.42,\n          45.84, 46.08, 46.03, 46.41, 46.22, 45.64, 46.21, 46.25,\n          46.08, 46.46, 46.57, 45.95, 46.50, 46.02, 46.55, 47.03,\n          47.35, 47.28, 47.61, 48.12, 48.34, 48.21, 48.95, 49.13,\n          49.32, 49.78, 50.12, 50.43, 50.21, 50.67, 51.02, 51.35,\n          51.78, 52.12, 52.45, 52.89, 53.21, 53.65, 54.02, 54.38,\n          54.72, 55.15]\n\n# Calculate fast and slow moving averages\nfast_ma = SQA::TAI.sma(prices, period: 10)\nslow_ma = SQA::TAI.sma(prices, period: 20)\n\n# Detect crossovers\ndef detect_crossover(fast, slow)\n  return nil if fast[-2].nil? || slow[-2].nil?\n\n  if fast[-2] &lt; slow[-2] &amp;&amp; fast[-1] &gt; slow[-1]\n    :bullish_crossover\n  elsif fast[-2] &gt; slow[-2] &amp;&amp; fast[-1] &lt; slow[-1]\n    :bearish_crossover\n  else\n    nil\n  end\nend\n\nsignal = detect_crossover(fast_ma, slow_ma)\n\ncase signal\nwhen :bullish_crossover\n  puts \"Golden Cross: Fast MA crossed above Slow MA - BUY SIGNAL\"\n  puts \"Fast MA: #{fast_ma.last.round(2)}\"\n  puts \"Slow MA: #{slow_ma.last.round(2)}\"\nwhen :bearish_crossover\n  puts \"Death Cross: Fast MA crossed below Slow MA - SELL SIGNAL\"\n  puts \"Fast MA: #{fast_ma.last.round(2)}\"\n  puts \"Slow MA: #{slow_ma.last.round(2)}\"\nelse\n  puts \"No crossover detected\"\nend\n</code></pre>"},{"location":"examples/trend-analysis/#trend-strength-analysis","title":"Trend Strength Analysis","text":"<p>Combine multiple indicators to assess trend strength.</p> <pre><code>require 'sqa/tai'\n\ndef analyze_trend_strength(prices)\n  # Calculate multiple timeframe MAs\n  sma_20 = SQA::TAI.sma(prices, period: 20)\n  sma_50 = SQA::TAI.sma(prices, period: 50)\n  sma_200 = SQA::TAI.sma(prices, period: 200)\n\n  # Calculate momentum\n  rsi = SQA::TAI.rsi(prices, period: 14)\n  macd, signal, histogram = SQA::TAI.macd(prices)\n\n  current_price = prices.last\n\n  # Trend direction\n  trend = if current_price &gt; sma_20.last &amp;&amp;\n             sma_20.last &gt; sma_50.last &amp;&amp;\n             sma_50.last &gt; sma_200.last\n    :strong_uptrend\n  elsif current_price &lt; sma_20.last &amp;&amp;\n        sma_20.last &lt; sma_50.last &amp;&amp;\n        sma_50.last &lt; sma_200.last\n    :strong_downtrend\n  elsif current_price &gt; sma_50.last\n    :uptrend\n  elsif current_price &lt; sma_50.last\n    :downtrend\n  else\n    :sideways\n  end\n\n  # Momentum confirmation\n  momentum_bullish = rsi.last &gt; 50 &amp;&amp; macd.last &gt; signal.last\n  momentum_bearish = rsi.last &lt; 50 &amp;&amp; macd.last &lt; signal.last\n\n  {\n    trend: trend,\n    price: current_price.round(2),\n    sma_20: sma_20.last.round(2),\n    sma_50: sma_50.last.round(2),\n    sma_200: sma_200.last.round(2),\n    rsi: rsi.last.round(2),\n    macd: macd.last.round(4),\n    momentum_confirmed: (trend == :strong_uptrend &amp;&amp; momentum_bullish) ||\n                        (trend == :strong_downtrend &amp;&amp; momentum_bearish)\n  }\nend\n\n# Example usage\nprices = (1..100).map { |i| 100 + i * 0.5 + rand(-2.0..2.0) }  # Uptrending prices\nanalysis = analyze_trend_strength(prices)\n\nputs \"Trend Analysis Results:\"\nputs \"=\" * 50\nputs \"Trend: #{analysis[:trend]}\"\nputs \"Current Price: $#{analysis[:price]}\"\nputs \"SMA(20): $#{analysis[:sma_20]}\"\nputs \"SMA(50): $#{analysis[:sma_50]}\"\nputs \"SMA(200): $#{analysis[:sma_200]}\"\nputs \"RSI: #{analysis[:rsi]}\"\nputs \"MACD: #{analysis[:macd]}\"\nputs \"Momentum Confirmed: #{analysis[:momentum_confirmed] ? 'Yes' : 'No'}\"\n</code></pre>"},{"location":"examples/trend-analysis/#support-and-resistance-with-moving-averages","title":"Support and Resistance with Moving Averages","text":"<p>Use moving averages as dynamic support and resistance levels.</p> <pre><code>require 'sqa/tai'\n\ndef find_ma_support_resistance(prices)\n  ema_20 = SQA::TAI.ema(prices, period: 20)\n  ema_50 = SQA::TAI.ema(prices, period: 50)\n\n  current_price = prices.last\n  ema_20_val = ema_20.last\n  ema_50_val = ema_50.last\n\n  # Determine support/resistance levels\n  levels = []\n\n  if current_price &gt; ema_20_val\n    levels &lt;&lt; { level: ema_20_val, type: :support, ma: \"EMA(20)\" }\n  else\n    levels &lt;&lt; { level: ema_20_val, type: :resistance, ma: \"EMA(20)\" }\n  end\n\n  if current_price &gt; ema_50_val\n    levels &lt;&lt; { level: ema_50_val, type: :support, ma: \"EMA(50)\" }\n  else\n    levels &lt;&lt; { level: ema_50_val, type: :resistance, ma: \"EMA(50)\" }\n  end\n\n  # Distance to levels\n  levels.each do |level_info|\n    distance = ((current_price - level_info[:level]) / level_info[:level] * 100).abs\n    level_info[:distance_pct] = distance.round(2)\n    level_info[:price] = level_info[:level].round(2)\n  end\n\n  levels.sort_by { |l| l[:distance_pct] }\nend\n\n# Example usage\nprices = Array.new(60) { |i| 100 + Math.sin(i * 0.1) * 10 + i * 0.1 }\nlevels = find_ma_support_resistance(prices)\n\nputs \"Dynamic Support/Resistance Levels:\"\nputs \"Current Price: $#{prices.last.round(2)}\"\nputs \"\\n\"\n\nlevels.each do |level|\n  puts \"#{level[:ma]}: $#{level[:price]} (#{level[:type]})\"\n  puts \"  Distance: #{level[:distance_pct]}%\"\nend\n</code></pre>"},{"location":"examples/trend-analysis/#triple-moving-average-system","title":"Triple Moving Average System","text":"<p>A complete trading system using three moving averages.</p> <pre><code>require 'sqa/tai'\n\nclass TripleMASystem\n  def initialize(fast_period: 10, medium_period: 20, slow_period: 50)\n    @fast_period = fast_period\n    @medium_period = medium_period\n    @slow_period = slow_period\n  end\n\n  def analyze(prices)\n    fast = SQA::TAI.ema(prices, period: @fast_period)\n    medium = SQA::TAI.ema(prices, period: @medium_period)\n    slow = SQA::TAI.ema(prices, period: @slow_period)\n\n    current_price = prices.last\n    fast_val = fast.last\n    medium_val = medium.last\n    slow_val = slow.last\n\n    # Determine trend alignment\n    bullish_alignment = fast_val &gt; medium_val &amp;&amp; medium_val &gt; slow_val\n    bearish_alignment = fast_val &lt; medium_val &amp;&amp; medium_val &lt; slow_val\n\n    # Entry signals\n    signal = if bullish_alignment &amp;&amp; current_price &gt; fast_val\n      :strong_buy\n    elsif bearish_alignment &amp;&amp; current_price &lt; fast_val\n      :strong_sell\n    elsif fast_val &gt; medium_val &amp;&amp; current_price &gt; fast_val\n      :buy\n    elsif fast_val &lt; medium_val &amp;&amp; current_price &lt; fast_val\n      :sell\n    else\n      :hold\n    end\n\n    {\n      signal: signal,\n      price: current_price.round(2),\n      fast: fast_val.round(2),\n      medium: medium_val.round(2),\n      slow: slow_val.round(2),\n      alignment: bullish_alignment ? :bullish : (bearish_alignment ? :bearish : :mixed)\n    }\n  end\n\n  def backtest(prices, initial_capital: 10000)\n    capital = initial_capital\n    position = 0\n    entry_price = 0\n    trades = []\n\n    ([@slow_period, prices.length - 1].max..prices.length - 1).each do |i|\n      current_prices = prices[0..i]\n      analysis = analyze(current_prices)\n\n      if position == 0 &amp;&amp; [:buy, :strong_buy].include?(analysis[:signal])\n        # Enter long\n        shares = (capital / analysis[:price]).floor\n        position = shares\n        entry_price = analysis[:price]\n        capital -= shares * analysis[:price]\n\n        trades &lt;&lt; {\n          action: :buy,\n          price: analysis[:price],\n          shares: shares,\n          capital: capital\n        }\n      elsif position &gt; 0 &amp;&amp; [:sell, :strong_sell].include?(analysis[:signal])\n        # Exit long\n        exit_value = position * analysis[:price]\n        capital += exit_value\n        profit = (analysis[:price] - entry_price) * position\n\n        trades &lt;&lt; {\n          action: :sell,\n          price: analysis[:price],\n          shares: position,\n          profit: profit.round(2),\n          capital: capital.round(2)\n        }\n\n        position = 0\n      end\n    end\n\n    # Close any open position\n    if position &gt; 0\n      exit_value = position * prices.last\n      capital += exit_value\n    end\n\n    {\n      initial_capital: initial_capital,\n      final_capital: capital.round(2),\n      total_return: ((capital / initial_capital - 1) * 100).round(2),\n      trades: trades\n    }\n  end\nend\n\n# Example usage\nprices = Array.new(200) { |i| 100 + Math.sin(i * 0.05) * 20 + i * 0.15 + rand(-2.0..2.0) }\n\nsystem = TripleMASystem.new(fast_period: 10, medium_period: 20, slow_period: 50)\n\n# Current analysis\ncurrent_analysis = system.analyze(prices)\nputs \"Current Market Analysis:\"\nputs \"Signal: #{current_analysis[:signal]}\"\nputs \"Price: $#{current_analysis[:price]}\"\nputs \"Fast EMA: $#{current_analysis[:fast]}\"\nputs \"Medium EMA: $#{current_analysis[:medium]}\"\nputs \"Slow EMA: $#{current_analysis[:slow]}\"\nputs \"Alignment: #{current_analysis[:alignment]}\"\n\n# Backtest results\nputs \"\\nBacktest Results:\"\nresults = system.backtest(prices, initial_capital: 10000)\nputs \"Initial Capital: $#{results[:initial_capital]}\"\nputs \"Final Capital: $#{results[:final_capital]}\"\nputs \"Total Return: #{results[:total_return]}%\"\nputs \"Number of Trades: #{results[:trades].length}\"\n</code></pre>"},{"location":"examples/trend-analysis/#trend-following-with-adx","title":"Trend Following with ADX","text":"<p>Use the Average Directional Index (ADX) to measure trend strength (if available in TA-Lib).</p> <pre><code>require 'sqa/tai'\n\n# Simplified trend strength based on moving averages\ndef calculate_trend_strength(prices)\n  sma_20 = SQA::TAI.sma(prices, period: 20)\n  sma_50 = SQA::TAI.sma(prices, period: 50)\n\n  # Calculate slope of 20-day MA\n  ma_slope = sma_20.compact.last(5).each_cons(2).map { |a, b| b - a }.sum\n\n  # Calculate distance between MAs\n  ma_distance = ((sma_20.last - sma_50.last) / sma_50.last * 100).abs\n\n  strength = if ma_distance &gt; 5 &amp;&amp; ma_slope.abs &gt; 1\n    :strong\n  elsif ma_distance &gt; 2 &amp;&amp; ma_slope.abs &gt; 0.5\n    :moderate\n  else\n    :weak\n  end\n\n  {\n    strength: strength,\n    ma_distance_pct: ma_distance.round(2),\n    ma_slope: ma_slope.round(4)\n  }\nend\n\n# Example usage\nprices = Array.new(100) { |i| 100 + i * 0.8 + rand(-1.0..1.0) }  # Strong uptrend\nstrength = calculate_trend_strength(prices)\n\nputs \"Trend Strength Analysis:\"\nputs \"Strength: #{strength[:strength]}\"\nputs \"MA Distance: #{strength[:ma_distance_pct]}%\"\nputs \"MA Slope: #{strength[:ma_slope]}\"\n</code></pre>"},{"location":"examples/trend-analysis/#see-also","title":"See Also","text":"<ul> <li>Momentum Trading Examples</li> <li>Volatility Analysis Examples</li> <li>Indicators Reference</li> <li>Basic Usage Guide</li> </ul>"},{"location":"examples/trend-following/","title":"Trend Following Examples","text":"<p>Practical examples of trend-following strategies using SQA::TAI indicators.</p>"},{"location":"examples/trend-following/#basic-trend-following","title":"Basic Trend Following","text":"<pre><code>require 'sqa/tai'\n\n# Simple moving average crossover\ndef sma_crossover_strategy(close)\n  sma_20 = SQA::TAI.sma(close, period: 20)\n  sma_50 = SQA::TAI.sma(close, period: 50)\n\n  # Golden cross (bullish)\n  if sma_20.last &gt; sma_50.last &amp;&amp; sma_20[-2] &lt;= sma_50[-2]\n    return { signal: :buy, reason: \"Golden Cross\" }\n  # Death cross (bearish)\n  elsif sma_20.last &lt; sma_50.last &amp;&amp; sma_20[-2] &gt;= sma_50[-2]\n    return { signal: :sell, reason: \"Death Cross\" }\n  end\n\n  { signal: :hold, reason: \"No crossover\" }\nend\n</code></pre>"},{"location":"examples/trend-following/#multi-indicator-trend-system","title":"Multi-Indicator Trend System","text":"<pre><code>def multi_indicator_trend(open, high, low, close, volume)\n  # Trend indicators\n  ema_20 = SQA::TAI.ema(close, period: 20)\n  ema_50 = SQA::TAI.ema(close, period: 50)\n\n  # Momentum\n  macd, signal, hist = SQA::TAI.macd(close)\n  adx = SQA::TAI.adx(high, low, close, period: 14)\n\n  # Volume\n  obv = SQA::TAI.obv(close, volume)\n\n  # Determine trend\n  trend = :neutral\n  trend = :bullish if close.last &gt; ema_20.last &amp;&amp; ema_20.last &gt; ema_50.last\n  trend = :bearish if close.last &lt; ema_20.last &amp;&amp; ema_20.last &lt; ema_50.last\n\n  # Confirm with momentum\n  momentum_confirmed = false\n  if trend == :bullish &amp;&amp; macd.last &gt; signal.last &amp;&amp; adx.last &gt; 25\n    momentum_confirmed = true\n  elsif trend == :bearish &amp;&amp; macd.last &lt; signal.last &amp;&amp; adx.last &gt; 25\n    momentum_confirmed = true\n  end\n\n  # Volume confirmation\n  volume_confirmed = obv.last &gt; obv[-5]\n\n  {\n    trend: trend,\n    strength: adx.last,\n    momentum_confirmed: momentum_confirmed,\n    volume_confirmed: volume_confirmed\n  }\nend\n</code></pre>"},{"location":"examples/trend-following/#see-also","title":"See Also","text":"<ul> <li>Basics</li> <li>Indicator Reference</li> </ul>"},{"location":"examples/volatility-analysis/","title":"Volatility Analysis Examples","text":"<p>Examples of using volatility indicators like ATR and Bollinger Bands for risk management and trading.</p>"},{"location":"examples/volatility-analysis/#atr-based-position-sizing","title":"ATR-Based Position Sizing","text":"<p>Use Average True Range to calculate appropriate position sizes.</p> <pre><code>require 'sqa/tai'\n\ndef calculate_position_size(high, low, close, account_value, risk_per_trade_pct: 1.0, atr_multiplier: 2.0)\n  # Calculate ATR\n  atr = SQA::TAI.atr(high, low, close, period: 14)\n  current_atr = atr.last\n  current_price = close.last\n\n  # Calculate risk amount\n  risk_amount = account_value * (risk_per_trade_pct / 100.0)\n\n  # Stop distance based on ATR\n  stop_distance = current_atr * atr_multiplier\n\n  # Calculate position size\n  shares = (risk_amount / stop_distance).floor\n\n  # Calculate actual investment\n  investment = shares * current_price\n\n  # Calculate percentage of account\n  account_pct = (investment / account_value * 100).round(2)\n\n  {\n    shares: shares,\n    price: current_price.round(2),\n    investment: investment.round(2),\n    account_pct: account_pct,\n    atr: current_atr.round(2),\n    stop_distance: stop_distance.round(2),\n    stop_price: (current_price - stop_distance).round(2),\n    risk_amount: risk_amount.round(2)\n  }\nend\n\n# Example usage\nlength = 30\nhigh = Array.new(length) { |i| 100 + i * 0.5 + rand(1.0..3.0) }\nlow = high.map { |h| h - rand(2.0..4.0) }\nclose = low.zip(high).map { |l, h| l + (h - l) * rand(0.4..0.6) }\n\nposition = calculate_position_size(high, low, close, 100_000, risk_per_trade_pct: 1.0)\n\nputs \"ATR-Based Position Sizing:\"\nputs \"=\" * 50\nputs \"Account Value: $100,000\"\nputs \"Risk per Trade: 1% ($#{position[:risk_amount]})\"\nputs \"\\nPosition Details:\"\nputs \"Shares: #{position[:shares]}\"\nputs \"Entry Price: $#{position[:price]}\"\nputs \"Investment: $#{position[:investment]} (#{position[:account_pct]}% of account)\"\nputs \"\\nRisk Management:\"\nputs \"ATR: $#{position[:atr]}\"\nputs \"Stop Distance: $#{position[:stop_distance]} (2\u00d7 ATR)\"\nputs \"Stop Loss Price: $#{position[:stop_price]}\"\n</code></pre>"},{"location":"examples/volatility-analysis/#bollinger-bands-mean-reversion","title":"Bollinger Bands Mean Reversion","text":"<p>Trade the extremes of Bollinger Bands for mean reversion.</p> <pre><code>require 'sqa/tai'\n\nclass BollingerBandsStrategy\n  def initialize(period: 20, std_dev: 2.0)\n    @period = period\n    @std_dev = std_dev\n  end\n\n  def analyze(prices)\n    upper, middle, lower = SQA::TAI.bbands(\n      prices,\n      period: @period,\n      nbdev_up: @std_dev,\n      nbdev_down: @std_dev\n    )\n\n    current_price = prices.last\n    upper_val = upper.last\n    middle_val = middle.last\n    lower_val = lower.last\n\n    # Calculate %B (position within bands)\n    percent_b = ((current_price - lower_val) / (upper_val - lower_val) * 100).round(2)\n\n    # Calculate bandwidth\n    bandwidth = ((upper_val - lower_val) / middle_val * 100).round(2)\n\n    # Generate signal\n    signal = if current_price &lt;= lower_val\n      :buy  # Price at/below lower band - oversold\n    elsif current_price &gt;= upper_val\n      :sell  # Price at/above upper band - overbought\n    elsif percent_b &gt;= 45 &amp;&amp; percent_b &lt;= 55\n      :close  # Near middle band - take profits\n    else\n      :hold\n    end\n\n    {\n      signal: signal,\n      price: current_price.round(2),\n      upper: upper_val.round(2),\n      middle: middle_val.round(2),\n      lower: lower_val.round(2),\n      percent_b: percent_b,\n      bandwidth: bandwidth\n    }\n  end\n\n  def backtest(prices, initial_capital: 10_000)\n    capital = initial_capital\n    position = 0\n    entry_price = 0\n    trades = []\n\n    ([@period, prices.length - 1].max..prices.length - 1).each do |i|\n      current_prices = prices[0..i]\n      analysis = analyze(current_prices)\n\n      case analysis[:signal]\n      when :buy\n        if position == 0\n          shares = (capital / analysis[:price]).floor\n          position = shares\n          entry_price = analysis[:price]\n          capital -= shares * analysis[:price]\n\n          trades &lt;&lt; {\n            action: :buy,\n            price: analysis[:price],\n            shares: shares,\n            percent_b: analysis[:percent_b]\n          }\n        end\n      when :sell, :close\n        if position &gt; 0\n          exit_value = position * analysis[:price]\n          profit = (analysis[:price] - entry_price) * position\n          capital += exit_value\n\n          trades &lt;&lt; {\n            action: :sell,\n            price: analysis[:price],\n            shares: position,\n            profit: profit.round(2),\n            percent_b: analysis[:percent_b]\n          }\n\n          position = 0\n        end\n      end\n    end\n\n    # Close open position\n    if position &gt; 0\n      capital += position * prices.last\n    end\n\n    {\n      initial_capital: initial_capital,\n      final_capital: capital.round(2),\n      return_pct: ((capital / initial_capital - 1) * 100).round(2),\n      num_trades: trades.length,\n      trades: trades\n    }\n  end\nend\n\n# Example: Generate mean-reverting prices\nprices = [100.0]\n50.times do |i|\n  # Mean-reverting random walk\n  mean = 100\n  prices &lt;&lt; prices.last + (mean - prices.last) * 0.1 + rand(-3.0..3.0)\nend\n\nstrategy = BollingerBandsStrategy.new(period: 20, std_dev: 2.0)\n\n# Current analysis\ncurrent = strategy.analyze(prices)\nputs \"Bollinger Bands Analysis:\"\nputs \"Signal: #{current[:signal]}\"\nputs \"Price: $#{current[:price]}\"\nputs \"Upper Band: $#{current[:upper]}\"\nputs \"Middle Band: $#{current[:middle]}\"\nputs \"Lower Band: $#{current[:lower]}\"\nputs \"%B: #{current[:percent_b]}%\"\nputs \"Bandwidth: #{current[:bandwidth]}%\"\n\n# Backtest\nputs \"\\nBacktest Results:\"\nresults = strategy.backtest(prices)\nputs \"Return: #{results[:return_pct]}%\"\nputs \"Trades: #{results[:num_trades]}\"\n</code></pre>"},{"location":"examples/volatility-analysis/#volatility-breakout-detection","title":"Volatility Breakout Detection","text":"<p>Identify when volatility expands after consolidation.</p> <pre><code>require 'sqa/tai'\n\ndef detect_volatility_breakout(high, low, close, lookback: 20)\n  atr = SQA::TAI.atr(high, low, close, period: 14)\n\n  # Calculate ATR statistics\n  recent_atr = atr.compact.last(lookback)\n  avg_atr = recent_atr.sum / recent_atr.length\n  min_atr = recent_atr.min\n  current_atr = atr.last\n\n  # Volatility squeeze: ATR near lows\n  in_squeeze = current_atr &lt; avg_atr * 0.7\n\n  # Volatility expansion: ATR breaking out\n  breakout = current_atr &gt; avg_atr * 1.5\n\n  # Calculate price movement\n  price_range_pct = ((high.last - low.last) / close.last * 100).round(2)\n\n  status = if breakout\n    :expanding\n  elsif in_squeeze\n    :contracting\n  else\n    :normal\n  end\n\n  {\n    status: status,\n    current_atr: current_atr.round(2),\n    avg_atr: avg_atr.round(2),\n    atr_ratio: (current_atr / avg_atr).round(2),\n    price_range_pct: price_range_pct,\n    action: determine_action(status, price_range_pct, close[-2], close[-1])\n  }\nend\n\ndef determine_action(status, range_pct, prev_close, current_close)\n  if status == :contracting\n    \"Watch for breakout - volatility compressing\"\n  elsif status == :expanding &amp;&amp; current_close &gt; prev_close\n    \"Bullish breakout - consider long positions\"\n  elsif status == :expanding &amp;&amp; current_close &lt; prev_close\n    \"Bearish breakout - consider short positions\"\n  else\n    \"Normal volatility - no specific action\"\n  end\nend\n\n# Generate data with volatility squeeze then expansion\nhigh = Array.new(30) { |i| 100 + rand(0.5..1.5) }  # Low volatility\nhigh += Array.new(10) { |i| 101 + i * 2 + rand(1.0..4.0) }  # Expanding\n\nlow = high.map.with_index { |h, i| i &lt; 30 ? h - rand(0.5..1.0) : h - rand(2.0..5.0) }\nclose = low.zip(high).map { |l, h| l + (h - l) * rand(0.3..0.7) }\n\nresult = detect_volatility_breakout(high, low, close, lookback: 20)\n\nputs \"Volatility Breakout Detection:\"\nputs \"Status: #{result[:status]}\"\nputs \"Current ATR: $#{result[:current_atr]}\"\nputs \"Average ATR: $#{result[:avg_atr]}\"\nputs \"ATR Ratio: #{result[:atr_ratio]}x\"\nputs \"Price Range: #{result[:price_range_pct]}%\"\nputs \"\\nRecommendation: #{result[:action]}\"\n</code></pre>"},{"location":"examples/volatility-analysis/#atr-trailing-stop-loss","title":"ATR Trailing Stop Loss","text":"<p>Implement a dynamic stop loss that adapts to volatility.</p> <pre><code>require 'sqa/tai'\n\nclass ATRTrailingStop\n  def initialize(atr_multiplier: 2.0)\n    @atr_multiplier = atr_multiplier\n    @stop_loss = nil\n  end\n\n  def calculate_stop(high, low, close, position_type: :long)\n    atr = SQA::TAI.atr(high, low, close, period: 14)\n    current_atr = atr.last\n    current_price = close.last\n\n    if position_type == :long\n      # Long position: stop below price\n      new_stop = current_price - (current_atr * @atr_multiplier)\n\n      # Only move stop up, never down\n      @stop_loss = [@stop_loss || new_stop, new_stop].max\n    else\n      # Short position: stop above price\n      new_stop = current_price + (current_atr * @atr_multiplier)\n\n      # Only move stop down, never up\n      @stop_loss = [@stop_loss || new_stop, new_stop].min\n    end\n\n    {\n      current_price: current_price.round(2),\n      stop_loss: @stop_loss.round(2),\n      distance: ((current_price - @stop_loss).abs).round(2),\n      distance_pct: (((current_price - @stop_loss).abs / current_price) * 100).round(2),\n      atr: current_atr.round(2)\n    }\n  end\n\n  def reset\n    @stop_loss = nil\n  end\nend\n\n# Simulate a trending market with trailing stop\nlength = 50\nhigh = Array.new(length) { |i| 100 + i * 0.8 + rand(0.5..2.0) }\nlow = high.map { |h| h - rand(1.0..3.0) }\nclose = low.zip(high).map { |l, h| l + (h - l) * rand(0.4..0.6) }\n\ntrailing_stop = ATRTrailingStop.new(atr_multiplier: 2.0)\n\nputs \"ATR Trailing Stop Example (Long Position):\"\nputs \"=\" * 50\n\n# Show trailing stop every 10 bars\n[10, 20, 30, 40, 50].each do |bar|\n  h = high[0..bar]\n  l = low[0..bar]\n  c = close[0..bar]\n\n  stop_info = trailing_stop.calculate_stop(h, l, c, position_type: :long)\n\n  puts \"\\nBar #{bar}:\"\n  puts \"Price: $#{stop_info[:current_price]}\"\n  puts \"Trailing Stop: $#{stop_info[:stop_loss]}\"\n  puts \"Distance: $#{stop_info[:distance]} (#{stop_info[:distance_pct]}%)\"\n  puts \"ATR: $#{stop_info[:atr]}\"\nend\n</code></pre>"},{"location":"examples/volatility-analysis/#bollinger-band-squeeze","title":"Bollinger Band Squeeze","text":"<p>Detect low volatility periods that often precede large moves.</p> <pre><code>require 'sqa/tai'\n\ndef detect_bb_squeeze(prices, lookback: 20)\n  upper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\n  # Calculate bandwidth\n  bandwidths = []\n  upper.each_with_index do |u, i|\n    next unless u &amp;&amp; middle[i] &amp;&amp; lower[i]\n    bw = (u - lower[i]) / middle[i] * 100\n    bandwidths &lt;&lt; bw\n  end\n\n  return nil if bandwidths.empty?\n\n  # Current bandwidth\n  current_bw = bandwidths.last\n\n  # Historical bandwidth stats\n  recent_bw = bandwidths.last(lookback)\n  avg_bw = recent_bw.sum / recent_bw.length\n  min_bw = recent_bw.min\n\n  # Squeeze: bandwidth in lowest 20%\n  squeeze_threshold = avg_bw * 0.8\n  in_squeeze = current_bw &lt; squeeze_threshold\n\n  # Breaking out of squeeze\n  breaking_out = bandwidths[-2] &lt; squeeze_threshold &amp;&amp; current_bw &gt;= squeeze_threshold\n\n  {\n    in_squeeze: in_squeeze,\n    breaking_out: breaking_out,\n    current_bandwidth: current_bw.round(2),\n    avg_bandwidth: avg_bw.round(2),\n    bandwidth_percentile: ((current_bw / avg_bw) * 100).round(0),\n    price: prices.last.round(2),\n    upper_band: upper.last.round(2),\n    lower_band: lower.last.round(2)\n  }\nend\n\n# Generate data with squeeze\nprices = [100.0]\n# Consolidation phase (squeeze)\n20.times { prices &lt;&lt; prices.last + rand(-0.5..0.5) }\n# Breakout phase\n15.times { |i| prices &lt;&lt; prices.last + 1.5 + rand(-0.5..0.5) }\n\nsqueeze_info = detect_bb_squeeze(prices, lookback: 20)\n\nputs \"Bollinger Band Squeeze Analysis:\"\nputs \"=\" * 50\nputs \"In Squeeze: #{squeeze_info[:in_squeeze] ? 'Yes' : 'No'}\"\nputs \"Breaking Out: #{squeeze_info[:breaking_out] ? 'YES - Take action!' : 'No'}\"\nputs \"Current Bandwidth: #{squeeze_info[:current_bandwidth]}%\"\nputs \"Average Bandwidth: #{squeeze_info[:avg_bandwidth]}%\"\nputs \"Bandwidth Percentile: #{squeeze_info[:bandwidth_percentile]}%\"\nputs \"\\nPrice: $#{squeeze_info[:price]}\"\nputs \"Upper Band: $#{squeeze_info[:upper_band]}\"\nputs \"Lower Band: $#{squeeze_info[:lower_band]}\"\n\nif squeeze_info[:in_squeeze]\n  puts \"\\n\u26a0\ufe0f  Squeeze active - expect breakout soon!\"\nelsif squeeze_info[:breaking_out]\n  puts \"\\n\ud83d\ude80 Breakout in progress - enter trade!\"\nend\n</code></pre>"},{"location":"examples/volatility-analysis/#complete-volatility-based-trading-system","title":"Complete Volatility-Based Trading System","text":"<p>Combine multiple volatility indicators for a complete system.</p> <pre><code>require 'sqa/tai'\n\nclass VolatilityTradingSystem\n  def analyze(high, low, close, prices)\n    # Calculate indicators\n    atr = SQA::TAI.atr(high, low, close, period: 14)\n    upper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\n    # ATR analysis\n    recent_atr = atr.compact.last(20)\n    avg_atr = recent_atr.sum / recent_atr.length\n    atr_ratio = atr.last / avg_atr\n\n    # Bollinger Bands analysis\n    bandwidth = (upper.last - lower.last) / middle.last * 100\n    percent_b = (close.last - lower.last) / (upper.last - lower.last) * 100\n\n    # Volatility state\n    volatility_state = if atr_ratio &lt; 0.7\n      :low\n    elsif atr_ratio &gt; 1.5\n      :high\n    else\n      :normal\n    end\n\n    # Generate signals\n    signal = generate_signal(\n      volatility_state,\n      close.last,\n      upper.last,\n      middle.last,\n      lower.last,\n      percent_b,\n      bandwidth\n    )\n\n    {\n      signal: signal,\n      volatility: volatility_state,\n      atr: atr.last.round(2),\n      atr_ratio: atr_ratio.round(2),\n      bandwidth: bandwidth.round(2),\n      percent_b: percent_b.round(0),\n      price: close.last.round(2),\n      upper: upper.last.round(2),\n      middle: middle.last.round(2),\n      lower: lower.last.round(2)\n    }\n  end\n\n  private\n\n  def generate_signal(vol_state, price, upper, middle, lower, percent_b, bandwidth)\n    if vol_state == :low &amp;&amp; bandwidth &lt; 10\n      {\n        action: :wait,\n        reason: \"Low volatility squeeze - wait for breakout\",\n        setup: \"Prepare for volatility expansion\"\n      }\n    elsif vol_state == :high &amp;&amp; price &gt; upper\n      {\n        action: :sell,\n        reason: \"High volatility + overbought\",\n        setup: \"Mean reversion trade\"\n      }\n    elsif vol_state == :high &amp;&amp; price &lt; lower\n      {\n        action: :buy,\n        reason: \"High volatility + oversold\",\n        setup: \"Mean reversion trade\"\n      }\n    elsif vol_state == :normal &amp;&amp; percent_b &lt; 5\n      {\n        action: :buy,\n        reason: \"Price at lower band in normal volatility\",\n        setup: \"Mean reversion with tight stop\"\n      }\n    elsif vol_state == :normal &amp;&amp; percent_b &gt; 95\n      {\n        action: :sell,\n        reason: \"Price at upper band in normal volatility\",\n        setup: \"Mean reversion with tight stop\"\n      }\n    else\n      {\n        action: :hold,\n        reason: \"No clear setup\",\n        setup: \"Monitor for opportunities\"\n      }\n    end\n  end\nend\n\n# Generate sample data\nlength = 50\nhigh = Array.new(length) { |i| 100 + Math.sin(i * 0.15) * 10 + i * 0.2 + rand(0.5..2.0) }\nlow = high.map { |h| h - rand(1.5..3.5) }\nclose = low.zip(high).map { |l, h| l + (h - l) * rand(0.3..0.7) }\n\nsystem = VolatilityTradingSystem.new\nanalysis = system.analyze(high, low, close, close)\n\nputs \"Volatility Trading System Analysis:\"\nputs \"=\" * 50\nputs \"Volatility State: #{analysis[:volatility]}\"\nputs \"ATR: $#{analysis[:atr]} (#{analysis[:atr_ratio]}x average)\"\nputs \"Bandwidth: #{analysis[:bandwidth]}%\"\nputs \"%B: #{analysis[:percent_b]}%\"\nputs \"\\nPrice: $#{analysis[:price]}\"\nputs \"Upper Band: $#{analysis[:upper]}\"\nputs \"Middle Band: $#{analysis[:middle]}\"\nputs \"Lower Band: $#{analysis[:lower]}\"\nputs \"\\nSignal:\"\nputs \"Action: #{analysis[:signal][:action]}\"\nputs \"Reason: #{analysis[:signal][:reason]}\"\nputs \"Setup: #{analysis[:signal][:setup]}\"\n</code></pre>"},{"location":"examples/volatility-analysis/#see-also","title":"See Also","text":"<ul> <li>Trend Analysis Examples</li> <li>Momentum Trading Examples</li> <li>ATR Indicator</li> <li>Bollinger Bands</li> </ul>"},{"location":"getting-started/basic-usage/","title":"Basic Usage","text":"<p>Learn the fundamentals of using SQA::TAI in your Ruby applications.</p>"},{"location":"getting-started/basic-usage/#requiring-the-library","title":"Requiring the Library","text":"<pre><code>require 'sqa/tai'\n</code></pre>"},{"location":"getting-started/basic-usage/#simple-indicator-calculation","title":"Simple Indicator Calculation","text":"<pre><code># Sample price data\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95]\n\n# Calculate Simple Moving Average\nsma = SQA::TAI.sma(prices, period: 5)\n\n# Calculate Relative Strength Index\nrsi = SQA::TAI.rsi(prices, period: 14)\n\n# Calculate Bollinger Bands (returns three arrays)\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n</code></pre>"},{"location":"getting-started/basic-usage/#working-with-multiple-return-values","title":"Working with Multiple Return Values","text":"<p>Some indicators return multiple arrays:</p> <pre><code># MACD returns three arrays: macd line, signal line, histogram\nmacd, signal, histogram = SQA::TAI.macd(prices)\n\n# Bollinger Bands returns three arrays: upper, middle, lower\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\n# Stochastic returns two arrays: slowk, slowd\nslowk, slowd = SQA::TAI.stoch(high, low, close)\n</code></pre>"},{"location":"getting-started/basic-usage/#using-keyword-arguments","title":"Using Keyword Arguments","text":"<p>All parameters use keyword arguments for clarity:</p> <pre><code># Explicit parameter names\nsma = SQA::TAI.sma(prices, period: 10)\nema = SQA::TAI.ema(prices, period: 12)\nrsi = SQA::TAI.rsi(prices, period: 14)\n\n# Custom Bollinger Bands settings\nupper, middle, lower = SQA::TAI.bbands(\n  prices,\n  period: 20,\n  nbdev_up: 2.0,\n  nbdev_down: 2.0\n)\n</code></pre>"},{"location":"getting-started/basic-usage/#working-with-ohlc-data","title":"Working with OHLC Data","text":"<p>For candlestick patterns and some indicators, you need OHLC (Open, High, Low, Close) data:</p> <pre><code># OHLC arrays (all must be same length)\nopen   = [100.0, 101.0, 102.0, 101.5, 103.0]\nhigh   = [102.0, 103.0, 104.0, 103.0, 105.0]\nlow    = [99.5, 100.0, 101.0, 100.5, 102.0]\nclose  = [101.0, 102.0, 101.5, 103.0, 104.0]\n\n# Calculate Average True Range\natr = SQA::TAI.atr(high, low, close, period: 14)\n\n# Detect candlestick patterns\ndoji = SQA::TAI.cdl_doji(open, high, low, close)\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\n</code></pre>"},{"location":"getting-started/basic-usage/#handling-return-values","title":"Handling Return Values","text":"<p>Indicators return arrays, typically with leading nil values for the warmup period:</p> <pre><code>prices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08]\n\n# 5-period SMA requires 5 values to start calculating\nsma = SQA::TAI.sma(prices, period: 5)\n\n# sma will have nils for first 4 values:\n# [nil, nil, nil, nil, 44.904, 45.118, ...]\n\n# Get the most recent value\ncurrent_sma = sma.last\n\n# Get valid values only\nvalid_sma = sma.compact\n</code></pre>"},{"location":"getting-started/basic-usage/#error-handling","title":"Error Handling","text":"<pre><code>begin\n  result = SQA::TAI.sma(prices, period: 30)\nrescue SQA::TAI::TAINotInstalledError =&gt; e\n  puts \"TA-Lib C library not found: #{e.message}\"\n  puts \"Install with: brew install ta-lib\"\nrescue SQA::TAI::InvalidParameterError =&gt; e\n  puts \"Invalid parameters: #{e.message}\"\nrescue =&gt; e\n  puts \"Unexpected error: #{e.message}\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#checking-availability","title":"Checking Availability","text":"<pre><code># Check if TA-Lib is properly installed\nif SQA::TAI.available?\n  puts \"TA-Lib is ready to use!\"\nelse\n  puts \"TA-Lib not found. Please install it first.\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#common-patterns","title":"Common Patterns","text":""},{"location":"getting-started/basic-usage/#moving-average-crossover","title":"Moving Average Crossover","text":"<pre><code>prices = load_historical_prices('AAPL')\n\n# Calculate two moving averages\nfast_ma = SQA::TAI.sma(prices, period: 50)\nslow_ma = SQA::TAI.sma(prices, period: 200)\n\n# Check for golden cross\nif fast_ma[-2] &lt; slow_ma[-2] &amp;&amp; fast_ma[-1] &gt; slow_ma[-1]\n  puts \"Golden Cross detected - Bullish signal!\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#rsi-overboughtoversold","title":"RSI Overbought/Oversold","text":"<pre><code>prices = load_historical_prices('TSLA')\nrsi = SQA::TAI.rsi(prices, period: 14)\n\ncase rsi.last\nwhen 0...30\n  puts \"Oversold - potential buy signal\"\nwhen 70..100\n  puts \"Overbought - potential sell signal\"\nelse\n  puts \"Neutral\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#bollinger-band-squeeze","title":"Bollinger Band Squeeze","text":"<pre><code>prices = load_historical_prices('MSFT')\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\n# Calculate band width\nbandwidth = upper.last - lower.last\nprice = prices.last\n\nif price &gt; upper.last\n  puts \"Price above upper band - overbought\"\nelsif price &lt; lower.last\n  puts \"Price below lower band - oversold\"\nelse\n  puts \"Price within bands - normal\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#advanced-moving-averages","title":"Advanced Moving Averages","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\n# Double Exponential Moving Average (faster response)\ndema = SQA::TAI.dema(prices, period: 20)\n\n# Kaufman Adaptive Moving Average (adapts to market conditions)\nkama = SQA::TAI.kama(prices, period: 30)\n\n# Triple Exponential Moving Average T3 (smooth)\nt3 = SQA::TAI.t3(prices, period: 5, vfactor: 0.7)\n</code></pre>"},{"location":"getting-started/basic-usage/#statistical-analysis","title":"Statistical Analysis","text":"<pre><code>stock_prices = load_historical_prices('AAPL')\nmarket_prices = load_historical_prices('SPY')\n\n# Calculate correlation between stock and market\ncorrelation = SQA::TAI.correl(stock_prices, market_prices, period: 30)\nputs \"Correlation: #{correlation.last}\"\n\n# Calculate beta (systematic risk)\nbeta = SQA::TAI.beta(stock_prices, market_prices, period: 30)\nputs \"Beta: #{beta.last}\"\n\n# Calculate standard deviation (volatility)\nstddev = SQA::TAI.stddev(stock_prices, period: 20)\nputs \"Volatility: #{stddev.last}\"\n</code></pre>"},{"location":"getting-started/basic-usage/#cycle-detection","title":"Cycle Detection","text":"<pre><code>prices = load_historical_prices('BTC-USD')\n\n# Detect dominant cycle period\ncycle_period = SQA::TAI.ht_dcperiod(prices)\nputs \"Dominant cycle: #{cycle_period.last} days\"\n\n# Detect trend vs cycle mode\ntrend_mode = SQA::TAI.ht_trendmode(prices)\nif trend_mode.last == 1\n  puts \"Market is trending\"\nelse\n  puts \"Market is cycling/ranging\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#multiple-candlestick-patterns","title":"Multiple Candlestick Patterns","text":"<pre><code># Detect various reversal patterns\nmorning_star = SQA::TAI.cdl_morningstar(open, high, low, close)\nevening_star = SQA::TAI.cdl_eveningstar(open, high, low, close)\nharami = SQA::TAI.cdl_harami(open, high, low, close)\n\n# Check for bullish reversal\nif morning_star.last == 100\n  puts \"Morning Star detected - potential bullish reversal\"\nend\n\n# Check for bearish reversal\nif evening_star.last == -100\n  puts \"Evening Star detected - potential bearish reversal\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#next-steps","title":"Next Steps","text":"<ul> <li>Indicator Reference - Explore all available indicators</li> <li>API Reference - Detailed API documentation</li> <li>Examples - Real-world usage examples</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>This guide will help you install SQA::TAI and its dependencies.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>SQA::TAI requires:</p> <ul> <li>Ruby &gt;= 3.1.0</li> <li>TA-Lib C library &gt;= 0.4.0</li> </ul>"},{"location":"getting-started/installation/#step-1-install-ta-lib-c-library","title":"Step 1: Install TA-Lib C Library","text":"<p>The TA-Lib C library must be installed before the Ruby gem.</p>"},{"location":"getting-started/installation/#macos","title":"macOS","text":"<p>Using Homebrew:</p> <pre><code>brew install ta-lib\n</code></pre>"},{"location":"getting-started/installation/#ubuntudebian","title":"Ubuntu/Debian","text":"<p>Build from source:</p> <pre><code># Download TA-Lib\nwget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz\ntar -xzf ta-lib-0.4.0-src.tar.gz\ncd ta-lib/\n\n# Build and install\n./configure --prefix=/usr\nmake\nsudo make install\n\n# Update library cache\nsudo ldconfig\n</code></pre>"},{"location":"getting-started/installation/#centosrhelfedora","title":"CentOS/RHEL/Fedora","text":"<pre><code># Download and extract\nwget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz\ntar -xzf ta-lib-0.4.0-src.tar.gz\ncd ta-lib/\n\n# Build and install\n./configure --prefix=/usr\nmake\nsudo make install\n\n# Update library cache\nsudo ldconfig\n</code></pre>"},{"location":"getting-started/installation/#windows","title":"Windows","text":"<ol> <li>Download the MSI installer from ta-lib.org</li> <li>Run the installer</li> <li>Add TA-Lib to your PATH</li> </ol>"},{"location":"getting-started/installation/#step-2-install-ruby-gem","title":"Step 2: Install Ruby Gem","text":""},{"location":"getting-started/installation/#using-bundler-recommended","title":"Using Bundler (Recommended)","text":"<p>Add to your <code>Gemfile</code>:</p> <pre><code>gem 'sqa-tai'\n</code></pre> <p>Then run:</p> <pre><code>bundle install\n</code></pre>"},{"location":"getting-started/installation/#using-rubygems","title":"Using RubyGems","text":"<pre><code>gem install sqa-tai\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>Test that everything is working:</p> <pre><code>require 'sqa/tai'\n\n# Check if TA-Lib is available\nif SQA::TAI.available?\n  puts \"\u2713 TA-Lib is installed and ready!\"\n  puts \"Version: #{SQA::TAI::VERSION}\"\nelse\n  puts \"\u2717 TA-Lib C library not found\"\nend\n\n# Try a simple calculation\nprices = [10, 11, 12, 13, 14, 15]\nsma = SQA::TAI.sma(prices, period: 3)\nputs \"SMA test: #{sma}\"\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#ta-lib-not-found-error","title":"\"TA-Lib not found\" Error","text":"<p>If you get a \"TA-Lib not installed\" error:</p> <ol> <li> <p>Verify TA-Lib is installed:    <pre><code># On Unix/Linux/macOS\nldconfig -p | grep talib\n# Should show: libta_lib.so\n</code></pre></p> </li> <li> <p>Check library path:    <pre><code># Find where TA-Lib was installed\nsudo find / -name \"libta_lib.so*\" 2&gt;/dev/null\n</code></pre></p> </li> <li> <p>Set library path (if needed):    <pre><code>export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH\n</code></pre></p> </li> </ol>"},{"location":"getting-started/installation/#permission-errors","title":"Permission Errors","text":"<p>If you get permission errors during installation:</p> <pre><code># Use sudo for system installation\nsudo gem install sqa-tai\n\n# Or use a Ruby version manager (recommended)\nrbenv install 3.3.0\nrbenv global 3.3.0\ngem install sqa-tai\n</code></pre>"},{"location":"getting-started/installation/#build-failures-on-linux","title":"Build Failures on Linux","text":"<p>If compilation fails:</p> <pre><code># Install build tools\nsudo apt-get install build-essential\n\n# Or on CentOS/RHEL\nsudo yum groupinstall \"Development Tools\"\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide</li> <li>Basic Usage</li> <li>API Reference</li> </ul>"},{"location":"getting-started/pattern-recognition/","title":"Pattern Recognition Guide","text":"<p>Learn how to identify and trade candlestick patterns using SQA::TAI. This guide covers the fundamentals of pattern recognition, signal interpretation, and practical trading strategies.</p>"},{"location":"getting-started/pattern-recognition/#introduction-to-candlestick-patterns","title":"Introduction to Candlestick Patterns","text":"<p>Candlestick patterns are formations created by one or more candlesticks that provide insights into market psychology and potential price movements. Originating in 18<sup>th</sup> century Japan, these patterns remain powerful tools for modern traders.</p>"},{"location":"getting-started/pattern-recognition/#why-use-candlestick-patterns","title":"Why Use Candlestick Patterns?","text":"<ul> <li>Visual Clarity: Easy to spot and interpret on charts</li> <li>Market Psychology: Reveal sentiment shifts between bulls and bears</li> <li>Early Signals: Often indicate reversals before other indicators</li> <li>Universal Application: Work across all markets and timeframes</li> <li>Proven History: Centuries of successful trading applications</li> </ul>"},{"location":"getting-started/pattern-recognition/#getting-started-with-pattern-recognition","title":"Getting Started with Pattern Recognition","text":""},{"location":"getting-started/pattern-recognition/#basic-pattern-detection","title":"Basic Pattern Detection","text":"<p>All pattern recognition functions in SQA::TAI follow a consistent API:</p> <pre><code>require 'sqa/tai'\n\n# OHLC data required for all patterns\nopen  = [100.0, 101.0, 102.0, 101.5, 103.0]\nhigh  = [102.0, 103.0, 104.0, 103.0, 105.0]\nlow   = [99.5, 100.0, 101.0, 100.5, 102.0]\nclose = [101.0, 102.0, 101.5, 103.0, 104.0]\n\n# Detect a pattern\nresult = SQA::TAI.cdl_hammer(open, high, low, close)\n\n# Interpret the signal\nsignal = result.last\ncase signal\nwhen 100\n  puts \"Bullish Hammer detected!\"\nwhen -100\n  puts \"Bearish pattern detected!\"\nwhen 0\n  puts \"No pattern detected\"\nend\n</code></pre>"},{"location":"getting-started/pattern-recognition/#understanding-pattern-signals","title":"Understanding Pattern Signals","text":"<p>Pattern functions return integer arrays with these values:</p> Value Meaning Action 0 No pattern detected Continue monitoring +100 Bullish pattern Consider long positions -100 Bearish pattern Consider short positions +200/-200 Strong pattern Higher confidence signals"},{"location":"getting-started/pattern-recognition/#pattern-categories","title":"Pattern Categories","text":""},{"location":"getting-started/pattern-recognition/#1-single-candlestick-patterns","title":"1. Single Candlestick Patterns","text":"<p>Formed by one candle, these patterns offer quick signals:</p> <pre><code># Doji - Indecision\ndoji = SQA::TAI.cdl_doji(open, high, low, close)\n\n# Hammer - Bullish reversal\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\n\n# Shooting Star - Bearish reversal\nshooting_star = SQA::TAI.cdl_shootingstar(open, high, low, close)\n\n# Spinning Top - Indecision\nspinning_top = SQA::TAI.cdl_spinningtop(open, high, low, close)\n</code></pre> <p>Characteristics: - Quick to form (1 candle) - Less reliable alone - Best with confirmation - Good for intraday trading</p>"},{"location":"getting-started/pattern-recognition/#2-two-candlestick-patterns","title":"2. Two Candlestick Patterns","text":"<p>More reliable, requiring two consecutive candles:</p> <pre><code># Engulfing - Strong reversal\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n\n# Harami - Potential reversal\nharami = SQA::TAI.cdl_harami(open, high, low, close)\n\n# Piercing Pattern - Bullish reversal\npiercing = SQA::TAI.cdl_piercing(open, high, low, close)\n\n# Dark Cloud Cover - Bearish reversal\ndark_cloud = SQA::TAI.cdl_darkcloudcover(open, high, low, close)\n</code></pre> <p>Characteristics: - More reliable than single patterns - Clearer market intent - Better risk/reward setups - Suitable for swing trading</p>"},{"location":"getting-started/pattern-recognition/#3-three-candlestick-patterns","title":"3. Three+ Candlestick Patterns","text":"<p>Most reliable, showing sustained market behavior:</p> <pre><code># Morning Star - Strong bullish reversal\nmorning_star = SQA::TAI.cdl_morningstar(open, high, low, close)\n\n# Evening Star - Strong bearish reversal\nevening_star = SQA::TAI.cdl_eveningstar(open, high, low, close)\n\n# Three White Soldiers - Strong bullish continuation\nthree_white = SQA::TAI.cdl_3whitesoldiers(open, high, low, close)\n\n# Three Black Crows - Strong bearish continuation\nthree_black = SQA::TAI.cdl_3blackcrows(open, high, low, close)\n</code></pre> <p>Characteristics: - Highest reliability - Best for position trading - Clearest trend signals - Lower false signal rate</p>"},{"location":"getting-started/pattern-recognition/#pattern-scanning-strategy","title":"Pattern Scanning Strategy","text":""},{"location":"getting-started/pattern-recognition/#scanning-multiple-patterns","title":"Scanning Multiple Patterns","text":"<pre><code>require 'sqa/tai'\n\n# Load market data\nopen, high, low, close = load_ohlc_data('AAPL')\n\n# Define patterns to scan\npatterns = {\n  'Hammer' =&gt; :cdl_hammer,\n  'Shooting Star' =&gt; :cdl_shootingstar,\n  'Engulfing' =&gt; :cdl_engulfing,\n  'Harami' =&gt; :cdl_harami,\n  'Morning Star' =&gt; :cdl_morningstar,\n  'Evening Star' =&gt; :cdl_eveningstar,\n  'Doji' =&gt; :cdl_doji,\n  'Hanging Man' =&gt; :cdl_hangingman\n}\n\n# Scan for active patterns\nputs \"Pattern Scan Results for AAPL\"\nputs \"=\" * 50\n\npatterns.each do |name, method|\n  result = SQA::TAI.send(method, open, high, low, close)\n  signal = result.last\n\n  next if signal == 0\n\n  sentiment = signal &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n  strength = signal.abs == 200 ? \"STRONG\" : \"MODERATE\"\n\n  puts \"#{name}: #{sentiment} (#{strength})\"\n  puts \"Signal Value: #{signal}\"\n  puts \"\"\nend\n</code></pre>"},{"location":"getting-started/pattern-recognition/#multi-market-scanner","title":"Multi-Market Scanner","text":"<pre><code>require 'sqa/tai'\n\nsymbols = ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA']\n\nputs \"Market-Wide Pattern Scanner\"\nputs \"=\" * 60\n\nsymbols.each do |symbol|\n  open, high, low, close = load_ohlc_data(symbol)\n\n  # Scan for strong reversal patterns\n  hammer = SQA::TAI.cdl_hammer(open, high, low, close)\n  engulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n  morning_star = SQA::TAI.cdl_morningstar(open, high, low, close)\n\n  signals = []\n  signals &lt;&lt; \"Hammer\" if hammer.last == 100\n  signals &lt;&lt; \"Bullish Engulfing\" if engulfing.last == 100\n  signals &lt;&lt; \"Morning Star\" if morning_star.last == 100\n\n  if signals.any?\n    puts \"\\n#{symbol} - Bullish Patterns Detected:\"\n    signals.each { |s| puts \"  - #{s}\" }\n  end\nend\n</code></pre>"},{"location":"getting-started/pattern-recognition/#pattern-confirmation-techniques","title":"Pattern Confirmation Techniques","text":""},{"location":"getting-started/pattern-recognition/#1-trend-context-confirmation","title":"1. Trend Context Confirmation","text":"<pre><code># Load data\nopen, high, low, close = load_ohlc_data('MSFT')\n\n# Identify trend\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\ntrend = if close.last &gt; sma_50.last &amp;&amp; sma_50.last &gt; sma_200.last\n  \"UPTREND\"\nelsif close.last &lt; sma_50.last &amp;&amp; sma_50.last &lt; sma_200.last\n  \"DOWNTREND\"\nelse\n  \"SIDEWAYS\"\nend\n\n# Detect reversal pattern\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\n\n# Pattern context matters\nif hammer.last == 100\n  if trend == \"DOWNTREND\"\n    puts \"STRONG SIGNAL: Bullish hammer in downtrend\"\n    puts \"High probability reversal setup\"\n  elsif trend == \"UPTREND\"\n    puts \"WEAK SIGNAL: Bullish hammer in uptrend\"\n    puts \"May be continuation, not reversal\"\n  end\nend\n</code></pre>"},{"location":"getting-started/pattern-recognition/#2-volume-confirmation","title":"2. Volume Confirmation","text":"<pre><code># Load data with volume\nopen, high, low, close, volume = load_ohlc_volume('TSLA')\n\n# Calculate average volume\navg_volume = volume[-20..-1].sum / 20.0\n\n# Detect pattern\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n\nif engulfing.last != 0\n  pattern_type = engulfing.last &gt; 0 ? \"Bullish\" : \"Bearish\"\n  volume_ratio = volume.last / avg_volume\n\n  puts \"#{pattern_type} Engulfing Pattern\"\n  puts \"Volume Ratio: #{volume_ratio.round(2)}x average\"\n\n  if volume_ratio &gt; 1.5\n    puts \"CONFIRMED: High volume supports pattern\"\n  elsif volume_ratio &lt; 0.8\n    puts \"WEAK: Low volume, pattern less reliable\"\n  else\n    puts \"NEUTRAL: Normal volume\"\n  end\nend\n</code></pre>"},{"location":"getting-started/pattern-recognition/#3-momentum-confirmation","title":"3. Momentum Confirmation","text":"<pre><code># Load data\nopen, high, low, close = load_ohlc_data('NVDA')\n\n# Detect pattern\nmorning_star = SQA::TAI.cdl_morningstar(open, high, low, close)\n\n# Check momentum\nrsi = SQA::TAI.rsi(close, period: 14)\nmacd, signal, hist = SQA::TAI.macd(close)\n\nif morning_star.last == 100\n  puts \"Morning Star Pattern Detected\"\n\n  # Momentum confirmation\n  confirmations = 0\n  confirmations += 1 if rsi.last &lt; 40  # Oversold\n  confirmations += 1 if macd.last &gt; signal.last  # MACD bullish\n  confirmations += 1 if hist.last &gt; hist[-1]  # MACD histogram rising\n\n  puts \"Confirmations: #{confirmations}/3\"\n\n  if confirmations &gt;= 2\n    puts \"STRONG BUY: Pattern + momentum aligned\"\n  elsif confirmations == 1\n    puts \"MODERATE: Some confirmation\"\n  else\n    puts \"WEAK: No momentum confirmation\"\n  end\nend\n</code></pre>"},{"location":"getting-started/pattern-recognition/#4-supportresistance-confirmation","title":"4. Support/Resistance Confirmation","text":"<pre><code># Identify support level\ndef find_support(low_prices, lookback = 20)\n  low_prices[-lookback..-1].min\nend\n\n# Load data\nopen, high, low, close = load_ohlc_data('AAPL')\n\n# Find support\nsupport = find_support(low)\n\n# Detect hammer\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\n\nif hammer.last == 100\n  distance_from_support = ((low.last - support) / support * 100).round(2)\n\n  puts \"Hammer Pattern Detected\"\n  puts \"Distance from Support: #{distance_from_support}%\"\n\n  if distance_from_support.abs &lt; 1.0\n    puts \"EXCELLENT: Pattern at key support\"\n    puts \"Very high probability setup\"\n  elsif distance_from_support.abs &lt; 3.0\n    puts \"GOOD: Pattern near support\"\n  else\n    puts \"NEUTRAL: No support nearby\"\n  end\nend\n</code></pre>"},{"location":"getting-started/pattern-recognition/#complete-pattern-trading-system","title":"Complete Pattern Trading System","text":"<p>Here's a comprehensive example integrating multiple confirmation techniques:</p> <pre><code>require 'sqa/tai'\n\nclass PatternTradingSystem\n  def initialize(symbol)\n    @symbol = symbol\n    @open, @high, @low, @close, @volume = load_ohlc_volume(symbol)\n  end\n\n  def analyze\n    puts \"=\" * 70\n    puts \"Pattern Analysis: #{@symbol}\"\n    puts \"=\" * 70\n\n    # Step 1: Market Context\n    analyze_market_context\n\n    # Step 2: Pattern Detection\n    patterns = detect_patterns\n\n    # Step 3: Confirmation Analysis\n    patterns.each do |pattern|\n      analyze_pattern_with_confirmation(pattern)\n    end\n  end\n\n  private\n\n  def analyze_market_context\n    sma_50 = SQA::TAI.sma(@close, period: 50)\n    sma_200 = SQA::TAI.sma(@close, period: 200)\n    atr = SQA::TAI.atr(@high, @low, @close, period: 14)\n    atr_pct = (atr.last / @close.last * 100).round(2)\n\n    @trend = if @close.last &gt; sma_50.last &amp;&amp; sma_50.last &gt; sma_200.last\n      \"UPTREND\"\n    elsif @close.last &lt; sma_50.last &amp;&amp; sma_50.last &lt; sma_200.last\n      \"DOWNTREND\"\n    else\n      \"SIDEWAYS\"\n    end\n\n    @avg_volume = @volume[-20..-1].sum / 20.0\n\n    puts \"\\n1. Market Context\"\n    puts \"   Trend: #{@trend}\"\n    puts \"   Price: $#{@close.last.round(2)}\"\n    puts \"   Volatility (ATR): #{atr_pct}%\"\n    puts \"   Avg Volume: #{@avg_volume.round(0)}\"\n  end\n\n  def detect_patterns\n    patterns = []\n\n    # Define patterns to check\n    pattern_checks = {\n      'Hammer' =&gt; [:cdl_hammer, :bullish],\n      'Hanging Man' =&gt; [:cdl_hangingman, :bearish],\n      'Shooting Star' =&gt; [:cdl_shootingstar, :bearish],\n      'Engulfing' =&gt; [:cdl_engulfing, :either],\n      'Harami' =&gt; [:cdl_harami, :either],\n      'Morning Star' =&gt; [:cdl_morningstar, :bullish],\n      'Evening Star' =&gt; [:cdl_eveningstar, :bearish],\n      'Doji' =&gt; [:cdl_doji, :indecision]\n    }\n\n    puts \"\\n2. Pattern Detection\"\n\n    pattern_checks.each do |name, (method, direction)|\n      result = SQA::TAI.send(method, @open, @high, @low, @close)\n      signal = result.last\n\n      next if signal == 0\n\n      patterns &lt;&lt; {\n        name: name,\n        signal: signal,\n        direction: direction,\n        sentiment: signal &gt; 0 ? :bullish : :bearish\n      }\n\n      puts \"   \u2713 #{name} detected (#{signal})\"\n    end\n\n    puts \"   Found #{patterns.length} active pattern(s)\" if patterns.empty?\n\n    patterns\n  end\n\n  def analyze_pattern_with_confirmation(pattern)\n    puts \"\\n\" + \"=\" * 70\n    puts \"Pattern: #{pattern[:name]}\"\n    puts \"Signal: #{pattern[:signal]} (#{pattern[:sentiment].to_s.upcase})\"\n    puts \"=\" * 70\n\n    score = 0\n    max_score = 6\n\n    # Confirmation 1: Trend Context\n    puts \"\\n\u25b8 Trend Context:\"\n    if @trend == \"UPTREND\" &amp;&amp; pattern[:sentiment] == :bullish\n      score += 2\n      puts \"  \u2713 Bullish pattern in uptrend (continuation)\"\n    elsif @trend == \"DOWNTREND\" &amp;&amp; pattern[:sentiment] == :bullish\n      score += 2\n      puts \"  \u2713\u2713 Bullish pattern in downtrend (reversal) - STRONG\"\n    elsif @trend == \"DOWNTREND\" &amp;&amp; pattern[:sentiment] == :bearish\n      score += 2\n      puts \"  \u2713 Bearish pattern in downtrend (continuation)\"\n    elsif @trend == \"UPTREND\" &amp;&amp; pattern[:sentiment] == :bearish\n      score += 2\n      puts \"  \u2713\u2713 Bearish pattern in uptrend (reversal) - STRONG\"\n    else\n      puts \"  - Neutral trend context\"\n    end\n\n    # Confirmation 2: Volume\n    puts \"\\n\u25b8 Volume Confirmation:\"\n    volume_ratio = @volume.last / @avg_volume\n    if volume_ratio &gt; 1.5\n      score += 2\n      puts \"  \u2713\u2713 High volume (#{volume_ratio.round(2)}x) - STRONG\"\n    elsif volume_ratio &gt; 1.0\n      score += 1\n      puts \"  \u2713 Above average volume (#{volume_ratio.round(2)}x)\"\n    else\n      puts \"  - Below average volume (#{volume_ratio.round(2)}x)\"\n    end\n\n    # Confirmation 3: Momentum\n    puts \"\\n\u25b8 Momentum Confirmation:\"\n    rsi = SQA::TAI.rsi(@close, period: 14)\n    macd, signal_line, hist = SQA::TAI.macd(@close)\n\n    if pattern[:sentiment] == :bullish\n      if rsi.last &lt; 40\n        score += 1\n        puts \"  \u2713 RSI oversold (#{rsi.last.round(2)})\"\n      end\n      if macd.last &gt; signal_line.last\n        score += 1\n        puts \"  \u2713 MACD bullish\"\n      end\n    elsif pattern[:sentiment] == :bearish\n      if rsi.last &gt; 60\n        score += 1\n        puts \"  \u2713 RSI overbought (#{rsi.last.round(2)})\"\n      end\n      if macd.last &lt; signal_line.last\n        score += 1\n        puts \"  \u2713 MACD bearish\"\n      end\n    end\n\n    # Final Assessment\n    puts \"\\n\" + \"-\" * 70\n    puts \"SCORE: #{score}/#{max_score}\"\n\n    if score &gt;= 5\n      puts \"RATING: \u2605\u2605\u2605\u2605\u2605 EXCELLENT - High probability setup\"\n      generate_trade_plan(pattern, :high)\n    elsif score &gt;= 3\n      puts \"RATING: \u2605\u2605\u2605\u2606\u2606 GOOD - Moderate probability\"\n      generate_trade_plan(pattern, :moderate)\n    else\n      puts \"RATING: \u2605\u2606\u2606\u2606\u2606 WEAK - Low probability\"\n      puts \"Action: Wait for better confirmation\"\n    end\n  end\n\n  def generate_trade_plan(pattern, confidence)\n    puts \"\\n\u25b8 Trade Plan:\"\n\n    atr = SQA::TAI.atr(@high, @low, @close, period: 14)\n    current_price = @close.last\n\n    if pattern[:sentiment] == :bullish\n      entry = current_price\n      stop = current_price - (2 * atr.last)\n      target1 = current_price + (2 * atr.last)\n      target2 = current_price + (3 * atr.last)\n\n      puts \"  Direction: LONG\"\n      puts \"  Entry: $#{entry.round(2)}\"\n      puts \"  Stop Loss: $#{stop.round(2)} (-#{((entry - stop) / entry * 100).round(2)}%)\"\n      puts \"  Target 1: $#{target1.round(2)} (+#{((target1 - entry) / entry * 100).round(2)}%)\"\n      puts \"  Target 2: $#{target2.round(2)} (+#{((target2 - entry) / entry * 100).round(2)}%)\"\n    else\n      entry = current_price\n      stop = current_price + (2 * atr.last)\n      target1 = current_price - (2 * atr.last)\n      target2 = current_price - (3 * atr.last)\n\n      puts \"  Direction: SHORT\"\n      puts \"  Entry: $#{entry.round(2)}\"\n      puts \"  Stop Loss: $#{stop.round(2)} (+#{((stop - entry) / entry * 100).round(2)}%)\"\n      puts \"  Target 1: $#{target1.round(2)} (-#{((entry - target1) / entry * 100).round(2)}%)\"\n      puts \"  Target 2: $#{target2.round(2)} (-#{((entry - target2) / entry * 100).round(2)}%)\"\n    end\n\n    position_size = if confidence == :high\n      \"100% of normal size\"\n    elsif confidence == :moderate\n      \"50-75% of normal size\"\n    else\n      \"25-50% of normal size\"\n    end\n\n    puts \"  Position Size: #{position_size}\"\n  end\nend\n\n# Run the system\nsystem = PatternTradingSystem.new('AAPL')\nsystem.analyze\n</code></pre>"},{"location":"getting-started/pattern-recognition/#best-practices","title":"Best Practices","text":""},{"location":"getting-started/pattern-recognition/#1-never-trade-patterns-alone","title":"1. Never Trade Patterns Alone","text":"<p>Always confirm patterns with: - Trend analysis - Volume - Momentum indicators - Support/Resistance levels</p>"},{"location":"getting-started/pattern-recognition/#2-wait-for-confirmation","title":"2. Wait for Confirmation","text":"<p>Don't enter immediately on pattern detection. Wait for: - Next candle closing in pattern direction - Volume increase - Break of key levels</p>"},{"location":"getting-started/pattern-recognition/#3-use-proper-risk-management","title":"3. Use Proper Risk Management","text":"<ul> <li>Always use stop losses</li> <li>Risk only 1-2% per trade</li> <li>Calculate position size based on stop distance</li> <li>Have predefined profit targets</li> </ul>"},{"location":"getting-started/pattern-recognition/#4-consider-context","title":"4. Consider Context","text":"<p>Patterns are more reliable when they: - Form at key support/resistance - Appear after strong trends - Occur on higher timeframes - Align with overall market direction</p>"},{"location":"getting-started/pattern-recognition/#5-track-performance","title":"5. Track Performance","text":"<p>Keep a trading journal: - Which patterns work best - What confirmation methods help most - Win rate by pattern type - Adjust strategy based on results</p>"},{"location":"getting-started/pattern-recognition/#common-mistakes-to-avoid","title":"Common Mistakes to Avoid","text":"<ol> <li>Overtrading: Not every pattern is worth trading</li> <li>Ignoring Trend: Fighting the overall trend reduces success</li> <li>No Confirmation: Trading patterns without supporting evidence</li> <li>Poor Risk Management: Not using stops or risking too much</li> <li>Cherry Picking: Only seeing patterns you want to see</li> </ol>"},{"location":"getting-started/pattern-recognition/#next-steps","title":"Next Steps","text":"<ol> <li>Practice Pattern Recognition: Study historical charts</li> <li>Paper Trade: Test strategies without real money</li> <li>Start Small: Begin with proven high-probability patterns</li> <li>Keep Learning: Study why patterns succeed or fail</li> <li>Build Systems: Automate scanning and analysis</li> </ol>"},{"location":"getting-started/pattern-recognition/#see-also","title":"See Also","text":"<ul> <li>Candlestick Patterns Index</li> <li>Basic Usage Guide</li> <li>API Reference</li> <li>Indicator Categories</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Get up and running with SQA::TAI in minutes.</p>"},{"location":"getting-started/quick-start/#your-first-indicator","title":"Your First Indicator","text":"<pre><code>require 'sqa/tai'\n\n# Sample price data\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 45.89, 46.03,\n          45.61, 46.28, 46.28, 46.00, 46.03, 46.41,\n          46.22, 45.64]\n\n# Calculate Simple Moving Average\nsma = SQA::TAI.sma(prices, period: 5)\nputs \"5-period SMA: #{sma.last}\"\n\n# Calculate RSI\nrsi = SQA::TAI.rsi(prices, period: 14)\nputs \"14-period RSI: #{rsi.last}\"\n</code></pre>"},{"location":"getting-started/quick-start/#common-patterns","title":"Common Patterns","text":""},{"location":"getting-started/quick-start/#moving-average-crossover","title":"Moving Average Crossover","text":"<pre><code>prices = load_stock_prices('AAPL')\n\n# Calculate fast and slow moving averages\nsma_fast = SQA::TAI.sma(prices, period: 50)\nsma_slow = SQA::TAI.sma(prices, period: 200)\n\n# Check for golden cross\nif sma_fast.last &gt; sma_slow.last\n  puts \"Golden Cross detected - Bullish signal\"\nelse\n  puts \"Death Cross - Bearish signal\"\nend\n</code></pre>"},{"location":"getting-started/quick-start/#rsi-overboughtoversold","title":"RSI Overbought/Oversold","text":"<pre><code>prices = load_stock_prices('TSLA')\nrsi = SQA::TAI.rsi(prices, period: 14)\n\ncase rsi.last\nwhen 0...30\n  puts \"Oversold - Potential buy opportunity\"\nwhen 70..100\n  puts \"Overbought - Potential sell opportunity\"\nelse\n  puts \"Neutral zone\"\nend\n</code></pre>"},{"location":"getting-started/quick-start/#bollinger-bands","title":"Bollinger Bands","text":"<pre><code>prices = load_stock_prices('MSFT')\n\n# Calculate Bollinger Bands\nupper, middle, lower = SQA::TAI.bbands(\n  prices,\n  period: 20,\n  nbdev_up: 2.0,\n  nbdev_down: 2.0\n)\n\ncurrent_price = prices.last\n\nif current_price &gt; upper.last\n  puts \"Price above upper band - Overbought\"\nelsif current_price &lt; lower.last\n  puts \"Price below lower band - Oversold\"\nelse\n  puts \"Price within bands - Normal\"\nend\n</code></pre>"},{"location":"getting-started/quick-start/#working-with-ohlcv-data","title":"Working with OHLCV Data","text":"<p>Many indicators require Open, High, Low, Close, and Volume data:</p> <pre><code># Load OHLCV data\ndata = load_ohlcv_data('SPY')\n\nopen   = data[:open]\nhigh   = data[:high]\nlow    = data[:low]\nclose  = data[:close]\nvolume = data[:volume]\n\n# Calculate ATR (volatility)\natr = SQA::TAI.atr(high, low, close, period: 14)\nputs \"14-day ATR: #{atr.last}\"\n\n# Calculate Stochastic\nslowk, slowd = SQA::TAI.stoch(high, low, close)\nputs \"Stochastic K: #{slowk.last}\"\nputs \"Stochastic D: #{slowd.last}\"\n\n# Calculate OBV (volume)\nobv = SQA::TAI.obv(close, volume)\nputs \"OBV: #{obv.last}\"\n</code></pre>"},{"location":"getting-started/quick-start/#error-handling","title":"Error Handling","text":"<p>Always handle potential errors:</p> <pre><code>begin\n  result = SQA::TAI.sma(prices, period: 30)\nrescue SQA::TAI::TAINotInstalledError =&gt; e\n  puts \"Error: TA-Lib not installed\"\n  puts e.message\nrescue SQA::TAI::InvalidParameterError =&gt; e\n  puts \"Error: Invalid parameters\"\n  puts e.message\nend\n</code></pre>"},{"location":"getting-started/quick-start/#best-practices","title":"Best Practices","text":""},{"location":"getting-started/quick-start/#1-check-availability","title":"1. Check Availability","text":"<pre><code>unless SQA::TAI.available?\n  puts \"TA-Lib is not available. Please install it.\"\n  exit 1\nend\n</code></pre>"},{"location":"getting-started/quick-start/#2-validate-data","title":"2. Validate Data","text":"<pre><code>def calculate_indicators(prices)\n  return unless prices &amp;&amp; prices.size &gt;= 14\n\n  rsi = SQA::TAI.rsi(prices, period: 14)\n  # ... rest of code\nend\n</code></pre>"},{"location":"getting-started/quick-start/#3-handle-incomplete-results","title":"3. Handle Incomplete Results","text":"<p>TA-Lib returns nil for periods where calculation isn't possible:</p> <pre><code>sma = SQA::TAI.sma(prices, period: 10)\n\n# Filter out nils\nvalid_sma = sma.compact\n\n# Or check before using\nif sma.last\n  puts \"Latest SMA: #{sma.last}\"\nelse\n  puts \"Not enough data for SMA calculation\"\nend\n</code></pre>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Basic Usage Examples</li> <li>Complete Indicator List</li> <li>API Reference</li> <li>Advanced Examples</li> </ul>"},{"location":"indicators/","title":"Technical Indicators","text":"<p>SQA::TAI provides access to 200+ technical analysis indicators from the TA-Lib C library. All indicators are accessible through simple, intuitive Ruby methods.</p>"},{"location":"indicators/#indicator-categories","title":"Indicator Categories","text":""},{"location":"indicators/#overlap-studies","title":"Overlap Studies","text":"<p>Moving averages and bands that overlay price charts:</p> <ul> <li>Simple Moving Average (SMA)</li> <li>Exponential Moving Average (EMA)</li> <li>Weighted Moving Average (WMA)</li> <li>Bollinger Bands (BBANDS)</li> </ul>"},{"location":"indicators/#momentum-indicators","title":"Momentum Indicators","text":"<p>Measure the rate of price change:</p> <ul> <li>Relative Strength Index (RSI)</li> <li>Moving Average Convergence/Divergence (MACD)</li> <li>Stochastic Oscillator (STOCH)</li> <li>Momentum (MOM)</li> </ul>"},{"location":"indicators/#volatility-indicators","title":"Volatility Indicators","text":"<p>Measure market volatility and price range:</p> <ul> <li>Average True Range (ATR)</li> <li>True Range (TRANGE)</li> </ul>"},{"location":"indicators/#volume-indicators","title":"Volume Indicators","text":"<p>Analyze trading volume:</p> <ul> <li>On Balance Volume (OBV)</li> <li>Chaikin A/D Line (AD)</li> </ul>"},{"location":"indicators/#pattern-recognition","title":"Pattern Recognition","text":"<p>Identify candlestick patterns:</p> <ul> <li>Doji</li> <li>Hammer</li> <li>Engulfing Pattern</li> <li>View All Patterns</li> </ul>"},{"location":"indicators/#cycle-indicators","title":"Cycle Indicators","text":"<p>Hilbert Transform indicators for cycle analysis:</p> <ul> <li>HT Dominant Cycle Period</li> <li>HT Trend vs Cycle Mode</li> <li>View All Cycle Indicators</li> </ul>"},{"location":"indicators/#price-transform-indicators","title":"Price Transform Indicators","text":"<p>Transform OHLC data into representative prices:</p> <ul> <li>Typical Price</li> <li>Weighted Close Price</li> <li>View All Price Transforms</li> </ul>"},{"location":"indicators/#statistical-indicators","title":"Statistical Indicators","text":"<p>Statistical functions for trend analysis:</p> <ul> <li>Linear Regression</li> <li>Standard Deviation</li> <li>View All Statistical Indicators</li> </ul>"},{"location":"indicators/#usage-overview","title":"Usage Overview","text":"<p>All indicators follow a consistent API pattern:</p> <pre><code>require 'sqa/tai'\n\n# Single input, single output\nresult = SQA::TAI.sma(prices, period: 10)\n\n# Single input, multiple outputs\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\n# Multiple inputs (OHLC data)\natr = SQA::TAI.atr(high, low, close, period: 14)\n</code></pre>"},{"location":"indicators/#common-parameters","title":"Common Parameters","text":"<p>Most indicators accept these standard parameters:</p> Parameter Description Default <code>period</code> Time period for calculation Varies by indicator <code>ma_type</code> Moving average type (0=SMA, 1=EMA, etc.) 0 (SMA) <code>nbdev_up</code> Standard deviations for upper band 2.0 <code>nbdev_down</code> Standard deviations for lower band 2.0"},{"location":"indicators/#return-values","title":"Return Values","text":"<ul> <li>Single output indicators return an array</li> <li>Multiple output indicators return multiple arrays</li> <li>Arrays may contain <code>nil</code> values for the warmup period</li> <li>Use <code>.compact</code> to filter out <code>nil</code> values</li> <li>Use <code>.last</code> to get the most recent value</li> </ul>"},{"location":"indicators/#best-practices","title":"Best Practices","text":"<ol> <li>Ensure sufficient data - Most indicators need a warmup period</li> <li>Handle nil values - Check for nil before using values</li> <li>Validate parameters - Use appropriate period lengths for your timeframe</li> <li>Combine indicators - Use multiple indicators for confirmation</li> <li>Backtest strategies - Always test before live trading</li> </ol>"},{"location":"indicators/#example-multi-indicator-analysis","title":"Example: Multi-Indicator Analysis","text":"<pre><code>require 'sqa/tai'\n\n# Load historical data\nprices = load_stock_data('AAPL')\n\n# Trend: Moving averages\nsma_20 = SQA::TAI.sma(prices, period: 20)\nsma_50 = SQA::TAI.sma(prices, period: 50)\n\n# Momentum: RSI\nrsi = SQA::TAI.rsi(prices, period: 14)\n\n# Volatility: Bollinger Bands\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\n# Analyze current conditions\ncurrent_price = prices.last\ncurrent_rsi = rsi.last\n\nif current_price &gt; sma_20.last &amp;&amp; current_price &gt; sma_50.last\n  puts \"Uptrend confirmed\"\nend\n\nif current_rsi &lt; 30\n  puts \"Oversold condition\"\nelsif current_rsi &gt; 70\n  puts \"Overbought condition\"\nend\n\nif current_price &lt; lower.last\n  puts \"Price below lower Bollinger Band\"\nend\n</code></pre>"},{"location":"indicators/#see-also","title":"See Also","text":"<ul> <li>Basic Usage Guide</li> <li>API Reference</li> <li>Examples</li> </ul>"},{"location":"indicators/cycle/","title":"Cycle Indicators","text":"<p>Cycle indicators use Hilbert Transform mathematical techniques to identify dominant market cycles and trends. These advanced indicators can detect cyclical patterns, measure trend strength, and predict potential turning points based on phase relationships.</p>"},{"location":"indicators/cycle/#overview","title":"Overview","text":"<p>Hilbert Transform cycle indicators help traders: - Identify Dominant Cycles: Find the primary cycle length in price data - Detect Trend Changes: Recognize when markets shift from trending to cycling - Phase Analysis: Determine where price is within the current cycle - Adaptive Trading: Adjust strategies based on current market regime</p>"},{"location":"indicators/cycle/#available-cycle-indicators","title":"Available Cycle Indicators","text":""},{"location":"indicators/cycle/#hilbert-transform-dominant-cycle-period-ht_dcperiod","title":"Hilbert Transform - Dominant Cycle Period (HT_DCPERIOD)","text":"<p>Identifies the dominant cycle period in the market.</p> <pre><code>period = SQA::TAI.ht_dcperiod(close)\n</code></pre> <p>Key Features: - Measures cycle length in bars - Adapts to changing market conditions - Useful for optimizing indicator periods</p>"},{"location":"indicators/cycle/#hilbert-transform-dominant-cycle-phase-ht_dcphase","title":"Hilbert Transform - Dominant Cycle Phase (HT_DCPHASE)","text":"<p>Determines the current phase of the dominant cycle.</p> <pre><code>phase = SQA::TAI.ht_dcphase(close)\n</code></pre> <p>Key Features: - Returns phase angle in degrees (0-360) - Identifies cycle position - Helps time entries and exits</p>"},{"location":"indicators/cycle/#hilbert-transform-phasor-components-ht_phasor","title":"Hilbert Transform - Phasor Components (HT_PHASOR)","text":"<p>Provides in-phase and quadrature components of the dominant cycle.</p> <pre><code>in_phase, quadrature = SQA::TAI.ht_phasor(close)\n</code></pre> <p>Key Features: - Returns two components (I and Q) - Advanced cycle analysis - Used for phase calculations</p>"},{"location":"indicators/cycle/#hilbert-transform-sine-wave-ht_sine","title":"Hilbert Transform - Sine Wave (HT_SINE)","text":"<p>Generates sine and lead sine waves based on the dominant cycle.</p> <pre><code>sine, lead_sine = SQA::TAI.ht_sine(close)\n</code></pre> <p>Key Features: - Sine wave follows price cycles - Lead sine provides early signals - Crossovers indicate cycle turns</p>"},{"location":"indicators/cycle/#hilbert-transform-trend-vs-cycle-mode-ht_trendmode","title":"Hilbert Transform - Trend vs Cycle Mode (HT_TRENDMODE)","text":"<p>Determines if the market is trending or cycling.</p> <pre><code>trend_mode = SQA::TAI.ht_trendmode(close)\n</code></pre> <p>Key Features: - Returns 1 for trend, 0 for cycle - Helps select appropriate strategy - Adaptive market regime detection</p>"},{"location":"indicators/cycle/#common-usage-patterns","title":"Common Usage Patterns","text":""},{"location":"indicators/cycle/#basic-cycle-detection","title":"Basic Cycle Detection","text":"<pre><code>require 'sqa/tai'\n\n# Load price data\nclose = load_closes('AAPL')\n\n# Detect dominant cycle\nperiod = SQA::TAI.ht_dcperiod(close)\nphase = SQA::TAI.ht_dcphase(close)\n\nputs \"Cycle Analysis:\"\nputs \"Dominant Period: #{period.last.round(1)} bars\"\nputs \"Current Phase: #{phase.last.round(1)}\u00b0\"\n\n# Interpret phase\ncase phase.last\nwhen 0..90\n  puts \"Cycle Position: Early upswing\"\nwhen 90..180\n  puts \"Cycle Position: Late upswing\"\nwhen 180..270\n  puts \"Cycle Position: Early downswing\"\nwhen 270..360\n  puts \"Cycle Position: Late downswing\"\nend\n</code></pre>"},{"location":"indicators/cycle/#trend-vs-cycle-mode-detection","title":"Trend vs Cycle Mode Detection","text":"<pre><code>require 'sqa/tai'\n\nclose = load_closes('MSFT')\n\n# Detect market mode\ntrend_mode = SQA::TAI.ht_trendmode(close)\n\nif trend_mode.last == 1\n  puts \"Market Mode: TRENDING\"\n  puts \"Strategy: Use trend-following indicators\"\n  puts \"Recommended: Moving averages, MACD, ADX\"\n\n  # Use trend indicators\n  ema_fast = SQA::TAI.ema(close, period: 12)\n  ema_slow = SQA::TAI.ema(close, period: 26)\n\n  if ema_fast.last &gt; ema_slow.last\n    puts \"Trend Direction: UP\"\n  else\n    puts \"Trend Direction: DOWN\"\n  end\nelse\n  puts \"Market Mode: CYCLING\"\n  puts \"Strategy: Use oscillators and mean reversion\"\n  puts \"Recommended: RSI, Stochastic, Bollinger Bands\"\n\n  # Use cycle indicators\n  rsi = SQA::TAI.rsi(close, period: 14)\n\n  if rsi.last &gt; 70\n    puts \"Cycle Position: Overbought - consider selling\"\n  elsif rsi.last &lt; 30\n    puts \"Cycle Position: Oversold - consider buying\"\n  else\n    puts \"Cycle Position: Neutral\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/#sine-wave-trading-signals","title":"Sine Wave Trading Signals","text":"<pre><code>require 'sqa/tai'\n\nclose = load_closes('TSLA')\n\n# Generate sine waves\nsine, lead_sine = SQA::TAI.ht_sine(close)\n\n# Current and previous values\ncurr_sine = sine.last\nprev_sine = sine[-2]\ncurr_lead = lead_sine.last\nprev_lead = lead_sine[-2]\n\nputs \"Sine Wave Analysis:\"\nputs \"Sine: #{curr_sine.round(3)}\"\nputs \"Lead Sine: #{curr_lead.round(3)}\"\n\n# Detect crossovers\nif prev_sine &lt; prev_lead &amp;&amp; curr_sine &gt; curr_lead\n  puts \"\\nBUY SIGNAL: Sine crossed above Lead Sine\"\n  puts \"Cycle turning up\"\nelsif prev_sine &gt; prev_lead &amp;&amp; curr_sine &lt; curr_lead\n  puts \"\\nSELL SIGNAL: Sine crossed below Lead Sine\"\n  puts \"Cycle turning down\"\nelse\n  puts \"\\nNo crossover - hold position\"\nend\n</code></pre>"},{"location":"indicators/cycle/#adaptive-indicator-periods","title":"Adaptive Indicator Periods","text":"<pre><code>require 'sqa/tai'\n\nclose = load_closes('NVDA')\n\n# Get dominant cycle period\ndc_period = SQA::TAI.ht_dcperiod(close)\ncurrent_period = dc_period.last.round(0)\n\nputs \"Adaptive Period Selection:\"\nputs \"Dominant Cycle: #{current_period} bars\"\n\n# Use cycle period for adaptive indicators\nadaptive_rsi = SQA::TAI.rsi(close, period: current_period)\nadaptive_ma = SQA::TAI.sma(close, period: current_period)\n\n# Standard indicators for comparison\nstandard_rsi = SQA::TAI.rsi(close, period: 14)\nstandard_ma = SQA::TAI.sma(close, period: 20)\n\nputs \"\\nAdaptive vs Standard:\"\nputs \"Adaptive RSI(#{current_period}): #{adaptive_rsi.last.round(2)}\"\nputs \"Standard RSI(14): #{standard_rsi.last.round(2)}\"\nputs \"Adaptive MA(#{current_period}): $#{adaptive_ma.last.round(2)}\"\nputs \"Standard MA(20): $#{standard_ma.last.round(2)}\"\n</code></pre>"},{"location":"indicators/cycle/#understanding-hilbert-transform","title":"Understanding Hilbert Transform","text":""},{"location":"indicators/cycle/#what-is-hilbert-transform","title":"What is Hilbert Transform?","text":"<p>The Hilbert Transform is a mathematical operation that: - Shifts a signal by 90 degrees in phase - Allows calculation of instantaneous amplitude and phase - Enables detection of dominant cycles without Fourier Transform</p>"},{"location":"indicators/cycle/#key-concepts","title":"Key Concepts","text":"<p>Dominant Cycle: The most prominent cyclical pattern in price data - Typically ranges from 10 to 40 bars - Changes over time as market conditions shift</p> <p>Phase: Position within the cycle - 0\u00b0: Cycle bottom - 90\u00b0: Rising through midpoint - 180\u00b0: Cycle top - 270\u00b0: Falling through midpoint</p> <p>Trend Mode: Market regime classification - Trending: Directional price movement - Cycling: Oscillating around mean</p>"},{"location":"indicators/cycle/#best-practices","title":"Best Practices","text":""},{"location":"indicators/cycle/#1-combine-cycle-indicators","title":"1. Combine Cycle Indicators","text":"<pre><code># Use multiple cycle indicators together\nperiod = SQA::TAI.ht_dcperiod(close)\ntrend_mode = SQA::TAI.ht_trendmode(close)\nsine, lead = SQA::TAI.ht_sine(close)\n\n# Make decisions based on agreement\n</code></pre>"},{"location":"indicators/cycle/#2-adapt-to-market-regime","title":"2. Adapt to Market Regime","text":"<pre><code># Different strategies for different modes\nif trend_mode == 1\n  # Use trend-following strategies\nelse\n  # Use mean-reversion strategies\nend\n</code></pre>"},{"location":"indicators/cycle/#3-allow-for-warmup-period","title":"3. Allow for Warmup Period","text":"<pre><code># Cycle indicators need data to stabilize\n# Use at least 50-60 bars before trusting signals\nvalid_data = close[60..-1]\n</code></pre>"},{"location":"indicators/cycle/#4-validate-with-price-action","title":"4. Validate with Price Action","text":"<pre><code># Don't trade cycle signals alone\n# Confirm with support/resistance, volume, etc.\n</code></pre>"},{"location":"indicators/cycle/#example-complete-cycle-analysis-system","title":"Example: Complete Cycle Analysis System","text":"<pre><code>require 'sqa/tai'\n\n# Load data\nclose = load_closes('AAPL')\nhigh, low = load_hl('AAPL')\n\nputs \"Complete Cycle Analysis System\"\nputs \"=\" * 60\n\n# 1. Detect market mode\ntrend_mode = SQA::TAI.ht_trendmode(close)\nmode = trend_mode.last == 1 ? \"TRENDING\" : \"CYCLING\"\n\nputs \"\\n1. Market Regime: #{mode}\"\n\n# 2. Get dominant cycle characteristics\ndc_period = SQA::TAI.ht_dcperiod(close)\ndc_phase = SQA::TAI.ht_dcphase(close)\n\nputs \"\\n2. Cycle Characteristics:\"\nputs \"   Dominant Period: #{dc_period.last.round(1)} bars\"\nputs \"   Current Phase: #{dc_phase.last.round(1)}\u00b0\"\n\n# 3. Sine wave analysis\nsine, lead_sine = SQA::TAI.ht_sine(close)\n\nputs \"\\n3. Sine Wave Indicators:\"\nputs \"   Sine: #{sine.last.round(3)}\"\nputs \"   Lead Sine: #{lead_sine.last.round(3)}\"\n\n# Detect crossover\nprev_cross = (sine[-2] - lead_sine[-2]) &gt; 0\ncurr_cross = (sine.last - lead_sine.last) &gt; 0\n\nif prev_cross != curr_cross\n  signal = curr_cross ? \"BULLISH\" : \"BEARISH\"\n  puts \"   &gt;&gt;&gt; CROSSOVER DETECTED: #{signal} &lt;&lt;&lt;\"\nend\n\n# 4. Select strategy based on mode\nputs \"\\n4. Strategy Selection:\"\n\nif trend_mode.last == 1\n  puts \"   Mode: Trending\"\n  puts \"   Strategy: Trend Following\"\n\n  # Calculate trend indicators\n  ema_12 = SQA::TAI.ema(close, period: 12)\n  ema_26 = SQA::TAI.ema(close, period: 26)\n  macd, signal, hist = SQA::TAI.macd(close)\n\n  trend_direction = ema_12.last &gt; ema_26.last ? \"UP\" : \"DOWN\"\n  puts \"   Trend Direction: #{trend_direction}\"\n  puts \"   MACD: #{macd.last.round(2)}\"\n\n  if trend_direction == \"UP\" &amp;&amp; macd.last &gt; signal.last\n    puts \"   &gt;&gt;&gt; STRONG BUY SIGNAL &lt;&lt;&lt;\"\n  elsif trend_direction == \"DOWN\" &amp;&amp; macd.last &lt; signal.last\n    puts \"   &gt;&gt;&gt; STRONG SELL SIGNAL &lt;&lt;&lt;\"\n  end\nelse\n  puts \"   Mode: Cycling\"\n  puts \"   Strategy: Mean Reversion\"\n\n  # Use adaptive period from cycle analysis\n  period = dc_period.last.round(0).clamp(10, 30)\n\n  # Calculate oscillators\n  rsi = SQA::TAI.rsi(close, period: period)\n  upper, middle, lower = SQA::TAI.bbands(close, period: period)\n\n  puts \"   RSI(#{period}): #{rsi.last.round(2)}\"\n  puts \"   Price vs BB: $#{close.last.round(2)}\"\n  puts \"   BB Upper: $#{upper.last.round(2)}\"\n  puts \"   BB Lower: $#{lower.last.round(2)}\"\n\n  if close.last &lt; lower.last &amp;&amp; rsi.last &lt; 30\n    puts \"   &gt;&gt;&gt; OVERSOLD - BUY SIGNAL &lt;&lt;&lt;\"\n  elsif close.last &gt; upper.last &amp;&amp; rsi.last &gt; 70\n    puts \"   &gt;&gt;&gt; OVERBOUGHT - SELL SIGNAL &lt;&lt;&lt;\"\n  end\nend\n\n# 5. Cycle timing\nputs \"\\n5. Cycle Timing:\"\n\nphase = dc_phase.last\ncase phase\nwhen 0..45\n  position = \"Bottom (0-45\u00b0)\"\n  action = \"Accumulate on weakness\"\nwhen 45..135\n  position = \"Rising (45-135\u00b0)\"\n  action = \"Hold or add to longs\"\nwhen 135..225\n  position = \"Top (135-225\u00b0)\"\n  action = \"Take profits or reduce\"\nwhen 225..315\n  position = \"Falling (225-315\u00b0)\"\n  action = \"Hold or add to shorts\"\nwhen 315..360\n  position = \"Bottom approach (315-360\u00b0)\"\n  action = \"Prepare to accumulate\"\nend\n\nputs \"   Phase: #{phase.round(1)}\u00b0 - #{position}\"\nputs \"   Action: #{action}\"\n\n# 6. Risk assessment\nputs \"\\n6. Risk Assessment:\"\n\n# Calculate ATR for volatility\natr = SQA::TAI.atr(high, low, close, period: 14)\natr_pct = (atr.last / close.last * 100).round(2)\n\nputs \"   ATR: $#{atr.last.round(2)} (#{atr_pct}%)\"\n\nif atr_pct &gt; 3.0\n  puts \"   Volatility: HIGH - Use wider stops\"\nelsif atr_pct &gt; 1.5\n  puts \"   Volatility: MODERATE - Normal stops\"\nelse\n  puts \"   Volatility: LOW - Tighter stops acceptable\"\nend\n\n# 7. Final recommendation\nputs \"\\n7. Trading Recommendation:\"\n\nscore = 0\nscore += 2 if trend_mode.last == 1 &amp;&amp; sine.last &gt; lead_sine.last\nscore += 2 if trend_mode.last == 0 &amp;&amp; (phase &gt; 315 || phase &lt; 45)\nscore += 1 if atr_pct &lt; 2.5\n\nputs \"   Confidence Score: #{score}/5\"\n\nif score &gt;= 4\n  puts \"   &gt;&gt;&gt; HIGH CONFIDENCE SETUP &lt;&lt;&lt;\"\nelsif score &gt;= 3\n  puts \"   &gt;&gt;&gt; MODERATE SETUP - MONITOR &lt;&lt;&lt;\"\nelse\n  puts \"   &gt;&gt;&gt; LOW CONFIDENCE - WAIT &lt;&lt;&lt;\"\nend\n</code></pre>"},{"location":"indicators/cycle/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/cycle/#multi-timeframe-cycle-analysis","title":"Multi-Timeframe Cycle Analysis","text":"<pre><code># Analyze cycles across timeframes\ndaily_period = SQA::TAI.ht_dcperiod(daily_close)\nhourly_period = SQA::TAI.ht_dcperiod(hourly_close)\n\n# Cycle alignment\nif daily_period.last &gt; 20 &amp;&amp; hourly_period.last &gt; 10\n  puts \"Cycles aligned - stronger signals\"\nend\n</code></pre>"},{"location":"indicators/cycle/#cycle-based-position-sizing","title":"Cycle-Based Position Sizing","text":"<pre><code># Adjust position size based on cycle confidence\nif trend_mode.last == 1\n  # Higher confidence in trending markets\n  position_size = base_size * 1.5\nelse\n  # Lower confidence in cycling markets\n  position_size = base_size * 0.75\nend\n</code></pre>"},{"location":"indicators/cycle/#see-also","title":"See Also","text":"<ul> <li>HT Dominant Cycle Period</li> <li>HT Dominant Cycle Phase</li> <li>HT Phasor Components</li> <li>HT Sine Wave</li> <li>HT Trend vs Cycle Mode</li> <li>Back to Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/cycle/ht_dcperiod/","title":"HT_DCPERIOD (Hilbert Transform - Dominant Cycle Period)","text":""},{"location":"indicators/cycle/ht_dcperiod/#overview","title":"Overview","text":"<p>The Hilbert Transform - Dominant Cycle Period (HT_DCPERIOD) is an advanced technical indicator that identifies the dominant market cycle period at any given time. Unlike fixed-period indicators, HT_DCPERIOD dynamically adapts to current market conditions by measuring the actual cycle length in the price data, allowing traders to optimize their analysis to match the market's natural rhythm.</p>"},{"location":"indicators/cycle/ht_dcperiod/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>prices</code> Array Required Array of price values (typically close prices)"},{"location":"indicators/cycle/ht_dcperiod/#parameter-details","title":"Parameter Details","text":"<p>prices - Input data should be an array of closing prices - Minimum 32 data points required for reliable results (due to Hilbert Transform calculation requirements) - More data provides better accuracy in cycle identification - Works best with at least 63+ data points for stable output</p>"},{"location":"indicators/cycle/ht_dcperiod/#usage","title":"Usage","text":""},{"location":"indicators/cycle/ht_dcperiod/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Calculate dominant cycle period\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 45.61,\n          46.50, 47.20, 46.80, 47.50, 48.10, 48.30,\n          # ... more data points ...\n         ]\n\ncycle_period = SQA::TAI.ht_dcperiod(prices)\n\n# The cycle period tells you the current market cycle length\ncurrent_period = cycle_period.last\nputs \"Current dominant cycle: #{current_period.round(1)} periods\"\n</code></pre>"},{"location":"indicators/cycle/ht_dcperiod/#practical-application","title":"Practical Application","text":"<pre><code># Use the detected cycle period to optimize other indicators\ncycle = SQA::TAI.ht_dcperiod(prices)\ncurrent_cycle = cycle.last.round\n\n# Adapt your moving average to the current market cycle\nadaptive_ma = SQA::TAI.sma(prices, period: current_cycle)\n\n# Or use it to set RSI period dynamically\nadaptive_rsi = SQA::TAI.rsi(prices, period: current_cycle)\n\nputs \"Market is cycling every #{current_cycle} periods\"\nputs \"Using #{current_cycle}-period indicators for current conditions\"\n</code></pre>"},{"location":"indicators/cycle/ht_dcperiod/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/cycle/ht_dcperiod/#what-it-measures","title":"What It Measures","text":"<p>HT_DCPERIOD measures the length of the dominant price cycle currently present in the market. Markets naturally move in cycles - periods of expansion followed by contraction, uptrends followed by downtrends. These cycles can vary in length depending on market conditions, volatility, and timeframe.</p> <p>The indicator answers the question: \"What is the natural rhythm of this market right now?\"</p>"},{"location":"indicators/cycle/ht_dcperiod/#why-its-important","title":"Why It's Important","text":"<p>Traditional indicators use fixed periods (like 14 for RSI or 20 for moving averages). However, market cycles change over time: - During high volatility: cycles may shorten to 8-12 periods - During low volatility: cycles may extend to 30-40 periods - Different markets have different natural cycles</p> <p>By identifying the actual cycle length, you can: - Optimize other indicator periods to match current conditions - Avoid false signals from mis-tuned indicators - Better time entries and exits to cycle phases</p>"},{"location":"indicators/cycle/ht_dcperiod/#calculation-method","title":"Calculation Method","text":"<p>The Hilbert Transform is a mathematical technique that decomposes a price series into its amplitude and phase components:</p> <ol> <li>Apply Hilbert Transform to the price data to extract phase information</li> <li>Compute instantaneous period from the phase rate of change</li> <li>Smooth the result to provide a stable cycle period measurement</li> <li>Output the dominant cycle length in number of bars/periods</li> </ol> <p>The algorithm automatically adapts to the changing frequency of price oscillations, effectively \"listening\" to the market's current tempo.</p> <p>Key Concept: Think of it like musical tempo detection - the indicator identifies how many bars it takes for the market to complete one full cycle (peak to peak or trough to trough).</p>"},{"location":"indicators/cycle/ht_dcperiod/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Typically 10 to 50 periods, but can vary</li> <li>Type: Cycle analysis, adaptive indicator</li> <li>Lag: Moderate - requires some data history to identify cycles accurately</li> <li>Best Used: All market conditions, especially useful for adapting other indicators</li> </ul>"},{"location":"indicators/cycle/ht_dcperiod/#interpretation","title":"Interpretation","text":""},{"location":"indicators/cycle/ht_dcperiod/#value-ranges","title":"Value Ranges","text":"<p>The HT_DCPERIOD output represents the number of periods (bars) in the current dominant cycle:</p> <ul> <li>Short Cycles (8-15 periods)</li> <li>Market is in high-frequency oscillation mode</li> <li>Often seen during high volatility</li> <li>Price reversals happen quickly</li> <li> <p>Use shorter-period indicators</p> </li> <li> <p>Medium Cycles (16-25 periods)</p> </li> <li>Normal market conditions</li> <li>Standard indicator periods work well</li> <li>Most common range</li> <li> <p>Balanced between responsiveness and smoothness</p> </li> <li> <p>Long Cycles (26-40+ periods)</p> </li> <li>Market is in strong trend or low volatility</li> <li>Price changes are gradual</li> <li>Use longer-period indicators to avoid whipsaws</li> <li>Fewer but more reliable signals</li> </ul>"},{"location":"indicators/cycle/ht_dcperiod/#cycle-changes","title":"Cycle Changes","text":"<p>Shortening Cycles: When the period value decreases over time, it indicates: - Increasing market volatility - Transitions into ranging/choppy conditions - Need to increase indicator sensitivity - More frequent trading opportunities (but also more noise)</p> <p>Lengthening Cycles: When the period value increases over time, it indicates: - Decreasing volatility or strengthening trend - Market entering sustained directional move - Need to decrease indicator sensitivity - Fewer but higher-quality signals</p>"},{"location":"indicators/cycle/ht_dcperiod/#stability-analysis","title":"Stability Analysis","text":"<ul> <li>Stable cycle period (changes slowly): Market in consistent regime</li> <li>Rapidly changing period: Market in transition or unstable</li> <li>Erratic jumps: Low signal quality, market may be too noisy</li> </ul>"},{"location":"indicators/cycle/ht_dcperiod/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/cycle/ht_dcperiod/#adaptive-indicator-optimization","title":"Adaptive Indicator Optimization","text":"<p>Primary Use Case: Dynamic parameter adjustment</p> <pre><code># Calculate current cycle\ncycle = SQA::TAI.ht_dcperiod(prices)\noptimal_period = cycle.last.round.clamp(10, 30) # Limit to reasonable range\n\n# Apply to multiple indicators\nrsi = SQA::TAI.rsi(prices, period: optimal_period)\nstoch_k, stoch_d = SQA::TAI.stoch(\n  highs, lows, closes,\n  fastk_period: optimal_period,\n  slowk_period: 3,\n  slowd_period: 3\n)\n\n# Now your indicators are tuned to current market conditions\n</code></pre>"},{"location":"indicators/cycle/ht_dcperiod/#cycle-phase-trading","title":"Cycle Phase Trading","text":"<p>Entry Signals:</p> <ol> <li>Cycle Bottom Entry</li> <li>Identify cycle length</li> <li>Use oscillators (RSI, Stochastic) with matching period</li> <li>Enter when oscillator shows oversold during cycle trough</li> <li> <p>Exit after approximately 50% of cycle period</p> </li> <li> <p>Cycle Top Exit</p> </li> <li>Monitor overbought on cycle-tuned oscillators</li> <li>Exit long positions at approximately 50% through cycle</li> <li>Consider short entries (if appropriate for your strategy)</li> </ol> <p>Example Strategy: <pre><code>cycle_length = SQA::TAI.ht_dcperiod(prices).last.round\nhalf_cycle = (cycle_length / 2.0).round\n\n# Use cycle-tuned RSI\nadaptive_rsi = SQA::TAI.rsi(prices, period: cycle_length)\ncurrent_rsi = adaptive_rsi.last\n\n# Track position age\nbars_in_position = 20 # example\n\nif current_rsi &lt; 30\n  puts \"POTENTIAL BUY: RSI oversold, cycle may be at trough\"\n  puts \"Expected cycle duration: #{cycle_length} bars\"\nelsif bars_in_position &gt;= half_cycle &amp;&amp; current_rsi &gt; 70\n  puts \"POTENTIAL SELL: RSI overbought, half-cycle reached\"\nend\n</code></pre></p>"},{"location":"indicators/cycle/ht_dcperiod/#regime-detection","title":"Regime Detection","text":"<p>Trend vs Range Detection:</p> <pre><code># Track cycle period changes\ncycles = SQA::TAI.ht_dcperiod(prices)\ncurrent_cycle = cycles.last\navg_cycle = cycles.last(10).sum / 10.0\n\nif current_cycle &gt; avg_cycle * 1.3\n  puts \"TRENDING REGIME: Cycles lengthening - use trend-following strategies\"\nelsif current_cycle &lt; avg_cycle * 0.7\n  puts \"RANGING REGIME: Cycles shortening - use mean-reversion strategies\"\nelse\n  puts \"NORMAL REGIME: Standard strategies applicable\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcperiod/#best-practices","title":"Best Practices","text":""},{"location":"indicators/cycle/ht_dcperiod/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When HT_DCPERIOD works best: - Markets with clear cyclical behavior: Forex pairs, commodities - Medium to long-term analysis: Daily to weekly charts - Adaptive strategy systems: Systems that optimize parameters automatically - Multi-timeframe analysis: Comparing cycle lengths across timeframes</p> <p>Less effective in: - Very short timeframes (&lt; 5 minute charts) - too much noise - Strongly trending markets with no cyclical component - Low-liquidity markets with erratic price movements</p>"},{"location":"indicators/cycle/ht_dcperiod/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Oscillators: <pre><code>cycle = SQA::TAI.ht_dcperiod(prices).last.round\nrsi = SQA::TAI.rsi(prices, period: cycle)\nstoch_k, stoch_d = SQA::TAI.stoch(highs, lows, closes, fastk_period: cycle)\n\n# Both oscillators now tuned to current market cycle\n# Signals are synchronized with market rhythm\n</code></pre></p> <p>With Trend Indicators: <pre><code>cycle = SQA::TAI.ht_dcperiod(prices).last.round\n# Use half-cycle for fast MA, full cycle for slow MA\nfast_ma = SQA::TAI.ema(prices, period: (cycle / 2).round)\nslow_ma = SQA::TAI.ema(prices, period: cycle)\n\n# MA crossovers are now cycle-adaptive\n</code></pre></p> <p>With Other Hilbert Transform Indicators: - HT_TRENDMODE: Determine if market is trending or cycling - HT_DCPHASE: Identify where you are in the current cycle - HT_PHASOR: Get leading/lagging components - HT_SINE: Generate cycle-based trading signals</p>"},{"location":"indicators/cycle/ht_dcperiod/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Insufficient Data</li> <li>Need minimum 32-63 bars for reliable results</li> <li>Initial values will be unstable</li> <li> <p>Always check for sufficient history</p> </li> <li> <p>Over-Optimization</p> </li> <li>Don't change strategy parameters on every cycle tick</li> <li>Use smoothed/averaged cycle values for parameter selection</li> <li> <p>Avoid excessive trading from parameter changes</p> </li> <li> <p>Ignoring Market Context</p> </li> <li>Cycle detection works poorly in strong, sustained trends with no retracements</li> <li>Combine with trend indicators (like HT_TRENDMODE)</li> <li> <p>Be aware when cycle analysis isn't appropriate</p> </li> <li> <p>Period Constraints</p> </li> <li>Very short detected cycles (&lt; 10) may be noise</li> <li>Very long cycles (&gt; 50) may indicate trend, not cycle</li> <li>Clamp to reasonable ranges: <code>cycle.clamp(10, 40)</code></li> </ol>"},{"location":"indicators/cycle/ht_dcperiod/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Since HT_DCPERIOD has no adjustable parameters, focus on how to use its output:</p> <p>For Intraday Trading: - Use detected cycle on 15-min to 1-hour charts - Expect shorter cycles (10-20 periods) - Update indicator periods every few hours</p> <p>For Swing Trading: - Use detected cycle on daily charts - Expect medium cycles (15-30 periods) - Update indicator periods daily or weekly</p> <p>For Position Trading: - Use detected cycle on weekly charts - Expect longer cycles (20-40 periods) - Update indicator periods monthly</p>"},{"location":"indicators/cycle/ht_dcperiod/#practical-example","title":"Practical Example","text":"<p>Complete trading system example:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data (need at least 63 bars)\nprices = [\n  # ... your price data ...\n]\nhighs = [...]\nlows = [...]\n\n# Detect current market cycle\ncycle_periods = SQA::TAI.ht_dcperiod(prices)\ncurrent_cycle = cycle_periods.last.round.clamp(10, 30)\n\n# Smooth cycle to avoid excessive changes\nrecent_cycles = cycle_periods.last(5)\nsmoothed_cycle = (recent_cycles.sum / recent_cycles.size).round\n\nputs \"Current cycle: #{current_cycle} periods\"\nputs \"Smoothed cycle: #{smoothed_cycle} periods\"\n\n# Apply cycle-adaptive indicators\nrsi = SQA::TAI.rsi(prices, period: smoothed_cycle)\natr = SQA::TAI.atr(highs, lows, prices, period: smoothed_cycle)\nema_fast = SQA::TAI.ema(prices, period: (smoothed_cycle / 2).round)\nema_slow = SQA::TAI.ema(prices, period: smoothed_cycle)\n\n# Trading logic\ncurrent_price = prices.last\ncurrent_rsi = rsi.last\ncurrent_atr = atr.last\nfast_ma = ema_fast.last\nslow_ma = ema_slow.last\n\n# Generate signals based on cycle-tuned indicators\nif fast_ma &gt; slow_ma &amp;&amp; current_rsi &lt; 40\n  stop_loss = current_price - (2 * current_atr)\n  take_profit = current_price + (3 * current_atr)\n\n  puts \"BUY SIGNAL\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{stop_loss.round(2)}\"\n  puts \"Take Profit: #{take_profit.round(2)}\"\n  puts \"Expected cycle duration: #{smoothed_cycle} bars\"\n\nelsif fast_ma &lt; slow_ma &amp;&amp; current_rsi &gt; 60\n  stop_loss = current_price + (2 * current_atr)\n  take_profit = current_price - (3 * current_atr)\n\n  puts \"SELL SIGNAL\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{stop_loss.round(2)}\"\n  puts \"Take Profit: #{take_profit.round(2)}\"\n  puts \"Expected cycle duration: #{smoothed_cycle} bars\"\nelse\n  puts \"NO SIGNAL - Waiting for cycle-tuned confirmation\"\nend\n\n# Track cycle regime changes\nif cycle_periods.size &gt;= 20\n  avg_cycle_20 = cycle_periods.last(20).sum / 20.0\n  if current_cycle &gt; avg_cycle_20 * 1.2\n    puts \"WARNING: Cycles lengthening - market may be trending\"\n  elsif current_cycle &lt; avg_cycle_20 * 0.8\n    puts \"WARNING: Cycles shortening - market may be ranging\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcperiod/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/cycle/ht_dcperiod/#hilbert-transform-family","title":"Hilbert Transform Family","text":"<ul> <li>HT_DCPHASE: Identifies the current phase within the dominant cycle (where you are in the cycle)</li> <li>HT_PHASOR: Provides in-phase and quadrature components for advanced cycle analysis</li> <li>HT_SINE: Generates sine wave representation of the cycle for timing entries/exits</li> <li>HT_TRENDMODE: Determines if market is in trend or cycle mode</li> <li>HT_TRENDLINE: Provides instantaneous trendline based on Hilbert Transform</li> </ul>"},{"location":"indicators/cycle/ht_dcperiod/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>MAMA: MESA Adaptive Moving Average - uses similar adaptive concepts</li> <li>KAMA: Kaufman Adaptive Moving Average - another adaptive approach</li> <li>ATR: Use with detected cycle for adaptive stop losses</li> </ul>"},{"location":"indicators/cycle/ht_dcperiod/#alternative-cycle-indicators","title":"Alternative Cycle Indicators","text":"<p>While HT_DCPERIOD is unique in TA-Lib, other cycle analysis approaches include: - Fourier analysis (not in TA-Lib) - Maximum Entropy Spectral Analysis (MESA) - related to Hilbert Transform - Simple cycle counting methods</p>"},{"location":"indicators/cycle/ht_dcperiod/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/cycle/ht_dcperiod/#multi-timeframe-cycle-analysis","title":"Multi-Timeframe Cycle Analysis","text":"<pre><code># Compare cycles across timeframes\ndaily_prices = [...] # daily data\nhourly_prices = [...] # hourly data\n\ndaily_cycle = SQA::TAI.ht_dcperiod(daily_prices).last\nhourly_cycle = SQA::TAI.ht_dcperiod(hourly_prices).last\n\nputs \"Daily cycle: #{daily_cycle.round} days\"\nputs \"Hourly cycle: #{hourly_cycle.round} hours\"\n\n# Nested cycles concept:\n# - Trade daily cycle direction\n# - Time entries using hourly cycle\n</code></pre>"},{"location":"indicators/cycle/ht_dcperiod/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<pre><code># Detect regime transitions\ncycles = SQA::TAI.ht_dcperiod(prices)\n\n# Calculate cycle trend\ncycle_sma = SQA::TAI.sma(cycles, period: 10)\ncycle_trend = cycles.last &gt; cycle_sma.last ? \"lengthening\" : \"shortening\"\n\nif cycle_trend == \"lengthening\"\n  puts \"Shift to trend-following strategies\"\n  # Increase position size for trends, reduce mean-reversion trades\nelse\n  puts \"Shift to mean-reversion strategies\"\n  # Increase mean-reversion trades, reduce trend-following\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcperiod/#statistical-validation","title":"Statistical Validation","text":"<p>Reliability Considerations: - More reliable with 100+ bars of history - Accuracy decreases in purely random price movements - Works best when true cyclical components exist - Combine with other indicators for validation</p> <p>Testing Cycle Stability: <pre><code># Check if cycle is stable enough to use\nrecent_cycles = cycle_periods.last(10)\ncycle_stddev = Math.sqrt(recent_cycles.map { |c| (c - recent_cycles.sum/10.0)**2 }.sum / 10.0)\ncycle_cv = cycle_stddev / (recent_cycles.sum / 10.0) # Coefficient of variation\n\nif cycle_cv &lt; 0.15\n  puts \"Stable cycle - safe to use for parameter optimization\"\nelse\n  puts \"Unstable cycle - use with caution or default parameters\"\nend\n</code></pre></p>"},{"location":"indicators/cycle/ht_dcperiod/#references","title":"References","text":"<ul> <li>\"Rocket Science for Traders\" by John F. Ehlers - Comprehensive coverage of Hilbert Transform and cycle analysis</li> <li>\"Cybernetic Analysis for Stocks and Futures\" by John F. Ehlers - Advanced adaptive indicators</li> <li>Original Research: John F. Ehlers pioneered the application of Hilbert Transform to trading</li> <li>TA-Lib Documentation: HT_DCPERIOD Function</li> </ul>"},{"location":"indicators/cycle/ht_dcperiod/#see-also","title":"See Also","text":"<ul> <li>Cycle Indicators Overview</li> <li>Hilbert Transform Indicators Family</li> </ul> <ul> <li>Adaptive Indicators Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/cycle/ht_dcphase/","title":"HT_DCPHASE (Hilbert Transform - Dominant Cycle Phase)","text":""},{"location":"indicators/cycle/ht_dcphase/#overview","title":"Overview","text":"<p>The Hilbert Transform - Dominant Cycle Phase (HT_DCPHASE) is an advanced technical indicator that identifies the current phase position within the dominant market cycle, measured in degrees from 0 to 360. This indicator answers the critical question: \"Where are we in the current market cycle?\" By knowing the phase, traders can precisely time entries and exits based on the natural rhythm of the market, buying near cycle bottoms (0\u00b0) and selling near cycle tops (180\u00b0).</p> <p>Unlike traditional momentum oscillators that react to price changes, HT_DCPHASE uses the Hilbert Transform to mathematically decompose price data into its phase components, providing a leading perspective on cycle positioning. This makes it invaluable for anticipating turning points and timing trades with the market's natural ebb and flow.</p>"},{"location":"indicators/cycle/ht_dcphase/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>prices</code> Array Required Array of price values (typically close prices)"},{"location":"indicators/cycle/ht_dcphase/#parameter-details","title":"Parameter Details","text":"<p>prices - Input data should be an array of closing prices - Minimum 32 data points required for reliable results (due to Hilbert Transform calculation requirements) - More data provides better accuracy in phase identification - Works best with at least 63+ data points for stable output - No adjustable parameters - the indicator automatically adapts to current market conditions</p>"},{"location":"indicators/cycle/ht_dcphase/#usage","title":"Usage","text":""},{"location":"indicators/cycle/ht_dcphase/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Calculate dominant cycle phase\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 45.61,\n          46.50, 47.20, 46.80, 47.50, 48.10, 48.30,\n          # ... more data points (need at least 32-63) ...\n         ]\n\nphase = SQA::TAI.ht_dcphase(prices)\n\n# The phase tells you where you are in the cycle (0-360 degrees)\ncurrent_phase = phase.last\nputs \"Current cycle phase: #{current_phase.round(1)}\u00b0\"\n\n# Interpret the phase position\ncase current_phase\nwhen 0..45\n  puts \"Near cycle bottom - potential buy zone\"\nwhen 46..135\n  puts \"Rising through cycle - upward momentum\"\nwhen 136..225\n  puts \"Near cycle top - potential sell zone\"\nwhen 226..315\n  puts \"Falling through cycle - downward momentum\"\nelse\n  puts \"Approaching cycle bottom - prepare for reversal\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#practical-application","title":"Practical Application","text":"<pre><code># Use phase to time entries at optimal cycle positions\nphase = SQA::TAI.ht_dcphase(prices)\ncurrent_phase = phase.last\ncurrent_price = prices.last\n\n# Define phase zones for trading\nBOTTOM_ZONE = (0..30)      # Buy zone\nRISING_ZONE = (31..150)    # Hold long\nTOP_ZONE = (151..210)      # Sell zone\nFALLING_ZONE = (211..329)  # Hold short or wait\nAPPROACHING_BOTTOM = (330..360) # Prepare to buy\n\nif BOTTOM_ZONE.cover?(current_phase)\n  puts \"BUY SIGNAL: Phase at #{current_phase.round}\u00b0 - cycle bottom\"\n  puts \"Entry: #{current_price}\"\n  puts \"Expected next peak at phase ~180\u00b0\"\n\nelsif TOP_ZONE.cover?(current_phase)\n  puts \"SELL SIGNAL: Phase at #{current_phase.round}\u00b0 - cycle top\"\n  puts \"Exit: #{current_price}\"\n  puts \"Expected next trough at phase ~360\u00b0/0\u00b0\"\n\nelsif APPROACHING_BOTTOM.cover?(current_phase)\n  puts \"PREPARE: Phase at #{current_phase.round}\u00b0 - approaching bottom\"\n  puts \"Get ready to enter long position\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/cycle/ht_dcphase/#what-it-measures","title":"What It Measures","text":"<p>HT_DCPHASE measures the angular position within the dominant market cycle, expressed in degrees from 0 to 360. Think of the market cycle as a clock face or a wheel that continuously rotates:</p> <ul> <li>0\u00b0 (12 o'clock): Cycle trough/bottom - the lowest point</li> <li>90\u00b0 (3 o'clock): Rising through middle - maximum upward momentum</li> <li>180\u00b0 (6 o'clock): Cycle peak/top - the highest point</li> <li>270\u00b0 (9 o'clock): Falling through middle - maximum downward momentum</li> <li>360\u00b0 (back to 12): Returns to cycle bottom to begin next cycle</li> </ul> <p>The indicator provides a continuous measurement of where the market is positioned in its natural oscillation, allowing traders to anticipate the next move before it happens.</p>"},{"location":"indicators/cycle/ht_dcphase/#why-its-important","title":"Why It's Important","text":"<p>Traditional indicators tell you what has already happened. Phase analysis tells you where you are in the ongoing cycle:</p> <p>Benefits of Phase Analysis: - Precise Timing: Know when you're at a cycle extreme (buy at 0\u00b0, sell at 180\u00b0) - Leading Information: Phase can lead price changes at turning points - Objective Positioning: Removes guesswork about cycle location - Universal Application: Works across all timeframes and markets - Complementary to Other Indicators: Adds timing precision to trend and momentum signals</p> <p>Real-World Analogy: If markets are like ocean tides, HT_DCPHASE tells you whether the tide is at low tide (0\u00b0), rising (90\u00b0), high tide (180\u00b0), or falling (270\u00b0). You wouldn't go surfing at low tide or try to collect shells at high tide - similarly, you want to trade with the cycle phase.</p>"},{"location":"indicators/cycle/ht_dcphase/#calculation-method","title":"Calculation Method","text":"<p>The Hilbert Transform is a sophisticated mathematical technique from signal processing that reveals the hidden periodic structure in price data:</p> <ol> <li>Apply Hilbert Transform to the price series to separate it into amplitude and phase components</li> <li>Extract instantaneous phase - the angular position in the current cycle</li> <li>Unwrap phase angles to handle the 0-360\u00b0 discontinuity smoothly</li> <li>Output continuous phase measurement in degrees</li> </ol> <p>Key Concept: The Hilbert Transform creates an imaginary component that is 90\u00b0 out of phase with the real price data. By combining these components, the algorithm can extract the instantaneous phase angle at each point in time, effectively creating a mathematical \"clock\" that tracks cycle position.</p> <p>Mathematical Foundation: - Uses quadrature (90\u00b0 shifted) relationships between price and its transform - Phase = arctan(imaginary_component / real_component) - Automatically adapts to changing cycle frequencies - Provides continuous, smooth phase transitions</p>"},{"location":"indicators/cycle/ht_dcphase/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: 0 to 360 degrees (continuous)</li> <li>Type: Cycle analysis, phase measurement</li> <li>Lag: Moderate - some history needed but provides leading information at extremes</li> <li>Best Used: Timing entries/exits, identifying reversal zones, confirming cycle position</li> <li>Update Frequency: Real-time with each new price bar</li> </ul>"},{"location":"indicators/cycle/ht_dcphase/#interpretation","title":"Interpretation","text":""},{"location":"indicators/cycle/ht_dcphase/#phase-zones-and-their-meanings","title":"Phase Zones and Their Meanings","text":"<p>The 360\u00b0 cycle can be divided into actionable trading zones:</p>"},{"location":"indicators/cycle/ht_dcphase/#zone-1-bottomtrough-0-30","title":"Zone 1: Bottom/Trough (0\u00b0 \u00b1 30\u00b0)","text":"<p>Phase Range: 330\u00b0 - 30\u00b0 Market Condition: Cycle bottom, potential reversal point Typical Price Action: - Downward momentum exhausting - Price reaching local lows - Reversal patterns may form Trading Implication: Primary buying zone, enter long positions</p>"},{"location":"indicators/cycle/ht_dcphase/#zone-2-rising-phase-30-150","title":"Zone 2: Rising Phase (30\u00b0 - 150\u00b0)","text":"<p>Phase Range: 31\u00b0 - 150\u00b0 Market Condition: Upward movement through cycle Typical Price Action: - Increasing upward momentum - Higher highs and higher lows - Bullish trend characteristics Trading Implication: Hold long positions, avoid shorting</p>"},{"location":"indicators/cycle/ht_dcphase/#zone-3-toppeak-150-210","title":"Zone 3: Top/Peak (150\u00b0 - 210\u00b0)","text":"<p>Phase Range: 151\u00b0 - 210\u00b0 Market Condition: Cycle top, potential reversal point Typical Price Action: - Upward momentum slowing - Price reaching local highs - Distribution patterns may form Trading Implication: Primary selling zone, exit long positions, consider shorts</p>"},{"location":"indicators/cycle/ht_dcphase/#zone-4-falling-phase-210-330","title":"Zone 4: Falling Phase (210\u00b0 - 330\u00b0)","text":"<p>Phase Range: 211\u00b0 - 329\u00b0 Market Condition: Downward movement through cycle Typical Price Action: - Increasing downward momentum - Lower highs and lower lows - Bearish trend characteristics Trading Implication: Hold short positions (if applicable), avoid buying, or wait for next cycle</p>"},{"location":"indicators/cycle/ht_dcphase/#phase-rate-of-change","title":"Phase Rate of Change","text":"<p>The speed at which phase changes provides additional insight:</p> <p>Fast Phase Movement: - Quick progression through degrees - Indicates strong, clear cycle - More reliable for timing - Often correlates with good trending behavior within the cycle</p> <p>Slow Phase Movement: - Sluggish progression through degrees - May indicate weak or unclear cycle - Less reliable for precise timing - Consider waiting for clearer conditions</p> <p>Stalled Phase: - Phase stuck at one value for multiple bars - Cycle may be breaking down - Market may be transitioning to trending mode - Use with HT_TRENDMODE to confirm</p>"},{"location":"indicators/cycle/ht_dcphase/#critical-phase-angles","title":"Critical Phase Angles","text":"<p>Most Important Phases for Trading:</p> <ul> <li>0\u00b0/360\u00b0: Absolute cycle bottom - strongest buy signal</li> <li>45\u00b0: Early uptrend confirmation - trend is establishing</li> <li>90\u00b0: Maximum upward momentum - halfway to top</li> <li>135\u00b0: Late uptrend warning - prepare for top</li> <li>180\u00b0: Absolute cycle top - strongest sell signal</li> <li>225\u00b0: Early downtrend confirmation - trend is establishing</li> <li>270\u00b0: Maximum downward momentum - halfway to bottom</li> <li>315\u00b0: Late downtrend warning - prepare for bottom</li> </ul>"},{"location":"indicators/cycle/ht_dcphase/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/cycle/ht_dcphase/#basic-phase-trading-strategy","title":"Basic Phase Trading Strategy","text":"<p>Entry Signals:</p> <pre><code>phase = SQA::TAI.ht_dcphase(prices)\ncurrent_phase = phase.last\ncurrent_price = prices.last\n\n# Long entry near cycle bottom\nif current_phase &gt;= 345 || current_phase &lt;= 15\n  puts \"STRONG BUY: Phase at cycle bottom (#{current_phase.round}\u00b0)\"\n  target_phase = 180\n  puts \"Expected profit zone: Phase 150-210\u00b0 (cycle top)\"\n\n# Long entry confirmation in early uptrend\nelsif current_phase &gt;= 30 &amp;&amp; current_phase &lt;= 60\n  puts \"BUY: Early uptrend confirmed (#{current_phase.round}\u00b0)\"\n  puts \"Catching momentum before mid-cycle\"\nend\n</code></pre> <p>Exit Signals:</p> <pre><code># Exit long near cycle top\nif current_phase &gt;= 165 &amp;&amp; current_phase &lt;= 195\n  puts \"SELL: Phase at cycle top (#{current_phase.round}\u00b0)\"\n  puts \"Take profits before downward phase\"\n\n# Early exit warning\nelsif current_phase &gt;= 135 &amp;&amp; current_phase &lt;= 150\n  puts \"WARNING: Approaching cycle top (#{current_phase.round}\u00b0)\"\n  puts \"Consider tightening stops or partial profit-taking\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#combined-phase-and-price-strategy","title":"Combined Phase and Price Strategy","text":"<p>Enhanced Signal Quality:</p> <pre><code># Combine phase with price confirmation\nphase = SQA::TAI.ht_dcphase(prices)\nrsi = SQA::TAI.rsi(prices, period: 14)\n\ncurrent_phase = phase.last\ncurrent_rsi = rsi.last\ncurrent_price = prices.last\n\n# Strong buy: Phase bottom + RSI oversold\nif (current_phase &gt;= 330 || current_phase &lt;= 30) &amp;&amp; current_rsi &lt; 30\n  puts \"STRONG BUY SIGNAL\"\n  puts \"Phase: #{current_phase.round}\u00b0 (cycle bottom)\"\n  puts \"RSI: #{current_rsi.round(1)} (oversold)\"\n  puts \"Confluence of cycle and momentum - high probability setup\"\n\n# Strong sell: Phase top + RSI overbought\nelsif (current_phase &gt;= 150 &amp;&amp; current_phase &lt;= 210) &amp;&amp; current_rsi &gt; 70\n  puts \"STRONG SELL SIGNAL\"\n  puts \"Phase: #{current_phase.round}\u00b0 (cycle top)\"\n  puts \"RSI: #{current_rsi.round(1)} (overbought)\"\n  puts \"Confluence of cycle and momentum - high probability setup\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#phase-based-position-management","title":"Phase-Based Position Management","text":"<p>Dynamic Stop Losses:</p> <pre><code># Adjust stops based on cycle phase\nphase = SQA::TAI.ht_dcphase(prices)\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\ncurrent_phase = phase.last\ncurrent_atr = atr.last\nentry_price = 100.0 # example\n\n# In early phase (30-90\u00b0), use wider stops to allow development\nif current_phase &gt;= 30 &amp;&amp; current_phase &lt;= 90\n  stop_distance = 2.5 * current_atr\n  puts \"Early phase - wider stop: #{stop_distance.round(2)} away\"\n\n# Approaching top (135-180\u00b0), tighten stops to protect profits\nelsif current_phase &gt;= 135 &amp;&amp; current_phase &lt;= 180\n  stop_distance = 1.5 * current_atr\n  puts \"Late phase - tighter stop: #{stop_distance.round(2)} away\"\nend\n\nstop_loss = entry_price - stop_distance\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#multi-indicator-confirmation-system","title":"Multi-Indicator Confirmation System","text":"<pre><code># Complete trading system with phase as primary timer\nrequire 'sqa/tai'\n\ndef analyze_trade_opportunity(prices, highs, lows)\n  # Calculate indicators\n  phase = SQA::TAI.ht_dcphase(prices)\n  period = SQA::TAI.ht_dcperiod(prices)\n  sine, lead_sine = SQA::TAI.ht_sine(prices)\n  rsi = SQA::TAI.rsi(prices, period: 14)\n\n  current_phase = phase.last\n  current_period = period.last.round\n  current_sine = sine.last\n  current_lead = lead_sine.last\n  current_rsi = rsi.last\n  current_price = prices.last\n\n  # Phase-based analysis\n  at_bottom = current_phase &gt;= 330 || current_phase &lt;= 30\n  at_top = current_phase &gt;= 150 &amp;&amp; current_phase &lt;= 210\n\n  # Buy conditions: Phase bottom + confirming indicators\n  if at_bottom\n    buy_score = 0\n    buy_score += 1 if current_rsi &lt; 40\n    buy_score += 1 if current_sine &lt; -0.5\n    buy_score += 1 if current_lead &gt; current_sine\n\n    if buy_score &gt;= 2\n      puts \"\\n=== BUY OPPORTUNITY ===\"\n      puts \"Phase: #{current_phase.round}\u00b0 (BOTTOM)\"\n      puts \"Cycle Period: #{current_period} bars\"\n      puts \"RSI: #{current_rsi.round(1)}\"\n      puts \"Confirmation Score: #{buy_score}/3\"\n      puts \"Expected cycle duration: #{current_period} bars\"\n      puts \"Target exit phase: ~180\u00b0 (cycle top)\"\n      return :buy\n    end\n  end\n\n  # Sell conditions: Phase top + confirming indicators\n  if at_top\n    sell_score = 0\n    sell_score += 1 if current_rsi &gt; 60\n    sell_score += 1 if current_sine &gt; 0.5\n    sell_score += 1 if current_lead &lt; current_sine\n\n    if sell_score &gt;= 2\n      puts \"\\n=== SELL OPPORTUNITY ===\"\n      puts \"Phase: #{current_phase.round}\u00b0 (TOP)\"\n      puts \"Cycle Period: #{current_period} bars\"\n      puts \"RSI: #{current_rsi.round(1)}\"\n      puts \"Confirmation Score: #{sell_score}/3\"\n      puts \"Expected cycle duration: #{current_period} bars\"\n      puts \"Target exit phase: ~360\u00b0/0\u00b0 (cycle bottom)\"\n      return :sell\n    end\n  end\n\n  # No clear signal\n  puts \"\\nPhase: #{current_phase.round}\u00b0 - No clear signal at this phase\"\n  return :hold\nend\n\n# Example usage\nsignal = analyze_trade_opportunity(prices, highs, lows)\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#best-practices","title":"Best Practices","text":""},{"location":"indicators/cycle/ht_dcphase/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When HT_DCPHASE works best: - Cyclical Markets: Forex pairs, commodities, and markets with clear oscillating behavior - Range-Bound Conditions: When prices are cycling between support and resistance - Mean-Reversion Strategies: Buying bottoms and selling tops of cycles - Swing Trading: Multi-day to multi-week timeframes - Confirmation Tool: Adding timing precision to other trading strategies</p> <p>Less effective in: - Strong, sustained trends with no retracements (use HT_TRENDMODE to detect) - Very short timeframes (&lt; 5 minute charts) - too much noise - Markets with irregular, erratic cycles - Immediately after major news events that break cycle patterns</p>"},{"location":"indicators/cycle/ht_dcphase/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With HT_DCPERIOD (Cycle Length): <pre><code>phase = SQA::TAI.ht_dcphase(prices)\nperiod = SQA::TAI.ht_dcperiod(prices)\n\ncurrent_phase = phase.last\ncurrent_period = period.last.round\n\n# Know where you are AND how long until next turn\nputs \"Current phase: #{current_phase.round}\u00b0\"\nputs \"Full cycle length: #{current_period} bars\"\n\n# Calculate approximate bars until phase 180\u00b0 (top)\nif current_phase &lt; 180\n  bars_to_top = ((180 - current_phase) / 360.0 * current_period).round\n  puts \"Approximately #{bars_to_top} bars until cycle top\"\nend\n</code></pre></p> <p>With HT_SINE (Sine Wave Representation): <pre><code>phase = SQA::TAI.ht_dcphase(prices)\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\n# Phase gives precise degree, sine gives normalized value\n# Use both for confirmation\nif phase.last &lt;= 30 &amp;&amp; sine.last &lt; -0.5\n  puts \"Double confirmation: Phase at bottom AND sine wave negative\"\n  puts \"High confidence buy signal\"\nend\n</code></pre></p> <p>With Momentum Oscillators: <pre><code>phase = SQA::TAI.ht_dcphase(prices)\nrsi = SQA::TAI.rsi(prices, period: 14)\nstoch_k, stoch_d = SQA::TAI.stoch(highs, lows, prices)\n\n# Phase determines WHEN to look, oscillators confirm\ncurrent_phase = phase.last\n\nif current_phase &gt;= 330 || current_phase &lt;= 30\n  # At cycle bottom - check if oscillators agree\n  if rsi.last &lt; 30 &amp;&amp; stoch_k.last &lt; 20\n    puts \"CONFIRMED BUY: Phase at bottom + oversold oscillators\"\n  end\n\nelsif current_phase &gt;= 150 &amp;&amp; current_phase &lt;= 210\n  # At cycle top - check if oscillators agree\n  if rsi.last &gt; 70 &amp;&amp; stoch_k.last &gt; 80\n    puts \"CONFIRMED SELL: Phase at top + overbought oscillators\"\n  end\nend\n</code></pre></p> <p>With Trend Indicators: <pre><code># Use phase for timing within trend direction\nphase = SQA::TAI.ht_dcphase(prices)\ntrendmode = SQA::TAI.ht_trendmode(prices)\nema_fast = SQA::TAI.ema(prices, period: 12)\nema_slow = SQA::TAI.ema(prices, period: 26)\n\nif trendmode.last == 1\n  # In trend mode - use phase for entry timing only in trend direction\n  if ema_fast.last &gt; ema_slow.last &amp;&amp; (phase.last &gt;= 330 || phase.last &lt;= 30)\n    puts \"BUY: Uptrend + cycle bottom phase - optimal entry\"\n  end\nelse\n  # In cycle mode - use phase for both entries and exits\n  puts \"Cycle mode - trade both tops and bottoms\"\nend\n</code></pre></p>"},{"location":"indicators/cycle/ht_dcphase/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Insufficient Data</li> <li>Need minimum 32-63 bars for reliable phase calculation</li> <li>Initial values will be unreliable</li> <li> <p>Always verify sufficient data history before trading</p> </li> <li> <p>Ignoring Trend Context</p> </li> <li>Phase works best in cycling markets</li> <li>In strong trends, phase may be less meaningful</li> <li>Always check HT_TRENDMODE first</li> <li> <p>Don't fade strong trends based on phase alone</p> </li> <li> <p>Over-Trading Phase Zones</p> </li> <li>Not every phase bottom/top is tradeable</li> <li>Require confirmation from price action or other indicators</li> <li> <p>Quality over quantity - wait for best setups</p> </li> <li> <p>Misunderstanding Phase Wrapping</p> </li> <li>Phase goes from 359\u00b0 to 0\u00b0 (wraps around)</li> <li>Bottom zone spans 330-30\u00b0 (crosses the wrap)</li> <li> <p>Use proper logic: <code>(phase &gt;= 330 || phase &lt;= 30)</code></p> </li> <li> <p>Fixed Zone Boundaries</p> </li> <li>Optimal buy/sell zones may vary by market</li> <li>Test and adjust zones for your specific instrument</li> <li> <p>Consider market personality and volatility</p> </li> <li> <p>Ignoring Cycle Period Changes</p> </li> <li>Phase meaning depends on cycle length</li> <li>A short cycle rotates through phases faster</li> <li>Combine with HT_DCPERIOD for complete picture</li> </ol>"},{"location":"indicators/cycle/ht_dcphase/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Since HT_DCPHASE has no adjustable parameters, focus on how to apply it:</p> <p>For Intraday Trading: - Use on 15-min to 1-hour charts - Expect faster phase rotation (check every few bars) - Tighter phase zones (\u00b115\u00b0 instead of \u00b130\u00b0) - Combine with smaller ATR multiples for stops</p> <p>For Swing Trading: - Use on daily charts - Standard phase zones work well (\u00b130\u00b0) - Check phase daily for position management - Ideal for multi-day cycle timing</p> <p>For Position Trading: - Use on weekly charts - Wider phase zones acceptable (\u00b145\u00b0) - Phase changes slowly - perfect for patience - Combine with fundamental analysis</p>"},{"location":"indicators/cycle/ht_dcphase/#practical-example","title":"Practical Example","text":"<p>Complete trading system using HT_DCPHASE as primary timer:</p> <pre><code>require 'sqa/tai'\n\nclass CyclePhaseTrader\n  # Phase zone definitions\n  BOTTOM_ENTRY = -30..30\n  TOP_EXIT = 150..210\n  RISING_HOLD = 31..149\n  FALLING_WAIT = 211..329\n  APPROACHING_BOTTOM = 330..360\n\n  def initialize(prices, highs, lows)\n    @prices = prices\n    @highs = highs\n    @lows = lows\n\n    # Ensure sufficient data\n    raise \"Need at least 63 bars\" if prices.size &lt; 63\n  end\n\n  def analyze\n    # Calculate all indicators\n    @phase = SQA::TAI.ht_dcphase(@prices)\n    @period = SQA::TAI.ht_dcperiod(@prices)\n    @trendmode = SQA::TAI.ht_trendmode(@prices)\n    @sine, @lead_sine = SQA::TAI.ht_sine(@prices)\n    @rsi = SQA::TAI.rsi(@prices, period: 14)\n    @atr = SQA::TAI.atr(@highs, @lows, @prices, period: 14)\n\n    current_phase = @phase.last\n    current_period = @period.last.round\n    current_trendmode = @trendmode.last\n    current_price = @prices.last\n    current_atr = @atr.last\n\n    puts \"\\n\" + \"=\"*60\n    puts \"CYCLE PHASE ANALYSIS\"\n    puts \"=\"*60\n    puts \"Current Price: #{current_price.round(2)}\"\n    puts \"Cycle Phase: #{current_phase.round(1)}\u00b0\"\n    puts \"Cycle Period: #{current_period} bars\"\n    puts \"Market Mode: #{current_trendmode == 1 ? 'TREND' : 'CYCLE'}\"\n    puts \"ATR: #{current_atr.round(2)}\"\n    puts \"-\"*60\n\n    # Adjust phase for wrap-around (normalize to -180 to 180 for easier logic)\n    normalized_phase = current_phase &gt; 180 ? current_phase - 360 : current_phase\n\n    # Check phase zone\n    if BOTTOM_ENTRY.cover?(normalized_phase.abs) &amp;&amp; normalized_phase.abs == normalized_phase.abs\n      analyze_bottom_entry(current_price, current_phase, current_period, current_atr)\n    elsif TOP_EXIT.cover?(current_phase)\n      analyze_top_exit(current_price, current_phase, current_period, current_atr)\n    elsif RISING_HOLD.cover?(current_phase)\n      analyze_rising_phase(current_phase, current_period)\n    elsif FALLING_WAIT.cover?(current_phase) || APPROACHING_BOTTOM.cover?(current_phase)\n      analyze_falling_phase(current_phase, current_period)\n    end\n\n    puts \"=\"*60\n  end\n\n  private\n\n  def analyze_bottom_entry(price, phase, period, atr)\n    puts \"\\nPHASE ZONE: CYCLE BOTTOM (0\u00b0)\"\n    puts \"Status: PRIMARY BUY ZONE\"\n    puts \"\"\n\n    # Check confirmation\n    rsi_confirm = @rsi.last &lt; 40\n    sine_confirm = @sine.last &lt; -0.3\n    lead_confirm = @lead_sine.last &gt; @sine.last\n\n    confirmations = [rsi_confirm, sine_confirm, lead_confirm].count(true)\n\n    puts \"Confirmations:\"\n    puts \"  RSI &lt; 40: #{rsi_confirm ? '\u2713' : '\u2717'} (#{@rsi.last.round(1)})\"\n    puts \"  Sine &lt; -0.3: #{sine_confirm ? '\u2713' : '\u2717'} (#{@sine.last.round(3)})\"\n    puts \"  Lead &gt; Sine: #{lead_confirm ? '\u2713' : '\u2717'}\"\n    puts \"  Total: #{confirmations}/3\"\n    puts \"\"\n\n    if confirmations &gt;= 2\n      # Generate buy signal with full details\n      entry = price\n      stop_loss = entry - (2.0 * atr)\n      target_1 = entry + (2.0 * atr)\n      target_2 = entry + (3.0 * atr)\n      risk_reward = ((target_1 - entry) / (entry - stop_loss)).round(2)\n\n      puts \"*** BUY SIGNAL GENERATED ***\"\n      puts \"\"\n      puts \"Entry: #{entry.round(2)}\"\n      puts \"Stop Loss: #{stop_loss.round(2)} (-#{((entry - stop_loss) / entry * 100).round(2)}%)\"\n      puts \"Target 1: #{target_1.round(2)} (+#{((target_1 - entry) / entry * 100).round(2)}%)\"\n      puts \"Target 2: #{target_2.round(2)} (+#{((target_2 - entry) / entry * 100).round(2)}%)\"\n      puts \"Risk:Reward: 1:#{risk_reward}\"\n      puts \"\"\n      puts \"Expected Duration: ~#{period} bars to reach cycle top\"\n      puts \"Target Exit Phase: 150-210\u00b0 (cycle top)\"\n      puts \"Management: Move stop to breakeven at Target 1\"\n    else\n      puts \"Insufficient confirmations - wait for stronger signal\"\n    end\n  end\n\n  def analyze_top_exit(price, phase, period, atr)\n    puts \"\\nPHASE ZONE: CYCLE TOP (180\u00b0)\"\n    puts \"Status: PRIMARY SELL ZONE\"\n    puts \"\"\n\n    # Check confirmation\n    rsi_confirm = @rsi.last &gt; 60\n    sine_confirm = @sine.last &gt; 0.3\n    lead_confirm = @lead_sine.last &lt; @sine.last\n\n    confirmations = [rsi_confirm, sine_confirm, lead_confirm].count(true)\n\n    puts \"Confirmations:\"\n    puts \"  RSI &gt; 60: #{rsi_confirm ? '\u2713' : '\u2717'} (#{@rsi.last.round(1)})\"\n    puts \"  Sine &gt; 0.3: #{sine_confirm ? '\u2713' : '\u2717'} (#{@sine.last.round(3)})\"\n    puts \"  Lead &lt; Sine: #{lead_confirm ? '\u2713' : '\u2717'}\"\n    puts \"  Total: #{confirmations}/3\"\n    puts \"\"\n\n    if confirmations &gt;= 2\n      puts \"*** SELL SIGNAL GENERATED ***\"\n      puts \"\"\n      puts \"Exit Price: #{price.round(2)}\"\n      puts \"Rationale: Cycle top reached with confirmation\"\n      puts \"Expected: Phase will decline toward 270\u00b0 then 360\u00b0/0\u00b0\"\n      puts \"Next Opportunity: Buy signal expected in ~#{(period / 2).round} bars\"\n    else\n      puts \"Insufficient confirmations - consider partial exit or tighten stops\"\n    end\n  end\n\n  def analyze_rising_phase(phase, period)\n    puts \"\\nPHASE ZONE: RISING (30-150\u00b0)\"\n    puts \"Status: HOLD LONG POSITIONS\"\n    puts \"\"\n    puts \"Current Phase: #{phase.round}\u00b0\"\n\n    # Estimate progress to top\n    progress = ((phase - 30) / 120.0 * 100).round\n    bars_to_top = ((180 - phase) / 180.0 * period / 2).round\n\n    puts \"Progress to Top: #{progress}%\"\n    puts \"Estimated Bars to Top: ~#{bars_to_top}\"\n    puts \"\"\n\n    if phase &gt; 120\n      puts \"WARNING: Approaching cycle top soon\"\n      puts \"Action: Consider tightening stops or partial profit-taking\"\n    else\n      puts \"Action: Hold positions, let profits run\"\n    end\n  end\n\n  def analyze_falling_phase(phase, period)\n    if phase &gt;= 330\n      puts \"\\nPHASE ZONE: APPROACHING BOTTOM (330-360\u00b0)\"\n      puts \"Status: PREPARE FOR BUY\"\n      puts \"\"\n\n      bars_to_bottom = ((360 - phase) / 360.0 * period).round\n      puts \"Estimated Bars to Bottom: ~#{bars_to_bottom}\"\n      puts \"Action: Watch for buy confirmations (RSI, Sine, price action)\"\n    else\n      puts \"\\nPHASE ZONE: FALLING (210-330\u00b0)\"\n      puts \"Status: WAIT / HOLD SHORT\"\n      puts \"\"\n\n      progress = ((phase - 210) / 120.0 * 100).round\n      puts \"Progress to Bottom: #{progress}%\"\n      puts \"Action: Stay out or hold short positions if applicable\"\n    end\n  end\nend\n\n# Example usage with real data\nprices = [\n  # ... your actual price data (need 63+ bars)\n]\nhighs = [...]\nlows = [...]\n\ntrader = CyclePhaseTrader.new(prices, highs, lows)\ntrader.analyze\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/cycle/ht_dcphase/#hilbert-transform-family","title":"Hilbert Transform Family","text":"<ul> <li>HT_DCPERIOD: Identifies the length of the dominant cycle - tells you HOW LONG the cycle is</li> <li>HT_SINE: Generates sine wave representation of cycle - normalized version of phase</li> <li>HT_PHASOR: Provides in-phase and quadrature components for advanced analysis</li> <li>HT_TRENDMODE: Determines if market is in trend or cycle mode - crucial for knowing when to use phase</li> <li>HT_TRENDLINE: Provides instantaneous trendline based on Hilbert Transform</li> </ul> <p>Complete Cycle Analysis Workflow: 1. Use HT_TRENDMODE to determine if market is cycling (required for phase to be meaningful) 2. Use HT_DCPERIOD to know the cycle length 3. Use HT_DCPHASE (this indicator) to know where you are in the cycle 4. Use HT_SINE for normalized cycle representation and crossover signals</p>"},{"location":"indicators/cycle/ht_dcphase/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI: Combine with phase for entry/exit confirmation</li> <li>Stochastic: Additional momentum confirmation at phase extremes</li> <li>ATR: Size stops and targets based on volatility</li> <li>MAMA: Adaptive moving average that responds to cycle changes</li> <li>EMA: Use for trend context with phase timing</li> </ul>"},{"location":"indicators/cycle/ht_dcphase/#alternative-phase-indicators","title":"Alternative Phase Indicators","text":"<p>While HT_DCPHASE is unique in its mathematical approach, similar concepts include: - Traditional cycle counting (peak-to-peak, trough-to-trough) - Detrended Price Oscillator (DPO) - shows position in cycle but less precise - Ehlers Fisher Transform - different phase representation</p>"},{"location":"indicators/cycle/ht_dcphase/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/cycle/ht_dcphase/#phase-velocity-analysis","title":"Phase Velocity Analysis","text":"<p>Monitor how fast phase is changing to assess cycle quality:</p> <pre><code># Calculate phase velocity (degrees per bar)\nphases = SQA::TAI.ht_dcphase(prices)\n\n# Look at recent phase changes\nrecent_phases = phases.last(5)\nphase_changes = recent_phases.each_cons(2).map { |a, b|\n  change = b - a\n  # Handle wrap-around\n  change = change - 360 if change &gt; 180\n  change = change + 360 if change &lt; -180\n  change\n}\n\navg_velocity = phase_changes.sum / phase_changes.size\n\nputs \"Average phase velocity: #{avg_velocity.round(1)}\u00b0/bar\"\n\nif avg_velocity.abs &gt; 20\n  puts \"Fast phase movement - strong, clear cycle\"\nelsif avg_velocity.abs &lt; 5\n  puts \"Slow phase movement - weak or unclear cycle\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#phase-divergence-detection","title":"Phase Divergence Detection","text":"<p>Look for divergences between price and phase:</p> <pre><code># Compare price action with phase expectations\nphases = SQA::TAI.ht_dcphase(prices)\ncurrent_phase = phases.last\ncurrent_price = prices.last\nprev_price = prices[-10]\n\n# At cycle top, price should be making highs\nif current_phase &gt;= 150 &amp;&amp; current_phase &lt;= 210\n  if current_price &lt; prev_price\n    puts \"BEARISH DIVERGENCE: Phase at top but price lower than before\"\n    puts \"Strong sell signal - cycle top with price weakness\"\n  end\nend\n\n# At cycle bottom, price should be making lows\nif current_phase &gt;= 330 || current_phase &lt;= 30\n  if current_price &gt; prev_price\n    puts \"BULLISH DIVERGENCE: Phase at bottom but price higher than before\"\n    puts \"Strong buy signal - cycle bottom with price strength\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#multi-timeframe-phase-analysis","title":"Multi-Timeframe Phase Analysis","text":"<p>Use phase across timeframes for nested cycle analysis:</p> <pre><code># Daily and hourly phase alignment\ndaily_phase = SQA::TAI.ht_dcphase(daily_prices).last\nhourly_phase = SQA::TAI.ht_dcphase(hourly_prices).last\n\nputs \"Daily Phase: #{daily_phase.round}\u00b0\"\nputs \"Hourly Phase: #{hourly_phase.round}\u00b0\"\n\n# Best trades: both timeframes aligned at bottoms\nif (daily_phase &gt;= 330 || daily_phase &lt;= 30) &amp;&amp;\n   (hourly_phase &gt;= 330 || hourly_phase &lt;= 30)\n  puts \"POWER SETUP: Both daily and hourly phases at bottom\"\n  puts \"Highest probability long entry\"\nend\n\n# Trade with higher timeframe, time with lower\nif daily_phase &gt;= 30 &amp;&amp; daily_phase &lt;= 150\n  # Daily in rising phase (bullish)\n  if hourly_phase &gt;= 330 || hourly_phase &lt;= 30\n    puts \"BUY: Daily rising phase + hourly phase at bottom\"\n    puts \"Optimal timing for daily trend direction\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#phase-based-position-sizing","title":"Phase-Based Position Sizing","text":"<p>Adjust position size based on phase confidence:</p> <pre><code>def calculate_position_size(base_size, phase, confirmations)\n  current_phase = phase.last\n\n  # Maximum size at optimal phases with confirmations\n  if (current_phase &gt;= 330 || current_phase &lt;= 30) &amp;&amp; confirmations &gt;= 2\n    size_multiplier = 1.0 # Full size at bottom with confirmation\n  elsif (current_phase &gt;= 150 &amp;&amp; current_phase &lt;= 210) &amp;&amp; confirmations &gt;= 2\n    size_multiplier = 0.0 # No new positions at top (exit zone)\n  elsif current_phase &gt; 30 &amp;&amp; current_phase &lt; 90\n    size_multiplier = 0.75 # Reduced size in early uptrend\n  elsif current_phase &gt; 90 &amp;&amp; current_phase &lt; 150\n    size_multiplier = 0.5 # Half size in late uptrend\n  else\n    size_multiplier = 0.0 # No positions in falling phase\n  end\n\n  position_size = base_size * size_multiplier\n\n  puts \"Phase: #{current_phase.round}\u00b0\"\n  puts \"Size Multiplier: #{(size_multiplier * 100).round}%\"\n  puts \"Position Size: #{position_size.round(2)}\"\n\n  position_size\nend\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#cycle-phase-prediction","title":"Cycle Phase Prediction","text":"<p>Estimate future phase values based on current period:</p> <pre><code>def project_future_phase(prices, bars_ahead)\n  phases = SQA::TAI.ht_dcphase(prices)\n  periods = SQA::TAI.ht_dcperiod(prices)\n\n  current_phase = phases.last\n  current_period = periods.last\n\n  # Degrees per bar (assuming constant cycle)\n  degrees_per_bar = 360.0 / current_period\n\n  # Project future phase\n  future_phase = current_phase + (degrees_per_bar * bars_ahead)\n  future_phase = future_phase % 360 # Wrap around\n\n  puts \"Current Phase: #{current_phase.round}\u00b0\"\n  puts \"Current Period: #{current_period.round} bars\"\n  puts \"Projected Phase in #{bars_ahead} bars: #{future_phase.round}\u00b0\"\n\n  # Identify next key phase\n  if current_phase &lt; 180 &amp;&amp; future_phase &lt; 180\n    bars_to_top = ((180 - current_phase) / degrees_per_bar).round\n    puts \"Estimated bars to cycle top (180\u00b0): #{bars_to_top}\"\n  elsif current_phase &gt; 180\n    bars_to_bottom = ((360 - current_phase) / degrees_per_bar).round\n    puts \"Estimated bars to cycle bottom (360\u00b0/0\u00b0): #{bars_to_bottom}\"\n  end\n\n  future_phase\nend\n\n# Example: Where will phase be in 10 bars?\nproject_future_phase(prices, 10)\n</code></pre>"},{"location":"indicators/cycle/ht_dcphase/#references","title":"References","text":"<ul> <li>\"Rocket Science for Traders\" by John F. Ehlers - Comprehensive treatment of Hilbert Transform and phase analysis</li> <li>\"Cybernetic Analysis for Stocks and Futures\" by John F. Ehlers - Advanced applications of cycle phase in trading</li> <li>\"Cycle Analytics for Traders\" by John F. Ehlers - Detailed cycle theory and practical applications</li> <li>Original Research: John F. Ehlers developed the application of Hilbert Transform to financial markets</li> <li>Signal Processing: Hilbert Transform is a standard tool in electrical engineering and signal processing</li> <li>TA-Lib Documentation: HT_DCPHASE Function</li> </ul>"},{"location":"indicators/cycle/ht_dcphase/#see-also","title":"See Also","text":"<ul> <li>Cycle Indicators Overview</li> <li>Hilbert Transform Indicators Family</li> </ul> <ul> <li>Phase-Based Trading Strategies Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/cycle/ht_phasor/","title":"HT_PHASOR (Hilbert Transform - Phasor Components)","text":""},{"location":"indicators/cycle/ht_phasor/#overview","title":"Overview","text":"<p>The Hilbert Transform - Phasor Components (HT_PHASOR) is an advanced cycle analysis indicator that decomposes price data into two orthogonal components: the in-phase and quadrature components. Together, these components define a phasor (vector) in cycle space that represents both the amplitude and phase of the dominant market cycle. This provides traders with a mathematical framework for understanding cycle strength, direction, and momentum at any given time.</p>"},{"location":"indicators/cycle/ht_phasor/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>prices</code> Array Required Array of price values (typically close prices)"},{"location":"indicators/cycle/ht_phasor/#parameter-details","title":"Parameter Details","text":"<p>prices - Input data should be an array of closing prices - Minimum 32 data points required for reliable results (due to Hilbert Transform calculation requirements) - More data provides better accuracy in cycle identification - Works best with at least 63+ data points for stable output - The transform analyzes the frequency domain of the price series to extract cyclical components</p>"},{"location":"indicators/cycle/ht_phasor/#usage","title":"Usage","text":""},{"location":"indicators/cycle/ht_phasor/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Calculate phasor components\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 45.61,\n          46.50, 47.20, 46.80, 47.50, 48.10, 48.30,\n          # ... more data points ...\n         ]\n\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\n# Current phasor components\ncurrent_inphase = in_phase.last\ncurrent_quadrature = quadrature.last\n\nputs \"In-Phase Component: #{current_inphase.round(4)}\"\nputs \"Quadrature Component: #{current_quadrature.round(4)}\"\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#calculating-phasor-magnitude-and-angle","title":"Calculating Phasor Magnitude and Angle","text":"<pre><code># Get phasor components\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\n# Calculate phasor magnitude (cycle amplitude)\nmagnitude = Math.sqrt(in_phase.last**2 + quadrature.last**2)\n\n# Calculate phasor angle (cycle phase in radians)\nangle_rad = Math.atan2(quadrature.last, in_phase.last)\nangle_deg = angle_rad * (180.0 / Math::PI)\n\nputs \"Cycle Amplitude: #{magnitude.round(4)}\"\nputs \"Cycle Phase: #{angle_deg.round(2)} degrees\"\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#tracking-phasor-evolution","title":"Tracking Phasor Evolution","text":"<pre><code># Monitor how the phasor changes over time\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\n# Get last 10 phasor readings\nrecent_ip = in_phase.last(10)\nrecent_q = quadrature.last(10)\n\n# Calculate magnitude trend\nmagnitudes = recent_ip.zip(recent_q).map do |ip, q|\n  Math.sqrt(ip**2 + q**2)\nend\n\navg_magnitude = magnitudes.sum / magnitudes.size\ncurrent_magnitude = magnitudes.last\n\nif current_magnitude &gt; avg_magnitude * 1.2\n  puts \"Cycle strength INCREASING\"\nelsif current_magnitude &lt; avg_magnitude * 0.8\n  puts \"Cycle strength DECREASING\"\nelse\n  puts \"Cycle strength STABLE\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/cycle/ht_phasor/#what-it-measures","title":"What It Measures","text":"<p>HT_PHASOR measures two fundamental properties of the dominant market cycle:</p> <p>In-Phase Component (I): - Represents the current cycle value aligned with the price series - Indicates the component of the cycle that is \"in sync\" with current price movement - Positive values indicate cycle is in upward phase - Negative values indicate cycle is in downward phase</p> <p>Quadrature Component (Q): - Represents the cycle value 90 degrees (one quarter cycle) ahead - Provides leading information about where the cycle is heading - Acts as a derivative of the in-phase component - Helps predict upcoming cycle transitions</p> <p>Together as a Phasor: The phasor is a vector (I, Q) in two-dimensional space that fully describes: - Magnitude: <code>sqrt(I\u00b2 + Q\u00b2)</code> = cycle amplitude/strength - Angle: <code>atan2(Q, I)</code> = current position within the cycle - Direction: How the phasor is rotating indicates cycle momentum</p>"},{"location":"indicators/cycle/ht_phasor/#why-its-important","title":"Why It's Important","text":"<p>Traditional single-value indicators only show you the current state. The phasor gives you:</p> <ol> <li>Current State: Where the cycle is now (in-phase component)</li> <li>Future Direction: Where the cycle is heading (quadrature component)</li> <li>Cycle Strength: How strong the cyclical behavior is (magnitude)</li> <li>Cycle Position: Where you are in the cycle (angle)</li> </ol> <p>This multidimensional view allows for: - More accurate cycle timing - Earlier detection of cycle reversals - Better understanding of cycle quality - Advanced signal filtering and confirmation</p>"},{"location":"indicators/cycle/ht_phasor/#calculation-method","title":"Calculation Method","text":"<p>The Hilbert Transform applies complex mathematical analysis to extract cycle components:</p> <ol> <li>Apply Hilbert Transform to the price data to create an analytic signal</li> <li>Extract In-Phase Component (real part): Current cycle value</li> <li>Extract Quadrature Component (imaginary part): Leading cycle value</li> <li>Output both components as orthogonal (90\u00b0 apart) signals</li> <li>Components define phasor in complex plane</li> </ol> <p>Key Concept: Think of the phasor as a rotating arrow in two-dimensional space. The arrow's length indicates cycle strength, and its angle indicates where you are in the cycle. As the market cycles, the arrow rotates clockwise through 360 degrees, providing continuous position and momentum information.</p>"},{"location":"indicators/cycle/ht_phasor/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Output: Two synchronized arrays (in-phase and quadrature)</li> <li>Type: Cycle decomposition, advanced signal processing</li> <li>Lag: Moderate - requires history to establish cycle characteristics</li> <li>Relationship: Quadrature leads in-phase by 90 degrees</li> <li>Best Used: Markets with clear cyclical behavior, cycle analysis, advanced timing</li> </ul>"},{"location":"indicators/cycle/ht_phasor/#interpretation","title":"Interpretation","text":""},{"location":"indicators/cycle/ht_phasor/#component-relationships","title":"Component Relationships","text":"<p>In-Phase and Quadrature Interaction:</p> <p>The two components work together to provide complete cycle information:</p> In-Phase Quadrature Cycle Phase Interpretation Positive Positive 0\u00b0 - 90\u00b0 Early upward phase, momentum building Negative Positive 90\u00b0 - 180\u00b0 Late upward phase, approaching peak Negative Negative 180\u00b0 - 270\u00b0 Early downward phase, momentum declining Positive Negative 270\u00b0 - 360\u00b0 Late downward phase, approaching trough"},{"location":"indicators/cycle/ht_phasor/#phasor-magnitude-cycle-strength","title":"Phasor Magnitude (Cycle Strength)","text":"<p>The magnitude of the phasor indicates cycle quality:</p> <ul> <li>High Magnitude (&gt; 2.0)</li> <li>Strong, well-defined cyclical behavior</li> <li>Cycle signals are reliable</li> <li>Good conditions for cycle-based trading</li> <li> <p>Clear market rhythm</p> </li> <li> <p>Medium Magnitude (0.5 - 2.0)</p> </li> <li>Moderate cyclical behavior</li> <li>Cycles present but mixed with trend/noise</li> <li>Standard trading conditions</li> <li> <p>Use additional confirmation</p> </li> <li> <p>Low Magnitude (&lt; 0.5)</p> </li> <li>Weak or no cyclical behavior</li> <li>Market may be trending or random</li> <li>Cycle signals unreliable</li> <li>Consider trend-following instead</li> </ul>"},{"location":"indicators/cycle/ht_phasor/#phasor-angle-cycle-position","title":"Phasor Angle (Cycle Position)","text":"<p>The angle tells you where you are in the cycle:</p> <ul> <li>0\u00b0 to 90\u00b0: Cycle rising, momentum increasing (bullish acceleration)</li> <li>90\u00b0 to 180\u00b0: Cycle still rising but momentum decreasing (bullish deceleration)</li> <li>180\u00b0 to 270\u00b0: Cycle falling, momentum decreasing (bearish acceleration)</li> <li>270\u00b0 to 360\u00b0: Cycle still falling but momentum increasing (bearish deceleration)</li> </ul> <p>Critical Angles: - 0\u00b0 (360\u00b0): Cycle trough - potential buy zone - 90\u00b0: Maximum upward momentum - 180\u00b0: Cycle peak - potential sell zone - 270\u00b0: Maximum downward momentum</p>"},{"location":"indicators/cycle/ht_phasor/#component-crossovers","title":"Component Crossovers","text":"<p>In-Phase Crosses Zero: - Upward cross (negative to positive): Cycle entering upward phase - Downward cross (positive to negative): Cycle entering downward phase - Similar to price crossing a moving average</p> <p>Quadrature Crosses Zero: - Upward cross: Predicts upcoming bullish cycle phase (90\u00b0 ahead) - Downward cross: Predicts upcoming bearish cycle phase (90\u00b0 ahead) - Provides leading signal before in-phase crosses</p> <p>Components Cross Each Other: - In-Phase crosses above Quadrature: Acceleration point (0\u00b0 or 180\u00b0) - Quadrature crosses above In-Phase: Deceleration point (90\u00b0 or 270\u00b0) - These are inflection points in the cycle</p>"},{"location":"indicators/cycle/ht_phasor/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/cycle/ht_phasor/#quadrature-leading-signal","title":"Quadrature Leading Signal","text":"<p>Primary Use Case: Early cycle reversal detection</p> <pre><code>in_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\n# Quadrature leads in-phase by 90 degrees\ncurrent_ip = in_phase.last\nprevious_ip = in_phase[-2]\ncurrent_q = quadrature.last\nprevious_q = quadrature[-2]\n\n# Quadrature zero cross predicts upcoming in-phase zero cross\nif previous_q &lt; 0 &amp;&amp; current_q &gt;= 0\n  puts \"EARLY BUY SIGNAL: Quadrature crossed up\"\n  puts \"Expect in-phase upward cross soon (cycle trough approaching)\"\n\nelsif previous_q &gt; 0 &amp;&amp; current_q &lt;= 0\n  puts \"EARLY SELL SIGNAL: Quadrature crossed down\"\n  puts \"Expect in-phase downward cross soon (cycle peak approaching)\"\nend\n\n# Confirm with in-phase\nif previous_ip &lt; 0 &amp;&amp; current_ip &gt;= 0\n  puts \"CONFIRMED BUY: In-phase crossed up (cycle trough confirmed)\"\n\nelsif previous_ip &gt; 0 &amp;&amp; current_ip &lt;= 0\n  puts \"CONFIRMED SELL: In-phase crossed down (cycle peak confirmed)\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#phasor-magnitude-trading","title":"Phasor Magnitude Trading","text":"<p>Entry Signals Based on Cycle Strength:</p> <pre><code>in_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\n# Calculate current magnitude\nip = in_phase.last\nq = quadrature.last\nmagnitude = Math.sqrt(ip**2 + q**2)\n\n# Calculate angle\nangle = Math.atan2(q, ip)\nangle_deg = angle * (180.0 / Math::PI)\nangle_deg += 360 if angle_deg &lt; 0 # Normalize to 0-360\n\n# Only trade when cycle is strong\nif magnitude &gt; 1.5\n  if angle_deg &gt;= 0 &amp;&amp; angle_deg &lt; 90\n    puts \"STRONG BUY ZONE: Early upward cycle phase\"\n    puts \"Magnitude: #{magnitude.round(2)} (strong cycle)\"\n    puts \"Phase: #{angle_deg.round(1)}\u00b0 (building momentum)\"\n\n  elsif angle_deg &gt;= 180 &amp;&amp; angle_deg &lt; 270\n    puts \"STRONG SELL ZONE: Early downward cycle phase\"\n    puts \"Magnitude: #{magnitude.round(2)} (strong cycle)\"\n    puts \"Phase: #{angle_deg.round(1)}\u00b0 (declining momentum)\"\n  end\nelse\n  puts \"NO SIGNAL: Cycle too weak (magnitude: #{magnitude.round(2)})\"\n  puts \"Wait for stronger cyclical behavior\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#phasor-divergence","title":"Phasor Divergence","text":"<p>Detecting Cycle Quality Changes:</p> <pre><code>in_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\n# Calculate magnitude series\nmagnitudes = in_phase.zip(quadrature).map do |ip, q|\n  Math.sqrt(ip**2 + q**2)\nend\n\n# Compare price highs with magnitude highs\nrecent_prices = prices.last(20)\nrecent_magnitudes = magnitudes.last(20)\n\nprice_high_idx = recent_prices.each_with_index.max[1]\nmagnitude_high_idx = recent_magnitudes.each_with_index.max[1]\n\nif price_high_idx &gt; magnitude_high_idx\n  puts \"BEARISH DIVERGENCE: Price making new highs\"\n  puts \"But cycle strength is declining\"\n  puts \"Warning: Trend may be weakening\"\n\nelsif price_high_idx &lt; magnitude_high_idx\n  puts \"BULLISH DIVERGENCE: Cycle strength increasing\"\n  puts \"But price hasn't confirmed yet\"\n  puts \"Opportunity: Strong cycle emerging\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#phase-based-entry-strategy","title":"Phase-Based Entry Strategy","text":"<p>Optimal Entry at Specific Cycle Phases:</p> <pre><code>def calculate_phasor_angle(in_phase, quadrature)\n  angle = Math.atan2(quadrature, in_phase)\n  degrees = angle * (180.0 / Math::PI)\n  degrees += 360 if degrees &lt; 0\n  degrees\nend\n\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\nmagnitude = Math.sqrt(in_phase.last**2 + quadrature.last**2)\nphase = calculate_phasor_angle(in_phase.last, quadrature.last)\n\n# Define optimal entry zones\nBUY_ZONE = (350..370) # Near cycle trough (accounting for 360\u00b0 wrap)\nSELL_ZONE = (170..190) # Near cycle peak\n\n# Only trade in strong cycles\nif magnitude &gt; 1.0\n  if BUY_ZONE.cover?(phase) || BUY_ZONE.cover?(phase + 360)\n    stop_loss = prices.last * 0.98\n    take_profit = prices.last * 1.04\n\n    puts \"BUY SIGNAL: Optimal cycle phase\"\n    puts \"Phase: #{phase.round(1)}\u00b0 (near trough)\"\n    puts \"Magnitude: #{magnitude.round(2)}\"\n    puts \"Entry: #{prices.last.round(2)}\"\n    puts \"Stop: #{stop_loss.round(2)}\"\n    puts \"Target: #{take_profit.round(2)}\"\n\n  elsif SELL_ZONE.cover?(phase)\n    stop_loss = prices.last * 1.02\n    take_profit = prices.last * 0.96\n\n    puts \"SELL SIGNAL: Optimal cycle phase\"\n    puts \"Phase: #{phase.round(1)}\u00b0 (near peak)\"\n    puts \"Magnitude: #{magnitude.round(2)}\"\n    puts \"Entry: #{prices.last.round(2)}\"\n    puts \"Stop: #{stop_loss.round(2)}\"\n    puts \"Target: #{take_profit.round(2)}\"\n  end\nelse\n  puts \"Waiting: Cycle too weak (magnitude: #{magnitude.round(2)})\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#best-practices","title":"Best Practices","text":""},{"location":"indicators/cycle/ht_phasor/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When HT_PHASOR works best: - Cyclical markets: Currency pairs, commodities with seasonal patterns - Range-bound conditions: Markets oscillating between support/resistance - Advanced timing: When you need precise entry/exit within cycles - Cycle confirmation: Validating signals from other cycle indicators - Multi-dimensional analysis: When you need both position and momentum</p> <p>Less effective in: - Strong trending markets with no mean reversion - Very short timeframes with excessive noise - Markets with irregular, chaotic price movements - Low-liquidity instruments with erratic behavior</p>"},{"location":"indicators/cycle/ht_phasor/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With HT_DCPERIOD (Dominant Cycle Period):</p> <pre><code># Use DCPERIOD to validate cycle presence\ncycle_period = SQA::TAI.ht_dcperiod(prices).last\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\nmagnitude = Math.sqrt(in_phase.last**2 + quadrature.last**2)\n\nif cycle_period &gt;= 10 &amp;&amp; cycle_period &lt;= 40 &amp;&amp; magnitude &gt; 1.0\n  puts \"Valid cycle detected:\"\n  puts \"Period: #{cycle_period.round(1)} bars\"\n  puts \"Strength: #{magnitude.round(2)}\"\n  puts \"Safe to use phasor signals\"\nelse\n  puts \"Cycle not well-defined - use caution\"\nend\n</code></pre> <p>With HT_DCPHASE (Dominant Cycle Phase):</p> <pre><code># Cross-validate phase measurements\ndc_phase = SQA::TAI.ht_dcphase(prices).last\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\nphasor_angle = Math.atan2(quadrature.last, in_phase.last)\nphasor_phase = phasor_angle * (180.0 / Math::PI)\nphasor_phase += 360 if phasor_phase &lt; 0\n\n# Both should agree on cycle position\nphase_diff = (dc_phase - phasor_phase).abs\nphase_diff = 360 - phase_diff if phase_diff &gt; 180\n\nif phase_diff &lt; 30\n  puts \"Phase measurements agree - reliable signal\"\nelse\n  puts \"Phase disagreement - cycle may be transitioning\"\nend\n</code></pre> <p>With HT_SINE (Sine Wave):</p> <pre><code># Use sine wave for simplified signals\nsine, lead_sine = SQA::TAI.ht_sine(prices)\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\nmagnitude = Math.sqrt(in_phase.last**2 + quadrature.last**2)\n\n# Phasor magnitude filters sine signals\nif sine.last &lt; -0.5 &amp;&amp; magnitude &gt; 1.5\n  puts \"STRONG BUY: Sine oversold + strong cycle\"\nelsif sine.last &gt; 0.5 &amp;&amp; magnitude &gt; 1.5\n  puts \"STRONG SELL: Sine overbought + strong cycle\"\nelsif magnitude &lt; 0.5\n  puts \"IGNORE SINE: Cycle too weak\"\nend\n</code></pre> <p>With Traditional Oscillators:</p> <pre><code># Validate RSI signals with phasor\nrsi = SQA::TAI.rsi(prices, period: 14)\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\nangle = Math.atan2(quadrature.last, in_phase.last) * (180.0 / Math::PI)\nangle += 360 if angle &lt; 0\n\n# Cycle should support RSI signal\nif rsi.last &lt; 30 &amp;&amp; (angle &lt; 45 || angle &gt; 315)\n  puts \"CONFIRMED BUY: RSI oversold + cycle at trough\"\nelsif rsi.last &gt; 70 &amp;&amp; (angle &gt; 135 &amp;&amp; angle &lt; 225)\n  puts \"CONFIRMED SELL: RSI overbought + cycle at peak\"\nelse\n  puts \"CONFLICTING SIGNALS: RSI and cycle don't agree\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Insufficient Data</li> <li>Need minimum 32-63 bars for Hilbert Transform</li> <li>Initial values will be unstable and unreliable</li> <li> <p>Always validate data length before trading</p> </li> <li> <p>Ignoring Magnitude</p> </li> <li>Don't trade phasor angle when magnitude is low</li> <li>Low magnitude means weak or no cycle</li> <li> <p>Always check cycle strength before using position signals</p> </li> <li> <p>Phase Wrap-Around</p> </li> <li>Angle jumps from 359\u00b0 to 0\u00b0 (or \u03c0 to -\u03c0 in radians)</li> <li>Handle transitions carefully in code</li> <li> <p>Normalize angles to consistent range (0-360\u00b0 or -180\u00b0 to 180\u00b0)</p> </li> <li> <p>Over-Trading on Noise</p> </li> <li>Small fluctuations in components don't mean much</li> <li>Use thresholds for crossovers and changes</li> <li> <p>Smooth or filter when needed</p> </li> <li> <p>Mixing Trending and Cycling</p> </li> <li>Phasor assumes cyclical behavior exists</li> <li>In strong trends, cycles may be weak or absent</li> <li>Use HT_TRENDMODE to determine market regime first</li> </ol>"},{"location":"indicators/cycle/ht_phasor/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Since HT_PHASOR has no adjustable parameters, focus on how to interpret and use the output:</p> <p>For Different Timeframes:</p> <p>Intraday Trading (5-min to 1-hour charts): - Expect higher noise, lower magnitude - Use magnitude &gt; 1.0 as minimum threshold - Check phasor every few bars for position updates - Shorter cycle periods (10-20 bars)</p> <p>Swing Trading (daily charts): - Better signal quality, clearer cycles - Use magnitude &gt; 0.75 as threshold - Update daily for position management - Medium cycle periods (15-30 bars)</p> <p>Position Trading (weekly charts): - Strongest signals, most reliable cycles - Use magnitude &gt; 0.5 as threshold - Monitor weekly for long-term positioning - Longer cycle periods (20-40 bars)</p> <p>Magnitude Thresholds by Market: - Forex pairs: Typically 0.5 - 3.0 - Stock indices: Typically 1.0 - 4.0 - Commodities: Typically 0.75 - 3.5 - Individual stocks: Highly variable, 0.3 - 5.0</p>"},{"location":"indicators/cycle/ht_phasor/#practical-example","title":"Practical Example","text":"<p>Complete cycle trading system using phasor components:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data (need at least 63 bars)\nprices = [\n  # ... your price data ...\n]\n\n# Get phasor components\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\n# Verify we have enough data\nif in_phase.size &lt; 20\n  puts \"Insufficient data for reliable signals\"\n  exit\nend\n\n# Calculate phasor metrics\ndef phasor_metrics(in_phase, quadrature)\n  ip = in_phase.last\n  q = quadrature.last\n\n  magnitude = Math.sqrt(ip**2 + q**2)\n  angle_rad = Math.atan2(q, ip)\n  angle_deg = angle_rad * (180.0 / Math::PI)\n  angle_deg += 360 if angle_deg &lt; 0\n\n  {\n    in_phase: ip,\n    quadrature: q,\n    magnitude: magnitude,\n    angle: angle_deg,\n    angle_rad: angle_rad\n  }\nend\n\n# Get current phasor state\ncurrent = phasor_metrics(in_phase, quadrature)\nprevious = phasor_metrics(in_phase[0..-2], quadrature[0..-2])\n\n# Display phasor status\nputs \"=== Phasor Analysis ===\"\nputs \"In-Phase: #{current[:in_phase].round(4)}\"\nputs \"Quadrature: #{current[:quadrature].round(4)}\"\nputs \"Magnitude: #{current[:magnitude].round(4)}\"\nputs \"Phase: #{current[:angle].round(1)}\u00b0\"\nputs \"\"\n\n# Check cycle strength\nMIN_MAGNITUDE = 1.0\n\nif current[:magnitude] &lt; MIN_MAGNITUDE\n  puts \"Cycle too weak (#{current[:magnitude].round(2)} &lt; #{MIN_MAGNITUDE})\"\n  puts \"No trading signals - wait for stronger cycle\"\n  exit\nend\n\nputs \"Cycle strength: GOOD (magnitude: #{current[:magnitude].round(2)})\"\nputs \"\"\n\n# Determine cycle quadrant\ndef cycle_quadrant(angle)\n  case angle\n  when 0...90\n    \"Rising (accelerating)\"\n  when 90...180\n    \"Rising (decelerating)\"\n  when 180...270\n    \"Falling (accelerating)\"\n  when 270...360\n    \"Falling (decelerating)\"\n  end\nend\n\nputs \"Cycle Status: #{cycle_quadrant(current[:angle])}\"\nputs \"\"\n\n# Trading signals\nputs \"=== Trading Signals ===\"\n\n# Signal 1: Quadrature zero cross (leading indicator)\nif previous[:quadrature] &lt; 0 &amp;&amp; current[:quadrature] &gt;= 0\n  puts \"EARLY WARNING: Quadrature upward cross\"\n  puts \"Cycle trough approaching in ~quarter cycle\"\n  puts \"Prepare for buy opportunity\"\n  puts \"\"\nend\n\nif previous[:quadrature] &gt; 0 &amp;&amp; current[:quadrature] &lt;= 0\n  puts \"EARLY WARNING: Quadrature downward cross\"\n  puts \"Cycle peak approaching in ~quarter cycle\"\n  puts \"Prepare for sell opportunity\"\n  puts \"\"\nend\n\n# Signal 2: In-phase zero cross (confirmation)\nif previous[:in_phase] &lt; 0 &amp;&amp; current[:in_phase] &gt;= 0\n  current_price = prices.last\n  atr = SQA::TAI.atr([44.0] * prices.size, [43.0] * prices.size, prices, period: 14).last\n\n  stop_loss = current_price - (2.0 * atr)\n  take_profit = current_price + (3.0 * atr)\n\n  puts \"*** BUY SIGNAL ***\"\n  puts \"In-phase upward cross (cycle trough confirmed)\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{stop_loss.round(2)} (-#{((1 - stop_loss/current_price) * 100).round(1)}%)\"\n  puts \"Take Profit: #{take_profit.round(2)} (+#{((take_profit/current_price - 1) * 100).round(1)}%)\"\n  puts \"Cycle magnitude: #{current[:magnitude].round(2)}\"\n  puts \"\"\nend\n\nif previous[:in_phase] &gt; 0 &amp;&amp; current[:in_phase] &lt;= 0\n  current_price = prices.last\n  atr = SQA::TAI.atr([44.0] * prices.size, [43.0] * prices.size, prices, period: 14).last\n\n  stop_loss = current_price + (2.0 * atr)\n  take_profit = current_price - (3.0 * atr)\n\n  puts \"*** SELL SIGNAL ***\"\n  puts \"In-phase downward cross (cycle peak confirmed)\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{stop_loss.round(2)} (+#{((stop_loss/current_price - 1) * 100).round(1)}%)\"\n  puts \"Take Profit: #{take_profit.round(2)} (-#{((1 - take_profit/current_price) * 100).round(1)}%)\"\n  puts \"Cycle magnitude: #{current[:magnitude].round(2)}\"\n  puts \"\"\nend\n\n# Signal 3: Optimal phase entry zones\nBUY_ZONE_START = 350\nBUY_ZONE_END = 10\nSELL_ZONE_START = 170\nSELL_ZONE_END = 190\n\nin_buy_zone = current[:angle] &gt;= BUY_ZONE_START || current[:angle] &lt;= BUY_ZONE_END\nin_sell_zone = current[:angle] &gt;= SELL_ZONE_START &amp;&amp; current[:angle] &lt;= SELL_ZONE_END\n\nif in_buy_zone &amp;&amp; current[:magnitude] &gt; MIN_MAGNITUDE\n  puts \"OPTIMAL BUY ZONE\"\n  puts \"Phase: #{current[:angle].round(1)}\u00b0 (near cycle trough)\"\n  puts \"High probability of upward movement\"\n  puts \"\"\nelsif in_sell_zone &amp;&amp; current[:magnitude] &gt; MIN_MAGNITUDE\n  puts \"OPTIMAL SELL ZONE\"\n  puts \"Phase: #{current[:angle].round(1)}\u00b0 (near cycle peak)\"\n  puts \"High probability of downward movement\"\n  puts \"\"\nend\n\n# Signal 4: Magnitude change analysis\nrecent_magnitudes = (0...10).map do |i|\n  ip = in_phase[-(i+1)]\n  q = quadrature[-(i+1)]\n  Math.sqrt(ip**2 + q**2)\nend.reverse\n\navg_magnitude = recent_magnitudes.sum / recent_magnitudes.size\nmagnitude_trend = (current[:magnitude] - avg_magnitude) / avg_magnitude\n\nif magnitude_trend &gt; 0.2\n  puts \"CYCLE STRENGTHENING: +#{(magnitude_trend * 100).round(1)}%\"\n  puts \"Signals becoming more reliable\"\n  puts \"\"\nelsif magnitude_trend &lt; -0.2\n  puts \"CYCLE WEAKENING: #{(magnitude_trend * 100).round(1)}%\"\n  puts \"Consider reducing position size\"\n  puts \"\"\nend\n\n# Display position recommendation\nputs \"=== Position Recommendation ===\"\n\nif current[:magnitude] &gt;= MIN_MAGNITUDE * 1.5\n  puts \"Position size: FULL (strong cycle)\"\nelsif current[:magnitude] &gt;= MIN_MAGNITUDE\n  puts \"Position size: REDUCED (moderate cycle)\"\nelse\n  puts \"Position size: NONE (weak cycle)\"\nend\n\nputs \"Current magnitude: #{current[:magnitude].round(2)}\"\nputs \"Threshold: #{MIN_MAGNITUDE}\"\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/cycle/ht_phasor/#hilbert-transform-family","title":"Hilbert Transform Family","text":"<ul> <li>HT_DCPERIOD: Identifies the length of the dominant market cycle</li> <li>HT_DCPHASE: Provides the phase angle within the dominant cycle (0-360\u00b0)</li> <li>HT_SINE: Sine wave representation with leading indicator</li> <li>HT_TRENDMODE: Determines if market is trending or cycling</li> <li>HT_TRENDLINE: Instantaneous trendline based on Hilbert Transform</li> </ul>"},{"location":"indicators/cycle/ht_phasor/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>MAMA: MESA Adaptive Moving Average - uses Hilbert Transform concepts</li> <li>RSI: Combine with phasor for confirmed overbought/oversold</li> <li>STOCH: Use phasor to optimize stochastic period</li> <li>ATR: Position sizing based on phasor magnitude</li> </ul>"},{"location":"indicators/cycle/ht_phasor/#mathematical-relatives","title":"Mathematical Relatives","text":"<ul> <li>Complex Fourier Transform: HT_PHASOR is closely related to frequency analysis</li> <li>Quadrature Mirror Filters: Digital signal processing concept</li> <li>Vector Analysis: Phasor is a vector in 2D space</li> </ul>"},{"location":"indicators/cycle/ht_phasor/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/cycle/ht_phasor/#phasor-rotation-analysis","title":"Phasor Rotation Analysis","text":"<p>Track how the phasor rotates over time:</p> <pre><code>in_phase, quadrature = SQA::TAI.ht_phasor(prices)\n\n# Calculate angular velocity (how fast phasor is rotating)\ndef angular_velocity(in_phase, quadrature, lookback = 5)\n  angles = (0...lookback).map do |i|\n    ip = in_phase[-(i+1)]\n    q = quadrature[-(i+1)]\n    Math.atan2(q, ip)\n  end.reverse\n\n  # Calculate differences (handling wrap-around)\n  velocities = (1...angles.size).map do |i|\n    diff = angles[i] - angles[i-1]\n    diff -= 2 * Math::PI if diff &gt; Math::PI\n    diff += 2 * Math::PI if diff &lt; -Math::PI\n    diff\n  end\n\n  velocities.sum / velocities.size\nend\n\nrotation_speed = angular_velocity(in_phase, quadrature)\ndegrees_per_bar = rotation_speed * (180.0 / Math::PI)\n\nputs \"Phasor rotating at #{degrees_per_bar.round(2)}\u00b0/bar\"\n\nif degrees_per_bar.abs &gt; 20\n  puts \"Fast rotation - short cycle period\"\nelsif degrees_per_bar.abs &lt; 5\n  puts \"Slow rotation - long cycle period\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#3d-phasor-visualization-concepts","title":"3D Phasor Visualization Concepts","text":"<p>While we can't display 3D graphics here, conceptually:</p> <pre><code># Create time series of phasor positions\ndef phasor_trajectory(in_phase, quadrature, length = 50)\n  trajectory = []\n\n  (0...length).each do |i|\n    next if i &gt;= in_phase.size\n\n    ip = in_phase[-(length - i)]\n    q = quadrature[-(length - i)]\n\n    trajectory &lt;&lt; {\n      time: i,\n      in_phase: ip,\n      quadrature: q,\n      magnitude: Math.sqrt(ip**2 + q**2)\n    }\n  end\n\n  trajectory\nend\n\n# Analyze trajectory characteristics\ntrajectory = phasor_trajectory(in_phase, quadrature)\n\n# Check if trajectory is circular (good cycle) or erratic\nmagnitudes = trajectory.map { |t| t[:magnitude] }\nmag_stddev = Math.sqrt(magnitudes.map { |m| (m - magnitudes.sum/magnitudes.size)**2 }.sum / magnitudes.size)\nmag_mean = magnitudes.sum / magnitudes.size\n\ncoefficient_variation = mag_stddev / mag_mean\n\nif coefficient_variation &lt; 0.15\n  puts \"Clean circular trajectory - excellent cycle quality\"\nelsif coefficient_variation &lt; 0.30\n  puts \"Moderate trajectory variation - acceptable cycle\"\nelse\n  puts \"Erratic trajectory - poor cycle quality\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#harmonic-analysis","title":"Harmonic Analysis","text":"<p>Detect harmonic relationships in cycles:</p> <pre><code># Compare phasor at different scales\ndef harmonic_correlation(prices, harmonic = 2)\n  # Get phasor for full data\n  ip1, q1 = SQA::TAI.ht_phasor(prices)\n\n  # Get phasor for downsampled data (higher frequency cycle)\n  downsampled = prices.select.with_index { |_, i| i % harmonic == 0 }\n  ip2, q2 = SQA::TAI.ht_phasor(downsampled)\n\n  # Calculate correlation between magnitudes\n  mag1 = ip1.zip(q1).map { |ip, q| Math.sqrt(ip**2 + q**2) }\n  mag2_expanded = []\n\n  ip2.size.times do |i|\n    harmonic.times { mag2_expanded &lt;&lt; Math.sqrt(ip2[i]**2 + q2[i]**2) }\n  end\n\n  # Trim to same length\n  min_len = [mag1.size, mag2_expanded.size].min\n  mag1 = mag1.last(min_len)\n  mag2_expanded = mag2_expanded.last(min_len)\n\n  # Simple correlation\n  mean1 = mag1.sum / mag1.size\n  mean2 = mag2_expanded.sum / mag2_expanded.size\n\n  numerator = mag1.zip(mag2_expanded).map { |a, b| (a - mean1) * (b - mean2) }.sum\n  denom1 = Math.sqrt(mag1.map { |a| (a - mean1)**2 }.sum)\n  denom2 = Math.sqrt(mag2_expanded.map { |b| (b - mean2)**2 }.sum)\n\n  correlation = numerator / (denom1 * denom2)\n\n  {\n    harmonic: harmonic,\n    correlation: correlation,\n    interpretation: correlation &gt; 0.5 ? \"Strong harmonic present\" : \"No harmonic relationship\"\n  }\nend\n\nresult = harmonic_correlation(prices, 2)\nputs \"#{result[:harmonic]}x Harmonic Analysis:\"\nputs \"Correlation: #{result[:correlation].round(3)}\"\nputs result[:interpretation]\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#statistical-validation","title":"Statistical Validation","text":"<p>Assess signal reliability:</p> <pre><code># Measure phasor stability over time\ndef phasor_stability(in_phase, quadrature, window = 20)\n  return nil if in_phase.size &lt; window\n\n  # Get recent magnitudes\n  magnitudes = (0...window).map do |i|\n    ip = in_phase[-(i+1)]\n    q = quadrature[-(i+1)]\n    Math.sqrt(ip**2 + q**2)\n  end\n\n  # Calculate coefficient of variation\n  mean = magnitudes.sum / magnitudes.size\n  stddev = Math.sqrt(magnitudes.map { |m| (m - mean)**2 }.sum / magnitudes.size)\n  cv = stddev / mean\n\n  # Calculate angular stability\n  angles = (0...window).map do |i|\n    ip = in_phase[-(i+1)]\n    q = quadrature[-(i+1)]\n    Math.atan2(q, ip)\n  end\n\n  # Angular standard deviation (circular statistics)\n  cos_sum = angles.map { |a| Math.cos(a) }.sum\n  sin_sum = angles.map { |a| Math.sin(a) }.sum\n  r = Math.sqrt(cos_sum**2 + sin_sum**2) / angles.size\n  angular_stability = r # 1.0 = perfect stability, 0.0 = random\n\n  {\n    magnitude_cv: cv,\n    angular_stability: angular_stability,\n    quality: (cv &lt; 0.2 &amp;&amp; angular_stability &gt; 0.8) ? \"Excellent\" :\n             (cv &lt; 0.4 &amp;&amp; angular_stability &gt; 0.6) ? \"Good\" :\n             (cv &lt; 0.6 &amp;&amp; angular_stability &gt; 0.4) ? \"Fair\" : \"Poor\"\n  }\nend\n\nin_phase, quadrature = SQA::TAI.ht_phasor(prices)\nstability = phasor_stability(in_phase, quadrature)\n\nif stability\n  puts \"Phasor Quality Assessment:\"\n  puts \"Magnitude Variation: #{(stability[:magnitude_cv] * 100).round(1)}%\"\n  puts \"Angular Stability: #{(stability[:angular_stability] * 100).round(1)}%\"\n  puts \"Overall Quality: #{stability[:quality]}\"\n\n  if stability[:quality] == \"Excellent\" || stability[:quality] == \"Good\"\n    puts \"Recommendation: Signals are reliable - trade with confidence\"\n  else\n    puts \"Recommendation: Signals questionable - use additional confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_phasor/#references","title":"References","text":"<ul> <li>\"Rocket Science for Traders\" by John F. Ehlers - Comprehensive coverage of Hilbert Transform and phasor analysis</li> <li>\"Cybernetic Analysis for Stocks and Futures\" by John F. Ehlers - Advanced cycle indicators and adaptive systems</li> <li>\"Cycle Analytics for Traders\" by John F. Ehlers - Detailed cycle analysis methodologies</li> <li>Original Research: John F. Ehlers pioneered the application of Hilbert Transform and phasor analysis to trading</li> <li>Digital Signal Processing: Concepts from electrical engineering adapted for market analysis</li> <li>TA-Lib Documentation: HT_PHASOR Function</li> </ul>"},{"location":"indicators/cycle/ht_phasor/#see-also","title":"See Also","text":"<ul> <li>Cycle Indicators Overview</li> <li>Hilbert Transform Indicators Family</li> </ul> <ul> <li>Advanced Cycle Analysis Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/cycle/ht_sine/","title":"HT_SINE (Hilbert Transform - Sine Wave Indicator)","text":""},{"location":"indicators/cycle/ht_sine/#overview","title":"Overview","text":"<p>The Hilbert Transform - Sine Wave Indicator (HT_SINE) is an advanced cycle-based technical indicator that generates sine wave and lead sine wave representations of the dominant market cycle. Developed by John F. Ehlers, it transforms price data into smooth oscillating waveforms that reveal the natural rhythm of market cycles, providing traders with precise timing signals for entries and exits based on cycle phase analysis.</p> <p>Unlike traditional oscillators that measure momentum or rate of change, HT_SINE directly models the market's cyclical behavior as a sine wave, with the lead sine wave positioned 90 degrees ahead to provide early warning of cycle turning points.</p>"},{"location":"indicators/cycle/ht_sine/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>prices</code> Array Required Array of price values (typically close prices)"},{"location":"indicators/cycle/ht_sine/#parameter-details","title":"Parameter Details","text":"<p>prices - Input data should be an array of closing prices - Minimum 32 data points required for reliable results (due to Hilbert Transform calculation requirements) - More data provides better accuracy in cycle identification - Works best with at least 63+ data points for stable output - The algorithm automatically extracts the dominant cycle and represents it as sine waves</p>"},{"location":"indicators/cycle/ht_sine/#usage","title":"Usage","text":""},{"location":"indicators/cycle/ht_sine/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Calculate sine wave indicators\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 45.61,\n          46.50, 47.20, 46.80, 47.50, 48.10, 48.30,\n          # ... more data points ...\n         ]\n\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\n# Current values\ncurrent_sine = sine.last\ncurrent_lead = lead_sine.last\n\nputs \"Sine: #{current_sine.round(3)}\"\nputs \"Lead Sine: #{current_lead.round(3)}\"\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#practical-application","title":"Practical Application","text":"<pre><code># Detect crossover signals\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\n# Current and previous values\ncurr_sine = sine.last\nprev_sine = sine[-2]\ncurr_lead = lead_sine.last\nprev_lead = lead_sine[-2]\n\n# Identify crossovers\nif prev_sine &lt;= prev_lead &amp;&amp; curr_sine &gt; curr_lead\n  puts \"BULLISH CROSSOVER: Sine crossed above Lead Sine\"\n  puts \"Consider LONG entry\"\nelsif prev_sine &gt;= prev_lead &amp;&amp; curr_sine &lt; curr_lead\n  puts \"BEARISH CROSSOVER: Sine crossed below Lead Sine\"\n  puts \"Consider SHORT entry\"\nend\n\n# Check cycle extremes for signal strength\nif curr_sine.abs &gt; 0.7 || curr_lead.abs &gt; 0.7\n  puts \"Near cycle extreme - stronger signal quality\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/cycle/ht_sine/#what-it-measures","title":"What It Measures","text":"<p>HT_SINE generates two synchronized sine wave outputs that model the market's dominant cycle:</p> <ol> <li>Sine Wave: Represents the current phase of the dominant market cycle</li> <li>Lead Sine Wave: Positioned 90 degrees (quarter-cycle) ahead, providing early warnings</li> </ol> <p>Both oscillate between -1 and +1, creating a smooth representation of cyclical price movement. The relationship between these waves reveals: - Current position within the market cycle - Upcoming cycle turning points - Optimal timing for trade entries and exits</p>"},{"location":"indicators/cycle/ht_sine/#why-its-important","title":"Why It's Important","text":"<p>Traditional indicators react to price changes after they occur. HT_SINE's lead sine component provides a forward-looking perspective:</p> <p>Key Advantages: - Early Signals: Lead sine warns of upcoming turning points before they appear in price - Cycle Clarity: Removes noise to reveal underlying market rhythm - Precise Timing: Crossovers occur at specific cycle phases - Universal Application: Works across different markets and timeframes</p> <p>Market Cycle Modeling: - Markets naturally oscillate between overbought and oversold conditions - HT_SINE models this oscillation as a pure sine wave - The lead sine shows where the cycle is heading - Crossovers indicate cycle phase transitions</p>"},{"location":"indicators/cycle/ht_sine/#calculation-method","title":"Calculation Method","text":"<p>The Hilbert Transform is a sophisticated mathematical technique that extracts cycle information from price data:</p> <ol> <li>Apply Hilbert Transform to decompose price into amplitude and phase components</li> <li>Extract dominant cycle from the phase information</li> <li>Generate sine wave representing current cycle phase (oscillates between -1 and +1)</li> <li>Generate lead sine positioned 90 degrees ahead of sine wave</li> <li>Smooth outputs to reduce noise while preserving cycle timing</li> </ol> <p>Key Concept: Think of it like converting jagged price movements into smooth musical waves. The sine wave shows \"where you are\" in the song, while the lead sine shows \"what note is coming next.\"</p> <p>Mathematical Relationship: - Lead Sine = Sine advanced by 90 degrees (\u03c0/2 radians) - A 90-degree phase shift means the lead sine reaches its peaks/troughs one quarter-cycle before the regular sine - This advance warning is what makes crossover signals predictive</p>"},{"location":"indicators/cycle/ht_sine/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Both sine and lead sine oscillate between -1 and +1</li> <li>Type: Cycle-based oscillator, leading indicator</li> <li>Lag: Low - the lead sine component provides advance warning</li> <li>Best Used: Markets with clear cyclical behavior, range-bound or oscillating markets</li> <li>Signal Quality: Strongest at cycle extremes (values near \u00b11), weaker near zero-line</li> </ul>"},{"location":"indicators/cycle/ht_sine/#interpretation","title":"Interpretation","text":""},{"location":"indicators/cycle/ht_sine/#value-ranges","title":"Value Ranges","text":"<p>Both sine and lead sine oscillate in a defined range:</p> <p>Upper Half (0 to +1): - +0.7 to +1.0: Cycle approaching peak, market overbought zone   - Strong bullish phase   - Watch for bearish reversal signals   - Strongest when lead sine also near +1 - +0.3 to +0.7: Upper mid-cycle, bullish momentum   - Upward phase continues   - Safe to hold long positions   - Monitor for lead sine divergence - 0 to +0.3: Crossing into upper territory   - Early bullish phase   - Bullish crossover zone   - Consider new long positions</p> <p>Lower Half (-1 to 0): - -1.0 to -0.7: Cycle approaching trough, market oversold zone   - Strong bearish phase   - Watch for bullish reversal signals   - Strongest when lead sine also near -1 - -0.7 to -0.3: Lower mid-cycle, bearish momentum   - Downward phase continues   - Avoid long positions   - Monitor for lead sine divergence - -0.3 to 0: Crossing into lower territory   - Early bearish phase   - Bearish crossover zone   - Consider short positions or exits</p>"},{"location":"indicators/cycle/ht_sine/#sine-wave-patterns","title":"Sine Wave Patterns","text":"<p>Wave Synchronization: When sine and lead sine move together (small separation): - Market following expected cycle rhythm - Predictions reliable - Crossover signals likely to work</p> <p>Wave Divergence: When sine and lead sine spread apart: - Market cycle becoming distorted - Potential cycle break or regime change - Reduce position sizes, wait for re-synchronization</p> <p>Wave Amplitude: - Large swings (reaching \u00b10.9 to \u00b11.0): Strong cyclical behavior, high signal reliability - Small swings (staying within \u00b10.5): Weak cycle, choppy market, lower signal quality - Increasing amplitude: Cycle strengthening - Decreasing amplitude: Cycle weakening, possible trend emergence</p>"},{"location":"indicators/cycle/ht_sine/#crossover-interpretation","title":"Crossover Interpretation","text":"<p>Bullish Crossover (Sine crosses above Lead Sine): - Occurs in lower half of cycle (typically below zero) - Best when both near -1 (cycle trough) - Indicates cycle transitioning from down phase to up phase - Signal to enter long positions or exit shorts</p> <p>Bearish Crossover (Sine crosses below Lead Sine): - Occurs in upper half of cycle (typically above zero) - Best when both near +1 (cycle peak) - Indicates cycle transitioning from up phase to down phase - Signal to enter short positions or exit longs</p> <p>Signal Strength Factors: 1. Location: Crossovers at extremes (near \u00b11) are stronger 2. Amplitude: Larger wave swings produce more reliable signals 3. Clarity: Clean crossovers better than multiple touches 4. Confirmation: Multiple cycles showing same pattern</p>"},{"location":"indicators/cycle/ht_sine/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/cycle/ht_sine/#primary-crossover-strategy","title":"Primary Crossover Strategy","text":"<p>Entry Signals:</p> <pre><code>sine, lead_sine = SQA::TAI.ht_sine(prices)\n\n# Get current and previous values\ncurr_sine = sine.last\nprev_sine = sine[-2]\ncurr_lead = lead_sine.last\nprev_lead = lead_sine[-2]\n\n# Calculate cycle extreme strength\nextreme_value = [curr_sine.abs, curr_lead.abs].max\n\n# Bullish crossover\nif prev_sine &lt;= prev_lead &amp;&amp; curr_sine &gt; curr_lead\n  signal_strength = extreme_value &gt; 0.7 ? \"STRONG\" : \"MODERATE\"\n\n  puts \"LONG SIGNAL (#{signal_strength})\"\n  puts \"Sine crossed above Lead Sine\"\n  puts \"Sine: #{curr_sine.round(3)}, Lead: #{curr_lead.round(3)}\"\n  puts \"Enter long position\" if signal_strength == \"STRONG\"\nend\n\n# Bearish crossover\nif prev_sine &gt;= prev_lead &amp;&amp; curr_sine &lt; curr_lead\n  signal_strength = extreme_value &gt; 0.7 ? \"STRONG\" : \"MODERATE\"\n\n  puts \"SHORT SIGNAL (#{signal_strength})\"\n  puts \"Sine crossed below Lead Sine\"\n  puts \"Sine: #{curr_sine.round(3)}, Lead: #{curr_lead.round(3)}\"\n  puts \"Enter short position or exit longs\" if signal_strength == \"STRONG\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#cycle-extreme-entry-strategy","title":"Cycle Extreme Entry Strategy","text":"<p>Wait for Optimal Entry Points:</p> <pre><code>sine, lead_sine = SQA::TAI.ht_sine(prices)\n\ncurr_sine = sine.last\ncurr_lead = lead_sine.last\ncurr_price = prices.last\n\n# Define extreme zones\nEXTREME_THRESHOLD = 0.75\n\n# Oversold zone (cycle trough)\nif curr_sine &lt; -EXTREME_THRESHOLD &amp;&amp; curr_lead &lt; -EXTREME_THRESHOLD\n  if curr_sine &gt; curr_lead\n    puts \"STRONG BUY ZONE\"\n    puts \"Both sine waves in oversold territory\"\n    puts \"Sine starting to rise - cycle bottoming\"\n    puts \"High-probability long entry\"\n  else\n    puts \"OVERSOLD - WAITING\"\n    puts \"Monitor for sine to cross above lead sine\"\n  end\nend\n\n# Overbought zone (cycle peak)\nif curr_sine &gt; EXTREME_THRESHOLD &amp;&amp; curr_lead &gt; EXTREME_THRESHOLD\n  if curr_sine &lt; curr_lead\n    puts \"STRONG SELL ZONE\"\n    puts \"Both sine waves in overbought territory\"\n    puts \"Sine starting to fall - cycle peaking\"\n    puts \"High-probability short entry or long exit\"\n  else\n    puts \"OVERBOUGHT - WAITING\"\n    puts \"Monitor for sine to cross below lead sine\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#cycle-phase-trading-system","title":"Cycle Phase Trading System","text":"<p>Complete Entry/Exit Strategy:</p> <pre><code>require 'sqa/tai'\n\ndef analyze_sine_wave_position(prices, highs, lows)\n  # Calculate indicators\n  sine, lead_sine = SQA::TAI.ht_sine(prices)\n  atr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\n  curr_sine = sine.last\n  prev_sine = sine[-2]\n  curr_lead = lead_sine.last\n  prev_lead = lead_sine[-2]\n  curr_price = prices.last\n  curr_atr = atr.last\n\n  # Determine cycle phase\n  if curr_sine &gt; 0 &amp;&amp; curr_lead &gt; 0\n    phase = \"Upper half - Bullish\"\n  elsif curr_sine &lt; 0 &amp;&amp; curr_lead &lt; 0\n    phase = \"Lower half - Bearish\"\n  else\n    phase = \"Transition zone\"\n  end\n\n  puts \"=== Sine Wave Analysis ===\"\n  puts \"Sine: #{curr_sine.round(3)}\"\n  puts \"Lead Sine: #{curr_lead.round(3)}\"\n  puts \"Cycle Phase: #{phase}\"\n  puts\n\n  # Trading signals\n  extreme_level = [curr_sine.abs, curr_lead.abs].max\n\n  # Buy signal\n  if prev_sine &lt;= prev_lead &amp;&amp; curr_sine &gt; curr_lead &amp;&amp; curr_sine &lt; 0\n    puts \"&gt;&gt;&gt; BUY SIGNAL &lt;&lt;&lt;\"\n    puts \"Strength: #{extreme_level &gt; 0.7 ? 'STRONG' : 'MODERATE'}\"\n    puts \"Entry Price: #{curr_price.round(2)}\"\n    puts \"Stop Loss: #{(curr_price - 2 * curr_atr).round(2)}\"\n    puts \"Target 1: #{(curr_price + 2 * curr_atr).round(2)} (near zero line)\"\n    puts \"Target 2: #{(curr_price + 4 * curr_atr).round(2)} (cycle peak)\"\n    puts\n  # Sell signal\n  elsif prev_sine &gt;= prev_lead &amp;&amp; curr_sine &lt; curr_lead &amp;&amp; curr_sine &gt; 0\n    puts \"&gt;&gt;&gt; SELL SIGNAL &lt;&lt;&lt;\"\n    puts \"Strength: #{extreme_level &gt; 0.7 ? 'STRONG' : 'MODERATE'}\"\n    puts \"Entry Price: #{curr_price.round(2)}\"\n    puts \"Stop Loss: #{(curr_price + 2 * curr_atr).round(2)}\"\n    puts \"Target 1: #{(curr_price - 2 * curr_atr).round(2)} (near zero line)\"\n    puts \"Target 2: #{(curr_price - 4 * curr_atr).round(2)} (cycle trough)\"\n    puts\n  # Hold signals\n  elsif curr_sine &gt; curr_lead &amp;&amp; curr_sine &lt; 0.7\n    puts \"HOLD LONG - Cycle still rising\"\n  elsif curr_sine &lt; curr_lead &amp;&amp; curr_sine &gt; -0.7\n    puts \"HOLD SHORT - Cycle still falling\"\n  else\n    puts \"NO SIGNAL - Wait for crossover\"\n  end\n\n  # Warning signals\n  if extreme_level &lt; 0.3\n    puts \"WARNING: Weak cycle amplitude - reduce position size\"\n  end\n\n  if (curr_sine - curr_lead).abs &gt; 0.5\n    puts \"WARNING: Large wave separation - cycle may be breaking\"\n  end\nend\n\n# Usage\nanalyze_sine_wave_position(prices, highs, lows)\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#divergence-detection","title":"Divergence Detection","text":"<p>Advanced Signal Confirmation:</p> <pre><code># Calculate sine waves and price highs/lows\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\n# Find recent peaks\ndef find_peaks(array, window = 5)\n  peaks = []\n  (window...array.size - window).each do |i|\n    is_peak = true\n    (-window..window).each do |offset|\n      next if offset == 0\n      if array[i] &lt;= array[i + offset]\n        is_peak = false\n        break\n      end\n    end\n    peaks &lt;&lt; i if is_peak\n  end\n  peaks\nend\n\n# Bullish divergence\n# Price makes lower low, but sine makes higher low\nprice_lows = find_peaks(prices.map(&amp;:-@), 5)\nsine_lows = find_peaks(sine.map(&amp;:-@), 5)\n\nif price_lows.size &gt;= 2 &amp;&amp; sine_lows.size &gt;= 2\n  last_price_low = prices[price_lows[-1]]\n  prev_price_low = prices[price_lows[-2]]\n  last_sine_low = sine[sine_lows[-1]]\n  prev_sine_low = sine[sine_lows[-2]]\n\n  if last_price_low &lt; prev_price_low &amp;&amp; last_sine_low &gt; prev_sine_low\n    puts \"BULLISH DIVERGENCE DETECTED\"\n    puts \"Price making lower lows, sine wave making higher lows\"\n    puts \"Potential cycle reversal coming\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#best-practices","title":"Best Practices","text":""},{"location":"indicators/cycle/ht_sine/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When HT_SINE works best: - Range-bound markets: Clear oscillation between support and resistance - Cyclical markets: Forex pairs, commodities with seasonal patterns - Established cycles: Markets showing consistent rhythm - Medium-term trading: Daily to weekly charts work best - High liquidity: Major markets with smooth price action</p> <p>Less effective in: - Strong trending markets: Sine waves become distorted - Low volatility: Amplitude shrinks, signals become unclear - Very short timeframes: Too much noise (&lt; 15-minute charts) - Break-out scenarios: Cycle-based approach fails during regime changes - News-driven spikes: Disrupts cyclical patterns</p>"},{"location":"indicators/cycle/ht_sine/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With HT_DCPERIOD (Cycle Period): <pre><code># Validate cycle quality before trading sine signals\ncycle_period = SQA::TAI.ht_dcperiod(prices)\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\ncurr_cycle = cycle_period.last\ncurr_sine = sine.last\ncurr_lead = lead_sine.last\n\n# Only trade if cycle is in reasonable range\nif curr_cycle.between?(12, 35)\n  # Proceed with sine wave signals\n  if sine[-2] &lt;= lead_sine[-2] &amp;&amp; curr_sine &gt; curr_lead\n    puts \"Valid BUY signal - cycle period: #{curr_cycle.round}\"\n  end\nelse\n  puts \"Cycle period outside normal range - avoid sine wave signals\"\nend\n</code></pre></p> <p>With HT_TRENDMODE (Trend Detection): <pre><code># Only use sine wave signals in cycle mode\ntrend_mode = SQA::TAI.ht_trendmode(prices)\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\nif trend_mode.last == 0 # Cycle mode\n  # Use sine wave crossover signals\n  if sine.last &gt; lead_sine.last\n    puts \"LONG - Confirmed cycle mode\"\n  end\nelsif trend_mode.last == 1 # Trend mode\n  # Use trend-following indicators instead\n  puts \"Trend mode detected - sine wave signals not recommended\"\nend\n</code></pre></p> <p>With HT_DCPHASE (Cycle Phase): <pre><code># Confirm cycle position with phase indicator\nphase = SQA::TAI.ht_dcphase(prices)\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\ncurr_phase = phase.last\ncurr_sine = sine.last\n\n# Phase near 0 or 360 should align with sine near -1\n# Phase near 180 should align with sine near +1\nif curr_phase &lt; 45 || curr_phase &gt; 315\n  puts \"Phase indicates cycle trough\"\n  puts \"Sine should be near -1: #{curr_sine.round(3)}\"\n  if curr_sine &lt; -0.7\n    puts \"Phase and sine aligned - strong signal quality\"\n  end\nend\n</code></pre></p> <p>With Traditional Oscillators: <pre><code># Confirm with RSI for additional conviction\nrsi = SQA::TAI.rsi(prices, period: 14)\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\n# Buy when both oversold\nif sine.last &lt; -0.7 &amp;&amp; sine.last &gt; lead_sine.last &amp;&amp; rsi.last &lt; 30\n  puts \"STRONG BUY: Both HT_SINE and RSI oversold + bullish crossover\"\nend\n\n# Sell when both overbought\nif sine.last &gt; 0.7 &amp;&amp; sine.last &lt; lead_sine.last &amp;&amp; rsi.last &gt; 70\n  puts \"STRONG SELL: Both HT_SINE and RSI overbought + bearish crossover\"\nend\n</code></pre></p> <p>With Support/Resistance: <pre><code># Sine wave signals at key price levels are stronger\nsine, lead_sine = SQA::TAI.ht_sine(prices)\ncurr_price = prices.last\n\nsupport_level = 100.0 # Your support level\nresistance_level = 120.0 # Your resistance level\n\n# Buy signal near support\nif sine.last &gt; lead_sine.last &amp;&amp; curr_price &lt;= support_level * 1.02\n  puts \"HIGH PROBABILITY BUY: Sine bullish crossover + near support\"\nend\n\n# Sell signal near resistance\nif sine.last &lt; lead_sine.last &amp;&amp; curr_price &gt;= resistance_level * 0.98\n  puts \"HIGH PROBABILITY SELL: Sine bearish crossover + near resistance\"\nend\n</code></pre></p>"},{"location":"indicators/cycle/ht_sine/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Insufficient Data</li> <li>Need minimum 32-63 bars for reliable results</li> <li>Initial values will be unstable and unreliable</li> <li>Always skip first 30-40 values when backtesting</li> <li> <p>Verify data quality before trading live</p> </li> <li> <p>Trading in Trend Mode</p> </li> <li>Sine waves become distorted during strong trends</li> <li>Crossovers produce false signals</li> <li>Use HT_TRENDMODE to filter out trending periods</li> <li> <p>Switch to trend-following indicators when trend detected</p> </li> <li> <p>Ignoring Signal Strength</p> </li> <li>Not all crossovers are equal</li> <li>Crossovers at extremes (near \u00b11) are much stronger</li> <li>Crossovers near zero line are often false signals</li> <li> <p>Always check amplitude and extreme levels</p> </li> <li> <p>Over-Trading Weak Cycles</p> </li> <li>Small wave amplitude indicates weak cycle</li> <li>Multiple small crossovers produce whipsaws</li> <li>Wait for amplitude to increase before trading</li> <li> <p>Use amplitude threshold: trade only if |sine| or |lead| &gt; 0.6</p> </li> <li> <p>Neglecting Market Context</p> </li> <li>Sine waves don't predict fundamental shocks</li> <li>News events can break cycle patterns</li> <li>Economic releases can override technical signals</li> <li> <p>Always use risk management regardless of signal strength</p> </li> <li> <p>Ignoring Wave Synchronization</p> </li> <li>Large separation between sine and lead sine = trouble</li> <li>Indicates cycle breaking down or regime change</li> <li>Reduce position sizes when separation &gt; 0.5</li> <li>Wait for waves to re-synchronize</li> </ol>"},{"location":"indicators/cycle/ht_sine/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Since HT_SINE has no adjustable parameters, focus on optimal timeframe selection:</p> <p>For Intraday Trading: - Use 15-minute to 1-hour charts minimum - Expect 3-6 crossover signals per day - Set tight stops (1-2 ATR) - Take profits quickly at opposite extreme - Higher false signal rate - use confirmation</p> <p>For Swing Trading: - Use daily charts (optimal timeframe) - Expect 2-4 crossover signals per month - Set moderate stops (2-3 ATR) - Hold through half-cycle to full-cycle - Best risk/reward ratio</p> <p>For Position Trading: - Use weekly charts - Expect 1-2 crossover signals per quarter - Set wider stops (3-4 ATR) - Hold for multiple weeks - Very reliable signals but fewer opportunities</p>"},{"location":"indicators/cycle/ht_sine/#practical-example","title":"Practical Example","text":"<p>Complete trading system with entry, exit, and risk management:</p> <pre><code>require 'sqa/tai'\n\nclass SineWaveTrader\n  EXTREME_THRESHOLD = 0.70  # Minimum for strong signals\n  WEAK_AMPLITUDE = 0.30     # Below this, avoid trading\n  MAX_SEPARATION = 0.50     # Max distance between sine waves\n\n  def initialize(prices, highs, lows)\n    @prices = prices\n    @highs = highs\n    @lows = lows\n\n    # Calculate indicators\n    @sine, @lead_sine = SQA::TAI.ht_sine(@prices)\n    @cycle_period = SQA::TAI.ht_dcperiod(@prices)\n    @trend_mode = SQA::TAI.ht_trendmode(@prices)\n    @atr = SQA::TAI.atr(@highs, @lows, @prices, period: 14)\n    @rsi = SQA::TAI.rsi(@prices, period: 14)\n  end\n\n  def analyze\n    return \"Insufficient data\" if @sine.size &lt; 2\n\n    # Current and previous values\n    curr_sine = @sine.last\n    prev_sine = @sine[-2]\n    curr_lead = @lead_sine.last\n    prev_lead = @lead_sine[-2]\n    curr_price = @prices.last\n    curr_atr = @atr.last\n    curr_trend_mode = @trend_mode.last\n    curr_rsi = @rsi.last\n\n    # Calculate metrics\n    extreme_level = [curr_sine.abs, curr_lead.abs].max\n    wave_separation = (curr_sine - curr_lead).abs\n    amplitude_strength = extreme_level &gt; EXTREME_THRESHOLD ? \"Strong\" : \"Weak\"\n\n    puts &lt;&lt;~ANALYSIS\n      ==========================================\n      SINE WAVE TRADING ANALYSIS\n      ==========================================\n      Price: #{curr_price.round(2)}\n      ATR: #{curr_atr.round(2)}\n\n      Sine Wave Values:\n      - Sine: #{curr_sine.round(3)}\n      - Lead Sine: #{curr_lead.round(3)}\n      - Separation: #{wave_separation.round(3)}\n\n      Cycle Metrics:\n      - Extreme Level: #{extreme_level.round(3)} (#{amplitude_strength})\n      - Cycle Period: #{@cycle_period.last.round(1)} bars\n      - Trend Mode: #{curr_trend_mode == 1 ? 'TREND' : 'CYCLE'}\n      - RSI: #{curr_rsi.round(1)}\n    ANALYSIS\n\n    # Pre-flight checks\n    if curr_trend_mode == 1\n      puts \"\\nWARNING: Trend mode detected - sine signals unreliable\"\n      return \"No trade - trending market\"\n    end\n\n    if extreme_level &lt; WEAK_AMPLITUDE\n      puts \"\\nWARNING: Weak cycle amplitude - poor signal quality\"\n      return \"No trade - weak cycle\"\n    end\n\n    if wave_separation &gt; MAX_SEPARATION\n      puts \"\\nWARNING: Large wave separation - cycle breaking down\"\n      return \"No trade - unstable cycle\"\n    end\n\n    # Signal detection\n    bullish_cross = prev_sine &lt;= prev_lead &amp;&amp; curr_sine &gt; curr_lead\n    bearish_cross = prev_sine &gt;= prev_lead &amp;&amp; curr_sine &lt; curr_lead\n\n    if bullish_cross\n      puts \"\\n#{extreme_level &gt; EXTREME_THRESHOLD ? '&gt;&gt;&gt; STRONG BUY SIGNAL &lt;&lt;&lt;' : '&gt;&gt; BUY SIGNAL &lt;&lt;'}\"\n      generate_buy_signal(curr_price, curr_atr, curr_sine, curr_rsi, extreme_level)\n    elsif bearish_cross\n      puts \"\\n#{extreme_level &gt; EXTREME_THRESHOLD ? '&gt;&gt;&gt; STRONG SELL SIGNAL &lt;&lt;&lt;' : '&gt;&gt; SELL SIGNAL &lt;&lt;'}\"\n      generate_sell_signal(curr_price, curr_atr, curr_sine, curr_rsi, extreme_level)\n    elsif curr_sine &gt; curr_lead &amp;&amp; curr_sine &lt; 0.8\n      puts \"\\nPOSITION: Hold Long - Cycle still rising\"\n      puts \"Exit Target: Sine reaches +#{EXTREME_THRESHOLD.round(2)} or bearish crossover\"\n    elsif curr_sine &lt; curr_lead &amp;&amp; curr_sine &gt; -0.8\n      puts \"\\nPOSITION: Hold Short - Cycle still falling\"\n      puts \"Exit Target: Sine reaches -#{EXTREME_THRESHOLD.round(2)} or bullish crossover\"\n    else\n      puts \"\\nNO SIGNAL - Waiting for crossover\"\n      puts \"Current Phase: #{get_cycle_phase(curr_sine)}\"\n    end\n  end\n\n  private\n\n  def generate_buy_signal(price, atr, sine, rsi, extreme)\n    stop_loss = price - (2 * atr)\n    target_1 = price + (2 * atr)\n    target_2 = price + (4 * atr)\n    risk = price - stop_loss\n    reward_1 = target_1 - price\n    reward_2 = target_2 - price\n\n    puts &lt;&lt;~SIGNAL\n\n      Entry: #{price.round(2)}\n      Stop Loss: #{stop_loss.round(2)} (-#{((risk / price) * 100).round(2)}%)\n\n      Target 1: #{target_1.round(2)} (R:R 1:#{(reward_1 / risk).round(1)})\n      Target 2: #{target_2.round(2)} (R:R 1:#{(reward_2 / risk).round(1)})\n\n      Signal Quality:\n      - Extreme Level: #{extreme.round(3)} #{extreme &gt; EXTREME_THRESHOLD ? '(STRONG)' : '(Moderate)'}\n      - RSI Confirmation: #{rsi &lt; 40 ? 'YES - Oversold' : 'NO - Not oversold'}\n      - Cycle Phase: #{get_cycle_phase(sine)}\n\n      Expected Duration: #{(@cycle_period.last / 2).round} bars to peak\n\n      Trade Plan:\n      1. Enter long position at market\n      2. Place stop at #{stop_loss.round(2)}\n      3. Take 50% profit at Target 1\n      4. Move stop to breakeven\n      5. Take remaining 50% at Target 2 or bearish crossover\n    SIGNAL\n  end\n\n  def generate_sell_signal(price, atr, sine, rsi, extreme)\n    stop_loss = price + (2 * atr)\n    target_1 = price - (2 * atr)\n    target_2 = price - (4 * atr)\n    risk = stop_loss - price\n    reward_1 = price - target_1\n    reward_2 = price - target_2\n\n    puts &lt;&lt;~SIGNAL\n\n      Entry: #{price.round(2)}\n      Stop Loss: #{stop_loss.round(2)} (+#{((risk / price) * 100).round(2)}%)\n\n      Target 1: #{target_1.round(2)} (R:R 1:#{(reward_1 / risk).round(1)})\n      Target 2: #{target_2.round(2)} (R:R 1:#{(reward_2 / risk).round(1)})\n\n      Signal Quality:\n      - Extreme Level: #{extreme.round(3)} #{extreme &gt; EXTREME_THRESHOLD ? '(STRONG)' : '(Moderate)'}\n      - RSI Confirmation: #{rsi &gt; 60 ? 'YES - Overbought' : 'NO - Not overbought'}\n      - Cycle Phase: #{get_cycle_phase(sine)}\n\n      Expected Duration: #{(@cycle_period.last / 2).round} bars to trough\n\n      Trade Plan:\n      1. Enter short position at market (or exit longs)\n      2. Place stop at #{stop_loss.round(2)}\n      3. Take 50% profit at Target 1\n      4. Move stop to breakeven\n      5. Take remaining 50% at Target 2 or bullish crossover\n    SIGNAL\n  end\n\n  def get_cycle_phase(sine_value)\n    case sine_value\n    when 0.7..1.0 then \"Peak (Overbought)\"\n    when 0.3..0.7 then \"Rising (Bullish)\"\n    when -0.3..0.3 then \"Midpoint (Neutral)\"\n    when -0.7..-0.3 then \"Falling (Bearish)\"\n    when -1.0..-0.7 then \"Trough (Oversold)\"\n    end\n  end\nend\n\n# Usage Example\nprices = [\n  # Your price data - need at least 63 bars\n]\nhighs = [...]\nlows = [...]\n\ntrader = SineWaveTrader.new(prices, highs, lows)\ntrader.analyze\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/cycle/ht_sine/#hilbert-transform-family","title":"Hilbert Transform Family","text":"<ul> <li>HT_DCPERIOD: Identifies the length of the dominant cycle (use to validate sine wave reliability)</li> <li>HT_DCPHASE: Shows current position within the cycle (0-360 degrees) - confirms sine wave position</li> <li>HT_PHASOR: Provides in-phase and quadrature components for advanced cycle analysis</li> <li>HT_TRENDMODE: Critical for filtering - only use sine signals in cycle mode (0), not trend mode (1)</li> <li>HT_TRENDLINE: Provides instantaneous trendline based on Hilbert Transform</li> </ul>"},{"location":"indicators/cycle/ht_sine/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI: Confirm sine wave signals with RSI oversold/overbought levels</li> <li>STOCH: Another oscillator for signal confirmation</li> <li>ATR: Essential for setting stops and targets based on volatility</li> <li>MACD: Can confirm trend direction when sine waves disagree</li> </ul>"},{"location":"indicators/cycle/ht_sine/#alternative-cycleoscillator-indicators","title":"Alternative Cycle/Oscillator Indicators","text":"<ul> <li>CCI: Commodity Channel Index - another cycle-based oscillator</li> <li>CMO: Chande Momentum Oscillator - momentum-based alternative</li> <li>MAMA: MESA Adaptive Moving Average - uses similar adaptive technology</li> </ul>"},{"location":"indicators/cycle/ht_sine/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/cycle/ht_sine/#multi-timeframe-sine-wave-analysis","title":"Multi-Timeframe Sine Wave Analysis","text":"<pre><code># Compare sine waves across timeframes for nested cycle analysis\ndaily_prices = [...] # daily data\nhourly_prices = [...] # hourly data\n\n# Higher timeframe (daily) - primary trend\ndaily_sine, daily_lead = SQA::TAI.ht_sine(daily_prices)\n\n# Lower timeframe (hourly) - entry timing\nhourly_sine, hourly_lead = SQA::TAI.ht_sine(hourly_prices)\n\n# Trade in direction of daily, time entries with hourly\nif daily_sine.last &gt; daily_lead.last\n  puts \"Daily cycle: BULLISH - look for long entries only\"\n\n  if hourly_sine.last &gt; hourly_lead.last &amp;&amp; hourly_sine.last &lt; -0.5\n    puts \"Hourly cycle: OVERSOLD + bullish crossover\"\n    puts \"HIGH PROBABILITY LONG ENTRY\"\n  end\nelsif daily_sine.last &lt; daily_lead.last\n  puts \"Daily cycle: BEARISH - look for short entries only\"\n\n  if hourly_sine.last &lt; hourly_lead.last &amp;&amp; hourly_sine.last &gt; 0.5\n    puts \"Hourly cycle: OVERBOUGHT + bearish crossover\"\n    puts \"HIGH PROBABILITY SHORT ENTRY\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#sine-wave-prediction","title":"Sine Wave Prediction","text":"<p>Project Future Sine Values:</p> <pre><code># Current cycle period\ncycle_period = SQA::TAI.ht_dcperiod(prices).last\nsine, lead_sine = SQA::TAI.ht_sine(prices)\n\ncurr_sine = sine.last\ncurr_lead = lead_sine.last\n\n# Estimate bars until next extreme\n# Sine wave completes full cycle in cycle_period bars\n# From current position, estimate distance to peak/trough\n\nif curr_sine &gt; 0 &amp;&amp; curr_sine &lt; curr_lead\n  # Rising toward peak\n  bars_to_peak = (cycle_period * 0.25).round # Quarter cycle\n  puts \"Expected peak in approximately #{bars_to_peak} bars\"\n  puts \"Current sine: #{curr_sine.round(3)}\"\n\nelsif curr_sine &gt; 0 &amp;&amp; curr_sine &gt; curr_lead\n  # Falling from peak\n  bars_to_trough = (cycle_period * 0.25).round\n  puts \"Expected trough in approximately #{bars_to_trough} bars\"\n\nelsif curr_sine &lt; 0 &amp;&amp; curr_sine &gt; curr_lead\n  # Rising from trough\n  bars_to_peak = (cycle_period * 0.25).round\n  puts \"Expected peak in approximately #{bars_to_peak} bars\"\n\nelsif curr_sine &lt; 0 &amp;&amp; curr_sine &lt; curr_lead\n  # Falling toward trough\n  bars_to_trough = (cycle_period * 0.25).round\n  puts \"Expected trough in approximately #{bars_to_trough} bars\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#cycle-strength-measurement","title":"Cycle Strength Measurement","text":"<p>Quantify Signal Quality:</p> <pre><code>def measure_cycle_strength(sine, lead_sine, window = 20)\n  # Recent amplitude\n  recent_sine = sine.last(window)\n  recent_lead = lead_sine.last(window)\n\n  # Calculate average amplitude\n  sine_amplitude = recent_sine.map(&amp;:abs).sum / window.to_f\n  lead_amplitude = recent_lead.map(&amp;:abs).sum / window.to_f\n  avg_amplitude = (sine_amplitude + lead_amplitude) / 2.0\n\n  # Calculate wave synchronization\n  separations = recent_sine.zip(recent_lead).map { |s, l| (s - l).abs }\n  avg_separation = separations.sum / window.to_f\n\n  # Count crossovers\n  crossovers = 0\n  (1...recent_sine.size).each do |i|\n    if (recent_sine[i-1] &lt;= recent_lead[i-1] &amp;&amp; recent_sine[i] &gt; recent_lead[i]) ||\n       (recent_sine[i-1] &gt;= recent_lead[i-1] &amp;&amp; recent_sine[i] &lt; recent_lead[i])\n      crossovers += 1\n    end\n  end\n\n  puts \"Cycle Strength Analysis (last #{window} bars):\"\n  puts \"- Average Amplitude: #{avg_amplitude.round(3)}\"\n  puts \"- Wave Separation: #{avg_separation.round(3)}\"\n  puts \"- Crossovers: #{crossovers}\"\n\n  # Quality assessment\n  if avg_amplitude &gt; 0.6 &amp;&amp; avg_separation &lt; 0.3 &amp;&amp; crossovers &gt;= 2\n    puts \"Quality: EXCELLENT - Strong reliable signals\"\n  elsif avg_amplitude &gt; 0.4 &amp;&amp; avg_separation &lt; 0.4 &amp;&amp; crossovers &gt;= 1\n    puts \"Quality: GOOD - Acceptable signal quality\"\n  elsif avg_amplitude &gt; 0.3\n    puts \"Quality: MODERATE - Use with caution\"\n  else\n    puts \"Quality: POOR - Avoid trading sine signals\"\n  end\nend\n\n# Usage\nsine, lead_sine = SQA::TAI.ht_sine(prices)\nmeasure_cycle_strength(sine, lead_sine)\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#backtesting-framework","title":"Backtesting Framework","text":"<p>Test Sine Wave Strategy:</p> <pre><code>def backtest_sine_strategy(prices, highs, lows)\n  sine, lead_sine = SQA::TAI.ht_sine(prices)\n  atr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\n  trades = []\n  position = nil\n\n  # Start after warm-up period\n  (50...prices.size).each do |i|\n    curr_sine = sine[i]\n    prev_sine = sine[i-1]\n    curr_lead = lead_sine[i]\n    prev_lead = lead_sine[i-1]\n    curr_price = prices[i]\n    curr_atr = atr[i]\n\n    extreme_level = [curr_sine.abs, curr_lead.abs].max\n\n    # Entry logic\n    if position.nil?\n      # Bullish crossover\n      if prev_sine &lt;= prev_lead &amp;&amp; curr_sine &gt; curr_lead &amp;&amp; extreme_level &gt; 0.7\n        position = {\n          type: 'long',\n          entry_price: curr_price,\n          entry_bar: i,\n          stop_loss: curr_price - (2 * curr_atr),\n          target: curr_price + (4 * curr_atr)\n        }\n      # Bearish crossover\n      elsif prev_sine &gt;= prev_lead &amp;&amp; curr_sine &lt; curr_lead &amp;&amp; extreme_level &gt; 0.7\n        position = {\n          type: 'short',\n          entry_price: curr_price,\n          entry_bar: i,\n          stop_loss: curr_price + (2 * curr_atr),\n          target: curr_price - (4 * curr_atr)\n        }\n      end\n    else\n      # Exit logic\n      hit_stop = false\n      hit_target = false\n      opposite_cross = false\n\n      if position[:type] == 'long'\n        hit_stop = lows[i] &lt;= position[:stop_loss]\n        hit_target = highs[i] &gt;= position[:target]\n        opposite_cross = prev_sine &gt;= prev_lead &amp;&amp; curr_sine &lt; curr_lead\n      else # short\n        hit_stop = highs[i] &gt;= position[:stop_loss]\n        hit_target = lows[i] &lt;= position[:target]\n        opposite_cross = prev_sine &lt;= prev_lead &amp;&amp; curr_sine &gt; curr_lead\n      end\n\n      if hit_stop || hit_target || opposite_cross\n        exit_price = if hit_stop\n          position[:stop_loss]\n        elsif hit_target\n          position[:target]\n        else\n          curr_price\n        end\n\n        pnl = position[:type] == 'long' ?\n          exit_price - position[:entry_price] :\n          position[:entry_price] - exit_price\n\n        trades &lt;&lt; {\n          type: position[:type],\n          entry: position[:entry_price],\n          exit: exit_price,\n          pnl: pnl,\n          pnl_pct: (pnl / position[:entry_price]) * 100,\n          bars_held: i - position[:entry_bar],\n          exit_reason: hit_stop ? 'stop' : (hit_target ? 'target' : 'crossover')\n        }\n\n        position = nil\n      end\n    end\n  end\n\n  # Calculate statistics\n  return \"No trades\" if trades.empty?\n\n  total_trades = trades.size\n  winning_trades = trades.select { |t| t[:pnl] &gt; 0 }\n  losing_trades = trades.select { |t| t[:pnl] &lt;= 0 }\n\n  win_rate = (winning_trades.size.to_f / total_trades * 100).round(2)\n  avg_win = winning_trades.empty? ? 0 : winning_trades.sum { |t| t[:pnl_pct] } / winning_trades.size\n  avg_loss = losing_trades.empty? ? 0 : losing_trades.sum { |t| t[:pnl_pct] } / losing_trades.size\n  avg_bars = trades.sum { |t| t[:bars_held] }.to_f / total_trades\n\n  puts &lt;&lt;~RESULTS\n    ==========================================\n    BACKTEST RESULTS\n    ==========================================\n    Total Trades: #{total_trades}\n    Winning Trades: #{winning_trades.size}\n    Losing Trades: #{losing_trades.size}\n    Win Rate: #{win_rate}%\n\n    Average Win: #{avg_win.round(2)}%\n    Average Loss: #{avg_loss.round(2)}%\n    Average Bars Held: #{avg_bars.round(1)}\n\n    Exit Reasons:\n    - Stop Loss: #{trades.count { |t| t[:exit_reason] == 'stop' }}\n    - Target: #{trades.count { |t| t[:exit_reason] == 'target' }}\n    - Crossover: #{trades.count { |t| t[:exit_reason] == 'crossover' }}\n  RESULTS\n\n  trades\nend\n\n# Run backtest\ntrades = backtest_sine_strategy(prices, highs, lows)\n</code></pre>"},{"location":"indicators/cycle/ht_sine/#references","title":"References","text":"<ul> <li>\"Rocket Science for Traders\" by John F. Ehlers - Comprehensive coverage of Hilbert Transform and sine wave generation</li> <li>\"Cybernetic Analysis for Stocks and Futures\" by John F. Ehlers - Advanced cycle-based trading techniques</li> <li>\"Cycle Analytics for Traders\" by John F. Ehlers - Deep dive into cycle detection and trading</li> <li>Original Research: John F. Ehlers developed the Hilbert Transform approach for financial markets</li> <li>TA-Lib Documentation: HT_SINE Function</li> </ul>"},{"location":"indicators/cycle/ht_sine/#see-also","title":"See Also","text":"<ul> <li>Cycle Indicators Overview</li> <li>Hilbert Transform Indicators Family</li> </ul> <ul> <li>Using HT_SINE with HT_TRENDMODE</li> </ul> <ul> <li>Adaptive Trading Strategies</li> <li>API Reference</li> </ul>"},{"location":"indicators/cycle/ht_trendmode/","title":"HT_TRENDMODE (Hilbert Transform - Trend vs Cycle Mode)","text":""},{"location":"indicators/cycle/ht_trendmode/#overview","title":"Overview","text":"<p>The Hilbert Transform - Trend vs Cycle Mode (HT_TRENDMODE) is a critical market regime detection indicator that determines whether the market is currently in a trending state or a cycling (oscillating) state. This binary indicator returns a value of 1 for trend mode and 0 for cycle mode, providing traders with essential information for strategy selection. By identifying the market's current regime, traders can avoid using oscillators during trending markets and trend-following strategies during ranging markets, significantly improving trading performance.</p>"},{"location":"indicators/cycle/ht_trendmode/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>prices</code> Array Required Array of price values (typically close prices)"},{"location":"indicators/cycle/ht_trendmode/#parameter-details","title":"Parameter Details","text":"<p>prices - Input data should be an array of closing prices - Minimum 32 data points required for reliable results (due to Hilbert Transform calculation requirements) - More data provides better accuracy in regime identification - Works best with at least 63+ data points for stable output - The indicator analyzes the frequency content of price movements to determine regime</p>"},{"location":"indicators/cycle/ht_trendmode/#usage","title":"Usage","text":""},{"location":"indicators/cycle/ht_trendmode/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Calculate trend vs cycle mode\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 45.61,\n          46.50, 47.20, 46.80, 47.50, 48.10, 48.30,\n          # ... more data points ...\n         ]\n\nmode = SQA::TAI.ht_trendmode(prices)\n\n# Check current market regime\ncurrent_mode = mode.last\nif current_mode == 1\n  puts \"Market is in TREND MODE - use trend-following strategies\"\nelse\n  puts \"Market is in CYCLE MODE - use mean-reversion strategies\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#practical-application","title":"Practical Application","text":"<pre><code># Adapt your strategy based on market mode\nmode = SQA::TAI.ht_trendmode(prices)\ncurrent_mode = mode.last\n\nif current_mode == 1\n  # TREND MODE: Use trend-following indicators\n  puts \"Using trend-following approach\"\n\n  # Use moving average crossovers\n  fast_ma = SQA::TAI.ema(prices, period: 12)\n  slow_ma = SQA::TAI.ema(prices, period: 26)\n\n  # Use ADX for trend strength\n  adx = SQA::TAI.adx(highs, lows, prices, period: 14)\n\n  # Ignore oscillator signals\n  puts \"Ignoring RSI/Stochastic oscillations\"\n\nelse\n  # CYCLE MODE: Use mean-reversion indicators\n  puts \"Using mean-reversion approach\"\n\n  # Use oscillators for entry/exit\n  rsi = SQA::TAI.rsi(prices, period: 14)\n  stoch_k, stoch_d = SQA::TAI.stoch(highs, lows, prices)\n\n  # Trade range boundaries\n  bb_upper, bb_middle, bb_lower = SQA::TAI.bbands(prices, period: 20)\n\n  puts \"Trading oversold/overbought conditions\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/cycle/ht_trendmode/#what-it-measures","title":"What It Measures","text":"<p>HT_TRENDMODE measures the market regime - specifically whether price action exhibits trending characteristics or cyclical (oscillating) characteristics. The indicator uses Hilbert Transform mathematics to analyze the dominant frequency components in price movements:</p> <ul> <li>Trend Mode (1): Price movements are dominated by directional momentum with minimal cyclical oscillation</li> <li>Cycle Mode (0): Price movements are dominated by oscillations around a mean with no sustained direction</li> </ul> <p>The indicator answers the fundamental question: \"Should I be trend-following or mean-reverting right now?\"</p>"},{"location":"indicators/cycle/ht_trendmode/#why-its-important","title":"Why It's Important","text":"<p>Using the wrong strategy for the current market regime is a primary cause of trading losses:</p> <p>In Trending Markets: - Oscillators generate false signals (constantly showing \"overbought\" or \"oversold\") - Mean-reversion strategies result in catching falling knives or fighting trends - The market can remain \"overbought\" or \"oversold\" for extended periods - Trend-following strategies perform best</p> <p>In Cycling Markets: - Trend-following strategies generate whipsaws and false breakouts - Moving average crossovers produce excessive and unprofitable signals - Range-bound behavior creates ideal conditions for mean-reversion - Oscillators provide reliable entry and exit signals</p> <p>HT_TRENDMODE helps you automatically select the appropriate strategy for current conditions, eliminating the guesswork and emotional decision-making that leads to poor strategy selection.</p>"},{"location":"indicators/cycle/ht_trendmode/#calculation-method","title":"Calculation Method","text":"<p>The Hilbert Transform uses sophisticated digital signal processing to decompose price data:</p> <ol> <li>Apply Hilbert Transform to create a complex analytical signal from the price series</li> <li>Analyze the instantaneous frequency of the dominant price cycle</li> <li>Evaluate cycle consistency - how regular and persistent the cycles are</li> <li>Generate binary classification:</li> <li>If price shows sustained directional movement with weak cycles \u2192 Mode = 1 (Trend)</li> <li>If price shows strong, regular oscillations without sustained direction \u2192 Mode = 0 (Cycle)</li> <li>Apply smoothing logic to prevent excessive mode switching</li> </ol> <p>Key Concept: Think of it like audio signal analysis - the indicator distinguishes between a sustained note (trend) and rapid oscillations (cycle). Just as music has both sustained tones and quick vibrations, markets alternate between trending and cycling regimes.</p>"},{"location":"indicators/cycle/ht_trendmode/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Binary output (0 or 1 only)</li> <li>Type: Market regime detection, classification indicator</li> <li>Lag: Moderate - requires some confirmation before switching modes</li> <li>Best Used: As a filter for strategy selection across all timeframes</li> <li>Updates: Mode can change as market conditions evolve</li> </ul>"},{"location":"indicators/cycle/ht_trendmode/#interpretation","title":"Interpretation","text":""},{"location":"indicators/cycle/ht_trendmode/#value-meanings","title":"Value Meanings","text":"<p>Mode = 1 (Trend Mode)</p> <p>Market characteristics: - Sustained directional price movement - Weak or irregular cyclical components - Price can move far from mean without reverting - High probability of trend continuation - Momentum and directional indicators work well - Oscillators give false signals</p> <p>What to do: - Use trend-following strategies - Employ moving averages, MACD, ADX - Trade breakouts and momentum - Avoid counter-trend trades - Ignore \"overbought\" or \"oversold\" oscillator readings - Let profits run, use trailing stops</p> <p>Mode = 0 (Cycle Mode)</p> <p>Market characteristics: - Price oscillates around a central value - Regular, repeating cycle patterns - Price tends to revert to mean - Breakouts often fail - Range-bound behavior dominates - Oscillators accurately identify turning points</p> <p>What to do: - Use mean-reversion strategies - Employ RSI, Stochastic, Bollinger Bands - Trade range boundaries - Take profits at resistance, buy at support - Avoid trend-following indicators - Use tighter profit targets, faster exits</p>"},{"location":"indicators/cycle/ht_trendmode/#mode-transitions","title":"Mode Transitions","text":"<p>Transition from Cycle (0) to Trend (1): - Market is breaking out of range - Initiate or add to trend-following positions - Close mean-reversion positions - Expect sustained directional move - Raise stop losses to protect capital</p> <p>Transition from Trend (1) to Cycle (0): - Trend is exhausting, range forming - Take profits on trend-following positions - Prepare for mean-reversion opportunities - Expect price to oscillate in range - Tighten stops, reduce position sizes</p>"},{"location":"indicators/cycle/ht_trendmode/#mode-persistence","title":"Mode Persistence","text":"<p>Stable Mode (few changes): - Market in consistent regime - Strategy selection reliable - Can commit to single approach</p> <p>Frequent Mode Changes: - Market in transition or low signal quality - Use caution with any strategy - Reduce position sizes - Wait for mode stability before aggressive trading</p>"},{"location":"indicators/cycle/ht_trendmode/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/cycle/ht_trendmode/#strategy-selection-system","title":"Strategy Selection System","text":"<p>Primary Use Case: Automatic strategy switching</p> <pre><code># Get current market mode\nmode = SQA::TAI.ht_trendmode(prices)\ncurrent_mode = mode.last\n\n# Initialize strategy variables\nstrategy = nil\nindicators_to_use = []\n\nif current_mode == 1\n  # TREND MODE STRATEGY\n  strategy = :trend_following\n\n  # Calculate trend indicators\n  ema_fast = SQA::TAI.ema(prices, period: 12)\n  ema_slow = SQA::TAI.ema(prices, period: 26)\n  adx = SQA::TAI.adx(highs, lows, prices, period: 14)\n\n  # Entry signal: MA crossover + strong ADX\n  if ema_fast.last &gt; ema_slow.last &amp;&amp; adx.last &gt; 25\n    if ema_fast[-2] &lt;= ema_slow[-2]  # Crossover just occurred\n      puts \"TREND MODE - BUY SIGNAL (Bullish Crossover)\"\n      puts \"ADX: #{adx.last.round(2)} (Strong trend)\"\n    end\n  elsif ema_fast.last &lt; ema_slow.last &amp;&amp; adx.last &gt; 25\n    if ema_fast[-2] &gt;= ema_slow[-2]  # Crossover just occurred\n      puts \"TREND MODE - SELL SIGNAL (Bearish Crossover)\"\n      puts \"ADX: #{adx.last.round(2)} (Strong trend)\"\n    end\n  end\n\nelse\n  # CYCLE MODE STRATEGY\n  strategy = :mean_reversion\n\n  # Calculate oscillator indicators\n  rsi = SQA::TAI.rsi(prices, period: 14)\n  bb_upper, bb_middle, bb_lower = SQA::TAI.bbands(prices, period: 20, nbdevup: 2, nbdevdn: 2)\n  current_price = prices.last\n\n  # Entry signal: RSI extremes + Bollinger Band touch\n  if rsi.last &lt; 30 &amp;&amp; current_price &lt; bb_lower.last\n    puts \"CYCLE MODE - BUY SIGNAL (Oversold + Lower BB)\"\n    puts \"RSI: #{rsi.last.round(2)} (Oversold)\"\n    puts \"Target: #{bb_middle.last.round(2)} (Middle BB)\"\n\n  elsif rsi.last &gt; 70 &amp;&amp; current_price &gt; bb_upper.last\n    puts \"CYCLE MODE - SELL SIGNAL (Overbought + Upper BB)\"\n    puts \"RSI: #{rsi.last.round(2)} (Overbought)\"\n    puts \"Target: #{bb_middle.last.round(2)} (Middle BB)\"\n  end\nend\n\nputs \"Current Strategy: #{strategy}\"\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#filtering-false-signals","title":"Filtering False Signals","text":"<p>Use Case: Prevent oscillator whipsaws during trends</p> <pre><code>mode = SQA::TAI.ht_trendmode(prices)\nrsi = SQA::TAI.rsi(prices, period: 14)\n\ncurrent_mode = mode.last\ncurrent_rsi = rsi.last\n\n# Only act on RSI signals during cycle mode\nif current_rsi &lt; 30\n  if current_mode == 0\n    puts \"VALID BUY: RSI oversold in CYCLE MODE\"\n  else\n    puts \"IGNORED: RSI oversold but market in TREND MODE\"\n    puts \"Price may continue lower despite oversold reading\"\n  end\n\nelsif current_rsi &gt; 70\n  if current_mode == 0\n    puts \"VALID SELL: RSI overbought in CYCLE MODE\"\n  else\n    puts \"IGNORED: RSI overbought but market in TREND MODE\"\n    puts \"Price may continue higher despite overbought reading\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#regime-based-position-sizing","title":"Regime-Based Position Sizing","text":"<p>Use Case: Adjust risk based on market mode</p> <pre><code>mode = SQA::TAI.ht_trendmode(prices)\ncurrent_mode = mode.last\n\n# Base position size\nbase_position = 100  # shares/contracts\n\n# Mode-based position sizing\nif current_mode == 1\n  # TREND MODE: Larger positions, wider stops\n  position_size = base_position * 1.5\n  stop_multiplier = 2.5\n  profit_target_multiplier = 4.0\n\n  puts \"Trend Mode Position Sizing:\"\n  puts \"Position: #{position_size} units (150% of base)\"\n  puts \"Stop: #{stop_multiplier}x ATR\"\n  puts \"Target: #{profit_target_multiplier}x ATR (let winners run)\"\n\nelse\n  # CYCLE MODE: Smaller positions, tighter stops\n  position_size = base_position\n  stop_multiplier = 1.5\n  profit_target_multiplier = 2.0\n\n  puts \"Cycle Mode Position Sizing:\"\n  puts \"Position: #{position_size} units (100% of base)\"\n  puts \"Stop: #{stop_multiplier}x ATR\"\n  puts \"Target: #{profit_target_multiplier}x ATR (take profits faster)\"\nend\n\n# Calculate actual levels\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\ncurrent_atr = atr.last\ncurrent_price = prices.last\n\nstop_distance = current_atr * stop_multiplier\ntarget_distance = current_atr * profit_target_multiplier\n\nputs \"Stop Loss: #{(current_price - stop_distance).round(2)}\"\nputs \"Take Profit: #{(current_price + target_distance).round(2)}\"\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#best-practices","title":"Best Practices","text":""},{"location":"indicators/cycle/ht_trendmode/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When HT_TRENDMODE works best: - Strategy filtering: Primary use - deciding which indicators to trust - Automated trading systems: Programmatic strategy switching - Multi-strategy portfolios: Allocate capital between trend/cycle strategies - All market types: Works across stocks, forex, commodities, crypto - All timeframes: Effective from daily to intraday charts (with sufficient data)</p> <p>Less effective in: - Very short timeframes (&lt; 15 minute charts) - too much noise - Low-liquidity markets - erratic price action confuses regime detection - During major news events - sudden volatility can cause temporary misclassification - Markets in transition - mode may be unstable between regimes</p>"},{"location":"indicators/cycle/ht_trendmode/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With HT_DCPERIOD: <pre><code># Use both indicators for comprehensive cycle analysis\nmode = SQA::TAI.ht_trendmode(prices)\ncycle = SQA::TAI.ht_dcperiod(prices)\n\ncurrent_mode = mode.last\ncurrent_cycle = cycle.last.round\n\nif current_mode == 0\n  # In cycle mode, use the detected cycle period\n  puts \"CYCLE MODE: Optimizing for #{current_cycle}-period cycle\"\n  rsi = SQA::TAI.rsi(prices, period: current_cycle)\n\n  # Trade the cycle\n  puts \"Buy at cycle troughs, sell at cycle peaks\"\n  puts \"Expected cycle duration: #{current_cycle} bars\"\n\nelse\n  # In trend mode, cycle period indicates trend strength\n  if current_cycle &gt; 30\n    puts \"TREND MODE: Long cycle (#{current_cycle}) = Strong trend\"\n  else\n    puts \"TREND MODE: Short cycle (#{current_cycle}) = Weak trend or emerging\"\n  end\nend\n</code></pre></p> <p>With Trend Strength Indicators: <pre><code>mode = SQA::TAI.ht_trendmode(prices)\nadx = SQA::TAI.adx(highs, lows, prices, period: 14)\n\ncurrent_mode = mode.last\ncurrent_adx = adx.last\n\n# Confirm trend mode with ADX\nif current_mode == 1 &amp;&amp; current_adx &gt; 25\n  puts \"CONFIRMED STRONG TREND\"\n  puts \"High confidence in trend-following strategies\"\n\nelsif current_mode == 1 &amp;&amp; current_adx &lt; 20\n  puts \"WARNING: Trend mode but weak ADX\"\n  puts \"Possible transition period - use caution\"\n\nelsif current_mode == 0 &amp;&amp; current_adx &lt; 20\n  puts \"CONFIRMED RANGING MARKET\"\n  puts \"High confidence in mean-reversion strategies\"\n\nelse  # Mode = 0 but ADX &gt; 25\n  puts \"CONFLICT: Cycle mode but high ADX\"\n  puts \"Market may be transitioning - wait for clarity\"\nend\n</code></pre></p> <p>With Volatility Indicators: <pre><code>mode = SQA::TAI.ht_trendmode(prices)\nbb_upper, bb_middle, bb_lower = SQA::TAI.bbands(prices, period: 20)\nbb_width = bb_upper.last - bb_lower.last\n\ncurrent_mode = mode.last\n\nif current_mode == 1\n  # Trend mode: Use BB for trend confirmation and entries on pullbacks\n  if prices.last &gt; bb_upper.last\n    puts \"Strong uptrend - price above upper BB\"\n  end\n  puts \"Wait for pullbacks to middle BB for entries\"\n\nelse\n  # Cycle mode: Use BB for range boundaries\n  puts \"Trade BB extremes:\"\n  puts \"Buy near: #{bb_lower.last.round(2)}\"\n  puts \"Sell near: #{bb_upper.last.round(2)}\"\n  puts \"Target: #{bb_middle.last.round(2)}\"\nend\n</code></pre></p> <p>With Other Hilbert Transform Indicators: - HT_DCPERIOD: Use cycle period only when mode = 0 (cycle mode) - HT_DCPHASE: Phase is most useful in cycle mode (0) - HT_SINE: Sine/LeadSine signals work best in cycle mode - HT_PHASOR: In-phase and quadrature components for advanced analysis</p>"},{"location":"indicators/cycle/ht_trendmode/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Ignoring Mode Changes</li> <li>Don't continue trend-following when mode switches to 0</li> <li>Don't continue mean-reversion when mode switches to 1</li> <li>Always check current mode before taking signals</li> <li> <p>Exit positions that conflict with current mode</p> </li> <li> <p>Over-Trading Mode Transitions</p> </li> <li>Mode changes can produce brief whipsaws</li> <li>Wait for mode stability (same value for 2-3 bars)</li> <li>Don't reverse entire portfolio on single mode change</li> <li> <p>Use mode as filter, not sole trigger</p> </li> <li> <p>Insufficient Data</p> </li> <li>Need minimum 32-63 bars for reliable mode detection</li> <li>Initial values will be unstable or incorrect</li> <li>Don't trade based on mode with insufficient history</li> <li> <p>Verify data quality and quantity</p> </li> <li> <p>Conflicting Signals</p> </li> <li>Mode may say \"trend\" while visual inspection shows range</li> <li>Use additional confirmation indicators (ADX, volatility)</li> <li>Trust the mode more with longer data history</li> <li> <p>Be cautious during mode disagreements</p> </li> <li> <p>Wrong Timeframe</p> </li> <li>Mode on 5-minute chart may differ from daily chart</li> <li>Use appropriate timeframe for your trading style</li> <li>Consider multi-timeframe analysis</li> <li>Higher timeframe mode generally more reliable</li> </ol>"},{"location":"indicators/cycle/ht_trendmode/#strategy-selection-guidelines","title":"Strategy Selection Guidelines","text":"<p>For Day Trading: - Use HT_TRENDMODE on 15-minute to 1-hour charts - Mode changes more frequently - confirm with volume - Quick strategy switches may be necessary - Keep tight stops regardless of mode</p> <p>For Swing Trading: - Use HT_TRENDMODE on daily charts - Mode typically more stable - Ideal for switching between trend and range strategies - Adjust position holding time based on mode</p> <p>For Position Trading: - Use HT_TRENDMODE on weekly charts - Mode changes are rare but significant - Major implications for portfolio allocation - Long-term trend mode = growth stocks, cycle mode = value stocks</p>"},{"location":"indicators/cycle/ht_trendmode/#practical-example","title":"Practical Example","text":"<p>Complete adaptive trading system:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data (need at least 63 bars)\nprices = [\n  # ... your price data ...\n]\nhighs = [...]\nlows = [...]\n\n# Detect current market regime\nmode = SQA::TAI.ht_trendmode(prices)\ncurrent_mode = mode.last\n\n# Check mode stability (has it been consistent?)\nrecent_modes = mode.last(5)\nmode_changes = recent_modes.each_cons(2).count { |a, b| a != b }\nmode_stable = mode_changes &lt;= 1\n\nunless mode_stable\n  puts \"WARNING: Market regime is unstable (#{mode_changes} changes in 5 bars)\"\n  puts \"Reducing position sizes and waiting for clarity\"\nend\n\nputs \"=\" * 50\nputs \"MARKET REGIME ANALYSIS\"\nputs \"=\" * 50\nputs \"Current Mode: #{current_mode == 1 ? 'TREND' : 'CYCLE'}\"\nputs \"Mode Stability: #{mode_stable ? 'STABLE' : 'UNSTABLE'}\"\nputs\n\n# TREND MODE STRATEGY\nif current_mode == 1\n  puts \"TREND MODE ACTIVE - Trend-Following Strategy\"\n  puts \"-\" * 50\n\n  # Calculate trend indicators\n  ema_12 = SQA::TAI.ema(prices, period: 12)\n  ema_26 = SQA::TAI.ema(prices, period: 26)\n  adx = SQA::TAI.adx(highs, lows, prices, period: 14)\n  plus_di = SQA::TAI.plus_di(highs, lows, prices, period: 14)\n  minus_di = SQA::TAI.minus_di(highs, lows, prices, period: 14)\n  atr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\n  current_price = prices.last\n  current_adx = adx.last\n  current_atr = atr.last\n\n  # Determine trend direction and strength\n  bullish_trend = ema_12.last &gt; ema_26.last &amp;&amp; plus_di.last &gt; minus_di.last\n  bearish_trend = ema_12.last &lt; ema_26.last &amp;&amp; minus_di.last &gt; plus_di.last\n  strong_trend = current_adx &gt; 25\n\n  puts \"EMA(12): #{ema_12.last.round(2)}\"\n  puts \"EMA(26): #{ema_26.last.round(2)}\"\n  puts \"ADX: #{current_adx.round(2)} #{strong_trend ? '(STRONG)' : '(WEAK)'}\"\n  puts \"ATR: #{current_atr.round(2)}\"\n  puts\n\n  # Generate trend-following signals\n  if bullish_trend &amp;&amp; strong_trend\n    entry_price = current_price\n    stop_loss = current_price - (2.5 * current_atr)\n    take_profit = current_price + (4.0 * current_atr)\n\n    puts \"STRONG BULLISH TREND DETECTED\"\n    puts \"=\" * 50\n    puts \"ENTRY: BUY at #{entry_price.round(2)}\"\n    puts \"STOP LOSS: #{stop_loss.round(2)} (2.5x ATR)\"\n    puts \"TAKE PROFIT: #{take_profit.round(2)} (4.0x ATR)\"\n    puts \"POSITION SIZE: 150% of base (trend mode)\"\n    puts\n    puts \"Strategy: Ride the trend with wide stop\"\n    puts \"Management: Use trailing stop, let profits run\"\n\n  elsif bearish_trend &amp;&amp; strong_trend\n    entry_price = current_price\n    stop_loss = current_price + (2.5 * current_atr)\n    take_profit = current_price - (4.0 * current_atr)\n\n    puts \"STRONG BEARISH TREND DETECTED\"\n    puts \"=\" * 50\n    puts \"ENTRY: SELL at #{entry_price.round(2)}\"\n    puts \"STOP LOSS: #{stop_loss.round(2)} (2.5x ATR)\"\n    puts \"TAKE PROFIT: #{take_profit.round(2)} (4.0x ATR)\"\n    puts \"POSITION SIZE: 150% of base (trend mode)\"\n    puts\n    puts \"Strategy: Ride the trend with wide stop\"\n    puts \"Management: Use trailing stop, let profits run\"\n\n  else\n    puts \"NO CLEAR TREND SIGNAL\"\n    puts \"Waiting for strong directional move and ADX &gt; 25\"\n  end\n\n  puts\n  puts \"IGNORED INDICATORS IN TREND MODE:\"\n  puts \"- RSI (will show false overbought/oversold)\"\n  puts \"- Stochastic (will generate whipsaw signals)\"\n  puts \"- Bollinger Band extremes (price can stay outside bands)\"\n\n# CYCLE MODE STRATEGY\nelse\n  puts \"CYCLE MODE ACTIVE - Mean-Reversion Strategy\"\n  puts \"-\" * 50\n\n  # Calculate mean-reversion indicators\n  rsi = SQA::TAI.rsi(prices, period: 14)\n  stoch_k, stoch_d = SQA::TAI.stoch(highs, lows, prices,\n                                     fastk_period: 14,\n                                     slowk_period: 3,\n                                     slowd_period: 3)\n  bb_upper, bb_middle, bb_lower = SQA::TAI.bbands(prices,\n                                                   period: 20,\n                                                   nbdevup: 2,\n                                                   nbdevdn: 2)\n  atr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\n  current_price = prices.last\n  current_rsi = rsi.last\n  current_stoch_k = stoch_k.last\n  current_atr = atr.last\n\n  puts \"Current Price: #{current_price.round(2)}\"\n  puts \"RSI: #{current_rsi.round(2)}\"\n  puts \"Stochastic K: #{current_stoch_k.round(2)}\"\n  puts \"BB Upper: #{bb_upper.last.round(2)}\"\n  puts \"BB Middle: #{bb_middle.last.round(2)}\"\n  puts \"BB Lower: #{bb_lower.last.round(2)}\"\n  puts \"ATR: #{current_atr.round(2)}\"\n  puts\n\n  # Generate mean-reversion signals\n  oversold = current_rsi &lt; 30 &amp;&amp; current_stoch_k &lt; 20\n  overbought = current_rsi &gt; 70 &amp;&amp; current_stoch_k &gt; 80\n  near_lower_bb = current_price &lt; bb_lower.last\n  near_upper_bb = current_price &gt; bb_upper.last\n\n  if oversold &amp;&amp; near_lower_bb\n    entry_price = current_price\n    stop_loss = current_price - (1.5 * current_atr)\n    take_profit = bb_middle.last\n\n    puts \"OVERSOLD CONDITION DETECTED\"\n    puts \"=\" * 50\n    puts \"ENTRY: BUY at #{entry_price.round(2)}\"\n    puts \"STOP LOSS: #{stop_loss.round(2)} (1.5x ATR)\"\n    puts \"TAKE PROFIT: #{take_profit.round(2)} (Middle BB)\"\n    puts \"POSITION SIZE: 100% of base (cycle mode)\"\n    puts\n    puts \"Strategy: Buy at lower extreme, target mean\"\n    puts \"Management: Take profits at resistance/middle BB\"\n\n  elsif overbought &amp;&amp; near_upper_bb\n    entry_price = current_price\n    stop_loss = current_price + (1.5 * current_atr)\n    take_profit = bb_middle.last\n\n    puts \"OVERBOUGHT CONDITION DETECTED\"\n    puts \"=\" * 50\n    puts \"ENTRY: SELL at #{entry_price.round(2)}\"\n    puts \"STOP LOSS: #{stop_loss.round(2)} (1.5x ATR)\"\n    puts \"TAKE PROFIT: #{take_profit.round(2)} (Middle BB)\"\n    puts \"POSITION SIZE: 100% of base (cycle mode)\"\n    puts\n    puts \"Strategy: Sell at upper extreme, target mean\"\n    puts \"Management: Take profits at support/middle BB\"\n\n  else\n    puts \"NO EXTREME CONDITION\"\n    puts \"Waiting for oversold (RSI&lt;30, Stoch&lt;20) at lower BB\"\n    puts \"      or overbought (RSI&gt;70, Stoch&gt;80) at upper BB\"\n  end\n\n  puts\n  puts \"IGNORED INDICATORS IN CYCLE MODE:\"\n  puts \"- Moving average crossovers (will whipsaw)\"\n  puts \"- Trend lines (will generate false breakouts)\"\n  puts \"- ADX (not relevant in ranging market)\"\nend\n\n# Monitor for mode changes\nputs\nputs \"=\" * 50\nputs \"REGIME MONITORING\"\nputs \"=\" * 50\n\nif mode.size &gt;= 10\n  recent_10_modes = mode.last(10)\n  trend_mode_pct = (recent_10_modes.count(1) / 10.0) * 100\n\n  puts \"Last 10 bars: #{trend_mode_pct.round}% trend mode, #{(100-trend_mode_pct).round}% cycle mode\"\n\n  if trend_mode_pct &gt; 70\n    puts \"Market predominantly trending - bias toward trend-following\"\n  elsif trend_mode_pct &lt; 30\n    puts \"Market predominantly cycling - bias toward mean-reversion\"\n  else\n    puts \"Market transitioning between regimes - use caution\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/cycle/ht_trendmode/#hilbert-transform-family","title":"Hilbert Transform Family","text":"<ul> <li>HT_DCPERIOD: Identifies the dominant cycle period - use with HT_TRENDMODE to optimize indicator periods in cycle mode</li> <li>HT_DCPHASE: Shows current phase within the cycle - most useful when HT_TRENDMODE = 0</li> <li>HT_SINE: Generates sine wave signals for timing - works best when HT_TRENDMODE = 0</li> <li>HT_PHASOR: Provides in-phase and quadrature components for advanced cycle analysis</li> <li>HT_TRENDLINE: Instantaneous trendline - works with HT_TRENDMODE for comprehensive analysis</li> </ul>"},{"location":"indicators/cycle/ht_trendmode/#complementary-indicators","title":"Complementary Indicators","text":"<p>For Trend Mode (when HT_TRENDMODE = 1): - ADX: Confirm trend strength - MACD: Trend direction and momentum - EMA: Moving average crossovers and trends - PLUS_DI/MINUS_DI: Directional movement</p> <p>For Cycle Mode (when HT_TRENDMODE = 0): - RSI: Overbought/oversold in ranges - STOCH: Oscillator for cycle extremes - BBANDS: Range boundaries and mean - CCI: Commodity Channel Index for ranges</p> <p>For Mode Confirmation: - ATR: Volatility context for both modes - STDDEV: Statistical volatility measurement</p>"},{"location":"indicators/cycle/ht_trendmode/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/cycle/ht_trendmode/#multi-timeframe-regime-analysis","title":"Multi-Timeframe Regime Analysis","text":"<pre><code># Analyze regime across multiple timeframes\ndaily_prices = [...]   # Daily data\nhourly_prices = [...]  # Hourly data\n\ndaily_mode = SQA::TAI.ht_trendmode(daily_prices).last\nhourly_mode = SQA::TAI.ht_trendmode(hourly_prices).last\n\nputs \"Daily Mode: #{daily_mode == 1 ? 'TREND' : 'CYCLE'}\"\nputs \"Hourly Mode: #{hourly_mode == 1 ? 'TREND' : 'CYCLE'}\"\n\n# Trading rules based on timeframe alignment\nif daily_mode == 1 &amp;&amp; hourly_mode == 1\n  puts \"ALIGNED TREND - Strongest trend-following setup\"\n  puts \"High confidence long-term trend trades\"\n\nelsif daily_mode == 0 &amp;&amp; hourly_mode == 0\n  puts \"ALIGNED CYCLE - Strongest mean-reversion setup\"\n  puts \"High confidence range-trading opportunities\"\n\nelsif daily_mode == 1 &amp;&amp; hourly_mode == 0\n  puts \"MIXED REGIME - Daily trend, hourly cycles\"\n  puts \"Trade pullbacks within daily trend using hourly oscillators\"\n\nelse  # daily_mode == 0 &amp;&amp; hourly_mode == 1\n  puts \"MIXED REGIME - Daily range, hourly trend\"\n  puts \"Trade intraday trends but respect daily range boundaries\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#portfolio-allocation-by-regime","title":"Portfolio Allocation by Regime","text":"<pre><code># Allocate capital based on market regime\nmode = SQA::TAI.ht_trendmode(prices)\ncurrent_mode = mode.last\n\ntotal_capital = 100_000  # Example portfolio size\n\nif current_mode == 1\n  # TREND MODE: Allocate to trend-following strategies\n  trend_following_allocation = total_capital * 0.70\n  mean_reversion_allocation = total_capital * 0.20\n  cash_reserve = total_capital * 0.10\n\n  puts \"TREND MODE ALLOCATION:\"\n  puts \"Trend Following: $#{trend_following_allocation.round(2)} (70%)\"\n  puts \"Mean Reversion: $#{mean_reversion_allocation.round(2)} (20%)\"\n  puts \"Cash: $#{cash_reserve.round(2)} (10%)\"\n\nelse\n  # CYCLE MODE: Allocate to mean-reversion strategies\n  trend_following_allocation = total_capital * 0.20\n  mean_reversion_allocation = total_capital * 0.70\n  cash_reserve = total_capital * 0.10\n\n  puts \"CYCLE MODE ALLOCATION:\"\n  puts \"Trend Following: $#{trend_following_allocation.round(2)} (20%)\"\n  puts \"Mean Reversion: $#{mean_reversion_allocation.round(2)} (70%)\"\n  puts \"Cash: $#{cash_reserve.round(2)} (10%)\"\nend\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#mode-transition-detection","title":"Mode Transition Detection","text":"<pre><code># Detect and act on mode changes\nmode = SQA::TAI.ht_trendmode(prices)\n\nif mode.size &gt;= 2\n  current_mode = mode.last\n  previous_mode = mode[-2]\n\n  if current_mode != previous_mode\n    # Mode just changed\n    if current_mode == 1\n      puts \"MODE CHANGE ALERT: CYCLE \u2192 TREND\"\n      puts \"Actions:\"\n      puts \"1. Close mean-reversion positions\"\n      puts \"2. Exit range-trading strategies\"\n      puts \"3. Prepare for breakout opportunities\"\n      puts \"4. Widen stop losses\"\n      puts \"5. Increase position holding time\"\n\n    else\n      puts \"MODE CHANGE ALERT: TREND \u2192 CYCLE\"\n      puts \"Actions:\"\n      puts \"1. Take profits on trend-following positions\"\n      puts \"2. Exit momentum trades\"\n      puts \"3. Prepare for range-bound trading\"\n      puts \"4. Tighten stop losses\"\n      puts \"5. Decrease position holding time\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#statistical-analysis-of-modes","title":"Statistical Analysis of Modes","text":"<pre><code># Analyze mode history for regime characteristics\nmode = SQA::TAI.ht_trendmode(prices)\n\nif mode.size &gt;= 50\n  # Calculate mode statistics\n  total_bars = mode.size\n  trend_bars = mode.count(1)\n  cycle_bars = mode.count(0)\n\n  trend_percentage = (trend_bars.to_f / total_bars * 100).round(2)\n  cycle_percentage = (cycle_bars.to_f / total_bars * 100).round(2)\n\n  puts \"REGIME STATISTICS (#{total_bars} bars)\"\n  puts \"Trend Mode: #{trend_percentage}% of time\"\n  puts \"Cycle Mode: #{cycle_percentage}% of time\"\n\n  # Find average regime duration\n  regime_durations = []\n  current_duration = 1\n\n  mode.each_cons(2) do |prev, curr|\n    if prev == curr\n      current_duration += 1\n    else\n      regime_durations &lt;&lt; current_duration\n      current_duration = 1\n    end\n  end\n\n  avg_duration = regime_durations.sum.to_f / regime_durations.size\n  puts \"Average Regime Duration: #{avg_duration.round(1)} bars\"\n  puts \"Regime Changes: #{regime_durations.size} times\"\n\n  # Characterize market\n  if trend_percentage &gt; 60\n    puts \"Market Character: TRENDING (favors trend-following)\"\n  elsif cycle_percentage &gt; 60\n    puts \"Market Character: RANGING (favors mean-reversion)\"\n  else\n    puts \"Market Character: BALANCED (mixed strategies needed)\"\n  end\nend\n</code></pre>"},{"location":"indicators/cycle/ht_trendmode/#references","title":"References","text":"<ul> <li>\"Rocket Science for Traders\" by John F. Ehlers - Comprehensive coverage of Hilbert Transform and market regime detection</li> <li>\"Cybernetic Analysis for Stocks and Futures\" by John F. Ehlers - Advanced applications of Hilbert Transform indicators</li> <li>\"Cycle Analytics for Traders\" by John F. Ehlers - Detailed explanation of cycle vs trend identification</li> <li>Original Research: John F. Ehlers pioneered the application of digital signal processing to financial markets</li> <li>TA-Lib Documentation: HT_TRENDMODE Function</li> </ul>"},{"location":"indicators/cycle/ht_trendmode/#see-also","title":"See Also","text":"<ul> <li>Cycle Indicators Overview</li> <li>Hilbert Transform Indicators Family</li> </ul> <ul> <li>Strategy Selection Guide</li> </ul> <ul> <li>Adaptive Trading Systems</li> <li>API Reference</li> </ul>"},{"location":"indicators/momentum/adx/","title":"ADX (Average Directional Index)","text":""},{"location":"indicators/momentum/adx/#overview","title":"Overview","text":"<p>The Average Directional Index (ADX) is a technical indicator that measures the strength of a trend, regardless of its direction. Developed by J. Welles Wilder Jr. as part of the Directional Movement System, ADX is one of the most reliable and widely-used trend strength indicators in technical analysis. Unlike most momentum indicators, ADX does not indicate trend direction\u2014only the strength of the current trend.</p>"},{"location":"indicators/momentum/adx/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of close prices <code>period</code> Integer 14 Number of periods for ADX calculation"},{"location":"indicators/momentum/adx/#parameter-details","title":"Parameter Details","text":"<p>high, low, close - Requires complete OHLC data (open not needed) - Arrays must be of equal length - Minimum data points needed: <code>(period * 2) + 1</code> for meaningful results - Works on any timeframe (intraday, daily, weekly, monthly)</p> <p>period (time_period) - Wilder's original recommendation: 14 periods - Shorter periods (7-10) create more responsive but noisier signals - Longer periods (21-28) create smoother signals with fewer false readings - Recommended ranges:   - Day trading: 7-10 periods for faster signals   - Swing trading: 14 periods (standard)   - Position trading: 21-28 periods for long-term trend identification</p>"},{"location":"indicators/momentum/adx/#usage","title":"Usage","text":""},{"location":"indicators/momentum/adx/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35,\n         49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80, 50.00,\n         50.20, 50.30, 50.50, 50.70]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03,\n         49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10, 49.20,\n         49.30, 49.40, 49.50, 49.60]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32,\n         49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45, 49.60,\n         49.80, 50.00, 50.20, 50.40]\n\n# Calculate 14-period ADX (standard)\nadx = SQA::TAI.adx(high, low, close, period: 14)\n\nputs \"Current ADX: #{adx.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/adx/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># More sensitive 10-period ADX for day trading\nadx_fast = SQA::TAI.adx(high, low, close, period: 10)\n\n# Smoother 21-period ADX for position trading\nadx_slow = SQA::TAI.adx(high, low, close, period: 21)\n\nputs \"Fast ADX (10): #{adx_fast.last.round(2)}\"\nputs \"Standard ADX (14): #{adx.last.round(2)}\"\nputs \"Slow ADX (21): #{adx_slow.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/adx/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/momentum/adx/#what-it-measures","title":"What It Measures","text":"<p>The ADX measures the strength of a trend by analyzing the directional movement of price:</p> <ul> <li>Trend Strength: How powerful the current trend is, regardless of direction</li> <li>Market Condition: Whether the market is trending or ranging</li> <li>Trend Quality: The reliability of the current directional movement</li> <li>Trend Sustainability: Whether a trend is strong enough to follow</li> </ul> <p>ADX answers the question: \"Is this market worth trading with trend-following strategies, or should I use range-bound strategies?\"</p>"},{"location":"indicators/momentum/adx/#calculation-method","title":"Calculation Method","text":"<p>ADX is derived from the Directional Movement System through several steps:</p> <ol> <li>Calculate Directional Movement (+DM and -DM): Measure upward and downward price movement</li> <li>Calculate True Range (TR): Measure price volatility</li> <li>Smooth +DM, -DM, and TR: Apply Wilder's smoothing over the period</li> <li>Calculate Directional Indicators (+DI and -DI): Normalize directional movement</li> <li>Calculate DX: Measure difference between +DI and -DI</li> <li>Calculate ADX: Smooth DX values using Wilder's smoothing</li> </ol> <p>Formula: <pre><code>+DM = Current High - Previous High (if positive, else 0)\n-DM = Previous Low - Current Low (if positive, else 0)\n\n+DI = 100 \u00d7 (Smoothed +DM / Smoothed TR)\n-DI = 100 \u00d7 (Smoothed -DM / Smoothed TR)\n\nDX = 100 \u00d7 |+DI - -DI| / (+DI + -DI)\n\nADX = Smoothed Average of DX\n\nWhere smoothing uses Wilder's method:\nFirst value = Simple average of period values\nSubsequent values = (Previous \u00d7 (period-1) + Current) / period\n</code></pre></p>"},{"location":"indicators/momentum/adx/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: 0 to 100 (theoretically unbounded but rarely exceeds 100)</li> <li>Type: Trend strength oscillator (non-directional)</li> <li>Lag: High lag due to multiple smoothing operations (typically 2\u00d7 period lag)</li> <li>Best Used: Identifying trending vs ranging markets, filtering trades, confirming trend strength</li> <li>Limitations: Does not indicate direction; high lag means late signals</li> </ul>"},{"location":"indicators/momentum/adx/#interpretation","title":"Interpretation","text":""},{"location":"indicators/momentum/adx/#value-ranges","title":"Value Ranges","text":"<p>Specific guidance on what different ADX values indicate:</p> <ul> <li>0-20: Weak or absent trend. Market is ranging, consolidating, or moving sideways. Trend-following strategies are unreliable. Consider oscillators and range-bound strategies.</li> <li>20-25: Developing trend. A trend may be forming but is not yet established. Watch for ADX to continue rising for confirmation.</li> <li>25-50: Strong trend. Good conditions for trend-following strategies. The trend has clear direction and momentum. Most profitable zone for trend traders.</li> <li>50-75: Very strong trend. Excellent trending environment with sustained directional movement. Rare but highly profitable for trend followers.</li> <li>75-100: Extremely strong trend. Very rare and indicates exceptional directional movement. Often seen during major breakouts or market moves.</li> </ul>"},{"location":"indicators/momentum/adx/#key-levels","title":"Key Levels","text":"<ul> <li>Below 20: No trend or weak trend. Market is choppy. Avoid trend-following strategies. Use range-bound approaches (oscillators, support/resistance).</li> <li>20 Threshold: Critical level. ADX crossing above 20 suggests a trend is developing. ADX falling below 20 suggests trend is ending.</li> <li>25 Threshold: Classic trend confirmation level. Many traders only take trend-following trades when ADX &gt; 25.</li> <li>50+ Level: Indicates very strong trend but also potential exhaustion approaching. Watch for ADX to peak and decline.</li> </ul>"},{"location":"indicators/momentum/adx/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read ADX signals:</p> <ol> <li>Trend Presence</li> <li>ADX &gt; 25: Strong trend exists (use +DI/-DI to determine direction)</li> <li>ADX &lt; 20: No meaningful trend (use range-bound strategies)</li> <li> <p>ADX 20-25: Trend developing or ending (watch for confirmation)</p> </li> <li> <p>Trend Changes</p> </li> <li>ADX rising: Trend strengthening (gaining momentum)</li> <li>ADX falling: Trend weakening (losing momentum)</li> <li> <p>ADX flat: Trend strength stable</p> </li> <li> <p>Market Regime Identification</p> </li> <li>ADX consistently below 20: Ranging market regime</li> <li>ADX consistently above 25: Trending market regime</li> <li>ADX oscillating around 20-25: Transitional market</li> </ol>"},{"location":"indicators/momentum/adx/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/momentum/adx/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: ADX crosses above 20 or 25 with +DI &gt; -DI</li> <li>Confirms new uptrend is developing</li> <li> <p>Best when ADX is rising from low levels</p> </li> <li> <p>Trend Confirmation: ADX &gt; 25 with +DI &gt; -DI and ADX rising</p> </li> <li>Indicates strong established uptrend</li> <li> <p>Look for pullbacks to enter</p> </li> <li> <p>Strength Filter: Use ADX &gt; 25 as filter for other buy signals</p> </li> <li>Only take long signals when ADX confirms trend strength</li> <li>Reduces false signals in choppy markets</li> </ol> <p>Example Scenario: <pre><code>When ADX crosses above 25 with +DI (30) &gt; -DI (15) and ADX rising,\nconsider long positions. Confirm with:\n- Price breaking above resistance\n- +DI rising while -DI falling\n- Set stop loss below recent swing low\n</code></pre></p>"},{"location":"indicators/momentum/adx/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: ADX crosses above 20 or 25 with -DI &gt; +DI</li> <li>Confirms new downtrend is developing</li> <li> <p>Best when ADX is rising from low levels</p> </li> <li> <p>Trend Confirmation: ADX &gt; 25 with -DI &gt; +DI and ADX rising</p> </li> <li>Indicates strong established downtrend</li> <li> <p>Look for rallies to enter shorts</p> </li> <li> <p>Exit Signal: ADX peaks above 50 then starts declining</p> </li> <li>May indicate trend exhaustion</li> <li>Consider taking profits or tightening stops</li> </ol> <p>Example Scenario: <pre><code>When ADX crosses above 25 with -DI (35) &gt; +DI (12) and ADX rising,\nconsider short positions. Confirm with:\n- Price breaking below support\n- -DI rising while +DI falling\n- Set stop loss above recent swing high\n</code></pre></p>"},{"location":"indicators/momentum/adx/#divergence-analysis","title":"Divergence Analysis","text":"<p>Trend Weakening: - Pattern: Price makes new high/low but ADX makes lower high/low - Identification: Compare price extremes with corresponding ADX peaks - Significance: Trend losing strength despite price extension - Reliability: High when ADX was previously above 40 - Example: Stock rallies to new high at $120, but ADX peaks at 35 vs previous peak of 42. Uptrend weakening.</p> <p>Trend Strengthening: - Pattern: ADX making higher lows while in uptrend or downtrend - Identification: Track ADX lows during pullbacks - Significance: Trend retaining strength during corrections - Reliability: Strongest when ADX stays above 25 during pullbacks - Example: During pullbacks in uptrend, ADX bottoms at 28, 30, 32 successively. Strong persistent uptrend.</p>"},{"location":"indicators/momentum/adx/#best-practices","title":"Best Practices","text":""},{"location":"indicators/momentum/adx/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When ADX works best:</p> <ul> <li>Market conditions: Most effective in all conditions as a filter. Identifies when to trend-follow vs when to range-trade. Not affected by volatility.</li> <li>Time frames: Works on all timeframes but most reliable on daily and 4-hour charts. Higher timeframes produce more reliable trend identification.</li> <li>Asset classes: Excellent for all asset classes\u2014stocks, forex, commodities, cryptocurrencies. Universal applicability.</li> </ul>"},{"location":"indicators/momentum/adx/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Directional Indicators (+DI/-DI): Essential combination. ADX shows strength, DI shows direction. Together they provide complete trend picture. Enter long when ADX &gt; 25 and +DI &gt; -DI.</p> </li> <li> <p>With Moving Averages: Use 50/200 MA for trend direction, ADX for trend strength. Only trade MA crossovers when ADX &gt; 25. Avoids false crossovers in ranging markets.</p> </li> <li> <p>With Oscillators (RSI, Stochastic): Use ADX to determine strategy. When ADX &lt; 20, use RSI/Stochastic overbought/oversold signals. When ADX &gt; 25, ignore oscillator extremes and trade with trend.</p> </li> </ul>"},{"location":"indicators/momentum/adx/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Trading Without Direction: ADX alone doesn't show direction. Always combine with +DI/-DI or trend indicator. Trading on ADX strength without knowing direction leads to losses.</p> </li> <li> <p>Chasing High ADX: When ADX exceeds 50-60, trend may be near exhaustion. Entering late into very high ADX can result in buying/selling at extremes.</p> </li> <li> <p>Ignoring Time Lag: ADX has significant lag (2\u00d7 period). By the time ADX confirms trend, much of the move may be over. Use with other leading indicators for earlier entry.</p> </li> <li> <p>Using Wrong Threshold: Traditional 25 threshold may not suit all markets. High-volatility markets (crypto) may need 30-35. Low-volatility markets may use 20.</p> </li> </ol>"},{"location":"indicators/momentum/adx/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading):</li> <li>Period: 7-10 for faster trend detection</li> <li>Threshold: 20-25 (lower threshold for more signals)</li> <li> <p>Focus: Quick identification of intraday trends</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>Period: 14 (standard Wilder setting)</li> <li>Threshold: 25 (classic confirmation level)</li> <li> <p>Focus: Multi-day trend identification and following</p> </li> <li> <p>Long-term trading (position trading):</p> </li> <li>Period: 21-28 for smoothest signals</li> <li>Threshold: 30 (higher threshold for strongest trends only)</li> <li> <p>Focus: Major trend identification, monthly timeframe</p> </li> <li> <p>Backtesting approach: Test ADX period and threshold on historical data for your specific asset and timeframe. Find levels where ADX &gt; threshold corresponded with sustained profitable trends.</p> </li> </ul>"},{"location":"indicators/momentum/adx/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data for a stock\nhigh_prices = [\n  48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19,\n  50.12, 50.10, 50.00, 49.75, 49.80, 50.00, 50.20, 50.30, 50.50, 50.70,\n  50.80, 50.90, 51.00, 51.10, 51.20, 51.30, 51.40, 51.50, 51.60, 51.70\n]\nlow_prices = [\n  47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87,\n  49.20, 49.00, 48.90, 49.00, 49.10, 49.20, 49.30, 49.40, 49.50, 49.60,\n  49.70, 49.80, 49.90, 50.00, 50.10, 50.20, 50.30, 50.40, 50.50, 50.60\n]\nclose_prices = [\n  48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32, 49.91, 50.13,\n  49.53, 49.50, 49.25, 49.20, 49.45, 49.60, 49.80, 50.00, 50.20, 50.40,\n  50.60, 50.70, 50.90, 51.00, 51.10, 51.20, 51.30, 51.40, 51.50, 51.60\n]\n\n# Calculate ADX and directional indicators\nadx = SQA::TAI.adx(high_prices, low_prices, close_prices, period: 14)\nplus_di = SQA::TAI.plus_di(high_prices, low_prices, close_prices, period: 14)\nminus_di = SQA::TAI.minus_di(high_prices, low_prices, close_prices, period: 14)\n\n# Current values\ncurrent_price = close_prices.last\ncurrent_adx = adx.last\nprevious_adx = adx[-2]\nadx_5_bars_ago = adx[-5]\n\ncurrent_plus_di = plus_di.last\ncurrent_minus_di = minus_di.last\n\nputs \"=== ADX Trend Analysis ===\"\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"Current ADX: #{current_adx.round(2)}\"\nputs \"+DI: #{current_plus_di.round(2)}, -DI: #{current_minus_di.round(2)}\"\nputs\n\n# Determine trend strength\nif current_adx &gt; 50\n  trend_strength = \"VERY STRONG\"\nelsif current_adx &gt; 25\n  trend_strength = \"STRONG\"\nelsif current_adx &gt; 20\n  trend_strength = \"DEVELOPING\"\nelse\n  trend_strength = \"WEAK/ABSENT\"\nend\n\n# Determine trend direction\nif current_plus_di &gt; current_minus_di\n  trend_direction = \"UPTREND\"\n  directional_spread = current_plus_di - current_minus_di\nelse\n  trend_direction = \"DOWNTREND\"\n  directional_spread = current_minus_di - current_plus_di\nend\n\nputs \"Trend Strength: #{trend_strength}\"\nputs \"Trend Direction: #{trend_direction}\"\nputs \"Directional Spread: #{directional_spread.round(2)}\"\nputs\n\n# Trading logic\nif current_adx &gt; 25\n  # Strong trend - trend-following mode\n  adx_change = current_adx - adx_5_bars_ago\n\n  if trend_direction == \"UPTREND\"\n    puts \"TRADING SIGNAL: BUY/HOLD LONG\"\n    puts \"Strategy: Trend-following uptrend\"\n    puts \"Entry: Look for pullbacks to support\"\n    puts \"Stop Loss: Below recent swing low\"\n\n    if adx_change &gt; 0\n      puts \"ADX rising: Trend strengthening - High confidence\"\n    else\n      puts \"ADX falling: Trend weakening - Watch for exit\"\n    end\n\n  else # DOWNTREND\n    puts \"TRADING SIGNAL: SELL/HOLD SHORT\"\n    puts \"Strategy: Trend-following downtrend\"\n    puts \"Entry: Look for rallies to resistance\"\n    puts \"Stop Loss: Above recent swing high\"\n\n    if adx_change &gt; 0\n      puts \"ADX rising: Trend strengthening - High confidence\"\n    else\n      puts \"ADX falling: Trend weakening - Watch for exit\"\n    end\n  end\n\nelsif current_adx &lt; 20\n  # Weak trend - range-bound mode\n  puts \"TRADING SIGNAL: RANGE-BOUND MARKET\"\n  puts \"Strategy: Avoid trend-following\"\n  puts \"Consider: Oscillator-based strategies (RSI, Stochastic)\"\n  puts \"Look for: Support/resistance bounces\"\n  puts \"Avoid: Breakout trading until ADX rises\"\n\nelse # ADX between 20-25\n  # Transitional period\n  if current_adx &gt; previous_adx\n    puts \"TRADING SIGNAL: POTENTIAL TREND DEVELOPING\"\n    puts \"ADX rising from #{previous_adx.round(2)} to #{current_adx.round(2)}\"\n    puts \"Watch for ADX to cross above 25 for trend confirmation\"\n    puts \"Prepare for #{trend_direction} if ADX continues rising\"\n  else\n    puts \"TRADING SIGNAL: TREND ENDING\"\n    puts \"ADX falling from #{previous_adx.round(2)} to #{current_adx.round(2)}\"\n    puts \"Trend losing strength - consider taking profits\"\n    puts \"Prepare for range-bound market if ADX continues falling\"\n  end\nend\n\n# Warn of potential exhaustion\nif current_adx &gt; 50\n  puts \"\\n\u26a0\ufe0f  WARNING: ADX Very High\"\n  puts \"Trend may be overextended\"\n  puts \"Watch for ADX peak and reversal\"\n  puts \"Consider tightening stops or taking partial profits\"\nend\n</code></pre>"},{"location":"indicators/momentum/adx/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/momentum/adx/#similar-indicators","title":"Similar Indicators","text":"<ul> <li> <p>ADXR (ADX Rating): Smoothed version of ADX that averages current ADX with ADX from N periods ago. ADXR is less volatile and provides more stable trend strength readings. Use ADXR when you want fewer false signals and smoother trend identification.</p> </li> <li> <p>DX (Directional Movement Index): The raw directional movement calculation before smoothing into ADX. DX is more volatile but more responsive. ADX is the preferred indicator as it smooths out DX noise.</p> </li> </ul>"},{"location":"indicators/momentum/adx/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li> <p>PLUS_DI (+DI): Measures positive directional movement (uptrend strength). Essential companion to ADX. Use +DI &gt; -DI to identify uptrend direction when ADX shows strength.</p> </li> <li> <p>MINUS_DI (-DI): Measures negative directional movement (downtrend strength). Essential companion to ADX. Use -DI &gt; +DI to identify downtrend direction when ADX shows strength.</p> </li> <li> <p>ATR (Average True Range): Measures volatility and is part of the same Wilder system. Use ATR for position sizing and stop loss placement when ADX identifies trend.</p> </li> </ul>"},{"location":"indicators/momentum/adx/#indicator-family","title":"Indicator Family","text":"<p>ADX belongs to the Directional Movement System family developed by Wilder: - DX: Raw directional movement calculation - ADX: Smoothed DX showing trend strength - ADXR: Further smoothed ADX - +DI/-DI: Directional indicators showing trend direction</p> <p>When to prefer ADX: For determining whether to use trend-following or range-bound strategies. ADX is the gold standard for trend strength identification and market regime filtering. Always combine with directional indicators (+DI/-DI) for complete analysis.</p>"},{"location":"indicators/momentum/adx/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/momentum/adx/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use ADX across multiple timeframes for robust trend identification:</p> <ul> <li>Higher timeframe ADX (daily/weekly) identifies major trend strength and overall market regime</li> <li>Lower timeframe ADX (4H/1H) identifies short-term trend strength for precise entry timing</li> <li>Strongest trends when all timeframes show ADX &gt; 25 (e.g., weekly ADX 35, daily ADX 30, 4H ADX 28)</li> </ul> <p>Example: If weekly ADX is 40 (very strong trend) and daily ADX is 28 (strong trend), focus on daily pullbacks as entry opportunities in the direction of the weekly trend.</p>"},{"location":"indicators/momentum/adx/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>ADX behavior and optimal thresholds vary by market type:</p> <ul> <li> <p>Low Volatility Markets (utilities, bonds): ADX rarely exceeds 30. Use threshold of 20 for trend confirmation. ADX &gt; 25 indicates exceptionally strong trend.</p> </li> <li> <p>Medium Volatility Markets (large-cap stocks, major forex pairs): Standard ADX thresholds work well. Use 25 for trend confirmation, 40+ indicates very strong trend.</p> </li> <li> <p>High Volatility Markets (crypto, small-caps, emerging markets): ADX can frequently spike above 40. Consider using 30-35 as trend threshold to avoid false signals.</p> </li> <li> <p>Trending Periods: In sustained bull/bear markets, ADX stays elevated. Use ADX falling below 30 (instead of 25) as trend-end signal.</p> </li> </ul>"},{"location":"indicators/momentum/adx/#statistical-validation","title":"Statistical Validation","text":"<p>ADX reliability metrics and considerations:</p> <ul> <li> <p>Lag Period: ADX typically lags price by 2\u00d7 the period setting. With 14-period ADX, expect signals about 28 bars after trend begins.</p> </li> <li> <p>False Positive Rate: ADX crossing above 25 fails to produce sustained trend approximately 30-40% of time. Always use with directional confirmation.</p> </li> <li> <p>Optimal Threshold: Studies show ADX threshold of 25 is optimal for most markets, but varies by asset. Backtest your specific market to find optimal level.</p> </li> <li> <p>Trend Persistence: When ADX crosses above 25, average trend duration is 1.5-2\u00d7 the ADX period. With 14-period ADX, expect trend to last 21-28 bars on average.</p> </li> <li> <p>Risk/Reward: Trading only when ADX &gt; 25 increases win rate by approximately 15-20% compared to taking all signals, while reducing trade frequency by 40-50%.</p> </li> </ul>"},{"location":"indicators/momentum/adx/#references","title":"References","text":"<ul> <li>Wilder, J. Welles Jr. \"New Concepts in Technical Trading Systems\" (1978) - Original ADX publication and Directional Movement System</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999) - Comprehensive ADX interpretation and application</li> <li>Kaufman, Perry J. \"Trading Systems and Methods\" (2013) - Statistical analysis of ADX performance</li> <li>TradingView: ADX Educational Guide</li> <li>StockCharts: ADX Technical Analysis</li> </ul>"},{"location":"indicators/momentum/adx/#see-also","title":"See Also","text":"<ul> <li>Momentum Indicators Overview</li> <li>ADXR - Smoothed ADX</li> <li>+DI / -DI - Directional Indicators</li> <li>Basic Usage Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/momentum/adxr/","title":"Average Directional Movement Index Rating (ADXR)","text":"<p>The Average Directional Movement Index Rating (ADXR) is a smoothed version of the ADX indicator that reduces volatility and provides a more stable measure of trend strength. ADXR is calculated as the average of the current ADX value and the ADX value from n periods ago (typically 14 periods), making it less susceptible to short-term fluctuations while maintaining the core trend strength analysis capabilities.</p>"},{"location":"indicators/momentum/adxr/#formula","title":"Formula","text":"<p>ADXR is calculated by averaging two ADX values:</p> <pre><code>ADXR = (Current ADX + ADX from n periods ago) / 2\n</code></pre> <p>Where: 1. Current ADX is calculated using the standard ADX formula 2. Historical ADX is the ADX value from n periods ago (default: 14) 3. The result is the simple average of these two values</p>"},{"location":"indicators/momentum/adxr/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of close prices <code>period</code> Integer No 14 Number of periods for both ADX calculation and lookback"},{"location":"indicators/momentum/adxr/#returns","title":"Returns","text":"<p>Returns an array of ADXR values ranging from 0 to 100. Values will be <code>nil</code> until sufficient data is available (requires 2 \u00d7 period data points).</p>"},{"location":"indicators/momentum/adxr/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80,\n         50.00, 50.20, 50.30, 50.50, 50.70, 50.80, 50.90, 51.00, 51.10, 51.20, 51.30, 51.40, 51.50]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10,\n         49.20, 49.30, 49.40, 49.50, 49.60, 49.70, 49.80, 49.90, 50.00, 50.10, 50.20, 50.30, 50.40]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32, 49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45,\n         49.60, 49.80, 50.00, 50.20, 50.40, 50.60, 50.70, 50.90, 51.00, 51.10, 51.20, 51.30, 51.40]\n\nadxr = SQA::TAI.adxr(high, low, close, period: 14)\n\nputs \"Current ADXR: #{adxr.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/adxr/#interpretation","title":"Interpretation","text":"<p>ADXR uses the same interpretation thresholds as ADX but provides smoother, more stable readings:</p> ADXR Value Trend Strength Interpretation 0-20 Weak/No trend Range-bound market, avoid trend strategies 20-25 Developing trend Trend beginning to form, watch closely 25-50 Strong trend Good conditions for trend-following 50-75 Very strong trend Excellent trending environment 75-100 Extremely strong trend Rare but powerful directional movement <p>Key Point: Like ADX, ADXR measures trend STRENGTH, not direction. Use with directional indicators (+DI, -DI) to determine trend direction.</p>"},{"location":"indicators/momentum/adxr/#adxr-vs-adx-key-differences","title":"ADXR vs ADX: Key Differences","text":""},{"location":"indicators/momentum/adxr/#1-smoothness","title":"1. Smoothness","text":"<ul> <li>ADX: More responsive but noisier, reacts quickly to changes</li> <li>ADXR: Smoother signal, filters out short-term fluctuations</li> <li>Use Case: Use ADXR when you want to avoid whipsaws in volatile markets</li> </ul>"},{"location":"indicators/momentum/adxr/#2-signal-timing","title":"2. Signal Timing","text":"<ul> <li>ADX: Earlier signals, faster response to trend changes</li> <li>ADXR: Delayed signals, confirmation comes later</li> <li>Use Case: Use ADX for early entry, ADXR for confirmation</li> </ul>"},{"location":"indicators/momentum/adxr/#3-stability","title":"3. Stability","text":"<ul> <li>ADX: Can fluctuate significantly day-to-day</li> <li>ADXR: More stable readings, easier to interpret trends</li> <li>Use Case: ADXR better for longer-term trend analysis</li> </ul>"},{"location":"indicators/momentum/adxr/#4-false-signals","title":"4. False Signals","text":"<ul> <li>ADX: More prone to false signals in choppy markets</li> <li>ADXR: Fewer false signals but may miss quick reversals</li> <li>Use Case: ADXR preferred in consolidating markets</li> </ul>"},{"location":"indicators/momentum/adxr/#example-adxr-vs-adx-comparison","title":"Example: ADXR vs ADX Comparison","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\n\nadx = SQA::TAI.adx(high, low, close, period: 14)\nadxr = SQA::TAI.adxr(high, low, close, period: 14)\n\ncurrent_adx = adx.last\ncurrent_adxr = adxr.last\n\nputs \"ADX:  #{current_adx.round(2)}\"\nputs \"ADXR: #{current_adxr.round(2)}\"\n\n# ADXR lags ADX - difference shows momentum\ndifference = current_adx - current_adxr\n\nif current_adx &gt; 25\n  if difference &gt; 5\n    puts \"ADX rising faster than ADXR - Trend accelerating\"\n  elsif difference &lt; -5\n    puts \"ADX falling faster than ADXR - Trend weakening\"\n  else\n    puts \"ADX and ADXR aligned - Stable trend\"\n  end\nelsif current_adxr &gt; 25 &amp;&amp; current_adx &lt; 25\n  puts \"Trend losing strength - ADXR still high but ADX declining\"\nelsif current_adx &gt; 25 &amp;&amp; current_adxr &lt; 25\n  puts \"New trend developing - ADX rising but ADXR catching up\"\nend\n</code></pre>"},{"location":"indicators/momentum/adxr/#example-adxr-trend-strength-filter","title":"Example: ADXR Trend Strength Filter","text":"<pre><code>high, low, close = load_historical_ohlc('SPY')\n\nadxr = SQA::TAI.adxr(high, low, close, period: 14)\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\ncurrent_adxr = adxr.last\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\n\n# ADXR as trend filter - more reliable than ADX alone\nif current_adxr &gt; 25\n  if current_plus &gt; current_minus\n    spread = current_plus - current_minus\n    puts \"CONFIRMED UPTREND\"\n    puts \"ADXR: #{current_adxr.round(2)}, +DI: #{current_plus.round(2)}, -DI: #{current_minus.round(2)}\"\n    puts \"Directional spread: #{spread.round(2)}\"\n    puts \"Strategy: Buy pullbacks, hold positions\"\n  else\n    spread = current_minus - current_plus\n    puts \"CONFIRMED DOWNTREND\"\n    puts \"ADXR: #{current_adxr.round(2)}, +DI: #{current_plus.round(2)}, -DI: #{current_minus.round(2)}\"\n    puts \"Directional spread: #{spread.round(2)}\"\n    puts \"Strategy: Sell rallies, maintain shorts\"\n  end\nelse\n  puts \"NO CONFIRMED TREND (ADXR: #{current_adxr.round(2)})\"\n  puts \"Strategy: Range trading, avoid trend-following\"\nend\n</code></pre>"},{"location":"indicators/momentum/adxr/#example-adxr-trend-persistence","title":"Example: ADXR Trend Persistence","text":"<pre><code>high, low, close = load_historical_ohlc('TSLA')\n\nadxr = SQA::TAI.adxr(high, low, close, period: 14)\n\ncurrent_adxr = adxr.last\nadxr_10_bars_ago = adxr[-10]\nadxr_20_bars_ago = adxr[-20]\n\n# Check if ADXR has remained elevated\nif current_adxr &gt; 25 &amp;&amp; adxr_10_bars_ago &gt; 25 &amp;&amp; adxr_20_bars_ago &gt; 25\n  puts \"SUSTAINED STRONG TREND\"\n  puts \"ADXR has remained above 25 for extended period\"\n  puts \"20 bars ago: #{adxr_20_bars_ago.round(2)}\"\n  puts \"10 bars ago: #{adxr_10_bars_ago.round(2)}\"\n  puts \"Current: #{current_adxr.round(2)}\"\n\n  # Analyze trend evolution\n  if current_adxr &gt; adxr_10_bars_ago &amp;&amp; adxr_10_bars_ago &gt; adxr_20_bars_ago\n    puts \"Trend STRENGTHENING over time\"\n  elsif current_adxr &lt; adxr_10_bars_ago &amp;&amp; adxr_10_bars_ago &lt; adxr_20_bars_ago\n    puts \"Trend WEAKENING but still strong\"\n  else\n    puts \"Trend strength FLUCTUATING but sustained\"\n  end\nelsif current_adxr &gt; 25 &amp;&amp; (adxr_10_bars_ago &lt; 25 || adxr_20_bars_ago &lt; 25)\n  puts \"NEW TREND EMERGING\"\n  puts \"ADXR recently crossed above 25\"\n  puts \"Monitor for trend confirmation\"\nend\n</code></pre>"},{"location":"indicators/momentum/adxr/#example-adxr-with-multiple-timeframes","title":"Example: ADXR with Multiple Timeframes","text":"<pre><code># Daily and weekly data\ndaily_high, daily_low, daily_close = load_historical_ohlc('MSFT', timeframe: 'daily')\nweekly_high, weekly_low, weekly_close = load_historical_ohlc('MSFT', timeframe: 'weekly')\n\ndaily_adxr = SQA::TAI.adxr(daily_high, daily_low, daily_close, period: 14)\nweekly_adxr = SQA::TAI.adxr(weekly_high, weekly_low, weekly_close, period: 14)\n\nputs \"Daily ADXR: #{daily_adxr.last.round(2)}\"\nputs \"Weekly ADXR: #{weekly_adxr.last.round(2)}\"\n\n# Strongest trends when both timeframes show strength\nif daily_adxr.last &gt; 25 &amp;&amp; weekly_adxr.last &gt; 25\n  puts \"STRONG MULTI-TIMEFRAME TREND\"\n  puts \"Both daily and weekly show trending conditions\"\n  puts \"High probability trend-following opportunities\"\nelsif daily_adxr.last &gt; 25 &amp;&amp; weekly_adxr.last &lt; 25\n  puts \"SHORT-TERM TREND in longer-term range\"\n  puts \"Use caution - may be counter-trend move\"\nelsif daily_adxr.last &lt; 25 &amp;&amp; weekly_adxr.last &gt; 25\n  puts \"CONSOLIDATION within larger trend\"\n  puts \"Potential opportunity for trend continuation entries\"\nelse\n  puts \"NO CLEAR TREND on either timeframe\"\n  puts \"Range-bound conditions\"\nend\n</code></pre>"},{"location":"indicators/momentum/adxr/#example-adxr-divergence-analysis","title":"Example: ADXR Divergence Analysis","text":"<pre><code>high, low, close = load_historical_ohlc('NVDA')\n\nadxr = SQA::TAI.adxr(high, low, close, period: 14)\nprices = close\n\n# Find recent highs in price and ADXR\nprice_high_recent = prices.last(20).max\nprice_high_previous = prices[-40..-21].max\n\nadxr_at_recent_high = adxr[prices.rindex(price_high_recent)]\nadxr_at_previous_high = adxr[prices[-40..-21].index(price_high_previous) - 40]\n\n# Bearish divergence: price makes higher high, ADXR makes lower high\nif price_high_recent &gt; price_high_previous &amp;&amp;\n   adxr_at_recent_high &lt; adxr_at_previous_high &amp;&amp;\n   adxr_at_previous_high &gt; 25\n  puts \"BEARISH DIVERGENCE DETECTED\"\n  puts \"Price higher high: #{price_high_previous.round(2)} -&gt; #{price_high_recent.round(2)}\"\n  puts \"ADXR lower high: #{adxr_at_previous_high.round(2)} -&gt; #{adxr_at_recent_high.round(2)}\"\n  puts \"Trend strength weakening despite price gains\"\n  puts \"Warning: Potential trend exhaustion\"\nend\n\n# Bullish divergence: price makes lower low, ADXR rising\nprice_low_recent = prices.last(20).min\nprice_low_previous = prices[-40..-21].min\n\nadxr_at_recent_low = adxr[prices.rindex(price_low_recent)]\nadxr_at_previous_low = adxr[prices[-40..-21].index(price_low_previous) - 40]\n\nif price_low_recent &lt; price_low_previous &amp;&amp;\n   adxr_at_recent_low &gt; adxr_at_previous_low\n  puts \"BULLISH DIVERGENCE DETECTED\"\n  puts \"Price lower low: #{price_low_previous.round(2)} -&gt; #{price_low_recent.round(2)}\"\n  puts \"ADXR higher low: #{adxr_at_previous_low.round(2)} -&gt; #{adxr_at_recent_low.round(2)}\"\n  puts \"Trend strength building despite price decline\"\n  puts \"Potential trend reversal developing\"\nend\n</code></pre>"},{"location":"indicators/momentum/adxr/#common-settings","title":"Common Settings","text":"Period ADX Responsiveness ADXR Smoothness Use Case 7 Very responsive Moderately smooth Short-term trading 14 Standard (Wilder's) Good balance Most trading styles 21 Less responsive Very smooth Swing trading 28 Slow Extremely smooth Position trading"},{"location":"indicators/momentum/adxr/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/adxr/#1-adxr-as-confirmation-filter","title":"1. ADXR as Confirmation Filter","text":"<ul> <li>Enter trend trades only when ADXR &gt; 25</li> <li>Reduces false breakouts in ranging markets</li> <li>More reliable than ADX alone due to smoothing</li> </ul>"},{"location":"indicators/momentum/adxr/#2-adxr-crossover-with-adx","title":"2. ADXR Crossover with ADX","text":"<ul> <li>When ADX crosses above ADXR: Trend accelerating</li> <li>When ADX crosses below ADXR: Trend decelerating</li> <li>Use with directional indicators for entry/exit</li> </ul>"},{"location":"indicators/momentum/adxr/#3-adxr-threshold-strategy","title":"3. ADXR Threshold Strategy","text":"<pre><code># Only trade when ADXR confirms sustained trend\nif adxr.last &gt; 25 &amp;&amp; adxr[-5] &gt; 25\n  # Trend confirmed for multiple periods\n  # Execute trend-following strategy\nend\n</code></pre>"},{"location":"indicators/momentum/adxr/#4-adxr-range-exit","title":"4. ADXR Range Exit","text":"<pre><code># Exit trend positions when ADXR falls below threshold\nif adxr.last &lt; 20 &amp;&amp; position_open\n  puts \"ADXR dropping below 20 - trend weakening\"\n  puts \"Consider exiting trend-following positions\"\nend\n</code></pre>"},{"location":"indicators/momentum/adxr/#advantages-of-adxr-over-adx","title":"Advantages of ADXR over ADX","text":"<ol> <li>Reduced Whipsaws: Smoothing reduces false signals in volatile markets</li> <li>Better Confirmation: Requires sustained trend strength before signaling</li> <li>Stable Readings: Easier to interpret and act upon</li> <li>Less Noise: Filters out short-term market fluctuations</li> <li>Trend Persistence: Better for identifying lasting trends vs temporary moves</li> </ol>"},{"location":"indicators/momentum/adxr/#disadvantages-of-adxr-vs-adx","title":"Disadvantages of ADXR vs ADX","text":"<ol> <li>Delayed Signals: Slower to react to trend changes</li> <li>Missed Opportunities: May miss quick reversals or short-term trends</li> <li>Late Exits: Trend may weaken significantly before ADXR reflects it</li> <li>Less Sensitive: Not ideal for short-term or day trading</li> <li>Requires More Data: Needs double the periods for calculation</li> </ol>"},{"location":"indicators/momentum/adxr/#when-to-use-adxr-vs-adx","title":"When to Use ADXR vs ADX","text":"<p>Use ADXR when: - Trading longer timeframes (4H, daily, weekly) - Market is choppy and ADX gives false signals - You want confirmation of sustained trends - You prefer fewer but higher-quality signals - Building position trading strategies</p> <p>Use ADX when: - Day trading or short-term trading - Need early trend detection - Market is clean and trending well - Quick reaction time is essential - Scalping or rapid position changes</p> <p>Use Both when: - You want both early detection (ADX) and confirmation (ADXR) - Creating multi-indicator strategies - ADX-ADXR crossovers provide additional signals - Analyzing trend acceleration/deceleration</p>"},{"location":"indicators/momentum/adxr/#related-indicators","title":"Related Indicators","text":"<ul> <li>ADX - Parent indicator, more responsive version</li> <li>PLUS_DI - Positive Directional Indicator (shows uptrend strength)</li> <li>MINUS_DI - Negative Directional Indicator (shows downtrend strength)</li> <li>DX - Directional Movement Index (base calculation for ADX/ADXR)</li> <li>ATR - Average True Range (related volatility measure)</li> </ul>"},{"location":"indicators/momentum/adxr/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> <li>Basic Usage</li> </ul> <ul> <li>Trend Trading Example</li> </ul>"},{"location":"indicators/momentum/apo/","title":"Absolute Price Oscillator (APO)","text":"<p>The Absolute Price Oscillator (APO) measures the absolute difference between two moving averages of different periods. Unlike its percentage-based cousin (PPO), APO shows the actual point difference, making it particularly useful for comparing price momentum in dollar terms.</p>"},{"location":"indicators/momentum/apo/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02, 46.55, 47.03,\n          47.35, 47.28, 47.61, 48.12, 48.34, 48.21]\n\n# Calculate APO with default settings (12, 26)\napo = SQA::TAI.apo(prices)\n\nputs \"Current APO: #{apo.last.round(4)}\"\n</code></pre>"},{"location":"indicators/momentum/apo/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>fast_period</code> Integer No 12 Fast moving average period <code>slow_period</code> Integer No 26 Slow moving average period <code>ma_type</code> Integer No 0 Moving average type (0=SMA, 1=EMA, etc.)"},{"location":"indicators/momentum/apo/#returns","title":"Returns","text":"<p>Returns an array of APO values (unbounded, can be positive or negative). The first <code>slow_period - 1</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/apo/#formula","title":"Formula","text":"<pre><code>APO = Fast MA - Slow MA\n\nWhere:\n- Fast MA = Moving Average with fast_period\n- Slow MA = Moving Average with slow_period\n</code></pre>"},{"location":"indicators/momentum/apo/#interpretation","title":"Interpretation","text":"APO Value Interpretation Positive Fast MA &gt; Slow MA (bullish momentum) Negative Fast MA &lt; Slow MA (bearish momentum) Zero crossing up Potential trend change to bullish Zero crossing down Potential trend change to bearish Increasing Momentum strengthening Decreasing Momentum weakening"},{"location":"indicators/momentum/apo/#apo-vs-ppo","title":"APO vs PPO","text":"<p>The key difference between APO and PPO:</p> <ul> <li>APO: Absolute difference (Fast MA - Slow MA)</li> <li>PPO: Percentage difference ((Fast MA - Slow MA) / Slow MA \u00d7 100)</li> </ul> <p>When to use APO: - Comparing momentum across the same asset over time - Absolute price movement matters more than percentage - Working with lower-priced securities</p> <p>When to use PPO: - Comparing momentum across different assets - Different price levels (e.g., $10 stock vs $1000 stock) - Percentage moves are more relevant</p>"},{"location":"indicators/momentum/apo/#example-basic-apo-signals","title":"Example: Basic APO Signals","text":"<pre><code>prices = load_historical_prices('AAPL')\n\napo = SQA::TAI.apo(prices, fast_period: 12, slow_period: 26)\ncurrent_apo = apo.last\nprevious_apo = apo[-2]\n\n# Zero line crossovers\nif previous_apo &lt; 0 &amp;&amp; current_apo &gt; 0\n  puts \"APO crossed above zero - Bullish signal\"\n  puts \"Fast MA crossed above Slow MA\"\nelsif previous_apo &gt; 0 &amp;&amp; current_apo &lt; 0\n  puts \"APO crossed below zero - Bearish signal\"\n  puts \"Fast MA crossed below Slow MA\"\nend\n\n# Current momentum\nif current_apo &gt; 0\n  puts \"APO: #{current_apo.round(4)} - Bullish momentum\"\n  puts \"Fast MA is #{current_apo.round(2)} points above Slow MA\"\nelse\n  puts \"APO: #{current_apo.round(4)} - Bearish momentum\"\n  puts \"Fast MA is #{current_apo.abs.round(2)} points below Slow MA\"\nend\n</code></pre>"},{"location":"indicators/momentum/apo/#example-apo-trend-analysis","title":"Example: APO Trend Analysis","text":"<pre><code>prices = load_historical_prices('TSLA')\n\napo = SQA::TAI.apo(prices, fast_period: 12, slow_period: 26)\n\n# Analyze recent trend\nrecent_apo = apo.compact.last(5)\n\nif recent_apo.all? { |v| v &gt; 0 }\n  puts \"Consistent bullish momentum\"\n  puts \"APO values: #{recent_apo.map { |v| v.round(4) }}\"\n\n  if recent_apo[-1] &gt; recent_apo[-2]\n    puts \"Momentum accelerating (APO rising)\"\n  else\n    puts \"Momentum decelerating (APO falling)\"\n  end\nelsif recent_apo.all? { |v| v &lt; 0 }\n  puts \"Consistent bearish momentum\"\n  puts \"APO values: #{recent_apo.map { |v| v.round(4) }}\"\n\n  if recent_apo[-1] &lt; recent_apo[-2]\n    puts \"Bearish momentum accelerating (APO falling)\"\n  else\n    puts \"Bearish momentum decelerating (APO rising)\"\n  end\nelse\n  puts \"Mixed signals - momentum transitioning\"\n  puts \"APO values: #{recent_apo.map { |v| v.round(4) }}\"\nend\n</code></pre>"},{"location":"indicators/momentum/apo/#example-apo-divergence-detection","title":"Example: APO Divergence Detection","text":"<pre><code>prices = load_historical_prices('MSFT')\n\napo = SQA::TAI.apo(prices, fast_period: 12, slow_period: 26)\n\n# Find recent price highs\nprice_high_1_idx = -30 + prices[-30..-15].index(prices[-30..-15].max)\nprice_high_2_idx = -14 + prices[-14..-1].index(prices[-14..-1].max)\n\nprice_high_1 = prices[price_high_1_idx]\nprice_high_2 = prices[price_high_2_idx]\n\napo_high_1 = apo[price_high_1_idx]\napo_high_2 = apo[price_high_2_idx]\n\n# Bearish divergence: price makes higher high, APO makes lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; apo_high_2 &lt; apo_high_1\n  puts \"Bearish Divergence detected!\"\n  puts \"Price: $#{price_high_1.round(2)} -&gt; $#{price_high_2.round(2)} (higher high)\"\n  puts \"APO: #{apo_high_1.round(4)} -&gt; #{apo_high_2.round(4)} (lower high)\"\n  puts \"Momentum weakening despite higher prices - potential reversal\"\nend\n\n# Find recent price lows\nprice_low_1_idx = -30 + prices[-30..-15].index(prices[-30..-15].min)\nprice_low_2_idx = -14 + prices[-14..-1].index(prices[-14..-1].min)\n\nprice_low_1 = prices[price_low_1_idx]\nprice_low_2 = prices[price_low_2_idx]\n\napo_low_1 = apo[price_low_1_idx]\napo_low_2 = apo[price_low_2_idx]\n\n# Bullish divergence: price makes lower low, APO makes higher low\nif price_low_2 &lt; price_low_1 &amp;&amp; apo_low_2 &gt; apo_low_1\n  puts \"Bullish Divergence detected!\"\n  puts \"Price: $#{price_low_1.round(2)} -&gt; $#{price_low_2.round(2)} (lower low)\"\n  puts \"APO: #{apo_low_1.round(4)} -&gt; #{apo_low_2.round(4)} (higher low)\"\n  puts \"Momentum improving despite lower prices - potential reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/apo/#example-apo-histogram-analysis","title":"Example: APO Histogram Analysis","text":"<pre><code>prices = load_historical_prices('NVDA')\n\n# Calculate APO with different periods\napo_fast = SQA::TAI.apo(prices, fast_period: 5, slow_period: 13)\napo_standard = SQA::TAI.apo(prices, fast_period: 12, slow_period: 26)\napo_slow = SQA::TAI.apo(prices, fast_period: 19, slow_period: 39)\n\nputs \"Fast APO (5,13): #{apo_fast.last.round(4)}\"\nputs \"Standard APO (12,26): #{apo_standard.last.round(4)}\"\nputs \"Slow APO (19,39): #{apo_slow.last.round(4)}\"\n\n# When all three agree, signal is stronger\nif apo_fast.last &gt; 0 &amp;&amp; apo_standard.last &gt; 0 &amp;&amp; apo_slow.last &gt; 0\n  puts \"\\nAll timeframes bullish - strong upward momentum\"\nelsif apo_fast.last &lt; 0 &amp;&amp; apo_standard.last &lt; 0 &amp;&amp; apo_slow.last &lt; 0\n  puts \"\\nAll timeframes bearish - strong downward momentum\"\nelse\n  puts \"\\nMixed signals across timeframes - transitional period\"\nend\n</code></pre>"},{"location":"indicators/momentum/apo/#example-apo-with-absolute-value-comparison","title":"Example: APO with Absolute Value Comparison","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\napo = SQA::TAI.apo(prices, fast_period: 12, slow_period: 26)\n\n# Analyze absolute magnitude of momentum\nrecent_apo = apo.compact.last(20)\navg_apo_magnitude = recent_apo.map(&amp;:abs).sum / recent_apo.length\ncurrent_magnitude = apo.last.abs\n\nputs \"Average APO magnitude (20 periods): #{avg_apo_magnitude.round(4)}\"\nputs \"Current APO magnitude: #{current_magnitude.round(4)}\"\n\nif current_magnitude &gt; avg_apo_magnitude * 1.5\n  puts \"Unusually strong momentum (#{(current_magnitude / avg_apo_magnitude * 100).round(0)}% of average)\"\n  puts \"Direction: #{apo.last &gt; 0 ? 'Bullish' : 'Bearish'}\"\nelsif current_magnitude &lt; avg_apo_magnitude * 0.5\n  puts \"Weak momentum (#{(current_magnitude / avg_apo_magnitude * 100).round(0)}% of average)\"\n  puts \"Market may be consolidating\"\nend\n</code></pre>"},{"location":"indicators/momentum/apo/#example-apo-crossover-with-confirmation","title":"Example: APO Crossover with Confirmation","text":"<pre><code>prices = load_historical_prices('AMZN')\n\napo = SQA::TAI.apo(prices, fast_period: 12, slow_period: 26)\n\n# Look for crossover with momentum confirmation\nif apo[-3] &lt; 0 &amp;&amp; apo[-2] &lt; 0 &amp;&amp; apo[-1] &gt; 0\n  puts \"APO zero line crossover - Bullish signal\"\n  puts \"APO moved from #{apo[-2].round(4)} to #{apo[-1].round(4)}\"\n\n  # Check if momentum is accelerating\n  if apo[-1] &gt; apo[-2] + (apo[-2] - apo[-3])\n    puts \"Accelerating bullish momentum - Strong buy signal\"\n  else\n    puts \"Standard bullish crossover - Moderate buy signal\"\n  end\nelsif apo[-3] &gt; 0 &amp;&amp; apo[-2] &gt; 0 &amp;&amp; apo[-1] &lt; 0\n  puts \"APO zero line crossover - Bearish signal\"\n  puts \"APO moved from #{apo[-2].round(4)} to #{apo[-1].round(4)}\"\n\n  # Check if momentum is accelerating\n  if apo[-1] &lt; apo[-2] - (apo[-3] - apo[-2])\n    puts \"Accelerating bearish momentum - Strong sell signal\"\n  else\n    puts \"Standard bearish crossover - Moderate sell signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/apo/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/apo/#1-zero-line-crossover","title":"1. Zero Line Crossover","text":"<ul> <li>Buy: APO crosses above zero (Fast MA &gt; Slow MA)</li> <li>Sell: APO crosses below zero (Fast MA &lt; Slow MA)</li> <li>Simple and clear trend identification</li> </ul>"},{"location":"indicators/momentum/apo/#2-absolute-momentum-strength","title":"2. Absolute Momentum Strength","text":"<ul> <li>Compare current APO magnitude to historical average</li> <li>Larger absolute values indicate stronger trends</li> <li>Useful for position sizing</li> </ul>"},{"location":"indicators/momentum/apo/#3-apo-divergence","title":"3. APO Divergence","text":"<ul> <li>Bullish: Price lower low, APO higher low</li> <li>Bearish: Price higher high, APO lower high</li> <li>Signals potential trend reversals</li> </ul>"},{"location":"indicators/momentum/apo/#4-multi-timeframe-apo","title":"4. Multi-Timeframe APO","text":"<ul> <li>Use different period combinations</li> <li>Confirm signals when all timeframes align</li> <li>Filter false signals</li> </ul>"},{"location":"indicators/momentum/apo/#apo-settings","title":"APO Settings","text":""},{"location":"indicators/momentum/apo/#standard-settings-12-26","title":"Standard Settings (12, 26)","text":"<ul> <li>Default and most widely used</li> <li>Based on traditional MACD parameters</li> <li>Good for daily charts</li> </ul>"},{"location":"indicators/momentum/apo/#fast-settings-5-13","title":"Fast Settings (5, 13)","text":"<ul> <li>More responsive to price changes</li> <li>More frequent signals</li> <li>Good for short-term trading</li> <li>More false signals</li> </ul>"},{"location":"indicators/momentum/apo/#slow-settings-19-39","title":"Slow Settings (19, 39)","text":"<ul> <li>Less sensitive to noise</li> <li>Fewer but more reliable signals</li> <li>Good for long-term trend following</li> </ul>"},{"location":"indicators/momentum/apo/#custom-settings","title":"Custom Settings","text":"<p>Choose periods based on: - Your trading timeframe - Asset volatility - Market conditions</p>"},{"location":"indicators/momentum/apo/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<pre><code>prices = load_historical_prices('SPY')\n\n# APO for absolute momentum\napo = SQA::TAI.apo(prices, fast_period: 12, slow_period: 26)\n\n# PPO for percentage momentum (comparison)\nppo = SQA::TAI.ppo(prices, fast_period: 12, slow_period: 26)\n\n# Volume confirmation\nvolumes = load_historical_volumes('SPY')\nobv = SQA::TAI.obv(prices, volumes)\n\ncurrent_price = prices.last\n\nputs \"APO: #{apo.last.round(4)} (absolute difference)\"\nputs \"PPO: #{ppo.last.round(4)}% (percentage difference)\"\n\n# Strong signal when both agree and volume confirms\nif apo.last &gt; 0 &amp;&amp; ppo.last &gt; 0 &amp;&amp; obv[-1] &gt; obv[-5]\n  puts \"Strong bullish signal:\"\n  puts \"- Positive absolute momentum (APO &gt; 0)\"\n  puts \"- Positive percentage momentum (PPO &gt; 0)\"\n  puts \"- Rising volume indicator (OBV)\"\n  puts \"High conviction buy opportunity\"\nend\n</code></pre>"},{"location":"indicators/momentum/apo/#advantages-and-limitations","title":"Advantages and Limitations","text":""},{"location":"indicators/momentum/apo/#advantages","title":"Advantages","text":"<ul> <li>Shows actual point difference between MAs</li> <li>Easy to interpret for single asset analysis</li> <li>Useful for volatility-based position sizing</li> <li>Clear zero-line crossover signals</li> </ul>"},{"location":"indicators/momentum/apo/#limitations","title":"Limitations","text":"<ul> <li>Not suitable for comparing different assets</li> <li>Scale depends on price level of asset</li> <li>Requires confirmation from other indicators</li> <li>Can give false signals in ranging markets</li> </ul>"},{"location":"indicators/momentum/apo/#related-indicators","title":"Related Indicators","text":"<ul> <li>PPO - Percentage Price Oscillator (percentage-based version)</li> <li>MACD - Similar concept with signal line</li> <li>EMA - Used in APO calculation</li> <li>SMA - Alternative MA type for APO</li> </ul>"},{"location":"indicators/momentum/apo/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/aroon/","title":"Aroon Indicator (AROON)","text":"<p>The Aroon Indicator is a technical analysis tool that identifies trend changes, measures trend strength, and detects consolidation periods by calculating the time elapsed since the highest high and lowest low within a given period. Developed by Tushar Chande in 1995, the name \"Aroon\" is derived from the Sanskrit word meaning \"dawn's early light,\" reflecting its purpose of signaling the beginning of new trends.</p> <p>The indicator consists of two lines: - Aroon Up: Measures time since the period's highest high (indicates uptrend strength) - Aroon Down: Measures time since the period's lowest low (indicates downtrend strength)</p> <p>Both values oscillate between 0 and 100, providing clear signals about trend direction and strength.</p>"},{"location":"indicators/momentum/aroon/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhighs = [82.15, 81.89, 83.03, 83.30, 83.85,\n         83.90, 83.33, 84.30, 84.84, 85.00,\n         85.90, 86.58, 86.98, 88.00, 87.87]\n\nlows = [81.29, 80.64, 81.31, 82.65, 83.07,\n        83.11, 82.49, 82.30, 84.15, 84.50,\n        85.39, 85.76, 85.87, 87.17, 87.01]\n\n# Calculate 14-period Aroon (default)\naroon_down, aroon_up = SQA::TAI.aroon(highs, lows, period: 14)\n\nputs \"Aroon Up: #{aroon_up.last.round(2)}\"\nputs \"Aroon Down: #{aroon_down.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/aroon/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high price values <code>low</code> Array Yes - Array of low price values <code>period</code> Integer No 25 Lookback period for calculation"},{"location":"indicators/momentum/aroon/#returns","title":"Returns","text":"<p>Returns a two-element array: <code>[aroon_down, aroon_up]</code></p> <p>Each element is an array of values ranging from 0 to 100: - Aroon Up: 100 means new high just occurred, 0 means no high in entire period - Aroon Down: 100 means new low just occurred, 0 means no low in entire period</p> <p>The first <code>period - 1</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/aroon/#calculation","title":"Calculation","text":"<pre><code>Aroon Up = ((Period - Periods Since Period High) / Period) \u00d7 100\nAroon Down = ((Period - Periods Since Period Low) / Period) \u00d7 100\n</code></pre> <p>For a 25-period Aroon: - If highest high occurred 3 periods ago: Aroon Up = ((25 - 3) / 25) \u00d7 100 = 88% - If lowest low occurred 20 periods ago: Aroon Down = ((25 - 20) / 25) \u00d7 100 = 20%</p>"},{"location":"indicators/momentum/aroon/#interpretation","title":"Interpretation","text":"Condition Aroon Up Aroon Down Interpretation Strong Uptrend 70-100 0-30 Recent highs, strong buying pressure Strong Downtrend 0-30 70-100 Recent lows, strong selling pressure Consolidation 0-50 0-50 No clear direction, sideways movement Bullish Crossover Crosses above Crosses below Aroon Up crosses above Aroon Down - uptrend emerging Bearish Crossover Crosses below Crosses above Aroon Down crosses above Aroon Up - downtrend emerging Parallel Movement Both high - Strong trending market (direction depends on which is higher) Parallel Low Both low - Consolidation, potential breakout coming"},{"location":"indicators/momentum/aroon/#trend-strength-indicators","title":"Trend Strength Indicators","text":"<ul> <li>Aroon Up near 100: Stock is making new highs regularly - strong uptrend</li> <li>Aroon Down near 100: Stock is making new lows regularly - strong downtrend</li> <li>Both Aroon lines above 70: High volatility, strong trend (whichever is higher)</li> <li>Both Aroon lines below 30: Weak trend, consolidation phase</li> <li>Aroon Up = 100, Aroon Down = 0: Perfect uptrend condition</li> <li>Aroon Down = 100, Aroon Up = 0: Perfect downtrend condition</li> </ul>"},{"location":"indicators/momentum/aroon/#example-basic-aroon-trend-identification","title":"Example: Basic Aroon Trend Identification","text":"<pre><code>highs = load_historical_highs('AAPL')\nlows = load_historical_lows('AAPL')\n\naroon_down, aroon_up = SQA::TAI.aroon(highs, lows, period: 25)\n\ncurrent_up = aroon_up.last\ncurrent_down = aroon_down.last\n\nputs &lt;&lt;~ANALYSIS\n  Aroon Indicator Analysis\n  ========================\n  Aroon Up: #{current_up.round(2)}\n  Aroon Down: #{current_down.round(2)}\n\n  Trend Assessment:\nANALYSIS\n\nif current_up &gt; 70 &amp;&amp; current_down &lt; 30\n  puts \"Strong UPTREND - Aroon Up dominant\"\nelsif current_down &gt; 70 &amp;&amp; current_up &lt; 30\n  puts \"Strong DOWNTREND - Aroon Down dominant\"\nelsif current_up &lt; 50 &amp;&amp; current_down &lt; 50\n  puts \"CONSOLIDATION - Both indicators weak\"\nelsif (current_up - current_down).abs &lt; 20\n  puts \"TRANSITIONAL - No clear trend established\"\nelse\n  puts \"MODERATE TREND - Monitor for strengthening/weakening\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroon/#example-aroon-crossover-strategy","title":"Example: Aroon Crossover Strategy","text":"<pre><code>highs = load_historical_highs('TSLA')\nlows = load_historical_lows('TSLA')\n\naroon_down, aroon_up = SQA::TAI.aroon(highs, lows, period: 25)\n\n# Detect crossovers\nsignals = []\n\naroon_up.each_with_index do |up, i|\n  next if i &lt; 1 || up.nil?\n\n  prev_up = aroon_up[i - 1]\n  down = aroon_down[i]\n  prev_down = aroon_down[i - 1]\n\n  next if prev_up.nil? || down.nil? || prev_down.nil?\n\n  # Bullish crossover: Aroon Up crosses above Aroon Down\n  if prev_up &lt; prev_down &amp;&amp; up &gt; down\n    signals &lt;&lt; {\n      index: i,\n      type: 'BUY',\n      aroon_up: up.round(2),\n      aroon_down: down.round(2),\n      strength: up - down\n    }\n  # Bearish crossover: Aroon Down crosses above Aroon Up\n  elsif prev_down &lt; prev_up &amp;&amp; down &gt; up\n    signals &lt;&lt; {\n      index: i,\n      type: 'SELL',\n      aroon_up: up.round(2),\n      aroon_down: down.round(2),\n      strength: down - up\n    }\n  end\nend\n\n# Display recent signals\nputs \"Recent Aroon Crossover Signals:\"\nsignals.last(5).each do |signal|\n  puts \"#{signal[:type]} signal at index #{signal[:index]}\"\n  puts \"  Aroon Up: #{signal[:aroon_up]}, Aroon Down: #{signal[:aroon_down]}\"\n  puts \"  Signal Strength: #{signal[:strength].round(2)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroon/#example-consolidation-breakout-detection","title":"Example: Consolidation Breakout Detection","text":"<pre><code>highs = load_historical_highs('NVDA')\nlows = load_historical_lows('NVDA')\n\naroon_down, aroon_up = SQA::TAI.aroon(highs, lows, period: 25)\n\n# Look for consolidation followed by breakout\nconsolidation_threshold = 30\nbreakout_threshold = 70\n\naroon_up.each_with_index do |up, i|\n  next if i &lt; 5 || up.nil?\n\n  down = aroon_down[i]\n  next if down.nil?\n\n  # Check if we were in consolidation for the past 3-5 periods\n  was_consolidating = (i-4..i-1).all? do |j|\n    aroon_up[j] &amp;&amp; aroon_down[j] &amp;&amp;\n    aroon_up[j] &lt; consolidation_threshold &amp;&amp;\n    aroon_down[j] &lt; consolidation_threshold\n  end\n\n  if was_consolidating\n    # Check for breakout\n    if up &gt; breakout_threshold &amp;&amp; down &lt; consolidation_threshold\n      puts \"BULLISH BREAKOUT detected at index #{i}\"\n      puts \"  Aroon moved from consolidation to strong uptrend\"\n      puts \"  Current: Up=#{up.round(2)}, Down=#{down.round(2)}\"\n    elsif down &gt; breakout_threshold &amp;&amp; up &lt; consolidation_threshold\n      puts \"BEARISH BREAKDOWN detected at index #{i}\"\n      puts \"  Aroon moved from consolidation to strong downtrend\"\n      puts \"  Current: Up=#{up.round(2)}, Down=#{down.round(2)}\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/aroon/#example-aroon-trend-strength-filter","title":"Example: Aroon Trend Strength Filter","text":"<pre><code>highs = load_historical_highs('MSFT')\nlows = load_historical_lows('MSFT')\ncloses = load_historical_closes('MSFT')\n\naroon_down, aroon_up = SQA::TAI.aroon(highs, lows, period: 25)\n\n# Calculate trend strength score\ncurrent_up = aroon_up.last\ncurrent_down = aroon_down.last\n\n# Trend strength scoring (0-100)\nif current_up &gt; current_down\n  trend_strength = current_up - current_down\n  trend_direction = \"BULLISH\"\nelse\n  trend_strength = current_down - current_up\n  trend_direction = \"BEARISH\"\nend\n\nputs &lt;&lt;~TREND_REPORT\n  Trend Strength Analysis\n  =======================\n  Direction: #{trend_direction}\n  Strength Score: #{trend_strength.round(2)}/100\n\n  Aroon Up: #{current_up.round(2)}\n  Aroon Down: #{current_down.round(2)}\n\n  Assessment:\nTREND_REPORT\n\ncase trend_strength\nwhen 80..100\n  puts \"VERY STRONG trend - High conviction trades\"\nwhen 60..79\n  puts \"STRONG trend - Favorable conditions\"\nwhen 40..59\n  puts \"MODERATE trend - Proceed with caution\"\nwhen 20..39\n  puts \"WEAK trend - Consider waiting for clarity\"\nwhen 0..19\n  puts \"NO CLEAR TREND - Avoid trend-following strategies\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroon/#example-parallel-aroon-movement-analysis","title":"Example: Parallel Aroon Movement Analysis","text":"<pre><code>highs = load_historical_highs('AMD')\nlows = load_historical_lows('AMD')\n\naroon_down, aroon_up = SQA::TAI.aroon(highs, lows, period: 25)\n\n# Analyze parallel movement patterns\naroon_up.each_with_index do |up, i|\n  next if i &lt; 3 || up.nil?\n\n  down = aroon_down[i]\n  next if down.nil?\n\n  # Check for parallel movement in last 3 periods\n  parallel_high = (i-2..i).all? { |j| aroon_up[j] &gt; 70 &amp;&amp; aroon_down[j] &gt; 70 }\n  parallel_low = (i-2..i).all? { |j| aroon_up[j] &lt; 30 &amp;&amp; aroon_down[j] &lt; 30 }\n\n  if parallel_high\n    if up &gt; down\n      puts \"STRONG UPTREND with high volatility at index #{i}\"\n      puts \"  Both Aroon lines elevated - trend is well established\"\n    else\n      puts \"STRONG DOWNTREND with high volatility at index #{i}\"\n      puts \"  Both Aroon lines elevated - trend is well established\"\n    end\n  elsif parallel_low\n    puts \"CONSOLIDATION ZONE detected at index #{i}\"\n    puts \"  Both Aroon lines weak - prepare for potential breakout\"\n    puts \"  Current: Up=#{up.round(2)}, Down=#{down.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/aroon/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/aroon/#1-multi-timeframe-aroon-analysis","title":"1. Multi-Timeframe Aroon Analysis","text":"<p>Compare Aroon readings across different timeframes (daily, weekly) to confirm trend strength and direction.</p>"},{"location":"indicators/momentum/aroon/#2-aroon-with-volume-confirmation","title":"2. Aroon with Volume Confirmation","text":"<p>Combine Aroon signals with volume analysis - strong trends should show increasing volume on breakouts.</p>"},{"location":"indicators/momentum/aroon/#3-aroon-oscillator","title":"3. Aroon Oscillator","text":"<p>Calculate <code>Aroon Up - Aroon Down</code> to create a single oscillator ranging from -100 to +100: - Positive values indicate uptrend - Negative values indicate downtrend - Zero line crossovers signal trend changes</p>"},{"location":"indicators/momentum/aroon/#4-dynamic-period-adjustment","title":"4. Dynamic Period Adjustment","text":"<p>Use shorter periods (14) for volatile markets and longer periods (50) for smoother trend identification.</p>"},{"location":"indicators/momentum/aroon/#5-aroon-extremes","title":"5. Aroon Extremes","text":"<p>Pay special attention when either line reaches 100 - indicates a very recent high/low and strong momentum.</p>"},{"location":"indicators/momentum/aroon/#example-comprehensive-aroon-trading-system","title":"Example: Comprehensive Aroon Trading System","text":"<pre><code>highs = load_historical_highs('GOOGL')\nlows = load_historical_lows('GOOGL')\ncloses = load_historical_closes('GOOGL')\n\naroon_down, aroon_up = SQA::TAI.aroon(highs, lows, period: 25)\nsma = SQA::TAI.sma(closes, period: 50)\n\ncurrent_up = aroon_up.last\ncurrent_down = aroon_down.last\ncurrent_price = closes.last\ncurrent_sma = sma.last\n\nputs &lt;&lt;~SYSTEM\n  Comprehensive Aroon Trading System\n  ==================================\n  Price: #{current_price.round(2)}\n  50-SMA: #{current_sma.round(2)}\n  Aroon Up: #{current_up.round(2)}\n  Aroon Down: #{current_down.round(2)}\n\n  Trading Decision:\nSYSTEM\n\n# Long entry conditions\nif current_price &gt; current_sma &amp;&amp; current_up &gt; 70 &amp;&amp; current_down &lt; 30\n  puts \"STRONG BUY - All conditions aligned\"\n  puts \"  - Price above 50-SMA (uptrend confirmed)\"\n  puts \"  - Aroon Up &gt; 70 (recent highs)\"\n  puts \"  - Aroon Down &lt; 30 (no recent lows)\"\n\n# Short entry conditions\nelsif current_price &lt; current_sma &amp;&amp; current_down &gt; 70 &amp;&amp; current_up &lt; 30\n  puts \"STRONG SELL - All conditions aligned\"\n  puts \"  - Price below 50-SMA (downtrend confirmed)\"\n  puts \"  - Aroon Down &gt; 70 (recent lows)\"\n  puts \"  - Aroon Up &lt; 30 (no recent highs)\"\n\n# Consolidation exit\nelsif current_up &lt; 30 &amp;&amp; current_down &lt; 30\n  puts \"EXIT positions - Consolidation detected\"\n  puts \"  - Both Aroon lines weak\"\n  puts \"  - Trend momentum fading\"\n\n# Trend reversal warning\nelsif current_up &gt; 50 &amp;&amp; current_down &gt; 50\n  puts \"CAUTION - High volatility period\"\n  puts \"  - Both Aroon lines elevated\"\n  puts \"  - Wait for clear direction\"\nelse\n  puts \"HOLD - No clear signal\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroon/#common-settings","title":"Common Settings","text":"Period Use Case Characteristics 14 Short-term trading More sensitive, frequent signals 25 Standard setting Balanced sensitivity and reliability 50 Long-term trends Smoother, fewer false signals 70 Position trading Very stable, major trends only"},{"location":"indicators/momentum/aroon/#advantages-and-limitations","title":"Advantages and Limitations","text":""},{"location":"indicators/momentum/aroon/#advantages","title":"Advantages","text":"<ul> <li>Simple to interpret (0-100 scale)</li> <li>Identifies both trend direction and strength</li> <li>Works well in trending markets</li> <li>Clear crossover signals</li> <li>Effective at detecting consolidation periods</li> </ul>"},{"location":"indicators/momentum/aroon/#limitations","title":"Limitations","text":"<ul> <li>Can generate false signals in choppy markets</li> <li>Lagging indicator - signals come after trend starts</li> <li>Less effective in ranging markets</li> <li>Requires confirmation from other indicators</li> <li>May miss the very beginning of trends</li> </ul>"},{"location":"indicators/momentum/aroon/#related-indicators","title":"Related Indicators","text":"<ul> <li>Aroon Oscillator - Single-line version of Aroon</li> <li>ADX - Trend strength measurement</li> <li>MACD - Momentum and trend direction</li> <li>RSI - Overbought/oversold conditions</li> <li>DMI - Directional movement</li> </ul>"},{"location":"indicators/momentum/aroon/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> <li>Basic Usage</li> </ul> <ul> <li>Trend Trading Strategies</li> </ul>"},{"location":"indicators/momentum/aroonosc/","title":"Aroon Oscillator (AROONOSC)","text":"<p>The Aroon Oscillator is a single-line momentum indicator that measures the difference between Aroon Up and Aroon Down. It simplifies the interpretation of the dual Aroon lines by providing a single oscillator that ranges from -100 to +100, making it easier to identify trend strength and direction.</p>"},{"location":"indicators/momentum/aroonosc/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhighs = [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35,\n         49.92, 50.19, 50.12, 49.66, 49.88, 50.19, 50.36, 50.57,\n         50.65, 50.43, 49.63, 50.33, 50.29, 50.17, 49.32, 48.50,\n         48.47, 48.55, 49.42, 49.61, 49.20, 48.94]\n\nlows = [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.10,\n        49.13, 49.87, 49.20, 48.90, 49.43, 49.73, 49.26, 50.09,\n        50.30, 49.21, 48.98, 49.61, 49.20, 49.43, 48.08, 47.64,\n        48.09, 47.73, 48.86, 49.17, 48.52, 48.52]\n\n# Calculate 25-period Aroon Oscillator\naroon_osc = SQA::TAI.aroonosc(highs, lows, period: 25)\n\nputs \"Current Aroon Oscillator: #{aroon_osc.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>period</code> Integer No 25 Lookback period for calculations"},{"location":"indicators/momentum/aroonosc/#returns","title":"Returns","text":"<p>Returns an array of Aroon Oscillator values ranging from -100 to +100. The first <code>period</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/aroonosc/#formula","title":"Formula","text":"<pre><code>Aroon Up = ((period - periods since highest high) / period) \u00d7 100\nAroon Down = ((period - periods since lowest low) / period) \u00d7 100\nAroon Oscillator = Aroon Up - Aroon Down\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#understanding-single-line-vs-dual-aroon","title":"Understanding Single-Line vs Dual Aroon","text":""},{"location":"indicators/momentum/aroonosc/#dual-aroon-lines-aroon","title":"Dual Aroon Lines (AROON)","text":"<p>The traditional Aroon indicator displays two separate lines: - Aroon Up: Measures time since the highest high (0-100) - Aroon Down: Measures time since the lowest low (0-100)</p> <p>Requires watching two lines and their relationship, making interpretation more complex.</p>"},{"location":"indicators/momentum/aroonosc/#single-line-aroon-oscillator-aroonosc","title":"Single-Line Aroon Oscillator (AROONOSC)","text":"<p>The Aroon Oscillator simplifies this by calculating the difference: - Single Line: Aroon Up minus Aroon Down (-100 to +100) - Easier Interpretation: One line crossing zero instead of two lines crossing each other - Clearer Signals: Positive values indicate uptrend, negative values indicate downtrend</p>"},{"location":"indicators/momentum/aroonosc/#when-to-use-each","title":"When to Use Each","text":"<p>Use Dual Aroon (AROON) when you want to: - See the exact strength of both upward and downward movement separately - Identify when both lines are low (consolidation) - Analyze the individual behavior of highs and lows - Get more detailed information about market structure</p> <p>Use Aroon Oscillator (AROONOSC) when you want to: - Simplify trend direction into a single metric - Focus on zero-line crossovers for clear signals - Reduce visual clutter on charts - Quick assessment of trend strength and direction</p>"},{"location":"indicators/momentum/aroonosc/#interpretation","title":"Interpretation","text":"Value Range Interpretation &gt; +50 Strong uptrend - Aroon Up dominant +20 to +50 Moderate uptrend - bullish momentum -20 to +20 No clear trend - consolidation or transition -50 to -20 Moderate downtrend - bearish momentum &lt; -50 Strong downtrend - Aroon Down dominant 0 Neutral - Aroon Up equals Aroon Down"},{"location":"indicators/momentum/aroonosc/#key-signals","title":"Key Signals","text":"<ul> <li>Zero Line Cross Above: Bullish signal (Aroon Up &gt; Aroon Down)</li> <li>Zero Line Cross Below: Bearish signal (Aroon Down &gt; Aroon Up)</li> <li>Extreme Readings: Values near \u00b1100 indicate very strong trends</li> <li>Oscillation Around Zero: Suggests ranging or choppy market</li> </ul>"},{"location":"indicators/momentum/aroonosc/#example-basic-aroon-oscillator-signals","title":"Example: Basic Aroon Oscillator Signals","text":"<pre><code>highs = load_historical_highs('AAPL')\nlows = load_historical_lows('AAPL')\n\naroon_osc = SQA::TAI.aroonosc(highs, lows, period: 25)\ncurrent_value = aroon_osc.last\n\ncase current_value\nwhen 50..100\n  puts \"Strong Uptrend (#{current_value.round(2)}) - HOLD or BUY dips\"\nwhen 20..50\n  puts \"Moderate Uptrend (#{current_value.round(2)}) - Bullish bias\"\nwhen -20..20\n  puts \"No Clear Trend (#{current_value.round(2)}) - Stay neutral\"\nwhen -50..-20\n  puts \"Moderate Downtrend (#{current_value.round(2)}) - Bearish bias\"\nwhen -100..-50\n  puts \"Strong Downtrend (#{current_value.round(2)}) - Avoid or SHORT\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#example-zero-line-crossover-strategy","title":"Example: Zero Line Crossover Strategy","text":"<pre><code>highs = load_historical_highs('TSLA')\nlows = load_historical_lows('TSLA')\n\naroon_osc = SQA::TAI.aroonosc(highs, lows, period: 25)\n\n# Check for zero line crossovers\nif aroon_osc[-2] &lt; 0 &amp;&amp; aroon_osc[-1] &gt; 0\n  puts \"Bullish Crossover - Aroon Oscillator crossed above zero\"\n  puts \"Previous: #{aroon_osc[-2].round(2)}, Current: #{aroon_osc[-1].round(2)}\"\n  puts \"SIGNAL: Potential trend change to uptrend - BUY\"\nelsif aroon_osc[-2] &gt; 0 &amp;&amp; aroon_osc[-1] &lt; 0\n  puts \"Bearish Crossover - Aroon Oscillator crossed below zero\"\n  puts \"Previous: #{aroon_osc[-2].round(2)}, Current: #{aroon_osc[-1].round(2)}\"\n  puts \"SIGNAL: Potential trend change to downtrend - SELL\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#example-extreme-reading-detection","title":"Example: Extreme Reading Detection","text":"<pre><code>highs = load_historical_highs('MSFT')\nlows = load_historical_lows('MSFT')\n\naroon_osc = SQA::TAI.aroonosc(highs, lows, period: 25)\ncurrent = aroon_osc.last\n\n# Extreme readings suggest strong trends\nif current &gt; 70\n  puts \"Extremely strong uptrend (#{current.round(2)})\"\n  puts \"Recent highs being made consistently\"\n  puts \"Strategy: Ride the trend, use trailing stops\"\nelsif current &lt; -70\n  puts \"Extremely strong downtrend (#{current.round(2)})\"\n  puts \"Recent lows being made consistently\"\n  puts \"Strategy: Stay out or short with tight stops\"\nend\n\n# Near zero suggests consolidation\nif current.abs &lt; 10\n  puts \"Weak trend/consolidation (#{current.round(2)})\"\n  puts \"Highs and lows happening at similar times\"\n  puts \"Strategy: Wait for breakout, avoid trending strategies\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#example-divergence-analysis","title":"Example: Divergence Analysis","text":"<pre><code>prices = load_historical_prices('NVDA')\nhighs = load_historical_highs('NVDA')\nlows = load_historical_lows('NVDA')\n\naroon_osc = SQA::TAI.aroonosc(highs, lows, period: 25)\n\n# Find recent price highs\nprice_high_1_idx = -30\nprice_high_2_idx = -10\nprice_high_1 = prices[price_high_1_idx]\nprice_high_2 = prices[price_high_2_idx]\n\n# Corresponding Aroon Oscillator values\naroon_high_1 = aroon_osc[price_high_1_idx]\naroon_high_2 = aroon_osc[price_high_2_idx]\n\n# Bearish divergence: Price makes higher high, Aroon Osc makes lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; aroon_high_2 &lt; aroon_high_1\n  puts \"Bearish Divergence Detected!\"\n  puts \"Price: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)} (higher high)\"\n  puts \"Aroon Osc: #{aroon_high_1.round(2)} -&gt; #{aroon_high_2.round(2)} (lower high)\"\n  puts \"Warning: Uptrend momentum weakening, potential reversal\"\nend\n\n# Find recent price lows\nprice_low_1_idx = -30\nprice_low_2_idx = -10\nprice_low_1 = prices[price_low_1_idx]\nprice_low_2 = prices[price_low_2_idx]\n\naroon_low_1 = aroon_osc[price_low_1_idx]\naroon_low_2 = aroon_osc[price_low_2_idx]\n\n# Bullish divergence: Price makes lower low, Aroon Osc makes higher low\nif price_low_2 &lt; price_low_1 &amp;&amp; aroon_low_2 &gt; aroon_low_1\n  puts \"Bullish Divergence Detected!\"\n  puts \"Price: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)} (lower low)\"\n  puts \"Aroon Osc: #{aroon_low_1.round(2)} -&gt; #{aroon_low_2.round(2)} (higher low)\"\n  puts \"Opportunity: Downtrend momentum weakening, potential reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#example-trend-strength-filter","title":"Example: Trend Strength Filter","text":"<pre><code>highs = load_historical_highs('GOOGL')\nlows = load_historical_lows('GOOGL')\nprices = load_historical_prices('GOOGL')\n\naroon_osc = SQA::TAI.aroonosc(highs, lows, period: 25)\nsma_50 = SQA::TAI.sma(prices, period: 50)\n\ncurrent_price = prices.last\ncurrent_aroon = aroon_osc.last\n\n# Only take trades in strong trends\nif current_aroon &gt; 50 &amp;&amp; current_price &gt; sma_50.last\n  puts \"Strong uptrend confirmed by both indicators\"\n  puts \"Aroon Oscillator: #{current_aroon.round(2)} (strong up)\"\n  puts \"Price above SMA(50): Trend is healthy\"\n  puts \"Strategy: Look for pullbacks to buy\"\nelsif current_aroon &lt; -50 &amp;&amp; current_price &lt; sma_50.last\n  puts \"Strong downtrend confirmed by both indicators\"\n  puts \"Aroon Oscillator: #{current_aroon.round(2)} (strong down)\"\n  puts \"Price below SMA(50): Downtrend is healthy\"\n  puts \"Strategy: Avoid longs, consider shorts\"\nelse\n  puts \"Weak or mixed trend signals\"\n  puts \"Aroon Oscillator: #{current_aroon.round(2)}\"\n  puts \"Strategy: Wait for stronger trend confirmation\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#example-comparing-dual-aroon-vs-aroon-oscillator","title":"Example: Comparing Dual Aroon vs Aroon Oscillator","text":"<pre><code>highs = load_historical_highs('AMZN')\nlows = load_historical_lows('AMZN')\n\n# Get both versions\naroon_down, aroon_up = SQA::TAI.aroon(highs, lows, period: 25)\naroon_osc = SQA::TAI.aroonosc(highs, lows, period: 25)\n\nputs \"=== Current Values ===\"\nputs \"Aroon Up: #{aroon_up.last.round(2)}\"\nputs \"Aroon Down: #{aroon_down.last.round(2)}\"\nputs \"Aroon Oscillator: #{aroon_osc.last.round(2)}\"\nputs \"\"\n\n# Verify the relationship\ncalculated_osc = aroon_up.last - aroon_down.last\nputs \"Verification: #{aroon_up.last.round(2)} - #{aroon_down.last.round(2)} = #{calculated_osc.round(2)}\"\nputs \"Actual Oscillator: #{aroon_osc.last.round(2)}\"\nputs \"\"\n\n# Interpretation comparison\nputs \"=== Dual Aroon Interpretation ===\"\nif aroon_up.last &gt; 70 &amp;&amp; aroon_down.last &lt; 30\n  puts \"Aroon Up dominant and high - strong uptrend\"\nelsif aroon_down.last &gt; 70 &amp;&amp; aroon_up.last &lt; 30\n  puts \"Aroon Down dominant and high - strong downtrend\"\nelsif aroon_up.last &lt; 30 &amp;&amp; aroon_down.last &lt; 30\n  puts \"Both low - consolidation period\"\nend\n\nputs \"\"\nputs \"=== Aroon Oscillator Interpretation ===\"\nif aroon_osc.last &gt; 40\n  puts \"Oscillator above +40 - strong uptrend\"\nelsif aroon_osc.last &lt; -40\n  puts \"Oscillator below -40 - strong downtrend\"\nelsif aroon_osc.last.abs &lt; 20\n  puts \"Oscillator near zero - weak or no trend\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/aroonosc/#1-zero-line-crossover","title":"1. Zero Line Crossover","text":"<ul> <li>Buy: When Aroon Oscillator crosses above 0</li> <li>Sell: When Aroon Oscillator crosses below 0</li> <li>Best for: Catching trend changes early</li> <li>Risk: Can generate false signals in choppy markets</li> </ul>"},{"location":"indicators/momentum/aroonosc/#2-extreme-reading-strategy","title":"2. Extreme Reading Strategy","text":"<ul> <li>Buy: When Oscillator drops below -70 then rises back above -50</li> <li>Sell: When Oscillator rises above +70 then falls back below +50</li> <li>Best for: Identifying exhausted trends and reversals</li> <li>Risk: Missing the bulk of strong trends</li> </ul>"},{"location":"indicators/momentum/aroonosc/#3-sustained-trend-following","title":"3. Sustained Trend Following","text":"<ul> <li>Buy: When Oscillator stays above +50 for multiple periods</li> <li>Sell: When Oscillator stays below -50 for multiple periods</li> <li>Hold: As long as oscillator remains on the same side</li> <li>Best for: Riding strong established trends</li> <li>Risk: Late entries and exits</li> </ul>"},{"location":"indicators/momentum/aroonosc/#4-range-bound-trading","title":"4. Range-Bound Trading","text":"<ul> <li>Avoid: When Oscillator oscillates between -30 and +30</li> <li>Wait: For clear break above +30 or below -30</li> <li>Best for: Avoiding choppy, directionless markets</li> <li>Risk: Missing early trend formation</li> </ul>"},{"location":"indicators/momentum/aroonosc/#common-period-settings","title":"Common Period Settings","text":"Period Sensitivity Best Use Case 14 Very High Short-term trading, quick trend changes 20 High Active trading, swing trading 25 Standard Default setting, balanced approach 30 Medium Position trading, filtering noise 50 Low Long-term trends, major trend changes <p>Note: Default period of 25 was chosen by the indicator's developer (Tushar Chande) as optimal for detecting trends while minimizing false signals.</p>"},{"location":"indicators/momentum/aroonosc/#advantages-and-limitations","title":"Advantages and Limitations","text":""},{"location":"indicators/momentum/aroonosc/#advantages","title":"Advantages","text":"<ul> <li>Simplicity: Single line easier to interpret than dual lines</li> <li>Clear Signals: Zero line crossovers are unambiguous</li> <li>Trend Identification: Quickly shows trend strength and direction</li> <li>Oscillator Format: Fits well with other oscillators on charts</li> <li>No Lag: Based on actual time periods, not smoothed averages</li> </ul>"},{"location":"indicators/momentum/aroonosc/#limitations","title":"Limitations","text":"<ul> <li>Choppy Markets: Generates false signals in sideways markets</li> <li>Delayed Extremes: By definition, needs full period for extreme readings</li> <li>No Price Magnitude: Only measures time, not size of price moves</li> <li>Requires Dual Arrays: Needs both high and low data (not just close)</li> <li>Period Sensitivity: Performance varies significantly with different periods</li> </ul>"},{"location":"indicators/momentum/aroonosc/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<pre><code>highs = load_historical_highs('META')\nlows = load_historical_lows('META')\nprices = load_historical_prices('META')\n\n# Aroon Oscillator for trend\naroon_osc = SQA::TAI.aroonosc(highs, lows, period: 25)\n\n# ADX for trend strength\nadx = SQA::TAI.adx(highs, lows, prices, period: 14)\n\n# RSI for momentum\nrsi = SQA::TAI.rsi(prices, period: 14)\n\ncurrent_aroon = aroon_osc.last\ncurrent_adx = adx.last\ncurrent_rsi = rsi.last\n\n# Multi-indicator confluence\nif current_aroon &gt; 40 &amp;&amp; current_adx &gt; 25 &amp;&amp; current_rsi &lt; 70\n  puts \"Strong BUY Setup:\"\n  puts \"  Aroon Osc: #{current_aroon.round(2)} (uptrend)\"\n  puts \"  ADX: #{current_adx.round(2)} (strong trend)\"\n  puts \"  RSI: #{current_rsi.round(2)} (not overbought)\"\n  puts \"All indicators aligned for uptrend\"\nelsif current_aroon &lt; -40 &amp;&amp; current_adx &gt; 25 &amp;&amp; current_rsi &gt; 30\n  puts \"Strong SELL Setup:\"\n  puts \"  Aroon Osc: #{current_aroon.round(2)} (downtrend)\"\n  puts \"  ADX: #{current_adx.round(2)} (strong trend)\"\n  puts \"  RSI: #{current_rsi.round(2)} (not oversold)\"\n  puts \"All indicators aligned for downtrend\"\nelsif current_aroon.abs &lt; 20 &amp;&amp; current_adx &lt; 20\n  puts \"No Trend Detected:\"\n  puts \"  Aroon Osc: #{current_aroon.round(2)} (neutral)\"\n  puts \"  ADX: #{current_adx.round(2)} (weak trend)\"\n  puts \"Market is consolidating - avoid trending strategies\"\nend\n</code></pre>"},{"location":"indicators/momentum/aroonosc/#related-indicators","title":"Related Indicators","text":"<ul> <li>AROON - Dual-line version with separate Aroon Up and Down</li> <li>ADX - Alternative trend strength indicator</li> <li>MACD - Another momentum oscillator</li> <li>RSI - Overbought/oversold momentum indicator</li> </ul>"},{"location":"indicators/momentum/aroonosc/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/momentum/bop/","title":"Balance of Power (BOP)","text":"<p>The Balance of Power (BOP) indicator measures the strength of buyers versus sellers by comparing the close price to the open price relative to the trading range. It oscillates between -1 and +1, providing insight into whether buyers or sellers are in control of the market.</p>"},{"location":"indicators/momentum/bop/#formula","title":"Formula","text":"<pre><code>BOP = (Close - Open) / (High - Low)\n</code></pre> <p>The indicator calculates the ratio of the price change from open to close against the total trading range. When the close is near the high, buyers are in control. When the close is near the low, sellers dominate.</p>"},{"location":"indicators/momentum/bop/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopens  = [100.0, 102.0, 103.5, 102.0, 101.0]\nhighs  = [103.0, 105.0, 106.0, 104.0, 103.0]\nlows   = [99.0,  101.0, 102.0, 100.0, 99.0]\ncloses = [102.5, 104.0, 102.5, 101.0, 102.0]\n\nbop = SQA::TAI.bop(\n  open:  opens,\n  high:  highs,\n  low:   lows,\n  close: closes\n)\n\nputs \"Current BOP: #{bop.last.round(3)}\"\n</code></pre>"},{"location":"indicators/momentum/bop/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>open</code> Array Yes - Array of opening prices <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of closing prices"},{"location":"indicators/momentum/bop/#returns","title":"Returns","text":"<p>Returns an array of BOP values ranging from -1.0 to +1.0. Each value represents the balance of buying versus selling pressure for that period.</p>"},{"location":"indicators/momentum/bop/#interpretation","title":"Interpretation","text":"BOP Value Interpretation Market Condition +0.75 to +1.0 Strong buying pressure Close near high, buyers dominating +0.25 to +0.75 Moderate buying pressure Close above midpoint, buyers in control -0.25 to +0.25 Balanced market Close near middle, equilibrium -0.75 to -0.25 Moderate selling pressure Close below midpoint, sellers in control -1.0 to -0.75 Strong selling pressure Close near low, sellers dominating"},{"location":"indicators/momentum/bop/#key-levels","title":"Key Levels","text":"<ul> <li>+1.0: Perfect buying pressure (Close = High, Open = Low)</li> <li>+0.5: Close at 75% of range from low</li> <li>0.0: Close at exact midpoint or Close = Open</li> <li>-0.5: Close at 25% of range from low</li> <li>-1.0: Perfect selling pressure (Close = Low, Open = High)</li> </ul>"},{"location":"indicators/momentum/bop/#example-basic-bop-analysis","title":"Example: Basic BOP Analysis","text":"<pre><code>opens  = [50.0, 51.0, 52.0, 51.5, 50.5]\nhighs  = [52.0, 53.0, 53.5, 53.0, 52.0]\nlows   = [49.5, 50.5, 51.0, 50.0, 49.0]\ncloses = [51.5, 52.5, 51.5, 50.5, 51.5]\n\nbop = SQA::TAI.bop(\n  open:  opens,\n  high:  highs,\n  low:   lows,\n  close: closes\n)\n\ncurrent_bop = bop.last\n\ncase current_bop\nwhen 0.75..1.0\n  puts \"Strong Buying Pressure (#{current_bop.round(3)}) - Buyers dominating\"\nwhen 0.25...0.75\n  puts \"Moderate Buying Pressure (#{current_bop.round(3)}) - Buyers in control\"\nwhen -0.25...0.25\n  puts \"Balanced Market (#{current_bop.round(3)}) - No clear winner\"\nwhen -0.75...-0.25\n  puts \"Moderate Selling Pressure (#{current_bop.round(3)}) - Sellers in control\"\nwhen -1.0...-0.75\n  puts \"Strong Selling Pressure (#{current_bop.round(3)}) - Sellers dominating\"\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#example-buying-pressure-scenarios","title":"Example: Buying Pressure Scenarios","text":"<pre><code># Scenario 1: Strong Buying Day\n# Open at low, close at high - maximum buying pressure\nopen_1  = 100.0\nhigh_1  = 105.0\nlow_1   = 100.0\nclose_1 = 105.0\n\nbop_1 = (close_1 - open_1) / (high_1 - low_1)\nputs \"Scenario 1 - Strong Buying: BOP = #{bop_1.round(3)}\"  # BOP = 1.0\n\n# Scenario 2: Moderate Buying Day\n# Open near low, close above midpoint\nopen_2  = 100.5\nhigh_2  = 105.0\nlow_2   = 100.0\nclose_2 = 103.5  # Close in upper half\n\nbop_2 = (close_2 - open_2) / (high_2 - low_2)\nputs \"Scenario 2 - Moderate Buying: BOP = #{bop_2.round(3)}\"  # BOP \u2248 0.6\n\n# Scenario 3: Weak Buying Day\n# Close slightly above open but near midpoint\nopen_3  = 102.0\nhigh_3  = 105.0\nlow_3   = 100.0\nclose_3 = 102.5  # Small gain\n\nbop_3 = (close_3 - open_3) / (high_3 - low_3)\nputs \"Scenario 3 - Weak Buying: BOP = #{bop_3.round(3)}\"  # BOP \u2248 0.1\n</code></pre>"},{"location":"indicators/momentum/bop/#example-selling-pressure-scenarios","title":"Example: Selling Pressure Scenarios","text":"<pre><code># Scenario 1: Strong Selling Day\n# Open at high, close at low - maximum selling pressure\nopen_1  = 105.0\nhigh_1  = 105.0\nlow_1   = 100.0\nclose_1 = 100.0\n\nbop_1 = (close_1 - open_1) / (high_1 - low_1)\nputs \"Scenario 1 - Strong Selling: BOP = #{bop_1.round(3)}\"  # BOP = -1.0\n\n# Scenario 2: Moderate Selling Day\n# Open near high, close below midpoint\nopen_2  = 104.5\nhigh_2  = 105.0\nlow_2   = 100.0\nclose_2 = 101.5  # Close in lower half\n\nbop_2 = (close_2 - open_2) / (high_2 - low_2)\nputs \"Scenario 2 - Moderate Selling: BOP = #{bop_2.round(3)}\"  # BOP \u2248 -0.6\n\n# Scenario 3: Weak Selling Day\n# Close slightly below open but near midpoint\nopen_3  = 103.0\nhigh_3  = 105.0\nlow_3   = 100.0\nclose_3 = 102.5  # Small loss\n\nbop_3 = (close_3 - open_3) / (high_3 - low_3)\nputs \"Scenario 3 - Weak Selling: BOP = #{bop_3.round(3)}\"  # BOP \u2248 -0.1\n</code></pre>"},{"location":"indicators/momentum/bop/#example-bop-divergence-detection","title":"Example: BOP Divergence Detection","text":"<pre><code># Divergence can signal potential reversals\nopens  = load_ohlc_data('AAPL')[:open]\nhighs  = load_ohlc_data('AAPL')[:high]\nlows   = load_ohlc_data('AAPL')[:low]\ncloses = load_ohlc_data('AAPL')[:close]\n\nbop = SQA::TAI.bop(open: opens, high: highs, low: lows, close: closes)\n\n# Check for bearish divergence\n# Price making higher highs, but BOP making lower highs\nprice_high_1 = closes[-20..-10].max\nprice_high_2 = closes[-9..-1].max\n\nbop_high_1 = bop[-20..-10].max\nbop_high_2 = bop[-9..-1].max\n\nif price_high_2 &gt; price_high_1 &amp;&amp; bop_high_2 &lt; bop_high_1\n  puts &lt;&lt;~DIVERGENCE\n    Bearish Divergence Detected!\n    Price: #{price_high_1} -&gt; #{price_high_2} (higher high)\n    BOP: #{bop_high_1.round(3)} -&gt; #{bop_high_2.round(3)} (lower high)\n    Signal: Weakening buying pressure despite higher prices\n    Action: Consider taking profits or preparing for reversal\n  DIVERGENCE\nend\n\n# Check for bullish divergence\n# Price making lower lows, but BOP making higher lows\nprice_low_1 = closes[-20..-10].min\nprice_low_2 = closes[-9..-1].min\n\nbop_low_1 = bop[-20..-10].min\nbop_low_2 = bop[-9..-1].min\n\nif price_low_2 &lt; price_low_1 &amp;&amp; bop_low_2 &gt; bop_low_1\n  puts &lt;&lt;~DIVERGENCE\n    Bullish Divergence Detected!\n    Price: #{price_low_1} -&gt; #{price_low_2} (lower low)\n    BOP: #{bop_low_1.round(3)} -&gt; #{bop_low_2.round(3)} (higher low)\n    Signal: Weakening selling pressure despite lower prices\n    Action: Consider buying or preparing for reversal\n  DIVERGENCE\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#example-bop-trend-confirmation","title":"Example: BOP Trend Confirmation","text":"<pre><code>opens  = load_ohlc_data('TSLA')[:open]\nhighs  = load_ohlc_data('TSLA')[:high]\nlows   = load_ohlc_data('TSLA')[:low]\ncloses = load_ohlc_data('TSLA')[:close]\n\nbop = SQA::TAI.bop(open: opens, high: highs, low: lows, close: closes)\nsma_50 = SQA::TAI.sma(closes, period: 50)\n\ncurrent_price = closes.last\ncurrent_bop = bop.last\ntrend_line = sma_50.last\n\n# Confirm trends with BOP\nif current_price &gt; trend_line\n  # Uptrend\n  if current_bop &gt; 0.5\n    puts &lt;&lt;~SIGNAL\n      Strong Uptrend Confirmed\n      Price above 50 SMA: #{current_price} &gt; #{trend_line.round(2)}\n      BOP shows strong buying: #{current_bop.round(3)}\n      Action: Hold longs, add on pullbacks\n    SIGNAL\n  elsif current_bop &lt; -0.3\n    puts &lt;&lt;~WARNING\n      Uptrend Warning\n      Price above 50 SMA but BOP shows selling: #{current_bop.round(3)}\n      Signal: Possible trend exhaustion\n      Action: Tighten stops, watch for reversal\n    WARNING\n  end\nelsif current_price &lt; trend_line\n  # Downtrend\n  if current_bop &lt; -0.5\n    puts &lt;&lt;~SIGNAL\n      Strong Downtrend Confirmed\n      Price below 50 SMA: #{current_price} &lt; #{trend_line.round(2)}\n      BOP shows strong selling: #{current_bop.round(3)}\n      Action: Hold shorts, add on rallies\n    SIGNAL\n  elsif current_bop &gt; 0.3\n    puts &lt;&lt;~WARNING\n      Downtrend Warning\n      Price below 50 SMA but BOP shows buying: #{current_bop.round(3)}\n      Signal: Possible trend exhaustion\n      Action: Cover shorts, watch for reversal\n    WARNING\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#example-bop-reversal-signals","title":"Example: BOP Reversal Signals","text":"<pre><code>opens  = load_ohlc_data('MSFT')[:open]\nhighs  = load_ohlc_data('MSFT')[:high]\nlows   = load_ohlc_data('MSFT')[:low]\ncloses = load_ohlc_data('MSFT')[:close]\n\nbop = SQA::TAI.bop(open: opens, high: highs, low: lows, close: closes)\n\n# Look for reversal patterns\nrecent_bop = bop[-5..-1]\n\n# Reversal from oversold (consecutive negative BOP to positive)\nif recent_bop[0..2].all? { |v| v &lt; -0.6 } &amp;&amp; recent_bop[-1] &gt; 0.5\n  puts &lt;&lt;~REVERSAL\n    Bullish Reversal Signal\n    Previous 3 periods: Strong selling pressure (BOP &lt; -0.6)\n    Current period: Strong buying pressure (BOP &gt; 0.5)\n    Signal: Sellers exhausted, buyers taking control\n    Action: Consider long entry\n  REVERSAL\nend\n\n# Reversal from overbought (consecutive positive BOP to negative)\nif recent_bop[0..2].all? { |v| v &gt; 0.6 } &amp;&amp; recent_bop[-1] &lt; -0.5\n  puts &lt;&lt;~REVERSAL\n    Bearish Reversal Signal\n    Previous 3 periods: Strong buying pressure (BOP &gt; 0.6)\n    Current period: Strong selling pressure (BOP &lt; -0.5)\n    Signal: Buyers exhausted, sellers taking control\n    Action: Consider short entry or exit longs\n  REVERSAL\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#example-bop-with-volume-confirmation","title":"Example: BOP with Volume Confirmation","text":"<pre><code>opens   = load_ohlc_data('NVDA')[:open]\nhighs   = load_ohlc_data('NVDA')[:high]\nlows    = load_ohlc_data('NVDA')[:low]\ncloses  = load_ohlc_data('NVDA')[:close]\nvolumes = load_ohlc_data('NVDA')[:volume]\n\nbop = SQA::TAI.bop(open: opens, high: highs, low: lows, close: closes)\navg_volume = volumes[-20..-1].sum / 20.0\n\ncurrent_bop = bop.last\ncurrent_volume = volumes.last\n\n# Strong signals when BOP and volume align\nif current_bop &gt; 0.7 &amp;&amp; current_volume &gt; avg_volume * 1.5\n  puts &lt;&lt;~STRONG_SIGNAL\n    Strong Bullish Signal\n    BOP: #{current_bop.round(3)} (strong buying pressure)\n    Volume: #{current_volume} (#{((current_volume / avg_volume - 1) * 100).round(1)}% above average)\n    Interpretation: High conviction buying\n    Action: Strong buy signal\n  STRONG_SIGNAL\nelsif current_bop &lt; -0.7 &amp;&amp; current_volume &gt; avg_volume * 1.5\n  puts &lt;&lt;~STRONG_SIGNAL\n    Strong Bearish Signal\n    BOP: #{current_bop.round(3)} (strong selling pressure)\n    Volume: #{current_volume} (#{((current_volume / avg_volume - 1) * 100).round(1)}% above average)\n    Interpretation: High conviction selling\n    Action: Strong sell signal\n  STRONG_SIGNAL\nelsif current_bop.abs &gt; 0.7 &amp;&amp; current_volume &lt; avg_volume * 0.7\n  puts &lt;&lt;~WEAK_SIGNAL\n    Questionable Signal\n    BOP: #{current_bop.round(3)} (extreme reading)\n    Volume: #{current_volume} (#{((1 - current_volume / avg_volume) * 100).round(1)}% below average)\n    Interpretation: Weak conviction, likely false signal\n    Action: Wait for volume confirmation\n  WEAK_SIGNAL\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/bop/#1-bop-moving-average","title":"1. BOP Moving Average","text":"<p>Smooth BOP with a moving average to filter noise:</p> <pre><code>bop = SQA::TAI.bop(open: opens, high: highs, low: lows, close: closes)\nbop_sma = SQA::TAI.sma(bop.compact, period: 10)\n\n# Trade when BOP crosses its moving average\nif bop[-2] &lt; bop_sma[-2] &amp;&amp; bop[-1] &gt; bop_sma[-1]\n  puts \"BOP crossed above MA - Bullish crossover\"\nelsif bop[-2] &gt; bop_sma[-2] &amp;&amp; bop[-1] &lt; bop_sma[-1]\n  puts \"BOP crossed below MA - Bearish crossover\"\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#2-bop-histogram","title":"2. BOP Histogram","text":"<p>Track changes in BOP momentum:</p> <pre><code>bop = SQA::TAI.bop(open: opens, high: highs, low: lows, close: closes)\n\n# Calculate BOP change\nbop_change = bop.each_cons(2).map { |a, b| b - a }\n\nif bop_change.last &gt; 0.3\n  puts \"Rapid increase in buying pressure\"\nelsif bop_change.last &lt; -0.3\n  puts \"Rapid increase in selling pressure\"\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#3-bop-zones","title":"3. BOP Zones","text":"<p>Define action zones based on BOP levels:</p> <pre><code>current_bop = bop.last\n\naction = case current_bop\n  when 0.8..1.0   then \"Accumulation zone - strong hands buying\"\n  when 0.5...0.8  then \"Bullish zone - buyers in control\"\n  when 0.2...0.5  then \"Neutral bullish - weak buying\"\n  when -0.2...0.2 then \"Equilibrium - wait for breakout\"\n  when -0.5...-0.2 then \"Neutral bearish - weak selling\"\n  when -0.8...-0.5 then \"Bearish zone - sellers in control\"\n  when -1.0...-0.8 then \"Capitulation zone - panic selling\"\n  end\n\nputs \"Current BOP Zone: #{action}\"\n</code></pre>"},{"location":"indicators/momentum/bop/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/bop/#strategy-1-bop-breakout","title":"Strategy 1: BOP Breakout","text":"<p>Enter when BOP breaks above/below key levels:</p> <pre><code># Buy when BOP crosses above 0 after being negative\nif bop[-2] &lt; 0 &amp;&amp; bop[-1] &gt; 0\n  puts \"BOP breakout - Buyers taking control\"\nend\n\n# Sell when BOP crosses below 0 after being positive\nif bop[-2] &gt; 0 &amp;&amp; bop[-1] &lt; 0\n  puts \"BOP breakdown - Sellers taking control\"\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#strategy-2-extreme-bop-reversal","title":"Strategy 2: Extreme BOP Reversal","text":"<p>Fade extreme readings:</p> <pre><code># When BOP is extremely negative, look for bounce\nif bop.last &lt; -0.85\n  puts \"Extreme selling pressure - potential bounce candidate\"\nend\n\n# When BOP is extremely positive, look for pullback\nif bop.last &gt; 0.85\n  puts \"Extreme buying pressure - potential pullback candidate\"\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#strategy-3-bop-trend-following","title":"Strategy 3: BOP Trend Following","text":"<p>Follow persistent BOP direction:</p> <pre><code>recent_bop = bop[-5..-1]\n\nif recent_bop.all? { |v| v &gt; 0.4 }\n  puts \"Consistent buying pressure - uptrend intact\"\nelsif recent_bop.all? { |v| v &lt; -0.4 }\n  puts \"Consistent selling pressure - downtrend intact\"\nend\n</code></pre>"},{"location":"indicators/momentum/bop/#limitations","title":"Limitations","text":"<ol> <li> <p>Range Dependency: BOP requires sufficient intraday range (High - Low). Small ranges can produce unreliable readings.</p> </li> <li> <p>Gap Sensitivity: Large gaps between close and next open can cause BOP to miss important market sentiment.</p> </li> <li> <p>No Time Component: BOP treats all price movement equally regardless of when it occurred during the period.</p> </li> <li> <p>Normalization: BOP normalizes to range, which can hide absolute volatility differences.</p> </li> </ol>"},{"location":"indicators/momentum/bop/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Combine with Price Action: Use BOP to confirm what price is telling you, not as standalone signal.</p> </li> <li> <p>Watch for Divergences: Most powerful when BOP diverges from price direction.</p> </li> <li> <p>Use Multiple Timeframes: Align BOP readings across different timeframes for stronger signals.</p> </li> <li> <p>Volume Confirmation: High BOP readings with high volume are more reliable than low volume signals.</p> </li> <li> <p>Trend Context: BOP works best in trending markets; can give false signals in choppy conditions.</p> </li> </ol>"},{"location":"indicators/momentum/bop/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Momentum oscillator for overbought/oversold</li> <li>MFI - Money Flow Index combines price and volume</li> <li>ADX - Trend strength measurement</li> <li>OBV - On Balance Volume for volume analysis</li> </ul>"},{"location":"indicators/momentum/bop/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/momentum/cci/","title":"Commodity Channel Index (CCI)","text":"<p>The Commodity Channel Index (CCI) is a versatile momentum oscillator that measures the deviation of price from its statistical mean. Originally developed for commodities, it's now widely used across all markets to identify cyclical trends and overbought/oversold conditions.</p>"},{"location":"indicators/momentum/cci/#formula","title":"Formula","text":"<p>CCI = (Typical Price - SMA of Typical Price) / (0.015 * Mean Deviation)</p> <p>Where Typical Price = (High + Low + Close) / 3</p>"},{"location":"indicators/momentum/cci/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of close prices <code>period</code> Integer No 14 Number of periods for calculation"},{"location":"indicators/momentum/cci/#returns","title":"Returns","text":"<p>Returns an array of CCI values. Values typically range from -100 to +100, but can exceed these levels during strong trends.</p>"},{"location":"indicators/momentum/cci/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32, 49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45]\n\n# Calculate 14-period CCI (default)\ncci = SQA::TAI.cci(high, low, close, period: 14)\n\nputs \"Current CCI: #{cci.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/cci/#interpretation","title":"Interpretation","text":"CCI Value Interpretation Above +100 Overbought - strong uptrend 0 to +100 Bullish zone 0 Neutral - at mean 0 to -100 Bearish zone Below -100 Oversold - strong downtrend"},{"location":"indicators/momentum/cci/#example-cci-trading-signals","title":"Example: CCI Trading Signals","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\ncci = SQA::TAI.cci(high, low, close, period: 20)\n\ncurrent_cci = cci.last\nprevious_cci = cci[-2]\n\n# Overbought/Oversold signals\nif current_cci &gt; 100\n  puts \"CCI Overbought (#{current_cci.round(2)}) - Watch for reversal\"\nelsif current_cci &lt; -100\n  puts \"CCI Oversold (#{current_cci.round(2)}) - Watch for reversal\"\nend\n\n# Zero-line crossovers\nif previous_cci &lt; 0 &amp;&amp; current_cci &gt; 0\n  puts \"CCI crossed above zero - Bullish signal\"\nelsif previous_cci &gt; 0 &amp;&amp; current_cci &lt; 0\n  puts \"CCI crossed below zero - Bearish signal\"\nend\n\n# +100/-100 level crossovers\nif previous_cci &lt; 100 &amp;&amp; current_cci &gt; 100\n  puts \"CCI entered overbought zone - Strong momentum\"\nelsif previous_cci &gt; -100 &amp;&amp; current_cci &lt; -100\n  puts \"CCI entered oversold zone - Strong momentum down\"\nend\n</code></pre>"},{"location":"indicators/momentum/cci/#example-cci-divergence","title":"Example: CCI Divergence","text":"<pre><code>high, low, close = load_historical_ohlc('SPY')\ncci = SQA::TAI.cci(high, low, close, period: 14)\n\n# Find recent highs\nprice_high_1 = close[-20..-10].max\nprice_high_2 = close[-9..-1].max\n\ncci_high_1 = cci[-20..-10].compact.max\ncci_high_2 = cci[-9..-1].compact.max\n\n# Bearish divergence\nif price_high_2 &gt; price_high_1 &amp;&amp; cci_high_2 &lt; cci_high_1\n  puts \"BEARISH DIVERGENCE\"\n  puts \"Price making higher highs, CCI making lower highs\"\n  puts \"Potential trend reversal\"\nend\n\n# Bullish divergence\nprice_low_1 = close[-20..-10].min\nprice_low_2 = close[-9..-1].min\n\ncci_low_1 = cci[-20..-10].compact.min\ncci_low_2 = cci[-9..-1].compact.min\n\nif price_low_2 &lt; price_low_1 &amp;&amp; cci_low_2 &gt; cci_low_1\n  puts \"BULLISH DIVERGENCE\"\n  puts \"Price making lower lows, CCI making higher lows\"\n  puts \"Potential trend reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/cci/#example-cci-trend-identification","title":"Example: CCI Trend Identification","text":"<pre><code>high, low, close = load_historical_ohlc('MSFT')\ncci = SQA::TAI.cci(high, low, close, period: 20)\n\n# Count bars above/below key levels\nlast_20_cci = cci.last(20).compact\n\nbars_above_100 = last_20_cci.count { |v| v &gt; 100 }\nbars_below_minus_100 = last_20_cci.count { |v| v &lt; -100 }\nbars_above_zero = last_20_cci.count { |v| v &gt; 0 }\n\nif bars_above_100 &gt; 10\n  puts \"Strong uptrend - CCI consistently above +100\"\nelsif bars_below_minus_100 &gt; 10\n  puts \"Strong downtrend - CCI consistently below -100\"\nelsif bars_above_zero &gt; 15\n  puts \"Moderate uptrend - CCI mostly positive\"\nelsif bars_above_zero &lt; 5\n  puts \"Moderate downtrend - CCI mostly negative\"\nelse\n  puts \"Ranging market - CCI oscillating around zero\"\nend\n</code></pre>"},{"location":"indicators/momentum/cci/#common-settings","title":"Common Settings","text":"Period Use Case 14 Standard setting for most trading 20 Smoother, fewer signals 30 Longer-term trend identification 40 Very smooth, major trends only"},{"location":"indicators/momentum/cci/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/cci/#1-basic-overboughtoversold","title":"1. Basic Overbought/Oversold","text":"<ul> <li>Buy when CCI crosses below -100 then back above</li> <li>Sell when CCI crosses above +100 then back below</li> </ul>"},{"location":"indicators/momentum/cci/#2-zero-line-strategy","title":"2. Zero-Line Strategy","text":"<ul> <li>Buy when CCI crosses above 0 (uptrend confirmation)</li> <li>Sell when CCI crosses below 0 (downtrend confirmation)</li> </ul>"},{"location":"indicators/momentum/cci/#3-trend-following","title":"3. Trend Following","text":"<ul> <li>Only long trades when CCI &gt; 0</li> <li>Only short trades when CCI &lt; 0</li> </ul>"},{"location":"indicators/momentum/cci/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Relative Strength Index</li> <li>STOCH - Stochastic Oscillator</li> <li>MFI - Money Flow Index</li> <li>WILLR - Williams %R</li> </ul>"},{"location":"indicators/momentum/cci/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> </ul>"},{"location":"indicators/momentum/cmo/","title":"Chande Momentum Oscillator (CMO)","text":"<p>The Chande Momentum Oscillator (CMO) is a momentum indicator developed by Tushar Chande that measures the strength and direction of price movement. Unlike RSI which is bounded between 0-100, CMO oscillates between -100 and +100, using the sum of all recent gains and losses rather than averages. This makes CMO more responsive to market changes and provides an unbounded view of momentum strength.</p>"},{"location":"indicators/momentum/cmo/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46]\n\n# Calculate 14-period CMO\ncmo = SQA::TAI.cmo(prices, period: 14)\n\nputs \"Current CMO: #{cmo.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/cmo/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 14 Number of periods for calculation"},{"location":"indicators/momentum/cmo/#returns","title":"Returns","text":"<p>Returns an array of CMO values ranging from -100 to +100. The first <code>period</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/cmo/#interpretation","title":"Interpretation","text":"CMO Value Interpretation +50 to +100 Strong uptrend / Extremely overbought +25 to +50 Moderate uptrend / Overbought 0 to +25 Weak uptrend 0 to -25 Weak downtrend -25 to -50 Moderate downtrend / Oversold -50 to -100 Strong downtrend / Extremely oversold 0 Neutral - balanced momentum"},{"location":"indicators/momentum/cmo/#example-basic-cmo-trading-signals","title":"Example: Basic CMO Trading Signals","text":"<pre><code>prices = load_historical_prices('AAPL')\n\ncmo = SQA::TAI.cmo(prices, period: 14)\ncurrent_cmo = cmo.last\n\ncase current_cmo\nwhen -100...-50\n  puts \"CMO Extremely Oversold (#{current_cmo.round(2)}) - Strong BUY\"\n  puts \"Intense selling pressure likely to reverse\"\nwhen -50...-25\n  puts \"CMO Oversold (#{current_cmo.round(2)}) - Potential BUY\"\nwhen 25...50\n  puts \"CMO Overbought (#{current_cmo.round(2)}) - Potential SELL\"\nwhen 50..100\n  puts \"CMO Extremely Overbought (#{current_cmo.round(2)}) - Strong SELL\"\n  puts \"Intense buying pressure likely to reverse\"\nwhen -10...10\n  puts \"CMO Neutral (#{current_cmo.round(2)}) - No clear momentum\"\nelse\n  puts \"CMO at #{current_cmo.round(2)}\"\nend\n\n# Check momentum direction\nif current_cmo &gt; 0\n  puts \"Positive momentum (buyers in control)\"\nelse\n  puts \"Negative momentum (sellers in control)\"\nend\n</code></pre>"},{"location":"indicators/momentum/cmo/#example-cmo-zero-line-crossover-strategy","title":"Example: CMO Zero-Line Crossover Strategy","text":"<pre><code>prices = load_historical_prices('MSFT')\n\ncmo = SQA::TAI.cmo(prices, period: 14)\n\ncurrent_cmo = cmo.last\nprev_cmo = cmo[-2]\nprev_prev_cmo = cmo[-3]\n\n# Zero-line crossovers are important trend signals\nif prev_cmo &lt; 0 &amp;&amp; current_cmo &gt; 0\n  puts \"CMO crossed above zero - BUY signal\"\n  puts \"Momentum shifted from negative to positive\"\n  puts \"Previous: #{prev_cmo.round(2)} -&gt; Current: #{current_cmo.round(2)}\"\nelsif prev_cmo &gt; 0 &amp;&amp; current_cmo &lt; 0\n  puts \"CMO crossed below zero - SELL signal\"\n  puts \"Momentum shifted from positive to negative\"\n  puts \"Previous: #{prev_cmo.round(2)} -&gt; Current: #{current_cmo.round(2)}\"\nend\n\n# Extreme level crossovers\nif prev_cmo &lt; 50 &amp;&amp; current_cmo &gt;= 50\n  puts \"CMO crossed above +50 - Extremely strong uptrend\"\n  puts \"Consider taking profits or tightening stops\"\nelsif prev_cmo &gt; -50 &amp;&amp; current_cmo &lt;= -50\n  puts \"CMO crossed below -50 - Extremely strong downtrend\"\n  puts \"Consider taking profits on shorts or tightening stops\"\nend\n\n# Momentum acceleration\nif current_cmo &gt; prev_cmo &amp;&amp; prev_cmo &gt; prev_prev_cmo\n  puts \"CMO accelerating upward - Momentum building\"\nelsif current_cmo &lt; prev_cmo &amp;&amp; prev_cmo &lt; prev_prev_cmo\n  puts \"CMO accelerating downward - Momentum declining\"\nend\n</code></pre>"},{"location":"indicators/momentum/cmo/#example-cmo-divergence-detection","title":"Example: CMO Divergence Detection","text":"<pre><code>prices = load_historical_prices('TSLA')\n\ncmo = SQA::TAI.cmo(prices, period: 14)\n\n# Find recent highs in price and CMO\nprice_high_1_idx = prices[-20..-10].index(prices[-20..-10].max) + (prices.length - 20)\nprice_high_2_idx = prices[-9..-1].index(prices[-9..-1].max) + (prices.length - 9)\n\nprice_high_1 = prices[price_high_1_idx]\nprice_high_2 = prices[price_high_2_idx]\n\ncmo_high_1 = cmo[price_high_1_idx]\ncmo_high_2 = cmo[price_high_2_idx]\n\n# Bearish divergence: price makes higher high, CMO makes lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; cmo_high_2 &lt; cmo_high_1\n  puts \"Bearish Divergence detected!\"\n  puts \"Price higher high: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)}\"\n  puts \"CMO lower high: #{cmo_high_1.round(2)} -&gt; #{cmo_high_2.round(2)}\"\n  puts \"Upward momentum weakening despite rising prices\"\n  puts \"Potential reversal signal\"\nend\n\n# Bullish divergence: price makes lower low, CMO makes higher low\nprice_low_1_idx = prices[-20..-10].index(prices[-20..-10].min) + (prices.length - 20)\nprice_low_2_idx = prices[-9..-1].index(prices[-9..-1].min) + (prices.length - 9)\n\nprice_low_1 = prices[price_low_1_idx]\nprice_low_2 = prices[price_low_2_idx]\n\ncmo_low_1 = cmo[price_low_1_idx]\ncmo_low_2 = cmo[price_low_2_idx]\n\nif price_low_2 &lt; price_low_1 &amp;&amp; cmo_low_2 &gt; cmo_low_1\n  puts \"Bullish Divergence detected!\"\n  puts \"Price lower low: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)}\"\n  puts \"CMO higher low: #{cmo_low_1.round(2)} -&gt; #{cmo_low_2.round(2)}\"\n  puts \"Downward momentum weakening despite falling prices\"\n  puts \"Potential reversal signal\"\nend\n</code></pre>"},{"location":"indicators/momentum/cmo/#example-cmo-vs-rsi-comparison","title":"Example: CMO vs RSI Comparison","text":"<pre><code>prices = load_historical_prices('NVDA')\n\n# Calculate both indicators\ncmo = SQA::TAI.cmo(prices, period: 14)\nrsi = SQA::TAI.rsi(prices, period: 14)\n\ncurrent_cmo = cmo.last\ncurrent_rsi = rsi.last\n\nputs \"CMO: #{current_cmo.round(2)}\"\nputs \"RSI: #{current_rsi.round(2)}\"\n\n# Convert RSI to same scale as CMO for comparison\n# RSI 0-100 -&gt; CMO -100 to +100: (RSI - 50) * 2\nrsi_as_cmo = (current_rsi - 50) * 2\n\nputs \"RSI as CMO scale: #{rsi_as_cmo.round(2)}\"\nputs \"Difference: #{(current_cmo - rsi_as_cmo).round(2)}\"\n\n# CMO is more responsive than RSI\nif current_cmo.abs &gt; rsi_as_cmo.abs\n  puts \"CMO showing stronger momentum than RSI\"\n  puts \"CMO's unbounded nature captures extreme moves better\"\nelsif rsi_as_cmo.abs &gt; current_cmo.abs\n  puts \"RSI showing stronger momentum than CMO\"\n  puts \"Unusual - may indicate smoothing effects in RSI\"\nend\n\n# Both showing extreme readings = high conviction\nif current_cmo &gt; 50 &amp;&amp; current_rsi &gt; 70\n  puts \"Both overbought - high conviction sell signal\"\nelsif current_cmo &lt; -50 &amp;&amp; current_rsi &lt; 30\n  puts \"Both oversold - high conviction buy signal\"\nend\n</code></pre>"},{"location":"indicators/momentum/cmo/#example-cmo-with-trend-filter","title":"Example: CMO with Trend Filter","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\ncmo = SQA::TAI.cmo(prices, period: 14)\nsma_50 = SQA::TAI.sma(prices, period: 50)\nsma_200 = SQA::TAI.sma(prices, period: 200)\n\ncurrent_price = prices.last\ncurrent_cmo = cmo.last\n\n# Determine overall trend\ntrend = if sma_50.last &gt; sma_200.last\n  \"uptrend\"\nelsif sma_50.last &lt; sma_200.last\n  \"downtrend\"\nelse\n  \"neutral\"\nend\n\nputs \"Current trend: #{trend}\"\nputs \"CMO: #{current_cmo.round(2)}\"\n\n# Trade with the trend\ncase trend\nwhen \"uptrend\"\n  # In uptrend, only take bullish CMO signals\n  if current_cmo &lt; -25 &amp;&amp; current_cmo &gt; -50\n    puts \"Uptrend + CMO oversold = BUY opportunity\"\n    puts \"Pullback in strong trend\"\n  elsif current_cmo &gt; 50\n    puts \"Uptrend + CMO extremely overbought = Take profits\"\n    puts \"Momentum may be overextended\"\n  elsif current_cmo &lt; 0\n    puts \"Uptrend but CMO negative = Caution\"\n    puts \"Wait for momentum to turn positive\"\n  end\n\nwhen \"downtrend\"\n  # In downtrend, only take bearish CMO signals\n  if current_cmo &gt; 25 &amp;&amp; current_cmo &lt; 50\n    puts \"Downtrend + CMO overbought = SELL opportunity\"\n    puts \"Bounce in weak trend\"\n  elsif current_cmo &lt; -50\n    puts \"Downtrend + CMO extremely oversold = Cover shorts\"\n    puts \"Downward momentum may be overextended\"\n  elsif current_cmo &gt; 0\n    puts \"Downtrend but CMO positive = Caution\"\n    puts \"Wait for momentum to turn negative\"\n  end\n\nwhen \"neutral\"\n  # In neutral trend, use traditional overbought/oversold\n  if current_cmo &gt; 50\n    puts \"Neutral trend + CMO overbought = SELL\"\n  elsif current_cmo &lt; -50\n    puts \"Neutral trend + CMO oversold = BUY\"\n  else\n    puts \"Neutral trend + Neutral CMO = Wait\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/cmo/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/cmo/#1-cmo-extremes-as-continuation-signals","title":"1. CMO Extremes as Continuation Signals","text":"<p>In strong trends, extreme CMO values can indicate continuation rather than reversal: - CMO &gt; +75 in uptrend = Trend acceleration, not necessarily reversal - CMO &lt; -75 in downtrend = Trend acceleration, not necessarily reversal</p>"},{"location":"indicators/momentum/cmo/#2-cmo-rate-of-change","title":"2. CMO Rate of Change","text":"<p>Monitor how fast CMO changes: - Rapid CMO increase = Sudden momentum shift - Gradual CMO increase = Steady momentum build - CMO flattening at extremes = Potential exhaustion</p>"},{"location":"indicators/momentum/cmo/#3-multiple-timeframe-cmo","title":"3. Multiple Timeframe CMO","text":"<p>Use CMO on different timeframes for confirmation: - Daily CMO for trend - Hourly CMO for entries - Weekly CMO for position sizing</p>"},{"location":"indicators/momentum/cmo/#4-cmo-bands","title":"4. CMO Bands","text":"<p>Create custom bands based on historical CMO values: - Top 10% of CMO values = Extreme overbought - Bottom 10% of CMO values = Extreme oversold</p>"},{"location":"indicators/momentum/cmo/#example-cmo-momentum-breakout-strategy","title":"Example: CMO Momentum Breakout Strategy","text":"<pre><code>prices = load_historical_prices('AMD')\nhighs = load_historical_data('AMD', field: :high)\nlows = load_historical_data('AMD', field: :low)\n\ncmo = SQA::TAI.cmo(prices, period: 14)\n\n# Calculate recent price range\nrecent_high = highs[-20..-1].max\nrecent_low = lows[-20..-1].min\n\ncurrent_price = prices.last\ncurrent_cmo = cmo.last\nprev_cmo = cmo[-2]\n\nputs \"Price Range: #{recent_low.round(2)} - #{recent_high.round(2)}\"\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"CMO: #{current_cmo.round(2)}\"\n\n# Bullish breakout with momentum confirmation\nif current_price &gt; recent_high &amp;&amp; current_cmo &gt; 25\n  puts \"BULLISH BREAKOUT with momentum confirmation!\"\n  puts \"Price broke above resistance with CMO &gt; +25\"\n  puts \"Strong continuation signal\"\n\n  if current_cmo &gt; 50\n    puts \"Extremely strong momentum - high conviction\"\n  end\n\n# Bearish breakdown with momentum confirmation\nelsif current_price &lt; recent_low &amp;&amp; current_cmo &lt; -25\n  puts \"BEARISH BREAKDOWN with momentum confirmation!\"\n  puts \"Price broke below support with CMO &lt; -25\"\n  puts \"Strong continuation signal\"\n\n  if current_cmo &lt; -50\n    puts \"Extremely strong negative momentum - high conviction\"\n  end\n\n# False breakout warnings\nelsif current_price &gt; recent_high &amp;&amp; current_cmo &lt; 0\n  puts \"WARNING: Price breakout but CMO negative\"\n  puts \"Potential false breakout - momentum not confirming\"\n\nelsif current_price &lt; recent_low &amp;&amp; current_cmo &gt; 0\n  puts \"WARNING: Price breakdown but CMO positive\"\n  puts \"Potential false breakdown - momentum not confirming\"\nend\n\n# Momentum acceleration into breakout\nif current_price &gt; recent_high &amp;&amp; current_cmo &gt; prev_cmo + 10\n  puts \"Accelerating momentum into breakout - very bullish\"\nelsif current_price &lt; recent_low &amp;&amp; current_cmo &lt; prev_cmo - 10\n  puts \"Accelerating momentum into breakdown - very bearish\"\nend\n</code></pre>"},{"location":"indicators/momentum/cmo/#example-multi-period-cmo-analysis","title":"Example: Multi-Period CMO Analysis","text":"<pre><code>prices = load_historical_prices('SPY')\n\n# Calculate multiple periods for comprehensive view\ncmo_7 = SQA::TAI.cmo(prices, period: 7)\ncmo_14 = SQA::TAI.cmo(prices, period: 14)\ncmo_21 = SQA::TAI.cmo(prices, period: 21)\ncmo_50 = SQA::TAI.cmo(prices, period: 50)\n\nputs \"Short-term CMO (7): #{cmo_7.last.round(2)}\"\nputs \"Standard CMO (14): #{cmo_14.last.round(2)}\"\nputs \"Medium-term CMO (21): #{cmo_21.last.round(2)}\"\nputs \"Long-term CMO (50): #{cmo_50.last.round(2)}\"\n\n# All periods aligned = very strong signal\nif cmo_7.last &gt; 25 &amp;&amp; cmo_14.last &gt; 25 &amp;&amp; cmo_21.last &gt; 25 &amp;&amp; cmo_50.last &gt; 25\n  puts \"\\nAll timeframes showing positive momentum - STRONG BUY\"\n  puts \"Aligned bullish momentum across all periods\"\n\n  if cmo_7.last &gt; 50 &amp;&amp; cmo_14.last &gt; 50\n    puts \"Near-term extremely overbought - consider waiting for pullback\"\n  end\n\nelsif cmo_7.last &lt; -25 &amp;&amp; cmo_14.last &lt; -25 &amp;&amp; cmo_21.last &lt; -25 &amp;&amp; cmo_50.last &lt; -25\n  puts \"\\nAll timeframes showing negative momentum - STRONG SELL\"\n  puts \"Aligned bearish momentum across all periods\"\n\n  if cmo_7.last &lt; -50 &amp;&amp; cmo_14.last &lt; -50\n    puts \"Near-term extremely oversold - shorts may want to cover\"\n  end\nend\n\n# Divergence between timeframes\nif cmo_7.last &gt; 25 &amp;&amp; cmo_50.last &lt; -25\n  puts \"\\nShort-term bullish but long-term bearish\"\n  puts \"Counter-trend rally - be cautious\"\n\nelsif cmo_7.last &lt; -25 &amp;&amp; cmo_50.last &gt; 25\n  puts \"\\nShort-term bearish but long-term bullish\"\n  puts \"Pullback in uptrend - potential buying opportunity\"\nend\n\n# Momentum turning points\nif cmo_7.last &gt; 0 &amp;&amp; cmo_14.last &lt; 0 &amp;&amp; cmo_21.last &lt; 0\n  puts \"\\nMomentum may be turning positive\"\n  puts \"Short-term leading longer-term\"\n\nelsif cmo_7.last &lt; 0 &amp;&amp; cmo_14.last &gt; 0 &amp;&amp; cmo_21.last &gt; 0\n  puts \"\\nMomentum may be turning negative\"\n  puts \"Short-term leading longer-term\"\nend\n\n# Calculate momentum consistency\ncmo_values = [cmo_7.last, cmo_14.last, cmo_21.last, cmo_50.last]\ncmo_avg = cmo_values.sum / cmo_values.length\ncmo_range = cmo_values.max - cmo_values.min\n\nputs \"\\nMomentum Consistency:\"\nputs \"Average CMO: #{cmo_avg.round(2)}\"\nputs \"CMO Range: #{cmo_range.round(2)}\"\n\nif cmo_range &lt; 20\n  puts \"Low range - consistent momentum across timeframes\"\nelsif cmo_range &gt; 50\n  puts \"High range - conflicting signals across timeframes\"\nend\n</code></pre>"},{"location":"indicators/momentum/cmo/#common-settings","title":"Common Settings","text":"Period Use Case 7 Short-term trading, quick signals 9 Day trading 14 Standard (most common) 20 Swing trading 50 Long-term momentum analysis"},{"location":"indicators/momentum/cmo/#key-differences-from-rsi","title":"Key Differences from RSI","text":"Feature CMO RSI Range -100 to +100 0 to 100 Calculation Sum of all gains and losses Exponential average of gains and losses Zero Line Yes (important reference) No (uses 50 as midpoint) Sensitivity More responsive to changes Smoother, less noise Extreme Values Can exceed \u00b150 regularly Rarely exceeds 80/20 Best For Trend strength, breakouts Overbought/oversold conditions Data Usage All data in period Weighted/smoothed data"},{"location":"indicators/momentum/cmo/#cmo-advantages","title":"CMO Advantages:","text":"<ul> <li>Unbounded: Can show true momentum extremes without artificial limits</li> <li>More responsive: Uses all data equally, catches changes faster</li> <li>Clearer neutral: Zero line provides obvious momentum direction</li> <li>Better for trends: Extreme values indicate strong trends rather than just overbought/oversold</li> </ul>"},{"location":"indicators/momentum/cmo/#cmo-disadvantages","title":"CMO Disadvantages:","text":"<ul> <li>More volatile: Can give false signals in choppy markets</li> <li>Harder to interpret: No fixed overbought/oversold levels</li> <li>Less popular: Fewer traders use it, less self-fulfilling prophecy effect</li> </ul>"},{"location":"indicators/momentum/cmo/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Similar momentum oscillator (bounded 0-100)</li> <li>ROC - Rate of Change (percentage based)</li> <li>MOM - Momentum indicator (absolute values)</li> <li>MACD - Moving Average Convergence Divergence</li> <li>Stochastic - Another momentum oscillator</li> </ul>"},{"location":"indicators/momentum/cmo/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/dx/","title":"Directional Movement Index (DX)","text":"<p>The Directional Movement Index (DX) measures the strength of directional movement in a price trend, regardless of direction. Developed by J. Welles Wilder as part of the Directional Movement System, DX is the raw calculation used to derive the Average Directional Index (ADX). It quantifies how strongly price is moving in a particular direction by comparing the Plus Directional Indicator (+DI) and Minus Directional Indicator (-DI).</p>"},{"location":"indicators/momentum/dx/#formula","title":"Formula","text":"<p>DX is calculated using the directional indicators: 1. Calculate +DM (Plus Directional Movement) = Current High - Previous High (if positive and greater than downward movement) 2. Calculate -DM (Minus Directional Movement) = Previous Low - Current Low (if positive and greater than upward movement) 3. Calculate True Range (TR) = max(High-Low, |High-PrevClose|, |Low-PrevClose|) 4. Calculate +DI = (Smoothed +DM / Smoothed TR) * 100 5. Calculate -DI = (Smoothed -DM / Smoothed TR) * 100 6. DX = |(+DI - -DI)| / (+DI + -DI) * 100</p>"},{"location":"indicators/momentum/dx/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of close prices <code>period</code> Integer No 14 Number of periods for smoothing"},{"location":"indicators/momentum/dx/#returns","title":"Returns","text":"<p>Returns an array of DX values ranging from 0 to 100.</p>"},{"location":"indicators/momentum/dx/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32, 49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45]\n\ndx = SQA::TAI.dx(high, low, close, period: 14)\n\nputs \"Current DX: #{dx.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/dx/#interpretation","title":"Interpretation","text":"DX Value Directional Strength 0-25 Weak or absent directional movement (ranging market) 25-50 Moderate directional movement (developing trend) 50-75 Strong directional movement (established trend) 75-100 Very strong directional movement (powerful trend) <p>Key Points: - DX measures the strength of directional movement, not direction - Higher DX = stronger trend (either up or down) - Lower DX = weaker trend or ranging market - DX &gt; 25 typically indicates meaningful directional movement - DX is volatile; ADX smooths DX for easier interpretation</p>"},{"location":"indicators/momentum/dx/#example-basic-dx-analysis","title":"Example: Basic DX Analysis","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\ndx = SQA::TAI.dx(high, low, close, period: 14)\n\ncurrent_dx = dx.last\n\ncase current_dx\nwhen 0...25\n  puts \"WEAK DIRECTIONAL MOVEMENT (DX: #{current_dx.round(2)})\"\n  puts \"Market is ranging or consolidating\"\n  puts \"Trend-following strategies not recommended\"\nwhen 25...50\n  puts \"MODERATE DIRECTIONAL MOVEMENT (DX: #{current_dx.round(2)})\"\n  puts \"Developing trend - monitor for confirmation\"\nwhen 50...75\n  puts \"STRONG DIRECTIONAL MOVEMENT (DX: #{current_dx.round(2)})\"\n  puts \"Established trend - good for trend following\"\nelse\n  puts \"VERY STRONG DIRECTIONAL MOVEMENT (DX: #{current_dx.round(2)})\"\n  puts \"Powerful trend - potential exhaustion watch\"\nend\n</code></pre>"},{"location":"indicators/momentum/dx/#example-dx-with-directional-indicators","title":"Example: DX with Directional Indicators","text":"<pre><code>high, low, close = load_historical_ohlc('SPY')\n\ndx = SQA::TAI.dx(high, low, close, period: 14)\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\ncurrent_dx = dx.last\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\n\n# Calculate directional movement spread\ndi_spread = (current_plus - current_minus).abs\n\nputs \"DX: #{current_dx.round(2)}\"\nputs \"+DI: #{current_plus.round(2)}\"\nputs \"-DI: #{current_minus.round(2)}\"\nputs \"DI Spread: #{di_spread.round(2)}\"\n\n# Identify trend direction and strength\nif current_dx &gt; 25\n  if current_plus &gt; current_minus\n    puts \"STRONG UPWARD DIRECTIONAL MOVEMENT\"\n    puts \"Bullish trend with #{current_dx.round(2)} strength\"\n  else\n    puts \"STRONG DOWNWARD DIRECTIONAL MOVEMENT\"\n    puts \"Bearish trend with #{current_dx.round(2)} strength\"\n  end\nelse\n  puts \"WEAK DIRECTIONAL MOVEMENT\"\n  puts \"No clear trend - market consolidating\"\n  puts \"+DI and -DI relatively balanced\"\nend\n\n# High DX indicates one DI dominates\nif current_dx &gt; 50\n  puts \"Very high DI divergence - one direction dominates\"\nend\n</code></pre>"},{"location":"indicators/momentum/dx/#example-dx-spike-detection","title":"Example: DX Spike Detection","text":"<pre><code>high, low, close = load_historical_ohlc('TSLA')\ndx = SQA::TAI.dx(high, low, close, period: 14)\n\ncurrent_dx = dx.last\nprev_dx = dx[-2]\ndx_5_ago = dx[-6]\n\ndx_change = current_dx - prev_dx\ndx_5_change = current_dx - dx_5_ago\n\nputs \"Current DX: #{current_dx.round(2)}\"\nputs \"Previous DX: #{prev_dx.round(2)}\"\nputs \"Change: #{dx_change.round(2)}\"\n\n# Detect rapid DX increases (trend development)\nif dx_change &gt; 10 &amp;&amp; current_dx &gt; 25\n  puts \"SHARP DX INCREASE - New trend forming!\"\n  puts \"Directional movement accelerating\"\nelsif dx_change &lt; -10 &amp;&amp; current_dx &lt; 25\n  puts \"SHARP DX DECREASE - Trend weakening\"\n  puts \"Entering range-bound conditions\"\nend\n\n# Sustained DX increase over multiple periods\nif dx_5_change &gt; 20\n  puts \"DX rising strongly over 5 periods\"\n  puts \"Trend gaining momentum consistently\"\nend\n\n# DX spikes and reversal\nif current_dx &gt; 60 &amp;&amp; prev_dx &gt; 60 &amp;&amp; dx_change &lt; 0\n  puts \"DX declining from very high levels\"\n  puts \"Possible trend exhaustion - watch for reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/dx/#example-dx-divergence-analysis","title":"Example: DX Divergence Analysis","text":"<pre><code>high, low, close = load_historical_ohlc('NVDA')\n\ndx = SQA::TAI.dx(high, low, close, period: 14)\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\n# Find price and DX peaks\nprice_high_1 = close[-20..-10].max\nprice_high_2 = close[-9..-1].max\n\ndx_high_1 = dx[-20..-10].compact.max\ndx_high_2 = dx[-9..-1].compact.max\n\n# Bearish divergence: price higher high, DX lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; dx_high_2 &lt; dx_high_1\n  puts \"BEARISH DIVERGENCE DETECTED\"\n  puts \"Price higher high: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)}\"\n  puts \"DX lower high: #{dx_high_1.round(2)} -&gt; #{dx_high_2.round(2)}\"\n  puts \"Directional strength weakening despite higher prices\"\n  puts \"Warning: Trend may be losing momentum\"\nend\n\n# Bullish divergence: price lower low, DX higher low\nprice_low_1 = close[-20..-10].min\nprice_low_2 = close[-9..-1].min\n\ndx_low_1 = dx[-20..-10].compact.min\ndx_low_2 = dx[-9..-1].compact.min\n\nif price_low_2 &lt; price_low_1 &amp;&amp; dx_low_2 &gt; dx_low_1\n  puts \"BULLISH DIVERGENCE DETECTED\"\n  puts \"Price lower low: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)}\"\n  puts \"DX higher low: #{dx_low_1.round(2)} -&gt; #{dx_low_2.round(2)}\"\n  puts \"Directional strength building despite lower prices\"\n  puts \"Potential trend reversal forming\"\nend\n</code></pre>"},{"location":"indicators/momentum/dx/#example-dx-breakout-confirmation","title":"Example: DX Breakout Confirmation","text":"<pre><code>high, low, close = load_historical_ohlc('MSFT')\n\ndx = SQA::TAI.dx(high, low, close, period: 14)\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\n\n# Identify resistance breakout\nresistance = 250.00\ncurrent_price = close.last\nprev_price = close[-2]\n\ncurrent_dx = dx.last\nprev_dx = dx[-2]\n\n# Price breaks resistance\nif current_price &gt; resistance &amp;&amp; prev_price &lt;= resistance\n  puts \"PRICE BREAKOUT at #{current_price.round(2)}\"\n\n  # Check DX confirmation\n  if current_dx &gt; 25 &amp;&amp; current_dx &gt; prev_dx\n    puts \"DX CONFIRMS BREAKOUT (#{current_dx.round(2)})\"\n    puts \"Strong directional movement supporting breakout\"\n    puts \"High probability of sustained move\"\n  elsif current_dx &lt; 20\n    puts \"WARNING: DX LOW (#{current_dx.round(2)})\"\n    puts \"Weak directional strength - false breakout risk\"\n    puts \"Wait for DX to rise above 25 for confirmation\"\n  else\n    puts \"DX moderate (#{current_dx.round(2)})\"\n    puts \"Monitor for DX increase to confirm trend\"\n  end\n\n  # Check directional indicator alignment\n  if plus_di.last &gt; minus_di.last\n    puts \"+DI &gt; -DI: Directional indicators support upside\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/dx/#example-dx-vs-adx-comparison","title":"Example: DX vs ADX Comparison","text":"<pre><code>high, low, close = load_historical_ohlc('GOOGL')\n\ndx = SQA::TAI.dx(high, low, close, period: 14)\nadx = SQA::TAI.adx(high, low, close, period: 14)\n\ncurrent_dx = dx.last\ncurrent_adx = adx.last\n\nputs \"DX (raw): #{current_dx.round(2)}\"\nputs \"ADX (smoothed): #{current_adx.round(2)}\"\nputs \"Difference: #{(current_dx - current_adx).round(2)}\"\n\n# DX is more volatile, ADX is smoother\nif current_dx &gt; current_adx + 20\n  puts \"DX SPIKE above ADX\"\n  puts \"Recent surge in directional strength\"\n  puts \"New trend developing - ADX will follow\"\nelsif current_dx &lt; current_adx - 10\n  puts \"DX BELOW ADX\"\n  puts \"Recent directional weakness\"\n  puts \"Trend may be losing steam\"\nelse\n  puts \"DX and ADX aligned\"\n  puts \"Consistent directional movement\"\nend\n\n# Track DX volatility\ndx_volatility = dx[-10..-1].compact.map { |v| (v - current_adx).abs }.sum / 10\nputs \"DX volatility around ADX: #{dx_volatility.round(2)}\"\n\nif dx_volatility &gt; 15\n  puts \"High DX volatility - choppy directional changes\"\nelsif dx_volatility &lt; 5\n  puts \"Low DX volatility - stable directional trend\"\nend\n</code></pre>"},{"location":"indicators/momentum/dx/#example-multi-period-dx-analysis","title":"Example: Multi-Period DX Analysis","text":"<pre><code>high, low, close = load_historical_ohlc('AMZN')\n\n# Calculate multiple periods\ndx_7 = SQA::TAI.dx(high, low, close, period: 7)\ndx_14 = SQA::TAI.dx(high, low, close, period: 14)\ndx_21 = SQA::TAI.dx(high, low, close, period: 21)\n\nputs \"Short-term DX (7): #{dx_7.last.round(2)}\"\nputs \"Standard DX (14): #{dx_14.last.round(2)}\"\nputs \"Long-term DX (21): #{dx_21.last.round(2)}\"\n\n# All periods strong = very strong trend\nif dx_7.last &gt; 40 &amp;&amp; dx_14.last &gt; 40 &amp;&amp; dx_21.last &gt; 40\n  puts \"ALL TIMEFRAMES SHOW STRONG DIRECTIONAL MOVEMENT\"\n  puts \"Established, powerful trend across all periods\"\nelsif dx_7.last &lt; 20 &amp;&amp; dx_14.last &lt; 20 &amp;&amp; dx_21.last &lt; 20\n  puts \"ALL TIMEFRAMES SHOW WEAK DIRECTIONAL MOVEMENT\"\n  puts \"Strong range-bound market - avoid trend strategies\"\nend\n\n# Divergence between timeframes\nif dx_7.last &gt; 50 &amp;&amp; dx_21.last &lt; 30\n  puts \"Short-term DX strong, long-term weak\"\n  puts \"Recent surge in directional movement\"\n  puts \"New trend potentially forming\"\nelsif dx_7.last &lt; 25 &amp;&amp; dx_21.last &gt; 40\n  puts \"Short-term DX weak, long-term strong\"\n  puts \"Recent consolidation in established trend\"\n  puts \"Potential continuation after pause\"\nend\n\n# Calculate DX slope across periods\ndx_trend = (dx_7.last + dx_14.last + dx_21.last) / 3\nputs \"Average DX across periods: #{dx_trend.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/dx/#common-settings","title":"Common Settings","text":"Period Use Case 7 Short-term, sensitive to recent changes 14 Standard (Wilder's original) 21 Longer-term, smoother trends 28 Very smooth, major trends only"},{"location":"indicators/momentum/dx/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/dx/#1-trend-filter","title":"1. Trend Filter","text":"<ul> <li>Enter trend trades only when DX &gt; 25</li> <li>Use range strategies when DX &lt; 25</li> <li>Higher DX = stronger trend signal</li> </ul>"},{"location":"indicators/momentum/dx/#2-breakout-confirmation","title":"2. Breakout Confirmation","text":"<ul> <li>Price breakout + DX &gt; 30 = confirmed breakout</li> <li>Price breakout + DX &lt; 20 = potential false breakout</li> <li>Wait for DX to rise above 25 after breakout</li> </ul>"},{"location":"indicators/momentum/dx/#3-dx-divergence","title":"3. DX Divergence","text":"<ul> <li>Price higher highs + DX lower highs = bearish divergence</li> <li>Price lower lows + DX higher lows = bullish divergence</li> <li>Indicates weakening/strengthening directional momentum</li> </ul>"},{"location":"indicators/momentum/dx/#4-dx-extremes","title":"4. DX Extremes","text":"<ul> <li>DX &gt; 60: Very strong trend, watch for exhaustion</li> <li>DX &lt; 15: Very weak trend, consolidation likely</li> <li>DX spike from low to high: New trend emerging</li> </ul>"},{"location":"indicators/momentum/dx/#key-differences-dx-vs-adx","title":"Key Differences: DX vs ADX","text":"Feature DX ADX Calculation Raw directional strength Smoothed average of DX Volatility More volatile, reactive Smoother, stable Signal Speed Faster signals Lagging signals Best For Detecting trend changes Confirming trend strength Reading More choppy Easier to read"},{"location":"indicators/momentum/dx/#understanding-dx-components","title":"Understanding DX Components","text":"<p>DX is calculated from the directional indicators:</p> <p>When +DI &gt;&gt; -DI: - Large difference creates high DX - Strong upward directional movement - Bullish trend strength</p> <p>When -DI &gt;&gt; +DI: - Large difference creates high DX - Strong downward directional movement - Bearish trend strength</p> <p>When +DI \u2248 -DI: - Small difference creates low DX - Weak directional movement - Range-bound market</p>"},{"location":"indicators/momentum/dx/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/dx/#1-dx-rate-of-change","title":"1. DX Rate of Change","text":"<p>Track how quickly DX changes to identify trend acceleration: <pre><code>dx_roc = ((dx.last - dx[-5]) / dx[-5] * 100).round(2)\nputs \"DX Rate of Change: #{dx_roc}%\"\n</code></pre></p>"},{"location":"indicators/momentum/dx/#2-dx-zones","title":"2. DX Zones","text":"<p>Customize thresholds based on asset volatility: - High volatility stocks: Use 30/20 instead of 25 - Low volatility stocks: Use 20/15 - Cryptocurrencies: Use 35/25</p>"},{"location":"indicators/momentum/dx/#3-dx-histogram","title":"3. DX Histogram","text":"<p>Visualize DX changes period-to-period: <pre><code>dx_change = dx.last - dx[-2]\nputs \"DX Change: #{dx_change &gt; 0 ? '+' : ''}#{dx_change.round(2)}\"\n</code></pre></p>"},{"location":"indicators/momentum/dx/#4-combine-with-volume","title":"4. Combine with Volume","text":"<p>Strong DX + High Volume = High conviction trend Strong DX + Low Volume = Weak trend, caution</p>"},{"location":"indicators/momentum/dx/#related-indicators","title":"Related Indicators","text":"<ul> <li>ADX - Average Directional Index (smoothed DX)</li> <li>ADXR - ADX Rating</li> <li>PLUS_DI - Plus Directional Indicator</li> <li>MINUS_DI - Minus Directional Indicator</li> </ul>"},{"location":"indicators/momentum/dx/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> </ul>"},{"location":"indicators/momentum/imi/","title":"Intraday Momentum Index (IMI)","text":"<p>The Intraday Momentum Index (IMI) is a momentum oscillator that combines aspects of RSI and candlestick analysis. Unlike RSI which uses closing prices, IMI uses the relationship between open and close prices to measure intraday momentum. It oscillates between 0 and 100, making it particularly useful for identifying overbought and oversold conditions based on intraday price action.</p>"},{"location":"indicators/momentum/imi/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen_prices = [44.50, 44.25, 44.75, 44.00, 44.50, 45.00,\n               45.25, 45.50, 45.75, 46.00, 46.25, 46.50,\n               46.75, 47.00, 46.50, 46.75, 47.00, 47.25]\n\nclose_prices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n                45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n                46.22, 45.64, 46.21, 46.25, 46.08, 46.46]\n\n# Calculate 14-period IMI\nimi = SQA::TAI.imi(open_prices, close_prices, period: 14)\n\nputs \"Current IMI: #{imi.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/imi/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>open_prices</code> Array Yes - Array of open price values <code>close_prices</code> Array Yes - Array of close price values <code>period</code> Integer No 14 Number of periods for calculation"},{"location":"indicators/momentum/imi/#returns","title":"Returns","text":"<p>Returns an array of IMI values ranging from 0 to 100. The first <code>period</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/imi/#interpretation","title":"Interpretation","text":"IMI Value Interpretation 70-100 Overbought - strong intraday buying pressure 50-70 Bullish momentum 30-50 Bearish momentum 0-30 Oversold - strong intraday selling pressure 50 Neutral - balanced intraday action"},{"location":"indicators/momentum/imi/#example-basic-imi-trading-signals","title":"Example: Basic IMI Trading Signals","text":"<pre><code>open_prices = load_historical_data('AAPL', field: :open)\nclose_prices = load_historical_data('AAPL', field: :close)\n\nimi = SQA::TAI.imi(open_prices, close_prices, period: 14)\ncurrent_imi = imi.last\n\ncase current_imi\nwhen 0...30\n  puts \"IMI Oversold (#{current_imi.round(2)}) - Potential BUY\"\n  puts \"Strong intraday selling pressure may be exhausted\"\nwhen 70..100\n  puts \"IMI Overbought (#{current_imi.round(2)}) - Potential SELL\"\n  puts \"Strong intraday buying pressure may be exhausted\"\nwhen 45...55\n  puts \"IMI Neutral (#{current_imi.round(2)}) - No clear signal\"\n  puts \"Balanced intraday momentum\"\nelse\n  puts \"IMI at #{current_imi.round(2)}\"\nend\n\n# Check trend\nif current_imi &gt; 50\n  puts \"Bullish intraday momentum\"\nelse\n  puts \"Bearish intraday momentum\"\nend\n</code></pre>"},{"location":"indicators/momentum/imi/#example-imi-divergence-detection","title":"Example: IMI Divergence Detection","text":"<pre><code>open_prices = load_historical_data('TSLA', field: :open)\nclose_prices = load_historical_data('TSLA', field: :close)\n\nimi = SQA::TAI.imi(open_prices, close_prices, period: 14)\n\n# Find recent highs in price and IMI\nprice_high_1 = close_prices[-20..-10].max\nprice_high_2 = close_prices[-9..-1].max\n\nimi_high_1 = imi[-20..-10].compact.max\nimi_high_2 = imi[-9..-1].compact.max\n\n# Bearish divergence: price makes higher high, IMI makes lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; imi_high_2 &lt; imi_high_1\n  puts \"Bearish Divergence detected!\"\n  puts \"Price higher high: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)}\"\n  puts \"IMI lower high: #{imi_high_1.round(2)} -&gt; #{imi_high_2.round(2)}\"\n  puts \"Intraday momentum weakening despite higher prices\"\nend\n\n# Bullish divergence: price makes lower low, IMI makes higher low\nprice_low_1 = close_prices[-20..-10].min\nprice_low_2 = close_prices[-9..-1].min\n\nimi_low_1 = imi[-20..-10].compact.min\nimi_low_2 = imi[-9..-1].compact.min\n\nif price_low_2 &lt; price_low_1 &amp;&amp; imi_low_2 &gt; imi_low_1\n  puts \"Bullish Divergence detected!\"\n  puts \"Price lower low: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)}\"\n  puts \"IMI higher low: #{imi_low_1.round(2)} -&gt; #{imi_low_2.round(2)}\"\n  puts \"Intraday selling pressure weakening\"\nend\n</code></pre>"},{"location":"indicators/momentum/imi/#example-imi-vs-rsi-comparison","title":"Example: IMI vs RSI Comparison","text":"<pre><code>open_prices = load_historical_data('MSFT', field: :open)\nclose_prices = load_historical_data('MSFT', field: :close)\n\n# Calculate both indicators\nimi = SQA::TAI.imi(open_prices, close_prices, period: 14)\nrsi = SQA::TAI.rsi(close_prices, period: 14)\n\ncurrent_imi = imi.last\ncurrent_rsi = rsi.last\n\nputs \"IMI: #{current_imi.round(2)}\"\nputs \"RSI: #{current_rsi.round(2)}\"\nputs \"Difference: #{(current_imi - current_rsi).round(2)}\"\n\n# IMI measures intraday action, RSI measures closing momentum\nif current_imi &gt; current_rsi + 10\n  puts \"IMI &gt; RSI: Strong intraday buying (closes &gt; opens)\"\n  puts \"Bullish candle pattern trend\"\nelsif current_rsi &gt; current_imi + 10\n  puts \"RSI &gt; IMI: Prices rising but weak intraday action\"\n  puts \"Caution: May indicate buying exhaustion\"\nend\n\n# Strong signals when both align\nif current_imi &lt; 30 &amp;&amp; current_rsi &lt; 30\n  puts \"Both oversold - high conviction BUY signal\"\nelsif current_imi &gt; 70 &amp;&amp; current_rsi &gt; 70\n  puts \"Both overbought - high conviction SELL signal\"\nend\n</code></pre>"},{"location":"indicators/momentum/imi/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/imi/#1-intraday-gap-analysis","title":"1. Intraday Gap Analysis","text":"<p>IMI is particularly useful when combined with gap analysis: - Large gap up + IMI &gt; 70 = Gap may fill - Large gap down + IMI &lt; 30 = Potential reversal</p>"},{"location":"indicators/momentum/imi/#2-candlestick-pattern-confirmation","title":"2. Candlestick Pattern Confirmation","text":"<p>Use IMI to confirm candlestick patterns: - Bullish engulfing + IMI rising = Strong buy - Bearish engulfing + IMI falling = Strong sell</p>"},{"location":"indicators/momentum/imi/#3-timeframe-analysis","title":"3. Timeframe Analysis","text":"<ul> <li>Daily IMI: Swing trading signals</li> <li>Hourly IMI: Day trading signals</li> <li>15-min IMI: Scalping opportunities</li> </ul>"},{"location":"indicators/momentum/imi/#4-imi-zones","title":"4. IMI Zones","text":"<p>Customize zones based on market conditions: - Volatile markets: 80/20 instead of 70/30 - Quiet markets: 60/40 for earlier signals</p>"},{"location":"indicators/momentum/imi/#example-intraday-trading-strategy","title":"Example: Intraday Trading Strategy","text":"<pre><code># For day trading with minute/hourly data\nopen_prices = load_intraday_data('SPY', field: :open, interval: '5min')\nclose_prices = load_intraday_data('SPY', field: :close, interval: '5min')\n\nimi = SQA::TAI.imi(open_prices, close_prices, period: 14)\n\n# Track intraday momentum\ncurrent_imi = imi.last\nprev_imi = imi[-2]\n\n# Entry signals\nif current_imi &lt; 30 &amp;&amp; prev_imi &gt;= 30\n  puts \"IMI crossed below 30 - SELL signal\"\n  puts \"Short entry at: #{close_prices.last.round(2)}\"\nelsif current_imi &gt; 70 &amp;&amp; prev_imi &lt;= 70\n  puts \"IMI crossed above 70 - BUY signal\"\n  puts \"Long entry at: #{close_prices.last.round(2)}\"\nend\n\n# Exit signals (mean reversion)\nif current_imi &gt; 50 &amp;&amp; prev_imi &lt; 50\n  puts \"IMI crossed above 50 - Exit short positions\"\nelsif current_imi &lt; 50 &amp;&amp; prev_imi &gt; 50\n  puts \"IMI crossed below 50 - Exit long positions\"\nend\n\n# Calculate strength of move\ncandle_strength = ((close_prices.last - open_prices.last).abs /\n                   open_prices.last * 100).round(2)\nputs \"Candle Strength: #{candle_strength}%\"\nputs \"IMI reflects intraday momentum: #{current_imi.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/imi/#example-multi-period-imi","title":"Example: Multi-Period IMI","text":"<pre><code>open_prices = load_historical_data('NVDA', field: :open)\nclose_prices = load_historical_data('NVDA', field: :close)\n\n# Calculate multiple periods\nimi_7 = SQA::TAI.imi(open_prices, close_prices, period: 7)\nimi_14 = SQA::TAI.imi(open_prices, close_prices, period: 14)\nimi_21 = SQA::TAI.imi(open_prices, close_prices, period: 21)\n\nputs \"Short-term IMI (7): #{imi_7.last.round(2)}\"\nputs \"Standard IMI (14): #{imi_14.last.round(2)}\"\nputs \"Long-term IMI (21): #{imi_21.last.round(2)}\"\n\n# All periods aligned = strong signal\nif imi_7.last &gt; 70 &amp;&amp; imi_14.last &gt; 70 &amp;&amp; imi_21.last &gt; 70\n  puts \"All timeframes overbought - strong reversal candidate\"\nelsif imi_7.last &lt; 30 &amp;&amp; imi_14.last &lt; 30 &amp;&amp; imi_21.last &lt; 30\n  puts \"All timeframes oversold - strong reversal candidate\"\nend\n\n# Divergence between timeframes\nif imi_7.last &gt; 70 &amp;&amp; imi_21.last &lt; 50\n  puts \"Short-term overbought but longer-term neutral\"\n  puts \"Potential pullback in uptrend\"\nelsif imi_7.last &lt; 30 &amp;&amp; imi_21.last &gt; 50\n  puts \"Short-term oversold but longer-term bullish\"\n  puts \"Buying opportunity in uptrend\"\nend\n</code></pre>"},{"location":"indicators/momentum/imi/#common-settings","title":"Common Settings","text":"Period Use Case 7 Short-term, day trading 14 Standard (most common) 21 Swing trading 30 Position trading"},{"location":"indicators/momentum/imi/#key-differences-from-rsi","title":"Key Differences from RSI","text":"Feature IMI RSI Data Used Open and Close Close only Focus Intraday momentum Overall momentum Sensitivity More sensitive to candle patterns Smoother, trend-focused Best For Day trading, intraday analysis Swing trading, trend analysis Gap Sensitivity Affected by gaps Less affected by gaps"},{"location":"indicators/momentum/imi/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Similar oscillator using closes</li> <li>Stochastic - Another overbought/oversold indicator</li> <li>MFI - Money Flow Index (volume-weighted)</li> <li>CCI - Commodity Channel Index</li> </ul>"},{"location":"indicators/momentum/imi/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/macd/","title":"MACD (Moving Average Convergence Divergence)","text":""},{"location":"indicators/momentum/macd/#overview","title":"Overview","text":"<p>The Moving Average Convergence Divergence (MACD) is one of the most popular and versatile trend-following momentum indicators in technical analysis. Developed by Gerald Appel in the late 1970s, MACD reveals changes in the strength, direction, momentum, and duration of a trend by comparing two exponential moving averages. The indicator consists of three components: the MACD line (difference between fast and slow EMAs), the signal line (EMA of the MACD line), and the histogram (difference between MACD and signal line), providing multiple layers of analysis for identifying trend changes and momentum shifts.</p>"},{"location":"indicators/momentum/macd/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>prices</code> Array Required The price data array (typically close prices) <code>fast_period</code> Integer 12 Fast EMA period for MACD line calculation <code>slow_period</code> Integer 26 Slow EMA period for MACD line calculation <code>signal_period</code> Integer 9 Signal line EMA period"},{"location":"indicators/momentum/macd/#parameter-details","title":"Parameter Details","text":"<p>prices - Typically uses closing prices, though any price data can be used - Requires sufficient data points: at least <code>slow_period + signal_period</code> values for accurate results - More historical data provides better context for divergence and trend analysis - Works on any timeframe: minute, hourly, daily, weekly, or monthly charts</p> <p>fast_period - Standard setting is 12 periods (Appel's original recommendation) - Represents the fast-moving exponential moving average - Shorter periods (5-8) create a more reactive MACD with earlier signals but more noise - Longer periods (15-20) create a smoother MACD with fewer false signals but delayed entries - Recommended ranges:   - Day trading: 5-8 for faster response to intraday moves   - Swing trading: 12 (standard) for balance between speed and reliability   - Position trading: 15-19 for major trend identification</p> <p>slow_period - Standard setting is 26 periods (Appel's original recommendation) - Represents the slow-moving exponential moving average - Creates the baseline for measuring momentum divergence - Shorter periods (19-21) increase sensitivity to recent price changes - Longer periods (30-40) smooth out noise and focus on major trends - Typical ratio: slow_period should be roughly 2x fast_period</p> <p>signal_period - Standard setting is 9 periods (Appel's original recommendation) - Smooths the MACD line to create entry/exit signals - Shorter periods (5-7) generate more frequent crossover signals - Longer periods (12-16) reduce false signals but may miss short-term moves - Directly affects histogram formation and momentum interpretation</p>"},{"location":"indicators/momentum/macd/#usage","title":"Usage","text":""},{"location":"indicators/momentum/macd/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02, 46.55, 47.03,\n          47.35, 47.28, 47.61, 48.12, 48.34, 48.21]\n\n# Calculate MACD (returns three arrays)\nmacd, signal, histogram = SQA::TAI.macd(prices)\n\nputs \"MACD Line: #{macd.last.round(4)}\"\nputs \"Signal Line: #{signal.last.round(4)}\"\nputs \"Histogram: #{histogram.last.round(4)}\"\n</code></pre>"},{"location":"indicators/momentum/macd/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Fast MACD for short-term trading\nmacd_fast, signal_fast, hist_fast = SQA::TAI.macd(\n  prices,\n  fast_period: 5,\n  slow_period: 13,\n  signal_period: 5\n)\n\n# Standard MACD (default parameters)\nmacd_std, signal_std, hist_std = SQA::TAI.macd(prices)\n\n# Slow MACD for long-term trend identification\nmacd_slow, signal_slow, hist_slow = SQA::TAI.macd(\n  prices,\n  fast_period: 19,\n  slow_period: 39,\n  signal_period: 9\n)\n\nputs \"Fast MACD: #{macd_fast.last.round(4)}\"\nputs \"Standard MACD: #{macd_std.last.round(4)}\"\nputs \"Slow MACD: #{macd_slow.last.round(4)}\"\n</code></pre>"},{"location":"indicators/momentum/macd/#multiple-output-values","title":"Multiple Output Values","text":"<pre><code># MACD returns three arrays for comprehensive analysis\nmacd_line, signal_line, histogram = SQA::TAI.macd(prices, fast_period: 12, slow_period: 26, signal_period: 9)\n\nputs \"MACD Line: #{macd_line.last.round(4)}\"\nputs \"Signal Line: #{signal_line.last.round(4)}\"\nputs \"Histogram: #{histogram.last.round(4)}\"\n\n# Check trend direction\nif macd_line.last &gt; 0\n  puts \"MACD above zero: Bullish trend\"\nelse\n  puts \"MACD below zero: Bearish trend\"\nend\n</code></pre>"},{"location":"indicators/momentum/macd/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/momentum/macd/#what-it-measures","title":"What It Measures","text":"<p>The MACD measures momentum and trend by analyzing the relationship between two moving averages:</p> <ul> <li>Trend Direction: Whether the market is in an uptrend or downtrend based on MACD line position relative to zero</li> <li>Momentum Strength: How quickly prices are moving and whether momentum is accelerating or decelerating</li> <li>Trend Changes: When shorter-term momentum diverges from longer-term momentum, signaling potential reversals</li> <li>Market Convergence/Divergence: The convergence (moving together) or divergence (moving apart) of two moving averages reveals shifts in market dynamics</li> </ul> <p>MACD answers the questions: \"Is the current trend strong or weakening? Are we approaching a trend change? Is momentum accelerating or decelerating?\"</p> <p>The histogram provides a visual representation of the distance between the MACD line and signal line, making momentum changes immediately apparent.</p>"},{"location":"indicators/momentum/macd/#calculation-method","title":"Calculation Method","text":"<p>The MACD is calculated using the following process:</p> <ol> <li>Calculate Fast EMA: Compute the exponential moving average using the fast period (typically 12)</li> <li>Calculate Slow EMA: Compute the exponential moving average using the slow period (typically 26)</li> <li>Calculate MACD Line: Subtract the slow EMA from the fast EMA (Fast EMA - Slow EMA)</li> <li>Calculate Signal Line: Apply another EMA to the MACD line using the signal period (typically 9)</li> <li>Calculate Histogram: Subtract the signal line from the MACD line to show the distance between them</li> </ol> <p>Formula: <pre><code>Fast EMA = EMA(prices, fast_period)\nSlow EMA = EMA(prices, slow_period)\n\nMACD Line = Fast EMA - Slow EMA\nSignal Line = EMA(MACD Line, signal_period)\nHistogram = MACD Line - Signal Line\n\nWhere:\n- EMA = Exponential Moving Average\n- Default periods: fast=12, slow=26, signal=9\n- Positive MACD = Fast EMA above Slow EMA (bullish)\n- Negative MACD = Fast EMA below Slow EMA (bearish)\n- Histogram shows momentum acceleration/deceleration\n</code></pre></p>"},{"location":"indicators/momentum/macd/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (can be any positive or negative value)</li> <li>Type: Trend-following momentum indicator with oscillator properties</li> <li>Lag: Moderate (uses smoothed averages but responsive to trend changes)</li> <li>Best Used: Trending markets, trend confirmation, momentum shifts, divergence analysis</li> <li>Limitations: Can generate false signals in ranging/choppy markets; lagging nature may result in delayed entries/exits</li> </ul>"},{"location":"indicators/momentum/macd/#interpretation","title":"Interpretation","text":""},{"location":"indicators/momentum/macd/#value-ranges","title":"Value Ranges","text":"<p>Specific guidance on what different MACD values indicate:</p> <ul> <li>MACD &gt; 0: Fast EMA is above slow EMA, indicating bullish momentum. The market is in an uptrend, and buying pressure exceeds selling pressure.</li> <li>MACD &lt; 0: Fast EMA is below slow EMA, indicating bearish momentum. The market is in a downtrend, and selling pressure exceeds buying pressure.</li> <li>MACD near 0: The two EMAs are converging, suggesting momentum is neutral or transitioning. Often occurs during consolidation or trend changes.</li> <li>Large positive MACD: Strong upward momentum. The larger the value, the stronger the bullish trend.</li> <li>Large negative MACD: Strong downward momentum. The more negative the value, the stronger the bearish trend.</li> </ul>"},{"location":"indicators/momentum/macd/#key-levels","title":"Key Levels","text":"<ul> <li> <p>Zero Line: The most critical level. MACD crossing above zero indicates the fast EMA has crossed above the slow EMA (bullish). MACD crossing below zero indicates the fast EMA has crossed below the slow EMA (bearish). The zero line represents the equilibrium point between bullish and bearish forces.</p> </li> <li> <p>Signal Line Crossovers: When MACD line crosses above the signal line, it generates a bullish signal. When MACD line crosses below the signal line, it generates a bearish signal. These are the primary trading signals.</p> </li> <li> <p>Histogram Zero Line: When the histogram crosses zero, it indicates a MACD/signal crossover. Histogram above zero = MACD above signal (bullish). Histogram below zero = MACD below signal (bearish).</p> </li> </ul>"},{"location":"indicators/momentum/macd/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read the MACD's signals:</p> <ol> <li>Trend Direction</li> <li>MACD above zero line: Uptrend in progress, bullish bias</li> <li>MACD below zero line: Downtrend in progress, bearish bias</li> <li>MACD at zero line: Trend transition, neutral momentum</li> <li> <p>Distance from zero indicates trend strength</p> </li> <li> <p>Momentum Changes</p> </li> <li>MACD rising: Increasing bullish momentum, trend acceleration</li> <li>MACD falling: Increasing bearish momentum or decelerating uptrend</li> <li>Histogram expanding: Momentum strengthening in current direction</li> <li> <p>Histogram contracting: Momentum weakening, possible reversal ahead</p> </li> <li> <p>Reversal Signals</p> </li> <li>MACD/Signal crossovers: Primary entry/exit signals</li> <li>Zero line crossovers: Trend confirmation and major trend changes</li> <li>Divergences: Price and MACD moving in opposite directions signal potential reversals</li> <li>Histogram peaks/troughs: Early warning of momentum exhaustion</li> </ol>"},{"location":"indicators/momentum/macd/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/momentum/macd/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal - Bullish MACD Crossover: MACD line crosses above the signal line</li> <li>Confirms shift from bearish to bullish momentum</li> <li>Most reliable when occurring below zero line (buying into weakness)</li> <li> <p>Best when histogram has been negative and turns positive</p> </li> <li> <p>Confirmation Signal - Zero Line Cross: MACD crosses above the zero line</p> </li> <li>Indicates fast EMA has crossed above slow EMA</li> <li>Confirms a new uptrend is beginning</li> <li> <p>Strongest when preceded by bullish MACD/signal crossover</p> </li> <li> <p>Bullish Divergence: Price makes lower low, but MACD makes higher low</p> </li> <li>Suggests downtrend is losing momentum</li> <li>Most powerful when MACD is below zero line</li> <li> <p>Requires confirmation from MACD/signal crossover</p> </li> <li> <p>Histogram Reversal: Histogram stops decreasing and begins increasing</p> </li> <li>Earliest signal of momentum shift</li> <li>Precedes MACD/signal crossover by 1-3 periods</li> <li>Best when transitioning from negative to positive values</li> </ol> <p>Example Scenario: <pre><code>When MACD line crosses above signal line while both are below zero,\nconsider a long position. Ideal conditions:\n- Price has found support at a key technical level\n- Histogram transitioning from negative to positive\n- Volume increasing on recent up days\n- Set stop loss below recent swing low\n- Target: Previous resistance or when MACD crosses below signal\n</code></pre></p>"},{"location":"indicators/momentum/macd/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal - Bearish MACD Crossover: MACD line crosses below the signal line</li> <li>Confirms shift from bullish to bearish momentum</li> <li>Most reliable when occurring above zero line (selling into strength)</li> <li> <p>Best when histogram has been positive and turns negative</p> </li> <li> <p>Confirmation Signal - Zero Line Cross: MACD crosses below the zero line</p> </li> <li>Indicates fast EMA has crossed below slow EMA</li> <li>Confirms a new downtrend is beginning</li> <li> <p>Strongest when preceded by bearish MACD/signal crossover</p> </li> <li> <p>Bearish Divergence: Price makes higher high, but MACD makes lower high</p> </li> <li>Suggests uptrend is losing momentum</li> <li>Most powerful when MACD is above zero line</li> <li> <p>Requires confirmation from MACD/signal crossover</p> </li> <li> <p>Histogram Reversal: Histogram stops increasing and begins decreasing</p> </li> <li>Earliest signal of momentum shift</li> <li>Precedes MACD/signal crossover by 1-3 periods</li> <li>Best when transitioning from positive to negative values</li> </ol> <p>Example Scenario: <pre><code>When MACD line crosses below signal line while both are above zero,\nconsider closing longs or initiating shorts. Ideal conditions:\n- Price has reached resistance at a key technical level\n- Histogram transitioning from positive to negative\n- Volume declining on recent up days\n- Set stop loss above recent swing high\n- Target: Previous support or when MACD crosses above signal\n</code></pre></p>"},{"location":"indicators/momentum/macd/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Pattern: Price makes lower low, but MACD line makes higher low - Identification: Compare price lows with MACD lows over 20-50 bars. Look for MACD failing to confirm price weakness. - Significance: Indicates downtrend is losing momentum, buyers stepping in at lower levels. Often precedes trend reversals. - Reliability: High when MACD is significantly below zero and forms a clear higher low. Confirm with MACD/signal crossover. - Example: Stock drops from $100 to $90 (MACD at -1.5), then to $85 (MACD at -1.2). Price made new low, but MACD is higher, suggesting selling pressure is weakening.</p> <p>Bearish Divergence: - Pattern: Price makes higher high, but MACD line makes lower high - Identification: Compare price highs with MACD highs over 20-50 bars. Look for MACD failing to confirm price strength. - Significance: Indicates uptrend is losing momentum, sellers stepping in at higher levels. Often precedes trend reversals. - Reliability: High when MACD is significantly above zero and forms a clear lower high. Confirm with MACD/signal crossover. - Example: Stock rises from $100 to $110 (MACD at +1.8), then to $115 (MACD at +1.5). Price made new high, but MACD is lower, suggesting buying pressure is weakening.</p>"},{"location":"indicators/momentum/macd/#best-practices","title":"Best Practices","text":""},{"location":"indicators/momentum/macd/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When MACD works best:</p> <ul> <li>Market conditions: Trending markets provide the clearest and most profitable signals. MACD excels at identifying and riding trends. Ranging or choppy markets generate numerous false crossover signals.</li> <li>Time frames: Most reliable on daily charts. Works on all timeframes but generates more noise on intraday charts (&lt; 1 hour). Weekly/monthly charts provide very reliable long-term trend signals.</li> <li>Asset classes: Excellent for stocks, stock indices, forex pairs, and cryptocurrencies. Works well for commodities but may need parameter adjustment for seasonal patterns.</li> <li>Volatility: Best performance in moderate volatility. High volatility markets may require longer periods to filter noise.</li> </ul>"},{"location":"indicators/momentum/macd/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Trend Indicators: Use 200-period SMA or EMA to identify primary trend direction. Only take MACD signals aligned with the longer-term trend (bullish MACD signals in uptrend, bearish MACD signals in downtrend). This filter dramatically improves win rates.</p> </li> <li> <p>With Volume Indicators: Combine with On Balance Volume (OBV) or standard volume analysis. Strongest MACD signals occur when accompanied by volume confirmation. Look for increasing volume on MACD crossovers and divergences.</p> </li> <li> <p>With RSI: Use RSI to identify overbought/oversold extremes. Best trades occur when MACD gives a signal while RSI is oversold (&lt; 30) for longs or overbought (&gt; 70) for shorts. This combination helps time entries at optimal risk/reward points.</p> </li> <li> <p>With Support/Resistance: MACD signals at key price levels are most reliable. Bullish MACD crossovers at support or bearish crossovers at resistance have higher success rates.</p> </li> </ul>"},{"location":"indicators/momentum/macd/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Trading every crossover: MACD generates many crossover signals. Not all are tradeable. Only trade crossovers that align with the broader trend, occur at logical support/resistance levels, or confirm divergences.</p> </li> <li> <p>Ignoring the trend: Taking bearish MACD signals in strong uptrends or bullish signals in strong downtrends leads to losses. The trend is your friend - trade with it, not against it.</p> </li> <li> <p>Over-optimization: Backtesting to find \"perfect\" MACD parameters leads to curve-fitting. Standard 12/26/9 settings work well for most situations. Only adjust if you have a specific, rational reason.</p> </li> <li> <p>Ignoring market context: MACD is a pure price-based indicator. It doesn't account for fundamental news, economic releases, or market sentiment. Always consider broader market context.</p> </li> <li> <p>Using in ranging markets: MACD performs poorly when prices oscillate in a range. Identify trending vs ranging conditions before applying MACD strategies.</p> </li> </ol>"},{"location":"indicators/momentum/macd/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading):</li> <li>Settings: 5/13/5 or 6/19/9 for faster signals</li> <li>Focus: Quick momentum shifts, intraday trend changes</li> <li>Time frame: 5-15 minute charts</li> <li> <p>Caution: More false signals, requires tight stops</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>Settings: 12/26/9 (standard) for balanced signals</li> <li>Focus: Multi-day trends, position trading</li> <li>Time frame: Daily or 4-hour charts</li> <li> <p>Balance: Optimal balance between speed and reliability</p> </li> <li> <p>Long-term trading (position trading):</p> </li> <li>Settings: 19/39/9 or 24/52/18 for major trends</li> <li>Focus: Primary trend identification, long-term positions</li> <li>Time frame: Weekly or daily charts</li> <li> <p>Benefit: Fewer but more reliable signals, less noise</p> </li> <li> <p>Backtesting approach: Test MACD on historical data for your specific asset and timeframe. Evaluate:</p> </li> <li>Win rate of MACD crossover signals</li> <li>Average profit per signal vs average loss</li> <li>Performance in trending vs ranging periods</li> <li>Optimal stop loss and profit target levels</li> </ul>"},{"location":"indicators/momentum/macd/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Real-world scenario: analyzing a stock for trend-following entry\nhistorical_prices = [\n  44.34, 44.09, 44.15, 43.61, 44.33, 44.83, 45.10, 45.42,\n  45.84, 46.08, 46.03, 46.41, 46.22, 45.64, 46.21, 46.25,\n  46.08, 46.46, 46.57, 45.95, 46.50, 46.02, 45.55, 46.08,\n  46.34, 46.00, 45.75, 46.45, 47.02, 46.87, 47.15, 47.44,\n  47.80, 48.12, 47.95, 48.34, 48.56, 48.21, 48.67, 49.02\n]\n\n# Calculate MACD and supporting indicators\nmacd, signal, histogram = SQA::TAI.macd(\n  historical_prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9\n)\n\n# Calculate trend filter\nsma_200 = SQA::TAI.sma(historical_prices, period: 30)  # Using 30 as proxy for trend\n\n# Current values\ncurrent_price = historical_prices.last\nprevious_price = historical_prices[-2]\ncurrent_macd = macd.last\nprevious_macd = macd[-2]\ncurrent_signal = signal.last\nprevious_signal = signal[-2]\ncurrent_histogram = histogram.last\nprevious_histogram = histogram[-2]\n\n# Determine trend\nlong_term_trend = current_price &gt; sma_200.last ? \"UPTREND\" : \"DOWNTREND\"\n\nputs \"=== MACD Trading Analysis ===\"\nputs \"Symbol: EXAMPLE_STOCK\"\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"Trend: #{long_term_trend}\"\nputs\nputs \"MACD Values:\"\nputs \"  MACD Line: #{current_macd.round(4)}\"\nputs \"  Signal Line: #{current_signal.round(4)}\"\nputs \"  Histogram: #{current_histogram.round(4)}\"\nputs\n\n# Trading Signal Analysis\ndef check_crossover(current, previous, current_other, previous_other)\n  # Returns 'bullish' if crossed above, 'bearish' if crossed below, nil otherwise\n  if current &gt; current_other &amp;&amp; previous &lt;= previous_other\n    'bullish'\n  elsif current &lt; current_other &amp;&amp; previous &gt;= previous_other\n    'bearish'\n  end\nend\n\ncrossover = check_crossover(current_macd, previous_macd, current_signal, previous_signal)\nzero_line_cross = check_crossover(current_macd, previous_macd, 0, 0)\n\n# Trading logic with comprehensive analysis\nif crossover == 'bullish'\n  puts \"BULLISH SIGNAL: MACD crossed above Signal Line\"\n  puts\n\n  if long_term_trend == \"UPTREND\"\n    if current_macd &lt; 0\n      puts \"STRONG BUY OPPORTUNITY\"\n      puts \"Reason: Bullish crossover in uptrend while MACD below zero\"\n      puts \"This suggests buying into temporary weakness in an uptrend\"\n      puts\n      puts \"Entry: $#{current_price.round(2)}\"\n      puts \"Stop Loss: $#{(current_price * 0.97).round(2)} (3% below entry)\"\n      puts \"Target 1: $#{(current_price * 1.05).round(2)} (5% gain)\"\n      puts \"Target 2: Wait for MACD to cross below signal or reach resistance\"\n    else\n      puts \"MODERATE BUY\"\n      puts \"Reason: Bullish crossover in uptrend, MACD above zero\"\n      puts \"Trend continuation signal - enter with caution\"\n    end\n  else\n    puts \"CAUTION: Signal against major trend\"\n    puts \"Consider waiting for zero line cross or trend reversal confirmation\"\n  end\n\nelsif crossover == 'bearish'\n  puts \"BEARISH SIGNAL: MACD crossed below Signal Line\"\n  puts\n\n  if long_term_trend == \"DOWNTREND\"\n    if current_macd &gt; 0\n      puts \"STRONG SELL OPPORTUNITY\"\n      puts \"Reason: Bearish crossover in downtrend while MACD above zero\"\n      puts \"This suggests selling into temporary strength in a downtrend\"\n      puts\n      puts \"Entry: $#{current_price.round(2)}\"\n      puts \"Stop Loss: $#{(current_price * 1.03).round(2)} (3% above entry)\"\n      puts \"Target 1: $#{(current_price * 0.95).round(2)} (5% decline)\"\n      puts \"Target 2: Wait for MACD to cross above signal or reach support\"\n    else\n      puts \"MODERATE SELL\"\n      puts \"Reason: Bearish crossover in downtrend, MACD below zero\"\n      puts \"Trend continuation signal - consider exiting longs\"\n    end\n  else\n    puts \"CAUTION: Signal against major trend\"\n    puts \"May be temporary pullback - consider reducing position size\"\n  end\n\nelsif zero_line_cross == 'bullish'\n  puts \"TREND CHANGE: MACD crossed above Zero Line\"\n  puts \"Interpretation: Fast EMA crossed above Slow EMA\"\n  puts \"New uptrend beginning - look for continuation signals\"\n  puts\n\nelsif zero_line_cross == 'bearish'\n  puts \"TREND CHANGE: MACD crossed below Zero Line\"\n  puts \"Interpretation: Fast EMA crossed below Slow EMA\"\n  puts \"New downtrend beginning - consider defensive positioning\"\n  puts\n\nelse\n  # Analyze momentum\n  puts \"NO CROSSOVER - Analyzing Momentum\"\n  puts\n\n  if current_histogram &gt; 0 &amp;&amp; current_histogram &gt; previous_histogram\n    puts \"Histogram Analysis: Bullish momentum strengthening\"\n    puts \"MACD pulling away from signal line (upward)\"\n    if long_term_trend == \"UPTREND\"\n      puts \"Action: Hold long positions, momentum accelerating\"\n    end\n  elsif current_histogram &lt; 0 &amp;&amp; current_histogram &lt; previous_histogram\n    puts \"Histogram Analysis: Bearish momentum strengthening\"\n    puts \"MACD pulling away from signal line (downward)\"\n    if long_term_trend == \"DOWNTREND\"\n      puts \"Action: Hold short positions, momentum accelerating\"\n    end\n  elsif current_histogram &gt; 0 &amp;&amp; current_histogram &lt; previous_histogram\n    puts \"Histogram Analysis: Bullish momentum weakening\"\n    puts \"MACD moving toward signal line from above\"\n    puts \"Action: Consider taking partial profits, momentum slowing\"\n  elsif current_histogram &lt; 0 &amp;&amp; current_histogram &gt; previous_histogram\n    puts \"Histogram Analysis: Bearish momentum weakening\"\n    puts \"MACD moving toward signal line from below\"\n    puts \"Action: Potential bullish reversal developing\"\n  end\nend\n\n# Divergence detection\nputs \"\\n=== Divergence Analysis ===\"\nrecent_prices = historical_prices.last(15)\nrecent_macd = macd.compact.last(15)\n\n# Find highs in last 15 periods\nprice_high_idx = recent_prices.index(recent_prices.max)\nmacd_high_idx = recent_macd.index(recent_macd.max)\n\n# Find lows in last 15 periods\nprice_low_idx = recent_prices.index(recent_prices.min)\nmacd_low_idx = recent_macd.index(recent_macd.min)\n\n# Check for divergence\nif price_high_idx &gt; macd_high_idx\n  puts \"BEARISH DIVERGENCE WARNING\"\n  puts \"Price making new highs but MACD is not confirming\"\n  puts \"Potential trend exhaustion - consider taking profits\"\n  puts \"Wait for MACD/Signal crossover to confirm\"\nelsif price_low_idx &gt; macd_low_idx\n  puts \"BULLISH DIVERGENCE DETECTED\"\n  puts \"Price making new lows but MACD is not confirming\"\n  puts \"Potential trend reversal - watch for bullish crossover\"\n  puts \"This suggests selling pressure is diminishing\"\nelse\n  puts \"No significant divergence detected\"\n  puts \"Price and MACD are in agreement\"\nend\n\nputs \"\\n=== Summary ===\"\nputs \"Current Position: #{current_macd &gt; current_signal ? 'BULLISH' : 'BEARISH'} (MACD vs Signal)\"\nputs \"Trend Position: #{current_macd &gt; 0 ? 'ABOVE' : 'BELOW'} zero line\"\nputs \"Momentum: #{current_histogram &gt; previous_histogram ? 'INCREASING' : 'DECREASING'}\"\n</code></pre>"},{"location":"indicators/momentum/macd/#example-macd-crossover-strategy","title":"Example: MACD Crossover Strategy","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nmacd, signal, histogram = SQA::TAI.macd(prices)\n\n# Check for crossovers\nif macd[-2] &lt; signal[-2] &amp;&amp; macd[-1] &gt; signal[-1]\n  puts \"Bullish MACD Crossover - BUY signal\"\n  puts \"MACD: #{macd[-1].round(4)}, Signal: #{signal[-1].round(4)}\"\nelsif macd[-2] &gt; signal[-2] &amp;&amp; macd[-1] &lt; signal[-1]\n  puts \"Bearish MACD Crossover - SELL signal\"\n  puts \"MACD: #{macd[-1].round(4)}, Signal: #{signal[-1].round(4)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/macd/#example-macd-histogram-analysis","title":"Example: MACD Histogram Analysis","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nmacd, signal, histogram = SQA::TAI.macd(prices)\n\n# Analyze histogram momentum\nrecent_histogram = histogram.compact.last(5)\n\nif recent_histogram.all? { |h| h &gt; 0 } &amp;&amp; recent_histogram[-1] &gt; recent_histogram[-2]\n  puts \"Bullish momentum strengthening\"\n  puts \"Histogram values: #{recent_histogram.map { |h| h.round(4) }}\"\nelsif recent_histogram.all? { |h| h &lt; 0 } &amp;&amp; recent_histogram[-1] &lt; recent_histogram[-2]\n  puts \"Bearish momentum strengthening\"\n  puts \"Histogram values: #{recent_histogram.map { |h| h.round(4) }}\"\nelsif recent_histogram[-1] &gt; recent_histogram[-2]\n  puts \"Momentum turning bullish (histogram rising)\"\nelse\n  puts \"Momentum weakening\"\nend\n</code></pre>"},{"location":"indicators/momentum/macd/#example-macd-divergence","title":"Example: MACD Divergence","text":"<pre><code>prices = load_historical_prices('MSFT')\n\nmacd, signal, histogram = SQA::TAI.macd(prices)\n\n# Find recent highs\nprice_high_1_idx = prices[-30..-15].index(prices[-30..-15].max) - 30\nprice_high_2_idx = prices[-14..-1].index(prices[-14..-1].max) - 14\n\nprice_high_1 = prices[price_high_1_idx]\nprice_high_2 = prices[price_high_2_idx]\n\nmacd_high_1 = macd[price_high_1_idx]\nmacd_high_2 = macd[price_high_2_idx]\n\n# Bearish divergence\nif price_high_2 &gt; price_high_1 &amp;&amp; macd_high_2 &lt; macd_high_1\n  puts \"Bearish Divergence detected!\"\n  puts \"Price: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)} (higher high)\"\n  puts \"MACD: #{macd_high_1.round(4)} -&gt; #{macd_high_2.round(4)} (lower high)\"\n  puts \"Potential trend reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/macd/#example-macd-zero-line-crossover","title":"Example: MACD Zero Line Crossover","text":"<pre><code>prices = load_historical_prices('NVDA')\n\nmacd, signal, histogram = SQA::TAI.macd(prices)\n\n# Zero line crossovers are significant\nif macd[-2] &lt; 0 &amp;&amp; macd[-1] &gt; 0\n  puts \"MACD crossed above zero line\"\n  puts \"Trend changing from bearish to bullish\"\n  puts \"Look for buying opportunities\"\nelsif macd[-2] &gt; 0 &amp;&amp; macd[-1] &lt; 0\n  puts \"MACD crossed below zero line\"\n  puts \"Trend changing from bullish to bearish\"\n  puts \"Consider reducing exposure\"\nend\n\n# Current trend based on zero line\nif macd.last &gt; 0\n  puts \"MACD above zero: Bullish trend\"\nelse\n  puts \"MACD below zero: Bearish trend\"\nend\n</code></pre>"},{"location":"indicators/momentum/macd/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/macd/#1-macd-crossover","title":"1. MACD Crossover","text":"<ul> <li>Buy when MACD crosses above Signal</li> <li>Sell when MACD crosses below Signal</li> <li>Most common strategy</li> <li>Best used with trend filters</li> </ul>"},{"location":"indicators/momentum/macd/#2-zero-line-crossover","title":"2. Zero Line Crossover","text":"<ul> <li>Buy when MACD crosses above zero</li> <li>Sell when MACD crosses below zero</li> <li>Confirms trend direction</li> <li>More reliable but fewer signals</li> </ul>"},{"location":"indicators/momentum/macd/#3-histogram-reversal","title":"3. Histogram Reversal","text":"<ul> <li>Buy when histogram stops decreasing and turns up</li> <li>Sell when histogram stops increasing and turns down</li> <li>Earlier signals than crossovers</li> <li>Requires experience to read accurately</li> </ul>"},{"location":"indicators/momentum/macd/#4-divergence-trading","title":"4. Divergence Trading","text":"<ul> <li>Bullish divergence: Price lower low, MACD higher low</li> <li>Bearish divergence: Price higher high, MACD lower high</li> <li>Powerful reversal signals</li> <li>Confirm with crossovers before entering</li> </ul>"},{"location":"indicators/momentum/macd/#macd-settings","title":"MACD Settings","text":""},{"location":"indicators/momentum/macd/#standard-settings-12-26-9","title":"Standard Settings (12, 26, 9)","text":"<ul> <li>Most widely used configuration</li> <li>Good for daily charts</li> <li>Balanced responsiveness</li> <li>Recommended for beginners</li> </ul>"},{"location":"indicators/momentum/macd/#fast-settings-5-13-5","title":"Fast Settings (5, 13, 5)","text":"<ul> <li>More sensitive to price changes</li> <li>More signals (more false positives)</li> <li>Good for short-term trading</li> <li>Requires active management</li> </ul>"},{"location":"indicators/momentum/macd/#slow-settings-19-39-9","title":"Slow Settings (19, 39, 9)","text":"<ul> <li>Less sensitive to noise</li> <li>Fewer but more reliable signals</li> <li>Good for long-term trends</li> <li>Reduces whipsaws in choppy markets</li> </ul>"},{"location":"indicators/momentum/macd/#combining-with-other-indicators_1","title":"Combining with Other Indicators","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\n# MACD for momentum\nmacd, signal, histogram = SQA::TAI.macd(prices)\n\n# RSI for overbought/oversold\nrsi = SQA::TAI.rsi(prices, period: 14)\n\n# Trend filter\nsma_200 = SQA::TAI.sma(prices, period: 200)\n\ncurrent_price = prices.last\n\n# Strong buy signal\nif macd.last &gt; signal.last &amp;&amp;  # MACD bullish\n   rsi.last &lt; 40 &amp;&amp;            # Not overbought\n   current_price &gt; sma_200.last # Uptrend\n  puts \"Strong BUY signal - all indicators aligned\"\nend\n</code></pre>"},{"location":"indicators/momentum/macd/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/momentum/macd/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>PPO (Percentage Price Oscillator): Percentage-based version of MACD. Use PPO when comparing assets with different price levels. MACD better for analyzing a single asset over time.</li> <li>APO (Absolute Price Oscillator): Simpler version using SMAs instead of EMAs. APO is less smooth than MACD but more responsive to sudden price changes.</li> </ul>"},{"location":"indicators/momentum/macd/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI: Momentum oscillator. Use RSI to identify overbought/oversold conditions, MACD for trend direction and timing.</li> <li>Stochastic: Momentum oscillator comparing price to recent range. Stochastic provides faster signals, MACD provides more reliable trend confirmation.</li> <li>EMA: Used in MACD calculation. Understanding EMAs helps interpret MACD behavior.</li> <li>Bollinger Bands: Volatility indicator. MACD signals at Bollinger Band extremes are particularly reliable.</li> <li>Volume (OBV): Confirms momentum. MACD signals with volume confirmation have higher success rates.</li> </ul>"},{"location":"indicators/momentum/macd/#indicator-family","title":"Indicator Family","text":"<p>MACD belongs to the trend-following momentum family: - MACD: Moving average convergence/divergence indicator - PPO: Percentage-based MACD variant - TRIX: Triple EMA momentum oscillator - APO: Simple moving average oscillator</p> <p>When to prefer MACD: For comprehensive trend and momentum analysis. MACD's combination of trend-following (zero line) and momentum (crossovers, histogram) makes it one of the most versatile indicators. Best for traders who want multiple signals from a single indicator.</p>"},{"location":"indicators/momentum/macd/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/momentum/macd/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use MACD across multiple timeframes for comprehensive analysis:</p> <ul> <li>Higher timeframe MACD (daily/weekly) identifies major trend direction and primary trading opportunities</li> <li>Lower timeframe MACD (4H/1H) provides precise entry timing within the higher timeframe trend</li> <li>Strongest signals when all timeframes align (e.g., weekly MACD bullish + daily MACD bullish crossover)</li> </ul> <p>Strategy Example: - Weekly MACD above zero and above signal = major uptrend - Wait for daily MACD bullish crossover below zero - Enter on hourly MACD bullish crossover for precise timing - Exit when daily MACD crosses below signal</p> <p>This multi-timeframe approach improves win rates by 15-25% compared to single timeframe analysis.</p>"},{"location":"indicators/momentum/macd/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>MACD behavior changes in different market conditions:</p> <ul> <li> <p>Bull Markets: MACD tends to stay above zero with frequent bullish crossovers above zero. Bearish crossovers are usually brief pullbacks, not major reversals. Best strategy: focus on zero line as support, buy bullish crossovers above zero.</p> </li> <li> <p>Bear Markets: MACD tends to stay below zero with frequent bearish crossovers below zero. Bullish crossovers are usually brief rallies, not major reversals. Best strategy: focus on zero line as resistance, sell bearish crossovers below zero.</p> </li> <li> <p>Ranging Markets: MACD oscillates around zero with frequent crossovers in both directions. High false signal rate. Best strategy: avoid MACD signals or use only with strong support/resistance confirmation.</p> </li> <li> <p>High Volatility: MACD generates larger swings and more extreme values. Crossovers can be whipsaws. Best strategy: use longer periods (19/39/9) to filter noise, require zero line confirmation.</p> </li> <li> <p>Low Volatility: MACD generates smaller swings and fewer crossovers. Signals can be delayed. Best strategy: use shorter periods (8/17/9) for faster response, or switch to different indicators.</p> </li> </ul>"},{"location":"indicators/momentum/macd/#statistical-validation","title":"Statistical Validation","text":"<p>MACD reliability metrics and considerations:</p> <ul> <li> <p>Success Rate: Studies show MACD crossover signals have 55-65% success rate when used alone. Combining with trend filters (200 SMA) improves this to 70-80%. Zero line crossovers have 65-75% success rate.</p> </li> <li> <p>Risk/Reward: MACD divergences offer best risk/reward ratios (typically 1:3 or better). Simple crossovers provide 1:1.5 to 1:2 ratios. Histogram reversals offer 1:2 ratios with faster entries.</p> </li> <li> <p>Optimal Settings by Market:</p> </li> <li>Stocks: 12/26/9 (standard) - 65% win rate</li> <li>Forex: 8/17/9 or 12/26/9 - 60% win rate (more noise)</li> <li>Commodities: 19/39/9 - 70% win rate (smoother trends)</li> <li> <p>Cryptocurrencies: 12/26/9 or 24/52/18 - 55-65% win rate (high volatility)</p> </li> <li> <p>False Signal Rate: Approximately 30-40% of MACD crossovers fail in trending markets, 50-60% fail in ranging markets. Always use stop losses and position sizing.</p> </li> <li> <p>Best Performance: MACD performs best in:</p> </li> <li>Trending markets with moderate volatility</li> <li>Daily timeframes (most reliable)</li> <li>Large-cap stocks and major forex pairs</li> <li>Clear support/resistance levels</li> </ul>"},{"location":"indicators/momentum/macd/#references","title":"References","text":"<ul> <li>Appel, Gerald. \"Technical Analysis: Power Tools for Active Investors\" (2005) - Original MACD development and trading strategies</li> <li>Appel, Gerald. \"The Moving Average Convergence-Divergence Trading Method\" (1979) - Foundational MACD publication</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999) - Comprehensive MACD analysis and interpretation</li> <li>Pring, Martin J. \"Technical Analysis Explained\" (2002) - MACD in context of broader technical analysis</li> <li>Investopedia: MACD - Comprehensive online reference</li> <li>StockCharts: MACD - Educational guide with examples</li> <li>TradingView: MACD Educational Guide</li> </ul>"},{"location":"indicators/momentum/macd/#see-also","title":"See Also","text":"<ul> <li>Momentum Indicators Overview</li> <li>Basic Usage Guide</li> <li>Momentum Trading Example</li> <li>API Reference</li> </ul>"},{"location":"indicators/momentum/macdext/","title":"MACD with Controllable MA Type (MACDEXT)","text":"<p>The Moving Average Convergence Divergence Extended (MACDEXT) is an enhanced version of the standard MACD indicator that allows you to customize the type of moving average used for each component. While the standard MACD uses exponential moving averages (EMA), MACDEXT lets you experiment with different smoothing methods to reduce lag, increase adaptability, or optimize for different market conditions.</p>"},{"location":"indicators/momentum/macdext/#what-it-measures","title":"What It Measures","text":"<p>MACDEXT measures the same momentum and trend characteristics as standard MACD - the relationship between two moving averages of different periods. The key difference is the ability to select from 9 different moving average types for the fast line, slow line, and signal line independently.</p>"},{"location":"indicators/momentum/macdext/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02, 46.55, 47.03,\n          47.35, 47.28, 47.61, 48.12, 48.34, 48.21]\n\n# Standard MACDEXT with default EMA (equivalent to standard MACD)\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9\n)\n\nputs \"MACD Line: #{macd.last.round(4)}\"\nputs \"Signal Line: #{signal.last.round(4)}\"\nputs \"Histogram: #{histogram.last.round(4)}\"\n</code></pre>"},{"location":"indicators/momentum/macdext/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>fast_period</code> Integer No 12 Fast moving average period <code>slow_period</code> Integer No 26 Slow moving average period <code>signal_period</code> Integer No 9 Signal line period <code>fast_ma_type</code> Integer No 0 Moving average type for fast line <code>slow_ma_type</code> Integer No 0 Moving average type for slow line <code>signal_ma_type</code> Integer No 0 Moving average type for signal line"},{"location":"indicators/momentum/macdext/#moving-average-types","title":"Moving Average Types","text":"<p>MACDEXT supports 9 different moving average algorithms, each with unique characteristics:</p> Value Type Description Best For 0 SMA Simple Moving Average Equal weight to all prices, smoothest but laggiest 1 EMA Exponential Moving Average Standard MACD, balanced responsiveness 2 WMA Weighted Moving Average Linear weight, more recent emphasis 3 DEMA Double Exponential MA Reduced lag, faster signals 4 TEMA Triple Exponential MA Minimal lag, very responsive 5 TRIMA Triangular Moving Average Double-smoothed, very smooth signals 6 KAMA Kaufman Adaptive MA Adapts to volatility, efficient in choppy markets 7 MAMA MESA Adaptive MA Adapts to market cycles, complex algorithm 8 T3 Triple Exponential Smoothed Very smooth with minimal lag"},{"location":"indicators/momentum/macdext/#returns","title":"Returns","text":"<p>Returns three arrays: 1. MACD Line - Difference between fast and slow moving averages 2. Signal Line - Moving average of MACD line 3. Histogram - Difference between MACD and signal line</p> <p>All arrays maintain the same length as the input prices array, with initial values as <code>nil</code> during the warm-up period.</p>"},{"location":"indicators/momentum/macdext/#interpretation","title":"Interpretation","text":"<p>The interpretation is identical to standard MACD:</p> <ul> <li>MACD crosses above Signal: Bullish signal (potential buy)</li> <li>MACD crosses below Signal: Bearish signal (potential sell)</li> <li>MACD above zero: Fast MA above slow MA, upward momentum</li> <li>MACD below zero: Fast MA below slow MA, downward momentum</li> <li>Histogram increasing: Momentum strengthening in current direction</li> <li>Histogram decreasing: Momentum weakening, potential reversal</li> </ul>"},{"location":"indicators/momentum/macdext/#choosing-ma-types","title":"Choosing MA Types","text":""},{"location":"indicators/momentum/macdext/#for-reduced-lag-faster-signals","title":"For Reduced Lag (Faster Signals)","text":"<p>Use DEMA, TEMA, or T3 to get earlier signals with less lag:</p> <pre><code># DEMA for fast response\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9,\n  fast_ma_type: 3,    # DEMA\n  slow_ma_type: 3,    # DEMA\n  signal_ma_type: 3   # DEMA\n)\n</code></pre> <p>Use when: - Trading in fast-moving markets - Day trading or scalping - You need earlier entry/exit signals - Accepting more false signals for speed</p>"},{"location":"indicators/momentum/macdext/#for-smoothness-cleaner-signals","title":"For Smoothness (Cleaner Signals)","text":"<p>Use TRIMA, T3, or SMA to reduce noise and false signals:</p> <pre><code># T3 for smooth, clean signals\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9,\n  fast_ma_type: 8,    # T3\n  slow_ma_type: 8,    # T3\n  signal_ma_type: 8   # T3\n)\n</code></pre> <p>Use when: - Trading in noisy/choppy markets - Swing trading or position trading - You want fewer but more reliable signals - Avoiding whipsaws is priority</p>"},{"location":"indicators/momentum/macdext/#for-adaptive-behavior","title":"For Adaptive Behavior","text":"<p>Use KAMA or MAMA to automatically adjust to market conditions:</p> <pre><code># KAMA adapts to volatility\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9,\n  fast_ma_type: 6,    # KAMA\n  slow_ma_type: 6,    # KAMA\n  signal_ma_type: 6   # KAMA\n)\n</code></pre> <p>Use when: - Market conditions vary (trending vs. ranging) - You want automatic adjustment to volatility - Trading multiple timeframes or instruments - Optimizing for efficiency in changing markets</p>"},{"location":"indicators/momentum/macdext/#example-dema-for-reduced-lag","title":"Example: DEMA for Reduced Lag","text":"<pre><code>prices = load_historical_prices('AAPL')\n\n# Standard MACD with EMA\nmacd_ema, signal_ema, hist_ema = SQA::TAI.macd(prices)\n\n# MACDEXT with DEMA for faster response\nmacd_dema, signal_dema, hist_dema = SQA::TAI.macdext(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9,\n  fast_ma_type: 3,    # DEMA\n  slow_ma_type: 3,    # DEMA\n  signal_ma_type: 3   # DEMA\n)\n\nputs \"Standard MACD (EMA):\"\nputs \"  MACD: #{macd_ema.last.round(4)}\"\nputs \"  Signal: #{signal_ema.last.round(4)}\"\nputs \"  Histogram: #{hist_ema.last.round(4)}\"\n\nputs \"\\nMACDEXT with DEMA (reduced lag):\"\nputs \"  MACD: #{macd_dema.last.round(4)}\"\nputs \"  Signal: #{signal_dema.last.round(4)}\"\nputs \"  Histogram: #{hist_dema.last.round(4)}\"\n\n# DEMA typically signals earlier\nif macd_dema[-2] &lt; signal_dema[-2] &amp;&amp; macd_dema[-1] &gt; signal_dema[-1]\n  puts \"\\nDEMA MACD crossover detected (earlier signal)\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdext/#example-kama-for-adaptive-trading","title":"Example: KAMA for Adaptive Trading","text":"<pre><code>prices = load_historical_prices('TSLA')\n\n# KAMA adapts to market volatility\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9,\n  fast_ma_type: 6,    # KAMA\n  slow_ma_type: 6,    # KAMA\n  signal_ma_type: 6   # KAMA\n)\n\n# KAMA moves faster in trending markets, slower in choppy markets\nif macd.last &gt; signal.last\n  puts \"KAMA MACD: Bullish momentum\"\n  puts \"MACD: #{macd.last.round(4)}, Signal: #{signal.last.round(4)}\"\n\n  # Check histogram for momentum strength\n  if histogram.last &gt; histogram[-2]\n    puts \"Momentum increasing (KAMA adapting to trend)\"\n  end\nelse\n  puts \"KAMA MACD: Bearish momentum\"\n  puts \"MACD: #{macd.last.round(4)}, Signal: #{signal.last.round(4)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdext/#example-t3-for-smooth-signals","title":"Example: T3 for Smooth Signals","text":"<pre><code>prices = load_historical_prices('MSFT')\n\n# T3 provides very smooth signals with minimal lag\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9,\n  fast_ma_type: 8,    # T3\n  slow_ma_type: 8,    # T3\n  signal_ma_type: 8   # T3\n)\n\nputs \"T3 MACD (smoothest with minimal lag):\"\nputs \"MACD: #{macd.last.round(4)}\"\nputs \"Signal: #{signal.last.round(4)}\"\nputs \"Histogram: #{histogram.last.round(4)}\"\n\n# T3 reduces whipsaws in choppy markets\nrecent_signals = []\n(-10..-1).each do |i|\n  if macd[i-1] &amp;&amp; signal[i-1] &amp;&amp; macd[i] &amp;&amp; signal[i]\n    if macd[i-1] &lt; signal[i-1] &amp;&amp; macd[i] &gt; signal[i]\n      recent_signals &lt;&lt; \"buy\"\n    elsif macd[i-1] &gt; signal[i-1] &amp;&amp; macd[i] &lt; signal[i]\n      recent_signals &lt;&lt; \"sell\"\n    end\n  end\nend\n\nputs \"\\nSignals in last 10 periods: #{recent_signals.length}\"\nputs \"T3 smoothing reduces false crossovers\"\n</code></pre>"},{"location":"indicators/momentum/macdext/#example-mixed-ma-types","title":"Example: Mixed MA Types","text":"<pre><code>prices = load_historical_prices('NVDA')\n\n# Mix different MA types for unique characteristics\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_period: 12,\n  slow_period: 26,\n  signal_period: 9,\n  fast_ma_type: 3,    # DEMA for fast line (responsive)\n  slow_ma_type: 1,    # EMA for slow line (standard)\n  signal_ma_type: 8   # T3 for signal line (smooth)\n)\n\nputs \"Hybrid MACDEXT:\"\nputs \"  Fast: DEMA (responsive)\"\nputs \"  Slow: EMA (standard)\"\nputs \"  Signal: T3 (smooth)\"\nputs \"\"\nputs \"MACD: #{macd.last.round(4)}\"\nputs \"Signal: #{signal.last.round(4)}\"\nputs \"Histogram: #{histogram.last.round(4)}\"\n\n# This combination gives fast detection with smooth confirmation\nif macd[-2] &lt; signal[-2] &amp;&amp; macd[-1] &gt; signal[-1]\n  puts \"\\nBullish crossover with mixed MA types\"\n  puts \"Fast DEMA detection + smooth T3 confirmation\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdext/#example-comparing-multiple-ma-types","title":"Example: Comparing Multiple MA Types","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\n# Compare different MA types\nma_types = {\n  'EMA' =&gt; 1,\n  'DEMA' =&gt; 3,\n  'TEMA' =&gt; 4,\n  'KAMA' =&gt; 6,\n  'T3' =&gt; 8\n}\n\nputs \"MACDEXT Comparison for Different MA Types:\"\nputs \"-\" * 60\n\nma_types.each do |name, type|\n  macd, signal, histogram = SQA::TAI.macdext(\n    prices,\n    fast_period: 12,\n    slow_period: 26,\n    signal_period: 9,\n    fast_ma_type: type,\n    slow_ma_type: type,\n    signal_ma_type: type\n  )\n\n  signal_type = if macd.last &gt; signal.last\n    \"BULLISH\"\n  else\n    \"BEARISH\"\n  end\n\n  puts \"#{name.ljust(6)}: MACD=#{macd.last.round(4).to_s.rjust(8)} \" \\\n       \"Signal=#{signal.last.round(4).to_s.rjust(8)} \" \\\n       \"Hist=#{histogram.last.round(4).to_s.rjust(8)} #{signal_type}\"\nend\n\nputs \"\\nNote differences in values and potential timing of crossovers\"\n</code></pre>"},{"location":"indicators/momentum/macdext/#trading-strategies-with-macdext","title":"Trading Strategies with MACDEXT","text":""},{"location":"indicators/momentum/macdext/#1-fast-entry-strategy-dematema","title":"1. Fast Entry Strategy (DEMA/TEMA)","text":"<pre><code># Use DEMA or TEMA for aggressive entry\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_ma_type: 3,    # DEMA\n  slow_ma_type: 3,\n  signal_ma_type: 3\n)\n\n# Enter on early crossovers\nif macd[-2] &lt; signal[-2] &amp;&amp; macd[-1] &gt; signal[-1]\n  puts \"DEMA MACD: Early buy signal\"\n  puts \"Trade aggressively with tight stops\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdext/#2-smooth-confirmation-strategy-t3","title":"2. Smooth Confirmation Strategy (T3)","text":"<pre><code># Use T3 for clean signals\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_ma_type: 8,    # T3\n  slow_ma_type: 8,\n  signal_ma_type: 8\n)\n\n# Wait for clear confirmation\nif macd.last &gt; signal.last &amp;&amp; histogram.last &gt; histogram[-2]\n  puts \"T3 MACD: Confirmed buy with momentum\"\n  puts \"Lower risk, cleaner entry\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdext/#3-adaptive-strategy-kama","title":"3. Adaptive Strategy (KAMA)","text":"<pre><code># Use KAMA to adapt to market conditions\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_ma_type: 6,    # KAMA\n  slow_ma_type: 6,\n  signal_ma_type: 6\n)\n\n# KAMA adjusts automatically\nif macd[-2] &lt; signal[-2] &amp;&amp; macd[-1] &gt; signal[-1]\n  puts \"KAMA MACD: Market-adaptive buy signal\"\n  puts \"Responds to current volatility environment\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdext/#4-multi-confirmation-strategy","title":"4. Multi-Confirmation Strategy","text":"<pre><code># Get signals from multiple MA types\nmacd_fast, signal_fast, hist_fast = SQA::TAI.macdext(\n  prices,\n  fast_ma_type: 3,    # DEMA - fast\n  slow_ma_type: 3,\n  signal_ma_type: 3\n)\n\nmacd_smooth, signal_smooth, hist_smooth = SQA::TAI.macdext(\n  prices,\n  fast_ma_type: 8,    # T3 - smooth\n  slow_ma_type: 8,\n  signal_ma_type: 8\n)\n\n# Strongest signals when both agree\nfast_bullish = macd_fast.last &gt; signal_fast.last\nsmooth_bullish = macd_smooth.last &gt; signal_smooth.last\n\nif fast_bullish &amp;&amp; smooth_bullish\n  puts \"Strong Buy: Both DEMA and T3 MACD are bullish\"\n  puts \"Fast signal confirmed by smooth signal\"\nelsif !fast_bullish &amp;&amp; !smooth_bullish\n  puts \"Strong Sell: Both DEMA and T3 MACD are bearish\"\n  puts \"Fast signal confirmed by smooth signal\"\nelse\n  puts \"Mixed signals: Wait for confirmation\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdext/#ma-type-selection-guide","title":"MA Type Selection Guide","text":""},{"location":"indicators/momentum/macdext/#when-to-use-each-type","title":"When to Use Each Type","text":"<p>SMA (0): Basic, equal weighting - Educational purposes - Very long-term analysis - When simplicity is needed</p> <p>EMA (1): Standard MACD default - General purpose trading - Balanced responsiveness - Industry standard comparisons</p> <p>WMA (2): Linear weighting - Slightly more responsive than SMA - Rarely used in MACD</p> <p>DEMA (3): Reduced lag - Day trading - Fast-moving markets - Early signal detection - Accept more false signals</p> <p>TEMA (4): Minimal lag - Scalping - Very fast markets - Maximum responsiveness - Highest false signal rate</p> <p>TRIMA (5): Maximum smoothness - Very choppy markets - Long-term trends only - Minimizing whipsaws</p> <p>KAMA (6): Adaptive to volatility - Variable market conditions - Multi-market trading - Automatic optimization - All-weather indicator</p> <p>MAMA (7): Adaptive to cycles - Cyclic markets - Complex analysis - Advanced users only</p> <p>T3 (8): Smooth with minimal lag - Swing trading - Clean signals preferred - Balance of speed and smoothness - Reducing false crossovers</p>"},{"location":"indicators/momentum/macdext/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<pre><code>prices = load_historical_prices('AAPL')\n\n# MACDEXT with DEMA for momentum\nmacd, signal, histogram = SQA::TAI.macdext(\n  prices,\n  fast_ma_type: 3,    # DEMA\n  slow_ma_type: 3,\n  signal_ma_type: 3\n)\n\n# RSI for overbought/oversold\nrsi = SQA::TAI.rsi(prices, period: 14)\n\n# Trend filter with SMA\nsma_200 = SQA::TAI.sma(prices, period: 200)\n\ncurrent_price = prices.last\n\n# Multi-indicator confirmation\nif macd.last &gt; signal.last &amp;&amp;      # DEMA MACD bullish\n   histogram.last &gt; histogram[-2] &amp;&amp; # Momentum increasing\n   rsi.last &lt; 70 &amp;&amp;                  # Not overbought\n   current_price &gt; sma_200.last      # Above long-term trend\n  puts \"Strong BUY: All indicators aligned\"\n  puts \"DEMA MACD: #{macd.last.round(4)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Price vs SMA200: +#{((current_price/sma_200.last - 1) * 100).round(2)}%\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdext/#performance-comparison","title":"Performance Comparison","text":"<p>Different MA types will produce different results:</p> <pre><code>prices = load_historical_prices('TSLA', days: 100)\n\n# Test different MA types\nresults = []\n\n[\n  ['Standard EMA', 1],\n  ['Fast DEMA', 3],\n  ['Fastest TEMA', 4],\n  ['Adaptive KAMA', 6],\n  ['Smooth T3', 8]\n].each do |name, ma_type|\n  macd, signal, histogram = SQA::TAI.macdext(\n    prices,\n    fast_ma_type: ma_type,\n    slow_ma_type: ma_type,\n    signal_ma_type: ma_type\n  )\n\n  # Count crossovers (trading signals)\n  crossovers = 0\n  (1...macd.compact.length).each do |i|\n    if (macd[i-1] &lt; signal[i-1] &amp;&amp; macd[i] &gt; signal[i]) ||\n       (macd[i-1] &gt; signal[i-1] &amp;&amp; macd[i] &lt; signal[i])\n      crossovers += 1\n    end\n  end\n\n  results &lt;&lt; {\n    name: name,\n    signals: crossovers,\n    current_macd: macd.last.round(4),\n    current_signal: signal.last.round(4)\n  }\nend\n\nputs \"MA Type Performance Comparison:\"\nputs \"-\" * 60\nresults.each do |r|\n  puts \"#{r[:name].ljust(20)}: #{r[:signals]} signals, \" \\\n       \"MACD=#{r[:current_macd]}, Signal=#{r[:current_signal]}\"\nend\nputs \"\\nMore signals = more responsive (but more false positives)\"\nputs \"Fewer signals = smoother (but delayed entries)\"\n</code></pre>"},{"location":"indicators/momentum/macdext/#related-indicators","title":"Related Indicators","text":"<ul> <li>MACD - Standard MACD with EMA</li> <li>APO - Absolute Price Oscillator</li> <li>PPO - Percentage Price Oscillator</li> <li>EMA - Exponential Moving Average</li> <li>DEMA - Double Exponential Moving Average</li> <li>TEMA - Triple Exponential Moving Average</li> <li>KAMA - Kaufman Adaptive Moving Average</li> <li>T3 - Triple Exponential Smoothed Moving Average</li> </ul>"},{"location":"indicators/momentum/macdext/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> </ul> <ul> <li>Moving Averages Guide</li> </ul>"},{"location":"indicators/momentum/macdfix/","title":"Moving Average Convergence Divergence - Fixed Parameters (MACDFIX)","text":"<p>MACDFIX is a simplified version of the popular MACD indicator that uses fixed parameters for the fast (12) and slow (26) exponential moving averages. Unlike the standard MACD function which allows you to customize all three periods, MACDFIX locks in the traditional 12/26 parameters, giving you control over only the signal period (default 9). This standardized approach ensures consistent analysis across different markets and time periods, making it ideal for traders who want to stick with the time-tested MACD settings developed by Gerald Appel.</p>"},{"location":"indicators/momentum/macdfix/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02, 46.55, 47.03,\n          47.35, 47.28, 47.61, 48.12, 48.34, 48.21]\n\n# Calculate MACDFIX (returns three arrays)\nmacd, signal, histogram = SQA::TAI.macdfix(prices)\n\nputs \"MACD Line: #{macd.last.round(4)}\"\nputs \"Signal Line: #{signal.last.round(4)}\"\nputs \"Histogram: #{histogram.last.round(4)}\"\n</code></pre>"},{"location":"indicators/momentum/macdfix/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values (typically closing prices) <code>signal_period</code> Integer No 9 Signal line EMA period (only customizable parameter)"},{"location":"indicators/momentum/macdfix/#returns","title":"Returns","text":"<p>Returns three arrays representing the MACD components: 1. MACD Line - Difference between 12-period EMA and 26-period EMA (fixed) 2. Signal Line - 9-period EMA of MACD line (customizable) 3. Histogram - Difference between MACD line and signal line</p>"},{"location":"indicators/momentum/macdfix/#formula","title":"Formula","text":"<pre><code>MACD Line = EMA(12) - EMA(26)  [FIXED PERIODS]\nSignal Line = EMA(signal_period) of MACD Line  [default: 9]\nHistogram = MACD Line - Signal Line\n</code></pre>"},{"location":"indicators/momentum/macdfix/#interpretation","title":"Interpretation","text":"Condition Interpretation MACD crosses above Signal Bullish signal - momentum shifting upward MACD crosses below Signal Bearish signal - momentum shifting downward MACD above zero Fast EMA above slow EMA - upward momentum MACD below zero Fast EMA below slow EMA - downward momentum Histogram increasing Momentum strengthening in current direction Histogram decreasing Momentum weakening in current direction Histogram crosses zero MACD and Signal lines have crossed"},{"location":"indicators/momentum/macdfix/#why-macdfix-exists","title":"Why MACDFIX Exists","text":""},{"location":"indicators/momentum/macdfix/#standardization-benefits","title":"Standardization Benefits","text":"<p>The 12/26/9 parameters have been the MACD standard since Gerald Appel developed the indicator in the late 1970s. MACDFIX enforces this standard for several reasons:</p> <ol> <li>Historical Validation - These periods have been tested across decades and multiple market conditions</li> <li>Comparability - Ensures consistent analysis when comparing different securities</li> <li>Simplification - Removes the temptation to over-optimize parameters</li> <li>Industry Standard - Most trading platforms and analysts use 12/26/9 by default</li> <li>Prevents Curve Fitting - Locked parameters discourage data mining for \"perfect\" settings</li> </ol>"},{"location":"indicators/momentum/macdfix/#when-to-use-macdfix-vs-macd","title":"When to Use MACDFIX vs MACD","text":"<p>Use MACDFIX when: - Following traditional technical analysis approaches - Comparing analysis across multiple securities - Working with daily timeframes (the standard use case) - Sharing analysis with other traders who expect standard settings - Building systematic strategies that avoid over-optimization - Learning MACD for the first time</p> <p>Use standard MACD when: - Analyzing intraday charts (may need faster periods) - Trading highly volatile or illiquid securities - Working with weekly/monthly timeframes (may need slower periods) - Your backtesting shows specific periods work better for your strategy - Adapting to unique market characteristics</p>"},{"location":"indicators/momentum/macdfix/#example-macdfix-basic-signals","title":"Example: MACDFIX Basic Signals","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nmacd, signal, histogram = SQA::TAI.macdfix(prices)\n\n# Current values\ncurrent_macd = macd.last\ncurrent_signal = signal.last\ncurrent_histogram = histogram.last\n\n# Previous values for crossover detection\nprev_macd = macd[-2]\nprev_signal = signal[-2]\n\n# Check for crossovers\nif prev_macd &lt; prev_signal &amp;&amp; current_macd &gt; current_signal\n  puts \"Bullish MACDFIX Crossover - BUY signal\"\n  puts \"MACD: #{current_macd.round(4)}, Signal: #{current_signal.round(4)}\"\n  puts \"Histogram: #{current_histogram.round(4)}\"\nelsif prev_macd &gt; prev_signal &amp;&amp; current_macd &lt; current_signal\n  puts \"Bearish MACDFIX Crossover - SELL signal\"\n  puts \"MACD: #{current_macd.round(4)}, Signal: #{current_signal.round(4)}\"\n  puts \"Histogram: #{current_histogram.round(4)}\"\nend\n\n# Zero line analysis\nif current_macd &gt; 0\n  puts \"12-EMA above 26-EMA: Bullish trend\"\nelse\n  puts \"12-EMA below 26-EMA: Bearish trend\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdfix/#example-histogram-momentum-analysis","title":"Example: Histogram Momentum Analysis","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nmacd, signal, histogram = SQA::TAI.macdfix(prices)\n\n# Analyze recent histogram trend\nrecent_histogram = histogram.compact.last(5)\n\nif recent_histogram.all? { |h| h &gt; 0 }\n  # All positive - bullish territory\n  if recent_histogram[-1] &gt; recent_histogram[-2]\n    puts \"Bullish Acceleration\"\n    puts \"MACD above signal and momentum increasing\"\n    puts \"Histogram: #{recent_histogram.map { |h| h.round(4) }}\"\n  else\n    puts \"Bullish Deceleration\"\n    puts \"MACD above signal but momentum slowing\"\n    puts \"Consider taking profits or tightening stops\"\n  end\nelsif recent_histogram.all? { |h| h &lt; 0 }\n  # All negative - bearish territory\n  if recent_histogram[-1] &lt; recent_histogram[-2]\n    puts \"Bearish Acceleration\"\n    puts \"MACD below signal and downward momentum increasing\"\n    puts \"Histogram: #{recent_histogram.map { |h| h.round(4) }}\"\n  else\n    puts \"Bearish Deceleration\"\n    puts \"MACD below signal but downward momentum slowing\"\n    puts \"Possible reversal approaching\"\n  end\nelse\n  # Mixed signals - in transition\n  puts \"Momentum Transition Zone\"\n  puts \"Histogram changing from positive to negative or vice versa\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdfix/#example-macdfix-divergence-detection","title":"Example: MACDFIX Divergence Detection","text":"<pre><code>prices = load_historical_prices('MSFT')\n\nmacd, signal, histogram = SQA::TAI.macdfix(prices)\n\n# Find recent price peaks\nprice_peak_1_idx = prices[-30..-15].index(prices[-30..-15].max) - 30\nprice_peak_2_idx = prices[-14..-1].index(prices[-14..-1].max) - 14\n\nprice_peak_1 = prices[price_peak_1_idx]\nprice_peak_2 = prices[price_peak_2_idx]\n\nmacd_peak_1 = macd[price_peak_1_idx]\nmacd_peak_2 = macd[price_peak_2_idx]\n\n# Bearish divergence: price makes higher high, MACD makes lower high\nif price_peak_2 &gt; price_peak_1 &amp;&amp; macd_peak_2 &lt; macd_peak_1\n  puts &lt;&lt;~DIVERGENCE\n    Bearish Divergence Detected!\n\n    Price Action:\n      First Peak:  #{price_peak_1.round(2)}\n      Second Peak: #{price_peak_2.round(2)} (higher high)\n\n    MACD (12/26):\n      First Peak:  #{macd_peak_1.round(4)}\n      Second Peak: #{macd_peak_2.round(4)} (lower high)\n\n    Interpretation: Price is making new highs but momentum is weakening.\n    This classic bearish divergence often precedes trend reversals.\n    Consider reducing long positions or preparing for a pullback.\n  DIVERGENCE\nend\n\n# Find recent price troughs for bullish divergence\nprice_trough_1_idx = prices[-30..-15].index(prices[-30..-15].min) - 30\nprice_trough_2_idx = prices[-14..-1].index(prices[-14..-1].min) - 14\n\nprice_trough_1 = prices[price_trough_1_idx]\nprice_trough_2 = prices[price_trough_2_idx]\n\nmacd_trough_1 = macd[price_trough_1_idx]\nmacd_trough_2 = macd[price_trough_2_idx]\n\n# Bullish divergence: price makes lower low, MACD makes higher low\nif price_trough_2 &lt; price_trough_1 &amp;&amp; macd_trough_2 &gt; macd_trough_1\n  puts &lt;&lt;~DIVERGENCE\n    Bullish Divergence Detected!\n\n    Price Action:\n      First Trough:  #{price_trough_1.round(2)}\n      Second Trough: #{price_trough_2.round(2)} (lower low)\n\n    MACD (12/26):\n      First Trough:  #{macd_trough_1.round(4)}\n      Second Trough: #{macd_trough_2.round(4)} (higher low)\n\n    Interpretation: Price is making new lows but downward momentum is weakening.\n    This classic bullish divergence often signals trend exhaustion.\n    Watch for bullish crossover as entry confirmation.\n  DIVERGENCE\nend\n</code></pre>"},{"location":"indicators/momentum/macdfix/#example-zero-line-strategy","title":"Example: Zero Line Strategy","text":"<pre><code>prices = load_historical_prices('NVDA')\n\nmacd, signal, histogram = SQA::TAI.macdfix(prices)\n\n# Zero line crossovers indicate trend changes\nprev_macd = macd[-2]\ncurrent_macd = macd.last\ncurrent_signal = signal.last\n\n# MACD crossing above zero (12-EMA crosses above 26-EMA)\nif prev_macd &lt; 0 &amp;&amp; current_macd &gt; 0\n  puts &lt;&lt;~CROSSOVER\n    MACDFIX Zero Line Bullish Crossover!\n\n    The 12-period EMA has crossed above the 26-period EMA.\n    This signals a shift from bearish to bullish trend.\n\n    MACD Value: #{current_macd.round(4)}\n    Signal Line: #{current_signal.round(4)}\n\n    Strategy:\n    - Look for buying opportunities\n    - Trend has shifted to bullish\n    - Wait for pullbacks to enter long positions\n  CROSSOVER\n\n# MACD crossing below zero (12-EMA crosses below 26-EMA)\nelsif prev_macd &gt; 0 &amp;&amp; current_macd &lt; 0\n  puts &lt;&lt;~CROSSOVER\n    MACDFIX Zero Line Bearish Crossover!\n\n    The 12-period EMA has crossed below the 26-period EMA.\n    This signals a shift from bullish to bearish trend.\n\n    MACD Value: #{current_macd.round(4)}\n    Signal Line: #{current_signal.round(4)}\n\n    Strategy:\n    - Exit long positions\n    - Trend has shifted to bearish\n    - Consider short opportunities or stay in cash\n  CROSSOVER\nend\n\n# Current trend status\nputs \"\\nCurrent Trend Analysis (12-EMA vs 26-EMA):\"\nif current_macd &gt; 0\n  distance_pct = ((current_macd.abs / prices.last) * 100).round(2)\n  puts \"Bullish: 12-EMA above 26-EMA by #{distance_pct}%\"\nelse\n  distance_pct = ((current_macd.abs / prices.last) * 100).round(2)\n  puts \"Bearish: 12-EMA below 26-EMA by #{distance_pct}%\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdfix/#example-combining-macdfix-with-price-action","title":"Example: Combining MACDFIX with Price Action","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\n# MACDFIX for momentum\nmacd, signal, histogram = SQA::TAI.macdfix(prices)\n\n# Add EMAs to see the underlying moving averages\nema_12 = SQA::TAI.ema(prices, period: 12)\nema_26 = SQA::TAI.ema(prices, period: 26)\n\n# Add longer-term trend filter\nsma_200 = SQA::TAI.sma(prices, period: 200)\n\ncurrent_price = prices.last\ncurrent_macd = macd.last\ncurrent_signal = signal.last\ncurrent_histogram = histogram.last\n\n# Multi-factor signal analysis\nputs &lt;&lt;~ANALYSIS\n  Comprehensive MACDFIX Analysis\n  ==============================\n\n  Price Action:\n    Current Price: $#{current_price.round(2)}\n    12-EMA:        $#{ema_12.last.round(2)}\n    26-EMA:        $#{ema_26.last.round(2)}\n    200-SMA:       $#{sma_200.last.round(2)}\n\n  MACD Components (Fixed 12/26):\n    MACD Line:   #{current_macd.round(4)}\n    Signal Line: #{current_signal.round(4)}\n    Histogram:   #{current_histogram.round(4)}\nANALYSIS\n\n# Strong buy signal criteria\nif current_macd &gt; current_signal &amp;&amp;      # MACD above signal\n   current_histogram &gt; 0 &amp;&amp;              # Positive histogram\n   histogram[-2] &lt; current_histogram &amp;&amp;  # Increasing histogram\n   current_price &gt; sma_200.last         # Above 200-day SMA\n\n  puts \"\\nSTRONG BUY SIGNAL - All indicators aligned:\"\n  puts \"  - MACD above signal line (bullish crossover active)\"\n  puts \"  - Histogram positive and increasing (momentum strengthening)\"\n  puts \"  - Price above 200-SMA (long-term uptrend)\"\n  puts \"  - 12-EMA above 26-EMA (intermediate trend bullish)\"\n\n# Strong sell signal criteria\nelsif current_macd &lt; current_signal &amp;&amp;      # MACD below signal\n      current_histogram &lt; 0 &amp;&amp;              # Negative histogram\n      histogram[-2] &gt; current_histogram &amp;&amp;  # Decreasing histogram\n      current_price &lt; sma_200.last          # Below 200-day SMA\n\n  puts \"\\nSTRONG SELL SIGNAL - All indicators aligned:\"\n  puts \"  - MACD below signal line (bearish crossover active)\"\n  puts \"  - Histogram negative and decreasing (downward momentum strengthening)\"\n  puts \"  - Price below 200-SMA (long-term downtrend)\"\n  puts \"  - 12-EMA below 26-EMA (intermediate trend bearish)\"\n\nelse\n  puts \"\\nMIXED SIGNALS - Wait for clearer confirmation\"\nend\n</code></pre>"},{"location":"indicators/momentum/macdfix/#example-custom-signal-period-analysis","title":"Example: Custom Signal Period Analysis","text":"<pre><code>prices = load_historical_prices('SPY')\n\n# Test different signal periods (only variable parameter in MACDFIX)\nsignal_periods = [5, 9, 14]  # Fast, standard, slow\n\nputs \"MACDFIX Signal Period Comparison\"\nputs \"=\" * 50\n\nsignal_periods.each do |period|\n  macd, signal, histogram = SQA::TAI.macdfix(prices, signal_period: period)\n\n  puts \"\\nSignal Period: #{period}\"\n  puts \"  MACD Line:   #{macd.last.round(4)}\"\n  puts \"  Signal Line: #{signal.last.round(4)}\"\n  puts \"  Histogram:   #{histogram.last.round(4)}\"\n\n  # Check crossover status\n  if macd.last &gt; signal.last\n    puts \"  Status: MACD above Signal (Bullish)\"\n  else\n    puts \"  Status: MACD below Signal (Bearish)\"\n  end\nend\n\nputs &lt;&lt;~NOTES\n\n  Signal Period Effects:\n\n  Period 5 (Fast):\n    - More responsive to price changes\n    - Generates more signals (more false positives)\n    - Better for short-term trading\n\n  Period 9 (Standard):\n    - Traditional MACD setting\n    - Balanced between speed and reliability\n    - Most widely used and tested\n\n  Period 14 (Slow):\n    - Smoother signal line\n    - Fewer but more reliable signals\n    - Better for position trading\nNOTES\n</code></pre>"},{"location":"indicators/momentum/macdfix/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/macdfix/#1-classic-macdfix-crossover","title":"1. Classic MACDFIX Crossover","text":"<p>The most common and straightforward MACDFIX strategy: - Buy Signal: MACD line crosses above signal line - Sell Signal: MACD line crosses below signal line - Best For: Trending markets, swing trading - Risk: Whipsaws in choppy, sideways markets</p>"},{"location":"indicators/momentum/macdfix/#2-zero-line-trend-trading","title":"2. Zero Line Trend Trading","text":"<p>Use the zero line to identify major trend changes: - Long Entry: MACD crosses above zero (confirms uptrend) - Short Entry: MACD crosses below zero (confirms downtrend) - Exit: When MACD crosses back through zero - Best For: Position trading, trend following - Risk: Late entries, trends may be maturing</p>"},{"location":"indicators/momentum/macdfix/#3-histogram-reversal","title":"3. Histogram Reversal","text":"<p>Early entry strategy using histogram momentum: - Entry: When histogram stops increasing/decreasing and reverses - Confirmation: Wait for 2-3 bars of histogram reversal - Exit: When histogram reverses again - Best For: Active traders seeking early entries - Risk: Earlier signals = more false signals</p>"},{"location":"indicators/momentum/macdfix/#4-divergence-trading","title":"4. Divergence Trading","text":"<p>Powerful reversal strategy for experienced traders: - Bullish: Price lower low + MACD higher low - Bearish: Price higher high + MACD lower high - Entry: Wait for MACDFIX crossover to confirm - Best For: Identifying trend reversals, swing trading - Risk: Divergences can persist, need confirmation</p>"},{"location":"indicators/momentum/macdfix/#differences-from-standard-macd","title":"Differences from Standard MACD","text":"Feature MACDFIX MACD Fast Period Fixed at 12 Customizable (default 12) Slow Period Fixed at 26 Customizable (default 26) Signal Period Customizable (default 9) Customizable (default 9) Use Case Standardized analysis Flexible analysis Optimization Risk Lower (fewer parameters) Higher (three parameters) Comparability High (always 12/26) Lower (varied settings) Complexity Simpler (one parameter) More complex (three parameters) Learning Curve Easier Slightly harder"},{"location":"indicators/momentum/macdfix/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/macdfix/#1-multi-timeframe-macdfix","title":"1. Multi-Timeframe MACDFIX","text":"<p>Use MACDFIX on different timeframes for confirmation: - Daily MACDFIX: Primary trend direction - 4-Hour MACDFIX: Entry timing - 1-Hour MACDFIX: Precise entry points - Rule: Only trade when all timeframes align</p>"},{"location":"indicators/momentum/macdfix/#2-macdfix-with-volume","title":"2. MACDFIX with Volume","text":"<p>Combine MACDFIX with volume analysis: - Strong Signal: MACDFIX crossover + volume spike - Weak Signal: MACDFIX crossover + low volume - Volume confirms the conviction behind the move</p>"},{"location":"indicators/momentum/macdfix/#3-macdfix-overboughtoversold","title":"3. MACDFIX Overbought/Oversold","text":"<p>While not designed for this, extreme MACDFIX values can signal exhaustion: - Track historical MACDFIX extremes for your security - Very high readings = potential pullback - Very low readings = potential bounce</p>"},{"location":"indicators/momentum/macdfix/#4-dual-signal-period-strategy","title":"4. Dual Signal Period Strategy","text":"<p>Run two MACDFIX calculations with different signal periods: - MACDFIX(9) for standard signals - MACDFIX(5) for early warning - Trade only when both agree</p>"},{"location":"indicators/momentum/macdfix/#common-pitfalls","title":"Common Pitfalls","text":""},{"location":"indicators/momentum/macdfix/#1-trading-every-crossover","title":"1. Trading Every Crossover","text":"<p>Not all MACDFIX crossovers are created equal: - Solution: Add filters (trend, volume, support/resistance) - Better: Wait for crossover + zero line alignment</p>"},{"location":"indicators/momentum/macdfix/#2-ignoring-the-trend-context","title":"2. Ignoring the Trend Context","text":"<p>MACDFIX works best in trending markets: - Problem: Generates false signals in choppy markets - Solution: Use trend filter (200-SMA or ADX)</p>"},{"location":"indicators/momentum/macdfix/#3-missing-the-fixed-parameters-limitation","title":"3. Missing the Fixed Parameters Limitation","text":"<p>MACDFIX uses 12/26 periods regardless of timeframe: - Issue: May be too slow for 5-minute charts - Issue: May be too fast for monthly charts - Solution: Use standard MACD for non-daily charts</p>"},{"location":"indicators/momentum/macdfix/#4-expecting-exact-tops-and-bottoms","title":"4. Expecting Exact Tops and Bottoms","text":"<p>MACDFIX is a momentum indicator, not a reversal indicator: - Reality: Signals often come after the move has started - Benefit: Confirms trends rather than picking tops/bottoms</p>"},{"location":"indicators/momentum/macdfix/#related-indicators","title":"Related Indicators","text":"<ul> <li>MACD - Full version with customizable fast/slow periods</li> <li>MACDEXT - Extended version with customizable MA types</li> <li>PPO - Percentage Price Oscillator (MACD in percentage form)</li> <li>EMA - Exponential Moving Average (MACDFIX foundation)</li> <li>RSI - Complementary momentum oscillator</li> <li>Stochastic - Another momentum indicator for confirmation</li> </ul>"},{"location":"indicators/momentum/macdfix/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/mfi/","title":"MFI (Money Flow Index)","text":""},{"location":"indicators/momentum/mfi/#overview","title":"Overview","text":"<p>The Money Flow Index (MFI) is a momentum oscillator that incorporates both price and volume data to measure buying and selling pressure. Often called \"volume-weighted RSI,\" MFI oscillates between 0 and 100 and uses typical price and volume to identify overbought and oversold conditions. Developed by Gene Quong and Avrum Soudack, MFI is particularly effective for spotting potential reversals when price and volume diverge.</p>"},{"location":"indicators/momentum/mfi/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of close prices <code>volume</code> Array Required Array of volume values <code>period</code> Integer 14 Number of periods for MFI calculation"},{"location":"indicators/momentum/mfi/#parameter-details","title":"Parameter Details","text":"<p>high, low, close - Complete OHLC data required for typical price calculation - Arrays must all be of equal length - Typical Price = (High + Low + Close) / 3 - Works on any timeframe with volume data</p> <p>volume - Must correspond to same timeframe as price data - Can be actual volume, tick volume, or other volume measures - Higher volume gives more weight to price movements - Essential for MFI calculation\u2014cannot be omitted</p> <p>period (time_period) - Standard setting is 14 periods (similar to RSI) - Shorter periods (7-10) create more sensitive indicator with more signals - Longer periods (20-25) create smoother indicator with fewer, more reliable signals - Recommended ranges:   - Day trading: 7-10 periods for quick signals   - Swing trading: 14 periods (standard)   - Position trading: 20-25 periods for major reversals</p>"},{"location":"indicators/momentum/mfi/#usage","title":"Usage","text":""},{"location":"indicators/momentum/mfi/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =   [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35,\n          49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80, 50.00,\n          50.20, 50.30]\nlow =    [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03,\n          49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10, 49.20,\n          49.30, 49.40]\nclose =  [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32,\n          49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45, 49.60,\n          49.80, 50.00]\nvolume = [2800, 3200, 3100, 2900, 3400, 3800, 3600, 4100,\n          4500, 4800, 3900, 3500, 3200, 3000, 3300, 3700,\n          4000, 4200]\n\n# Calculate 14-period MFI (standard)\nmfi = SQA::TAI.mfi(high, low, close, volume, period: 14)\n\nputs \"Current MFI: #{mfi.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/mfi/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># More sensitive 10-period MFI\nmfi_fast = SQA::TAI.mfi(high, low, close, volume, period: 10)\n\n# Smoother 20-period MFI\nmfi_slow = SQA::TAI.mfi(high, low, close, volume, period: 20)\n\nputs \"Fast MFI (10): #{mfi_fast.last.round(2)}\"\nputs \"Standard MFI (14): #{mfi.last.round(2)}\"\nputs \"Slow MFI (20): #{mfi_slow.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/mfi/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/momentum/mfi/#what-it-measures","title":"What It Measures","text":"<p>The MFI measures the flow of money into and out of a security over a specified period:</p> <ul> <li>Buying Pressure: How much volume is associated with price increases</li> <li>Selling Pressure: How much volume is associated with price decreases</li> <li>Volume-Weighted Momentum: Combines price momentum with volume strength</li> <li>Money Flow Ratio: Ratio of positive money flow to negative money flow</li> </ul> <p>MFI answers the question: \"Is the current price move supported by strong volume, or is it weak and likely to reverse?\"</p>"},{"location":"indicators/momentum/mfi/#calculation-method","title":"Calculation Method","text":"<p>MFI calculation involves several steps combining price and volume:</p> <ol> <li>Calculate Typical Price: (High + Low + Close) / 3</li> <li>Calculate Raw Money Flow: Typical Price \u00d7 Volume</li> <li>Identify Positive and Negative Money Flow: Compare current to previous typical price</li> <li>Sum Positive and Negative Money Flow: Over the specified period</li> <li>Calculate Money Flow Ratio: Positive Money Flow / Negative Money Flow</li> <li>Calculate MFI: 100 - (100 / (1 + Money Flow Ratio))</li> </ol> <p>Formula: <pre><code>Typical Price = (High + Low + Close) / 3\nRaw Money Flow = Typical Price \u00d7 Volume\n\nIf Typical Price &gt; Previous Typical Price:\n  Positive Money Flow += Raw Money Flow\nElse:\n  Negative Money Flow += Raw Money Flow\n\nMoney Flow Ratio = (Sum of Positive Money Flow over period) /\n                   (Sum of Negative Money Flow over period)\n\nMFI = 100 - (100 / (1 + Money Flow Ratio))\n</code></pre></p>"},{"location":"indicators/momentum/mfi/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: 0 to 100 (bounded oscillator)</li> <li>Type: Volume-weighted momentum oscillator</li> <li>Lag: Moderate (similar to RSI but volume-weighted)</li> <li>Best Used: Identifying overbought/oversold with volume confirmation, spotting divergences</li> <li>Limitations: Requires volume data; less effective in low-volume environments</li> </ul>"},{"location":"indicators/momentum/mfi/#interpretation","title":"Interpretation","text":""},{"location":"indicators/momentum/mfi/#value-ranges","title":"Value Ranges","text":"<p>Specific guidance on what different MFI values indicate:</p> <ul> <li>80-100: Overbought zone. Strong buying pressure but may be excessive. Price vulnerable to pullback, especially if volume is declining.</li> <li>50-80: Bullish momentum zone. Healthy buying pressure with good volume support. Uptrend likely to continue.</li> <li>20-50: Bearish momentum zone. Selling pressure present with volume confirmation. Downtrend may continue.</li> <li>0-20: Oversold zone. Strong selling pressure but may be excessive. Price vulnerable to bounce, especially if volume is declining.</li> </ul>"},{"location":"indicators/momentum/mfi/#key-levels","title":"Key Levels","text":"<ul> <li>Overbought (80): High buying pressure. When MFI crosses above 80, market may be overextended. Look for failure to stay above 80 as reversal signal.</li> <li>Oversold (20): High selling pressure. When MFI crosses below 20, market may be oversold. Look for MFI crossing back above 20 as reversal signal.</li> <li>Midpoint (50): Equilibrium between buying and selling pressure. MFI crossing above 50 suggests bullish bias; below 50 suggests bearish bias.</li> <li>Extreme Levels (90+/10-): Very rare and indicate extreme conditions. Usually precede sharp reversals.</li> </ul> <p>Important: MFI overbought/oversold can persist during strong trends. In strong uptrends, MFI often stays between 40-80. In strong downtrends, MFI often stays between 20-60.</p>"},{"location":"indicators/momentum/mfi/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read MFI signals:</p> <ol> <li>Volume Confirmation</li> <li>MFI rising with RSI: Volume confirms price move (strong signal)</li> <li>MFI falling while RSI rising: Price move lacks volume support (weak signal)</li> <li> <p>MFI diverging from price: Volume-price imbalance suggests reversal</p> </li> <li> <p>Momentum Changes</p> </li> <li>MFI crossing above 50: Buying pressure gaining control</li> <li>MFI crossing below 50: Selling pressure gaining control</li> <li> <p>MFI flattening at extremes: Momentum stabilizing, potential reversal</p> </li> <li> <p>Trend Quality</p> </li> <li>Strong uptrend: MFI consistently above 50, rarely below 40</li> <li>Strong downtrend: MFI consistently below 50, rarely above 60</li> <li>Ranging market: MFI oscillating between 30-70</li> </ol>"},{"location":"indicators/momentum/mfi/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/momentum/mfi/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: MFI crosses below 20 then rises back above 20</li> <li>Confirms oversold condition ending with volume support</li> <li> <p>Best when combined with price support level</p> </li> <li> <p>Confirmation Signal: MFI crosses above 50 from below</p> </li> <li>Indicates shift from selling to buying pressure</li> <li> <p>Volume-confirmed momentum change</p> </li> <li> <p>Divergence Signal: Price makes lower low, MFI makes higher low</p> </li> <li>Bullish divergence with volume showing strength</li> <li>Strongest when MFI is below 30</li> </ol> <p>Example Scenario: <pre><code>When MFI drops below 20 (oversold with high selling volume),\nthen crosses back above 20, consider long positions. Confirm with:\n- Price finding support at key level\n- Volume declining during selloff\n- RSI also oversold for double confirmation\n- Set stop loss below recent low\n</code></pre></p>"},{"location":"indicators/momentum/mfi/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: MFI crosses above 80 then falls back below 80</li> <li>Confirms overbought condition ending</li> <li> <p>Best when combined with price resistance level</p> </li> <li> <p>Confirmation Signal: MFI crosses below 50 from above</p> </li> <li>Indicates shift from buying to selling pressure</li> <li> <p>Volume-confirmed momentum change</p> </li> <li> <p>Divergence Signal: Price makes higher high, MFI makes lower high</p> </li> <li>Bearish divergence showing volume weakness</li> <li>Strongest when MFI is above 70</li> </ol> <p>Example Scenario: <pre><code>When MFI rises above 80 (overbought with high buying volume),\nthen crosses back below 80, consider closing longs or shorting. Confirm with:\n- Price reaching resistance level\n- Volume declining during rally\n- RSI also overbought for double confirmation\n- Set stop loss above recent high\n</code></pre></p>"},{"location":"indicators/momentum/mfi/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Pattern: Price makes lower low, MFI makes higher low - Identification: Compare price lows with MFI lows over 20-40 bars - Significance: Selling pressure weakening despite lower prices (volume drying up on decline) - Reliability: Very high when MFI is below 30 and forms clear higher low - Example: Stock drops from $50 to $45, then to $43. MFI drops to 18, then only to 25 on second low. Selling exhaustion likely.</p> <p>Bearish Divergence: - Pattern: Price makes higher high, MFI makes lower high - Identification: Compare price highs with MFI highs over 20-40 bars - Significance: Buying pressure weakening despite higher prices (volume drying up on rally) - Reliability: Very high when MFI is above 70 and forms clear lower high - Example: Stock rises from $50 to $55, then to $57. MFI rises to 85, then only to 78 on second high. Buying exhaustion likely.</p>"},{"location":"indicators/momentum/mfi/#best-practices","title":"Best Practices","text":""},{"location":"indicators/momentum/mfi/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When MFI works best:</p> <ul> <li>Market conditions: Most effective in liquid markets with consistent volume. Less reliable in illiquid or low-volume stocks. Works best when volume patterns are meaningful.</li> <li>Time frames: Excellent on daily and 4-hour charts. Less reliable on very short timeframes where volume can be erratic. Weekly charts provide strongest signals.</li> <li>Asset classes: Outstanding for stocks with good volume. Works well for forex (with tick volume), commodities, and liquid cryptocurrencies. Avoid for low-volume securities.</li> </ul>"},{"location":"indicators/momentum/mfi/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With RSI: Compare MFI and RSI to assess volume strength. When both are overbought/oversold, signal is very strong. When they diverge, MFI shows true strength (volume-weighted).</p> </li> <li> <p>With Price Action: MFI divergences at support/resistance are most powerful. MFI oversold at support = strong buy. MFI overbought at resistance = strong sell.</p> </li> <li> <p>With Trend Indicators: Use moving averages or ADX to identify trend. Only take MFI oversold signals in uptrends, MFI overbought signals in downtrends for highest probability.</p> </li> </ul>"},{"location":"indicators/momentum/mfi/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Ignoring the Trend: Taking MFI overbought signals in strong uptrends leads to early exits. In strong trends, MFI can stay overbought/oversold for extended periods. Always confirm trend first.</p> </li> <li> <p>Trading Without Volume Context: MFI depends on volume quality. In stocks with manipulated or irregular volume, MFI gives false signals. Ensure volume patterns are legitimate.</p> </li> <li> <p>Over-reliance on Levels: Using only 80/20 levels without considering divergences, trend, and support/resistance misses the full picture. MFI is most powerful with divergence analysis.</p> </li> <li> <p>Comparing Different Volume Types: Don't compare MFI values across assets with different volume characteristics (e.g., stocks vs forex tick volume). Calibrate thresholds for each market.</p> </li> </ol>"},{"location":"indicators/momentum/mfi/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading):</li> <li>Period: 7-10 for faster signals</li> <li>Thresholds: 80/20 or 85/15</li> <li> <p>Focus: Quick reversals with volume confirmation</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>Period: 14 (standard)</li> <li>Thresholds: 80/20 (traditional)</li> <li> <p>Focus: Multi-day moves, volume-confirmed divergences</p> </li> <li> <p>Long-term trading (position trading):</p> </li> <li>Period: 20-25 for major reversals</li> <li>Thresholds: 75/25 or 70/30 (wider range)</li> <li> <p>Focus: Monthly timeframe, major volume shifts</p> </li> <li> <p>Backtesting approach: Test MFI period and thresholds on historical data for your specific asset. Find levels where MFI extremes historically preceded reversals with good volume.</p> </li> </ul>"},{"location":"indicators/momentum/mfi/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical OHLCV data\nhigh_prices =   [48.70, 48.90, 49.20, 49.92, 50.19, 50.12, 50.00, 49.80,\n                 50.00, 50.30, 50.70, 51.00, 51.20, 51.40, 51.60, 51.50,\n                 51.30, 51.00, 50.80, 50.50]\nlow_prices =    [47.79, 48.39, 48.94, 49.50, 49.87, 49.20, 48.90, 49.10,\n                 49.20, 49.40, 49.60, 49.90, 50.10, 50.30, 50.50, 50.40,\n                 50.20, 50.00, 49.80, 49.60]\nclose_prices =  [48.20, 48.75, 49.07, 49.91, 50.13, 49.53, 49.25, 49.45,\n                 49.60, 50.00, 50.40, 50.90, 51.10, 51.30, 51.50, 51.40,\n                 51.20, 50.90, 50.70, 50.40]\nvolume_data =   [2800, 3100, 3600, 4500, 4800, 3900, 3200, 3300,\n                 3700, 4200, 4600, 5000, 5200, 5400, 5100, 4500,\n                 4000, 3800, 3500, 3200]\n\n# Calculate MFI and RSI for comparison\nmfi = SQA::TAI.mfi(high_prices, low_prices, close_prices, volume_data, period: 14)\nrsi = SQA::TAI.rsi(close_prices, period: 14)\n\n# Current values\ncurrent_price = close_prices.last\ncurrent_mfi = mfi.last\nprevious_mfi = mfi[-2]\ncurrent_rsi = rsi.last\n\nputs \"=== MFI Trading Analysis ===\"\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"Current MFI: #{current_mfi.round(2)}\"\nputs \"Current RSI: #{current_rsi.round(2)}\"\nputs \"MFI-RSI Spread: #{(current_mfi - current_rsi).round(2)}\"\nputs\n\n# Analyze volume strength\nif (current_mfi - current_rsi).abs &lt; 5\n  volume_assessment = \"Volume aligned with price\"\nelsif current_mfi &gt; current_rsi + 10\n  volume_assessment = \"Strong volume support (bullish)\"\nelsif current_rsi &gt; current_mfi + 10\n  volume_assessment = \"Weak volume support (bearish)\"\nend\n\nputs \"Volume Assessment: #{volume_assessment}\"\nputs\n\n# Trading signals\nif current_mfi &gt; 80\n  puts \"SIGNAL: MFI OVERBOUGHT\"\n  puts \"Current MFI: #{current_mfi.round(2)}\"\n\n  if current_mfi &lt; previous_mfi\n    puts \"MFI turning down from overbought - SELL SIGNAL\"\n    puts \"Entry: Short at $#{current_price.round(2)}\"\n    puts \"Stop Loss: $#{(current_price * 1.02).round(2)} (2% above)\"\n    puts \"Target: Previous support or MFI at 50\"\n  else\n    puts \"MFI still rising - wait for turn or exit longs\"\n  end\n\n  if current_rsi &lt; 70\n    puts \"\u26a0\ufe0f  RSI not overbought - volume overheating, possible exhaustion\"\n  end\n\nelsif current_mfi &lt; 20\n  puts \"SIGNAL: MFI OVERSOLD\"\n  puts \"Current MFI: #{current_mfi.round(2)}\"\n\n  if current_mfi &gt; previous_mfi\n    puts \"MFI turning up from oversold - BUY SIGNAL\"\n    puts \"Entry: Long at $#{current_price.round(2)}\"\n    puts \"Stop Loss: $#{(current_price * 0.98).round(2)} (2% below)\"\n    puts \"Target: Previous resistance or MFI at 50\"\n  else\n    puts \"MFI still falling - wait for turn or avoid catching falling knife\"\n  end\n\n  if current_rsi &gt; 30\n    puts \"\u26a0\ufe0f  RSI not oversold - volume-driven selloff, potential reversal\"\n  end\n\nelsif current_mfi &gt; 50 &amp;&amp; previous_mfi &lt;= 50\n  puts \"SIGNAL: MFI CROSSED ABOVE 50\"\n  puts \"Buying pressure taking control with volume\"\n  puts \"Consider entering long or adding to position\"\n\nelsif current_mfi &lt; 50 &amp;&amp; previous_mfi &gt;= 50\n  puts \"SIGNAL: MFI CROSSED BELOW 50\"\n  puts \"Selling pressure taking control with volume\"\n  puts \"Consider exiting longs or entering short\"\n\nelse\n  puts \"NEUTRAL: MFI at #{current_mfi.round(2)}\"\n  puts \"No clear signal - wait for extreme or crossover\"\nend\n\n# Divergence check (simplified)\nputs \"\\n=== Divergence Analysis ===\"\nprice_high_recent = close_prices.last(5).max\nprice_high_previous = close_prices[-10..-6].max\nmfi_high_recent = mfi.last(5).compact.max\nmfi_high_previous = mfi[-10..-6].compact.max\n\nif price_high_recent &gt; price_high_previous &amp;&amp; mfi_high_recent &lt; mfi_high_previous\n  puts \"\u26a0\ufe0f  BEARISH DIVERGENCE DETECTED\"\n  puts \"Price making higher highs, MFI making lower highs\"\n  puts \"Volume not supporting rally - potential reversal\"\n  puts \"Consider taking profits or preparing short position\"\nend\n\nprice_low_recent = close_prices.last(5).min\nprice_low_previous = close_prices[-10..-6].min\nmfi_low_recent = mfi.last(5).compact.min\nmfi_low_previous = mfi[-10..-6].compact.min\n\nif price_low_recent &lt; price_low_previous &amp;&amp; mfi_low_recent &gt; mfi_low_previous\n  puts \"\u26a0\ufe0f  BULLISH DIVERGENCE DETECTED\"\n  puts \"Price making lower lows, MFI making higher lows\"\n  puts \"Selling pressure weakening - potential reversal\"\n  puts \"Consider buying dips or preparing long position\"\nend\n</code></pre>"},{"location":"indicators/momentum/mfi/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/momentum/mfi/#similar-indicators","title":"Similar Indicators","text":"<ul> <li> <p>RSI (Relative Strength Index): Similar oscillator but without volume. RSI uses only price closes. MFI adds volume dimension. Use MFI when volume is reliable; RSI when volume data is questionable.</p> </li> <li> <p>CCI (Commodity Channel Index): Another overbought/oversold oscillator. CCI is unbounded and measures deviation from average. MFI is bounded 0-100 and volume-weighted. MFI better for volume confirmation.</p> </li> </ul>"},{"location":"indicators/momentum/mfi/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li> <p>OBV (On-Balance Volume): Pure volume indicator. Use OBV to confirm MFI signals. When both show divergence, reversal probability is very high.</p> </li> <li> <p>VWAP (Volume-Weighted Average Price): Shows average price weighted by volume. Combine with MFI: MFI oversold + price below VWAP = strong buy. MFI overbought + price above VWAP = strong sell.</p> </li> <li> <p>ADX (Average Directional Index): Trend strength indicator. Use ADX to filter MFI signals. Take MFI signals only when ADX &gt; 25 (trending) for highest win rate.</p> </li> </ul>"},{"location":"indicators/momentum/mfi/#indicator-family","title":"Indicator Family","text":"<p>MFI belongs to the volume-weighted momentum oscillator family: - MFI: Volume-weighted RSI, bounded 0-100 - RSI: Price-only momentum, bounded 0-100 - CMF (Chaikin Money Flow): Volume-weighted but different calculation - A/D Line: Cumulative volume-price indicator</p> <p>When to prefer MFI: When volume is reliable and meaningful. MFI is superior to RSI for identifying divergences because it captures volume changes. Essential for confirming price moves are volume-backed.</p>"},{"location":"indicators/momentum/mfi/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/momentum/mfi/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use MFI across multiple timeframes for comprehensive analysis:</p> <ul> <li>Higher timeframe MFI (weekly/daily) identifies major volume-backed moves and reversals</li> <li>Lower timeframe MFI (4H/1H) provides precise entry timing</li> <li>Strongest signals when all timeframes align (e.g., weekly MFI oversold + daily MFI oversold + 4H MFI turning up)</li> </ul> <p>Example: If daily MFI shows bearish divergence while 4H MFI crosses below 20, this represents high-probability short setup.</p>"},{"location":"indicators/momentum/mfi/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>MFI behavior varies by market conditions:</p> <ul> <li> <p>High Volume Environments (earnings, news events): MFI can spike to extremes quickly. Use wider thresholds (85/15) to avoid false signals.</p> </li> <li> <p>Low Volume Environments (holidays, overnight): MFI becomes unreliable. Avoid trading MFI signals during low-volume periods.</p> </li> <li> <p>Trending Markets: MFI stays elevated in uptrends (40-80) or depressed in downtrends (20-60). Adjust thresholds based on trend.</p> </li> <li> <p>Accumulation/Distribution: MFI between 40-60 with low volatility often indicates accumulation (before uptrend) or distribution (before downtrend).</p> </li> </ul>"},{"location":"indicators/momentum/mfi/#statistical-validation","title":"Statistical Validation","text":"<p>MFI reliability metrics:</p> <ul> <li> <p>Success Rate: MFI divergences have 65-75% success rate when combined with support/resistance, higher than RSI alone (55-65%).</p> </li> <li> <p>Volume Requirement: MFI signals most reliable when recent volume is at least 80% of average volume. Below that, reliability drops significantly.</p> </li> <li> <p>Optimal Thresholds: Studies show 80/20 optimal for most markets, but crypto and volatile stocks benefit from 85/15 thresholds.</p> </li> <li> <p>Divergence Lead Time: MFI divergences typically lead price reversals by 3-10 bars on the timeframe being analyzed.</p> </li> </ul>"},{"location":"indicators/momentum/mfi/#references","title":"References","text":"<ul> <li>Quong, Gene and Soudack, Avrum. \"Money Flow Index\" - Original MFI developers</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999) - MFI interpretation and volume analysis</li> <li>Achelis, Steven B. \"Technical Analysis from A to Z\" (2000) - MFI practical applications</li> <li>TradingView: MFI Educational Guide</li> <li>StockCharts: MFI Technical Analysis</li> </ul>"},{"location":"indicators/momentum/mfi/#see-also","title":"See Also","text":"<ul> <li>Momentum Indicators Overview</li> <li>RSI - Price-Only Momentum</li> <li>Volume Indicators</li> <li>Basic Usage Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/momentum/minus_di/","title":"Minus Directional Indicator (MINUS_DI)","text":"<p>The Minus Directional Indicator (-DI) measures the strength of downward price movement. It's a core component of J. Welles Wilder's Directional Movement System and is used in combination with the Plus Directional Indicator (+DI) and Average Directional Index (ADX) to identify trend direction and strength.</p>"},{"location":"indicators/momentum/minus_di/#formula","title":"Formula","text":"<p>-DI is calculated using the following steps: 1. Calculate -DM (Minus Directional Movement): Maximum of (Prior Low - Current Low, 0) 2. Calculate True Range (TR): Maximum of (High-Low, |High-Close|, |Low-Close|) 3. Smooth both -DM and TR over the period 4. -DI = (Smoothed -DM / Smoothed TR) * 100</p>"},{"location":"indicators/momentum/minus_di/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of close prices <code>period</code> Integer No 14 Number of periods for smoothing"},{"location":"indicators/momentum/minus_di/#returns","title":"Returns","text":"<p>Returns an array of -DI values ranging from 0 to 100. Higher values indicate stronger downward movement.</p>"},{"location":"indicators/momentum/minus_di/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32, 49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45]\n\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\nputs \"Current -DI: #{minus_di.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/minus_di/#interpretation","title":"Interpretation","text":"-DI Value Meaning 0-20 Weak downward movement 20-40 Moderate downward pressure 40-60 Strong downward movement 60-100 Very strong downward movement"},{"location":"indicators/momentum/minus_di/#key-signals","title":"Key Signals","text":"<p>-DI vs +DI Comparison: - -DI &gt; +DI: Downtrend in control - bearish bias - -DI &lt; +DI: Uptrend in control - bullish bias - Crossovers: Signal potential trend changes</p> <p>Important: -DI shows directional strength, but use with ADX to confirm overall trend strength!</p>"},{"location":"indicators/momentum/minus_di/#example-directional-movement-analysis","title":"Example: Directional Movement Analysis","text":"<pre><code>high, low, close = load_historical_ohlc('SPY')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\n\nif current_minus &gt; current_plus\n  spread = current_minus - current_plus\n  puts \"DOWNTREND IN CONTROL\"\n  puts \"-DI: #{current_minus.round(2)}, +DI: #{current_plus.round(2)}\"\n  puts \"Spread: #{spread.round(2)} points\"\n\n  if spread &gt; 20\n    puts \"Strong downtrend dominance\"\n  elsif spread &gt; 10\n    puts \"Moderate downtrend\"\n  else\n    puts \"Weak downtrend - watch for reversal\"\n  end\nelse\n  puts \"UPTREND IN CONTROL\"\n  puts \"+DI: #{current_plus.round(2)}, -DI: #{current_minus.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/minus_di/#example-di-crossover-system","title":"Example: DI Crossover System","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\n# Current values\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\n\n# Previous values\nprev_plus = plus_di[-2]\nprev_minus = minus_di[-2]\n\n# Detect crossovers\nif current_minus &gt; current_plus &amp;&amp; prev_minus &lt;= prev_plus\n  puts \"BEARISH CROSSOVER: -DI crossed above +DI\"\n  puts \"-DI: #{current_minus.round(2)}, +DI: #{current_plus.round(2)}\"\n  puts \"SELL SIGNAL - Downtrend starting\"\nelsif current_plus &gt; current_minus &amp;&amp; prev_plus &lt;= prev_minus\n  puts \"BULLISH CROSSOVER: +DI crossed above -DI\"\n  puts \"+DI: #{current_plus.round(2)}, -DI: #{current_minus.round(2)}\"\n  puts \"BUY SIGNAL - Uptrend starting\"\nelse\n  puts \"NO CROSSOVER\"\n  puts \"Current: -DI: #{current_minus.round(2)}, +DI: #{current_plus.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/minus_di/#example-complete-directional-movement-system","title":"Example: Complete Directional Movement System","text":"<pre><code>high, low, close = load_historical_ohlc('MSFT')\n\nadx = SQA::TAI.adx(high, low, close, period: 14)\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\ncurrent_adx = adx.last\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\n\n# Wilder's Directional Movement System\nputs \"=== DIRECTIONAL MOVEMENT SYSTEM ===\"\nputs \"ADX: #{current_adx.round(2)}\"\nputs \"+DI: #{current_plus.round(2)}\"\nputs \"-DI: #{current_minus.round(2)}\"\nputs \"\"\n\nif current_adx &gt; 25\n  # Strong trend exists\n  if current_minus &gt; current_plus\n    puts \"STRONG DOWNTREND\"\n    puts \"Strategy: Short or avoid long positions\"\n    puts \"Confirmation: -DI (#{current_minus.round(2)}) &gt; +DI (#{current_plus.round(2)})\"\n    puts \"Trend Strength: ADX #{current_adx.round(2)}\"\n  else\n    puts \"STRONG UPTREND\"\n    puts \"Strategy: Long positions favored\"\n    puts \"Confirmation: +DI (#{current_plus.round(2)}) &gt; -DI (#{current_minus.round(2)})\"\n    puts \"Trend Strength: ADX #{current_adx.round(2)}\"\n  end\nelsif current_adx &gt; 20\n  # Developing trend\n  if current_minus &gt; current_plus\n    puts \"DEVELOPING DOWNTREND\"\n    puts \"Watch for ADX rise to confirm\"\n  else\n    puts \"DEVELOPING UPTREND\"\n    puts \"Watch for ADX rise to confirm\"\n  end\nelse\n  # Weak/no trend\n  puts \"WEAK TREND / RANGE-BOUND\"\n  puts \"Avoid directional strategies\"\n  puts \"DI values: -DI: #{current_minus.round(2)}, +DI: #{current_plus.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/minus_di/#example-di-trend-strength","title":"Example: -DI Trend Strength","text":"<pre><code>high, low, close = load_historical_ohlc('TSLA')\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\ncurrent_di = minus_di.last\ndi_5_bars_ago = minus_di[-5]\n\nchange = current_di - di_5_bars_ago\n\nputs \"-DI Analysis:\"\nputs \"Current: #{current_di.round(2)}\"\nputs \"5 bars ago: #{di_5_bars_ago.round(2)}\"\nputs \"Change: #{change &gt; 0 ? '+' : ''}#{change.round(2)}\"\nputs \"\"\n\nif current_di &gt; 40\n  if change &gt; 5\n    puts \"STRONG &amp; RISING downward pressure\"\n    puts \"Downtrend accelerating\"\n  elsif change &lt; -5\n    puts \"STRONG but WEAKENING downward pressure\"\n    puts \"Potential trend reversal ahead\"\n  else\n    puts \"STRONG downward pressure (stable)\"\n  end\nelsif current_di &gt; 25\n  puts \"MODERATE downward pressure\"\n  puts change &gt; 0 ? \"Building momentum\" : \"Losing momentum\"\nelse\n  puts \"WEAK downward pressure\"\n  puts \"Limited downside strength\"\nend\n</code></pre>"},{"location":"indicators/momentum/minus_di/#example-di-extremes-and-reversals","title":"Example: DI Extremes and Reversals","text":"<pre><code>high, low, close = load_historical_ohlc('SPY')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\n# Look for extreme readings\nrecent_minus_di = minus_di.last(20)\nmax_minus_di = recent_minus_di.max\ncurrent_minus = minus_di.last\ncurrent_plus = plus_di.last\n\nif current_minus &gt; 60\n  puts \"EXTREME -DI READING: #{current_minus.round(2)}\"\n  puts \"Very strong downtrend - watch for exhaustion\"\n\n  # Check if starting to decline from extreme\n  if current_minus &lt; max_minus_di - 5\n    puts \"WARNING: -DI falling from extreme high\"\n    puts \"Possible downtrend exhaustion\"\n    puts \"Consider reducing short exposure\"\n  end\nelsif current_minus &lt; 15 &amp;&amp; current_plus &gt; 30\n  puts \"VERY LOW -DI: #{current_minus.round(2)}\"\n  puts \"Minimal downward pressure\"\n  puts \"Strong uptrend likely (+DI: #{current_plus.round(2)})\"\nend\n</code></pre>"},{"location":"indicators/momentum/minus_di/#example-di-with-moving-average-filter","title":"Example: -DI with Moving Average Filter","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\n\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\ncurrent_price = close.last\ncurrent_minus = minus_di.last\ncurrent_plus = plus_di.last\n\n# Determine overall trend from moving averages\nmajor_trend = sma_50.last &gt; sma_200.last ? \"UP\" : \"DOWN\"\n\nputs \"Major Trend (MA): #{major_trend}\"\nputs \"Price: #{current_price.round(2)}\"\nputs \"-DI: #{current_minus.round(2)}, +DI: #{current_plus.round(2)}\"\nputs \"\"\n\nif major_trend == \"DOWN\"\n  # In downtrend - look for -DI confirmation\n  if current_minus &gt; current_plus\n    puts \"CONFIRMED DOWNTREND\"\n    puts \"Both MA and DI show downtrend\"\n    puts \"High-probability short setup\"\n  else\n    puts \"DIVERGENCE: MA shows down, but +DI &gt; -DI\"\n    puts \"Possible trend reversal developing\"\n    puts \"Wait for confirmation\"\n  end\nelse\n  # In uptrend\n  if current_minus &gt; current_plus\n    puts \"DIVERGENCE: MA shows up, but -DI &gt; +DI\"\n    puts \"Uptrend may be weakening\"\n    puts \"Caution with new longs\"\n  else\n    puts \"CONFIRMED UPTREND\"\n    puts \"Continue with trend-following strategy\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/minus_di/#common-settings","title":"Common Settings","text":"Period Use Case 7 Short-term, more sensitive to changes 14 Standard (Wilder's original recommendation) 21 Longer-term, smoother signals 28 Very long-term trend analysis"},{"location":"indicators/momentum/minus_di/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/minus_di/#1-basic-di-crossover","title":"1. Basic DI Crossover","text":"<ul> <li>Sell: -DI crosses above +DI</li> <li>Buy: +DI crosses above -DI</li> <li>Filter: Only trade when ADX &gt; 20</li> </ul>"},{"location":"indicators/momentum/minus_di/#2-di-extreme-reversal","title":"2. DI Extreme Reversal","text":"<ul> <li>Watch for -DI &gt; 60 (extreme downtrend)</li> <li>Wait for -DI to start declining</li> <li>Buy when +DI crosses above falling -DI</li> </ul>"},{"location":"indicators/momentum/minus_di/#3-di-spread","title":"3. DI Spread","text":"<ul> <li>Measure spread between -DI and +DI</li> <li>Spread &gt; 20: Very strong directional bias</li> <li>Spread &lt; 5: Weak trend, avoid directional trades</li> </ul>"},{"location":"indicators/momentum/minus_di/#4-di-with-adx-confirmation","title":"4. DI with ADX Confirmation","text":"<ul> <li>Strong Downtrend: -DI &gt; +DI AND ADX &gt; 25</li> <li>Developing Downtrend: -DI &gt; +DI AND ADX rising</li> <li>Weakening Downtrend: -DI &gt; +DI BUT ADX falling</li> </ul>"},{"location":"indicators/momentum/minus_di/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/minus_di/#1-di-divergence","title":"1. DI Divergence","text":"<ul> <li>Price makes lower low, but -DI makes lower high</li> <li>Suggests weakening downtrend</li> <li>Early reversal signal</li> </ul>"},{"location":"indicators/momentum/minus_di/#2-di-clustering","title":"2. DI Clustering","text":"<ul> <li>When -DI and +DI are very close (&lt;5 points apart)</li> <li>Indicates consolidation/range-bound market</li> <li>Wait for clear separation before trading</li> </ul>"},{"location":"indicators/momentum/minus_di/#3-di-momentum","title":"3. DI Momentum","text":"<ul> <li>Track rate of change in -DI</li> <li>Rising -DI = building downward momentum</li> <li>Falling -DI = weakening downward pressure</li> </ul>"},{"location":"indicators/momentum/minus_di/#related-indicators","title":"Related Indicators","text":"<ul> <li>ADX - Average Directional Index (trend strength)</li> <li>PLUS_DI - Plus Directional Indicator (upward movement)</li> <li>ADXR - ADX Rating</li> <li>DX - Directional Movement Index</li> </ul>"},{"location":"indicators/momentum/minus_di/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/momentum/minus_dm/","title":"Minus Directional Movement (MINUS_DM)","text":"<p>The Minus Directional Movement (MINUS_DM) indicator measures the raw magnitude of downward price movement between periods. It is a foundational component of J. Welles Wilder's Directional Movement System and serves as the building block for calculating the Minus Directional Indicator (-DI). Unlike -DI which normalizes the movement relative to volatility, MINUS_DM provides the absolute downward movement in price units.</p>"},{"location":"indicators/momentum/minus_dm/#formula","title":"Formula","text":"<p>MINUS_DM measures the downward movement between consecutive periods:</p> <ol> <li>Calculate potential downward move: Low(previous) - Low(current)</li> <li>Calculate potential upward move: High(current) - High(previous)</li> <li>MINUS_DM = Low(previous) - Low(current) IF:</li> <li>Downward move &gt; Upward move, AND</li> <li>Downward move &gt; 0</li> <li>Otherwise MINUS_DM = 0</li> <li>Apply smoothing over the period (typically 14)</li> </ol> <p>The smoothed MINUS_DM is then used in the -DI calculation: -DI = (MINUS_DM / ATR) * 100</p>"},{"location":"indicators/momentum/minus_dm/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>period</code> Integer No 14 Smoothing period (Wilder's default)"},{"location":"indicators/momentum/minus_dm/#returns","title":"Returns","text":"<p>Returns an array of MINUS_DM values in price units. Values are unbounded and depend on the price scale of the instrument being analyzed.</p>"},{"location":"indicators/momentum/minus_dm/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh = [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow =  [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\n\n# Calculate MINUS_DM\nminus_dm = SQA::TAI.minus_dm(high, low, period: 14)\n\nputs \"Current MINUS_DM: #{minus_dm.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/minus_dm/#interpretation","title":"Interpretation","text":"MINUS_DM Value Interpretation High values Large downward movements occurring Low values Small or no downward movements 0 No downward directional movement <p>Important: MINUS_DM is measured in price units and is NOT normalized. A MINUS_DM of 2.50 means different things for a $10 stock versus a $1000 stock. For normalized comparisons, use -DI instead.</p>"},{"location":"indicators/momentum/minus_dm/#understanding-raw-vs-normalized-movement","title":"Understanding Raw vs Normalized Movement","text":""},{"location":"indicators/momentum/minus_dm/#minus_dm-raw-movement","title":"MINUS_DM (Raw Movement)","text":"<ul> <li>Measured in actual price units (dollars, points, etc.)</li> <li>Unbounded - depends on price scale</li> <li>Example: $2.50 downward movement</li> <li>Not comparable across different instruments or time periods</li> </ul>"},{"location":"indicators/momentum/minus_dm/#minus_di-normalized-movement","title":"MINUS_DI (Normalized Movement)","text":"<ul> <li>Normalized by dividing by ATR (Average True Range)</li> <li>Expressed as percentage: (MINUS_DM / ATR) * 100</li> <li>Bounded between 0 and 100</li> <li>Comparable across instruments and timeframes</li> <li>Accounts for current volatility</li> </ul>"},{"location":"indicators/momentum/minus_dm/#example-raw-vs-normalized-comparison","title":"Example: Raw vs Normalized Comparison","text":"<pre><code>high =  [100.50, 101.20, 100.80, 99.50, 98.75, 99.20, 100.10, 99.90, 98.50, 97.80]\nlow =   [99.20, 100.10, 99.30, 98.10, 97.50, 98.30, 99.20, 98.60, 97.20, 96.50]\nclose = [100.00, 100.50, 99.80, 98.50, 98.00, 98.80, 99.70, 99.00, 97.80, 97.20]\n\n# Raw downward movement (in price units)\nminus_dm = SQA::TAI.minus_dm(high, low, period: 14)\n\n# Normalized downward movement (as percentage of volatility)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\nputs \"MINUS_DM (raw): $#{minus_dm.last.round(2)}\"\nputs \"MINUS_DI (normalized): #{minus_di.last.round(2)}%\"\nputs \"\"\nputs \"Raw value depends on price scale\"\nputs \"Normalized value accounts for volatility\"\n</code></pre>"},{"location":"indicators/momentum/minus_dm/#example-building-block-for-di","title":"Example: Building Block for -DI","text":"<pre><code>high =  [50.19, 50.12, 50.10, 50.00, 49.75, 49.80, 49.95, 50.20, 50.50, 50.75]\nlow =   [49.87, 49.20, 49.00, 48.90, 49.00, 49.10, 49.30, 49.80, 50.10, 50.30]\nclose = [50.13, 49.53, 49.50, 49.25, 49.20, 49.45, 49.70, 50.00, 50.35, 50.60]\n\n# Component calculation\nminus_dm = SQA::TAI.minus_dm(high, low, period: 14)\natr = SQA::TAI.atr(high, low, close, period: 14)\n\n# Manual -DI calculation (for illustration)\nmanual_minus_di = (minus_dm.last / atr.last) * 100\n\n# Compare with library -DI\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\nputs \"MINUS_DM: #{minus_dm.last.round(4)}\"\nputs \"ATR: #{atr.last.round(4)}\"\nputs \"Manual -DI: #{manual_minus_di.round(2)}%\"\nputs \"Library -DI: #{minus_di.last.round(2)}%\"\nputs \"\"\nputs \"MINUS_DM / ATR normalization makes -DI volatility-adjusted\"\n</code></pre>"},{"location":"indicators/momentum/minus_dm/#example-comparing-instruments","title":"Example: Comparing Instruments","text":"<pre><code># Stock A: Low-priced stock ($10 range)\nstock_a_high = [10.50, 10.75, 10.60, 10.40, 10.20, 10.30, 10.45]\nstock_a_low =  [10.20, 10.40, 10.30, 10.10, 9.90, 10.00, 10.15]\n\n# Stock B: High-priced stock ($500 range)\nstock_b_high = [510.50, 512.75, 511.60, 509.40, 507.20, 508.30, 510.45]\nstock_b_low =  [509.20, 510.40, 510.30, 508.10, 505.90, 506.00, 508.15]\n\nminus_dm_a = SQA::TAI.minus_dm(stock_a_high, stock_a_low, period: 5)\nminus_dm_b = SQA::TAI.minus_dm(stock_b_high, stock_b_low, period: 5)\n\nputs \"Stock A MINUS_DM: $#{minus_dm_a.last.round(2)}\"\nputs \"Stock B MINUS_DM: $#{minus_dm_b.last.round(2)}\"\nputs \"\"\nputs \"Raw MINUS_DM values are NOT comparable across different price levels\"\nputs \"Both stocks have similar percentage moves, but different MINUS_DM\"\nputs \"\"\nputs \"Solution: Use MINUS_DI for normalized comparison\"\n</code></pre>"},{"location":"indicators/momentum/minus_dm/#example-directional-movement-analysis","title":"Example: Directional Movement Analysis","text":"<pre><code>high = [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19,\n        50.12, 50.10, 50.00, 49.75, 49.80, 49.95, 50.20, 50.50, 50.75, 51.00]\nlow =  [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87,\n        49.20, 49.00, 48.90, 49.00, 49.10, 49.30, 49.80, 50.10, 50.30, 50.60]\n\n# Compare upward vs downward movement\nplus_dm = SQA::TAI.plus_dm(high, low, period: 14)\nminus_dm = SQA::TAI.minus_dm(high, low, period: 14)\n\ncurrent_plus = plus_dm.last\ncurrent_minus = minus_dm.last\n\nputs \"PLUS_DM (upward movement): #{current_plus.round(2)}\"\nputs \"MINUS_DM (downward movement): #{current_minus.round(2)}\"\nputs \"\"\n\nif current_plus &gt; current_minus\n  puts \"Upward directional movement is stronger\"\n  puts \"Difference: #{(current_plus - current_minus).round(2)} price units\"\nelsif current_minus &gt; current_plus\n  puts \"Downward directional movement is stronger\"\n  puts \"Difference: #{(current_minus - current_plus).round(2)} price units\"\nelse\n  puts \"Directional movements are balanced\"\nend\n</code></pre>"},{"location":"indicators/momentum/minus_dm/#common-settings","title":"Common Settings","text":"Period Use Case 14 Standard (Wilder's original) 7 More responsive to recent moves 21 Smoother, longer-term perspective"},{"location":"indicators/momentum/minus_dm/#when-to-use-minus_dm-vs-minus_di","title":"When to Use MINUS_DM vs MINUS_DI","text":""},{"location":"indicators/momentum/minus_dm/#use-minus_dm-when","title":"Use MINUS_DM when:","text":"<ul> <li>Implementing custom directional indicators</li> <li>Analyzing absolute movement magnitudes</li> <li>Debugging or understanding the calculation chain</li> <li>Educational/research purposes</li> </ul>"},{"location":"indicators/momentum/minus_dm/#use-minus_di-when","title":"Use MINUS_DI when:","text":"<ul> <li>Trading and signal generation</li> <li>Comparing different instruments</li> <li>Analyzing strength of downward movement</li> <li>Combining with other normalized indicators (ADX, DX)</li> </ul>"},{"location":"indicators/momentum/minus_dm/#recommendation","title":"Recommendation","text":"<p>For most trading applications, use MINUS_DI (-DI) instead of MINUS_DM because: 1. Normalized for volatility comparison 2. Bounded range (0-100) easier to interpret 3. Comparable across instruments and timeframes 4. Integrates with ADX system for trend analysis</p>"},{"location":"indicators/momentum/minus_dm/#example-complete-directional-system","title":"Example: Complete Directional System","text":"<pre><code>high =  [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19,\n         50.12, 50.10, 50.00, 49.75, 49.80, 49.95, 50.20, 50.50, 50.75, 51.00]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87,\n         49.20, 49.00, 48.90, 49.00, 49.10, 49.30, 49.80, 50.10, 50.30, 50.60]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32, 49.91, 50.13,\n         49.53, 49.50, 49.25, 49.20, 49.45, 49.70, 50.00, 50.35, 50.60, 50.85]\n\n# Building blocks (raw movement)\nplus_dm = SQA::TAI.plus_dm(high, low, period: 14)\nminus_dm = SQA::TAI.minus_dm(high, low, period: 14)\natr = SQA::TAI.atr(high, low, close, period: 14)\n\n# Normalized indicators (for trading)\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\nadx = SQA::TAI.adx(high, low, close, period: 14)\n\nputs \"=== Raw Components (Price Units) ===\"\nputs \"PLUS_DM: #{plus_dm.last.round(4)}\"\nputs \"MINUS_DM: #{minus_dm.last.round(4)}\"\nputs \"ATR: #{atr.last.round(4)}\"\nputs \"\"\n\nputs \"=== Normalized Indicators (Percentage) ===\"\nputs \"+DI: #{plus_di.last.round(2)}%\"\nputs \"-DI: #{minus_di.last.round(2)}%\"\nputs \"ADX: #{adx.last.round(2)}\"\nputs \"\"\n\n# Trading logic uses normalized values\nif adx.last &gt; 25\n  if plus_di.last &gt; minus_di.last\n    puts \"STRONG UPTREND - Consider long positions\"\n  else\n    puts \"STRONG DOWNTREND - Consider short positions\"\n  end\nelse\n  puts \"WEAK TREND - Use range-trading strategies\"\nend\n</code></pre>"},{"location":"indicators/momentum/minus_dm/#technical-notes","title":"Technical Notes","text":"<ol> <li>Smoothing: MINUS_DM uses Wilder's smoothing method</li> <li>Period Selection: Default 14 balances responsiveness vs stability</li> <li>Directional Rules: Only counts movement in one direction per period</li> <li>Zero Values: MINUS_DM = 0 when upward move exceeds downward move</li> <li>Price Units: Results are in the same units as input prices</li> </ol>"},{"location":"indicators/momentum/minus_dm/#relationship-with-other-indicators","title":"Relationship with Other Indicators","text":"<pre><code>MINUS_DM (raw) \u2192 Used to calculate \u2192 MINUS_DI (normalized)\n                                            \u2193\nPLUS_DM (raw) \u2192 Used to calculate \u2192 PLUS_DI (normalized) \u2192 DX \u2192 ADX\n                                            \u2193\n                           ATR (volatility normalization)\n</code></pre>"},{"location":"indicators/momentum/minus_dm/#related-indicators","title":"Related Indicators","text":"<ul> <li>MINUS_DI - Normalized version (recommended for trading)</li> <li>PLUS_DM - Upward directional movement</li> <li>PLUS_DI - Plus Directional Indicator</li> <li>ADX - Average Directional Index (trend strength)</li> <li>DX - Directional Movement Index</li> <li>ATR - Average True Range (volatility measure)</li> </ul>"},{"location":"indicators/momentum/minus_dm/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/momentum/mom/","title":"Momentum (MOM)","text":"<p>The Momentum indicator measures the rate of change in prices over a specified time period. It's one of the simplest momentum indicators, showing the difference between the current price and the price N periods ago.</p>"},{"location":"indicators/momentum/mom/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25]\n\n# Calculate 10-period Momentum\nmom = SQA::TAI.mom(prices, period: 10)\n\nputs \"Current Momentum: #{mom.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/mom/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 10 Lookback period"},{"location":"indicators/momentum/mom/#returns","title":"Returns","text":"<p>Returns an array of momentum values. The first <code>period</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/mom/#formula","title":"Formula","text":"<pre><code>Momentum = Current Price - Price N periods ago\n</code></pre>"},{"location":"indicators/momentum/mom/#interpretation","title":"Interpretation","text":"<ul> <li>Positive values: Upward momentum (price higher than N periods ago)</li> <li>Negative values: Downward momentum (price lower than N periods ago)</li> <li>Zero line: No momentum (price unchanged)</li> <li>Increasing values: Momentum strengthening</li> <li>Decreasing values: Momentum weakening</li> </ul>"},{"location":"indicators/momentum/mom/#example-basic-momentum-strategy","title":"Example: Basic Momentum Strategy","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nmom = SQA::TAI.mom(prices, period: 10)\n\ncurrent_mom = mom.last\nprevious_mom = mom[-2]\n\nif current_mom &gt; 0\n  puts \"Positive momentum: #{current_mom.round(2)}\"\n  if current_mom &gt; previous_mom\n    puts \"Momentum increasing - trend strengthening\"\n  else\n    puts \"Momentum decreasing - trend weakening\"\n  end\nelsif current_mom &lt; 0\n  puts \"Negative momentum: #{current_mom.round(2)}\"\n  if current_mom &lt; previous_mom\n    puts \"Momentum decreasing - downtrend strengthening\"\n  else\n    puts \"Momentum increasing - downtrend weakening\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/mom/#example-zero-line-crossovers","title":"Example: Zero Line Crossovers","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nmom = SQA::TAI.mom(prices, period: 14)\n\n# Check for zero line crossovers\nif mom[-2] &lt; 0 &amp;&amp; mom[-1] &gt; 0\n  puts \"Momentum crossed above zero - Bullish signal\"\n  puts \"Price now higher than 14 periods ago\"\nelsif mom[-2] &gt; 0 &amp;&amp; mom[-1] &lt; 0\n  puts \"Momentum crossed below zero - Bearish signal\"\n  puts \"Price now lower than 14 periods ago\"\nend\n</code></pre>"},{"location":"indicators/momentum/mom/#example-momentum-divergence","title":"Example: Momentum Divergence","text":"<pre><code>prices = load_historical_prices('MSFT')\n\nmom = SQA::TAI.mom(prices, period: 10)\n\n# Find recent price and momentum peaks\nprice_peak_1 = prices[-30..-15].max\nprice_peak_2 = prices[-14..-1].max\n\nmom_peak_1_idx = prices[-30..-15].index(price_peak_1) - 30\nmom_peak_2_idx = prices[-14..-1].index(price_peak_2) - 14\n\nmom_peak_1 = mom[mom_peak_1_idx]\nmom_peak_2 = mom[mom_peak_2_idx]\n\n# Bearish divergence\nif price_peak_2 &gt; price_peak_1 &amp;&amp; mom_peak_2 &lt; mom_peak_1\n  puts \"Bearish Divergence!\"\n  puts \"Price making higher highs but momentum making lower highs\"\n  puts \"Potential trend reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/mom/#example-multi-period-momentum","title":"Example: Multi-Period Momentum","text":"<pre><code>prices = load_historical_prices('NVDA')\n\n# Different momentum periods\nmom_5 = SQA::TAI.mom(prices, period: 5)\nmom_10 = SQA::TAI.mom(prices, period: 10)\nmom_20 = SQA::TAI.mom(prices, period: 20)\n\nputs \"5-period Momentum: #{mom_5.last.round(2)}\"\nputs \"10-period Momentum: #{mom_10.last.round(2)}\"\nputs \"20-period Momentum: #{mom_20.last.round(2)}\"\n\n# All positive = strong uptrend\nif mom_5.last &gt; 0 &amp;&amp; mom_10.last &gt; 0 &amp;&amp; mom_20.last &gt; 0\n  puts \"All momentum periods positive - Strong uptrend\"\nelsif mom_5.last &lt; 0 &amp;&amp; mom_10.last &lt; 0 &amp;&amp; mom_20.last &lt; 0\n  puts \"All momentum periods negative - Strong downtrend\"\nelse\n  puts \"Mixed momentum signals - Potential transition phase\"\nend\n</code></pre>"},{"location":"indicators/momentum/mom/#example-momentum-with-moving-average","title":"Example: Momentum with Moving Average","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\nmom = SQA::TAI.mom(prices, period: 14)\nmom_ma = SQA::TAI.sma(mom.compact, period: 10)\n\n# Extend mom_ma with nils to match length\nfull_mom_ma = Array.new(mom.length - mom_ma.length, nil) + mom_ma\n\ncurrent_mom = mom.last\ncurrent_mom_ma = full_mom_ma.last\n\nif current_mom &gt; current_mom_ma\n  puts \"Momentum above its moving average - Bullish\"\nelsif current_mom &lt; current_mom_ma\n  puts \"Momentum below its moving average - Bearish\"\nend\n</code></pre>"},{"location":"indicators/momentum/mom/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/mom/#1-zero-line-crossover","title":"1. Zero Line Crossover","text":"<ul> <li>Buy when Momentum crosses above zero</li> <li>Sell when Momentum crosses below zero</li> <li>Simple trend-following approach</li> </ul>"},{"location":"indicators/momentum/mom/#2-momentum-peakstroughs","title":"2. Momentum Peaks/Troughs","text":"<ul> <li>Sell when Momentum peaks and starts declining</li> <li>Buy when Momentum bottoms and starts rising</li> <li>Captures momentum shifts early</li> </ul>"},{"location":"indicators/momentum/mom/#3-divergence-trading","title":"3. Divergence Trading","text":"<ul> <li>Bullish: Price lower low, Momentum higher low</li> <li>Bearish: Price higher high, Momentum lower high</li> <li>Signals potential reversals</li> </ul>"},{"location":"indicators/momentum/mom/#4-momentum-trend","title":"4. Momentum Trend","text":"<ul> <li>Buy when Momentum is positive and rising</li> <li>Sell when Momentum is negative and falling</li> <li>Confirms trend strength</li> </ul>"},{"location":"indicators/momentum/mom/#common-period-settings","title":"Common Period Settings","text":"Period Use Case 5 Very short-term, sensitive 10 Short-term trading 14 Standard setting 20 Medium-term trends 30+ Long-term analysis"},{"location":"indicators/momentum/mom/#advantages","title":"Advantages","text":"<ul> <li>Simple and easy to understand</li> <li>Clear buy/sell signals</li> <li>Works well with other indicators</li> <li>No overbought/oversold levels to interpret</li> </ul>"},{"location":"indicators/momentum/mom/#limitations","title":"Limitations","text":"<ul> <li>Can give false signals in choppy markets</li> <li>No absolute overbought/oversold levels</li> <li>Needs confirmation from other indicators</li> <li>Raw values depend on price scale</li> </ul>"},{"location":"indicators/momentum/mom/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nmom = SQA::TAI.mom(prices, period: 12)\nrsi = SQA::TAI.rsi(prices, period: 14)\nsma_50 = SQA::TAI.sma(prices, period: 50)\n\ncurrent_price = prices.last\n\n# Multiple confirmations\nif mom.last &gt; 0 &amp;&amp;              # Positive momentum\n   rsi.last &gt; 50 &amp;&amp;             # RSI above midline\n   current_price &gt; sma_50.last  # Above 50-day MA\n  puts \"Multiple indicators confirm uptrend - Strong BUY\"\nend\n</code></pre>"},{"location":"indicators/momentum/mom/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Normalized momentum</li> <li>MACD - Smoothed momentum with signal</li> <li>Stochastic - Momentum oscillator</li> </ul>"},{"location":"indicators/momentum/mom/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/plus_di/","title":"Plus Directional Indicator (+DI)","text":"<p>The Plus Directional Indicator (+DI) measures the strength of upward price movement in a security. It's a core component of J. Welles Wilder's Directional Movement System and is used alongside the Minus Directional Indicator (-DI) and Average Directional Index (ADX) to identify trend direction and strength.</p> <p>+DI quantifies bullish pressure by analyzing how much the current high exceeds the previous high, smoothed over a period. Values range from 0 to 100, with higher values indicating stronger upward movement.</p>"},{"location":"indicators/momentum/plus_di/#formula","title":"Formula","text":"<p>The +DI calculation involves: 1. Calculate +DM (Plus Directional Movement): Max(High - Previous High, 0) 2. Calculate True Range (TR) 3. Smooth +DM and TR over the period 4. +DI = (Smoothed +DM / Smoothed TR) * 100</p>"},{"location":"indicators/momentum/plus_di/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of close prices <code>period</code> Integer No 14 Number of periods for smoothing"},{"location":"indicators/momentum/plus_di/#returns","title":"Returns","text":"<p>Returns an array of +DI values ranging from 0 to 100. The first <code>period</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/plus_di/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32, 49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45]\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\n\nputs \"Current +DI: #{plus_di.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/plus_di/#interpretation","title":"Interpretation","text":"+DI Value Upward Movement Strength 0-15 Very weak upward movement 15-25 Weak to moderate upward movement 25-40 Strong upward movement 40-60 Very strong upward movement 60-100 Extremely strong upward movement <p>Key Signals: - +DI &gt; -DI: Uptrend in control, bullish dominance - +DI &lt; -DI: Downtrend in control, bearish dominance - +DI crossover -DI: Bullish signal (uptrend starting) - -DI crossover +DI: Bearish signal (downtrend starting) - Rising +DI: Increasing upward pressure - Falling +DI: Decreasing upward pressure</p>"},{"location":"indicators/momentum/plus_di/#example-trend-direction-identification","title":"Example: Trend Direction Identification","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\n\nif current_plus &gt; current_minus\n  spread = current_plus - current_minus\n  puts \"UPTREND: +DI (#{current_plus.round(2)}) &gt; -DI (#{current_minus.round(2)})\"\n  puts \"Bullish spread: #{spread.round(2)} points\"\n\n  if spread &gt; 20\n    puts \"Strong uptrend dominance\"\n  elsif spread &gt; 10\n    puts \"Moderate uptrend\"\n  else\n    puts \"Weak uptrend - watch for reversal\"\n  end\nelse\n  spread = current_minus - current_plus\n  puts \"DOWNTREND: -DI (#{current_minus.round(2)}) &gt; +DI (#{current_plus.round(2)})\"\n  puts \"Bearish spread: #{spread.round(2)} points\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_di/#example-di-crossover-strategy","title":"Example: DI Crossover Strategy","text":"<pre><code>high, low, close = load_historical_ohlc('SPY')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\n# Current values\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\n\n# Previous values\nprev_plus = plus_di[-2]\nprev_minus = minus_di[-2]\n\n# Detect crossovers\nif prev_plus &lt; prev_minus &amp;&amp; current_plus &gt; current_minus\n  puts \"BULLISH CROSSOVER DETECTED!\"\n  puts \"+DI crossed above -DI\"\n  puts \"+DI: #{prev_plus.round(2)} -&gt; #{current_plus.round(2)}\"\n  puts \"-DI: #{prev_minus.round(2)} -&gt; #{current_minus.round(2)}\"\n  puts \"SIGNAL: Enter long position\"\nelsif prev_plus &gt; prev_minus &amp;&amp; current_plus &lt; current_minus\n  puts \"BEARISH CROSSOVER DETECTED!\"\n  puts \"-DI crossed above +DI\"\n  puts \"+DI: #{prev_plus.round(2)} -&gt; #{current_plus.round(2)}\"\n  puts \"-DI: #{prev_minus.round(2)} -&gt; #{current_minus.round(2)}\"\n  puts \"SIGNAL: Exit long or enter short position\"\nelse\n  puts \"No crossover - trend continues\"\n  if current_plus &gt; current_minus\n    puts \"Uptrend persists\"\n  else\n    puts \"Downtrend persists\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/plus_di/#example-di-with-adx-confirmation","title":"Example: +DI with ADX Confirmation","text":"<pre><code>high, low, close = load_historical_ohlc('MSFT')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\nadx = SQA::TAI.adx(high, low, close, period: 14)\n\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\ncurrent_adx = adx.last\n\nputs \"Plus DI: #{current_plus.round(2)}\"\nputs \"Minus DI: #{current_minus.round(2)}\"\nputs \"ADX: #{current_adx.round(2)}\"\n\n# Strong uptrend: +DI &gt; -DI with strong ADX\nif current_plus &gt; current_minus &amp;&amp; current_adx &gt; 25\n  di_spread = current_plus - current_minus\n  puts \"\\nSTRONG CONFIRMED UPTREND\"\n  puts \"DI Spread: #{di_spread.round(2)}\"\n  puts \"Trend Strength: #{current_adx.round(2)}\"\n  puts \"HIGH CONFIDENCE long opportunity\"\n\n# Weak uptrend: +DI &gt; -DI but weak ADX\nelsif current_plus &gt; current_minus &amp;&amp; current_adx &lt; 25\n  puts \"\\nWEAK UPTREND\"\n  puts \"Bullish direction but low trend strength\"\n  puts \"CAUTION: May be choppy or range-bound\"\n\n# Strong downtrend: -DI &gt; +DI with strong ADX\nelsif current_minus &gt; current_plus &amp;&amp; current_adx &gt; 25\n  puts \"\\nSTRONG CONFIRMED DOWNTREND\"\n  puts \"Avoid longs, consider shorts\"\n\nelse\n  puts \"\\nWEAK/NO TREND\"\n  puts \"Wait for clearer direction\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_di/#example-uptrend-strength-analysis","title":"Example: Uptrend Strength Analysis","text":"<pre><code>high, low, close = load_historical_ohlc('NVDA')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\ncurrent_plus = plus_di.last\nprev_plus = plus_di[-5]\n\n# Analyze +DI strength changes\ndi_change = current_plus - prev_plus\n\nputs \"Current +DI: #{current_plus.round(2)}\"\nputs \"5 bars ago: #{prev_plus.round(2)}\"\nputs \"Change: #{di_change.round(2)}\"\n\ncase current_plus\nwhen 0...15\n  puts \"\\nUPWARD PRESSURE: Very Weak\"\n  puts \"Minimal bullish momentum\"\nwhen 15...25\n  puts \"\\nUPWARD PRESSURE: Weak to Moderate\"\n  puts \"Some bullish activity present\"\nwhen 25...40\n  puts \"\\nUPWARD PRESSURE: Strong\"\n  puts \"Solid bullish momentum building\"\n  if di_change &gt; 5\n    puts \"ACCELERATING - momentum increasing\"\n  end\nwhen 40...60\n  puts \"\\nUPWARD PRESSURE: Very Strong\"\n  puts \"Powerful bullish trend in effect\"\n  if di_change &gt; 0\n    puts \"Still strengthening\"\n  else\n    puts \"May be near peak strength\"\n  end\nelse\n  puts \"\\nUPWARD PRESSURE: Extremely Strong\"\n  puts \"Exceptional bullish momentum\"\n  puts \"WARNING: Watch for exhaustion at extreme levels\"\nend\n\n# Check if +DI is rising or falling\nif di_change &gt; 3\n  puts \"\\nRapidly increasing upward pressure\"\nelsif di_change &gt; 0\n  puts \"\\nGradually increasing upward pressure\"\nelsif di_change &gt; -3\n  puts \"\\nGradually weakening upward pressure\"\nelse\n  puts \"\\nRapidly weakening upward pressure\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_di/#example-multi-timeframe-di-analysis","title":"Example: Multi-Timeframe +DI Analysis","text":"<pre><code>high, low, close = load_historical_ohlc('TSLA')\n\n# Calculate different periods\nplus_di_7 = SQA::TAI.plus_di(high, low, close, period: 7)\nplus_di_14 = SQA::TAI.plus_di(high, low, close, period: 14)\nplus_di_28 = SQA::TAI.plus_di(high, low, close, period: 28)\n\nminus_di_7 = SQA::TAI.minus_di(high, low, close, period: 7)\nminus_di_14 = SQA::TAI.minus_di(high, low, close, period: 14)\nminus_di_28 = SQA::TAI.minus_di(high, low, close, period: 28)\n\nputs \"SHORT-TERM (7): +DI=#{plus_di_7.last.round(2)}, -DI=#{minus_di_7.last.round(2)}\"\nputs \"STANDARD (14): +DI=#{plus_di_14.last.round(2)}, -DI=#{minus_di_14.last.round(2)}\"\nputs \"LONG-TERM (28): +DI=#{plus_di_28.last.round(2)}, -DI=#{minus_di_28.last.round(2)}\"\n\n# All timeframes bullish = strong signal\nif plus_di_7.last &gt; minus_di_7.last &amp;&amp;\n   plus_di_14.last &gt; minus_di_14.last &amp;&amp;\n   plus_di_28.last &gt; minus_di_28.last\n  puts \"\\nALL TIMEFRAMES BULLISH\"\n  puts \"High confidence uptrend across all periods\"\n  puts \"Strong buy signal\"\n\n# Mixed signals\nelsif plus_di_7.last &gt; minus_di_7.last &amp;&amp;\n      plus_di_14.last &lt; minus_di_14.last\n  puts \"\\nSHORT-TERM BULLISH, LONGER-TERM BEARISH\"\n  puts \"Possible counter-trend rally\"\n  puts \"Use caution - may be temporary bounce\"\n\nelsif plus_di_28.last &gt; minus_di_28.last &amp;&amp;\n      plus_di_7.last &lt; minus_di_7.last\n  puts \"\\nLONG-TERM BULLISH, SHORT-TERM BEARISH\"\n  puts \"Healthy pullback in uptrend\"\n  puts \"Potential buying opportunity\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_di/#example-di-extremes-and-reversals","title":"Example: DI Extremes and Reversals","text":"<pre><code>high, low, close = load_historical_ohlc('QQQ')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\nprev_plus = plus_di[-2]\n\n# Extreme +DI values may signal exhaustion\nif current_plus &gt; 50\n  puts \"EXTREME +DI READING: #{current_plus.round(2)}\"\n  puts \"Very strong uptrend but watch for exhaustion\"\n\n  if current_plus &lt; prev_plus\n    puts \"WARNING: +DI falling from extreme high\"\n    puts \"Possible trend exhaustion or reversal coming\"\n  end\nend\n\n# Very low +DI in downtrend\nif current_plus &lt; 10 &amp;&amp; current_minus &gt; 30\n  puts \"MINIMAL UPWARD PRESSURE\"\n  puts \"+DI: #{current_plus.round(2)}, -DI: #{current_minus.round(2)}\"\n  puts \"Strong downtrend with no bullish momentum\"\n  puts \"Wait for +DI to start rising before considering longs\"\nend\n\n# Recovery from low +DI\nif prev_plus &lt; 15 &amp;&amp; current_plus &gt; 20\n  puts \"BULLISH MOMENTUM AWAKENING\"\n  puts \"+DI recovering from low levels\"\n  puts \"Potential trend change developing\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_di/#example-complete-directional-movement-system","title":"Example: Complete Directional Movement System","text":"<pre><code>high, low, close = load_historical_ohlc('SPY')\n\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\nadx = SQA::TAI.adx(high, low, close, period: 14)\n\ncurrent_plus = plus_di.last\ncurrent_minus = minus_di.last\ncurrent_adx = adx.last\n\nprev_plus = plus_di[-2]\nprev_minus = minus_di[-2]\nprev_adx = adx[-2]\n\nputs \"=== DIRECTIONAL MOVEMENT SYSTEM ANALYSIS ===\"\nputs \"Plus DI: #{current_plus.round(2)}\"\nputs \"Minus DI: #{current_minus.round(2)}\"\nputs \"ADX: #{current_adx.round(2)}\"\nputs\n\n# Determine trend quality and direction\nif current_adx &gt; 25\n  if current_plus &gt; current_minus\n    spread = current_plus - current_minus\n    puts \"STATUS: Strong Uptrend\"\n    puts \"Bullish DI spread: #{spread.round(2)}\"\n\n    # Check if trend is strengthening\n    if current_adx &gt; prev_adx\n      puts \"TREND: Strengthening (ADX rising)\"\n    else\n      puts \"TREND: Weakening (ADX falling)\"\n      puts \"Consider taking profits\"\n    end\n\n    # Entry/exit signals\n    if prev_plus &lt; prev_minus &amp;&amp; current_plus &gt; current_minus\n      puts \"SIGNAL: New buy signal (DI crossover)\"\n    elsif spread &gt; 25\n      puts \"SIGNAL: Very strong - hold positions\"\n    end\n\n  else\n    spread = current_minus - current_plus\n    puts \"STATUS: Strong Downtrend\"\n    puts \"Bearish DI spread: #{spread.round(2)}\"\n    puts \"Avoid long positions\"\n  end\n\nelsif current_adx &lt; 20\n  puts \"STATUS: No Clear Trend (ADX &lt; 20)\"\n  puts \"Market is range-bound or choppy\"\n\n  if current_plus &gt; current_minus\n    puts \"DIRECTION: Slightly bullish but weak\"\n  else\n    puts \"DIRECTION: Slightly bearish but weak\"\n  end\n\n  puts \"STRATEGY: Wait for trend development (ADX &gt; 25)\"\n\nelse\n  puts \"STATUS: Developing Trend (ADX 20-25)\"\n  puts \"Watch for trend confirmation\"\n\n  if current_plus &gt; current_minus &amp;&amp; current_adx &gt; prev_adx\n    puts \"SIGNAL: Potential uptrend developing\"\n    puts \"Consider early entry if +DI continues rising\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/plus_di/#common-settings","title":"Common Settings","text":"Period Use Case 7 Short-term, sensitive to recent moves 14 Standard (Wilder's original) 21 Longer-term, smoother signals 28 Very long-term trend analysis"},{"location":"indicators/momentum/plus_di/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/plus_di/#1-basic-di-crossover","title":"1. Basic DI Crossover","text":"<ul> <li>Buy: When +DI crosses above -DI</li> <li>Sell: When -DI crosses above +DI</li> <li>Best with: ADX &gt; 25 for confirmation</li> </ul>"},{"location":"indicators/momentum/plus_di/#2-strong-trend-filter","title":"2. Strong Trend Filter","text":"<ul> <li>Only trade in direction of higher DI</li> <li>Require minimum spread (e.g., 10 points)</li> <li>Use ADX to confirm strength</li> </ul>"},{"location":"indicators/momentum/plus_di/#3-extreme-di-reversals","title":"3. Extreme +DI Reversals","text":"<ul> <li>Watch for +DI &gt; 50 then declining</li> <li>May signal uptrend exhaustion</li> <li>Wait for -DI to cross over before shorting</li> </ul>"},{"location":"indicators/momentum/plus_di/#4-trend-continuation","title":"4. Trend Continuation","text":"<ul> <li>+DI &gt; -DI and both rising = strong uptrend</li> <li>Add to positions on pullbacks</li> <li>Exit when -DI crosses above +DI</li> </ul>"},{"location":"indicators/momentum/plus_di/#5-multi-timeframe-confirmation","title":"5. Multi-Timeframe Confirmation","text":"<ul> <li>Align +DI on multiple periods</li> <li>All periods bullish = high confidence</li> <li>Mixed signals = wait for clarity</li> </ul>"},{"location":"indicators/momentum/plus_di/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/plus_di/#1-di-spread-analysis","title":"1. DI Spread Analysis","text":"<p>Monitor the difference between +DI and -DI: - Spread &gt; 20: Very strong trend - Spread 10-20: Moderate trend - Spread &lt; 10: Weak trend or transition</p>"},{"location":"indicators/momentum/plus_di/#2-di-momentum","title":"2. +DI Momentum","text":"<p>Track rate of change in +DI: - Rapidly rising +DI = accelerating uptrend - Flat +DI = consolidating uptrend - Falling +DI = weakening uptrend</p>"},{"location":"indicators/momentum/plus_di/#3-di-divergence","title":"3. DI Divergence","text":"<ul> <li>Price makes higher high, +DI makes lower high = bearish divergence</li> <li>Price makes lower low, +DI makes higher low = bullish divergence</li> </ul>"},{"location":"indicators/momentum/plus_di/#4-adxdi-matrix","title":"4. ADX/DI Matrix","text":"ADX +DI vs -DI Action &gt; 25 +DI &gt; -DI Strong buy &gt; 25 -DI &gt; +DI Strong sell &lt; 20 +DI &gt; -DI Weak buy, wait &lt; 20 -DI &gt; +DI Weak sell, wait"},{"location":"indicators/momentum/plus_di/#key-insights","title":"Key Insights","text":"<ol> <li>+DI measures buying pressure, not price level</li> <li>Compare to -DI, not to fixed thresholds</li> <li>Use with ADX for complete picture</li> <li>Crossovers work best in trending markets</li> <li>Extreme values may signal exhaustion</li> <li>Rising +DI shows strengthening bulls</li> <li>Falling +DI shows weakening bulls</li> </ol>"},{"location":"indicators/momentum/plus_di/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Trading crossovers in choppy markets - Always check ADX first</li> <li>Ignoring the spread - Small spreads mean weak signals</li> <li>Using +DI alone - Must compare to -DI for context</li> <li>Chasing extreme +DI - High values may mean exhaustion</li> <li>Fixed thresholds - +DI is relative to -DI, not absolute</li> </ol>"},{"location":"indicators/momentum/plus_di/#related-indicators","title":"Related Indicators","text":"<ul> <li>ADX - Average Directional Index (trend strength)</li> <li>MINUS_DI - Minus Directional Indicator (downward movement)</li> <li>ADXR - ADX Rating (smoothed ADX)</li> <li>DX - Directional Movement Index</li> </ul> <ul> <li>Complete Directional Movement Indicator (DMI)</li> </ul>"},{"location":"indicators/momentum/plus_di/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> <li>Basic Usage</li> </ul> <ul> <li>Trend Following Strategies</li> </ul>"},{"location":"indicators/momentum/plus_dm/","title":"Plus Directional Movement (PLUS_DM)","text":"<p>The Plus Directional Movement (PLUS_DM or +DM) is a component of J. Welles Wilder's Directional Movement System that measures the magnitude of upward price movement. It quantifies the raw upward directional force by comparing the current high to the previous high. PLUS_DM is a building block indicator used to calculate the Plus Directional Indicator (+DI), which is then used in the ADX system for trend analysis.</p>"},{"location":"indicators/momentum/plus_dm/#understanding-directional-movement","title":"Understanding Directional Movement","text":"<p>Directional Movement isolates the portion of price movement that is directional:</p> <ul> <li>Plus Directional Movement (+DM): Measures upward movement when current high exceeds previous high</li> <li>Minus Directional Movement (-DM): Measures downward movement when current low is below previous low</li> <li>When both occur, only the larger movement is counted</li> <li>When neither occurs (inside bar), directional movement is zero</li> </ul> <p>The key concept is that +DM captures ONLY the upward component of price action, ignoring all other movement.</p>"},{"location":"indicators/momentum/plus_dm/#formula","title":"Formula","text":"<pre><code>+DM Calculation for each period:\n\nup_move = current_high - previous_high\ndown_move = previous_low - current_low\n\nIf up_move &gt; down_move AND up_move &gt; 0:\n  +DM = up_move\nElse:\n  +DM = 0\n\nSmoothed +DM (over period N):\nFirst value = Sum of first N raw +DM values\nSubsequent values = Previous +DM - (Previous +DM / N) + Current raw +DM\n</code></pre> <p>The smoothing is critical - it creates a running sum that emphasizes recent directional movement while maintaining historical context.</p>"},{"location":"indicators/momentum/plus_dm/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>period</code> Integer No 14 Smoothing period for directional movement"},{"location":"indicators/momentum/plus_dm/#returns","title":"Returns","text":"<p>Returns an array of smoothed +DM values. These are unbounded, price-based measurements that represent the cumulative upward directional pressure. The first <code>period</code> values will be <code>nil</code> as smoothing requires initialization.</p>"},{"location":"indicators/momentum/plus_dm/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh = [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19,\n        50.12, 50.10, 50.00, 49.75, 49.80, 50.00, 50.15, 50.30]\n\nlow = [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87,\n       49.20, 49.00, 48.90, 49.00, 49.10, 49.20, 49.40, 49.60]\n\n# Calculate 14-period +DM\nplus_dm = SQA::TAI.plus_dm(high, low, period: 14)\n\nputs \"Current +DM: #{plus_dm.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/plus_dm/#interpretation","title":"Interpretation","text":"<p>+DM values represent the strength of upward directional movement:</p> Condition Interpretation High +DM values Strong, persistent upward movement Low +DM values Weak upward movement or downward price action +DM rising Upward momentum increasing +DM falling Upward momentum decreasing +DM near zero Little to no upward directional force <p>Important: +DM is NOT normalized and therefore: - Values depend on the price scale of the security - Cannot be compared across different securities - Cannot be compared across different price ranges of the same security - Should be normalized (converted to +DI) for practical trading use</p>"},{"location":"indicators/momentum/plus_dm/#relationship-to-di-plus-directional-indicator","title":"Relationship to +DI (Plus Directional Indicator)","text":"<p>+DM is the raw measurement that gets normalized into +DI:</p> <pre><code># +DM is the raw upward movement\nplus_dm = SQA::TAI.plus_dm(high, low, close, period: 14)\n\n# +DI normalizes it using ATR (Average True Range)\n# Formula: +DI = (+DM / ATR) * 100\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\n</code></pre> <p>The normalization by ATR makes +DI: - Bounded between 0 and 100 - Comparable across different securities - Comparable across different time periods - More useful for trading decisions</p>"},{"location":"indicators/momentum/plus_dm/#example-visualizing-raw-directional-movement","title":"Example: Visualizing Raw Directional Movement","text":"<pre><code>high = [50.0, 51.0, 52.0, 51.5, 51.0, 52.5, 53.0, 52.5, 53.5, 54.0]\nlow = [49.0, 50.0, 51.0, 50.5, 49.5, 51.5, 52.0, 51.5, 52.5, 53.0]\n\nplus_dm = SQA::TAI.plus_dm(high, low, period: 5)\n\nputs \"Understanding +DM calculation:\"\nputs \"=\" * 50\n\n(5...high.length).each do |i|\n  up_move = high[i] - high[i-1]\n  down_move = low[i-1] - low[i]\n\n  puts \"\\nBar #{i}:\"\n  puts \"  High: #{high[i-1]} -&gt; #{high[i]} (move: #{up_move &gt; 0 ? '+' : ''}#{up_move.round(2)})\"\n  puts \"  Low: #{low[i-1]} -&gt; #{low[i]} (move: #{down_move &gt; 0 ? '+' : ''}#{down_move.round(2)})\"\n\n  if up_move &gt; down_move &amp;&amp; up_move &gt; 0\n    puts \"  +DM = #{up_move.round(2)} (upward movement dominates)\"\n  else\n    puts \"  +DM = 0 (downward movement dominates or no directional move)\"\n  end\n\n  puts \"  Smoothed +DM: #{plus_dm[i]&amp;.round(2) || 'nil (warming up)'}\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_dm/#example-comparing-dm-to-dm","title":"Example: Comparing +DM to -DM","text":"<pre><code>high, low = load_historical_data('SPY', fields: [:high, :low])\n\nplus_dm = SQA::TAI.plus_dm(high, low, period: 14)\nminus_dm = SQA::TAI.minus_dm(high, low, period: 14)\n\ncurrent_plus = plus_dm.last\ncurrent_minus = minus_dm.last\n\nputs \"Directional Movement Analysis:\"\nputs \"=\" * 50\nputs \"+DM: #{current_plus.round(2)}\"\nputs \"-DM: #{current_minus.round(2)}\"\nputs \"\"\n\nif current_plus &gt; current_minus * 1.5\n  puts \"Strong upward directional bias\"\n  puts \"+DM is #{((current_plus / current_minus - 1) * 100).round(0)}% larger than -DM\"\n  puts \"Price action dominated by upward moves\"\nelsif current_minus &gt; current_plus * 1.5\n  puts \"Strong downward directional bias\"\n  puts \"-DM is #{((current_minus / current_plus - 1) * 100).round(0)}% larger than +DM\"\n  puts \"Price action dominated by downward moves\"\nelse\n  puts \"Balanced directional movement\"\n  puts \"No clear directional dominance\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_dm/#example-why-di-is-more-useful-than-dm","title":"Example: Why +DI is More Useful Than +DM","text":"<pre><code># Compare two securities with different price scales\nhigh_aapl = [150.0, 152.0, 154.0, 153.0, 155.0]  # $150 stock\nlow_aapl = [149.0, 150.5, 152.0, 151.0, 153.0]\n\nhigh_tsla = [800.0, 810.0, 820.0, 815.0, 825.0]  # $800 stock\nlow_tsla = [795.0, 802.0, 812.0, 808.0, 818.0]\n\n# Both stocks moving up similarly (percentage-wise)\n# But +DM will be very different...\n\nplus_dm_aapl = SQA::TAI.plus_dm(high_aapl, low_aapl, period: 3)\nplus_dm_tsla = SQA::TAI.plus_dm(high_tsla, low_tsla, period: 3)\n\nputs \"Raw +DM Comparison:\"\nputs \"AAPL +DM: #{plus_dm_aapl.last.round(2)}\"\nputs \"TSLA +DM: #{plus_dm_tsla.last.round(2)}\"\nputs \"Cannot compare directly - different price scales!\"\nputs \"\"\n\n# To compare, we need +DI (normalized by ATR)\nclose_aapl = [149.5, 151.0, 153.0, 152.0, 154.0]\nclose_tsla = [797.5, 805.0, 815.0, 810.0, 820.0]\n\nplus_di_aapl = SQA::TAI.plus_di(high_aapl, low_aapl, close_aapl, period: 3)\nplus_di_tsla = SQA::TAI.plus_di(high_tsla, low_tsla, close_tsla, period: 3)\n\nputs \"Normalized +DI Comparison:\"\nputs \"AAPL +DI: #{plus_di_aapl.last.round(2)}\"\nputs \"TSLA +DI: #{plus_di_tsla.last.round(2)}\"\nputs \"Now comparable - both on 0-100 scale!\"\n</code></pre>"},{"location":"indicators/momentum/plus_dm/#example-building-block-for-adx-system","title":"Example: Building Block for ADX System","text":"<pre><code>high, low, close = load_historical_ohlc('MSFT')\n\n# Step 1: Calculate raw directional movements\nplus_dm = SQA::TAI.plus_dm(high, low, period: 14)\nminus_dm = SQA::TAI.minus_dm(high, low, period: 14)\n\n# Step 2: Normalize by ATR to get directional indicators\natr = SQA::TAI.atr(high, low, close, period: 14)\nplus_di = SQA::TAI.plus_di(high, low, close, period: 14)\nminus_di = SQA::TAI.minus_di(high, low, close, period: 14)\n\n# Step 3: Calculate DX and ADX for trend strength\nadx = SQA::TAI.adx(high, low, close, period: 14)\n\nputs \"Complete ADX System Breakdown:\"\nputs \"=\" * 50\nputs \"Raw Movements:\"\nputs \"  +DM: #{plus_dm.last.round(2)} (raw upward movement)\"\nputs \"  -DM: #{minus_dm.last.round(2)} (raw downward movement)\"\nputs \"  ATR: #{atr.last.round(2)} (volatility normalization factor)\"\nputs \"\"\nputs \"Normalized Indicators:\"\nputs \"  +DI: #{plus_di.last.round(2)} (+DM/ATR * 100)\"\nputs \"  -DI: #{minus_di.last.round(2)} (-DM/ATR * 100)\"\nputs \"\"\nputs \"Trend Strength:\"\nputs \"  ADX: #{adx.last.round(2)}\"\nputs \"\"\n\n# Interpretation\nif adx.last &gt; 25\n  if plus_di.last &gt; minus_di.last\n    puts \"STRONG UPTREND\"\n    puts \"High +DM values driving the trend strength\"\n  else\n    puts \"STRONG DOWNTREND\"\n    puts \"High -DM values driving the trend strength\"\n  end\nelse\n  puts \"WEAK/NO TREND\"\n  puts \"Both +DM and -DM relatively balanced\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_dm/#example-directional-movement-divergence","title":"Example: Directional Movement Divergence","text":"<pre><code>high, low, close = load_historical_ohlc('NVDA')\n\nplus_dm = SQA::TAI.plus_dm(high, low, period: 14)\n\n# Calculate price momentum\nprices = close\nprice_change_20 = prices.last - prices[-20]\n\n# Calculate +DM momentum\ndm_change_20 = plus_dm.last - plus_dm[-20]\n\nputs \"Directional Movement Divergence Analysis:\"\nputs \"=\" * 50\nputs \"20-bar price change: #{price_change_20.round(2)}\"\nputs \"20-bar +DM change: #{dm_change_20.round(2)}\"\nputs \"\"\n\nif price_change_20 &gt; 0 &amp;&amp; dm_change_20 &lt; 0\n  puts \"BEARISH DIVERGENCE\"\n  puts \"Price making higher highs but +DM decreasing\"\n  puts \"Upward momentum weakening - potential reversal\"\nelsif price_change_20 &lt; 0 &amp;&amp; dm_change_20 &gt; 0\n  puts \"Interesting condition:\"\n  puts \"Price falling but +DM rising\"\n  puts \"May indicate slowing downtrend or consolidation\"\nelsif price_change_20 &gt; 0 &amp;&amp; dm_change_20 &gt; 0\n  puts \"BULLISH CONFIRMATION\"\n  puts \"Both price and +DM rising - strong uptrend\"\nend\n</code></pre>"},{"location":"indicators/momentum/plus_dm/#example-smoothing-effect-demonstration","title":"Example: Smoothing Effect Demonstration","text":"<pre><code># Create volatile price data\nhigh = [50, 52, 51, 54, 53, 56, 55, 58, 57, 60, 59, 62, 61, 64, 63]\nlow = [48, 50, 49, 52, 51, 54, 53, 56, 55, 58, 57, 60, 59, 62, 61]\n\n# Compare different smoothing periods\nplus_dm_5 = SQA::TAI.plus_dm(high, low, period: 5)\nplus_dm_14 = SQA::TAI.plus_dm(high, low, period: 14)\nplus_dm_28 = SQA::TAI.plus_dm(high, low, period: 28)\n\nputs \"Smoothing Period Comparison:\"\nputs \"=\" * 50\nputs \"5-period +DM: #{plus_dm_5.compact.last&amp;.round(2) || 'warming up'}\"\nputs \"14-period +DM: #{plus_dm_14.compact.last&amp;.round(2) || 'warming up'}\"\nputs \"28-period +DM: #{plus_dm_28.compact.last&amp;.round(2) || 'warming up'}\"\nputs \"\"\nputs \"Shorter periods: More responsive, captures recent moves\"\nputs \"Longer periods: Smoother, less affected by noise\"\n</code></pre>"},{"location":"indicators/momentum/plus_dm/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/plus_dm/#1-directional-movement-ratio","title":"1. Directional Movement Ratio","text":"<p>Compare +DM to -DM to gauge directional bias: <pre><code>ratio = plus_dm.last / (plus_dm.last + minus_dm.last)\n# ratio &gt; 0.7: Strong upward bias\n# ratio &lt; 0.3: Strong downward bias\n</code></pre></p>"},{"location":"indicators/momentum/plus_dm/#2-rate-of-change-in-dm","title":"2. Rate of Change in +DM","text":"<p>Monitor how quickly +DM is changing: <pre><code>dm_roc = (plus_dm.last - plus_dm[-5]) / plus_dm[-5] * 100\n# Rapid increases may signal momentum acceleration\n</code></pre></p>"},{"location":"indicators/momentum/plus_dm/#3-directional-movement-oscillator","title":"3. Directional Movement Oscillator","text":"<p>Create an oscillator from +DM and -DM: <pre><code>dm_osc = plus_dm.last - minus_dm.last\n# Positive: Upward bias, Negative: Downward bias\n</code></pre></p>"},{"location":"indicators/momentum/plus_dm/#common-periods","title":"Common Periods","text":"Period Use Case 7 Short-term, more reactive to changes 14 Standard (Wilder's original) - balanced sensitivity 21 Medium-term, smoother trend identification 28 Long-term, filters out short-term noise"},{"location":"indicators/momentum/plus_dm/#key-concepts","title":"Key Concepts","text":""},{"location":"indicators/momentum/plus_dm/#why-smoothing-matters","title":"Why Smoothing Matters","text":"<p>The smoothing formula creates a running sum with exponential-like decay: - Recent directional movement has more influence - Historical movement gradually fades but isn't forgotten - Creates continuity in the measurement - Prevents whipsaws from single-bar movements</p>"},{"location":"indicators/momentum/plus_dm/#why-only-the-larger-move-counts","title":"Why Only the Larger Move Counts","text":"<p>When both upward and downward movement occur: - Taking the larger ensures only true directional force is measured - Prevents double-counting during volatile bars - Focuses on the dominant directional component - Aligns with Wilder's philosophy of isolating trend direction</p>"},{"location":"indicators/momentum/plus_dm/#the-price-scale-problem","title":"The Price Scale Problem","text":"<p>+DM values are in the same units as price: - A $100 stock might have +DM of 2.0 - A $1000 stock might have +DM of 20.0 - Both could have identical percentage moves - This is why +DI normalization is crucial for practical use</p>"},{"location":"indicators/momentum/plus_dm/#when-to-use-dm-vs-di","title":"When to Use +DM vs +DI","text":"<p>Use +DM when: - Building custom indicators from raw directional movement - Analyzing the directional movement calculation process - Developing educational materials on ADX system - Debugging or validating +DI calculations</p> <p>Use +DI when: - Making actual trading decisions - Comparing across different securities - Setting absolute threshold values (e.g., +DI &gt; 25) - Using in strategies with other normalized indicators</p>"},{"location":"indicators/momentum/plus_dm/#limitations","title":"Limitations","text":"<ol> <li>Not Normalized: Cannot be used for cross-security comparison</li> <li>Price-Scale Dependent: Values change with stock splits, price level changes</li> <li>No Absolute Thresholds: Cannot say \"+DM &gt; 5 is bullish\" universally</li> <li>Lag: Smoothing introduces lag, misses rapid reversals</li> <li>No Context: Doesn't account for volatility differences</li> </ol>"},{"location":"indicators/momentum/plus_dm/#related-indicators","title":"Related Indicators","text":"<ul> <li>PLUS_DI - Normalized version of +DM (recommended for trading)</li> <li>MINUS_DM - Downward directional movement counterpart</li> <li>MINUS_DI - Normalized downward directional indicator</li> <li>ADX - Average Directional Index (trend strength)</li> <li>ADXR - ADX Rating (smoothed ADX)</li> <li>DX - Directional Movement Index</li> <li>ATR - Average True Range (used for normalization)</li> </ul>"},{"location":"indicators/momentum/plus_dm/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> </ul> <ul> <li>Understanding the ADX System</li> </ul> <ul> <li>Directional Movement Trading</li> </ul>"},{"location":"indicators/momentum/ppo/","title":"Percentage Price Oscillator (PPO)","text":"<p>The Percentage Price Oscillator (PPO) measures the percentage difference between two exponential moving averages. Unlike the Absolute Price Oscillator (APO), which shows the absolute point difference, PPO expresses the difference as a percentage of the slower moving average. This percentage-based approach makes PPO values comparable across different securities and price levels, allowing for standardized analysis regardless of whether a stock trades at $10 or $1,000.</p>"},{"location":"indicators/momentum/ppo/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.70, 47.00, 47.25, 47.50, 47.35, 47.75]\n\n# Calculate PPO with default periods (12, 26)\nppo = SQA::TAI.ppo(prices, fast_period: 12, slow_period: 26)\n\nputs \"Current PPO: #{ppo.last.round(4)}%\"\n</code></pre>"},{"location":"indicators/momentum/ppo/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>fast_period</code> Integer No 12 Period for fast EMA <code>slow_period</code> Integer No 26 Period for slow EMA <code>ma_type</code> Integer No 0 Moving average type (0=SMA, 1=EMA, etc.)"},{"location":"indicators/momentum/ppo/#returns","title":"Returns","text":"<p>Returns an array of PPO values expressed as percentages. The first <code>slow_period - 1</code> values will be <code>nil</code>. Values typically range between -10% and +10%, though they can exceed these bounds during strong trends.</p>"},{"location":"indicators/momentum/ppo/#formula","title":"Formula","text":"<pre><code>PPO = ((Fast EMA - Slow EMA) / Slow EMA) \u00d7 100\n</code></pre> <p>For example, if the 12-period EMA is 46.50 and the 26-period EMA is 45.00: <pre><code>PPO = ((46.50 - 45.00) / 45.00) \u00d7 100 = 3.33%\n</code></pre></p>"},{"location":"indicators/momentum/ppo/#interpretation","title":"Interpretation","text":"PPO Value Interpretation Positive Fast MA above slow MA - bullish momentum Negative Fast MA below slow MA - bearish momentum Zero Fast MA equals slow MA - neutral Increasing Momentum strengthening Decreasing Momentum weakening"},{"location":"indicators/momentum/ppo/#signal-strength","title":"Signal Strength","text":"<ul> <li>0 to \u00b12%: Weak momentum or consolidation</li> <li>\u00b12% to \u00b15%: Moderate momentum</li> <li>\u00b15% to \u00b110%: Strong momentum</li> <li>Beyond \u00b110%: Extreme momentum (potential reversal zone)</li> </ul>"},{"location":"indicators/momentum/ppo/#why-percentage-matters","title":"Why Percentage Matters","text":"<p>The percentage-based calculation provides several key advantages:</p>"},{"location":"indicators/momentum/ppo/#1-cross-security-comparison","title":"1. Cross-Security Comparison","text":"<p>PPO allows direct comparison between securities at different price levels:</p> <pre><code># Stock A trading at $10\nstock_a_prices = [9.50, 9.80, 10.00, 10.20, 10.50]\nppo_a = SQA::TAI.ppo(stock_a_prices)\n\n# Stock B trading at $1000\nstock_b_prices = [950, 980, 1000, 1020, 1050]\nppo_b = SQA::TAI.ppo(stock_b_prices)\n\n# Both will show similar PPO values (~5%) despite 100x price difference\nputs \"Stock A PPO: #{ppo_a.last.round(2)}%\"\nputs \"Stock B PPO: #{ppo_b.last.round(2)}%\"\n</code></pre> <p>Both stocks show similar percentage momentum, making them directly comparable for relative strength analysis.</p>"},{"location":"indicators/momentum/ppo/#2-historical-consistency","title":"2. Historical Consistency","text":"<p>PPO remains consistent across time even as a security's price level changes dramatically:</p> <pre><code># Early 2010: Stock at $50, APO shows +0.50 points\n# Late 2024: Stock at $500, APO shows +5.00 points\n\n# PPO would show similar +1% in both cases\n# This allows for consistent historical backtesting\n</code></pre>"},{"location":"indicators/momentum/ppo/#3-standardized-thresholds","title":"3. Standardized Thresholds","text":"<p>You can use the same PPO thresholds across all securities:</p> <pre><code>def analyze_momentum(prices)\n  ppo = SQA::TAI.ppo(prices)\n  current_ppo = ppo.last\n\n  case current_ppo\n  when 5..Float::INFINITY\n    \"Strong bullish momentum (#{current_ppo.round(2)}%)\"\n  when 2..5\n    \"Moderate bullish momentum (#{current_ppo.round(2)}%)\"\n  when -2..2\n    \"Neutral/Consolidation (#{current_ppo.round(2)}%)\"\n  when -5..-2\n    \"Moderate bearish momentum (#{current_ppo.round(2)}%)\"\n  when -Float::INFINITY..-5\n    \"Strong bearish momentum (#{current_ppo.round(2)}%)\"\n  end\nend\n\n# Same thresholds work for penny stocks and high-priced stocks\nputs analyze_momentum(low_price_stock)\nputs analyze_momentum(high_price_stock)\n</code></pre>"},{"location":"indicators/momentum/ppo/#example-basic-ppo-signals","title":"Example: Basic PPO Signals","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nppo = SQA::TAI.ppo(prices, fast_period: 12, slow_period: 26)\ncurrent_ppo = ppo.last\nprevious_ppo = ppo[-2]\n\n# Zero line crossover\nif previous_ppo &lt; 0 &amp;&amp; current_ppo &gt; 0\n  puts \"PPO crossed above zero - Bullish signal\"\n  puts \"Momentum shifted from negative to positive\"\nelsif previous_ppo &gt; 0 &amp;&amp; current_ppo &lt; 0\n  puts \"PPO crossed below zero - Bearish signal\"\n  puts \"Momentum shifted from positive to negative\"\nend\n\n# Momentum strength\nif current_ppo.abs &gt; 5\n  direction = current_ppo &gt; 0 ? \"bullish\" : \"bearish\"\n  puts \"Strong #{direction} momentum: #{current_ppo.round(2)}%\"\nend\n</code></pre>"},{"location":"indicators/momentum/ppo/#example-ppo-vs-apo-comparison","title":"Example: PPO vs APO Comparison","text":"<pre><code># Demonstrate percentage advantage\nprices_low = [10, 10.2, 10.5, 10.8, 11.0]  # Low-priced stock\nprices_high = [1000, 1020, 1050, 1080, 1100]  # High-priced stock\n\napo_low = SQA::TAI.apo(prices_low)\napo_high = SQA::TAI.apo(prices_high)\n\nppo_low = SQA::TAI.ppo(prices_low)\nppo_high = SQA::TAI.ppo(prices_high)\n\nputs &lt;&lt;~COMPARISON\n  Low-Priced Stock ($10):\n    APO: #{apo_low.last.round(4)} points\n    PPO: #{ppo_low.last.round(4)}%\n\n  High-Priced Stock ($1000):\n    APO: #{apo_high.last.round(4)} points (100x larger!)\n    PPO: #{ppo_high.last.round(4)}% (same as low-priced stock)\n\n  Conclusion: PPO normalizes momentum across price levels\nCOMPARISON\n</code></pre>"},{"location":"indicators/momentum/ppo/#example-ppo-divergence","title":"Example: PPO Divergence","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nppo = SQA::TAI.ppo(prices)\n\n# Find recent price and PPO peaks\nprice_peak_1 = prices[-20..-10].max\nprice_peak_2 = prices[-9..-1].max\n\nppo_peak_1 = ppo[-20..-10].compact.max\nppo_peak_2 = ppo[-9..-1].compact.max\n\n# Bearish divergence: price makes higher high, PPO makes lower high\nif price_peak_2 &gt; price_peak_1 &amp;&amp; ppo_peak_2 &lt; ppo_peak_1\n  puts &lt;&lt;~DIVERGENCE\n    Bearish Divergence Detected!\n    Price: $#{price_peak_1} -&gt; $#{price_peak_2} (higher high)\n    PPO: #{ppo_peak_1.round(2)}% -&gt; #{ppo_peak_2.round(2)}% (lower high)\n\n    Interpretation: Price is rising but momentum is weakening\n    Warning: Potential trend reversal ahead\n  DIVERGENCE\nend\n\n# Bullish divergence: price makes lower low, PPO makes higher low\nprice_low_1 = prices[-20..-10].min\nprice_low_2 = prices[-9..-1].min\n\nppo_low_1 = ppo[-20..-10].compact.min\nppo_low_2 = ppo[-9..-1].compact.min\n\nif price_low_2 &lt; price_low_1 &amp;&amp; ppo_low_2 &gt; ppo_low_1\n  puts &lt;&lt;~DIVERGENCE\n    Bullish Divergence Detected!\n    Price: $#{price_low_1} -&gt; $#{price_low_2} (lower low)\n    PPO: #{ppo_low_1.round(2)}% -&gt; #{ppo_low_2.round(2)}% (higher low)\n\n    Interpretation: Price is falling but momentum is strengthening\n    Opportunity: Potential trend reversal upward\n  DIVERGENCE\nend\n</code></pre>"},{"location":"indicators/momentum/ppo/#example-ppo-with-signal-line","title":"Example: PPO with Signal Line","text":"<pre><code>prices = load_historical_prices('MSFT')\n\nppo = SQA::TAI.ppo(prices)\n\n# Create signal line (9-period EMA of PPO)\nsignal_line = SQA::TAI.ema(ppo.compact, period: 9)\n\n# Pad signal line to match PPO array size\nsignal_line = [nil] * (ppo.size - signal_line.size) + signal_line\n\ncurrent_ppo = ppo.last\ncurrent_signal = signal_line.last\nprevious_ppo = ppo[-2]\nprevious_signal = signal_line[-2]\n\n# PPO/Signal crossover (similar to MACD)\nif previous_ppo &lt; previous_signal &amp;&amp; current_ppo &gt; current_signal\n  puts &lt;&lt;~SIGNAL\n    PPO Bullish Crossover\n    PPO: #{current_ppo.round(2)}%\n    Signal: #{current_signal.round(2)}%\n    Action: Consider buying\n  SIGNAL\nelsif previous_ppo &gt; previous_signal &amp;&amp; current_ppo &lt; current_signal\n  puts &lt;&lt;~SIGNAL\n    PPO Bearish Crossover\n    PPO: #{current_ppo.round(2)}%\n    Signal: #{current_signal.round(2)}%\n    Action: Consider selling\n  SIGNAL\nend\n\n# Histogram (PPO - Signal)\nhistogram = current_ppo - current_signal\nputs \"PPO Histogram: #{histogram.round(2)}%\"\n</code></pre>"},{"location":"indicators/momentum/ppo/#example-multi-security-momentum-ranking","title":"Example: Multi-Security Momentum Ranking","text":"<pre><code># PPO excels at ranking momentum across different securities\nstocks = ['AAPL', 'GOOGL', 'MSFT', 'TSLA', 'AMZN']\n\nmomentum_scores = stocks.map do |ticker|\n  prices = load_historical_prices(ticker)\n  ppo = SQA::TAI.ppo(prices)\n\n  {\n    ticker: ticker,\n    price: prices.last,\n    ppo: ppo.last.round(2)\n  }\nend\n\n# Sort by PPO (percentage momentum)\nranked = momentum_scores.sort_by { |s| -s[:ppo] }\n\nputs \"Momentum Rankings (PPO):\"\nputs \"=\" * 40\nranked.each_with_index do |stock, index|\n  puts \"#{index + 1}. #{stock[:ticker]}: #{stock[:ppo]}% (Price: $#{stock[:price]})\"\nend\n\nputs \"\\nTop momentum plays: #{ranked.first(2).map { |s| s[:ticker] }.join(', ')}\"\n</code></pre>"},{"location":"indicators/momentum/ppo/#example-overboughtoversold-with-ppo","title":"Example: Overbought/Oversold with PPO","text":"<pre><code>prices = load_historical_prices('SPY')\n\nppo = SQA::TAI.ppo(prices)\n\n# Calculate PPO statistical bounds\nrecent_ppo = ppo.last(50).compact\nppo_mean = recent_ppo.sum / recent_ppo.size\nppo_std = Math.sqrt(recent_ppo.map { |x| (x - ppo_mean)**2 }.sum / recent_ppo.size)\n\nupper_band = ppo_mean + (2 * ppo_std)\nlower_band = ppo_mean - (2 * ppo_std)\n\ncurrent_ppo = ppo.last\n\nputs &lt;&lt;~ANALYSIS\n  PPO Statistical Analysis:\n  Current PPO: #{current_ppo.round(2)}%\n  Mean: #{ppo_mean.round(2)}%\n  Std Dev: #{ppo_std.round(2)}%\n  Upper Band (+2\u03c3): #{upper_band.round(2)}%\n  Lower Band (-2\u03c3): #{lower_band.round(2)}%\nANALYSIS\n\nif current_ppo &gt; upper_band\n  puts \"PPO above upper band - Overbought condition\"\n  puts \"Momentum may be overextended\"\nelsif current_ppo &lt; lower_band\n  puts \"PPO below lower band - Oversold condition\"\n  puts \"Potential reversal opportunity\"\nend\n</code></pre>"},{"location":"indicators/momentum/ppo/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/ppo/#1-zero-line-strategy","title":"1. Zero-Line Strategy","text":"<ul> <li>Buy: PPO crosses above zero (bullish momentum begins)</li> <li>Sell: PPO crosses below zero (bearish momentum begins)</li> </ul>"},{"location":"indicators/momentum/ppo/#2-signal-line-strategy","title":"2. Signal Line Strategy","text":"<ul> <li>Buy: PPO crosses above its signal line</li> <li>Sell: PPO crosses below its signal line</li> </ul>"},{"location":"indicators/momentum/ppo/#3-divergence-strategy","title":"3. Divergence Strategy","text":"<ul> <li>Buy: Bullish divergence (price makes lower low, PPO makes higher low)</li> <li>Sell: Bearish divergence (price makes higher high, PPO makes lower high)</li> </ul>"},{"location":"indicators/momentum/ppo/#4-extreme-readings","title":"4. Extreme Readings","text":"<ul> <li>Take Profits: PPO exceeds \u00b110% (momentum overextension)</li> <li>Avoid: PPO near zero (weak momentum, choppy conditions)</li> </ul>"},{"location":"indicators/momentum/ppo/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/ppo/#1-ppo-trend-filter","title":"1. PPO Trend Filter","text":"<p>Use PPO as a trend filter for other strategies:</p> <pre><code>ppo = SQA::TAI.ppo(prices)\n\nif ppo.last &gt; 0\n  puts \"Bullish trend - only take long positions\"\nelsif ppo.last &lt; 0\n  puts \"Bearish trend - only take short positions\"\nend\n</code></pre>"},{"location":"indicators/momentum/ppo/#2-ppo-rate-of-change","title":"2. PPO Rate of Change","text":"<p>Monitor how fast PPO is changing:</p> <pre><code>ppo = SQA::TAI.ppo(prices)\nppo_change = ppo.last - ppo[-5]\n\nif ppo_change &gt; 2\n  puts \"Rapidly accelerating momentum - strong trend\"\nelsif ppo_change &lt; -2\n  puts \"Rapidly decelerating momentum - trend exhaustion\"\nend\n</code></pre>"},{"location":"indicators/momentum/ppo/#3-multi-timeframe-ppo","title":"3. Multi-Timeframe PPO","text":"<pre><code>daily_prices = load_historical_prices('AAPL', timeframe: 'daily')\nweekly_prices = load_historical_prices('AAPL', timeframe: 'weekly')\n\ndaily_ppo = SQA::TAI.ppo(daily_prices)\nweekly_ppo = SQA::TAI.ppo(weekly_prices)\n\n# Strongest signals when both timeframes align\nif daily_ppo.last &gt; 0 &amp;&amp; weekly_ppo.last &gt; 0\n  puts \"Multi-timeframe bullish - high conviction buy\"\nelsif daily_ppo.last &lt; 0 &amp;&amp; weekly_ppo.last &lt; 0\n  puts \"Multi-timeframe bearish - high conviction sell\"\nend\n</code></pre>"},{"location":"indicators/momentum/ppo/#common-settings","title":"Common Settings","text":"Fast Slow Use Case 12 26 Standard (MACD equivalent) 9 18 More responsive for short-term trading 20 40 Smoother for swing trading 5 35 Aggressive crossover system"},{"location":"indicators/momentum/ppo/#ppo-vs-apo-when-to-use-each","title":"PPO vs APO: When to Use Each","text":"<p>Use PPO when: - Comparing momentum across different securities - Analyzing stocks at vastly different price levels - Building universal trading strategies - Conducting historical analysis across time periods - Ranking relative strength</p> <p>Use APO when: - Analyzing a single security in isolation - Need actual point values for position sizing - Working with absolute price movements - Calculating precise entry/exit points</p>"},{"location":"indicators/momentum/ppo/#related-indicators","title":"Related Indicators","text":"<ul> <li>APO - Absolute price oscillator (point-based version)</li> <li>MACD - Similar momentum oscillator with histogram</li> <li>RSI - Bounded momentum oscillator</li> <li>ROC - Rate of change (another percentage indicator)</li> </ul>"},{"location":"indicators/momentum/ppo/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/roc/","title":"Rate of Change (ROC)","text":"<p>The Rate of Change (ROC) is a momentum oscillator that measures the percentage change in price between the current price and the price n periods ago.</p>"},{"location":"indicators/momentum/roc/#formula","title":"Formula","text":"<p>ROC = ((Price - Price n periods ago) / Price n periods ago) * 100</p>"},{"location":"indicators/momentum/roc/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 10 Lookback period"},{"location":"indicators/momentum/roc/#returns","title":"Returns","text":"<p>Returns an array of ROC values as percentages.</p>"},{"location":"indicators/momentum/roc/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83, 45.10, 45.42, 45.84, 46.08, 46.03, 46.41]\n\nroc = SQA::TAI.roc(prices, period: 10)\n\nputs \"Current ROC: #{roc.last.round(2)}%\"\n</code></pre>"},{"location":"indicators/momentum/roc/#interpretation","title":"Interpretation","text":"<ul> <li>Positive ROC: Price is higher than n periods ago (upward momentum)</li> <li>Negative ROC: Price is lower than n periods ago (downward momentum)</li> <li>ROC crosses above zero: Bullish signal</li> <li>ROC crosses below zero: Bearish signal</li> <li>Extreme ROC values: May indicate overbought/oversold conditions</li> </ul>"},{"location":"indicators/momentum/roc/#example-roc-divergence","title":"Example: ROC Divergence","text":"<pre><code>prices = load_historical_prices('AAPL')\nroc = SQA::TAI.roc(prices, period: 12)\n\n# Check for divergence\nif prices.last &gt; prices[-10] &amp;&amp; roc.last &lt; roc[-10]\n  puts \"BEARISH DIVERGENCE: Price higher but ROC lower\"\nelsif prices.last &lt; prices[-10] &amp;&amp; roc.last &gt; roc[-10]\n  puts \"BULLISH DIVERGENCE: Price lower but ROC higher\"\nend\n</code></pre>"},{"location":"indicators/momentum/roc/#common-settings","title":"Common Settings","text":"Period Use Case 9 Short-term momentum 12-14 Standard trading 20-25 Longer-term momentum"},{"location":"indicators/momentum/roc/#related-indicators","title":"Related Indicators","text":"<ul> <li>ROCP - Rate of Change Percentage</li> <li>ROCR - Rate of Change Ratio</li> <li>ROCR100 - Rate of Change Ratio 100 Scale</li> <li>MOM - Momentum</li> </ul>"},{"location":"indicators/momentum/roc/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> </ul>"},{"location":"indicators/momentum/rocp/","title":"Rate of Change Percentage (ROCP)","text":"<p>The Rate of Change Percentage (ROCP) is a momentum oscillator that measures the percentage change in price over a specified period. It is essentially identical to ROC but explicitly emphasizes its percentage-based calculation. ROCP provides a normalized view of momentum that makes it easy to compare across different securities and timeframes.</p>"},{"location":"indicators/momentum/rocp/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25]\n\n# Calculate 10-period ROCP\nrocp = SQA::TAI.rocp(prices, period: 10)\n\nputs \"Current ROCP: #{rocp.last.round(2)}%\"\n</code></pre>"},{"location":"indicators/momentum/rocp/#formula","title":"Formula","text":"<p>ROCP = ((Price - Price[n periods ago]) / Price[n periods ago]) * 100</p> <p>Where: - Price = Current closing price - Price[n periods ago] = Closing price n periods back - Result is expressed as a percentage</p>"},{"location":"indicators/momentum/rocp/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 10 Lookback period for comparison"},{"location":"indicators/momentum/rocp/#returns","title":"Returns","text":"<p>Returns an array of ROCP values as percentages. The first <code>period</code> values will be <code>nil</code> as there is insufficient data to calculate the rate of change.</p>"},{"location":"indicators/momentum/rocp/#interpretation","title":"Interpretation","text":"ROCP Value Interpretation &gt; 0% Price rising - bullish momentum 0% No change - neutral &lt; 0% Price falling - bearish momentum &gt; +10% Strong upward momentum, potential overbought &lt; -10% Strong downward momentum, potential oversold Extremes (\u00b120%) Very strong momentum, possible reversal"},{"location":"indicators/momentum/rocp/#key-concepts","title":"Key Concepts","text":"<ul> <li>Zero-Line Crossovers: ROCP crossing above/below zero signals momentum shifts</li> <li>Magnitude: The larger the absolute value, the stronger the momentum</li> <li>Divergence: Price making new highs/lows while ROCP doesn't confirms trend weakness</li> <li>Overbought/Oversold: Extreme positive/negative values suggest potential reversals</li> </ul>"},{"location":"indicators/momentum/rocp/#example-basic-rocp-trading-signals","title":"Example: Basic ROCP Trading Signals","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nrocp = SQA::TAI.rocp(prices, period: 10)\ncurrent_rocp = rocp.last\nprev_rocp = rocp[-2]\n\n# Zero-line crossovers\nif current_rocp &gt; 0 &amp;&amp; prev_rocp &lt;= 0\n  puts \"ROCP crossed above zero: BUY signal\"\n  puts \"Price is #{current_rocp.round(2)}% above price 10 periods ago\"\nelsif current_rocp &lt; 0 &amp;&amp; prev_rocp &gt;= 0\n  puts \"ROCP crossed below zero: SELL signal\"\n  puts \"Price is #{current_rocp.abs.round(2)}% below price 10 periods ago\"\nend\n\n# Extreme values\ncase current_rocp\nwhen 15..Float::INFINITY\n  puts \"Strongly overbought (#{current_rocp.round(2)}%) - consider taking profits\"\nwhen -Float::INFINITY..-15\n  puts \"Strongly oversold (#{current_rocp.round(2)}%) - consider buying\"\nwhen -5..5\n  puts \"Neutral momentum (#{current_rocp.round(2)}%)\"\nelse\n  puts \"Moderate momentum (#{current_rocp.round(2)}%)\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#example-rocp-divergence-detection","title":"Example: ROCP Divergence Detection","text":"<pre><code>prices = load_historical_prices('TSLA')\nrocp = SQA::TAI.rocp(prices, period: 12)\n\n# Find recent highs in price and ROCP\nprice_high_1 = prices[-20..-10].max\nprice_high_2 = prices[-9..-1].max\n\nrocp_high_1 = rocp[-20..-10].compact.max\nrocp_high_2 = rocp[-9..-1].compact.max\n\n# Bearish divergence: price makes higher high, ROCP makes lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; rocp_high_2 &lt; rocp_high_1\n  puts \"Bearish Divergence detected!\"\n  puts \"Price higher high: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)}\"\n  puts \"ROCP lower high: #{rocp_high_1.round(2)}% -&gt; #{rocp_high_2.round(2)}%\"\n  puts \"Momentum weakening - potential reversal\"\nend\n\n# Find recent lows\nprice_low_1 = prices[-20..-10].min\nprice_low_2 = prices[-9..-1].min\n\nrocp_low_1 = rocp[-20..-10].compact.min\nrocp_low_2 = rocp[-9..-1].compact.min\n\n# Bullish divergence: price makes lower low, ROCP makes higher low\nif price_low_2 &lt; price_low_1 &amp;&amp; rocp_low_2 &gt; rocp_low_1\n  puts \"Bullish Divergence detected!\"\n  puts \"Price lower low: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)}\"\n  puts \"ROCP higher low: #{rocp_low_1.round(2)}% -&gt; #{rocp_low_2.round(2)}%\"\n  puts \"Downward momentum slowing - potential reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#example-multi-timeframe-rocp-analysis","title":"Example: Multi-Timeframe ROCP Analysis","text":"<pre><code>prices = load_historical_prices('MSFT')\n\n# Calculate multiple periods\nrocp_5 = SQA::TAI.rocp(prices, period: 5)   # Short-term\nrocp_10 = SQA::TAI.rocp(prices, period: 10)  # Medium-term\nrocp_20 = SQA::TAI.rocp(prices, period: 20)  # Long-term\n\nputs \"5-day ROCP: #{rocp_5.last.round(2)}%\"\nputs \"10-day ROCP: #{rocp_10.last.round(2)}%\"\nputs \"20-day ROCP: #{rocp_20.last.round(2)}%\"\n\n# All timeframes aligned = strong signal\nif rocp_5.last &gt; 5 &amp;&amp; rocp_10.last &gt; 5 &amp;&amp; rocp_20.last &gt; 5\n  puts \"All timeframes showing positive momentum - strong uptrend\"\n  puts \"Consider buying or holding long positions\"\nelsif rocp_5.last &lt; -5 &amp;&amp; rocp_10.last &lt; -5 &amp;&amp; rocp_20.last &lt; -5\n  puts \"All timeframes showing negative momentum - strong downtrend\"\n  puts \"Consider selling or shorting\"\nend\n\n# Divergence between timeframes\nif rocp_5.last &gt; 10 &amp;&amp; rocp_20.last &lt; 0\n  puts \"Short-term surge in longer-term downtrend\"\n  puts \"Potential short-term bounce, not trend change\"\nelsif rocp_5.last &lt; -10 &amp;&amp; rocp_20.last &gt; 0\n  puts \"Short-term dip in longer-term uptrend\"\n  puts \"Potential buying opportunity\"\nend\n\n# Momentum acceleration\nif rocp_5.last &gt; rocp_10.last &amp;&amp; rocp_10.last &gt; rocp_20.last\n  puts \"Accelerating upward momentum across timeframes\"\nelsif rocp_5.last &lt; rocp_10.last &amp;&amp; rocp_10.last &lt; rocp_20.last\n  puts \"Accelerating downward momentum across timeframes\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#example-rocp-with-moving-average","title":"Example: ROCP with Moving Average","text":"<pre><code>prices = load_historical_prices('NVDA')\nrocp = SQA::TAI.rocp(prices, period: 10)\n\n# Calculate moving average of ROCP to smooth it\nrocp_sma = SQA::TAI.sma(rocp.compact, period: 5)\n\ncurrent_rocp = rocp.last\ncurrent_rocp_sma = rocp_sma.last\n\nputs \"Current ROCP: #{current_rocp.round(2)}%\"\nputs \"ROCP 5-day average: #{current_rocp_sma.round(2)}%\"\n\n# Signal when ROCP crosses its moving average\nif current_rocp &gt; current_rocp_sma\n  puts \"ROCP above its average - momentum strengthening\"\nelse\n  puts \"ROCP below its average - momentum weakening\"\nend\n\n# Track ROCP trend\nrocp_values = rocp.compact.last(5)\nif rocp_values.each_cons(2).all? { |a, b| b &gt; a }\n  puts \"ROCP rising for 5 periods - building momentum\"\nelsif rocp_values.each_cons(2).all? { |a, b| b &lt; a }\n  puts \"ROCP falling for 5 periods - losing momentum\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#example-rocp-for-multiple-securities-comparison","title":"Example: ROCP for Multiple Securities Comparison","text":"<pre><code># Compare momentum across different stocks\nsecurities = ['AAPL', 'MSFT', 'GOOGL', 'AMZN']\nrocp_values = {}\n\nsecurities.each do |symbol|\n  prices = load_historical_prices(symbol)\n  rocp = SQA::TAI.rocp(prices, period: 10)\n  rocp_values[symbol] = rocp.last\nend\n\n# Sort by momentum\nsorted = rocp_values.sort_by { |k, v| -v }\n\nputs \"Momentum Rankings (10-day ROCP):\"\nsorted.each_with_index do |(symbol, rocp), index|\n  puts \"#{index + 1}. #{symbol}: #{rocp.round(2)}%\"\nend\n\n# Identify strongest momentum\nstrongest = sorted.first\nputs \"\\nStrongest momentum: #{strongest[0]} at #{strongest[1].round(2)}%\"\n\n# Identify weakest momentum\nweakest = sorted.last\nputs \"Weakest momentum: #{weakest[0]} at #{weakest[1].round(2)}%\"\n\n# Find relative strength opportunities\navg_rocp = rocp_values.values.sum / rocp_values.size\nputs \"\\nAverage momentum: #{avg_rocp.round(2)}%\"\n\nrocp_values.each do |symbol, rocp|\n  if rocp &gt; avg_rocp + 5\n    puts \"#{symbol} showing above-average strength\"\n  elsif rocp &lt; avg_rocp - 5\n    puts \"#{symbol} showing below-average strength\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/rocp/#1-rocp-bands","title":"1. ROCP Bands","text":"<p>Create overbought/oversold bands based on historical ROCP values:</p> <pre><code>prices = load_historical_prices('SPY')\nrocp = SQA::TAI.rocp(prices, period: 10)\n\n# Calculate dynamic bands from 100-period history\nrocp_history = rocp.compact.last(100)\nupper_band = rocp_history.max * 0.8  # 80% of maximum\nlower_band = rocp_history.min * 0.8  # 80% of minimum\n\ncurrent_rocp = rocp.last\n\nif current_rocp &gt; upper_band\n  puts \"ROCP above upper band (#{upper_band.round(2)}%)\"\n  puts \"Overbought - potential reversal\"\nelsif current_rocp &lt; lower_band\n  puts \"ROCP below lower band (#{lower_band.round(2)}%)\"\n  puts \"Oversold - potential reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#2-rocp-histogram","title":"2. ROCP Histogram","text":"<p>Track the rate of change of ROCP itself:</p> <pre><code>rocp = SQA::TAI.rocp(prices, period: 10)\nrocp_compact = rocp.compact\n\n# Calculate ROCP momentum (difference between periods)\nrocp_histogram = []\nrocp_compact.each_cons(2) do |prev, curr|\n  rocp_histogram &lt;&lt; curr - prev\nend\n\nif rocp_histogram.last &gt; 0\n  puts \"ROCP momentum increasing (#{rocp_histogram.last.round(2)}%)\"\n  puts \"Acceleration phase\"\nelse\n  puts \"ROCP momentum decreasing (#{rocp_histogram.last.round(2)}%)\"\n  puts \"Deceleration phase\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#3-volatility-adjusted-rocp","title":"3. Volatility-Adjusted ROCP","text":"<p>Normalize ROCP by volatility for better comparison:</p> <pre><code>prices = load_historical_prices('BTC-USD')\nrocp = SQA::TAI.rocp(prices, period: 10)\n\n# Calculate standard deviation (simple volatility measure)\nrocp_compact = rocp.compact.last(20)\nmean = rocp_compact.sum / rocp_compact.size\nvariance = rocp_compact.map { |x| (x - mean) ** 2 }.sum / rocp_compact.size\nstd_dev = Math.sqrt(variance)\n\n# Volatility-adjusted ROCP (like a z-score)\nadjusted_rocp = (rocp.last - mean) / std_dev\n\nputs \"Raw ROCP: #{rocp.last.round(2)}%\"\nputs \"Volatility (std dev): #{std_dev.round(2)}%\"\nputs \"Adjusted ROCP: #{adjusted_rocp.round(2)} standard deviations\"\n\nif adjusted_rocp &gt; 2\n  puts \"Unusually strong momentum (&gt;2 std dev)\"\nelsif adjusted_rocp &lt; -2\n  puts \"Unusually weak momentum (&lt;-2 std dev)\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#4-sector-rotation-with-rocp","title":"4. Sector Rotation with ROCP","text":"<p>Use ROCP to identify sector rotation:</p> <pre><code>sectors = {\n  'Technology' =&gt; 'XLK',\n  'Finance' =&gt; 'XLF',\n  'Healthcare' =&gt; 'XLV',\n  'Energy' =&gt; 'XLE',\n  'Consumer' =&gt; 'XLY'\n}\n\nsector_momentum = {}\n\nsectors.each do |name, etf|\n  prices = load_historical_prices(etf)\n  rocp = SQA::TAI.rocp(prices, period: 20)\n  sector_momentum[name] = rocp.last\nend\n\n# Identify rotating capital\nsorted = sector_momentum.sort_by { |k, v| -v }\n\nputs \"Sector Momentum (20-day ROCP):\"\nsorted.each do |sector, rocp|\n  strength = case rocp\n    when 10..Float::INFINITY then \"Very Strong\"\n    when 5..10 then \"Strong\"\n    when -5..5 then \"Neutral\"\n    when -10..-5 then \"Weak\"\n    else \"Very Weak\"\n  end\n\n  puts \"#{sector}: #{rocp.round(2)}% - #{strength}\"\nend\n\nputs \"\\nCapital flowing INTO: #{sorted.first[0]}\"\nputs \"Capital flowing OUT OF: #{sorted.last[0]}\"\n</code></pre>"},{"location":"indicators/momentum/rocp/#example-rocp-mean-reversion-strategy","title":"Example: ROCP Mean Reversion Strategy","text":"<pre><code>prices = load_historical_prices('QQQ')\nrocp = SQA::TAI.rocp(prices, period: 10)\n\n# Calculate mean and standard deviation\nrocp_history = rocp.compact.last(100)\nmean_rocp = rocp_history.sum / rocp_history.size\nstd_dev = Math.sqrt(\n  rocp_history.map { |x| (x - mean_rocp) ** 2 }.sum / rocp_history.size\n)\n\ncurrent_rocp = rocp.last\nz_score = (current_rocp - mean_rocp) / std_dev\n\nputs \"Mean ROCP: #{mean_rocp.round(2)}%\"\nputs \"Current ROCP: #{current_rocp.round(2)}%\"\nputs \"Z-Score: #{z_score.round(2)}\"\n\n# Mean reversion signals\nif z_score &lt; -2\n  puts \"ROCP 2+ std dev below mean\"\n  puts \"Extreme oversold - mean reversion BUY\"\n  puts \"Expected return to #{mean_rocp.round(2)}%\"\nelsif z_score &gt; 2\n  puts \"ROCP 2+ std dev above mean\"\n  puts \"Extreme overbought - mean reversion SELL\"\n  puts \"Expected return to #{mean_rocp.round(2)}%\"\nelsif z_score.abs &lt; 0.5\n  puts \"ROCP near mean - no clear signal\"\nend\n\n# Calculate potential price targets based on mean reversion\ncurrent_price = prices.last\nif z_score &lt; -2\n  # If ROCP returns to mean, price would be:\n  expected_rocp = mean_rocp\n  target_price = current_price * (1 + expected_rocp/100) / (1 + current_rocp/100)\n  puts \"Price target if ROCP reverts to mean: #{target_price.round(2)}\"\n  puts \"Potential gain: #{((target_price - current_price) / current_price * 100).round(2)}%\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#example-rocp-with-volume-confirmation","title":"Example: ROCP with Volume Confirmation","text":"<pre><code>prices = load_historical_prices('AAPL')\nvolumes = load_historical_volumes('AAPL')\n\nrocp = SQA::TAI.rocp(prices, period: 10)\n\n# Calculate volume rate of change\nvolume_rocp = SQA::TAI.rocp(volumes, period: 10)\n\ncurrent_rocp = rocp.last\ncurrent_vol_rocp = volume_rocp.last\n\nputs \"Price ROCP: #{current_rocp.round(2)}%\"\nputs \"Volume ROCP: #{current_vol_rocp.round(2)}%\"\n\n# Strong signals when both align\nif current_rocp &gt; 5 &amp;&amp; current_vol_rocp &gt; 10\n  puts \"Price rising with expanding volume - strong BUY\"\n  puts \"Momentum confirmed by volume\"\nelsif current_rocp &lt; -5 &amp;&amp; current_vol_rocp &gt; 10\n  puts \"Price falling with expanding volume - strong SELL\"\n  puts \"Downward momentum confirmed\"\nelsif current_rocp &gt; 5 &amp;&amp; current_vol_rocp &lt; -10\n  puts \"Price rising but volume declining - weak signal\"\n  puts \"Caution: Momentum not confirmed\"\nelsif current_rocp &lt; -5 &amp;&amp; current_vol_rocp &lt; -10\n  puts \"Price falling but volume declining - weak signal\"\n  puts \"Downward momentum may be exhausting\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocp/#common-settings","title":"Common Settings","text":"Period Use Case Typical Range 5 Day trading, short-term momentum -15% to +15% 9-10 Short-term trading (most common) -12% to +12% 12-14 Standard trading -10% to +10% 20-25 Swing trading, longer-term -8% to +8% 50 Position trading, major trends -5% to +5%"},{"location":"indicators/momentum/rocp/#interpretation-guidelines-by-period","title":"Interpretation Guidelines by Period","text":""},{"location":"indicators/momentum/rocp/#short-term-5-10-days","title":"Short-term (5-10 days)","text":"<ul> <li>Extreme: \u00b115%</li> <li>Strong: \u00b110%</li> <li>Moderate: \u00b15%</li> <li>Neutral: \u00b12%</li> </ul>"},{"location":"indicators/momentum/rocp/#medium-term-10-20-days","title":"Medium-term (10-20 days)","text":"<ul> <li>Extreme: \u00b112%</li> <li>Strong: \u00b18%</li> <li>Moderate: \u00b14%</li> <li>Neutral: \u00b12%</li> </ul>"},{"location":"indicators/momentum/rocp/#long-term-20-days","title":"Long-term (20+ days)","text":"<ul> <li>Extreme: \u00b18%</li> <li>Strong: \u00b15%</li> <li>Moderate: \u00b13%</li> <li>Neutral: \u00b11%</li> </ul>"},{"location":"indicators/momentum/rocp/#strengths-and-limitations","title":"Strengths and Limitations","text":""},{"location":"indicators/momentum/rocp/#strengths","title":"Strengths","text":"<ul> <li>Easy to interpret (percentage-based)</li> <li>Comparable across securities</li> <li>Unbounded (can capture extreme moves)</li> <li>Leading indicator (anticipates trend changes)</li> <li>Simple calculation</li> </ul>"},{"location":"indicators/momentum/rocp/#limitations","title":"Limitations","text":"<ul> <li>Can remain overbought/oversold for extended periods</li> <li>No fixed boundaries (unlike RSI 0-100)</li> <li>Sensitive to price spikes/gaps</li> <li>Requires context for interpretation</li> <li>Lagging by design (lookback period)</li> </ul>"},{"location":"indicators/momentum/rocp/#tips-for-using-rocp","title":"Tips for Using ROCP","text":"<ol> <li>Use with confirmation: Combine with volume, trend indicators, or support/resistance</li> <li>Adjust period to timeframe: Shorter periods for day trading, longer for swing trading</li> <li>Watch divergence: More reliable than absolute levels</li> <li>Consider volatility: High-volatility stocks have wider typical ranges</li> <li>Multiple timeframes: Confirm signals across different periods</li> <li>Relative strength: Compare ROCP across securities for relative momentum</li> <li>Mean reversion: Calculate historical mean for context</li> <li>Zero-line: Crossing zero is often more significant than extreme values</li> </ol>"},{"location":"indicators/momentum/rocp/#related-indicators","title":"Related Indicators","text":"<ul> <li>ROC - Rate of Change (identical calculation)</li> <li>ROCR - Rate of Change Ratio (ratio format)</li> <li>ROCR100 - Rate of Change Ratio 100 Scale</li> <li>MOM - Momentum (absolute change)</li> <li>RSI - Relative Strength Index (bounded 0-100)</li> </ul>"},{"location":"indicators/momentum/rocp/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/momentum/rocr/","title":"Rate of Change Ratio (ROCR)","text":"<p>The Rate of Change Ratio (ROCR) is a momentum indicator that measures price changes as a ratio rather than a percentage. It calculates the ratio of the current price to the price n periods ago, making it centered around 1.0. Values above 1.0 indicate rising prices, while values below 1.0 indicate falling prices. This ratio-based approach provides a different perspective from percentage-based indicators like ROCP, making it particularly useful for comparing momentum across different price levels and securities.</p>"},{"location":"indicators/momentum/rocr/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [100.0, 102.0, 104.0, 103.0, 105.0, 107.0,\n          106.0, 108.0, 110.0, 109.0, 111.0, 113.0,\n          112.0, 114.0, 116.0, 115.0, 117.0, 119.0]\n\n# Calculate 10-period ROCR\nrocr = SQA::TAI.rocr(prices, period: 10)\n\nputs \"Current ROCR: #{rocr.last.round(4)}\"\n</code></pre>"},{"location":"indicators/momentum/rocr/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 10 Number of periods for calculation"},{"location":"indicators/momentum/rocr/#returns","title":"Returns","text":"<p>Returns an array of ROCR values typically ranging from 0.8 to 1.2 (representing 80% to 120% price ratios). The first <code>period</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/rocr/#interpretation","title":"Interpretation","text":"ROCR Value Interpretation &gt; 1.10 Strong upward momentum (10%+ gain) 1.05-1.10 Moderate upward momentum (5-10% gain) 1.00-1.05 Slight upward momentum (0-5% gain) 1.00 No change - neutral momentum 0.95-1.00 Slight downward momentum (0-5% loss) 0.90-0.95 Moderate downward momentum (5-10% loss) &lt; 0.90 Strong downward momentum (10%+ loss)"},{"location":"indicators/momentum/rocr/#formula","title":"Formula","text":"<pre><code>ROCR = Current Price / Price[n periods ago]\n\nWhere:\n- Current Price = Latest closing price\n- Price[n periods ago] = Closing price n periods back\n- Centered at 1.0 (no change)\n- &gt; 1.0 indicates price increase\n- &lt; 1.0 indicates price decrease\n</code></pre>"},{"location":"indicators/momentum/rocr/#example-basic-rocr-trading-signals","title":"Example: Basic ROCR Trading Signals","text":"<pre><code>prices = load_historical_data('AAPL')\n\nrocr_10 = SQA::TAI.rocr(prices, period: 10)\ncurrent_rocr = rocr_10.last\n\ncase current_rocr\nwhen 0...0.90\n  puts \"ROCR below 0.90 (#{current_rocr.round(4)}) - Oversold\"\n  puts \"Price down &gt;10% from 10 periods ago - Potential BUY\"\nwhen 1.10..Float::INFINITY\n  puts \"ROCR above 1.10 (#{current_rocr.round(4)}) - Overbought\"\n  puts \"Price up &gt;10% from 10 periods ago - Potential SELL\"\nwhen 0.95...1.05\n  puts \"ROCR neutral (#{current_rocr.round(4)}) - Range-bound\"\n  puts \"Price relatively unchanged\"\nelse\n  puts \"ROCR at #{current_rocr.round(4)}\"\nend\n\n# Calculate actual percentage change\npercentage_change = ((current_rocr - 1.0) * 100).round(2)\nputs \"Percentage change: #{percentage_change}%\"\n\n# Trend direction\nif current_rocr &gt; 1.0\n  puts \"Bullish momentum - price rising\"\nelsif current_rocr &lt; 1.0\n  puts \"Bearish momentum - price falling\"\nelse\n  puts \"Neutral - no momentum\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr/#example-rocr-crossover-strategy","title":"Example: ROCR Crossover Strategy","text":"<pre><code>prices = load_historical_data('TSLA')\n\nrocr = SQA::TAI.rocr(prices, period: 10)\n\n# Track crossovers of the 1.0 line (neutral)\ncurrent_rocr = rocr.last\nprev_rocr = rocr[-2]\nolder_rocr = rocr[-3]\n\n# Bullish crossover - ROCR crosses above 1.0\nif current_rocr &gt; 1.0 &amp;&amp; prev_rocr &lt;= 1.0\n  puts \"Bullish Crossover!\"\n  puts \"ROCR crossed above 1.0: #{prev_rocr.round(4)} -&gt; #{current_rocr.round(4)}\"\n  puts \"Momentum turning positive - BUY signal\"\n\n  # Calculate momentum strength\n  momentum_strength = ((current_rocr - 1.0) * 100).round(2)\n  puts \"Current momentum: +#{momentum_strength}%\"\nend\n\n# Bearish crossover - ROCR crosses below 1.0\nif current_rocr &lt; 1.0 &amp;&amp; prev_rocr &gt;= 1.0\n  puts \"Bearish Crossover!\"\n  puts \"ROCR crossed below 1.0: #{prev_rocr.round(4)} -&gt; #{current_rocr.round(4)}\"\n  puts \"Momentum turning negative - SELL signal\"\n\n  momentum_strength = ((1.0 - current_rocr) * 100).round(2)\n  puts \"Current momentum: -#{momentum_strength}%\"\nend\n\n# Momentum acceleration\nif current_rocr &gt; prev_rocr &amp;&amp; prev_rocr &gt; older_rocr\n  puts \"Accelerating upward momentum\"\nelsif current_rocr &lt; prev_rocr &amp;&amp; prev_rocr &lt; older_rocr\n  puts \"Accelerating downward momentum\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr/#example-rocr-vs-rocp-comparison","title":"Example: ROCR vs ROCP Comparison","text":"<pre><code>prices = load_historical_data('MSFT')\n\n# Calculate both ratio and percentage\nrocr = SQA::TAI.rocr(prices, period: 10)\nrocp = SQA::TAI.rocp(prices, period: 10)\n\ncurrent_rocr = rocr.last\ncurrent_rocp = rocp.last\n\nputs \"ROCR: #{current_rocr.round(4)}\"\nputs \"ROCP: #{current_rocp.round(2)}%\"\n\n# Convert between formats\nrocp_from_rocr = ((current_rocr - 1.0) * 100).round(2)\nrocr_from_rocp = (1.0 + current_rocp / 100.0).round(4)\n\nputs \"\\nConversions:\"\nputs \"ROCR #{current_rocr.round(4)} = #{rocp_from_rocr}% (ROCP equivalent)\"\nputs \"ROCP #{current_rocp.round(2)}% = #{rocr_from_rocp} (ROCR equivalent)\"\n\n# Key differences\nputs &lt;&lt;~ANALYSIS\n\n  Key Differences:\n  ================\n\n  ROCR (Ratio):\n  - Value: #{current_rocr.round(4)}\n  - Centered at: 1.0\n  - Range: Typically 0.8 to 1.2\n  - Format: Ratio/multiplier\n  - Interpretation: Price is #{current_rocr.round(4)}x the price 10 periods ago\n\n  ROCP (Percentage):\n  - Value: #{current_rocp.round(2)}%\n  - Centered at: 0.0\n  - Range: Typically -20% to +20%\n  - Format: Percentage\n  - Interpretation: Price changed #{current_rocp.round(2)}% over 10 periods\n\n  When to use ROCR:\n  - Comparing momentum across different price levels\n  - Ratio-based trading systems\n  - Log-scale analysis\n  - Multiplicative comparisons\n\n  When to use ROCP:\n  - Intuitive percentage understanding\n  - Additive comparisons\n  - Standard momentum analysis\nANALYSIS\n</code></pre>"},{"location":"indicators/momentum/rocr/#example-multi-period-rocr-analysis","title":"Example: Multi-Period ROCR Analysis","text":"<pre><code>prices = load_historical_data('NVDA')\n\n# Calculate multiple periods\nrocr_5 = SQA::TAI.rocr(prices, period: 5)\nrocr_10 = SQA::TAI.rocr(prices, period: 10)\nrocr_20 = SQA::TAI.rocr(prices, period: 20)\n\n# Convert to percentage for easier reading\npct_5 = ((rocr_5.last - 1.0) * 100).round(2)\npct_10 = ((rocr_10.last - 1.0) * 100).round(2)\npct_20 = ((rocr_20.last - 1.0) * 100).round(2)\n\nputs \"5-period ROCR: #{rocr_5.last.round(4)} (#{pct_5}%)\"\nputs \"10-period ROCR: #{rocr_10.last.round(4)} (#{pct_10}%)\"\nputs \"20-period ROCR: #{rocr_20.last.round(4)} (#{pct_20}%)\"\n\n# Momentum consistency\nif rocr_5.last &gt; 1.0 &amp;&amp; rocr_10.last &gt; 1.0 &amp;&amp; rocr_20.last &gt; 1.0\n  puts \"\\nConsistent upward momentum across all timeframes\"\n  puts \"Strong bullish trend confirmed\"\n\n  # Check for acceleration\n  if pct_5 &gt; pct_10 &amp;&amp; pct_10 &gt; pct_20\n    puts \"Momentum accelerating (short-term strongest)\"\n  elsif pct_5 &lt; pct_10 &amp;&amp; pct_10 &lt; pct_20\n    puts \"Momentum decelerating (long-term strongest)\"\n  end\n\nelsif rocr_5.last &lt; 1.0 &amp;&amp; rocr_10.last &lt; 1.0 &amp;&amp; rocr_20.last &lt; 1.0\n  puts \"\\nConsistent downward momentum across all timeframes\"\n  puts \"Strong bearish trend confirmed\"\n\n  if pct_5 &lt; pct_10 &amp;&amp; pct_10 &lt; pct_20\n    puts \"Momentum accelerating downward\"\n  elsif pct_5 &gt; pct_10 &amp;&amp; pct_10 &gt; pct_20\n    puts \"Momentum slowing (potential bottoming)\"\n  end\n\nelse\n  puts \"\\nMixed momentum signals\"\n\n  # Potential reversal signals\n  if rocr_5.last &gt; 1.0 &amp;&amp; rocr_20.last &lt; 1.0\n    puts \"Short-term bullish but long-term bearish\"\n    puts \"Possible bounce in downtrend\"\n  elsif rocr_5.last &lt; 1.0 &amp;&amp; rocr_20.last &gt; 1.0\n    puts \"Short-term bearish but long-term bullish\"\n    puts \"Possible pullback in uptrend - BUY opportunity\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/rocr/#example-rocr-trend-strength-analysis","title":"Example: ROCR Trend Strength Analysis","text":"<pre><code>prices = load_historical_data('SPY')\n\nrocr = SQA::TAI.rocr(prices, period: 10)\n\n# Analyze recent ROCR values\nrecent_rocr = rocr.last(20).compact\n\n# Calculate ROCR statistics\navg_rocr = recent_rocr.sum / recent_rocr.size\nmax_rocr = recent_rocr.max\nmin_rocr = recent_rocr.min\ncurrent_rocr = recent_rocr.last\n\nputs \"ROCR Statistics (Last 20 periods):\"\nputs \"Average: #{avg_rocr.round(4)}\"\nputs \"Max: #{max_rocr.round(4)}\"\nputs \"Min: #{min_rocr.round(4)}\"\nputs \"Current: #{current_rocr.round(4)}\"\n\n# Trend strength based on ROCR consistency\nabove_one = recent_rocr.count { |r| r &gt; 1.0 }\nbelow_one = recent_rocr.count { |r| r &lt; 1.0 }\n\nputs \"\\nTrend Consistency:\"\nputs \"Periods above 1.0: #{above_one}/20 (#{(above_one/20.0*100).round(1)}%)\"\nputs \"Periods below 1.0: #{below_one}/20 (#{(below_one/20.0*100).round(1)}%)\"\n\ncase above_one\nwhen 16..20\n  puts \"Very strong uptrend\"\nwhen 12..15\n  puts \"Strong uptrend\"\nwhen 8..11\n  puts \"Weak uptrend\"\nwhen 5..7\n  puts \"Neutral/choppy\"\nwhen 0..4\n  puts \"Downtrend\"\nend\n\n# Volatility analysis\nrocr_range = max_rocr - min_rocr\nputs \"\\nROCR range: #{rocr_range.round(4)} (#{(rocr_range * 100).round(2)}% volatility)\"\n\nif rocr_range &gt; 0.20\n  puts \"High momentum volatility - trending market\"\nelsif rocr_range &lt; 0.10\n  puts \"Low momentum volatility - range-bound market\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr/#example-rocr-divergence-detection","title":"Example: ROCR Divergence Detection","text":"<pre><code>prices = load_historical_data('AAPL')\n\nrocr = SQA::TAI.rocr(prices, period: 10)\n\n# Find recent highs in price and ROCR\nprice_high_1_idx = prices[-30..-16].each_with_index.max_by { |p, i| p }[1] + prices.size - 30\nprice_high_2_idx = prices[-15..-1].each_with_index.max_by { |p, i| p }[1] + prices.size - 15\n\nprice_high_1 = prices[price_high_1_idx]\nprice_high_2 = prices[price_high_2_idx]\n\nrocr_high_1 = rocr[price_high_1_idx]\nrocr_high_2 = rocr[price_high_2_idx]\n\n# Bearish divergence: price makes higher high, ROCR makes lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; rocr_high_2 &lt; rocr_high_1\n  puts \"Bearish Divergence Detected!\"\n  puts \"\\nPrice Action:\"\n  puts \"  Previous high: $#{price_high_1.round(2)}\"\n  puts \"  Current high:  $#{price_high_2.round(2)} (+#{((price_high_2/price_high_1 - 1)*100).round(2)}%)\"\n\n  puts \"\\nROCR Action:\"\n  puts \"  Previous high: #{rocr_high_1.round(4)}\"\n  puts \"  Current high:  #{rocr_high_2.round(4)} (#{((rocr_high_2/rocr_high_1 - 1)*100).round(2)}%)\"\n\n  puts \"\\nInterpretation:\"\n  puts \"Price making new highs but momentum weakening\"\n  puts \"Uptrend may be losing strength - potential reversal\"\nend\n\n# Bullish divergence: price makes lower low, ROCR makes higher low\nprice_low_1_idx = prices[-30..-16].each_with_index.min_by { |p, i| p }[1] + prices.size - 30\nprice_low_2_idx = prices[-15..-1].each_with_index.min_by { |p, i| p }[1] + prices.size - 15\n\nprice_low_1 = prices[price_low_1_idx]\nprice_low_2 = prices[price_low_2_idx]\n\nrocr_low_1 = rocr[price_low_1_idx]\nrocr_low_2 = rocr[price_low_2_idx]\n\nif price_low_2 &lt; price_low_1 &amp;&amp; rocr_low_2 &gt; rocr_low_1\n  puts \"Bullish Divergence Detected!\"\n  puts \"\\nPrice Action:\"\n  puts \"  Previous low: $#{price_low_1.round(2)}\"\n  puts \"  Current low:  $#{price_low_2.round(2)} (#{((price_low_2/price_low_1 - 1)*100).round(2)}%)\"\n\n  puts \"\\nROCR Action:\"\n  puts \"  Previous low: #{rocr_low_1.round(4)}\"\n  puts \"  Current low:  #{rocr_low_2.round(4)} (+#{((rocr_low_2/rocr_low_1 - 1)*100).round(2)}%)\"\n\n  puts \"\\nInterpretation:\"\n  puts \"Price making new lows but momentum improving\"\n  puts \"Downtrend may be losing strength - potential reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr/#example-rocr-momentum-comparison","title":"Example: ROCR Momentum Comparison","text":"<pre><code># Compare momentum across different securities\nprices_aapl = load_historical_data('AAPL')\nprices_msft = load_historical_data('MSFT')\nprices_googl = load_historical_data('GOOGL')\n\nrocr_aapl = SQA::TAI.rocr(prices_aapl, period: 10)\nrocr_msft = SQA::TAI.rocr(prices_msft, period: 10)\nrocr_googl = SQA::TAI.rocr(prices_googl, period: 10)\n\nstocks = {\n  'AAPL'  =&gt; { rocr: rocr_aapl.last, price: prices_aapl.last },\n  'MSFT'  =&gt; { rocr: rocr_msft.last, price: prices_msft.last },\n  'GOOGL' =&gt; { rocr: rocr_googl.last, price: prices_googl.last }\n}\n\nputs \"10-Period Momentum Comparison:\"\nputs \"=\" * 60\n\nsorted_stocks = stocks.sort_by { |name, data| -data[:rocr] }\n\nsorted_stocks.each_with_index do |(name, data), index|\n  pct_change = ((data[:rocr] - 1.0) * 100).round(2)\n\n  puts \"\\n#{index + 1}. #{name}\"\n  puts \"   ROCR: #{data[:rocr].round(4)}\"\n  puts \"   Change: #{pct_change}%\"\n  puts \"   Price: $#{data[:price].round(2)}\"\n\n  case data[:rocr]\n  when 1.10..Float::INFINITY\n    puts \"   Status: Strong momentum\"\n  when 1.05...1.10\n    puts \"   Status: Moderate momentum\"\n  when 1.00...1.05\n    puts \"   Status: Slight momentum\"\n  when 0.95...1.00\n    puts \"   Status: Slight weakness\"\n  when 0.90...0.95\n    puts \"   Status: Moderate weakness\"\n  else\n    puts \"   Status: Strong weakness\"\n  end\nend\n\n# Trading recommendation\nbest_stock = sorted_stocks.first\nworst_stock = sorted_stocks.last\n\nputs &lt;&lt;~SUMMARY\n\n  Trading Summary:\n  ================\n\n  Strongest: #{best_stock[0]} with ROCR of #{best_stock[1][:rocr].round(4)}\n  Weakest: #{worst_stock[0]} with ROCR of #{worst_stock[1][:rocr].round(4)}\n\n  ROCR is ideal for cross-asset momentum comparison because:\n  - Ratio format normalizes across different price levels\n  - Easy to compare stocks at $10 vs $1000\n  - Clear threshold at 1.0 for positive/negative momentum\nSUMMARY\n</code></pre>"},{"location":"indicators/momentum/rocr/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/rocr/#1-ratio-based-position-sizing","title":"1. Ratio-Based Position Sizing","text":"<p>Use ROCR values to dynamically size positions: - ROCR 1.10+ = Reduce position (strong momentum may reverse) - ROCR 0.90- = Increase position (oversold, potential bounce) - ROCR near 1.0 = Standard position size</p>"},{"location":"indicators/momentum/rocr/#2-log-scale-analysis","title":"2. Log-Scale Analysis","text":"<p>ROCR is natural for log-scale charts: - log(ROCR) = log(price_now) - log(price_then) - Useful for long-term trend analysis - Equal percentage moves appear equal on log scale</p>"},{"location":"indicators/momentum/rocr/#3-momentum-bands","title":"3. Momentum Bands","text":"<p>Create dynamic bands around 1.0: - Upper band: 1.0 + (2 * ROCR_std_dev) - Lower band: 1.0 - (2 * ROCR_std_dev) - Extreme values signal reversals</p>"},{"location":"indicators/momentum/rocr/#4-rocr-rate-of-change","title":"4. ROCR Rate of Change","text":"<p>Calculate the rate of change of ROCR itself: - ROCR_ROC = Current_ROCR / Previous_ROCR - Measures momentum acceleration - Values &gt; 1.0 = accelerating momentum</p>"},{"location":"indicators/momentum/rocr/#example-advanced-rocr-trading-system","title":"Example: Advanced ROCR Trading System","text":"<pre><code>prices = load_historical_data('QQQ')\n\n# Multiple period ROCR\nrocr_5 = SQA::TAI.rocr(prices, period: 5)\nrocr_10 = SQA::TAI.rocr(prices, period: 10)\nrocr_20 = SQA::TAI.rocr(prices, period: 20)\n\ncurrent_price = prices.last\ncurrent_rocr_5 = rocr_5.last\ncurrent_rocr_10 = rocr_10.last\ncurrent_rocr_20 = rocr_20.last\n\n# Calculate ROCR momentum acceleration\nrocr_momentum = current_rocr_5 / rocr_5[-2] if rocr_5[-2] &amp;&amp; rocr_5[-2] != 0\n\nputs \"Advanced ROCR Analysis:\"\nputs \"=\" * 60\n\nputs \"\\nCurrent Price: $#{current_price.round(2)}\"\nputs \"\\nMomentum Ratios:\"\nputs \"5-period ROCR:  #{current_rocr_5.round(4)} (#{((current_rocr_5 - 1.0)*100).round(2)}%)\"\nputs \"10-period ROCR: #{current_rocr_10.round(4)} (#{((current_rocr_10 - 1.0)*100).round(2)}%)\"\nputs \"20-period ROCR: #{current_rocr_20.round(4)} (#{((current_rocr_20 - 1.0)*100).round(2)}%)\"\n\nif rocr_momentum\n  puts \"\\nMomentum Acceleration: #{rocr_momentum.round(4)}\"\n  if rocr_momentum &gt; 1.02\n    puts \"Momentum accelerating strongly\"\n  elsif rocr_momentum &lt; 0.98\n    puts \"Momentum decelerating rapidly\"\n  end\nend\n\n# Trading signals with confidence levels\nsignals = []\n\n# Signal 1: All periods aligned\nif current_rocr_5 &gt; 1.05 &amp;&amp; current_rocr_10 &gt; 1.05 &amp;&amp; current_rocr_20 &gt; 1.05\n  signals &lt;&lt; { type: 'SELL', confidence: 'HIGH', reason: 'All periods overbought' }\nelsif current_rocr_5 &lt; 0.95 &amp;&amp; current_rocr_10 &lt; 0.95 &amp;&amp; current_rocr_20 &lt; 0.95\n  signals &lt;&lt; { type: 'BUY', confidence: 'HIGH', reason: 'All periods oversold' }\nend\n\n# Signal 2: Short-term reversal in long-term trend\nif current_rocr_5 &lt; 0.95 &amp;&amp; current_rocr_20 &gt; 1.0\n  signals &lt;&lt; { type: 'BUY', confidence: 'MEDIUM', reason: 'Short-term pullback in uptrend' }\nelsif current_rocr_5 &gt; 1.05 &amp;&amp; current_rocr_20 &lt; 1.0\n  signals &lt;&lt; { type: 'SELL', confidence: 'MEDIUM', reason: 'Short-term bounce in downtrend' }\nend\n\n# Signal 3: Crossover of 1.0\nif current_rocr_10 &gt; 1.0 &amp;&amp; rocr_10[-2] &lt;= 1.0\n  signals &lt;&lt; { type: 'BUY', confidence: 'MEDIUM', reason: '10-period crossed above 1.0' }\nelsif current_rocr_10 &lt; 1.0 &amp;&amp; rocr_10[-2] &gt;= 1.0\n  signals &lt;&lt; { type: 'SELL', confidence: 'MEDIUM', reason: '10-period crossed below 1.0' }\nend\n\n# Display signals\nif signals.any?\n  puts \"\\nTrading Signals:\"\n  signals.each_with_index do |signal, i|\n    puts \"\\n#{i+1}. #{signal[:type]} Signal (#{signal[:confidence]} confidence)\"\n    puts \"   Reason: #{signal[:reason]}\"\n  end\nelse\n  puts \"\\nNo clear signals - market neutral\"\nend\n\n# Position sizing recommendation\navg_rocr = (current_rocr_5 + current_rocr_10 + current_rocr_20) / 3\nposition_multiplier = case avg_rocr\n                      when 1.10..Float::INFINITY then 0.5\n                      when 1.05...1.10 then 0.75\n                      when 0.95...1.05 then 1.0\n                      when 0.90...0.95 then 1.25\n                      else 1.5\n                      end\n\nputs \"\\nPosition Sizing:\"\nputs \"Average ROCR: #{avg_rocr.round(4)}\"\nputs \"Position multiplier: #{position_multiplier}x\"\nputs \"Recommendation: Use #{(position_multiplier * 100).round(0)}% of standard position size\"\n</code></pre>"},{"location":"indicators/momentum/rocr/#common-settings","title":"Common Settings","text":"Period Use Case 5 Short-term momentum, day trading 10 Standard setting (most common) 12 Monthly trading (business days) 20 Swing trading (1 month) 50 Position trading (2-3 months)"},{"location":"indicators/momentum/rocr/#rocr-vs-rocp-key-differences","title":"ROCR vs ROCP: Key Differences","text":"Feature ROCR ROCP Format Ratio (multiplier) Percentage Center Point 1.0 0.0 Typical Range 0.8 to 1.2 -20% to +20% Formula price / price[n] (price - price[n]) / price[n] * 100 Interpretation Multiplicative Additive Best For Cross-security comparison Single security analysis Visual Scale Log-friendly Linear Calculation Division Percentage change"},{"location":"indicators/momentum/rocr/#conversion-formulas","title":"Conversion Formulas","text":"<pre><code># Convert ROCR to ROCP\nrocp = (rocr - 1.0) * 100\n\n# Convert ROCP to ROCR\nrocr = 1.0 + (rocp / 100.0)\n\n# Examples:\n# ROCR 1.10 = 10% ROCP\n# ROCR 0.90 = -10% ROCP\n# ROCR 1.00 = 0% ROCP\n</code></pre>"},{"location":"indicators/momentum/rocr/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Zero or Negative Prices: ROCR fails with zero/negative prices (division issues)</li> <li> <p>Solution: Use ROCP for such cases or check data validity</p> </li> <li> <p>Confusing Interpretation: ROCR 1.10 means 10% gain, not 110%</p> </li> <li> <p>Remember: ROCR = ratio, subtract 1.0 to get percentage</p> </li> <li> <p>Scale Differences: ROCR appears smaller in magnitude than ROCP</p> </li> <li>ROCR 1.05 = 5% gain (looks like 1% to beginners)</li> <li> <p>Always convert for clear percentage understanding</p> </li> <li> <p>Period Selection: Wrong period misses momentum</p> </li> <li>Test multiple periods for your timeframe</li> <li>Shorter periods = more sensitive, more noise</li> </ol>"},{"location":"indicators/momentum/rocr/#related-indicators","title":"Related Indicators","text":"<ul> <li>ROCP - Rate of Change Percentage (companion indicator)</li> <li>MOM - Momentum (absolute price change)</li> <li>RSI - Relative Strength Index</li> <li>ROC - Generic Rate of Change</li> </ul>"},{"location":"indicators/momentum/rocr/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Examples</li> </ul>"},{"location":"indicators/momentum/rocr100/","title":"Rate of Change Ratio 100 Scale (ROCR100)","text":"<p>The Rate of Change Ratio 100 Scale (ROCR100) is a momentum indicator that measures the ratio of the current price to the price n periods ago, multiplied by 100. This scaling makes it more intuitive to read and interpret compared to the standard ROCR. Values are centered around 100, where values above 100 indicate price increases and values below 100 indicate price decreases. The 100-scale format makes it immediately clear whether prices are rising or falling and by what percentage.</p>"},{"location":"indicators/momentum/rocr100/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83, 45.10, 45.42, 45.84, 46.08, 46.03, 46.41]\n\n# Calculate 10-period ROCR100\nrocr100 = SQA::TAI.rocr100(prices, period: 10)\n\nputs \"Current ROCR100: #{rocr100.last.round(2)}\"\n\n# Values &gt; 100 mean price is up, &lt; 100 mean price is down\nif rocr100.last &gt; 100\n  percent_change = rocr100.last - 100\n  puts \"Price is UP #{percent_change.round(2)}% from #{10} periods ago\"\nelsif rocr100.last &lt; 100\n  percent_change = 100 - rocr100.last\n  puts \"Price is DOWN #{percent_change.round(2)}% from #{10} periods ago\"\nelse\n  puts \"Price is UNCHANGED from #{10} periods ago\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 10 Lookback period for comparison"},{"location":"indicators/momentum/rocr100/#returns","title":"Returns","text":"<p>Returns an array of ROCR100 values centered around 100. The first <code>period</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/rocr100/#formula","title":"Formula","text":"<p>ROCR100 = (Current Price / Price n periods ago) \u00d7 100</p> <p>Where: - Current Price = Most recent price - Price n periods ago = Price from n periods back - Result is multiplied by 100 for the scaled format</p>"},{"location":"indicators/momentum/rocr100/#calculation-example","title":"Calculation Example","text":"<pre><code># Price today: $46.08\n# Price 10 days ago: $44.34\n# ROCR100 = (46.08 / 44.34) \u00d7 100 = 103.92\n\n# This means:\n# - Price is 3.92% higher than 10 periods ago\n# - Value above 100 indicates upward momentum\n</code></pre>"},{"location":"indicators/momentum/rocr100/#interpretation","title":"Interpretation","text":"ROCR100 Value Interpretation &gt; 110 Strong upward momentum (10%+ gain) 102-110 Moderate upward momentum (2-10% gain) 100-102 Slight upward momentum (0-2% gain) 100 No change in price 98-100 Slight downward momentum (0-2% loss) 90-98 Moderate downward momentum (2-10% loss) &lt; 90 Strong downward momentum (10%+ loss)"},{"location":"indicators/momentum/rocr100/#key-interpretation-points","title":"Key Interpretation Points","text":"<ul> <li>100 is the center line: Unlike ROCR which centers at 1.0, ROCR100's 100 baseline is more intuitive</li> <li>Direct percentage reading: ROCR100 of 105 means 5% gain, 95 means 5% loss</li> <li>Easy mental math: Subtract 100 to get percentage change</li> <li>Momentum strength: Distance from 100 indicates momentum strength</li> <li>Trend direction: Rising ROCR100 shows strengthening momentum, falling shows weakening</li> </ul>"},{"location":"indicators/momentum/rocr100/#the-100-scale-advantage","title":"The 100-Scale Advantage","text":""},{"location":"indicators/momentum/rocr100/#1-intuitive-reading","title":"1. Intuitive Reading","text":"<p>The 100-scale format is significantly more intuitive than the standard ROCR (centered at 1.0):</p> <pre><code># Standard ROCR vs ROCR100 comparison\nprices = [100, 105, 110, 115, 120]\n\nrocr = SQA::TAI.rocr(prices, period: 2)\nrocr100 = SQA::TAI.rocr100(prices, period: 2)\n\n# ROCR values (centered at 1.0)\n# [nil, nil, 1.05, 1.095, 1.091]\n# Harder to interpret: Is 1.05 good? How much change is that?\n\n# ROCR100 values (centered at 100)\n# [nil, nil, 105.0, 109.5, 109.1]\n# Immediately clear: 5% gain, 9.5% gain, 9.1% gain\n</code></pre>"},{"location":"indicators/momentum/rocr100/#2-mental-math-simplicity","title":"2. Mental Math Simplicity","text":"<p>With ROCR100, calculating percentage change is trivial:</p> <pre><code>rocr100 = SQA::TAI.rocr100(prices, period: 10)\ncurrent = rocr100.last\n\n# Simple subtraction gives percentage change\npercent_change = current - 100\n\nputs \"Price change: #{percent_change.round(2)}%\"\n# ROCR100 = 107.5 \u2192 7.5% gain\n# ROCR100 = 94.3 \u2192 5.7% loss\n</code></pre>"},{"location":"indicators/momentum/rocr100/#3-better-visualization","title":"3. Better Visualization","text":"<p>The 100 baseline is easier to visualize on charts:</p> <pre><code># Chart reference levels are more intuitive\nrocr100 = SQA::TAI.rocr100(prices, period: 10)\n\n# Common reference levels\nputs \"Overbought zone (&gt;110):\" if rocr100.last &gt; 110\nputs \"Moderate bullish (100-110):\" if rocr100.last.between?(100, 110)\nputs \"Neutral (98-102):\" if rocr100.last.between?(98, 102)\nputs \"Moderate bearish (90-98):\" if rocr100.last.between?(90, 98)\nputs \"Oversold zone (&lt;90):\" if rocr100.last &lt; 90\n</code></pre>"},{"location":"indicators/momentum/rocr100/#4-easier-threshold-setting","title":"4. Easier Threshold Setting","text":"<p>Setting trading thresholds is more natural:</p> <pre><code>prices = load_historical_prices('AAPL')\nrocr100 = SQA::TAI.rocr100(prices, period: 10)\n\n# Clear percentage-based thresholds\nOVERBOUGHT_THRESHOLD = 110   # 10% gain\nOVERSOLD_THRESHOLD = 90      # 10% loss\nNEUTRAL_UPPER = 102          # 2% gain\nNEUTRAL_LOWER = 98           # 2% loss\n\ncase rocr100.last\nwhen (OVERBOUGHT_THRESHOLD..)\n  puts \"Overbought: #{(rocr100.last - 100).round(2)}% above baseline\"\nwhen (...OVERSOLD_THRESHOLD)\n  puts \"Oversold: #{(100 - rocr100.last).round(2)}% below baseline\"\nwhen (NEUTRAL_LOWER..NEUTRAL_UPPER)\n  puts \"Neutral: Within 2% of baseline\"\nelse\n  puts \"Trending: #{(rocr100.last - 100).round(2)}% from baseline\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#example-basic-momentum-signals","title":"Example: Basic Momentum Signals","text":"<pre><code>prices = load_historical_prices('AAPL')\nrocr100 = SQA::TAI.rocr100(prices, period: 10)\n\ncurrent = rocr100.last\nprevious = rocr100[-2]\n\n# Crossover signals at 100 (baseline)\nif current &gt; 100 &amp;&amp; previous &lt;= 100\n  puts \"BULLISH SIGNAL: ROCR100 crossed above 100\"\n  puts \"Price momentum turning positive\"\n  puts \"Gain: #{(current - 100).round(2)}%\"\nelsif current &lt; 100 &amp;&amp; previous &gt;= 100\n  puts \"BEARISH SIGNAL: ROCR100 crossed below 100\"\n  puts \"Price momentum turning negative\"\n  puts \"Loss: #{(100 - current).round(2)}%\"\nend\n\n# Momentum strength\nmomentum_strength = (current - 100).abs\ncase momentum_strength\nwhen 0...2\n  puts \"Weak momentum (#{momentum_strength.round(2)}%)\"\nwhen 2...5\n  puts \"Moderate momentum (#{momentum_strength.round(2)}%)\"\nwhen 5...10\n  puts \"Strong momentum (#{momentum_strength.round(2)}%)\"\nelse\n  puts \"Extreme momentum (#{momentum_strength.round(2)}%)\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#example-trend-confirmation","title":"Example: Trend Confirmation","text":"<pre><code>prices = load_historical_prices('MSFT')\nrocr100 = SQA::TAI.rocr100(prices, period: 10)\n\n# Confirm trend strength with ROCR100\ncurrent = rocr100.last\nrecent_avg = rocr100[-5..-1].sum / 5.0\n\nputs \"Current ROCR100: #{current.round(2)}\"\nputs \"5-period average: #{recent_avg.round(2)}\"\n\n# Sustained momentum above 100\nif rocr100[-5..-1].all? { |v| v &amp;&amp; v &gt; 100 }\n  puts \"Strong uptrend: ROCR100 above 100 for 5 periods\"\n  avg_gain = recent_avg - 100\n  puts \"Average gain: #{avg_gain.round(2)}%\"\nelsif rocr100[-5..-1].all? { |v| v &amp;&amp; v &lt; 100 }\n  puts \"Strong downtrend: ROCR100 below 100 for 5 periods\"\n  avg_loss = 100 - recent_avg\n  puts \"Average loss: #{avg_loss.round(2)}%\"\nelse\n  puts \"Mixed momentum: No clear trend\"\nend\n\n# Accelerating vs decelerating momentum\nif current &gt; recent_avg &amp;&amp; current &gt; 100\n  puts \"Momentum accelerating to the upside\"\nelsif current &lt; recent_avg &amp;&amp; current &lt; 100\n  puts \"Momentum accelerating to the downside\"\nelsif current &lt; recent_avg &amp;&amp; current &gt; 100\n  puts \"Uptrend but momentum decelerating\"\nelsif current &gt; recent_avg &amp;&amp; current &lt; 100\n  puts \"Downtrend but momentum decelerating\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#example-overboughtoversold-conditions","title":"Example: Overbought/Oversold Conditions","text":"<pre><code>prices = load_historical_prices('TSLA')\nrocr100_10 = SQA::TAI.rocr100(prices, period: 10)\nrocr100_20 = SQA::TAI.rocr100(prices, period: 20)\n\ncurrent_10 = rocr100_10.last\ncurrent_20 = rocr100_20.last\n\nputs \"10-period ROCR100: #{current_10.round(2)}\"\nputs \"20-period ROCR100: #{current_20.round(2)}\"\n\n# Overbought conditions (percentage thresholds)\nif current_10 &gt; 110 &amp;&amp; current_20 &gt; 105\n  puts \"OVERBOUGHT across multiple timeframes\"\n  puts \"10-period: #{(current_10 - 100).round(2)}% gain\"\n  puts \"20-period: #{(current_20 - 100).round(2)}% gain\"\n  puts \"Consider taking profits or waiting for pullback\"\n\n  # Extreme overbought\n  if current_10 &gt; 120\n    puts \"EXTREME OVERBOUGHT: 20%+ gain in 10 periods\"\n    puts \"High probability of mean reversion\"\n  end\n\n# Oversold conditions\nelsif current_10 &lt; 90 &amp;&amp; current_20 &lt; 95\n  puts \"OVERSOLD across multiple timeframes\"\n  puts \"10-period: #{(100 - current_10).round(2)}% loss\"\n  puts \"20-period: #{(100 - current_20).round(2)}% loss\"\n  puts \"Potential buying opportunity\"\n\n  # Extreme oversold\n  if current_10 &lt; 80\n    puts \"EXTREME OVERSOLD: 20%+ loss in 10 periods\"\n    puts \"High probability of bounce\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#example-divergence-detection","title":"Example: Divergence Detection","text":"<pre><code>prices = load_historical_prices('NVDA')\nrocr100 = SQA::TAI.rocr100(prices, period: 10)\n\n# Find recent highs\nprice_high_1 = prices[-20..-10].max\nprice_high_2 = prices[-9..-1].max\n\n# Find corresponding ROCR100 values\nrocr100_high_1 = rocr100[-20..-10].compact.max\nrocr100_high_2 = rocr100[-9..-1].compact.max\n\n# Bearish divergence\nif price_high_2 &gt; price_high_1 &amp;&amp; rocr100_high_2 &lt; rocr100_high_1\n  puts \"BEARISH DIVERGENCE detected\"\n  puts \"Price: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)}\"\n  puts \"ROCR100: #{rocr100_high_2.round(2)} -&gt; #{rocr100_high_1.round(2)}\"\n  puts \"Momentum weakening despite higher prices\"\n\n  # Calculate divergence magnitude\n  price_change = ((price_high_2 / price_high_1 - 1) * 100).round(2)\n  momentum_decline = (rocr100_high_2 - rocr100_high_1).round(2)\n\n  puts \"Price gained: #{price_change}%\"\n  puts \"Momentum lost: #{momentum_decline.abs} points\"\nend\n\n# Bullish divergence\nprice_low_1 = prices[-20..-10].min\nprice_low_2 = prices[-9..-1].min\n\nrocr100_low_1 = rocr100[-20..-10].compact.min\nrocr100_low_2 = rocr100[-9..-1].compact.min\n\nif price_low_2 &lt; price_low_1 &amp;&amp; rocr100_low_2 &gt; rocr100_low_1\n  puts \"BULLISH DIVERGENCE detected\"\n  puts \"Price: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)}\"\n  puts \"ROCR100: #{rocr100_low_1.round(2)} -&gt; #{rocr100_low_2.round(2)}\"\n  puts \"Momentum strengthening despite lower prices\"\n\n  # Calculate divergence magnitude\n  price_change = ((1 - price_low_2 / price_low_1) * 100).round(2)\n  momentum_gain = (rocr100_low_2 - rocr100_low_1).round(2)\n\n  puts \"Price lost: #{price_change}%\"\n  puts \"Momentum gained: #{momentum_gain} points\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#example-multi-period-analysis","title":"Example: Multi-Period Analysis","text":"<pre><code>prices = load_historical_prices('SPY')\n\n# Calculate multiple timeframes\nrocr100_5 = SQA::TAI.rocr100(prices, period: 5)\nrocr100_10 = SQA::TAI.rocr100(prices, period: 10)\nrocr100_20 = SQA::TAI.rocr100(prices, period: 20)\n\nputs \"5-period ROCR100: #{rocr100_5.last.round(2)} (#{(rocr100_5.last - 100).round(2)}%)\"\nputs \"10-period ROCR100: #{rocr100_10.last.round(2)} (#{(rocr100_10.last - 100).round(2)}%)\"\nputs \"20-period ROCR100: #{rocr100_20.last.round(2)} (#{(rocr100_20.last - 100).round(2)}%)\"\n\n# All timeframes aligned above 100 = strong bullish\nif rocr100_5.last &gt; 100 &amp;&amp; rocr100_10.last &gt; 100 &amp;&amp; rocr100_20.last &gt; 100\n  puts \"\\nSTRONG BULLISH: All timeframes above 100\"\n  puts \"Short-term momentum: #{(rocr100_5.last - 100).round(2)}%\"\n  puts \"Medium-term momentum: #{(rocr100_10.last - 100).round(2)}%\"\n  puts \"Long-term momentum: #{(rocr100_20.last - 100).round(2)}%\"\n\n  # Check if momentum is accelerating\n  if rocr100_5.last &gt; rocr100_10.last &amp;&amp; rocr100_10.last &gt; rocr100_20.last\n    puts \"Momentum ACCELERATING across timeframes\"\n  end\n\n# All timeframes aligned below 100 = strong bearish\nelsif rocr100_5.last &lt; 100 &amp;&amp; rocr100_10.last &lt; 100 &amp;&amp; rocr100_20.last &lt; 100\n  puts \"\\nSTRONG BEARISH: All timeframes below 100\"\n  puts \"Short-term decline: #{(100 - rocr100_5.last).round(2)}%\"\n  puts \"Medium-term decline: #{(100 - rocr100_10.last).round(2)}%\"\n  puts \"Long-term decline: #{(100 - rocr100_20.last).round(2)}%\"\n\n  # Check if decline is accelerating\n  if rocr100_5.last &lt; rocr100_10.last &amp;&amp; rocr100_10.last &lt; rocr100_20.last\n    puts \"Decline ACCELERATING across timeframes\"\n  end\n\n# Mixed signals\nelse\n  puts \"\\nMIXED SIGNALS: Timeframes diverging\"\n\n  # Potential reversal patterns\n  if rocr100_5.last &lt; 100 &amp;&amp; rocr100_20.last &gt; 100\n    puts \"Short-term pullback in long-term uptrend\"\n    puts \"Potential buying opportunity\"\n  elsif rocr100_5.last &gt; 100 &amp;&amp; rocr100_20.last &lt; 100\n    puts \"Short-term bounce in long-term downtrend\"\n    puts \"Potential selling opportunity\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#example-trading-strategy-with-rocr100","title":"Example: Trading Strategy with ROCR100","text":"<pre><code>prices = load_historical_prices('AAPL')\nrocr100 = SQA::TAI.rocr100(prices, period: 10)\n\n# Define thresholds\nSTRONG_BUY = 90      # 10% decline\nBUY = 95             # 5% decline\nNEUTRAL_LOW = 98     # 2% decline\nNEUTRAL_HIGH = 102   # 2% gain\nSELL = 105           # 5% gain\nSTRONG_SELL = 110    # 10% gain\n\ncurrent = rocr100.last\nprice = prices.last\n\ncase current\nwhen (...STRONG_BUY)\n  puts \"STRONG BUY SIGNAL at $#{price.round(2)}\"\n  puts \"ROCR100: #{current.round(2)} (#{(100 - current).round(2)}% below baseline)\"\n  puts \"Price down significantly, extreme oversold\"\n\nwhen (STRONG_BUY...BUY)\n  puts \"BUY SIGNAL at $#{price.round(2)}\"\n  puts \"ROCR100: #{current.round(2)} (#{(100 - current).round(2)}% below baseline)\"\n  puts \"Price declining, oversold condition\"\n\nwhen (BUY...NEUTRAL_LOW)\n  puts \"Weak sell at $#{price.round(2)}\"\n  puts \"ROCR100: #{current.round(2)} (#{(100 - current).round(2)}% below baseline)\"\n  puts \"Slight decline, approaching neutral\"\n\nwhen (NEUTRAL_LOW..NEUTRAL_HIGH)\n  puts \"NEUTRAL at $#{price.round(2)}\"\n  puts \"ROCR100: #{current.round(2)} (near baseline)\"\n  puts \"No clear momentum signal\"\n\nwhen (NEUTRAL_HIGH..SELL)\n  puts \"Weak buy at $#{price.round(2)}\"\n  puts \"ROCR100: #{current.round(2)} (#{(current - 100).round(2)}% above baseline)\"\n  puts \"Slight gain, approaching overbought\"\n\nwhen (SELL..STRONG_SELL)\n  puts \"SELL SIGNAL at $#{price.round(2)}\"\n  puts \"ROCR100: #{current.round(2)} (#{(current - 100).round(2)}% above baseline)\"\n  puts \"Price advancing, overbought condition\"\n\nwhen (STRONG_SELL..)\n  puts \"STRONG SELL SIGNAL at $#{price.round(2)}\"\n  puts \"ROCR100: #{current.round(2)} (#{(current - 100).round(2)}% above baseline)\"\n  puts \"Price up significantly, extreme overbought\"\nend\n\n# Additional context\ntrend = rocr100[-5..-1].compact\nif trend.all? { |v| v &gt; current }\n  puts \"Warning: Momentum declining\"\nelsif trend.all? { |v| v &lt; current }\n  puts \"Note: Momentum building\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#common-settings","title":"Common Settings","text":"Period Use Case Typical Range 5 Very short-term, day trading 95-105 10 Standard, short-term trends 90-110 14 Swing trading 90-110 20 Intermediate trends 85-115 30 Long-term momentum 80-120"},{"location":"indicators/momentum/rocr100/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/rocr100/#1-rate-of-change-of-rocr100","title":"1. Rate of Change of ROCR100","text":"<p>Monitor how quickly momentum is changing:</p> <pre><code>rocr100 = SQA::TAI.rocr100(prices, period: 10)\n\n# Calculate ROC of ROCR100 itself\nroc_of_rocr100 = []\nrocr100.each_cons(5) do |window|\n  if window.all?\n    change = window.last - window.first\n    roc_of_rocr100 &lt;&lt; change\n  end\nend\n\nif roc_of_rocr100.last &gt; 2\n  puts \"Momentum accelerating rapidly\"\nelsif roc_of_rocr100.last &lt; -2\n  puts \"Momentum decelerating rapidly\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#2-rocr100-bands","title":"2. ROCR100 Bands","text":"<p>Create bands around 100 for trading zones:</p> <pre><code># Calculate average distance from 100\ndeviations = rocr100.compact.map { |v| (v - 100).abs }\navg_deviation = deviations.sum / deviations.length\n\nupper_band = 100 + avg_deviation\nlower_band = 100 - avg_deviation\n\nputs \"ROCR100 Bands: #{lower_band.round(2)} - 100 - #{upper_band.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/rocr100/#3-comparative-rocr100","title":"3. Comparative ROCR100","text":"<p>Compare momentum across different assets:</p> <pre><code>spy_rocr100 = SQA::TAI.rocr100(spy_prices, period: 10)\nqqq_rocr100 = SQA::TAI.rocr100(qqq_prices, period: 10)\n\nif spy_rocr100.last &gt; qqq_rocr100.last\n  puts \"SPY showing stronger momentum than QQQ\"\n  puts \"SPY: #{spy_rocr100.last.round(2)} vs QQQ: #{qqq_rocr100.last.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/rocr100/#key-differences-from-related-indicators","title":"Key Differences from Related Indicators","text":"Feature ROCR100 ROCR ROC ROCP Baseline 100 1.0 0 0 Formula (P/Pn) \u00d7 100 P/Pn ((P-Pn)/Pn) \u00d7 100 (P-Pn)/Pn Reading 105 = 5% gain 1.05 = 5% gain 5 = 5% gain 0.05 = 5% gain Intuitive Most intuitive Less intuitive Intuitive Least intuitive Best For General use Academic Charts Calculations"},{"location":"indicators/momentum/rocr100/#why-choose-rocr100","title":"Why Choose ROCR100?","text":"<ol> <li>Most User-Friendly: 100 baseline is universally understood</li> <li>Quick Mental Math: Simply subtract 100 for percentage</li> <li>Clear Visualization: 100 line is obvious reference on charts</li> <li>Easy Thresholds: Round numbers (100, 105, 110) are natural</li> <li>Better Communication: \"ROCR100 is 107\" is clearer than \"ROCR is 1.07\"</li> </ol>"},{"location":"indicators/momentum/rocr100/#related-indicators","title":"Related Indicators","text":"<ul> <li>ROC - Rate of Change (percentage)</li> <li>ROCR - Rate of Change Ratio (ratio format)</li> <li>ROCP - Rate of Change Percentage (decimal)</li> <li>MOM - Momentum (absolute change)</li> <li>RSI - Relative Strength Index</li> </ul>"},{"location":"indicators/momentum/rocr100/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Indicators Overview</li> </ul>"},{"location":"indicators/momentum/rsi/","title":"RSI (Relative Strength Index)","text":""},{"location":"indicators/momentum/rsi/#overview","title":"Overview","text":"<p>The Relative Strength Index (RSI) is one of the most widely used momentum oscillators in technical analysis. Developed by J. Welles Wilder Jr. in 1978, RSI measures the speed and magnitude of recent price changes to evaluate overbought or oversold conditions in financial markets. The indicator oscillates between 0 and 100, with traditional thresholds at 70 (overbought) and 30 (oversold).</p>"},{"location":"indicators/momentum/rsi/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 14 Number of periods for RSI calculation"},{"location":"indicators/momentum/rsi/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices, though any price data can be used - Requires sufficient data points: at least <code>period + 1</code> values - More historical data provides better context for divergence analysis - Common to use daily closing prices, but works on any timeframe</p> <p>period (time_period) - Standard setting is 14 periods (Wilder's original recommendation) - Shorter periods (7-10) create a more sensitive indicator with more signals - Longer periods (21-25) create a smoother indicator with fewer, more reliable signals - Recommended ranges:   - Day trading: 7-9 periods for responsiveness   - Swing trading: 14 periods (standard)   - Position trading: 21-25 periods for trend confirmation</p>"},{"location":"indicators/momentum/rsi/#usage","title":"Usage","text":""},{"location":"indicators/momentum/rsi/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46]\n\n# Calculate 14-period RSI (standard)\nrsi = SQA::TAI.rsi(prices, period: 14)\n\nputs \"Current RSI: #{rsi.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/rsi/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># More sensitive 9-period RSI for short-term trading\nrsi_fast = SQA::TAI.rsi(prices, period: 9)\n\n# Smoother 21-period RSI for position trading\nrsi_slow = SQA::TAI.rsi(prices, period: 21)\n\nputs \"Fast RSI (9): #{rsi_fast.last.round(2)}\"\nputs \"Standard RSI (14): #{SQA::TAI.rsi(prices).last.round(2)}\"\nputs \"Slow RSI (21): #{rsi_slow.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/rsi/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/momentum/rsi/#what-it-measures","title":"What It Measures","text":"<p>The RSI measures momentum by comparing the magnitude of recent gains to recent losses:</p> <ul> <li>Momentum Strength: How quickly prices are moving up or down</li> <li>Overbought/Oversold Conditions: When an asset may be overextended</li> <li>Trend Exhaustion: When a strong move may be losing steam</li> <li>Market Psychology: The balance between buying and selling pressure</li> </ul> <p>RSI answers the question: \"Is the current price move sustainable, or is it overextended?\"</p>"},{"location":"indicators/momentum/rsi/#calculation-method","title":"Calculation Method","text":"<p>The RSI is calculated using the following process:</p> <ol> <li>Calculate Price Changes: Determine the change between each closing price</li> <li>Separate Gains and Losses: Split changes into positive (gains) and negative (losses)</li> <li>Calculate Average Gain/Loss: Use Wilder's smoothing method over the period</li> <li>Calculate Relative Strength (RS): Divide average gain by average loss</li> <li>Normalize to RSI: Apply formula to bound between 0 and 100</li> </ol> <p>Formula: <pre><code>RS = Average Gain / Average Loss\nRSI = 100 - (100 / (1 + RS))\n\nWhere:\n- Average Gain = Sum of gains over period / period\n- Average Loss = Sum of losses over period / period\n- Subsequent values use Wilder's smoothing:\n  Average Gain = [(Previous Avg Gain) \u00d7 13 + Current Gain] / 14\n  Average Loss = [(Previous Avg Loss) \u00d7 13 + Current Loss] / 14\n</code></pre></p>"},{"location":"indicators/momentum/rsi/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: 0 to 100 (bounded oscillator)</li> <li>Type: Momentum oscillator</li> <li>Lag: Moderate (smoothed average-based calculation)</li> <li>Best Used: Ranging markets, overbought/oversold identification, divergence analysis</li> <li>Limitations: Can remain overbought/oversold for extended periods in strong trends</li> </ul>"},{"location":"indicators/momentum/rsi/#interpretation","title":"Interpretation","text":""},{"location":"indicators/momentum/rsi/#value-ranges","title":"Value Ranges","text":"<p>Specific guidance on what different RSI values indicate:</p> <ul> <li>Above 70: Traditional overbought zone - indicates strong upward momentum that may be excessive. Price may be due for a pullback or consolidation.</li> <li>50-70: Bullish momentum - prices are rising with healthy buying pressure. Not yet overbought.</li> <li>40-60: Neutral zone - balanced buying and selling pressure. No clear momentum advantage.</li> <li>30-50: Bearish momentum - prices are declining with selling pressure. Not yet oversold.</li> <li>Below 30: Traditional oversold zone - indicates strong downward momentum that may be excessive. Price may be due for a bounce or stabilization.</li> </ul>"},{"location":"indicators/momentum/rsi/#key-levels","title":"Key Levels","text":"<ul> <li>Overbought (70): Price may be overextended to upside. Consider taking profits or waiting for pullback.</li> <li>Oversold (30): Price may be overextended to downside. Consider looking for entry opportunities.</li> <li>Midpoint (50): Represents equilibrium between buying and selling pressure. RSI crossing above 50 suggests bullish momentum; crossing below suggests bearish momentum.</li> <li>Extreme Levels (80+/20-): Indicates very strong momentum. While these are rare, they can signal powerful trends or imminent reversals.</li> </ul> <p>Important: In strong trends, RSI can remain overbought (&gt;70) or oversold (&lt;30) for extended periods. Adjust thresholds based on market conditions: - Strong uptrend: Use 80/40 instead of 70/30 - Strong downtrend: Use 60/20 instead of 70/30</p>"},{"location":"indicators/momentum/rsi/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read the RSI's signals:</p> <ol> <li>Trend Direction</li> <li>RSI above 50: Bullish bias, buyers in control</li> <li>RSI below 50: Bearish bias, sellers in control</li> <li> <p>RSI oscillating around 50: Consolidation, trendless market</p> </li> <li> <p>Momentum Changes</p> </li> <li>RSI rising: Increasing bullish momentum</li> <li>RSI falling: Increasing bearish momentum</li> <li> <p>RSI flattening: Momentum stabilizing, possible consolidation</p> </li> <li> <p>Reversal Signals</p> </li> <li>Failure swings: RSI fails to reach overbought/oversold on subsequent tests</li> <li>Divergences: RSI and price moving in opposite directions</li> <li>Extreme readings followed by reversal: Very strong signals</li> </ol>"},{"location":"indicators/momentum/rsi/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/momentum/rsi/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: RSI crosses below 30 then rises back above 30</li> <li>Confirms oversold condition has ended</li> <li> <p>Best when aligned with support levels</p> </li> <li> <p>Confirmation Signal: RSI crosses above 50 from below</p> </li> <li>Indicates shift from bearish to bullish momentum</li> <li> <p>Works well as trend-following entry</p> </li> <li> <p>Divergence Signal: Price makes lower low, RSI makes higher low</p> </li> <li>Bullish divergence suggests weakening downtrend</li> <li>Strongest when RSI is in oversold territory</li> </ol> <p>Example Scenario: <pre><code>When RSI drops below 30 (oversold), then crosses back above 30,\nconsider a long position. Confirm with:\n- Price finding support at key level\n- Volume declining during selloff\n- Set stop loss below recent low\n</code></pre></p>"},{"location":"indicators/momentum/rsi/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: RSI crosses above 70 then falls back below 70</li> <li>Confirms overbought condition has ended</li> <li> <p>Best when aligned with resistance levels</p> </li> <li> <p>Confirmation Signal: RSI crosses below 50 from above</p> </li> <li>Indicates shift from bullish to bearish momentum</li> <li> <p>Works well as trend-following exit</p> </li> <li> <p>Divergence Signal: Price makes higher high, RSI makes lower high</p> </li> <li>Bearish divergence suggests weakening uptrend</li> <li>Strongest when RSI is in overbought territory</li> </ol> <p>Example Scenario: <pre><code>When RSI rises above 70 (overbought), then crosses back below 70,\nconsider closing long positions or initiating shorts. Confirm with:\n- Price reaching resistance level\n- Volume declining during rally\n- Set stop loss above recent high\n</code></pre></p>"},{"location":"indicators/momentum/rsi/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Pattern: Price makes lower low, RSI makes higher low - Identification: Compare price lows with RSI lows over 20-50 bars - Significance: Suggests downtrend losing momentum, potential reversal ahead - Reliability: High when RSI is oversold (&lt;40) and forms clear higher low - Example: Stock drops from $100 to $90, then to $85. RSI drops to 25, then only to 32 on second low.</p> <p>Bearish Divergence: - Pattern: Price makes higher high, RSI makes lower high - Identification: Compare price highs with RSI highs over 20-50 bars - Significance: Suggests uptrend losing momentum, potential reversal ahead - Reliability: High when RSI is overbought (&gt;60) and forms clear lower high - Example: Stock rises from $100 to $110, then to $115. RSI rises to 75, then only to 68 on second high.</p>"},{"location":"indicators/momentum/rsi/#best-practices","title":"Best Practices","text":""},{"location":"indicators/momentum/rsi/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When RSI works best:</p> <ul> <li>Market conditions: Ranging or oscillating markets provide best signals. Strong trending markets can keep RSI overbought/oversold for extended periods.</li> <li>Time frames: Works on all timeframes but most reliable on daily and 4-hour charts. Lower timeframes generate more false signals.</li> <li>Asset classes: Excellent for stocks, forex, and cryptocurrencies. Less reliable for commodities with strong seasonal trends.</li> </ul>"},{"location":"indicators/momentum/rsi/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Trend Indicators: Use 200-period SMA or EMA to identify trend direction. Only take RSI signals aligned with the trend (RSI oversold in uptrend, RSI overbought in downtrend).</p> </li> <li> <p>With Volume Indicators: Combine with OBV or volume analysis. Strongest RSI signals occur when volume confirms the move (declining volume in oversold, declining volume in overbought).</p> </li> <li> <p>With Support/Resistance: RSI signals are most reliable when they occur at key price levels. RSI oversold at support = strong buy. RSI overbought at resistance = strong sell.</p> </li> </ul>"},{"location":"indicators/momentum/rsi/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Over-reliance on RSI alone: RSI generates many false signals. Always use with trend analysis and support/resistance levels.</p> </li> <li> <p>Ignoring the trend: In strong uptrends, RSI rarely gets oversold. In strong downtrends, RSI rarely gets overbought. Adjust thresholds or don't counter-trend trade.</p> </li> <li> <p>Parameter optimization trap: Backtesting to find \"perfect\" period settings leads to overfitting. Standard 14-period works well for most situations.</p> </li> <li> <p>Time frame mismatch: Using 5-minute RSI for position trading decisions, or daily RSI for scalping leads to poor results.</p> </li> </ol>"},{"location":"indicators/momentum/rsi/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading):</li> <li>Period: 7-9 for faster signals</li> <li>Thresholds: 75/25 or 80/20 to reduce noise</li> <li> <p>Focus: Quick reversals, scalping opportunities</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>Period: 14 (standard) for balanced signals</li> <li>Thresholds: 70/30 (traditional)</li> <li> <p>Focus: Multi-day moves, divergences</p> </li> <li> <p>Long-term trading (position trading):</p> </li> <li>Period: 21-25 for smoother signals</li> <li>Thresholds: 65/35 or custom based on historical analysis</li> <li> <p>Focus: Major trend changes, monthly patterns</p> </li> <li> <p>Backtesting approach: Test on historical data for your specific asset and timeframe. Look for RSI levels that historically preceded reversals.</p> </li> </ul>"},{"location":"indicators/momentum/rsi/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data for a stock\nhistorical_prices = [\n  44.34, 44.09, 44.15, 43.61, 44.33, 44.83, 45.10, 45.42,\n  45.84, 46.08, 46.03, 46.41, 46.22, 45.64, 46.21, 46.25,\n  46.08, 46.46, 46.57, 45.95, 46.50, 46.02, 45.55, 46.08,\n  46.34, 46.00, 45.75, 46.45, 47.02, 46.87\n]\n\n# Calculate RSI and supporting indicators\nrsi = SQA::TAI.rsi(historical_prices, period: 14)\nsma_50 = SQA::TAI.sma(historical_prices, period: 20)  # Trend filter\n\n# Current values\ncurrent_price = historical_prices.last\ncurrent_rsi = rsi.last\nprevious_rsi = rsi[-2]\n\n# Trend determination\ntrend = current_price &gt; sma_50.last ? \"UPTREND\" : \"DOWNTREND\"\n\nputs \"=== RSI Trading Analysis ===\"\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"Current RSI: #{current_rsi.round(2)}\"\nputs \"Trend: #{trend}\"\nputs\n\n# Trading logic with trend filter\nif trend == \"UPTREND\"\n  # In uptrend, only look for buy signals (oversold conditions)\n  if current_rsi &lt; 40 &amp;&amp; previous_rsi &gt;= 40\n    puts \"BUY SIGNAL: RSI crossed below 40 in uptrend\"\n    puts \"Entry: #{current_price.round(2)}\"\n    puts \"Stop Loss: #{(current_price * 0.97).round(2)} (3% below entry)\"\n    puts \"Target: Previous high or when RSI reaches 70\"\n  elsif current_rsi &lt; 30\n    puts \"STRONG BUY: RSI oversold in uptrend (#{current_rsi.round(2)})\"\n    puts \"High probability bounce opportunity\"\n  elsif current_rsi &gt; 70\n    puts \"TAKE PROFITS: RSI overbought - consider scaling out\"\n  else\n    puts \"HOLD: RSI at #{current_rsi.round(2)} - no clear signal\"\n  end\n\nelsif trend == \"DOWNTREND\"\n  # In downtrend, only look for sell signals (overbought conditions)\n  if current_rsi &gt; 60 &amp;&amp; previous_rsi &lt;= 60\n    puts \"SELL SIGNAL: RSI crossed above 60 in downtrend\"\n    puts \"Entry: #{current_price.round(2)}\"\n    puts \"Stop Loss: #{(current_price * 1.03).round(2)} (3% above entry)\"\n    puts \"Target: Previous low or when RSI reaches 30\"\n  elsif current_rsi &gt; 70\n    puts \"STRONG SELL: RSI overbought in downtrend (#{current_rsi.round(2)})\"\n    puts \"High probability continuation of downtrend\"\n  elsif current_rsi &lt; 30\n    puts \"CAUTION: RSI oversold in downtrend\"\n    puts \"Avoid catching falling knife - wait for trend reversal\"\n  else\n    puts \"HOLD/AVOID: RSI at #{current_rsi.round(2)} - no clear signal\"\n  end\nend\n\n# Divergence detection (simplified)\nputs \"\\n=== Divergence Check ===\"\nprice_high_recent = historical_prices.last(10).max\nprice_high_previous = historical_prices[-20..-11].max\nrsi_high_recent = rsi.last(10).compact.max\nrsi_high_previous = rsi[-20..-11].compact.max\n\nif price_high_recent &gt; price_high_previous &amp;&amp; rsi_high_recent &lt; rsi_high_previous\n  puts \"\u26a0\ufe0f  BEARISH DIVERGENCE DETECTED\"\n  puts \"Price making higher highs, RSI making lower highs\"\n  puts \"Potential trend exhaustion - consider taking profits\"\nend\n</code></pre>"},{"location":"indicators/momentum/rsi/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/momentum/rsi/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>Stochastic Oscillator: Another momentum oscillator comparing price to its range. Stochastic is more sensitive than RSI and generates more signals. Use Stochastic for faster markets, RSI for smoother analysis.</li> <li>CCI (Commodity Channel Index): Measures deviation from average price. CCI is unbounded (can exceed 100), while RSI is bounded (0-100). CCI better for identifying extreme conditions.</li> </ul>"},{"location":"indicators/momentum/rsi/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>MACD: Trend-following momentum indicator. Use MACD for trend direction and entries, RSI for timing and overbought/oversold confirmation.</li> <li>Bollinger Bands: Volatility bands. RSI signals at Bollinger Band extremes are particularly reliable.</li> <li>Volume (OBV): Confirms momentum. RSI divergences with volume confirmation are strongest signals.</li> </ul>"},{"location":"indicators/momentum/rsi/#indicator-family","title":"Indicator Family","text":"<p>RSI belongs to the momentum oscillator family: - RSI: Smoothed momentum based on gains vs losses - Stochastic: Raw momentum comparing current price to recent range - Williams %R: Similar to Stochastic, focuses on overbought levels - MFI (Money Flow Index): \"Volume-weighted RSI\" incorporating volume data</p> <p>When to prefer RSI: For general momentum analysis, overbought/oversold identification, and divergence analysis. RSI's smoothing makes it less noisy than Stochastic while being more responsive than moving averages.</p>"},{"location":"indicators/momentum/rsi/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/momentum/rsi/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use RSI across multiple timeframes for comprehensive analysis:</p> <ul> <li>Higher timeframe RSI (daily/weekly) identifies major trend direction and overbought/oversold conditions</li> <li>Lower timeframe RSI (4H/1H) provides precise entry timing within the higher timeframe trend</li> <li>Strongest signals when all timeframes align (e.g., daily RSI oversold + 4H RSI oversold in uptrend)</li> </ul> <p>Example: If weekly RSI is oversold (30) and daily RSI crosses above 30, this represents a high-probability long entry with both timeframes supporting the move.</p>"},{"location":"indicators/momentum/rsi/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>RSI behavior changes in different market conditions:</p> <ul> <li>Bull Markets: RSI tends to stay elevated (50-80 range). Oversold readings are rare and represent strong buy opportunities. Consider 80/40 thresholds.</li> <li>Bear Markets: RSI tends to stay depressed (20-50 range). Overbought readings are rare and represent strong sell opportunities. Consider 60/20 thresholds.</li> <li>Ranging Markets: Traditional 70/30 thresholds work best. RSI provides clearest signals in these conditions.</li> <li>High Volatility: RSI generates more extreme readings and false signals. Consider longer periods (21-25) to smooth out noise.</li> </ul>"},{"location":"indicators/momentum/rsi/#statistical-validation","title":"Statistical Validation","text":"<p>RSI reliability metrics and considerations:</p> <ul> <li>Success Rate: Studies show RSI oversold/overbought signals have 55-65% success rate when used alone. Combining with trend filters improves this to 65-75%.</li> <li>Risk/Reward: RSI divergences offer best risk/reward ratios (typically 1:3 or better) compared to simple overbought/oversold signals (1:1.5).</li> <li>Optimal Thresholds: Vary by asset class. Stocks: 70/30, Forex: 75/25, Crypto: 80/20 due to higher volatility.</li> <li>False Signal Rate: Approximately 35-45% of RSI signals fail. Always use stop losses and position sizing to manage risk.</li> </ul>"},{"location":"indicators/momentum/rsi/#references","title":"References","text":"<ul> <li>Wilder, J. Welles Jr. \"New Concepts in Technical Trading Systems\" (1978) - Original RSI publication</li> <li>Brown, Constance. \"Technical Analysis for the Trading Professional\" (1999) - Advanced RSI techniques including divergence patterns</li> <li>Cardwell, Andrew. \"RSI: The Complete Guide\" - Failure swings and positive/negative reversals</li> <li>TradingView: RSI Educational Guide</li> <li>StockCharts: RSI Technical Analysis</li> </ul>"},{"location":"indicators/momentum/rsi/#see-also","title":"See Also","text":"<ul> <li>Momentum Indicators Overview</li> <li>Basic Usage Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/momentum/stoch/","title":"Stochastic Oscillator (STOCH)","text":"<p>The Stochastic Oscillator is a momentum indicator that compares a closing price to its price range over a given time period. It consists of two lines: %K (fast) and %D (slow signal line).</p>"},{"location":"indicators/momentum/stoch/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# OHLC data required\nhigh  = [46.08, 46.41, 46.46, 46.57, 46.50, 47.03, 47.35, 47.61, 48.12, 48.34]\nlow   = [44.61, 44.83, 45.64, 45.95, 46.02, 46.50, 47.28, 47.28, 48.03, 48.21]\nclose = [45.42, 45.84, 46.08, 46.46, 46.55, 47.03, 47.28, 47.61, 48.12, 48.21]\n\n# Calculate Stochastic (returns two arrays)\nslowk, slowd = SQA::TAI.stoch(high, low, close)\n\nputs \"%K (fast): #{slowk.last.round(2)}\"\nputs \"%D (slow): #{slowd.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/stoch/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of closing prices <code>fastk_period</code> Integer No 5 %K period <code>slowk_period</code> Integer No 3 %K slowing period <code>slowk_ma_type</code> Integer No 0 %K MA type (0=SMA) <code>slowd_period</code> Integer No 3 %D period <code>slowd_ma_type</code> Integer No 0 %D MA type (0=SMA)"},{"location":"indicators/momentum/stoch/#returns","title":"Returns","text":"<p>Returns two arrays: 1. %K Line (SlowK) - Smoothed fast stochastic 2. %D Line (SlowD) - Signal line (moving average of %K)</p>"},{"location":"indicators/momentum/stoch/#formula","title":"Formula","text":"<pre><code>%K = 100 \u00d7 (Close - Lowest Low) / (Highest High - Lowest Low)\n%D = 3-period SMA of %K\n</code></pre>"},{"location":"indicators/momentum/stoch/#interpretation","title":"Interpretation","text":"Value Interpretation 80-100 Overbought zone 20-80 Neutral zone 0-20 Oversold zone"},{"location":"indicators/momentum/stoch/#example-basic-stochastic-strategy","title":"Example: Basic Stochastic Strategy","text":"<pre><code>high, low, close = load_ohlc_data('AAPL')\n\nslowk, slowd = SQA::TAI.stoch(high, low, close)\n\nk = slowk.last\nd = slowd.last\n\nif k &lt; 20 &amp;&amp; d &lt; 20\n  puts \"Oversold: %K=#{k.round(2)}, %D=#{d.round(2)}\"\n  if k &gt; d\n    puts \"Bullish crossover in oversold zone - BUY signal\"\n  end\nelsif k &gt; 80 &amp;&amp; d &gt; 80\n  puts \"Overbought: %K=#{k.round(2)}, %D=#{d.round(2)}\"\n  if k &lt; d\n    puts \"Bearish crossover in overbought zone - SELL signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/stoch/#example-stochastic-crossovers","title":"Example: Stochastic Crossovers","text":"<pre><code>high, low, close = load_ohlc_data('TSLA')\n\nslowk, slowd = SQA::TAI.stoch(high, low, close)\n\n# Check for crossovers\nif slowk[-2] &lt; slowd[-2] &amp;&amp; slowk[-1] &gt; slowd[-1]\n  if slowk[-1] &lt; 20\n    puts \"Bullish crossover in oversold zone - Strong BUY\"\n  else\n    puts \"Bullish crossover at #{slowk[-1].round(2)} - Moderate BUY\"\n  end\nelsif slowk[-2] &gt; slowd[-2] &amp;&amp; slowk[-1] &lt; slowd[-1]\n  if slowk[-1] &gt; 80\n    puts \"Bearish crossover in overbought zone - Strong SELL\"\n  else\n    puts \"Bearish crossover at #{slowk[-1].round(2)} - Moderate SELL\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/stoch/#example-stochastic-divergence","title":"Example: Stochastic Divergence","text":"<pre><code>high, low, close = load_ohlc_data('MSFT')\n\nslowk, slowd = SQA::TAI.stoch(high, low, close)\n\n# Find recent lows\nprice_low_1 = close[-30..-15].min\nprice_low_2 = close[-14..-1].min\n\nstoch_low_1 = slowk[-30..-15].compact.min\nstoch_low_2 = slowk[-14..-1].compact.min\n\n# Bullish divergence: price lower low, stochastic higher low\nif price_low_2 &lt; price_low_1 &amp;&amp; stoch_low_2 &gt; stoch_low_1\n  puts \"Bullish Divergence detected!\"\n  puts \"Price: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)} (lower)\"\n  puts \"Stochastic: #{stoch_low_1.round(2)} -&gt; #{stoch_low_2.round(2)} (higher)\"\n  puts \"Potential reversal to upside\"\nend\n</code></pre>"},{"location":"indicators/momentum/stoch/#example-trend-filtered-stochastic","title":"Example: Trend-Filtered Stochastic","text":"<pre><code>high, low, close = load_ohlc_data('NVDA')\n\nslowk, slowd = SQA::TAI.stoch(high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\ncurrent_price = close.last\nk = slowk.last\n\n# Only take signals aligned with trend\nif current_price &gt; sma_50.last\n  # Uptrend - only buy signals\n  if k &lt; 20 &amp;&amp; slowk[-2] &lt; slowd[-2] &amp;&amp; slowk[-1] &gt; slowd[-1]\n    puts \"Uptrend + Oversold Stochastic Crossover = Strong BUY\"\n  end\nelsif current_price &lt; sma_50.last\n  # Downtrend - only sell signals\n  if k &gt; 80 &amp;&amp; slowk[-2] &gt; slowd[-2] &amp;&amp; slowk[-1] &lt; slowd[-1]\n    puts \"Downtrend + Overbought Stochastic Crossover = Strong SELL\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/stoch/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/stoch/#1-overboughtoversold","title":"1. Overbought/Oversold","text":"<ul> <li>Buy when Stochastic enters oversold (&lt;20)</li> <li>Sell when Stochastic enters overbought (&gt;80)</li> <li>Works best in ranging markets</li> </ul>"},{"location":"indicators/momentum/stoch/#2-crossover","title":"2. Crossover","text":"<ul> <li>Buy when %K crosses above %D</li> <li>Sell when %K crosses below %D</li> <li>Most reliable in extreme zones</li> </ul>"},{"location":"indicators/momentum/stoch/#3-divergence","title":"3. Divergence","text":"<ul> <li>Bullish: Price lower low, Stochastic higher low</li> <li>Bearish: Price higher high, Stochastic lower high</li> <li>Powerful reversal signals</li> </ul>"},{"location":"indicators/momentum/stoch/#4-bullbear-setup","title":"4. Bull/Bear Setup","text":"<ul> <li>Bull setup: %K crosses above %D while both below 50</li> <li>Bear setup: %K crosses below %D while both above 50</li> </ul>"},{"location":"indicators/momentum/stoch/#fast-vs-slow-stochastic","title":"Fast vs Slow Stochastic","text":"<pre><code>high, low, close = load_ohlc_data('AAPL')\n\n# Slow Stochastic (default, smoother)\nslowk, slowd = SQA::TAI.stoch(high, low, close,\n                                  fastk_period: 14,\n                                  slowk_period: 3,\n                                  slowd_period: 3)\n\n# Fast Stochastic (more sensitive)\nfastk, fastd = SQA::TAI.stoch(high, low, close,\n                                  fastk_period: 14,\n                                  slowk_period: 1,\n                                  slowd_period: 3)\n\nputs \"Slow Stochastic: %K=#{slowk.last.round(2)}, %D=#{slowd.last.round(2)}\"\nputs \"Fast Stochastic: %K=#{fastk.last.round(2)}, %D=#{fastd.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/stoch/#common-settings","title":"Common Settings","text":"Setting %K Period Slowing %D Period Use Fast 14 1 3 Quick signals Slow (Standard) 14 3 3 Balanced Very Slow 21 5 5 Fewer signals"},{"location":"indicators/momentum/stoch/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Similar momentum oscillator</li> <li>MACD - Trend and momentum</li> <li>MOM - Basic momentum</li> </ul>"},{"location":"indicators/momentum/stoch/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/stochf/","title":"STOCHF (Fast Stochastic Oscillator)","text":""},{"location":"indicators/momentum/stochf/#overview","title":"Overview","text":"<p>The Fast Stochastic Oscillator (STOCHF) is a momentum indicator that shows where the closing price is relative to the high-low range over a given period. It is the more responsive version of the standard Stochastic Oscillator, providing quicker signals with less smoothing. STOCHF consists of two lines: %K (fast line) and %D (signal line), both oscillating between 0 and 100 to identify overbought and oversold conditions.</p>"},{"location":"indicators/momentum/stochf/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of close prices <code>fastk_period</code> Integer 5 Period for %K calculation <code>fastd_period</code> Integer 3 Period for %D moving average <code>fastd_ma_type</code> Integer 0 MA type for %D (0=SMA, 1=EMA, etc.)"},{"location":"indicators/momentum/stochf/#parameter-details","title":"Parameter Details","text":"<p>high, low, close - Complete HLC data required (open not needed) - Arrays must be of equal length - Minimum data points: fastk_period + fastd_period - Works on any timeframe (1-minute to monthly)</p> <p>fastk_period - Standard setting is 5 periods for fast response - Shorter periods (3-4) create extremely sensitive signals - Longer periods (7-10) smooth the indicator but lose \"fast\" characteristic - Recommended ranges:   - Scalping: 3-5 periods for maximum responsiveness   - Day trading: 5-7 periods (standard)   - Swing trading: 8-10 periods for reduced noise</p> <p>fastd_period - Standard setting is 3 periods (moving average of %K) - Creates the signal line (%D) by smoothing %K - Shorter periods (2) make %D more responsive to %K - Longer periods (5-7) create smoother signal line - Common values: 3 (standard), 2 (very fast), 5 (smoother)</p> <p>fastd_ma_type - 0 = SMA (Simple Moving Average) - standard - 1 = EMA (Exponential Moving Average) - more weight to recent values - Other MA types available but SMA is most common</p>"},{"location":"indicators/momentum/stochf/#usage","title":"Usage","text":""},{"location":"indicators/momentum/stochf/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [46.08, 46.41, 46.46, 46.57, 46.50, 47.03, 47.35, 47.61,\n         48.12, 48.34, 48.50, 48.70, 48.90, 49.10, 49.30]\nlow =   [44.61, 44.83, 45.64, 45.95, 46.02, 46.50, 47.28, 47.28,\n         48.03, 48.21, 48.10, 48.20, 48.40, 48.60, 48.80]\nclose = [45.42, 45.84, 46.08, 46.46, 46.55, 47.03, 47.28, 47.61,\n         48.12, 48.21, 48.30, 48.50, 48.70, 48.90, 49.10]\n\n# Calculate Fast Stochastic (returns two arrays: fastk and fastd)\nfastk, fastd = SQA::TAI.stochf(high, low, close,\n                                fastk_period: 5,\n                                fastd_period: 3)\n\nputs \"%K (fast): #{fastk.last.round(2)}\"\nputs \"%D (signal): #{fastd.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/stochf/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Very fast settings for scalping\nfastk_scalp, fastd_scalp = SQA::TAI.stochf(high, low, close,\n                                            fastk_period: 3,\n                                            fastd_period: 2)\n\n# Standard fast settings\nfastk_std, fastd_std = SQA::TAI.stochf(high, low, close,\n                                        fastk_period: 5,\n                                        fastd_period: 3)\n\n# Smoother fast stochastic\nfastk_smooth, fastd_smooth = SQA::TAI.stochf(high, low, close,\n                                              fastk_period: 8,\n                                              fastd_period: 5)\n\nputs \"Scalping: %K=#{fastk_scalp.last.round(2)}, %D=#{fastd_scalp.last.round(2)}\"\nputs \"Standard: %K=#{fastk_std.last.round(2)}, %D=#{fastd_std.last.round(2)}\"\nputs \"Smooth: %K=#{fastk_smooth.last.round(2)}, %D=#{fastd_smooth.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/stochf/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/momentum/stochf/#what-it-measures","title":"What It Measures","text":"<p>Fast Stochastic measures momentum by comparing closing price to recent price range:</p> <ul> <li>Price Position: Where current close is within the recent high-low range</li> <li>Momentum Strength: How quickly price is moving within its range</li> <li>Overbought/Oversold: When price is at extremes of its range</li> <li>Momentum Shifts: Changes in the rate of price movement</li> </ul> <p>STOCHF answers: \"Is price at the top or bottom of its recent range, and is momentum shifting?\"</p>"},{"location":"indicators/momentum/stochf/#calculation-method","title":"Calculation Method","text":"<p>Fast Stochastic calculation is straightforward:</p> <ol> <li>Calculate %K (Fast Line): Compare close to recent high-low range</li> <li>Calculate %D (Signal Line): Moving average of %K</li> <li>No additional smoothing: Unlike slow stochastic, %K is not smoothed first</li> </ol> <p>Formula: <pre><code>%K = 100 \u00d7 (Close - Lowest Low) / (Highest High - Lowest Low)\n\nWhere:\n- Lowest Low = minimum low over fastk_period\n- Highest High = maximum high over fastk_period\n\n%D = Moving Average of %K over fastd_period\n</code></pre></p>"},{"location":"indicators/momentum/stochf/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: 0 to 100 (bounded oscillator)</li> <li>Type: Momentum oscillator (range-based)</li> <li>Lag: Very low lag - one of the fastest momentum indicators</li> <li>Best Used: Short-term trading, quick reversals, scalping</li> <li>Limitations: More false signals than slow stochastic due to sensitivity</li> </ul>"},{"location":"indicators/momentum/stochf/#interpretation","title":"Interpretation","text":""},{"location":"indicators/momentum/stochf/#value-ranges","title":"Value Ranges","text":"<p>Specific guidance on what different STOCHF values indicate:</p> <ul> <li>80-100: Overbought zone. Price near top of recent range. Potential reversal or consolidation approaching.</li> <li>50-80: Bullish momentum. Price in upper half of range, upward momentum intact.</li> <li>20-50: Bearish momentum. Price in lower half of range, downward momentum present.</li> <li>0-20: Oversold zone. Price near bottom of recent range. Potential bounce or consolidation approaching.</li> </ul>"},{"location":"indicators/momentum/stochf/#key-levels","title":"Key Levels","text":"<ul> <li>Overbought (80): Traditional overbought level. STOCHF &gt; 80 indicates price at top of range. Watch for reversal when %K turns down or crosses below %D.</li> <li>Oversold (20): Traditional oversold level. STOCHF &lt; 20 indicates price at bottom of range. Watch for reversal when %K turns up or crosses above %D.</li> <li>Midpoint (50): Equilibrium level. STOCHF crossing 50 indicates momentum shift.</li> <li>Extreme Levels (95+/5-): Very strong signals. When STOCHF reaches these extremes, reversal probability increases significantly.</li> </ul> <p>Important: In strong trends, STOCHF can remain overbought or oversold for extended periods. Adjust thresholds: use 90/10 in strong trends instead of 80/20.</p>"},{"location":"indicators/momentum/stochf/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read Fast Stochastic signals:</p> <ol> <li>Crossover Signals</li> <li>%K crosses above %D: Bullish signal (momentum turning up)</li> <li>%K crosses below %D: Bearish signal (momentum turning down)</li> <li> <p>Crossovers in extreme zones (above 80 or below 20) are strongest</p> </li> <li> <p>Overbought/Oversold</p> </li> <li>Entering overbought: Strong momentum, but watch for reversal</li> <li>Leaving overbought: Momentum slowing, potential top</li> <li>Entering oversold: Weak momentum, but watch for bounce</li> <li> <p>Leaving oversold: Momentum recovering, potential bottom</p> </li> <li> <p>Divergences</p> </li> <li>Price higher high + STOCHF lower high: Bearish divergence</li> <li>Price lower low + STOCHF higher low: Bullish divergence</li> <li>Most powerful when divergence occurs at extremes</li> </ol>"},{"location":"indicators/momentum/stochf/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/momentum/stochf/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: STOCHF in oversold zone (&lt;20) and %K crosses above %D</li> <li>Confirms oversold reversal with momentum shift</li> <li> <p>Best at support levels or in established uptrends</p> </li> <li> <p>Confirmation Signal: Both %K and %D cross above 20 together</p> </li> <li>Confirms oversold condition ending</li> <li> <p>Volume confirmation strengthens signal</p> </li> <li> <p>Divergence Signal: Price makes lower low but STOCHF makes higher low</p> </li> <li>Bullish divergence indicates weakening downward pressure</li> <li>Strongest when STOCHF forms higher low below 30</li> </ol> <p>Example Scenario: <pre><code>When %K crosses above %D in oversold zone (both below 20),\nconsider long position. Confirm with:\n- Price at or near support level\n- Volume declining on selloff\n- ADX showing weak trend (favors reversal)\n- Set stop loss below recent swing low\n</code></pre></p>"},{"location":"indicators/momentum/stochf/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: STOCHF in overbought zone (&gt;80) and %K crosses below %D</li> <li>Confirms overbought reversal with momentum shift</li> <li> <p>Best at resistance levels or in established downtrends</p> </li> <li> <p>Confirmation Signal: Both %K and %D cross below 80 together</p> </li> <li>Confirms overbought condition ending</li> <li> <p>Volume confirmation strengthens signal</p> </li> <li> <p>Divergence Signal: Price makes higher high but STOCHF makes lower high</p> </li> <li>Bearish divergence indicates weakening upward pressure</li> <li>Strongest when STOCHF forms lower high above 70</li> </ol> <p>Example Scenario: <pre><code>When %K crosses below %D in overbought zone (both above 80),\nconsider short position or exit longs. Confirm with:\n- Price at or near resistance level\n- Volume declining on rally\n- ADX showing weak trend (favors reversal)\n- Set stop loss above recent swing high\n</code></pre></p>"},{"location":"indicators/momentum/stochf/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Pattern: Price makes lower low, STOCHF makes higher low - Identification: Compare price lows with STOCHF lows over 10-20 bars - Significance: Selling momentum weakening despite lower prices - Reliability: High when both %K and %D are below 30 - Example: Stock drops to $48, then $46. STOCHF drops to 15, then only to 22 on second low. Reversal likely.</p> <p>Bearish Divergence: - Pattern: Price makes higher high, STOCHF makes lower high - Identification: Compare price highs with STOCHF highs over 10-20 bars - Significance: Buying momentum weakening despite higher prices - Reliability: High when both %K and %D are above 70 - Example: Stock rises to $52, then $54. STOCHF rises to 88, then only to 81 on second high. Reversal likely.</p>"},{"location":"indicators/momentum/stochf/#best-practices","title":"Best Practices","text":""},{"location":"indicators/momentum/stochf/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When Fast Stochastic works best:</p> <ul> <li>Market conditions: Excellent in ranging/choppy markets. Less reliable in strong trending markets where it stays overbought/oversold. Best with volatility.</li> <li>Time frames: Outstanding for scalping (1-5 min) and day trading (5-60 min). Also effective on daily charts for swing entries. Less useful on weekly+ timeframes.</li> <li>Asset classes: Works well for all liquid assets\u2014stocks, forex, futures, crypto. Requires decent volatility. Avoid in very low volatility conditions.</li> </ul>"},{"location":"indicators/momentum/stochf/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Trend Indicators (MA, ADX): Use trend filter to avoid counter-trend trades. Only take STOCHF buy signals in uptrend, sell signals in downtrend. Increases win rate significantly.</p> </li> <li> <p>With Support/Resistance: STOCHF signals at key price levels are most reliable. Oversold at support = strong buy. Overbought at resistance = strong sell.</p> </li> <li> <p>With Volume: Declining volume in oversold/overbought zones strengthens reversal signals. Rising volume on STOCHF crossovers confirms momentum shift.</p> </li> <li> <p>With Slow Stochastic: Compare fast and slow. When both give same signal, probability is higher. When they diverge, fast leads slow.</p> </li> </ul>"},{"location":"indicators/momentum/stochf/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Trading Against Strong Trends: Taking overbought signals in strong uptrends or oversold signals in strong downtrends leads to early exits and losses. Always check trend first.</p> </li> <li> <p>Ignoring False Signals: Fast Stochastic generates many false signals due to high sensitivity. Never trade STOCHF alone\u2014always use confirmation from price action, support/resistance, or other indicators.</p> </li> <li> <p>Over-trading: STOCHF can give numerous signals in choppy markets. Be selective. Focus on signals at extremes (80/20) with crossovers, not every minor fluctuation.</p> </li> <li> <p>Using Fixed Thresholds: 80/20 levels work in ranging markets but fail in trends. Adjust to 90/10 or 95/5 in strong trends. Adapt to market conditions.</p> </li> </ol>"},{"location":"indicators/momentum/stochf/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (scalping/day trading):</li> <li>fastk_period: 3-5 for maximum responsiveness</li> <li>fastd_period: 2-3 for quick signal</li> <li>Thresholds: 80/20 or 85/15</li> <li> <p>Focus: Quick reversals, fast entries/exits</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>fastk_period: 5-8 for balance of speed and reliability</li> <li>fastd_period: 3-5 for smoother signals</li> <li>Thresholds: 80/20 (standard)</li> <li> <p>Focus: Multi-day swings, extremes + crossovers</p> </li> <li> <p>High-volatility environments:</p> </li> <li>fastk_period: 8-10 to filter noise</li> <li>fastd_period: 5-7 for stability</li> <li> <p>Thresholds: 90/10 to reduce false signals</p> </li> <li> <p>Backtesting approach: Test on historical data for your specific asset and timeframe. Optimize fastk_period for signal clarity and fastd_period for crossover timing.</p> </li> </ul>"},{"location":"indicators/momentum/stochf/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Intraday 5-minute data for day trading\nhigh_prices =  [46.08, 46.41, 46.46, 46.57, 46.50, 47.03, 47.35, 47.61,\n                48.12, 48.34, 48.50, 48.70, 48.90, 49.10, 49.30, 49.25,\n                49.15, 48.90, 48.70, 48.50]\nlow_prices =   [44.61, 44.83, 45.64, 45.95, 46.02, 46.50, 47.28, 47.28,\n                48.03, 48.21, 48.10, 48.20, 48.40, 48.60, 48.80, 48.75,\n                48.60, 48.40, 48.20, 48.00]\nclose_prices = [45.42, 45.84, 46.08, 46.46, 46.55, 47.03, 47.28, 47.61,\n                48.12, 48.21, 48.30, 48.50, 48.70, 48.90, 49.10, 49.05,\n                48.95, 48.75, 48.55, 48.35]\n\n# Calculate Fast Stochastic and trend filter\nfastk, fastd = SQA::TAI.stochf(high_prices, low_prices, close_prices,\n                                fastk_period: 5,\n                                fastd_period: 3)\n\nsma_20 = SQA::TAI.sma(close_prices, period: 20)\n\n# Current values\ncurrent_price = close_prices.last\ncurrent_k = fastk.last\nprevious_k = fastk[-2]\ncurrent_d = fastd.last\nprevious_d = fastd[-2]\n\n# Trend determination\ntrend = current_price &gt; sma_20.last ? \"UPTREND\" : \"DOWNTREND\"\n\nputs \"=== Fast Stochastic Day Trading Analysis ===\"\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"Fast Stoch %K: #{current_k.round(2)}\"\nputs \"Fast Stoch %D: #{current_d.round(2)}\"\nputs \"Trend (20 SMA): #{trend}\"\nputs\n\n# Trading logic with trend filter\nif trend == \"UPTREND\"\n  # In uptrend, only look for buy signals (dip buying)\n  if current_k &lt; 20 &amp;&amp; current_d &lt; 20\n    puts \"SIGNAL: OVERSOLD IN UPTREND\"\n\n    # Check for bullish crossover\n    if previous_k &lt; previous_d &amp;&amp; current_k &gt; current_d\n      puts \"BUY SIGNAL: Bullish crossover in oversold zone\"\n      puts \"Entry: $#{current_price.round(2)}\"\n      puts \"Stop Loss: $#{(current_price * 0.985).round(2)} (1.5% below)\"\n      puts \"Target 1: Previous resistance at $#{high_prices.max.round(2)}\"\n      puts \"Target 2: When STOCHF reaches 80 (overbought)\"\n      puts \"Strategy: Buying the dip in uptrend\"\n    elsif current_k &gt; previous_k\n      puts \"WATCH: STOCHF turning up from oversold\"\n      puts \"Wait for %K to cross above %D for confirmation\"\n    end\n\n  elsif current_k &gt; 80 &amp;&amp; current_d &gt; 80\n    puts \"SIGNAL: OVERBOUGHT IN UPTREND\"\n    puts \"STOCHF: %K=#{current_k.round(2)}, %D=#{current_d.round(2)}\"\n\n    if previous_k &gt; previous_d &amp;&amp; current_k &lt; current_d\n      puts \"CAUTION: Bearish crossover in overbought\"\n      puts \"Consider taking profits or tightening stops\"\n      puts \"Pullback likely but uptrend may resume\"\n    else\n      puts \"HOLD: Overbought but no reversal yet\"\n      puts \"Trail stops or prepare to take profits\"\n    end\n\n  elsif previous_k &lt; 50 &amp;&amp; current_k &gt; 50\n    puts \"SIGNAL: MOMENTUM SHIFT UPWARD\"\n    puts \"%K crossed above 50 - bullish acceleration\"\n    puts \"Consider adding to long positions\"\n\n  else\n    puts \"NEUTRAL: STOCHF at #{current_k.round(2)}\"\n    puts \"No clear signal - wait for extremes\"\n  end\n\nelsif trend == \"DOWNTREND\"\n  # In downtrend, only look for sell signals (rally fading)\n  if current_k &gt; 80 &amp;&amp; current_d &gt; 80\n    puts \"SIGNAL: OVERBOUGHT IN DOWNTREND\"\n\n    # Check for bearish crossover\n    if previous_k &gt; previous_d &amp;&amp; current_k &lt; current_d\n      puts \"SELL SIGNAL: Bearish crossover in overbought zone\"\n      puts \"Entry: Short at $#{current_price.round(2)}\"\n      puts \"Stop Loss: $#{(current_price * 1.015).round(2)} (1.5% above)\"\n      puts \"Target 1: Previous support at $#{low_prices.min.round(2)}\"\n      puts \"Target 2: When STOCHF reaches 20 (oversold)\"\n      puts \"Strategy: Fading the rally in downtrend\"\n    elsif current_k &lt; previous_k\n      puts \"WATCH: STOCHF turning down from overbought\"\n      puts \"Wait for %K to cross below %D for confirmation\"\n    end\n\n  elsif current_k &lt; 20 &amp;&amp; current_d &lt; 20\n    puts \"SIGNAL: OVERSOLD IN DOWNTREND\"\n    puts \"STOCHF: %K=#{current_k.round(2)}, %D=#{current_d.round(2)}\"\n\n    if previous_k &lt; previous_d &amp;&amp; current_k &gt; current_d\n      puts \"CAUTION: Bullish crossover in oversold\"\n      puts \"Consider covering shorts or tightening stops\"\n      puts \"Bounce likely but downtrend may resume\"\n    else\n      puts \"HOLD SHORTS: Oversold but no reversal yet\"\n      puts \"Trail stops or prepare to cover\"\n    end\n\n  elsif previous_k &gt; 50 &amp;&amp; current_k &lt; 50\n    puts \"SIGNAL: MOMENTUM SHIFT DOWNWARD\"\n    puts \"%K crossed below 50 - bearish acceleration\"\n    puts \"Consider adding to short positions\"\n\n  else\n    puts \"NEUTRAL: STOCHF at #{current_k.round(2)}\"\n    puts \"No clear signal - wait for extremes\"\n  end\nend\n\n# Divergence detection\nputs \"\\n=== Divergence Check ===\"\nprice_high_recent = close_prices.last(5).max\nprice_high_prev = close_prices[-10..-6].max\nk_high_recent = fastk.last(5).compact.max\nk_high_prev = fastk[-10..-6].compact.max\n\nif price_high_recent &gt; price_high_prev &amp;&amp; k_high_recent &lt; k_high_prev\n  puts \"\u26a0\ufe0f  BEARISH DIVERGENCE\"\n  puts \"Price: $#{price_high_prev.round(2)} -&gt; $#{price_high_recent.round(2)} (higher)\"\n  puts \"STOCHF: #{k_high_prev.round(2)} -&gt; #{k_high_recent.round(2)} (lower)\"\n  puts \"Momentum weakening - potential reversal\"\nend\n</code></pre>"},{"location":"indicators/momentum/stochf/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/momentum/stochf/#similar-indicators","title":"Similar Indicators","text":"<ul> <li> <p>STOCH (Slow Stochastic): Smoothed version of Fast Stochastic. Slow Stochastic applies additional smoothing to %K, making it less sensitive. Use STOCHF for faster signals, STOCH for fewer false positives.</p> </li> <li> <p>Williams %R: Similar calculation but inverted scale (0 to -100). Williams %R and Fast Stochastic give nearly identical signals. STOCHF is more popular and easier to interpret.</p> </li> <li> <p>RSI (Relative Strength Index): Another momentum oscillator. RSI is smoother and bounded 0-100. STOCHF is more sensitive to short-term changes. Use STOCHF for quick trades, RSI for trend analysis.</p> </li> </ul>"},{"location":"indicators/momentum/stochf/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li> <p>MACD: Trend-following momentum. Use MACD to identify trend, STOCHF to time entries. MACD bullish + STOCHF oversold crossover = high-probability buy.</p> </li> <li> <p>Bollinger Bands: Volatility bands. STOCHF signals at Bollinger Band extremes are particularly strong. Oversold + lower band touch = powerful reversal signal.</p> </li> <li> <p>Volume: Confirms STOCHF signals. STOCHF reversal with high volume = strong signal. STOCHF reversal with low volume = weak signal, possible false.</p> </li> </ul>"},{"location":"indicators/momentum/stochf/#indicator-family","title":"Indicator Family","text":"<p>Fast Stochastic belongs to the Stochastic family: - Fast Stochastic (STOCHF): Raw %K and smoothed %D - Slow Stochastic (STOCH): Smoothed %K (SlowK) and smoothed %D (SlowD) - Full Stochastic: Fully customizable smoothing parameters</p> <p>When to prefer STOCHF: For short-term trading requiring quick signals. STOCHF excels at catching rapid momentum shifts in fast-moving markets. Best for scalping, day trading, and active swing trading.</p>"},{"location":"indicators/momentum/stochf/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/momentum/stochf/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Fast Stochastic across timeframes for context and confirmation:</p> <ul> <li>Higher timeframe STOCHF (daily) identifies major overbought/oversold conditions</li> <li>Lower timeframe STOCHF (5-min, 15-min) provides precise entry and exit timing</li> <li>Strongest signals when timeframes align (daily oversold + 15-min oversold + crossover)</li> </ul> <p>Example: Daily STOCHF oversold (below 20) while 15-minute STOCHF shows bullish crossover in oversold = high-probability long entry.</p>"},{"location":"indicators/momentum/stochf/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Fast Stochastic requires adjustment for different markets:</p> <ul> <li> <p>Trending Markets: Use 90/10 or 95/5 thresholds instead of 80/20. Only trade with trend direction. Ignore counter-trend STOCHF signals.</p> </li> <li> <p>Ranging Markets: Standard 80/20 thresholds work well. Trade both overbought and oversold signals. STOCHF excels in ranges.</p> </li> <li> <p>High Volatility: Increase fastk_period to 8-10 and use 85/15 thresholds to reduce whipsaws.</p> </li> <li> <p>Low Volatility: Decrease to 3-5 period and use 75/25 thresholds for earlier signals. Beware of false signals in very quiet markets.</p> </li> </ul>"},{"location":"indicators/momentum/stochf/#statistical-validation","title":"Statistical Validation","text":"<p>Fast Stochastic reliability metrics:</p> <ul> <li> <p>Success Rate: Crossovers in extreme zones (80/20) have approximately 55-60% success rate. Improves to 65-70% with trend filter.</p> </li> <li> <p>Best Timeframes: Most reliable on 5-minute to daily charts. Very short timeframes (&lt;5 min) generate excessive false signals. Weekly+ too laggy.</p> </li> <li> <p>Optimal Parameters: Studies show 5-period %K with 3-period %D performs best across most markets. Very short or very long periods reduce effectiveness.</p> </li> <li> <p>Signal Timing: STOCHF typically leads price reversals by 1-5 bars on the timeframe being analyzed. Earlier than slow stochastic but more false signals.</p> </li> </ul>"},{"location":"indicators/momentum/stochf/#references","title":"References","text":"<ul> <li>Lane, George. \"Lane's Stochastics\" - Original developer of Stochastic Oscillator</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999) - Comprehensive stochastic analysis</li> <li>Pring, Martin J. \"Technical Analysis Explained\" (2002) - Fast vs Slow Stochastic comparison</li> <li>TradingView: Stochastic Educational Guide</li> <li>StockCharts: Stochastic Oscillator</li> </ul>"},{"location":"indicators/momentum/stochf/#see-also","title":"See Also","text":"<ul> <li>Momentum Indicators Overview</li> <li>STOCH - Slow Stochastic</li> <li>Williams %R - Similar Oscillator</li> <li>Basic Usage Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/momentum/stochrsi/","title":"Stochastic Relative Strength Index (STOCHRSI)","text":"<p>The Stochastic RSI is a momentum oscillator that applies the Stochastic formula to RSI values rather than price. It measures the level of RSI relative to its high-low range over a set period, making it more sensitive than standard RSI. StochRSI oscillates between 0 and 100, providing early signals for overbought and oversold conditions.</p>"},{"location":"indicators/momentum/stochrsi/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.55, 47.03, 47.28, 47.61, 48.12, 48.21]\n\n# Calculate Stochastic RSI (returns two arrays)\nfastk, fastd = SQA::TAI.stochrsi(prices, period: 14)\n\nputs \"FastK: #{fastk.last.round(2)}\"\nputs \"FastD: #{fastd.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 14 RSI period for calculation <code>fastk_period</code> Integer No 5 Period for FastK calculation <code>fastd_period</code> Integer No 3 Period for FastD (signal line) <code>fastd_ma_type</code> Integer No 0 Moving average type for FastD (0=SMA)"},{"location":"indicators/momentum/stochrsi/#returns","title":"Returns","text":"<p>Returns two arrays: 1. FastK - The Stochastic calculation applied to RSI values 2. FastD - Signal line (moving average of FastK)</p> <p>Both values range from 0 to 100.</p>"},{"location":"indicators/momentum/stochrsi/#formula","title":"Formula","text":"<pre><code>1. Calculate RSI over specified period\n2. FastK = 100 \u00d7 (RSI - Lowest RSI) / (Highest RSI - Lowest RSI)\n3. FastD = Moving Average of FastK\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#interpretation","title":"Interpretation","text":"Value Interpretation 80-100 Overbought - potential sell signal 20-80 Neutral zone 0-20 Oversold - potential buy signal <p>Key Characteristics: - More sensitive than standard RSI - Generates earlier signals - More prone to false signals in ranging markets - FastK/FastD crossovers provide additional confirmation</p>"},{"location":"indicators/momentum/stochrsi/#example-basic-stochrsi-strategy","title":"Example: Basic StochRSI Strategy","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nfastk, fastd = SQA::TAI.stochrsi(prices, period: 14)\n\nk = fastk.last\nd = fastd.last\n\nif k &lt; 20 &amp;&amp; d &lt; 20\n  puts \"Oversold: FastK=#{k.round(2)}, FastD=#{d.round(2)}\"\n  if k &gt; d\n    puts \"Bullish crossover in oversold zone - BUY signal\"\n  end\nelsif k &gt; 80 &amp;&amp; d &gt; 80\n  puts \"Overbought: FastK=#{k.round(2)}, FastD=#{d.round(2)}\"\n  if k &lt; d\n    puts \"Bearish crossover in overbought zone - SELL signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#example-stochrsi-crossovers","title":"Example: StochRSI Crossovers","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nfastk, fastd = SQA::TAI.stochrsi(prices, period: 14)\n\n# Detect crossovers\nif fastk[-2] &lt; fastd[-2] &amp;&amp; fastk[-1] &gt; fastd[-1]\n  zone = case fastk[-1]\n         when 0...20 then \"oversold\"\n         when 20...80 then \"neutral\"\n         else \"overbought\"\n         end\n\n  puts \"Bullish crossover in #{zone} zone\"\n  puts \"FastK crossed above FastD at #{fastk[-1].round(2)}\"\n\n  if fastk[-1] &lt; 20\n    puts \"Strong BUY signal - oversold crossover\"\n  else\n    puts \"Moderate BUY signal\"\n  end\nelsif fastk[-2] &gt; fastd[-2] &amp;&amp; fastk[-1] &lt; fastd[-1]\n  zone = case fastk[-1]\n         when 0...20 then \"oversold\"\n         when 20...80 then \"neutral\"\n         else \"overbought\"\n         end\n\n  puts \"Bearish crossover in #{zone} zone\"\n  puts \"FastK crossed below FastD at #{fastk[-1].round(2)}\"\n\n  if fastk[-1] &gt; 80\n    puts \"Strong SELL signal - overbought crossover\"\n  else\n    puts \"Moderate SELL signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#example-stochrsi-extremes","title":"Example: StochRSI Extremes","text":"<pre><code>prices = load_historical_prices('NVDA')\n\nfastk, fastd = SQA::TAI.stochrsi(prices, period: 14)\n\n# Count consecutive bars in extreme zones\noversold_bars = 0\noverbought_bars = 0\n\nfastk.last(10).each do |value|\n  next if value.nil?\n  oversold_bars += 1 if value &lt; 20\n  overbought_bars += 1 if value &gt; 80\nend\n\nif oversold_bars &gt;= 3\n  puts \"StochRSI oversold for #{oversold_bars} consecutive bars\"\n  puts \"High probability of reversal to upside\"\n  puts \"Wait for FastK to cross above 20 for confirmation\"\nelsif overbought_bars &gt;= 3\n  puts \"StochRSI overbought for #{overbought_bars} consecutive bars\"\n  puts \"High probability of reversal to downside\"\n  puts \"Wait for FastK to cross below 80 for confirmation\"\nend\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#example-stochrsi-with-trend-filter","title":"Example: StochRSI with Trend Filter","text":"<pre><code>prices = load_historical_prices('MSFT')\n\nfastk, fastd = SQA::TAI.stochrsi(prices, period: 14)\nema_50 = SQA::TAI.ema(prices, period: 50)\nema_200 = SQA::TAI.ema(prices, period: 200)\n\ncurrent_price = prices.last\nk = fastk.last\nd = fastd.last\n\n# Determine trend\ntrend = if current_price &gt; ema_50.last &amp;&amp; ema_50.last &gt; ema_200.last\n          :strong_uptrend\n        elsif current_price &gt; ema_50.last\n          :uptrend\n        elsif current_price &lt; ema_50.last &amp;&amp; ema_50.last &lt; ema_200.last\n          :strong_downtrend\n        else\n          :downtrend\n        end\n\nputs &lt;&lt;~OUTPUT\n  Trend: #{trend}\n  Price: #{current_price.round(2)}\n  StochRSI FastK: #{k.round(2)}\n  StochRSI FastD: #{d.round(2)}\nOUTPUT\n\ncase trend\nwhen :strong_uptrend, :uptrend\n  # Only look for oversold buy signals in uptrend\n  if k &lt; 20 &amp;&amp; fastk[-2] &lt; fastd[-2] &amp;&amp; fastk[-1] &gt; fastd[-1]\n    puts \"#{trend.to_s.upcase} + Oversold StochRSI crossover = Strong BUY\"\n  end\nwhen :strong_downtrend, :downtrend\n  # Only look for overbought sell signals in downtrend\n  if k &gt; 80 &amp;&amp; fastk[-2] &gt; fastd[-2] &amp;&amp; fastk[-1] &lt; fastd[-1]\n    puts \"#{trend.to_s.upcase} + Overbought StochRSI crossover = Strong SELL\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#example-stochrsi-divergence","title":"Example: StochRSI Divergence","text":"<pre><code>prices = load_historical_prices('AMZN')\n\nfastk, fastd = SQA::TAI.stochrsi(prices, period: 14)\n\n# Find recent highs\nprice_high_1 = prices[-40..-20].max\nprice_high_2 = prices[-19..-1].max\n\nstoch_high_1 = fastk[-40..-20].compact.max\nstoch_high_2 = fastk[-19..-1].compact.max\n\n# Bearish divergence: price higher high, StochRSI lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; stoch_high_2 &lt; stoch_high_1\n  puts \"Bearish Divergence detected!\"\n  puts \"Price higher high: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)}\"\n  puts \"StochRSI lower high: #{stoch_high_1.round(2)} -&gt; #{stoch_high_2.round(2)}\"\n  puts \"Potential reversal to downside\"\nend\n\n# Find recent lows\nprice_low_1 = prices[-40..-20].min\nprice_low_2 = prices[-19..-1].min\n\nstoch_low_1 = fastk[-40..-20].compact.min\nstoch_low_2 = fastk[-19..-1].compact.min\n\n# Bullish divergence: price lower low, StochRSI higher low\nif price_low_2 &lt; price_low_1 &amp;&amp; stoch_low_2 &gt; stoch_low_1\n  puts \"Bullish Divergence detected!\"\n  puts \"Price lower low: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)}\"\n  puts \"StochRSI higher low: #{stoch_low_1.round(2)} -&gt; #{stoch_low_2.round(2)}\"\n  puts \"Potential reversal to upside\"\nend\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#example-stochrsi-with-rsi-confirmation","title":"Example: StochRSI with RSI Confirmation","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\n# Calculate both indicators\nfastk, fastd = SQA::TAI.stochrsi(prices, period: 14)\nrsi = SQA::TAI.rsi(prices, period: 14)\n\nk = fastk.last\nd = fastd.last\nrsi_value = rsi.last\n\nputs &lt;&lt;~OUTPUT\n  StochRSI FastK: #{k.round(2)}\n  StochRSI FastD: #{d.round(2)}\n  RSI: #{rsi_value.round(2)}\nOUTPUT\n\n# Strong signals when both indicators agree\nif k &lt; 20 &amp;&amp; rsi_value &lt; 30\n  puts \"Both StochRSI and RSI oversold - Very Strong BUY signal\"\n  if fastk[-2] &lt; fastd[-2] &amp;&amp; fastk[-1] &gt; fastd[-1]\n    puts \"StochRSI crossover adds confirmation\"\n  end\nelsif k &gt; 80 &amp;&amp; rsi_value &gt; 70\n  puts \"Both StochRSI and RSI overbought - Very Strong SELL signal\"\n  if fastk[-2] &gt; fastd[-2] &amp;&amp; fastk[-1] &lt; fastd[-1]\n    puts \"StochRSI crossover adds confirmation\"\n  end\nelsif k &lt; 20 &amp;&amp; rsi_value &gt; 50\n  puts \"StochRSI oversold but RSI neutral - Wait for RSI confirmation\"\nelsif k &gt; 80 &amp;&amp; rsi_value &lt; 50\n  puts \"StochRSI overbought but RSI neutral - Wait for RSI confirmation\"\nend\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#example-multiple-timeframe-stochrsi","title":"Example: Multiple Timeframe StochRSI","text":"<pre><code># Assuming you have different timeframe data\ndaily_prices = load_historical_prices('AAPL', timeframe: 'daily')\nhourly_prices = load_historical_prices('AAPL', timeframe: 'hourly')\n\ndaily_k, daily_d = SQA::TAI.stochrsi(daily_prices, period: 14)\nhourly_k, hourly_d = SQA::TAI.stochrsi(hourly_prices, period: 14)\n\nputs &lt;&lt;~OUTPUT\n  Daily StochRSI: K=#{daily_k.last.round(2)}, D=#{daily_d.last.round(2)}\n  Hourly StochRSI: K=#{hourly_k.last.round(2)}, D=#{hourly_d.last.round(2)}\nOUTPUT\n\n# Strongest signals when both timeframes align\nif daily_k.last &lt; 30 &amp;&amp; hourly_k.last &lt; 20\n  puts \"Multi-timeframe oversold alignment - Strong buy setup\"\n  if hourly_k[-2] &lt; hourly_d[-2] &amp;&amp; hourly_k[-1] &gt; hourly_d[-1]\n    puts \"Hourly crossover triggers entry\"\n  end\nelsif daily_k.last &gt; 70 &amp;&amp; hourly_k.last &gt; 80\n  puts \"Multi-timeframe overbought alignment - Strong sell setup\"\n  if hourly_k[-2] &gt; hourly_d[-2] &amp;&amp; hourly_k[-1] &lt; hourly_d[-1]\n    puts \"Hourly crossover triggers entry\"\n  end\nend\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/stochrsi/#1-overboughtoversold-extremes","title":"1. Overbought/Oversold Extremes","text":"<ul> <li>Buy when StochRSI drops below 20 (oversold)</li> <li>Sell when StochRSI rises above 80 (overbought)</li> <li>More sensitive than regular RSI</li> <li>Best in trending markets</li> </ul>"},{"location":"indicators/momentum/stochrsi/#2-fastkfastd-crossovers","title":"2. FastK/FastD Crossovers","text":"<ul> <li>Buy when FastK crosses above FastD (especially in oversold zone)</li> <li>Sell when FastK crosses below FastD (especially in overbought zone)</li> <li>Most reliable crossovers occur near extremes</li> <li>Confirm with price action</li> </ul>"},{"location":"indicators/momentum/stochrsi/#3-divergence-trading","title":"3. Divergence Trading","text":"<ul> <li>Bullish divergence: Price makes lower low, StochRSI makes higher low</li> <li>Bearish divergence: Price makes higher high, StochRSI makes lower high</li> <li>Powerful reversal signals</li> <li>Requires patience for setup</li> </ul>"},{"location":"indicators/momentum/stochrsi/#4-zero-line-rejection","title":"4. Zero-Line Rejection","text":"<ul> <li>Buy when StochRSI bounces off 0-10 level without full reversal</li> <li>Sell when StochRSI bounces off 90-100 level without full reversal</li> <li>Indicates strong momentum continuation</li> </ul>"},{"location":"indicators/momentum/stochrsi/#5-midline-cross","title":"5. Midline Cross","text":"<ul> <li>Buy when StochRSI crosses above 50 from below</li> <li>Sell when StochRSI crosses below 50 from above</li> <li>Indicates momentum shift</li> </ul>"},{"location":"indicators/momentum/stochrsi/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/momentum/stochrsi/#1-stochrsi-range-adjustment","title":"1. StochRSI Range Adjustment","text":"<p>Adjust overbought/oversold levels based on market conditions: - Strong bull market: Use 85/25 instead of 80/20 - Strong bear market: Use 75/15 instead of 80/20 - Volatile markets: Use 90/10 for fewer, stronger signals</p>"},{"location":"indicators/momentum/stochrsi/#2-multiple-confirmations","title":"2. Multiple Confirmations","text":"<p>Wait for multiple signals before entering: - StochRSI extreme + crossover - StochRSI extreme + divergence + crossover - StochRSI + RSI agreement</p>"},{"location":"indicators/momentum/stochrsi/#3-time-based-filters","title":"3. Time-Based Filters","text":"<p>Count bars in extreme zones: - 3+ bars oversold = stronger reversal signal - 3+ bars overbought = stronger reversal signal</p>"},{"location":"indicators/momentum/stochrsi/#stochrsi-vs-rsi-vs-stochastic","title":"StochRSI vs RSI vs Stochastic","text":"<pre><code>prices = load_historical_prices('META')\nhigh, low, close = load_ohlc_data('META')\n\n# Calculate all three\nstoch_rsi_k, stoch_rsi_d = SQA::TAI.stochrsi(prices, period: 14)\nrsi = SQA::TAI.rsi(prices, period: 14)\nstoch_k, stoch_d = SQA::TAI.stoch(high, low, close)\n\nputs &lt;&lt;~COMPARISON\n  === Indicator Comparison ===\n  StochRSI K: #{stoch_rsi_k.last.round(2)} (most sensitive)\n  RSI:         #{rsi.last.round(2)} (moderate)\n  Stochastic:  #{stoch_k.last.round(2)} (price-based)\n\n  StochRSI measures RSI momentum\n  RSI measures price momentum\n  Stochastic measures price position in range\nCOMPARISON\n\n# All three oversold = strongest buy signal\nif stoch_rsi_k.last &lt; 20 &amp;&amp; rsi.last &lt; 30 &amp;&amp; stoch_k.last &lt; 20\n  puts \"\\nAll three indicators oversold - MAXIMUM BUY SIGNAL\"\nelsif stoch_rsi_k.last &gt; 80 &amp;&amp; rsi.last &gt; 70 &amp;&amp; stoch_k.last &gt; 80\n  puts \"\\nAll three indicators overbought - MAXIMUM SELL SIGNAL\"\nend\n</code></pre>"},{"location":"indicators/momentum/stochrsi/#common-settings","title":"Common Settings","text":"Setting RSI Period FastK FastD Use Case Standard 14 5 3 Balanced approach Sensitive 14 3 3 Quick signals Smooth 14 7 5 Fewer false signals Long-term 21 8 5 Position trading"},{"location":"indicators/momentum/stochrsi/#advantages-and-limitations","title":"Advantages and Limitations","text":""},{"location":"indicators/momentum/stochrsi/#advantages","title":"Advantages","text":"<ul> <li>More sensitive than standard RSI</li> <li>Provides earlier signals</li> <li>Combines benefits of RSI and Stochastic</li> <li>Excellent for timing entries/exits</li> <li>Works well with trend filters</li> </ul>"},{"location":"indicators/momentum/stochrsi/#limitations","title":"Limitations","text":"<ul> <li>More prone to false signals</li> <li>Can whipsaw in ranging markets</li> <li>May signal reversals too early</li> <li>Requires confirmation from other indicators</li> <li>Not suitable as standalone indicator</li> </ul>"},{"location":"indicators/momentum/stochrsi/#best-practices","title":"Best Practices","text":"<ol> <li>Use with Trend Filter: Only take signals aligned with the major trend</li> <li>Wait for Extremes: Focus on signals in overbought (&gt;80) or oversold (&lt;20) zones</li> <li>Confirm with Crossovers: Wait for FastK/FastD crossover for stronger confirmation</li> <li>Check Multiple Timeframes: Align signals across timeframes</li> <li>Combine with Volume: Stronger signals when accompanied by volume confirmation</li> <li>Set Realistic Targets: StochRSI is for timing, not for predicting magnitude</li> <li>Use Stop Losses: Protect against false signals with appropriate stops</li> </ol>"},{"location":"indicators/momentum/stochrsi/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Base indicator for StochRSI calculation</li> <li>Stochastic - Original Stochastic formula</li> <li>MACD - Complementary momentum indicator</li> <li>MFI - Volume-weighted RSI variant</li> </ul>"},{"location":"indicators/momentum/stochrsi/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/trix/","title":"TRIX (Triple Exponential Average)","text":"<p>TRIX is a momentum oscillator that measures the 1-day rate of change of a triple-smoothed exponential moving average. The triple smoothing process filters out market noise and short-term fluctuations, making TRIX excellent for identifying significant trend changes with minimal whipsaws.</p>"},{"location":"indicators/momentum/trix/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02, 46.55, 47.03,\n          47.35, 47.28, 47.61, 48.12, 48.34, 48.21,\n          48.75, 48.90, 49.25, 49.50, 49.75, 50.00]\n\n# Calculate 30-period TRIX\ntrix = SQA::TAI.trix(prices, period: 30)\n\nputs \"Current TRIX: #{trix.last.round(6)}\"\n</code></pre>"},{"location":"indicators/momentum/trix/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 30 Number of periods for triple EMA calculation"},{"location":"indicators/momentum/trix/#returns","title":"Returns","text":"<p>Returns an array of TRIX values. Values are typically very small decimals (often shown as percentages by multiplying by 100). Due to triple smoothing, the first <code>period * 3</code> values will be <code>nil</code>.</p>"},{"location":"indicators/momentum/trix/#formula","title":"Formula","text":"<pre><code>Step 1: Single EMA = EMA(prices, period)\nStep 2: Double EMA = EMA(Single EMA, period)\nStep 3: Triple EMA = EMA(Double EMA, period)\nStep 4: TRIX = 1-day ROC of Triple EMA = ((Triple EMA today / Triple EMA yesterday) - 1) * 100\n</code></pre>"},{"location":"indicators/momentum/trix/#interpretation","title":"Interpretation","text":"TRIX Value Interpretation Positive Upward momentum - bullish Negative Downward momentum - bearish Zero crossover from below Buy signal Zero crossover from above Sell signal Increasing Momentum strengthening Decreasing Momentum weakening"},{"location":"indicators/momentum/trix/#typical-range","title":"Typical Range","text":"<p>TRIX values are unbounded but typically range between -0.5 and +0.5. In strong trends, values may exceed this range.</p>"},{"location":"indicators/momentum/trix/#example-trix-zero-line-crossovers","title":"Example: TRIX Zero-Line Crossovers","text":"<pre><code>prices = load_historical_prices('AAPL')\n\ntrix = SQA::TAI.trix(prices, period: 30)\n\n# Check for zero-line crossovers\nif trix[-2] &lt; 0 &amp;&amp; trix[-1] &gt; 0\n  puts \"TRIX Bullish Crossover - BUY signal\"\n  puts \"TRIX crossed above zero: #{trix[-1].round(6)}\"\n  puts \"Trend changing from bearish to bullish\"\nelsif trix[-2] &gt; 0 &amp;&amp; trix[-1] &lt; 0\n  puts \"TRIX Bearish Crossover - SELL signal\"\n  puts \"TRIX crossed below zero: #{trix[-1].round(6)}\"\n  puts \"Trend changing from bullish to bearish\"\nend\n\n# Current momentum state\nif trix.last &gt; 0\n  puts \"TRIX positive: Bullish momentum\"\nelse\n  puts \"TRIX negative: Bearish momentum\"\nend\n</code></pre>"},{"location":"indicators/momentum/trix/#example-trix-with-signal-line","title":"Example: TRIX with Signal Line","text":"<pre><code>prices = load_historical_prices('TSLA')\n\ntrix = SQA::TAI.trix(prices, period: 30)\n\n# Create 9-period signal line (EMA of TRIX)\nsignal = SQA::TAI.ema(trix.compact, period: 9)\n\n# Pad signal line to match TRIX length\nnil_count = trix.count(nil)\nsignal = [nil] * nil_count + signal\n\n# Check for TRIX/Signal crossovers\nif trix[-2] &lt; signal[-2] &amp;&amp; trix[-1] &gt; signal[-1]\n  puts \"TRIX crossed above Signal - BUY signal\"\n  puts \"TRIX: #{trix[-1].round(6)}, Signal: #{signal[-1].round(6)}\"\nelsif trix[-2] &gt; signal[-2] &amp;&amp; trix[-1] &lt; signal[-1]\n  puts \"TRIX crossed below Signal - SELL signal\"\n  puts \"TRIX: #{trix[-1].round(6)}, Signal: #{signal[-1].round(6)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/trix/#example-trix-divergence-detection","title":"Example: TRIX Divergence Detection","text":"<pre><code>prices = load_historical_prices('MSFT')\n\ntrix = SQA::TAI.trix(prices, period: 30)\n\n# Find recent highs in price and TRIX\nprice_high_1 = prices[-60..-30].max\nprice_high_2 = prices[-29..-1].max\n\ntrix_high_1_idx = prices[-60..-30].index(price_high_1) - 60\ntrix_high_2_idx = prices[-29..-1].index(price_high_2) - 29\n\ntrix_high_1 = trix[trix_high_1_idx]\ntrix_high_2 = trix[trix_high_2_idx]\n\n# Bearish divergence: price makes higher high, TRIX makes lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; trix_high_2 &lt; trix_high_1\n  puts \"Bearish Divergence detected!\"\n  puts \"Price higher high: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)}\"\n  puts \"TRIX lower high: #{trix_high_1.round(6)} -&gt; #{trix_high_2.round(6)}\"\n  puts \"Warning: Uptrend may be losing momentum\"\nend\n\n# Bullish divergence: price makes lower low, TRIX makes higher low\nprice_low_1 = prices[-60..-30].min\nprice_low_2 = prices[-29..-1].min\n\ntrix_low_1_idx = prices[-60..-30].index(price_low_1) - 60\ntrix_low_2_idx = prices[-29..-1].index(price_low_2) - 29\n\ntrix_low_1 = trix[trix_low_1_idx]\ntrix_low_2 = trix[trix_low_2_idx]\n\nif price_low_2 &lt; price_low_1 &amp;&amp; trix_low_2 &gt; trix_low_1\n  puts \"Bullish Divergence detected!\"\n  puts \"Price lower low: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)}\"\n  puts \"TRIX higher low: #{trix_low_1.round(6)} -&gt; #{trix_low_2.round(6)}\"\n  puts \"Potential trend reversal to the upside\"\nend\n</code></pre>"},{"location":"indicators/momentum/trix/#example-trix-momentum-strength","title":"Example: TRIX Momentum Strength","text":"<pre><code>prices = load_historical_prices('NVDA')\n\ntrix = SQA::TAI.trix(prices, period: 30)\n\n# Analyze TRIX momentum changes\nrecent_trix = trix.compact.last(10)\n\n# Check if momentum is accelerating\ntrix_changes = recent_trix.each_cons(2).map { |a, b| b - a }\n\nif trix.last &gt; 0 &amp;&amp; trix_changes.last(3).all? { |c| c &gt; 0 }\n  puts \"Bullish momentum accelerating\"\n  puts \"TRIX: #{trix.last.round(6)}\"\n  puts \"Last 3 changes: #{trix_changes.last(3).map { |c| c.round(6) }}\"\n  puts \"Strong uptrend in progress\"\nelsif trix.last &lt; 0 &amp;&amp; trix_changes.last(3).all? { |c| c &lt; 0 }\n  puts \"Bearish momentum accelerating\"\n  puts \"TRIX: #{trix.last.round(6)}\"\n  puts \"Last 3 changes: #{trix_changes.last(3).map { |c| c.round(6) }}\"\n  puts \"Strong downtrend in progress\"\nelsif trix.last &gt; 0 &amp;&amp; trix_changes.last(3).any? { |c| c &lt; 0 }\n  puts \"Bullish momentum weakening\"\n  puts \"Consider taking profits\"\nelsif trix.last &lt; 0 &amp;&amp; trix_changes.last(3).any? { |c| c &gt; 0 }\n  puts \"Bearish momentum weakening\"\n  puts \"Downtrend may be exhausting\"\nend\n</code></pre>"},{"location":"indicators/momentum/trix/#example-trix-triple-smoothed-trend-confirmation","title":"Example: TRIX Triple-Smoothed Trend Confirmation","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\n# Multiple TRIX periods for confirmation\ntrix_short = SQA::TAI.trix(prices, period: 15)  # More responsive\ntrix_medium = SQA::TAI.trix(prices, period: 30) # Standard\ntrix_long = SQA::TAI.trix(prices, period: 60)   # Less responsive\n\n# All three TRIX values positive = strong bullish trend\nif trix_short.last &gt; 0 &amp;&amp; trix_medium.last &gt; 0 &amp;&amp; trix_long.last &gt; 0\n  puts \"Triple TRIX Confirmation: STRONG BULLISH\"\n  puts \"Short (15): #{trix_short.last.round(6)}\"\n  puts \"Medium (30): #{trix_medium.last.round(6)}\"\n  puts \"Long (60): #{trix_long.last.round(6)}\"\n  puts \"All timeframes show positive momentum\"\nelsif trix_short.last &lt; 0 &amp;&amp; trix_medium.last &lt; 0 &amp;&amp; trix_long.last &lt; 0\n  puts \"Triple TRIX Confirmation: STRONG BEARISH\"\n  puts \"Short (15): #{trix_short.last.round(6)}\"\n  puts \"Medium (30): #{trix_medium.last.round(6)}\"\n  puts \"Long (60): #{trix_long.last.round(6)}\"\n  puts \"All timeframes show negative momentum\"\nelsif trix_short.last &gt; 0 &amp;&amp; trix_medium.last &gt; 0 &amp;&amp; trix_long.last &lt; 0\n  puts \"Early bullish momentum developing\"\n  puts \"Short and medium term positive, long term still negative\"\n  puts \"Monitor for long-term TRIX to turn positive\"\nend\n</code></pre>"},{"location":"indicators/momentum/trix/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/momentum/trix/#1-zero-line-crossover-primary-strategy","title":"1. Zero-Line Crossover (Primary Strategy)","text":"<ul> <li>Buy Signal: TRIX crosses above zero from below</li> <li>Sell Signal: TRIX crosses below zero from above</li> <li>Most reliable TRIX signals</li> <li>Minimal whipsaws due to triple smoothing</li> </ul>"},{"location":"indicators/momentum/trix/#2-signal-line-crossover","title":"2. Signal Line Crossover","text":"<ul> <li>Buy Signal: TRIX crosses above its signal line (typically 9-period EMA)</li> <li>Sell Signal: TRIX crosses below its signal line</li> <li>Earlier signals than zero-line crossovers</li> <li>More signals but also more false positives</li> </ul>"},{"location":"indicators/momentum/trix/#3-divergence-trading","title":"3. Divergence Trading","text":"<ul> <li>Bullish Divergence: Price makes lower low, TRIX makes higher low</li> <li>Bearish Divergence: Price makes higher high, TRIX makes lower high</li> <li>Powerful reversal signals</li> <li>Works best at trend extremes</li> </ul>"},{"location":"indicators/momentum/trix/#4-directional-filter","title":"4. Directional Filter","text":"<ul> <li>Long Positions Only: When TRIX &gt; 0</li> <li>Short Positions Only: When TRIX &lt; 0</li> <li>Use TRIX as trend filter for other strategies</li> <li>Keeps you on the right side of the trend</li> </ul>"},{"location":"indicators/momentum/trix/#trix-settings","title":"TRIX Settings","text":""},{"location":"indicators/momentum/trix/#short-term-15-periods","title":"Short-term (15 periods)","text":"<ul> <li>More sensitive to price changes</li> <li>More signals and crossovers</li> <li>Better for swing trading</li> <li>Higher risk of false signals</li> </ul>"},{"location":"indicators/momentum/trix/#standard-30-periods","title":"Standard (30 periods)","text":"<ul> <li>Balance of responsiveness and reliability</li> <li>Most commonly used setting</li> <li>Good for medium-term trends</li> <li>Developed by Jack Hutson</li> </ul>"},{"location":"indicators/momentum/trix/#long-term-60-periods","title":"Long-term (60 periods)","text":"<ul> <li>Very smooth, minimal whipsaws</li> <li>Fewer but more reliable signals</li> <li>Best for identifying major trends</li> <li>Lags during rapid trend changes</li> </ul>"},{"location":"indicators/momentum/trix/#advantages-of-trix","title":"Advantages of TRIX","text":"<ol> <li>Noise Filtering: Triple smoothing eliminates most market noise</li> <li>Minimal Whipsaws: Fewer false signals than single or double smoothed indicators</li> <li>Clear Signals: Zero-line crossovers are unambiguous</li> <li>Leading Indicator: Can signal trend changes before price</li> <li>Versatile: Works across different timeframes and markets</li> </ol>"},{"location":"indicators/momentum/trix/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<pre><code>prices = load_historical_prices('AAPL')\n\n# TRIX for smoothed momentum\ntrix = SQA::TAI.trix(prices, period: 30)\n\n# RSI for overbought/oversold\nrsi = SQA::TAI.rsi(prices, period: 14)\n\n# Volume confirmation\nvolumes = load_historical_volumes('AAPL')\nvolume_sma = SQA::TAI.sma(volumes, period: 20)\n\ncurrent_price = prices.last\ncurrent_volume = volumes.last\n\n# Strong buy when TRIX bullish with volume confirmation\nif trix[-2] &lt; 0 &amp;&amp; trix[-1] &gt; 0 &amp;&amp;        # TRIX zero crossover\n   rsi.last &lt; 70 &amp;&amp;                        # Not overbought\n   current_volume &gt; volume_sma.last * 1.2  # Above average volume\n  puts \"Strong BUY signal - TRIX crossover with volume\"\n  puts \"TRIX: #{trix.last.round(6)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Volume: #{(current_volume / volume_sma.last * 100).round(0)}% of average\"\nend\n</code></pre>"},{"location":"indicators/momentum/trix/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Lag: Triple smoothing creates significant lag - TRIX is not for scalping</li> <li>Period Selection: Too short = more noise, too long = excessive lag</li> <li>Range-Bound Markets: TRIX works best in trending markets</li> <li>Confirmation: Always use with price action or other indicators</li> <li>Early Exits: Don't exit on first sign of TRIX weakening in strong trends</li> </ol>"},{"location":"indicators/momentum/trix/#trix-vs-other-momentum-indicators","title":"TRIX vs Other Momentum Indicators","text":"Feature TRIX MACD RSI Smoothing Triple Double Single Lag High Medium Low Whipsaws Very Few Some Many Range Unbounded Unbounded 0-100 Best For Trend following Momentum shifts Extremes"},{"location":"indicators/momentum/trix/#related-indicators","title":"Related Indicators","text":"<ul> <li>MACD - Double-smoothed momentum indicator</li> <li>EMA - Used in TRIX calculation</li> <li>ROC - Rate of change (single smoothing)</li> <li>PPO - Percentage price oscillator</li> </ul>"},{"location":"indicators/momentum/trix/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Momentum Trading Example</li> </ul>"},{"location":"indicators/momentum/ultosc/","title":"Ultimate Oscillator (ULTOSC)","text":"<p>Combines short, intermediate, and long-term momentum.</p>"},{"location":"indicators/momentum/ultosc/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high values <code>low</code> Array Yes - Array of low values <code>close</code> Array Yes - Array of close values <code>period1</code> Integer No 7 Period1 <code>period2</code> Integer No 14 Period2 <code>period3</code> Integer No 28 Period3"},{"location":"indicators/momentum/ultosc/#returns","title":"Returns","text":"<p>Returns an array of indicator values.</p>"},{"location":"indicators/momentum/ultosc/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example usage\nresult = SQA::TAI.ultosc(prices)\n\nputs \"Current value: #{result.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/ultosc/#interpretation","title":"Interpretation","text":"<p>Please refer to technical analysis resources for interpretation guidelines for this indicator.</p>"},{"location":"indicators/momentum/ultosc/#related-indicators","title":"Related Indicators","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> </ul>"},{"location":"indicators/momentum/ultosc/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> </ul>"},{"location":"indicators/momentum/willr/","title":"Williams %R (WILLR)","text":"<p>Williams %R is a momentum indicator that measures overbought and oversold levels. It compares the closing price to the high-low range over a specific period, providing values between 0 and -100.</p>"},{"location":"indicators/momentum/willr/#formula","title":"Formula","text":"<p>%R = (Highest High - Close) / (Highest High - Lowest Low) * -100</p>"},{"location":"indicators/momentum/willr/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of close prices <code>period</code> Integer No 14 Lookback period"},{"location":"indicators/momentum/willr/#returns","title":"Returns","text":"<p>Returns an array of Williams %R values ranging from 0 to -100.</p>"},{"location":"indicators/momentum/willr/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32, 49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45]\n\nwillr = SQA::TAI.willr(high, low, close, period: 14)\n\nputs \"Current Williams %R: #{willr.last.round(2)}\"\n</code></pre>"},{"location":"indicators/momentum/willr/#interpretation","title":"Interpretation","text":"Williams %R Interpretation 0 to -20 Overbought -20 to -80 Normal trading range -80 to -100 Oversold"},{"location":"indicators/momentum/willr/#example-basic-trading-signals","title":"Example: Basic Trading Signals","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\nwillr = SQA::TAI.willr(high, low, close, period: 14)\n\ncurrent = willr.last\n\nif current &gt; -20\n  puts \"OVERBOUGHT: Williams %R at #{current.round(2)}\"\nelsif current &lt; -80\n  puts \"OVERSOLD: Williams %R at #{current.round(2)}\"\nelse\n  puts \"NEUTRAL: Williams %R at #{current.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/momentum/willr/#common-settings","title":"Common Settings","text":"Period Use Case 10 Short-term trading 14 Standard (most common) 20 Longer-term analysis"},{"location":"indicators/momentum/willr/#related-indicators","title":"Related Indicators","text":"<ul> <li>STOCH - Stochastic Oscillator</li> <li>RSI - Relative Strength Index</li> <li>CCI - Commodity Channel Index</li> </ul>"},{"location":"indicators/momentum/willr/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Momentum Indicators Overview</li> </ul>"},{"location":"indicators/overlap/","title":"Overlap Studies","text":"<p>Overlap studies are indicators that are plotted directly on the price chart, \"overlaying\" the price action. These include moving averages, bands, and envelopes that help identify trends and support/resistance levels.</p>"},{"location":"indicators/overlap/#available-overlap-indicators","title":"Available Overlap Indicators","text":""},{"location":"indicators/overlap/#moving-averages","title":"Moving Averages","text":"<ul> <li>Simple Moving Average (SMA) - Arithmetic average of prices</li> <li>Exponential Moving Average (EMA) - Weighted average favoring recent prices</li> <li>Weighted Moving Average (WMA) - Linearly weighted average</li> <li>Double Exponential Moving Average (DEMA) - Reduced lag EMA</li> <li>Triple Exponential Moving Average (TEMA) - Further reduced lag</li> <li>Triangular Moving Average (TRIMA) - Smoothed double average</li> <li>Kaufman Adaptive Moving Average (KAMA) - Adjusts to volatility</li> <li>T3 Moving Average (T3) - Smooth moving average</li> </ul>"},{"location":"indicators/overlap/#bands-and-envelopes","title":"Bands and Envelopes","text":"<ul> <li>Bollinger Bands (BBANDS) - Volatility-based bands</li> <li>Adaptive Bollinger Bands (ACCBANDS) - Dynamic bands</li> </ul>"},{"location":"indicators/overlap/#other-overlays","title":"Other Overlays","text":"<ul> <li>Moving Average (MA) - Configurable MA type</li> <li>VWAP - Volume-weighted average price (reference)</li> </ul>"},{"location":"indicators/overlap/#common-usage","title":"Common Usage","text":"<pre><code>require 'sqa/tai'\n\nclose = [45.0, 46.0, 45.5, 47.0, 46.5, 48.0, 47.5, 49.0, 48.5, 50.0]\n\n# Simple Moving Average\nsma = SQA::TAI.sma(close, period: 20)\n\n# Exponential Moving Average\nema = SQA::TAI.ema(close, period: 20)\n\n# Bollinger Bands\nupper, middle, lower = SQA::TAI.bbands(close, period: 20)\n</code></pre>"},{"location":"indicators/overlap/#see-also","title":"See Also","text":"<ul> <li>All Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/overlap/accbands/","title":"ACCBANDS (Acceleration Bands)","text":""},{"location":"indicators/overlap/accbands/#overview","title":"Overview","text":"<p>Acceleration Bands are a sophisticated volatility-based indicator that creates dynamic price channels similar to Bollinger Bands but with a fundamentally different calculation methodology. Developed to identify breakouts and trend acceleration, ACCBANDS use high and low prices with acceleration factors rather than statistical standard deviation. This approach makes them particularly responsive to momentum shifts and trend acceleration, providing earlier signals for potential breakouts and trend changes. The bands expand and contract based on price volatility and momentum, offering traders valuable insights into market acceleration patterns.</p>"},{"location":"indicators/overlap/accbands/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>high</code> Array Required Array of high price values <code>low</code> Array Required Array of low price values <code>close</code> Array Required Array of close price values <code>period</code> Integer 20 Number of periods for calculation"},{"location":"indicators/overlap/accbands/#parameter-details","title":"Parameter Details","text":"<p>high - Array of high prices for each period - Used to calculate upper band with acceleration factor - More responsive than using only close prices - Captures full price range for volatility assessment</p> <p>low - Array of low prices for each period - Used to calculate lower band with acceleration factor - Complements high prices for complete range analysis - Essential for accurate band placement</p> <p>close - Array of closing prices for each period - Used to calculate middle band (SMA) - Standard reference point for band distance - Typical price level for comparison</p> <p>period (time_period) - Default is 20 periods, standard for most applications - Common periods:   - 10 periods: Short-term, day trading   - 20 periods: Standard setting (most common)   - 50 periods: Long-term trends   - 100+ periods: Major trend identification - Shorter periods = more responsive but noisier - Longer periods = smoother but more lag</p>"},{"location":"indicators/overlap/accbands/#usage","title":"Usage","text":""},{"location":"indicators/overlap/accbands/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh_prices = [46.08, 46.41, 46.57, 46.50, 46.75, 47.00,\n               47.25, 47.50, 47.75, 48.00, 48.25, 48.50,\n               48.75, 49.00, 49.25, 49.50, 49.75, 50.00,\n               50.25, 50.50, 50.75, 51.00]\n\nlow_prices = [44.50, 44.75, 45.00, 45.25, 45.50, 45.75,\n              46.00, 46.25, 46.50, 46.75, 47.00, 47.25,\n              47.50, 47.75, 48.00, 48.25, 48.50, 48.75,\n              49.00, 49.25, 49.50, 49.75]\n\nclose_prices = [45.50, 45.75, 46.00, 46.25, 46.50, 46.75,\n                47.00, 47.25, 47.50, 47.75, 48.00, 48.25,\n                48.50, 48.75, 49.00, 49.25, 49.50, 49.75,\n                50.00, 50.25, 50.50, 50.75]\n\n# Calculate Acceleration Bands\nupper, middle, lower = SQA::TAI.accbands(high_prices, low_prices, close_prices, period: 20)\n\nputs \"Upper Band: #{upper.last.round(2)}\"\nputs \"Middle Band: #{middle.last.round(2)}\"\nputs \"Lower Band: #{lower.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/accbands/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/accbands/#what-it-measures","title":"What It Measures","text":"<p>ACCBANDS measures price acceleration and volatility:</p> <ul> <li>Trend Acceleration: Identifies when price momentum is increasing</li> <li>Breakout Potential: Signals when price may break out of normal range</li> <li>Volatility Changes: Band width indicates changing market volatility</li> <li>Support/Resistance Levels: Dynamic levels based on price acceleration</li> </ul> <p>ACCBANDS solves the problem of detecting trend acceleration early. Unlike Bollinger Bands which use statistical measures, ACCBANDS uses the natural price range (high-low) with acceleration factors, making them more responsive to momentum shifts.</p>"},{"location":"indicators/overlap/accbands/#calculation-method","title":"Calculation Method","text":"<p>ACCBANDS uses high/low prices with acceleration factors:</p> <ol> <li>Calculate SMA: Simple moving average of close prices (middle band)</li> <li>Apply Acceleration Factor: Adjust high prices for upper band</li> <li>Apply Acceleration Factor: Adjust low prices for lower band</li> <li>Result: Three bands that expand/contract with acceleration</li> </ol>"},{"location":"indicators/overlap/accbands/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (follows price range)</li> <li>Type: Overlay indicator with three bands</li> <li>Lag: Medium lag, more responsive than Bollinger Bands</li> <li>Best Used: Trending markets, breakout detection, acceleration analysis</li> </ul>"},{"location":"indicators/overlap/accbands/#returns","title":"Returns","text":"<p>Returns three arrays: 1. Upper Band - High prices adjusted by acceleration factor 2. Middle Band - Simple moving average of close prices 3. Lower Band - Low prices adjusted by acceleration factor</p> <p>The first <code>period - 1</code> values will be <code>nil</code>.</p>"},{"location":"indicators/overlap/accbands/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/accbands/#value-ranges","title":"Value Ranges","text":"<p>ACCBANDS provide dynamic price channels:</p> <ul> <li>Wide Bands: High volatility, strong acceleration</li> <li>Narrow Bands: Low volatility, potential breakout setup</li> <li>Expanding Bands: Increasing volatility and momentum</li> <li>Contracting Bands: Decreasing volatility, consolidation</li> </ul>"},{"location":"indicators/overlap/accbands/#key-levels","title":"Key Levels","text":"<ul> <li>Price Touches Upper Band: Potential acceleration in uptrend</li> <li>Price Touches Lower Band: Potential acceleration in downtrend</li> <li>Price Within Bands: Normal price action</li> <li>Price Outside Bands: Strong momentum, breakout signal</li> </ul>"},{"location":"indicators/overlap/accbands/#signal-interpretation","title":"Signal Interpretation","text":"<ol> <li>Trend Direction</li> <li>Price walking upper band = strong uptrend with acceleration</li> <li>Price walking lower band = strong downtrend with acceleration</li> <li> <p>Price between bands = normal trading range</p> </li> <li> <p>Momentum Changes</p> </li> <li>Band expansion = increasing volatility, momentum building</li> <li>Band contraction = decreasing volatility, potential squeeze</li> <li> <p>Band width changes = volatility regime shifts</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price returns from upper band to middle = potential pullback</li> <li>Price returns from lower band to middle = potential bounce</li> <li>Confirm with volume and other indicators</li> </ol>"},{"location":"indicators/overlap/accbands/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/accbands/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price closes above upper band, indicating upward acceleration</li> <li>Confirmation Signal: Increasing volume on the breakout</li> <li>Entry Criteria: Wait for slight pullback toward upper band for entry</li> </ol> <p>Example Scenario: <pre><code>When price closes above upper ACCBAND with volume confirmation,\nenter long on pullback to upper band with stop at middle band.\nTarget based on previous resistance or ATR multiples.\n</code></pre></p>"},{"location":"indicators/overlap/accbands/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price closes below lower band, indicating downward acceleration</li> <li>Confirmation Signal: Increasing volume on the breakdown</li> <li>Exit Criteria: Exit longs when price crosses below middle band</li> </ol> <p>Example Scenario: <pre><code>When price closes below lower ACCBAND with volume confirmation,\nexit long positions or enter short with stop above middle band.\n</code></pre></p>"},{"location":"indicators/overlap/accbands/#interpretation_1","title":"Interpretation","text":"Signal Interpretation Price touches upper band Potential acceleration in uptrend, breakout signal Price touches lower band Potential acceleration in downtrend, breakdown signal Price within bands Normal price action, no acceleration Band expansion Increasing volatility and momentum Band contraction Decreasing volatility, potential consolidation"},{"location":"indicators/overlap/accbands/#example-breakout-detection","title":"Example: Breakout Detection","text":"<pre><code>high = load_historical_data('AAPL', field: :high)\nlow = load_historical_data('AAPL', field: :low)\nclose = load_historical_data('AAPL', field: :close)\n\nupper, middle, lower = SQA::TAI.accbands(high, low, close, period: 20)\n\ncurrent_close = close.last\ncurrent_high = high.last\ncurrent_low = low.last\n\n# Detect breakouts\nif current_close &gt; upper.last\n  puts \"Bullish Breakout: Price accelerating above upper band\"\n  puts \"Entry: #{current_close.round(2)}\"\n  puts \"Stop: #{middle.last.round(2)}\"\nelsif current_close &lt; lower.last\n  puts \"Bearish Breakdown: Price accelerating below lower band\"\n  puts \"Entry: #{current_close.round(2)}\"\n  puts \"Stop: #{middle.last.round(2)}\"\nend\n\n# Calculate band width for volatility assessment\nbandwidth = ((upper.last - lower.last) / middle.last * 100).round(2)\nputs \"Current Bandwidth: #{bandwidth}%\"\n</code></pre>"},{"location":"indicators/overlap/accbands/#example-trend-acceleration-strategy","title":"Example: Trend Acceleration Strategy","text":"<pre><code>high = load_historical_data('TSLA', field: :high)\nlow = load_historical_data('TSLA', field: :low)\nclose = load_historical_data('TSLA', field: :close)\n\nupper, middle, lower = SQA::TAI.accbands(high, low, close, period: 20)\n\n# Look at recent price action\nrecent_closes = close[-5..-1]\nrecent_uppers = upper[-5..-1].compact\nrecent_lowers = lower[-5..-1].compact\n\n# Count touches of bands\nupper_touches = recent_closes.zip(recent_uppers).count { |c, u| c &gt;= u }\nlower_touches = recent_closes.zip(recent_lowers).count { |c, l| c &lt;= l }\n\nif upper_touches &gt;= 3\n  puts \"Strong Uptrend: Multiple upper band touches\"\n  puts \"Trend is accelerating - consider trailing stop\"\nelsif lower_touches &gt;= 3\n  puts \"Strong Downtrend: Multiple lower band touches\"\n  puts \"Downward acceleration - avoid catching falling knife\"\nend\n\n# Check for mean reversion opportunity\nif close.last &lt; lower.last &amp;&amp; close[-2] &gt; lower[-2]\n  puts \"Potential Mean Reversion: First touch of lower band\"\n  puts \"Target: Middle band at #{middle.last.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/overlap/accbands/#example-comparing-with-bollinger-bands","title":"Example: Comparing with Bollinger Bands","text":"<pre><code>high = load_historical_data('MSFT', field: :high)\nlow = load_historical_data('MSFT', field: :low)\nclose = load_historical_data('MSFT', field: :close)\n\n# Calculate both band types\nacc_upper, acc_middle, acc_lower = SQA::TAI.accbands(high, low, close, period: 20)\nbb_upper, bb_middle, bb_lower = SQA::TAI.bbands(close, period: 20)\n\n# Compare band widths\nacc_width = ((acc_upper.last - acc_lower.last) / acc_middle.last * 100).round(2)\nbb_width = ((bb_upper.last - bb_lower.last) / bb_middle.last * 100).round(2)\n\nputs \"Acceleration Bands Width: #{acc_width}%\"\nputs \"Bollinger Bands Width: #{bb_width}%\"\n\n# Acceleration Bands typically show earlier expansion\nif acc_width &gt; bb_width * 1.1\n  puts \"ACCBANDS showing early volatility expansion\"\n  puts \"Momentum may be building\"\nelsif bb_width &gt; acc_width * 1.1\n  puts \"BBANDS wider - statistical volatility higher\"\n  puts \"Price action may be more erratic\"\nend\n\n# Check for convergence/divergence signals\nif close.last &gt; acc_upper.last &amp;&amp; close.last &gt; bb_upper.last\n  puts \"Strong Breakout: Above both band types\"\n  puts \"High conviction signal\"\nelsif close.last &gt; acc_upper.last &amp;&amp; close.last &lt; bb_upper.last\n  puts \"Early Momentum: ACCBANDS breakout first\"\n  puts \"Watch for BBANDS confirmation\"\nend\n</code></pre>"},{"location":"indicators/overlap/accbands/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/accbands/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When ACCBANDS works best: - Trending markets: Excellent for identifying and riding strong trends - Breakout trading: Early detection of momentum shifts and breakouts - Volatility analysis: Understanding market acceleration patterns - Momentum strategies: Combining with momentum indicators for confirmation</p>"},{"location":"indicators/overlap/accbands/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Use ADX to confirm trend strength when ACCBANDS shows breakout - Combine with moving averages for multi-confirmation signals</p> <p>With Volume Indicators: - Confirm ACCBANDS signals with volume spikes for higher probability - Use OBV to validate acceleration detected by bands</p> <p>With Other Oscillators: - RSI helps identify overbought/oversold at band extremes - MACD provides momentum confirmation for ACCBANDS breakouts - ATR helps set stop-loss distances based on volatility</p>"},{"location":"indicators/overlap/accbands/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li>False Breakouts: Use volume confirmation to filter false signals</li> <li>Ranging Markets: ACCBANDS generates many whipsaws in choppy markets</li> <li>Over-trading: Wait for clear breakouts beyond bands, not just touches</li> <li>Ignoring Context: Consider overall market structure and support/resistance</li> </ol>"},{"location":"indicators/overlap/accbands/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading): 10 period ACCBANDS for active signals</li> <li>Medium-term trading (swing trading): 20 period ACCBANDS (standard)</li> <li>Long-term trading (position trading): 50 period ACCBANDS for major trends</li> <li>Backtesting: Test different periods but 20 is optimal for most applications</li> </ul>"},{"location":"indicators/overlap/accbands/#practical-example","title":"Practical Example","text":"<p>See the comprehensive examples above demonstrating: - ACCBANDS breakout detection with entry/exit points - Trend acceleration strategies with band walking - Comparison with Bollinger Bands - Volume confirmation techniques</p>"},{"location":"indicators/overlap/accbands/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/overlap/accbands/#1-acceleration-breakout","title":"1. Acceleration Breakout","text":"<ul> <li>Enter when price closes above upper band</li> <li>Confirms momentum acceleration</li> <li>Set stop at middle band</li> <li>Target previous swing highs</li> </ul>"},{"location":"indicators/overlap/accbands/#2-band-walk-strategy","title":"2. Band Walk Strategy","text":"<ul> <li>Price walking along upper band = strong uptrend</li> <li>Price walking along lower band = strong downtrend</li> <li>Stay with trend until band crosses back</li> </ul>"},{"location":"indicators/overlap/accbands/#3-squeeze-and-expansion","title":"3. Squeeze and Expansion","text":"<ul> <li>Narrow bands indicate low volatility</li> <li>Wait for expansion and breakout</li> <li>Direction of expansion signals trend</li> </ul>"},{"location":"indicators/overlap/accbands/#4-false-breakout-filter","title":"4. False Breakout Filter","text":"<ul> <li>Use with volume indicators</li> <li>Require multiple period closes beyond bands</li> <li>Avoid whipsaws in ranging markets</li> </ul>"},{"location":"indicators/overlap/accbands/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/accbands/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use ACCBANDS across multiple timeframes: - Higher timeframe bands for overall trend context - Lower timeframe bands for precise entry timing - Trade only when breakouts align across timeframes</p>"},{"location":"indicators/overlap/accbands/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>ACCBANDS behavior in different conditions: - Trending markets: Bands walk with price, clear signals - Ranging markets: Many false breakouts, use filters - High volatility: Wide bands, larger stops needed - Low volatility: Narrow bands, potential squeeze setup</p>"},{"location":"indicators/overlap/accbands/#statistical-validation","title":"Statistical Validation","text":"<p>ACCBANDS reliability metrics: - Most reliable with volume confirmation (70-80% success) - Less reliable in ranging markets (40-50% success) - Band walking strategies have high win rate in trends - Breakout signals improve with multiple timeframe confirmation</p>"},{"location":"indicators/overlap/accbands/#references","title":"References","text":"<ul> <li>Price, K. \"Acceleration Bands\" Technical Analysis of Stocks &amp; Commodities</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\"</li> <li>Bollinger, John. \"Bollinger on Bollinger Bands\"</li> </ul>"},{"location":"indicators/overlap/accbands/#common-settings","title":"Common Settings","text":"Period Use Case 10 Short-term trading, day trading 20 Standard setting (most common) 50 Long-term trends, position trading 100 Major trend identification"},{"location":"indicators/overlap/accbands/#differences-from-bollinger-bands","title":"Differences from Bollinger Bands","text":"Feature Acceleration Bands Bollinger Bands Calculation Uses high/low with acceleration factor Uses standard deviation Sensitivity More responsive to momentum More responsive to volatility Best Use Trend acceleration, breakouts Volatility, mean reversion Band Width Based on price range Based on statistical deviation"},{"location":"indicators/overlap/accbands/#related-indicators","title":"Related Indicators","text":"<ul> <li>Bollinger Bands (BBANDS) - Similar volatility bands</li> <li>Keltner Channels - ATR-based bands</li> <li>ATR - Volatility measurement</li> <li>ADX - Trend strength confirmation</li> </ul>"},{"location":"indicators/overlap/accbands/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Volatility Analysis Example</li> </ul>"},{"location":"indicators/overlap/bbands/","title":"BBANDS (Bollinger Bands)","text":""},{"location":"indicators/overlap/bbands/#overview","title":"Overview","text":"<p>Bollinger Bands are one of the most widely used volatility indicators in technical analysis, developed by John Bollinger in the 1980s. The indicator consists of three bands: a middle band (typically a simple moving average) and upper/lower bands that are calculated using standard deviations from the middle band. These bands expand during volatile periods and contract during less volatile periods, providing traders with dynamic support and resistance levels while also highlighting overbought and oversold conditions.</p>"},{"location":"indicators/overlap/bbands/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 5 Number of periods for middle band moving average <code>nbdev_up</code> Float 2.0 Number of standard deviations for upper band <code>nbdev_down</code> Float 2.0 Number of standard deviations for lower band <code>ma_type</code> Integer 0 Moving average type (0=SMA, 1=EMA, etc.)"},{"location":"indicators/overlap/bbands/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard analysis - Can also use other price types (high, low, typical price) for specialized applications - Requires at least <code>period</code> number of data points for calculation - More historical data provides better context for band analysis</p> <p>period (time_period) - Standard setting is 20 periods (Bollinger's original recommendation) - Shorter periods (10-15) create more sensitive bands with more signals - Longer periods (30-50) create smoother bands with fewer but more reliable signals - Recommended ranges:   - Day trading: 10-15 periods for responsiveness   - Swing trading: 20 periods (standard)   - Position trading: 30-50 periods for major trends</p> <p>nbdev_up / nbdev_down - Standard deviation multiplier controls band width - Default 2.0 captures approximately 95% of price action statistically - Lower values (1.5) create tighter bands with more signals - Higher values (2.5-3.0) create wider bands with fewer signals - Asymmetric bands (different up/down values) can be used for skewed analysis</p> <p>ma_type - 0 (SMA) is the standard and most common setting - Can use other MA types for different characteristics - EMA (1) creates more responsive bands - Most traders stick with SMA (0) for consistency</p>"},{"location":"indicators/overlap/bbands/#usage","title":"Usage","text":""},{"location":"indicators/overlap/bbands/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02]\n\n# Calculate Bollinger Bands with default settings\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\nputs \"Upper Band: #{upper.last.round(2)}\"\nputs \"Middle Band: #{middle.last.round(2)}\"\nputs \"Lower Band: #{lower.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/bbands/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Tighter bands for more signals (1.5 standard deviations)\nupper, middle, lower = SQA::TAI.bbands(\n  prices,\n  period: 20,\n  nbdev_up: 1.5,\n  nbdev_down: 1.5\n)\n\n# Asymmetric bands for skewed analysis\nupper, middle, lower = SQA::TAI.bbands(\n  prices,\n  period: 20,\n  nbdev_up: 3.0,    # Wider upper band\n  nbdev_down: 2.0   # Standard lower band\n)\n</code></pre>"},{"location":"indicators/overlap/bbands/#multiple-output-values","title":"Multiple Output Values","text":"<pre><code># Bollinger Bands return three arrays\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20)\n\n# Calculate %B (price position within bands)\ncurrent_price = prices.last\npercent_b = ((current_price - lower.last) / (upper.last - lower.last)) * 100\n\nputs \"Upper: #{upper.last.round(2)}\"\nputs \"Middle: #{middle.last.round(2)}\"\nputs \"Lower: #{lower.last.round(2)}\"\nputs \"%B: #{percent_b.round(2)}%\"\n</code></pre>"},{"location":"indicators/overlap/bbands/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/bbands/#what-it-measures","title":"What It Measures","text":"<p>Bollinger Bands measure price volatility and provide dynamic support and resistance levels:</p> <ul> <li>Volatility: Band width expands during volatile periods and contracts during calm periods</li> <li>Relative Price Position: Shows whether price is trading at extremes relative to recent history</li> <li>Trend Strength: Band direction and slope indicate trend momentum</li> <li>Mean Reversion Potential: Distance from middle band suggests overbought/oversold conditions</li> </ul> <p>Bollinger Bands answer the question: \"How far has price moved from its average, and is that movement sustainable?\"</p>"},{"location":"indicators/overlap/bbands/#calculation-method","title":"Calculation Method","text":"<p>Bollinger Bands are calculated using statistical measures:</p> <ol> <li>Calculate Middle Band: Compute simple moving average of closing prices over period</li> <li>Calculate Standard Deviation: Measure price dispersion from the middle band</li> <li>Calculate Upper Band: Add (standard deviation \u00d7 nbdev_up) to middle band</li> <li>Calculate Lower Band: Subtract (standard deviation \u00d7 nbdev_down) from middle band</li> <li>Bands Adapt: Width automatically adjusts based on market volatility</li> </ol> <p>Formula: <pre><code>Middle Band = SMA(close, period)\nStandard Deviation = STDEV(close, period)\nUpper Band = Middle Band + (nbdev_up \u00d7 Standard Deviation)\nLower Band = Middle Band - (nbdev_down \u00d7 Standard Deviation)\n\nAdditional Metrics:\nBandwidth = (Upper Band - Lower Band) / Middle Band \u00d7 100\n%B = (Price - Lower Band) / (Upper Band - Lower Band) \u00d7 100\n</code></pre></p>"},{"location":"indicators/overlap/bbands/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Bands are unbounded but contain ~95% of price action with 2.0 standard deviations</li> <li>Type: Volatility envelope and momentum oscillator</li> <li>Lag: Moderate (based on moving average period)</li> <li>Best Used: Ranging markets, volatility breakouts, mean reversion strategies</li> <li>Limitations: Can remain expanded/contracted for extended periods in strong trends</li> </ul>"},{"location":"indicators/overlap/bbands/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/bbands/#value-ranges","title":"Value Ranges","text":"<p>Specific guidance on what different positions mean:</p> <ul> <li>Price at Upper Band: Indicates strong upward momentum, potential overbought condition. In trending markets, can signal continuation rather than reversal.</li> <li>Price at Middle Band: Represents fair value or equilibrium. Often acts as support in uptrends or resistance in downtrends.</li> <li>Price at Lower Band: Indicates strong downward momentum, potential oversold condition. In downtrends, can signal continuation rather than reversal.</li> <li>Price Outside Bands: Rare occurrence (5% statistically) suggesting extreme conditions. May indicate strong trend or impending reversal.</li> </ul>"},{"location":"indicators/overlap/bbands/#key-levels","title":"Key Levels","text":"<ul> <li>Upper Band: Acts as dynamic resistance. Price touching or exceeding upper band suggests overbought conditions or strong bullish momentum.</li> <li>Middle Band (20 SMA): Primary support/resistance level. Price crossing middle band often signals trend changes.</li> <li>Lower Band: Acts as dynamic support. Price touching or falling below lower band suggests oversold conditions or strong bearish momentum.</li> <li>Band Width: Measures volatility. Narrow bands (squeeze) often precede significant moves. Wide bands indicate high volatility.</li> </ul>"},{"location":"indicators/overlap/bbands/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read Bollinger Bands signals:</p> <ol> <li>Trend Direction</li> <li>Price consistently above middle band: Uptrend</li> <li>Price consistently below middle band: Downtrend</li> <li> <p>Price oscillating around middle band: Range-bound market</p> </li> <li> <p>Volatility Changes</p> </li> <li>Band squeeze (narrow bands): Low volatility, consolidation, big move brewing</li> <li>Band expansion: High volatility, strong directional move occurring</li> <li> <p>Band contraction after expansion: Volatility decreasing, potential consolidation</p> </li> <li> <p>Reversal Signals</p> </li> <li>W-pattern at lower band: Bullish reversal (lower low outside band, higher low inside band)</li> <li>M-pattern at upper band: Bearish reversal (higher high outside band, lower high inside band)</li> <li>Band walk: Price walking along upper band = strong uptrend; along lower band = strong downtrend</li> </ol>"},{"location":"indicators/overlap/bbands/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/bbands/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price touches or penetrates lower band then closes back inside</li> <li>Suggests oversold condition ending</li> <li> <p>Most reliable in ranging markets</p> </li> <li> <p>Confirmation Signal: Price crosses above middle band from below</p> </li> <li>Indicates momentum shift from bearish to bullish</li> <li> <p>Works as trend-following entry</p> </li> <li> <p>W-Pattern: Price makes lower low below lower band, then higher low inside band</p> </li> <li>Classic bullish reversal pattern</li> <li>Strongest when combined with RSI divergence</li> </ol> <p>Example Scenario: <pre><code>When price drops below lower band (oversold), then closes back inside\nthe bands, consider a long position. Confirm with:\n- Volume declining during selloff\n- RSI showing bullish divergence\n- Support level nearby\n- Set stop loss below recent low\n- Target: Middle band or upper band\n</code></pre></p>"},{"location":"indicators/overlap/bbands/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price touches or penetrates upper band then closes back inside</li> <li>Suggests overbought condition ending</li> <li> <p>Most reliable in ranging markets</p> </li> <li> <p>Confirmation Signal: Price crosses below middle band from above</p> </li> <li>Indicates momentum shift from bullish to bearish</li> <li> <p>Works as trend-following exit</p> </li> <li> <p>M-Pattern: Price makes higher high above upper band, then lower high inside band</p> </li> <li>Classic bearish reversal pattern</li> <li>Strongest when combined with RSI divergence</li> </ol> <p>Example Scenario: <pre><code>When price rises above upper band (overbought), then closes back inside\nthe bands, consider a short position or exit longs. Confirm with:\n- Volume declining during rally\n- RSI showing bearish divergence\n- Resistance level nearby\n- Set stop loss above recent high\n- Target: Middle band or lower band\n</code></pre></p>"},{"location":"indicators/overlap/bbands/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Pattern: Price makes lower low at lower band, but momentum indicator (RSI) makes higher low - Identification: Compare price lows touching lower band with RSI lows - Significance: Suggests selling pressure exhausting, potential reversal ahead - Reliability: High when combined with W-pattern formation - Example: Stock drops from $100 to $95 (touching lower band), then to $92 (touching lower band). RSI shows 28 then 32, indicating weakening downside momentum.</p> <p>Bearish Divergence: - Pattern: Price makes higher high at upper band, but momentum indicator (RSI) makes lower high - Identification: Compare price highs touching upper band with RSI highs - Significance: Suggests buying pressure exhausting, potential reversal ahead - Reliability: High when combined with M-pattern formation - Example: Stock rises from $100 to $110 (touching upper band), then to $115 (touching upper band). RSI shows 78 then 72, indicating weakening upside momentum.</p>"},{"location":"indicators/overlap/bbands/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/bbands/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When Bollinger Bands work best:</p> <ul> <li>Market conditions: Most reliable in ranging or oscillating markets. In strong trends, price can \"walk the bands\" for extended periods.</li> <li>Time frames: Works on all timeframes but most reliable on daily and 4-hour charts. Lower timeframes generate more noise.</li> <li>Asset classes: Excellent for stocks, forex, and cryptocurrencies. Works well for any liquid market with sufficient volatility.</li> </ul>"},{"location":"indicators/overlap/bbands/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Momentum Indicators (RSI, Stochastic): Use RSI to identify overbought/oversold conditions when price touches bands. Strongest signals occur when both indicators align (price at lower band + RSI oversold = strong buy).</p> </li> <li> <p>With Volume Indicators (OBV, Volume): Confirm Bollinger Band signals with volume. Best signals show decreasing volume at band extremes (declining volume at upper band = weak rally, at lower band = weak selloff).</p> </li> <li> <p>With Trend Indicators (ADX, Moving Averages): Use ADX or 200-period SMA to determine market regime. In strong trends (ADX &gt; 25), don't counter-trade band touches. In weak trends (ADX &lt; 20), favor mean reversion strategies.</p> </li> </ul>"},{"location":"indicators/overlap/bbands/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Assuming automatic reversals: Price touching bands doesn't guarantee reversal. In strong trends, price can walk along bands for extended periods. Always confirm with additional indicators.</p> </li> <li> <p>Ignoring the squeeze: Narrow bands (squeeze) are often ignored, but they're powerful signals. A squeeze followed by expansion usually precedes significant moves. Don't trade during the squeeze; wait for breakout direction.</p> </li> <li> <p>Using fixed parameters everywhere: Standard 20-period, 2.0 std dev works for daily charts but may need adjustment for other timeframes. Intraday may need shorter periods; weekly may need longer.</p> </li> <li> <p>Counter-trend trading in strong trends: Trading reversals at bands during strong trends leads to losses. Identify trend first, then trade with trend using bands for entries.</p> </li> </ol>"},{"location":"indicators/overlap/bbands/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading):</li> <li>Period: 10-15 for faster band adjustment</li> <li>Std Dev: 1.5-2.0 for tighter bands</li> <li> <p>Focus: Quick reversals at bands, scalping opportunities</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>Period: 20 (standard) for balanced signals</li> <li>Std Dev: 2.0 (traditional)</li> <li> <p>Focus: Multi-day moves, band squeeze breakouts</p> </li> <li> <p>Long-term trading (position trading):</p> </li> <li>Period: 30-50 for smoother bands</li> <li>Std Dev: 2.0-2.5 for wider envelope</li> <li> <p>Focus: Major trend changes, monthly patterns</p> </li> <li> <p>Backtesting approach: Test bandwidth statistics for your asset. Calculate historical bandwidth percentiles. If bands contain less than 90% of price action, increase std dev. If they contain more than 98%, decrease std dev.</p> </li> </ul>"},{"location":"indicators/overlap/bbands/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data for a stock\nhistorical_prices = [\n  44.34, 44.09, 44.15, 43.61, 44.33, 44.83, 45.10, 45.42,\n  45.84, 46.08, 46.03, 46.41, 46.22, 45.64, 46.21, 46.25,\n  46.08, 46.46, 46.57, 45.95, 46.50, 46.02, 45.55, 46.08,\n  46.34, 46.00, 45.75, 46.45, 47.02, 46.87\n]\n\n# Calculate Bollinger Bands and supporting indicators\nupper, middle, lower = SQA::TAI.bbands(historical_prices, period: 20)\nrsi = SQA::TAI.rsi(historical_prices, period: 14)\n\n# Current values\ncurrent_price = historical_prices.last\ncurrent_upper = upper.last\ncurrent_middle = middle.last\ncurrent_lower = lower.last\ncurrent_rsi = rsi.last\n\n# Calculate bandwidth and %B\nbandwidth = ((current_upper - current_lower) / current_middle * 100).round(2)\npercent_b = ((current_price - current_lower) / (current_upper - current_lower) * 100).round(2)\n\nputs \"=== Bollinger Bands Analysis ===\"\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"Upper Band: #{current_upper.round(2)}\"\nputs \"Middle Band: #{current_middle.round(2)}\"\nputs \"Lower Band: #{current_lower.round(2)}\"\nputs \"Bandwidth: #{bandwidth}%\"\nputs \"%B: #{percent_b}%\"\nputs \"RSI: #{current_rsi.round(2)}\"\nputs\n\n# Detect squeeze condition\nrecent_bandwidths = []\nupper.last(10).each_with_index do |u, i|\n  next unless u &amp;&amp; middle[-10..-1][i] &amp;&amp; lower[-10..-1][i]\n  bw = (u - lower[-10..-1][i]) / middle[-10..-1][i] * 100\n  recent_bandwidths &lt;&lt; bw\nend\n\navg_bandwidth = recent_bandwidths.sum / recent_bandwidths.size\n\nif bandwidth &lt; avg_bandwidth * 0.7\n  puts \"SQUEEZE DETECTED\"\n  puts \"Bandwidth below 70% of recent average\"\n  puts \"Volatility expansion likely - wait for breakout direction\"\n  puts\nend\n\n# Trading logic\nif current_price &lt;= current_lower &amp;&amp; current_rsi &lt; 30\n  puts \"STRONG BUY SIGNAL\"\n  puts \"Price at lower band: #{current_price.round(2)}\"\n  puts \"RSI oversold: #{current_rsi.round(2)}\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{(current_price * 0.97).round(2)} (3% below entry)\"\n  puts \"Target 1: #{current_middle.round(2)} (middle band)\"\n  puts \"Target 2: #{current_upper.round(2)} (upper band)\"\n\nelsif current_price &lt; current_middle &amp;&amp; historical_prices[-2] &lt;= lower[-2]\n  puts \"BUY SIGNAL\"\n  puts \"Price bounced from lower band\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{current_lower.round(2)}\"\n  puts \"Target: #{current_middle.round(2)}\"\n\nelsif current_price &gt;= current_upper &amp;&amp; current_rsi &gt; 70\n  puts \"STRONG SELL SIGNAL\"\n  puts \"Price at upper band: #{current_price.round(2)}\"\n  puts \"RSI overbought: #{current_rsi.round(2)}\"\n  puts \"Consider taking profits or initiating shorts\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{(current_price * 1.03).round(2)} (3% above entry)\"\n  puts \"Target 1: #{current_middle.round(2)} (middle band)\"\n  puts \"Target 2: #{current_lower.round(2)} (lower band)\"\n\nelsif current_price &gt; current_middle &amp;&amp; historical_prices[-2] &gt;= upper[-2]\n  puts \"SELL SIGNAL\"\n  puts \"Price rejected at upper band\"\n  puts \"Consider taking profits\"\n  puts \"Target: #{current_middle.round(2)}\"\n\nelsif percent_b &gt; 50 &amp;&amp; percent_b &lt; 80\n  puts \"HOLD: Price in upper half of bands\"\n  puts \"Bullish momentum but not yet extreme\"\n\nelsif percent_b &gt; 20 &amp;&amp; percent_b &lt; 50\n  puts \"HOLD: Price in lower half of bands\"\n  puts \"Bearish momentum but not yet extreme\"\n\nelse\n  puts \"NO CLEAR SIGNAL\"\n  puts \"Wait for price to reach band extremes\"\nend\n\n# Band walk detection\nupper_touches = 0\nlower_touches = 0\nhistorical_prices.last(5).each_with_index do |price, i|\n  idx = -5 + i\n  upper_touches += 1 if price &gt;= upper[idx] * 0.99  # Within 1% of upper band\n  lower_touches += 1 if price &lt;= lower[idx] * 1.01  # Within 1% of lower band\nend\n\nif upper_touches &gt;= 3\n  puts \"\\nBAND WALK DETECTED\"\n  puts \"Price walking along upper band (#{upper_touches}/5 bars)\"\n  puts \"Strong uptrend - avoid shorting\"\nelsif lower_touches &gt;= 3\n  puts \"\\nBAND WALK DETECTED\"\n  puts \"Price walking along lower band (#{lower_touches}/5 bars)\"\n  puts \"Strong downtrend - avoid buying\"\nend\n</code></pre>"},{"location":"indicators/overlap/bbands/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/overlap/bbands/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>Keltner Channels: Uses ATR instead of standard deviation for band calculation. Keltner Channels are smoother but less responsive to volatility spikes. Use Keltner when you want cleaner bands, Bollinger for volatility-based analysis.</li> <li>Acceleration Bands (ACCBANDS): Uses high/low prices with acceleration factor. ACCBANDS are more responsive to momentum changes, while Bollinger Bands better reflect statistical volatility.</li> </ul>"},{"location":"indicators/overlap/bbands/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI (Relative Strength Index): Perfect companion to Bollinger Bands. Use RSI to confirm overbought/oversold conditions at band extremes. Strongest signals when both indicators align.</li> <li>MACD: Use MACD for trend direction and momentum confirmation. MACD crossovers at Bollinger Band extremes provide powerful combined signals.</li> <li>Volume (OBV): Confirms band signals. Best Bollinger Band reversals show declining volume at extremes (declining volume at upper band = weak rally).</li> </ul>"},{"location":"indicators/overlap/bbands/#indicator-family","title":"Indicator Family","text":"<p>Bollinger Bands belong to the volatility envelope family: - Bollinger Bands: Standard deviation-based, most popular - Keltner Channels: ATR-based, smoother - Donchian Channels: High/low-based, breakout-focused - Price Envelopes: Percentage-based, simple construction</p> <p>When to prefer Bollinger Bands: For volatility analysis, statistical overbought/oversold identification, and mean reversion strategies. Bollinger Bands adapt automatically to changing market conditions through standard deviation calculation.</p>"},{"location":"indicators/overlap/bbands/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/bbands/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Bollinger Bands across multiple timeframes for comprehensive analysis:</p> <ul> <li>Higher timeframe bands (daily/weekly) identify major support/resistance zones and trend direction</li> <li>Lower timeframe bands (4H/1H) provide precise entry timing within the higher timeframe trend</li> <li>Strongest signals when price reaches lower timeframe band within higher timeframe band zone</li> </ul> <p>Example: If price touches daily lower band and then 4H lower band, this represents a high-probability long entry with both timeframes supporting the setup.</p>"},{"location":"indicators/overlap/bbands/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Bollinger Bands behavior changes in different market conditions:</p> <ul> <li>Trending Markets: Price tends to walk along one band. Upper band acts as support in uptrends; lower band as resistance in downtrends. Don't fade the trend. Use opposite band for entries in trend direction.</li> <li>Ranging Markets: Price oscillates between bands. Traditional buy-at-lower-band, sell-at-upper-band strategy works best. Middle band acts as pivot.</li> <li>Low Volatility: Bands contract into squeeze. Avoid trading until breakout. Squeeze often precedes significant moves.</li> <li>High Volatility: Bands expand rapidly. Price may overshoot bands more frequently. Use wider stop losses and be prepared for whipsaws.</li> </ul>"},{"location":"indicators/overlap/bbands/#statistical-validation","title":"Statistical Validation","text":"<p>Bollinger Bands reliability metrics and considerations:</p> <ul> <li>Coverage: With 2.0 standard deviations, bands should contain approximately 95% of price action. Test your specific market to verify.</li> <li>Reversal Success Rate: Price touching bands leads to reversal about 50-60% in ranging markets, much lower (30-40%) in trending markets. Always identify trend first.</li> <li>Squeeze Effectiveness: Historically, 70-80% of squeezes (bandwidth in lowest 20<sup>th</sup> percentile) lead to significant moves within 5-10 bars. Direction remains unpredictable.</li> <li>Optimal Bandwidth: Varies by asset. Calculate historical bandwidth statistics. If current bandwidth is in lowest 10<sup>th</sup> percentile, volatility expansion is highly likely.</li> </ul>"},{"location":"indicators/overlap/bbands/#references","title":"References","text":"<ul> <li>Bollinger, John. \"Bollinger on Bollinger Bands\" (2001) - The definitive guide by the indicator's creator</li> <li>Bollinger, John. \"Using Bollinger Bands,\" Stocks &amp; Commodities V. 10:2 (47-51)</li> <li>BollingerBands.com - Official website with educational resources</li> <li>StockCharts: Bollinger Bands - Comprehensive technical analysis guide</li> <li>TradingView: Bollinger Bands Educational Guide</li> </ul>"},{"location":"indicators/overlap/bbands/#see-also","title":"See Also","text":"<ul> <li>Overlap Studies Overview</li> <li>Simple Moving Average (SMA) - Used for middle band calculation</li> <li>Standard Deviation (STDDEV) - Core calculation component</li> <li>RSI - Excellent companion indicator</li> <li>Basic Usage Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/overlap/dema/","title":"DEMA (Double Exponential Moving Average)","text":""},{"location":"indicators/overlap/dema/#overview","title":"Overview","text":"<p>The Double Exponential Moving Average (DEMA) is an advanced technical indicator designed to reduce the inherent lag in traditional moving averages. Developed by Patrick Mulloy in 1994, DEMA uses a composite calculation involving two exponential moving averages to provide a smoother, more responsive trend-following indicator that closely tracks price movements while filtering out noise.</p>"},{"location":"indicators/overlap/dema/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 30 Number of periods for DEMA calculation"},{"location":"indicators/overlap/dema/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types (high, low, typical price) for specialized applications - Requires sufficient data points: approximately <code>period * 2</code> for stable calculations - More historical data improves the indicator's reliability and smoothness</p> <p>period (time_period) - Default is 30 periods, providing a balance of smoothness and responsiveness - Common periods and their uses:   - 9-12 periods: Short-term trading, high responsiveness   - 20-30 periods: Medium-term trends, standard analysis   - 50+ periods: Long-term trend identification - Shorter periods increase sensitivity but may generate more false signals - Longer periods provide smoother trends but with slightly more lag - Recommended ranges:   - Day trading: 9-15 periods   - Swing trading: 20-30 periods   - Position trading: 50-100 periods</p>"},{"location":"indicators/overlap/dema/#usage","title":"Usage","text":""},{"location":"indicators/overlap/dema/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00]\n\n# Calculate 30-period DEMA (default)\ndema = SQA::TAI.dema(prices)\n\nputs \"Current DEMA: #{dema.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/dema/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Calculate 10-period DEMA for more responsiveness\ndema_10 = SQA::TAI.dema(prices, period: 10)\n\n# Calculate 50-period DEMA for longer-term trends\ndema_50 = SQA::TAI.dema(prices, period: 50)\n\nputs \"Short-term DEMA (10): #{dema_10.last.round(2)}\"\nputs \"Standard DEMA (30): #{dema.last.round(2)}\"\nputs \"Long-term DEMA (50): #{dema_50.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/dema/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/dema/#what-it-measures","title":"What It Measures","text":"<p>The DEMA measures trend direction with reduced lag:</p> <ul> <li>Trend Direction: Identifies the current market trend by smoothing price data</li> <li>Momentum: The slope and position of DEMA relative to price indicate momentum strength</li> <li>Dynamic Support/Resistance: Acts as a moving support level in uptrends and resistance in downtrends</li> <li>Lag Reduction: Responds faster to price changes than traditional moving averages</li> </ul> <p>DEMA solves the fundamental problem of traditional moving averages: they lag behind price action. By using a double exponential calculation, DEMA maintains smoothness while reducing this lag significantly.</p>"},{"location":"indicators/overlap/dema/#calculation-method","title":"Calculation Method","text":"<p>The DEMA uses a unique double calculation process:</p> <ol> <li>Calculate First EMA: Apply exponential moving average to prices</li> <li>Calculate Second EMA: Apply EMA to the first EMA result</li> <li>Apply DEMA Formula: Subtract the double-smoothed value from twice the first EMA</li> <li>Result: A responsive moving average with reduced lag</li> </ol> <p>Formula: <pre><code>EMA1 = EMA(prices, period)\nEMA2 = EMA(EMA1, period)\nDEMA = (2 \u00d7 EMA1) - EMA2\n\nWhere:\n- EMA1 is the first exponential moving average of prices\n- EMA2 is the exponential moving average of EMA1\n- The subtraction removes excess smoothing, reducing lag\n- Multiplying EMA1 by 2 compensates for the removed smoothing\n</code></pre></p>"},{"location":"indicators/overlap/dema/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (follows price range)</li> <li>Type: Overlay indicator (plotted on price chart)</li> <li>Lag: Low lag, more responsive than SMA and EMA</li> <li>Best Used: Trending markets, trend following strategies, crossover systems</li> </ul>"},{"location":"indicators/overlap/dema/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/dema/#value-ranges","title":"Value Ranges","text":"<p>The DEMA's value is always close to the price range:</p> <ul> <li>DEMA Rising: Indicates upward momentum and bullish trend</li> <li>DEMA Falling: Indicates downward momentum and bearish trend</li> <li>DEMA Flat: Suggests consolidation or range-bound market</li> </ul>"},{"location":"indicators/overlap/dema/#key-levels","title":"Key Levels","text":"<ul> <li>Price Above DEMA: Bullish condition, uptrend in progress</li> <li>Price Below DEMA: Bearish condition, downtrend in progress</li> <li>Price Crossing DEMA: Potential trend change signal</li> <li>Distance from DEMA: Extreme distances may indicate overbought/oversold conditions</li> </ul>"},{"location":"indicators/overlap/dema/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read the DEMA's signals:</p> <ol> <li>Trend Direction</li> <li>Price consistently above rising DEMA = strong uptrend</li> <li>Price consistently below falling DEMA = strong downtrend</li> <li> <p>Price oscillating around flat DEMA = no clear trend</p> </li> <li> <p>Momentum Changes</p> </li> <li>DEMA slope steepening = accelerating momentum</li> <li>DEMA slope flattening = decelerating momentum</li> <li> <p>DEMA slope change = potential trend change</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price crosses below DEMA from above = potential reversal to downtrend</li> <li>Price crosses above DEMA from below = potential reversal to uptrend</li> <li>Confirm with volume and other indicators</li> </ol>"},{"location":"indicators/overlap/dema/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/dema/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price crosses above DEMA while DEMA is rising</li> <li>Confirmation Signal: Increasing volume on the crossover</li> <li>Entry Criteria: Close above DEMA, DEMA sloping upward</li> </ol> <p>Example Scenario: <pre><code>When price closes above DEMA and DEMA has been rising for 3+ periods,\nconsider a long position with stop loss 2-3% below DEMA.\nTarget the next resistance level or use a trailing stop.\n</code></pre></p>"},{"location":"indicators/overlap/dema/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price crosses below DEMA while DEMA is falling</li> <li>Confirmation Signal: Increasing volume on the crossover</li> <li>Exit Criteria: Close below DEMA, DEMA sloping downward</li> </ol> <p>Example Scenario: <pre><code>When price closes below DEMA and DEMA has been falling for 3+ periods,\nconsider exiting long positions or entering short with stop loss 2-3% above DEMA.\n</code></pre></p>"},{"location":"indicators/overlap/dema/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Price makes lower lows while DEMA makes higher lows - Indicates weakening downward momentum - Often precedes trend reversal to the upside - More reliable when confirmed with RSI or MACD divergence</p> <p>Bearish Divergence: - Price makes higher highs while DEMA makes lower highs - Indicates weakening upward momentum - Often precedes trend reversal to the downside - More reliable in overbought conditions</p>"},{"location":"indicators/overlap/dema/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/dema/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When DEMA works best: - Trending markets: DEMA excels when clear trends are present - All timeframes: Equally effective on intraday, daily, and weekly charts - Liquid markets: Works best in stocks, forex, and major cryptocurrencies - Momentum trading: Ideal for catching and riding strong trends</p>"},{"location":"indicators/overlap/dema/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <p>With Trend Indicators: - Use ADX to confirm trend strength before following DEMA signals - Combine with longer-period SMA for multi-timeframe trend confirmation</p> <p>With Volume Indicators: - Confirm DEMA crossovers with volume spikes for higher probability trades - Use OBV to validate DEMA trend direction</p> <p>With Other Oscillators: - Use RSI to identify overbought/oversold conditions for better entries - Combine with MACD for momentum confirmation</p>"},{"location":"indicators/overlap/dema/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li>Over-reliance: DEMA alone can generate false signals in choppy markets</li> <li>False Signals: Ranging markets produce whipsaws; use ADX to filter</li> <li>Parameter Optimization: Avoid curve-fitting to historical data</li> <li>Ignoring Context: Consider market conditions and multiple timeframes</li> </ol>"},{"location":"indicators/overlap/dema/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading): 9-15 period DEMA for quick signals</li> <li>Medium-term trading (swing trading): 20-30 period DEMA for balanced approach</li> <li>Long-term trading (position trading): 50-100 period DEMA for major trends</li> <li>Backtesting: Test on historical data to find optimal period for your instrument and timeframe</li> </ul>"},{"location":"indicators/overlap/dema/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Load historical price data\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00]\n\n# Calculate DEMA for crossover strategy\ndema_short = SQA::TAI.dema(prices, period: 10)\ndema_long = SQA::TAI.dema(prices, period: 30)\n\n# Analysis logic\ncurrent_price = prices.last\nshort_dema = dema_short.last\nlong_dema = dema_long.last\n\nprev_short = dema_short[-2]\nprev_long = dema_long[-2]\n\n# Check for golden cross (bullish)\nif prev_short &lt;= prev_long &amp;&amp; short_dema &gt; long_dema\n  puts \"BUY Signal: DEMA Golden Cross\"\n  puts \"Short DEMA crossed above Long DEMA\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{(long_dema * 0.97).round(2)}\"\n  puts \"Target: #{(current_price * 1.05).round(2)}\"\n\n# Check for death cross (bearish)\nelsif prev_short &gt;= prev_long &amp;&amp; short_dema &lt; long_dema\n  puts \"SELL Signal: DEMA Death Cross\"\n  puts \"Short DEMA crossed below Long DEMA\"\n  puts \"Exit Long Positions\"\n  puts \"Stop Loss: #{(long_dema * 1.03).round(2)}\"\n\n# Check price position relative to DEMA\nelsif current_price &gt; short_dema &amp;&amp; short_dema &gt; long_dema\n  puts \"Strong Uptrend: Hold long positions\"\n  puts \"Price: #{current_price.round(2)}\"\n  puts \"Short DEMA: #{short_dema.round(2)}\"\n  puts \"Long DEMA: #{long_dema.round(2)}\"\n\nelsif current_price &lt; short_dema &amp;&amp; short_dema &lt; long_dema\n  puts \"Strong Downtrend: Avoid longs\"\n  puts \"Consider shorts or stay in cash\"\nend\n</code></pre>"},{"location":"indicators/overlap/dema/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/overlap/dema/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>EMA: Single exponential moving average, simpler but more lag</li> <li>TEMA: Triple exponential MA, even less lag than DEMA</li> <li>T3: Tillson T3, smoother with customizable lag</li> </ul>"},{"location":"indicators/overlap/dema/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Confirms trend strength for DEMA signals</li> <li>RSI: Identifies overbought/oversold for better entries</li> <li>MACD: Momentum confirmation for DEMA crossovers</li> </ul>"},{"location":"indicators/overlap/dema/#indicator-family","title":"Indicator Family","text":"<p>DEMA belongs to the exponential moving average family: - SMA: Base moving average with equal weighting - EMA: Exponential weighting, reduced lag from SMA - DEMA: Double calculation, further reduced lag - TEMA: Triple calculation, minimal lag - Use DEMA when you need responsiveness but still want smoothness</p>"},{"location":"indicators/overlap/dema/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/dema/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use DEMA across multiple timeframes for comprehensive analysis: - Daily DEMA for overall trend direction - 4-hour DEMA for intermediate entries - 1-hour DEMA for precise timing - Only take trades when all timeframes align</p>"},{"location":"indicators/overlap/dema/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Adjust DEMA parameters based on market volatility: - High volatility: Use longer periods (30-50) to reduce noise - Low volatility: Use shorter periods (10-20) for better responsiveness - Calculate ATR to measure volatility and adapt accordingly</p>"},{"location":"indicators/overlap/dema/#statistical-validation","title":"Statistical Validation","text":"<p>DEMA reliability metrics: - More reliable in trending markets (ADX &gt; 25) - False signal rate increases in ranging markets - Crossover signals have 60-70% success rate in strong trends - Combine with volume analysis to improve accuracy to 70-80%</p>"},{"location":"indicators/overlap/dema/#references","title":"References","text":"<ul> <li>Mulloy, Patrick (1994). \"Smoothing Data with Faster Moving Averages\". Technical Analysis of Stocks &amp; Commodities magazine</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\"</li> <li>Pring, Martin J. \"Technical Analysis Explained\"</li> </ul>"},{"location":"indicators/overlap/dema/#see-also","title":"See Also","text":"<ul> <li>Overlap Studies Overview</li> <li>EMA Documentation</li> <li>TEMA Documentation</li> <li>Moving Average Comparison</li> </ul>"},{"location":"indicators/overlap/ema/","title":"EMA (Exponential Moving Average)","text":""},{"location":"indicators/overlap/ema/#overview","title":"Overview","text":"<p>The Exponential Moving Average (EMA) is one of the most widely used moving averages in technical analysis, offering a significant improvement over the Simple Moving Average by giving more weight to recent price data. Developed to address the SMA's lag problem, the EMA responds more quickly to price changes while still providing trend-smoothing capabilities. This makes it particularly valuable for traders who need faster signals without sacrificing too much noise reduction, and it serves as the foundation for many popular indicators including MACD and the Percentage Price Oscillator.</p>"},{"location":"indicators/overlap/ema/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 30 Number of periods for EMA calculation"},{"location":"indicators/overlap/ema/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types (high, low, open, typical price) for specialized applications - Requires at least <code>period</code> number of data points for initial calculation - More historical data provides better context for the EMA to stabilize - First EMA value is calculated as SMA, then exponential smoothing begins</p> <p>period (time_period) - No universally \"correct\" period; choice depends on trading timeframe and strategy - Common periods and their uses:   - 9-12 periods: Fast EMA for short-term signals, MACD fast line   - 20-26 periods: Medium-term trend, MACD slow line   - 50 periods: Intermediate trend indicator   - 200 periods: Long-term trend, major support/resistance - Shorter periods are more responsive but generate more whipsaws - Longer periods are smoother but have greater lag - Recommended ranges:   - Day trading: 8-21 periods   - Swing trading: 20-50 periods   - Position trading: 50-200 periods</p>"},{"location":"indicators/overlap/ema/#usage","title":"Usage","text":""},{"location":"indicators/overlap/ema/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41]\n\n# Calculate 12-period EMA\nema = SQA::TAI.ema(prices, period: 12)\n\nputs \"Current EMA: #{ema.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/ema/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Calculate multiple EMAs for trend analysis\nema_12 = SQA::TAI.ema(prices, period: 12)  # Fast EMA\nema_26 = SQA::TAI.ema(prices, period: 26)  # Slow EMA\nema_50 = SQA::TAI.ema(prices, period: 50)  # Trend filter\nema_200 = SQA::TAI.ema(prices, period: 200) # Long-term trend\n\nputs \"12-period EMA: #{ema_12.last.round(2)}\"\nputs \"26-period EMA: #{ema_26.last.round(2)}\"\nputs \"50-period EMA: #{ema_50.last.round(2)}\"\nputs \"200-period EMA: #{ema_200.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/ema/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/ema/#what-it-measures","title":"What It Measures","text":"<p>The Exponential Moving Average measures the weighted average price over a specified period with emphasis on recent data:</p> <ul> <li>Trend Direction: Shows the overall direction of price movement by smoothing out fluctuations while emphasizing recent prices</li> <li>Momentum: The slope and distance of the EMA from price indicates trend strength</li> <li>Support/Resistance: Acts as dynamic support in uptrends and resistance in downtrends</li> <li>Fair Value: Represents a weighted consensus price level favoring recent data</li> <li>Rate of Change: More responsive to recent price changes than SMA, making it better for identifying trend shifts</li> </ul> <p>EMA answers the question: \"What has been the weighted average price with emphasis on recent action, and is current price accelerating away from or converging toward that average?\"</p>"},{"location":"indicators/overlap/ema/#calculation-method","title":"Calculation Method","text":"<p>The EMA is calculated using exponential smoothing:</p> <ol> <li>Calculate Multiplier: Determine the weighting multiplier based on the period</li> <li>Initialize with SMA: First EMA value uses SMA of first <code>period</code> prices</li> <li>Apply Exponential Formula: Each subsequent EMA uses previous EMA and current price</li> <li>Continuous Smoothing: The exponential nature means all past data influences current value, but with exponentially decreasing weight</li> </ol> <p>Formula: <pre><code>Multiplier = 2 / (period + 1)\nEMA = (Price - Previous EMA) \u00d7 Multiplier + Previous EMA\n\nAlternative form:\nEMA = Price \u00d7 Multiplier + Previous EMA \u00d7 (1 - Multiplier)\n\nExample for 12-period EMA:\nMultiplier = 2 / (12 + 1) = 0.1538 (15.38%)\nCurrent price gets 15.38% weight\nPrevious EMA gets 84.62% weight\n\nExample calculation:\nPrevious EMA = 45.00\nCurrent Price = 46.00\nEMA = (46.00 - 45.00) \u00d7 0.1538 + 45.00 = 45.15\n</code></pre></p>"},{"location":"indicators/overlap/ema/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded; moves with price</li> <li>Type: Trend-following overlay indicator with momentum characteristics</li> <li>Lag: Moderate lag; less than SMA but more than DEMA/TEMA</li> <li>Best Used: Trending markets, momentum strategies, crossover systems</li> <li>Limitations: More reactive than SMA means more whipsaws in ranging markets; still lags price action</li> </ul>"},{"location":"indicators/overlap/ema/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/ema/#value-ranges","title":"Value Ranges","text":"<p>The EMA itself doesn't have fixed ranges, but its relationship to price provides signals:</p> <ul> <li>Price Above EMA: Bullish condition; price is trading above weighted average. Suggests uptrend or bullish momentum. The farther above, the stronger the bullish signal.</li> <li>Price At EMA: Equilibrium point; price at weighted fair value. Often acts as support or resistance. Common pullback target in trends.</li> <li>Price Below EMA: Bearish condition; price is trading below weighted average. Suggests downtrend or bearish momentum. The farther below, the stronger the bearish signal.</li> <li>Distance from EMA: Large deviations suggest overbought/oversold conditions. Expect mean reversion. Distance measurement more relevant than with SMA due to EMA's responsiveness.</li> </ul>"},{"location":"indicators/overlap/ema/#key-levels","title":"Key Levels","text":"<ul> <li>12-period EMA: Popular fast EMA for short-term trend. Used in MACD calculation. Price above = short-term uptrend.</li> <li>26-period EMA: Popular slow EMA for medium-term trend. Used in MACD calculation. Price above = medium-term uptrend.</li> <li>50-period EMA: Important intermediate trend indicator. Acts as support/resistance. Widely watched by swing traders.</li> <li>200-period EMA: Major long-term trend indicator. Key support/resistance level. Institutional focus level.</li> <li>Multiple EMA Alignment: When price &gt; EMA12 &gt; EMA26 &gt; EMA50 &gt; EMA200, this shows strong uptrend with all timeframes aligned.</li> </ul>"},{"location":"indicators/overlap/ema/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read EMA signals:</p> <ol> <li>Trend Direction</li> <li>EMA sloping upward: Uptrend</li> <li>EMA sloping downward: Downtrend</li> <li>EMA flat: Consolidation or range-bound</li> <li> <p>Steeper slope indicates stronger trend</p> </li> <li> <p>Trend Strength</p> </li> <li>Price far above rising EMA: Strong uptrend</li> <li>Price hugging rising EMA: Moderate uptrend</li> <li>Price oscillating around EMA: Weak or no trend</li> <li> <p>Multiple EMAs fanning out: Strong trending market</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price crosses above EMA: Potential bullish reversal</li> <li>Price crosses below EMA: Potential bearish reversal</li> <li>EMA crossovers: Faster EMA crossing slower EMA signals trend change</li> <li>Failed EMA tests: Price unable to cross EMA suggests trend continuation</li> </ol>"},{"location":"indicators/overlap/ema/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/ema/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price crosses above EMA from below</li> <li>Indicates momentum shift from bearish to bullish</li> <li>Most reliable when EMA is flat or beginning to slope upward</li> <li> <p>Stronger signal if price closes decisively above (not just touching)</p> </li> <li> <p>Confirmation Signal: Price pulls back to EMA and bounces (EMA acts as support)</p> </li> <li>Shows EMA is respected as support level</li> <li>Provides lower-risk entry in established uptrend</li> <li> <p>Best when volume declines on pullback, increases on bounce</p> </li> <li> <p>EMA Crossover (Golden Cross): Faster EMA crosses above slower EMA</p> </li> <li>Classic bullish signal (e.g., 12 EMA crosses above 26 EMA)</li> <li>Indicates acceleration of upward momentum</li> <li>Stronger when both EMAs are rising</li> </ol> <p>Example Scenario: <pre><code>When price crosses above 50-period EMA while the EMA is rising,\nconsider a long position. Confirm with:\n- Volume increasing on the breakout\n- Price closing above EMA (not just wicking above)\n- 200-period EMA also sloping upward or price above it\n- RSI confirming momentum (above 50)\n- Set stop loss below recent swing low or below EMA\n- Target: Next resistance level or use trailing stop with EMA\n</code></pre></p>"},{"location":"indicators/overlap/ema/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price crosses below EMA from above</li> <li>Indicates momentum shift from bullish to bearish</li> <li>Most reliable when EMA is flat or beginning to slope downward</li> <li> <p>Stronger signal if price closes decisively below (not just touching)</p> </li> <li> <p>Confirmation Signal: Price rallies to EMA and rejects (EMA acts as resistance)</p> </li> <li>Shows EMA is respected as resistance level</li> <li>Provides lower-risk entry for shorts in established downtrend</li> <li> <p>Best when volume declines on rally, increases on rejection</p> </li> <li> <p>EMA Crossover (Death Cross): Faster EMA crosses below slower EMA</p> </li> <li>Classic bearish signal (e.g., 12 EMA crosses below 26 EMA)</li> <li>Indicates acceleration of downward momentum</li> <li>Stronger when both EMAs are falling</li> </ol> <p>Example Scenario: <pre><code>When price crosses below 50-period EMA while the EMA is falling,\nconsider closing longs or initiating shorts. Confirm with:\n- Volume increasing on the breakdown\n- Price closing below EMA (not just wicking below)\n- 200-period EMA also sloping downward or price below it\n- RSI confirming weakness (below 50)\n- Set stop loss above recent swing high or above EMA\n- Target: Next support level or use trailing stop with EMA\n</code></pre></p>"},{"location":"indicators/overlap/ema/#divergence-analysis","title":"Divergence Analysis","text":"<p>While EMA itself doesn't show divergence, comparing price action to EMA behavior provides insights:</p> <p>Bullish Setup: - Pattern: Price makes lower low but remains above rising EMA, or bounces strongly from EMA - Identification: EMA continues rising while price corrects, EMA slope remains positive - Significance: Suggests correction within uptrend, buying opportunity - Reliability: High when price stays above EMA during correction, volume declines on pullback - Example: Stock drops from $100 to $95, touching EMA at $94. EMA still rising. Price bounces back above $97. Indicates healthy pullback in uptrend.</p> <p>Bearish Setup: - Pattern: Price makes higher high but EMA begins flattening or falling, or price rejects EMA from below - Identification: Price momentum weakening despite higher prices, EMA slope decreasing or turning negative - Significance: Suggests weakening uptrend, potential reversal - Reliability: High when price starts oscillating around EMA after strong trend, volume decreases on rallies - Example: Stock rallies from $100 to $105 but EMA at $102 is flattening. Price starts closing below EMA. Indicates momentum loss.</p>"},{"location":"indicators/overlap/ema/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/ema/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When EMA works best:</p> <ul> <li>Market conditions: Most effective in trending markets with clear directional moves. Less useful in choppy, range-bound markets where frequent EMA crosses generate whipsaws. Outperforms SMA in volatile trending markets due to responsiveness.</li> <li>Time frames: Works on all timeframes. Most popular on daily charts for 12/26/50/200 EMA. Hourly charts common for day trading with 9/21 EMA. Works well on 4-hour and weekly charts.</li> <li>Asset classes: Universal application across stocks, forex, commodities, cryptocurrencies. Particularly effective for momentum-driven assets. Popular in forex and crypto due to 24-hour markets and trending behavior.</li> </ul>"},{"location":"indicators/overlap/ema/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Momentum Indicators (RSI, MACD): Use EMA for trend direction, RSI/MACD for entry timing. Only take RSI buy signals when price is above EMA (with-trend trades). MACD already uses EMAs (12/26), so 50/200 EMA adds additional trend context.</p> </li> <li> <p>With Volume Indicators (OBV, Volume): Confirm EMA crossovers with volume. Valid breakouts above EMA should show increased volume. Low volume EMA crossovers are less reliable and often fail. Volume declining as price approaches EMA in uptrend = healthy pullback.</p> </li> <li> <p>With Other Moving Averages: Multiple EMA periods (12/26/50/200) create trend hierarchy. Combine EMA with SMA for different perspectives (EMA for signals, SMA 200 for major trend). EMA ribbon (8/13/21/34/55) shows trend strength through alignment or compression.</p> </li> </ul>"},{"location":"indicators/overlap/ema/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Using single EMA in isolation: EMA alone generates many false signals, especially in ranging markets. Always combine with trend confirmation (ADX), volume, or momentum indicators. Need multiple timeframe or multiple EMA confirmation.</p> </li> <li> <p>Chasing crossovers in choppy markets: In ranging markets, price crosses EMA frequently causing whipsaws. Use ADX (&lt; 20 suggests chop) or ATR to identify ranging conditions. Consider using longer EMA periods or different indicators (Stochastic, RSI) in ranges.</p> </li> <li> <p>Over-optimizing EMA periods: Constantly adjusting EMA period to fit past data leads to curve-fitting. What works historically may not work forward. Stick to common periods (12, 26, 50, 200) used by majority of traders, creating self-fulfilling prophecy effect.</p> </li> <li> <p>Ignoring the exponential lag: While EMA is faster than SMA, it still lags price. In fast-moving markets, EMA crosses happen after significant moves already occurred. Use price action and support/resistance for entries, EMA for trend confirmation.</p> </li> </ol>"},{"location":"indicators/overlap/ema/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading):</li> <li>Period: 9-21 for trend direction</li> <li>Crossover pairs: 9/21 or 12/26 (MACD standard)</li> <li>Focus: Intraday trends, quick reversals</li> <li> <p>Best timeframes: 5-min, 15-min, 1-hour charts</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>Period: 20-50 for swing moves</li> <li>Crossover pairs: 20/50 or 13/48</li> <li>Focus: Multi-day/week trends, overnight positions</li> <li> <p>Best timeframes: Hourly, 4-hour, daily charts</p> </li> <li> <p>Long-term trading (position trading):</p> </li> <li>Period: 50-200 for major trends</li> <li>Crossover pairs: 50/200 (institutional favorite)</li> <li>Focus: Monthly/quarterly trends, major support/resistance</li> <li> <p>Best timeframes: Daily, weekly charts</p> </li> <li> <p>Backtesting approach: Test various periods on historical data. Calculate win rate and profit factor for price-EMA crosses and EMA crossovers. Optimal period shows best risk/reward for your specific market, timeframe, and strategy. Consider transaction costs - more signals isn't always better.</p> </li> </ul>"},{"location":"indicators/overlap/ema/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data for a stock\nhistorical_prices = [\n  44.34, 44.09, 44.15, 43.61, 44.33, 44.83, 45.10, 45.42,\n  45.84, 46.08, 46.03, 46.41, 46.22, 45.64, 46.21, 46.25,\n  46.08, 46.46, 46.57, 45.95, 46.50, 46.02, 45.55, 46.08,\n  46.34, 46.00, 45.75, 46.45, 47.02, 46.87, 47.20, 47.55,\n  47.85, 48.10, 48.35, 48.60, 48.85, 49.10, 49.35, 49.60,\n  49.85, 50.10, 50.35, 50.60, 50.85, 51.10, 51.35, 51.60,\n  51.85, 52.10, 52.35, 52.60\n]\n\n# Calculate multiple EMAs for comprehensive analysis\nema_12 = SQA::TAI.ema(historical_prices, period: 12)\nema_26 = SQA::TAI.ema(historical_prices, period: 26)\nema_50 = SQA::TAI.ema(historical_prices, period: 50)\n\n# Current values\ncurrent_price = historical_prices.last\ncurrent_ema_12 = ema_12.last\ncurrent_ema_26 = ema_26.last\ncurrent_ema_50 = ema_50.last\n\nputs \"=== EMA Trading Analysis ===\"\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"12-period EMA: #{current_ema_12.round(2)}\"\nputs \"26-period EMA: #{current_ema_26.round(2)}\"\nputs \"50-period EMA: #{current_ema_50.round(2)}\"\nputs\n\n# Determine overall trend\nif current_price &gt; current_ema_12 &amp;&amp; current_ema_12 &gt; current_ema_26 &amp;&amp; current_ema_26 &gt; current_ema_50\n  trend = \"STRONG UPTREND\"\n  bias = \"BULLISH\"\nelsif current_price &lt; current_ema_12 &amp;&amp; current_ema_12 &lt; current_ema_26 &amp;&amp; current_ema_26 &lt; current_ema_50\n  trend = \"STRONG DOWNTREND\"\n  bias = \"BEARISH\"\nelsif current_price &gt; current_ema_12 &amp;&amp; current_ema_12 &gt; current_ema_26\n  trend = \"SHORT-TERM UPTREND\"\n  bias = \"CAUTIOUSLY BULLISH\"\nelsif current_price &lt; current_ema_12 &amp;&amp; current_ema_12 &lt; current_ema_26\n  trend = \"SHORT-TERM DOWNTREND\"\n  bias = \"CAUTIOUSLY BEARISH\"\nelse\n  trend = \"MIXED/CONSOLIDATING\"\n  bias = \"NEUTRAL\"\nend\n\nputs \"Trend: #{trend}\"\nputs \"Bias: #{bias}\"\nputs\n\n# Detect EMA crossovers\nif ema_12[-2] &lt; ema_26[-2] &amp;&amp; ema_12.last &gt; ema_26.last\n  puts \"BULLISH EMA CROSSOVER!\"\n  puts \"12 EMA crossed above 26 EMA\"\n  puts \"Momentum shifting bullish - consider long positions\"\n  puts\nelsif ema_12[-2] &gt; ema_26[-2] &amp;&amp; ema_12.last &lt; ema_26.last\n  puts \"BEARISH EMA CROSSOVER!\"\n  puts \"12 EMA crossed below 26 EMA\"\n  puts \"Momentum shifting bearish - consider closing longs\"\n  puts\nend\n\n# Check price position relative to EMAs\nprice_to_ema12_pct = ((current_price - current_ema_12) / current_ema_12 * 100).round(2)\nprice_to_ema26_pct = ((current_price - current_ema_26) / current_ema_26 * 100).round(2)\nprice_to_ema50_pct = ((current_price - current_ema_50) / current_ema_50 * 100).round(2)\n\nputs \"Price distance from 12 EMA: #{price_to_ema12_pct}%\"\nputs \"Price distance from 26 EMA: #{price_to_ema26_pct}%\"\nputs \"Price distance from 50 EMA: #{price_to_ema50_pct}%\"\nputs\n\n# Trading signals\nif current_price &gt; current_ema_12 &amp;&amp; historical_prices[-2] &lt;= ema_12[-2]\n  puts \"BUY SIGNAL: Price crossed above 12 EMA\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{(current_ema_26 * 0.98).round(2)} (2% below 26 EMA)\"\n  puts \"Target: Extended move or previous resistance\"\n  puts\n\nelsif current_price &lt; current_ema_12 &amp;&amp; historical_prices[-2] &gt;= ema_12[-2]\n  puts \"SELL SIGNAL: Price crossed below 12 EMA\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{(current_ema_26 * 1.02).round(2)} (2% above 26 EMA)\"\n  puts \"Target: Extended move or previous support\"\n  puts\n\nelsif price_to_ema12_pct &gt; 5 &amp;&amp; bias == \"BULLISH\"\n  puts \"TAKE PROFITS SIGNAL\"\n  puts \"Price extended #{price_to_ema12_pct}% above 12 EMA\"\n  puts \"Consider taking partial profits\"\n  puts \"Potential mean reversion to EMA\"\n  puts\n\nelsif price_to_ema12_pct &lt; -5 &amp;&amp; bias == \"BEARISH\"\n  puts \"COVER SHORTS SIGNAL\"\n  puts \"Price extended #{price_to_ema12_pct.abs}% below 12 EMA\"\n  puts \"Consider covering partial shorts\"\n  puts \"Potential mean reversion to EMA\"\n  puts\n\nelsif price_to_ema12_pct.abs &lt; 1\n  puts \"PRICE AT EMA\"\n  if bias == \"BULLISH\"\n    puts \"Price testing 12 EMA support\"\n    puts \"Watch for bounce - potential buying opportunity\"\n  elsif bias == \"BEARISH\"\n    puts \"Price testing 12 EMA resistance\"\n    puts \"Watch for rejection - potential shorting opportunity\"\n  else\n    puts \"Price oscillating around EMA - ranging market\"\n  end\n  puts\n\nelse\n  puts \"NO CLEAR SIGNAL - HOLD CURRENT POSITIONS\"\n  puts \"Waiting for price to reach key levels or EMA crossover\"\n  puts\nend\n\n# Calculate EMA slopes for trend strength\nema12_slope = ((current_ema_12 - ema_12[-5]) / ema_12[-5] * 100).round(2)\nema26_slope = ((current_ema_26 - ema_26[-10]) / ema_26[-10] * 100).round(2)\n\nputs \"=== Trend Strength Analysis ===\"\nputs \"12 EMA slope (5 bars): #{ema12_slope}%\"\nputs \"26 EMA slope (10 bars): #{ema26_slope}%\"\n\nif ema12_slope &gt; 2\n  puts \"Strong upward momentum on 12 EMA\"\nelsif ema12_slope &lt; -2\n  puts \"Strong downward momentum on 12 EMA\"\nelse\n  puts \"Flat or weak momentum on 12 EMA\"\nend\n\n# EMA ribbon analysis (convergence/divergence)\nema_spread = ((current_ema_12 - current_ema_26) / current_ema_26 * 100).round(2)\nputs\nputs \"12/26 EMA Spread: #{ema_spread}%\"\nif ema_spread.abs &gt; 3\n  puts \"EMAs diverging - strong trending market\"\nelsif ema_spread.abs &lt; 1\n  puts \"EMAs converging - potential consolidation or reversal\"\nend\n</code></pre>"},{"location":"indicators/overlap/ema/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/overlap/ema/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>Simple Moving Average (SMA): Equal weighting approach. SMA is smoother but lags more. Use SMA when you want maximum noise reduction and classical analysis. Use EMA when you need faster signals and momentum trading.</li> <li>Weighted Moving Average (WMA): Linear weighting approach. WMA falls between SMA and EMA in responsiveness. Less common but useful for balanced approach without exponential mathematics.</li> <li>DEMA: Double exponential smoothing for even less lag. DEMA is faster than EMA but may generate more whipsaws. Use DEMA in strong trending markets.</li> <li>TEMA: Triple exponential smoothing for minimal lag. TEMA is fastest MA but most sensitive to noise. Use TEMA for momentum trading and strong trends.</li> </ul>"},{"location":"indicators/overlap/ema/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>MACD: Uses 12 and 26 EMAs directly. MACD visualizes EMA crossovers and adds momentum histogram. Perfect combination - use EMA for trend, MACD for timing.</li> <li>Bollinger Bands: Can use EMA as middle band instead of SMA. Creates more responsive volatility bands. Combine for volatility and trend analysis.</li> <li>ADX: Measures trend strength. Use ADX to determine when EMA signals are most reliable (ADX &gt; 25 = strong trend, use EMA crosses with confidence).</li> <li>RSI: Momentum oscillator. Combine RSI with EMA: only take RSI buy signals above EMA (with-trend), only take RSI sell signals below EMA.</li> </ul>"},{"location":"indicators/overlap/ema/#indicator-family","title":"Indicator Family","text":"<p>EMA belongs to the moving average family: - SMA: Equal weighting, smoothest, highest lag - EMA: Exponential weighting, balanced, moderate lag - WMA: Linear weighting, between SMA and EMA - DEMA: Double EMA smoothing, low lag - TEMA: Triple EMA smoothing, lowest lag - KAMA: Adaptive weighting based on market efficiency</p> <p>When to prefer EMA: For most trading applications, EMA provides the best balance of responsiveness and smoothness. It's the most popular MA for active trading, momentum strategies, and crossover systems. EMA's exponential weighting matches how traders naturally think (recent data matters more). Used by majority of traders, creating self-fulfilling prophecy at key EMA levels.</p>"},{"location":"indicators/overlap/ema/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/ema/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use EMA across multiple timeframes for comprehensive analysis:</p> <ul> <li>Higher timeframe EMA (daily 50/200 EMA) identifies major trend direction - this is your primary trend filter. Never trade against daily 200 EMA unless you have strong conviction.</li> <li>Lower timeframe EMA (hourly 12/26 EMA) provides precise entry timing within the higher timeframe trend. Use for position entry and exit, but always align with higher timeframe.</li> <li>Strongest trades occur when all timeframes align: price above daily 200 EMA, daily 50 EMA, hourly 50 EMA, and hourly 12 EMA. This is maximum trend alignment.</li> </ul> <p>Example: If daily 50 EMA is rising and price is above daily 200 EMA, only take hourly 12/26 EMA bullish crossover signals. Ignore bearish crossovers against the major trend. Use hourly EMA crosses for entries in direction of daily trend.</p>"},{"location":"indicators/overlap/ema/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>EMA behavior and effectiveness changes in different market conditions:</p> <ul> <li>Trending Markets: EMA works excellently. Price respects EMA as support/resistance. Use EMA crossovers and price-EMA crosses confidently. Faster EMAs (12/26) outperform in strong trends.</li> <li>Ranging Markets: EMA generates many false crossovers. Price oscillates above/below EMA frequently. Consider using longer periods (50+), adding ADX filter (&lt; 20 = range), or switching to oscillators (RSI, Stochastic).</li> <li>High Volatility (expanding ATR): Price makes large moves away from EMA. Increase EMA period to filter noise, or use ATR-based stops instead of EMA-based stops. EMA crossovers less reliable.</li> <li>Low Volatility (contracting ATR): Price stays very close to EMA. Small moves trigger signals. Tighten stop losses and take quicker profits. Watch for volatility expansion (often follows contraction).</li> <li>Breakout Markets: EMA crossovers lag initial breakout but confirm trend. Use price action for breakout entry, EMA for trend confirmation and trailing stops.</li> </ul>"},{"location":"indicators/overlap/ema/#statistical-validation","title":"Statistical Validation","text":"<p>EMA reliability metrics and considerations:</p> <ul> <li>Crossover Success Rate: EMA crossovers (12/26) have approximately 55-65% success rate in trending markets, but only 40-50% in ranging markets. Always identify trend regime first using ADX or visual analysis.</li> <li>Price-EMA Cross Effectiveness: Price crossing 50 EMA has approximately 60-70% success rate when EMA slope confirms (crossing up with rising EMA, crossing down with falling EMA). Only 45-50% when crossing against EMA slope.</li> <li>EMA as Support/Resistance: 50 EMA acts as support/resistance with approximately 65-75% success rate in established trends. First touch usually holds better than subsequent touches. 200 EMA is stronger (70-80% hold rate).</li> <li>Optimal EMA Spacing: EMAs too close (9/12) generate excessive signals. EMAs too far (12/100) miss opportunities. 12/26 (MACD standard) and 20/50 provide optimal signal-to-noise ratio for most markets.</li> <li>Whipsaw Rate: EMA generates approximately 30-40% false signals in ranging markets. Using ADX filter (only trade when ADX &gt; 20 or 25) can reduce whipsaws by 50-60%.</li> </ul>"},{"location":"indicators/overlap/ema/#references","title":"References","text":"<ul> <li>Appel, Gerald. \"Technical Analysis: Power Tools for Active Investors\" (2005) - Developer of MACD, which popularized EMA usage</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999) - Comprehensive coverage of moving averages including EMA</li> <li>Kirkpatrick, Charles D. and Dahlquist, Julie R. \"Technical Analysis: The Complete Resource for Financial Market Technicians\" (2010)</li> <li>StockCharts: Moving Averages - EMA - Educational resource for EMA analysis</li> <li>TradingView: Exponential Moving Average Guide</li> <li>Wilder, J. Welles. \"New Concepts in Technical Trading Systems\" (1978) - Introduced exponential smoothing concepts</li> </ul>"},{"location":"indicators/overlap/ema/#see-also","title":"See Also","text":"<ul> <li>Overlap Studies Overview</li> <li>Simple Moving Average (SMA) - Compare with SMA</li> <li>MACD - Uses EMA as foundation</li> <li>DEMA - Faster double EMA version</li> <li>TEMA - Fastest triple EMA version</li> <li>Basic Usage Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/overlap/kama/","title":"KAMA (Kaufman Adaptive Moving Average)","text":""},{"location":"indicators/overlap/kama/#overview","title":"Overview","text":"<p>The Kaufman Adaptive Moving Average (KAMA) is a sophisticated adaptive moving average developed by Perry Kaufman that automatically adjusts its smoothing constant based on market efficiency and volatility. KAMA becomes faster and more responsive in trending markets while slowing down in choppy, range-bound markets to reduce whipsaws. This intelligent adaptation makes KAMA one of the most advanced trend-following indicators available.</p>"},{"location":"indicators/overlap/kama/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 30 Number of periods for efficiency ratio calculation"},{"location":"indicators/overlap/kama/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types for specialized applications - Requires sufficient data points for stable efficiency ratio calculations - More historical data improves adaptation reliability</p> <p>period (time_period) - Default is 30 periods for balanced adaptation - Common periods:   - 10 periods: Short-term, highly adaptive   - 20 periods: Standard intraday and swing trading   - 30 periods: Medium-term position trading (default)   - 50+ periods: Long-term trend identification - Shorter periods increase adaptation frequency - Longer periods provide smoother, less reactive trends</p>"},{"location":"indicators/overlap/kama/#usage","title":"Usage","text":""},{"location":"indicators/overlap/kama/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00, 49.15, 49.30]\n\n# Calculate 30-period KAMA (default)\nkama = SQA::TAI.kama(prices)\n\nputs \"Current KAMA: #{kama.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/kama/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Calculate 10-period KAMA for shorter-term adaptation\nkama_10 = SQA::TAI.kama(prices, period: 10)\n\n# Calculate 50-period KAMA for long-term trends\nkama_50 = SQA::TAI.kama(prices, period: 50)\n\nputs \"Short-term KAMA (10): #{kama_10.last.round(2)}\"\nputs \"Standard KAMA (30): #{kama.last.round(2)}\"\nputs \"Long-term KAMA (50): #{kama_50.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/kama/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/kama/#what-it-measures","title":"What It Measures","text":"<p>KAMA measures trend direction with intelligent adaptation:</p> <ul> <li>Adaptive Trend Direction: Automatically adjusts responsiveness based on market conditions</li> <li>Market Efficiency: Measures directional movement versus noise</li> <li>Dynamic Smoothing: Fast in trends, slow in ranges</li> <li>Whipsaw Reduction: Minimizes false signals in choppy markets</li> </ul> <p>KAMA solves the fundamental problem of fixed-parameter moving averages: they cannot adapt to changing market conditions. KAMA's efficiency ratio allows it to be responsive when needed and smooth when volatility is high.</p>"},{"location":"indicators/overlap/kama/#calculation-method","title":"Calculation Method","text":"<p>KAMA uses the Efficiency Ratio (ER) to adapt its smoothing:</p> <ol> <li>Calculate Change: Net price change over period</li> <li>Calculate Volatility: Sum of absolute price changes</li> <li>Calculate Efficiency Ratio: Change / Volatility</li> <li>Calculate Smoothing Constant: Scale ER between fast and slow constants</li> <li>Apply Adaptive Smoothing: Use SC to calculate KAMA</li> </ol>"},{"location":"indicators/overlap/kama/#formula","title":"Formula","text":"<p>KAMA adapts its smoothing factor based on the Efficiency Ratio (ER):</p> <ol> <li>Calculate Efficiency Ratio: ER = Change / Volatility</li> <li>Calculate Smoothing Constant: SC = (ER * (Fast - Slow) + Slow)\u00b2</li> <li>Apply: KAMA = KAMA_prev + SC * (Price - KAMA_prev)</li> </ol> <p>Where Fast and Slow are the fastest and slowest smoothing constants.</p>"},{"location":"indicators/overlap/kama/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (follows price range)</li> <li>Type: Overlay indicator (plotted on price chart)</li> <li>Lag: Adaptive (low in trends, medium in ranges)</li> <li>Best Used: All market conditions, adaptive trend following</li> </ul>"},{"location":"indicators/overlap/kama/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/kama/#value-ranges","title":"Value Ranges","text":"<p>KAMA's value adapts to market conditions:</p> <ul> <li>KAMA Rising: Indicates uptrend</li> <li>KAMA Falling: Indicates downtrend</li> <li>KAMA Flat: Ranging market detected, reduced sensitivity</li> </ul>"},{"location":"indicators/overlap/kama/#key-levels","title":"Key Levels","text":"<ul> <li>Price Above KAMA: Bullish condition</li> <li>Price Below KAMA: Bearish condition</li> <li>Price Crossing KAMA: Trend change (quality depends on efficiency)</li> <li>KAMA Slope: Indicates trend strength and market efficiency</li> </ul>"},{"location":"indicators/overlap/kama/#signal-interpretation","title":"Signal Interpretation","text":"<ol> <li>Trend Direction</li> <li>Price above rising KAMA = strong uptrend</li> <li>Price below falling KAMA = strong downtrend</li> <li> <p>KAMA flat = low efficiency, avoid trend-following</p> </li> <li> <p>Momentum Changes</p> </li> <li>KAMA steepening = increasing efficiency, strong trend</li> <li>KAMA flattening = decreasing efficiency, weakening trend</li> <li> <p>KAMA adaptation = market regime change</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price crosses with high efficiency = strong signal</li> <li>Price crosses with low efficiency = weak signal, likely whipsaw</li> <li>Confirm with other indicators</li> </ol>"},{"location":"indicators/overlap/kama/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/kama/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price crosses above KAMA while efficiency is increasing</li> <li>Confirmation Signal: KAMA slope turning upward</li> <li>Entry Criteria: Wait for pullback to KAMA in uptrend</li> </ol> <p>Example Scenario: <pre><code>When price crosses above KAMA and market efficiency is high (trending),\nenter long with stop loss 2-3% below KAMA.\nKAMA's adaptation means tighter stops in volatile markets.\n</code></pre></p>"},{"location":"indicators/overlap/kama/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price crosses below KAMA while efficiency is decreasing</li> <li>Confirmation Signal: KAMA slope turning downward</li> <li>Exit Criteria: Exit when KAMA flattens (low efficiency detected)</li> </ol> <p>Example Scenario: <pre><code>When price crosses below KAMA or KAMA flattens significantly,\nexit long positions. KAMA's flattening indicates ranging market ahead.\n</code></pre></p>"},{"location":"indicators/overlap/kama/#returns","title":"Returns","text":"<p>Returns an array of KAMA values. The first several values will be <code>nil</code> due to the calculation requiring sufficient data points.</p>"},{"location":"indicators/overlap/kama/#usage_1","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00, 49.15, 49.30]\n\n# Calculate 30-period KAMA (default)\nkama = SQA::TAI.kama(prices)\n\n# Calculate 10-period KAMA for shorter-term adaptation\nkama_10 = SQA::TAI.kama(prices, period: 10)\n\nputs \"Current KAMA: #{kama.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/kama/#interpretation_1","title":"Interpretation","text":"<p>KAMA's adaptive nature makes it unique among moving averages:</p> <ul> <li>Trending Markets: KAMA hugs price closely, providing timely signals</li> <li>Choppy Markets: KAMA flattens out, avoiding whipsaws</li> <li>Price crosses above KAMA: Potential buy signal</li> <li>Price crosses below KAMA: Potential sell signal</li> <li>KAMA slope: Indicates trend strength</li> </ul>"},{"location":"indicators/overlap/kama/#example-kama-trend-following","title":"Example: KAMA Trend Following","text":"<pre><code>prices = load_historical_prices('AAPL')\nkama = SQA::TAI.kama(prices, period: 20)\n\ncurrent_price = prices.last\ncurrent_kama = kama.last\nprevious_kama = kama[-2]\n\n# Check KAMA direction\nkama_rising = current_kama &gt; previous_kama\nkama_falling = current_kama &lt; previous_kama\n\n# Check price position\nprice_above = current_price &gt; current_kama\nprice_below = current_price &lt; current_kama\n\nif kama_rising &amp;&amp; price_above\n  puts \"STRONG UPTREND - KAMA rising, price above\"\nelsif kama_falling &amp;&amp; price_below\n  puts \"STRONG DOWNTREND - KAMA falling, price below\"\nelsif kama_rising &amp;&amp; price_below\n  puts \"Pullback in uptrend - potential buy opportunity\"\nelsif kama_falling &amp;&amp; price_above\n  puts \"Rally in downtrend - potential sell opportunity\"\nend\n</code></pre>"},{"location":"indicators/overlap/kama/#example-kama-crossover-system","title":"Example: KAMA Crossover System","text":"<pre><code>prices = load_historical_prices('SPY')\nkama = SQA::TAI.kama(prices, period: 20)\n\n# Check for price crossing KAMA\nprice_current = prices.last\nprice_previous = prices[-2]\nkama_current = kama.last\nkama_previous = kama[-2]\n\n# Bullish crossover\nif price_previous &lt;= kama_previous &amp;&amp; price_current &gt; kama_current\n  puts \"BULLISH CROSSOVER - Price crossed above KAMA\"\n  puts \"Entry signal: BUY\"\n# Bearish crossover\nelsif price_previous &gt;= kama_previous &amp;&amp; price_current &lt; kama_current\n  puts \"BEARISH CROSSOVER - Price crossed below KAMA\"\n  puts \"Exit/Short signal: SELL\"\nend\n</code></pre>"},{"location":"indicators/overlap/kama/#example-kama-with-efficiency-ratio","title":"Example: KAMA with Efficiency Ratio","text":"<pre><code>prices = load_historical_prices('TSLA')\nkama = SQA::TAI.kama(prices, period: 20)\n\n# Calculate simple efficiency proxy (price range vs total movement)\nperiod = 20\nprice_change = (prices.last - prices[-period]).abs\ntotal_movement = 0\n(1...period).each do |i|\n  total_movement += (prices[-i] - prices[-(i+1)]).abs\nend\n\nefficiency = total_movement &gt; 0 ? price_change / total_movement : 0\n\nputs \"Market Efficiency: #{(efficiency * 100).round(2)}%\"\n\nif efficiency &gt; 0.5\n  puts \"HIGH EFFICIENCY - Strong trending market\"\n  puts \"KAMA will be more responsive\"\nelsif efficiency &lt; 0.2\n  puts \"LOW EFFICIENCY - Choppy market\"\n  puts \"KAMA will be smoother, fewer signals\"\nelse\n  puts \"MODERATE EFFICIENCY - Mixed market conditions\"\nend\n</code></pre>"},{"location":"indicators/overlap/kama/#example-multi-timeframe-kama","title":"Example: Multi-Timeframe KAMA","text":"<pre><code># Assuming different timeframe data\ndaily_prices = load_historical_prices('MSFT', timeframe: 'daily')\nweekly_prices = load_historical_prices('MSFT', timeframe: 'weekly')\n\ndaily_kama = SQA::TAI.kama(daily_prices, period: 20)\nweekly_kama = SQA::TAI.kama(weekly_prices, period: 20)\n\ndaily_price = daily_prices.last\nweekly_price = weekly_prices.last\n\ndaily_trend = daily_price &gt; daily_kama.last ? \"UP\" : \"DOWN\"\nweekly_trend = weekly_price &gt; weekly_kama.last ? \"UP\" : \"DOWN\"\n\nputs \"Daily trend: #{daily_trend}\"\nputs \"Weekly trend: #{weekly_trend}\"\n\nif daily_trend == \"UP\" &amp;&amp; weekly_trend == \"UP\"\n  puts \"ALIGNED UPTREND - Strongest bullish setup\"\nelsif daily_trend == \"DOWN\" &amp;&amp; weekly_trend == \"DOWN\"\n  puts \"ALIGNED DOWNTREND - Strongest bearish setup\"\nelse\n  puts \"CONFLICTING TRENDS - Wait for alignment\"\nend\n</code></pre>"},{"location":"indicators/overlap/kama/#advantages-over-traditional-moving-averages","title":"Advantages Over Traditional Moving Averages","text":"<ol> <li>Adaptive: Automatically adjusts to market conditions</li> <li>Reduced Whipsaws: Slows down in choppy markets</li> <li>Timely in Trends: Responds quickly in trending markets</li> <li>Self-Optimizing: No need to constantly adjust parameters</li> </ol>"},{"location":"indicators/overlap/kama/#common-settings","title":"Common Settings","text":"Period Use Case 10 Short-term, highly adaptive 20 Standard intraday and swing trading 30 Medium-term position trading (default) 50+ Long-term trend identification"},{"location":"indicators/overlap/kama/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When KAMA works best: - All market conditions: KAMA adapts to both trending and ranging markets - Volatile markets: Automatically adjusts to volatility changes - All timeframes: Effective on all timeframes due to adaptive nature - Smart trend following: Best for traders who want automatic adaptation</p>"},{"location":"indicators/overlap/kama/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Use ADX to measure trend strength alongside KAMA efficiency - Combine with fixed MA to compare adaptive vs non-adaptive signals</p> <p>With Volume Indicators: - Confirm KAMA signals with volume for higher probability - Use volume to validate efficiency ratio readings</p> <p>With Other Oscillators: - RSI helps identify overbought/oversold within KAMA trends - MACD provides momentum confirmation for KAMA signals</p>"},{"location":"indicators/overlap/kama/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li>Ignoring Efficiency: Don't trade KAMA signals in low-efficiency markets</li> <li>Over-optimization: Period affects efficiency calculation; don't over-optimize</li> <li>Expecting Constant Response: KAMA changes speed; accept this variability</li> <li>Using Alone: While adaptive, KAMA still benefits from confirmation</li> </ol>"},{"location":"indicators/overlap/kama/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading: 10-20 period KAMA for frequent adaptation</li> <li>Medium-term trading: 20-30 period KAMA for balanced adaptation</li> <li>Long-term trading: 30-50 period KAMA for major trend identification</li> <li>Backtesting: Test period selection but remember KAMA auto-adapts</li> </ul>"},{"location":"indicators/overlap/kama/#practical-example","title":"Practical Example","text":"<p>See the comprehensive examples above demonstrating: - KAMA trend following with efficiency analysis - KAMA crossover systems - Multi-timeframe KAMA alignment - Efficiency ratio interpretation</p>"},{"location":"indicators/overlap/kama/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/kama/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use KAMA across multiple timeframes: - Higher timeframe KAMA for overall market direction - Lower timeframe KAMA for entry timing - Compare efficiency ratios across timeframes - Only trade when efficiency is high on multiple timeframes</p>"},{"location":"indicators/overlap/kama/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>KAMA automatically adapts but understanding helps: - High efficiency (&gt;0.5): Strong trending, KAMA responsive - Medium efficiency (0.2-0.5): Mixed conditions, KAMA balanced - Low efficiency (&lt;0.2): Ranging market, KAMA slow - Monitor efficiency to understand KAMA behavior</p>"},{"location":"indicators/overlap/kama/#statistical-validation","title":"Statistical Validation","text":"<p>KAMA reliability metrics: - Most reliable when efficiency ratio is high (&gt;0.5) - Reduces whipsaws by 30-50% vs fixed MAs in ranging markets - Maintains trend-following effectiveness in trending markets - Best combined with efficiency ratio analysis for signal quality</p>"},{"location":"indicators/overlap/kama/#references","title":"References","text":"<ul> <li>Kaufman, Perry J. \"Trading Systems and Methods\"</li> <li>Kaufman, Perry J. \"New Trading Systems and Methods\"</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\"</li> </ul>"},{"location":"indicators/overlap/kama/#best-practices","title":"Best Practices","text":"<ol> <li>Combine with Volume: Confirm KAMA signals with volume</li> <li>Use Multiple Timeframes: Check alignment across timeframes</li> <li>Wait for Confirmed Breaks: Avoid false signals at KAMA touches</li> <li>Consider Market Regime: KAMA works best in markets with clear trend/range cycles</li> <li>Monitor Efficiency: Track efficiency ratio to understand KAMA's current mode</li> </ol>"},{"location":"indicators/overlap/kama/#related-indicators","title":"Related Indicators","text":"<ul> <li>EMA - Exponential Moving Average</li> <li>DEMA - Double Exponential Moving Average</li> <li>TEMA - Triple Exponential Moving Average</li> <li>T3 - Tillson T3 Moving Average</li> <li>MAMA - MESA Adaptive Moving Average</li> </ul>"},{"location":"indicators/overlap/kama/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Overlap Studies Overview</li> </ul>"},{"location":"indicators/overlap/ma/","title":"MA (Moving Average - Generic Interface)","text":""},{"location":"indicators/overlap/ma/#overview","title":"Overview","text":"<p>The Generic Moving Average (MA) function is a unified interface that provides access to all eight supported moving average types in SQA::TAI through a single, convenient method. This powerful abstraction eliminates the need to call individual moving average functions, making it easier to switch between different MA types, implement strategies that dynamically select MA algorithms, or compare multiple MA types simultaneously. The MA function is particularly valuable for backtesting systems, adaptive strategies, and educational purposes where understanding the differences between MA types is important.</p>"},{"location":"indicators/overlap/ma/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 30 Number of periods for MA calculation <code>ma_type</code> Integer 0 Moving average type (0-8, see table below)"},{"location":"indicators/overlap/ma/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types for specialized applications - Requirements vary by MA type selected - More historical data provides better context</p> <p>period (time_period) - Default is 30 periods - Applies to all MA types uniformly - Common periods:   - 9-20 periods: Short-term trading   - 20-50 periods: Medium-term trends   - 50-200 periods: Long-term trends - Each MA type interprets the period differently based on its algorithm</p> <p>ma_type (moving_average_type) - Selects which MA algorithm to use - Integer values 0-8 correspond to specific MA types - Each type has different lag, smoothness, and responsiveness characteristics - See MA Types table below for detailed comparison</p>"},{"location":"indicators/overlap/ma/#moving-average-types","title":"Moving Average Types","text":"ma_type Name Weighting Lag Best For 0 SMA Equal High Basic trend, support/resistance 1 EMA Exponential Medium Responsive trend following 2 WMA Linear Medium Balance of smoothness 3 DEMA Double Exponential Low Reduced lag trading 4 TEMA Triple Exponential Very Low Minimal lag, fast signals 5 TRIMA Triangular Very High Smoothest, noise reduction 6 KAMA Adaptive Adaptive Auto-adjusts to volatility 7 MAMA Adaptive Low Cycle-adaptive 8 T3 Multi-EMA Low Smooth with low lag"},{"location":"indicators/overlap/ma/#usage","title":"Usage","text":""},{"location":"indicators/overlap/ma/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02, 46.83, 47.21,\n          47.55, 47.98, 48.30, 48.67, 49.01, 49.45]\n\n# Calculate a 30-period Simple Moving Average (default)\nma = SQA::TAI.ma(prices, period: 30)\n\n# Calculate a 30-period Exponential Moving Average\nema = SQA::TAI.ma(prices, period: 30, ma_type: 1)\n\n# Calculate a 30-period DEMA\ndema = SQA::TAI.ma(prices, period: 30, ma_type: 3)\n\nputs \"SMA: #{ma.last.round(2)}\"\nputs \"EMA: #{ema.last.round(2)}\"\nputs \"DEMA: #{dema.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/ma/#parameters_1","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 30 Number of periods for calculation <code>ma_type</code> Integer No 0 Moving average type (see table below)"},{"location":"indicators/overlap/ma/#moving-average-types_1","title":"Moving Average Types","text":"ma_type Name Description Best For 0 SMA Simple Moving Average Basic trend identification, support/resistance 1 EMA Exponential Moving Average Responsive trend following, recent price emphasis 2 WMA Weighted Moving Average Linear weighting, balance of responsiveness 3 DEMA Double Exponential MA Reduced lag, faster trend signals 4 TEMA Triple Exponential MA Minimal lag, smooth trending 5 TRIMA Triangular Moving Average Smoothest, double-smoothed MA 6 KAMA Kaufman Adaptive MA Auto-adjusts to volatility, smart trending 7 MAMA MESA Adaptive MA Cycle-adaptive, frequency-based 8 T3 T3 Moving Average Very smooth, minimal lag"},{"location":"indicators/overlap/ma/#returns","title":"Returns","text":"<p>Returns an array of moving average values. The number of initial <code>nil</code> values depends on the MA type and period used.</p>"},{"location":"indicators/overlap/ma/#interpretation","title":"Interpretation","text":"<p>Moving averages smooth price data to identify trends:</p> <ul> <li>Price above MA: Bullish trend</li> <li>Price below MA: Bearish trend</li> <li>MA sloping up: Uptrend</li> <li>MA sloping down: Downtrend</li> <li>Price crossing MA: Potential trend change</li> </ul>"},{"location":"indicators/overlap/ma/#example-comparing-multiple-ma-types","title":"Example: Comparing Multiple MA Types","text":"<pre><code>prices = load_historical_prices('AAPL')\n\n# Calculate all MA types with same period\nma_types = {\n  'SMA' =&gt; 0,\n  'EMA' =&gt; 1,\n  'WMA' =&gt; 2,\n  'DEMA' =&gt; 3,\n  'TEMA' =&gt; 4,\n  'TRIMA' =&gt; 5,\n  'KAMA' =&gt; 6,\n  'T3' =&gt; 8\n}\n\nperiod = 20\nresults = {}\n\nma_types.each do |name, type|\n  ma = SQA::TAI.ma(prices, period: period, ma_type: type)\n  results[name] = ma.last\n  puts \"#{name} (#{period}): #{ma.last.round(2)}\"\nend\n\n# Compare responsiveness\ncurrent_price = prices.last\nresults.each do |name, value|\n  diff = ((current_price - value) / value * 100).round(2)\n  puts \"#{name} distance from price: #{diff}%\"\nend\n</code></pre>"},{"location":"indicators/overlap/ma/#example-dynamic-ma-type-selection","title":"Example: Dynamic MA Type Selection","text":"<pre><code>prices = load_historical_prices('TSLA')\n\n# Calculate volatility to choose appropriate MA type\natr = SQA::TAI.atr(\n  load_historical_data('TSLA', field: :high),\n  load_historical_data('TSLA', field: :low),\n  prices,\n  period: 14\n)\n\ncurrent_volatility = atr.last\navg_volatility = atr.compact.sum / atr.compact.size\n\n# Select MA type based on market conditions\nma_type = if current_volatility &gt; avg_volatility * 1.5\n  # High volatility - use smoother MA\n  5  # TRIMA\nelsif current_volatility &lt; avg_volatility * 0.7\n  # Low volatility - use responsive MA\n  3  # DEMA\nelse\n  # Normal volatility - use adaptive MA\n  6  # KAMA\nend\n\nma_names = ['SMA', 'EMA', 'WMA', 'DEMA', 'TEMA', 'TRIMA', 'KAMA', 'MAMA', 'T3']\nma = SQA::TAI.ma(prices, period: 20, ma_type: ma_type)\n\nputs \"Current Volatility: #{(current_volatility / prices.last * 100).round(2)}%\"\nputs \"Using: #{ma_names[ma_type]}\"\nputs \"MA Value: #{ma.last.round(2)}\"\nputs \"Price: #{prices.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/ma/#example-multi-timeframe-ma-strategy","title":"Example: Multi-Timeframe MA Strategy","text":"<pre><code>prices = load_historical_prices('MSFT')\n\n# Use different MA types for different purposes\nfast_ma = SQA::TAI.ma(prices, period: 10, ma_type: 1)   # EMA - fast signals\nmedium_ma = SQA::TAI.ma(prices, period: 20, ma_type: 3) # DEMA - balanced\nslow_ma = SQA::TAI.ma(prices, period: 50, ma_type: 0)   # SMA - trend filter\n\ncurrent_price = prices.last\n\n# Determine trend\ntrend = if fast_ma.last &gt; medium_ma.last &amp;&amp; medium_ma.last &gt; slow_ma.last\n  'STRONG UPTREND'\nelsif fast_ma.last &lt; medium_ma.last &amp;&amp; medium_ma.last &lt; slow_ma.last\n  'STRONG DOWNTREND'\nelsif fast_ma.last &gt; slow_ma.last\n  'UPTREND'\nelsif fast_ma.last &lt; slow_ma.last\n  'DOWNTREND'\nelse\n  'NEUTRAL'\nend\n\nputs \"Trend: #{trend}\"\nputs \"Fast MA (10 EMA): #{fast_ma.last.round(2)}\"\nputs \"Medium MA (20 DEMA): #{medium_ma.last.round(2)}\"\nputs \"Slow MA (50 SMA): #{slow_ma.last.round(2)}\"\n\n# Generate signals\nif fast_ma.last &gt; medium_ma.last &amp;&amp; fast_ma[-2] &lt;= medium_ma[-2]\n  puts \"BUY Signal: Fast MA crossed above Medium MA\"\nelsif fast_ma.last &lt; medium_ma.last &amp;&amp; fast_ma[-2] &gt;= medium_ma[-2]\n  puts \"SELL Signal: Fast MA crossed below Medium MA\"\nend\n\n# Confirm with slow MA\nif current_price &gt; slow_ma.last\n  puts \"Trend Confirmation: Price above slow MA - favor longs\"\nelse\n  puts \"Trend Confirmation: Price below slow MA - favor shorts\"\nend\n</code></pre>"},{"location":"indicators/overlap/ma/#example-ma-type-performance-comparison","title":"Example: MA Type Performance Comparison","text":"<pre><code>prices = load_historical_prices('SPY')\n\n# Test different MA types over historical data\nperiod = 20\nma_types = [0, 1, 2, 3, 4, 5, 6, 8]\nma_names = ['SMA', 'EMA', 'WMA', 'DEMA', 'TEMA', 'TRIMA', 'KAMA', 'T3']\n\nputs \"Analyzing MA Performance:\"\nputs \"-\" * 60\n\nma_types.each_with_index do |type, i|\n  ma = SQA::TAI.ma(prices, period: period, ma_type: type)\n\n  # Calculate metrics\n  valid_data = prices.zip(ma).reject { |p, m| m.nil? }\n\n  # Average distance from price\n  distances = valid_data.map { |p, m| ((p - m).abs / m * 100) }\n  avg_distance = (distances.sum / distances.size).round(3)\n\n  # Responsiveness (how much MA changes)\n  changes = ma.compact.each_cons(2).map { |a, b| ((b - a).abs / a * 100) }\n  avg_change = (changes.sum / changes.size).round(3)\n\n  # Current values\n  current_ma = ma.last.round(2)\n  current_diff = ((prices.last - current_ma) / current_ma * 100).round(2)\n\n  puts \"#{ma_names[i].ljust(8)} | MA: #{current_ma.to_s.rjust(8)} | \" \\\n       \"Diff: #{current_diff.to_s.rjust(6)}% | \" \\\n       \"Avg Dist: #{avg_distance.to_s.rjust(5)}% | \" \\\n       \"Responsiveness: #{avg_change.to_s.rjust(5)}%\"\nend\n\nputs \"-\" * 60\nputs \"Interpretation:\"\nputs \"- Lower Avg Distance = Closer to price (more responsive)\"\nputs \"- Higher Responsiveness = Reacts faster to changes\"\nputs \"- Trade-off: Responsive MAs may whipsaw more\"\n</code></pre>"},{"location":"indicators/overlap/ma/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/overlap/ma/#1-universal-ma-crossover","title":"1. Universal MA Crossover","text":"<p>Use any MA type for crossover signals: <pre><code>fast = SQA::TAI.ma(prices, period: 10, ma_type: 1)  # EMA\nslow = SQA::TAI.ma(prices, period: 30, ma_type: 0)  # SMA\n# Buy when fast crosses above slow\n</code></pre></p>"},{"location":"indicators/overlap/ma/#2-adaptive-ma-strategy","title":"2. Adaptive MA Strategy","text":"<p>Switch MA types based on market conditions: - Trending: Use DEMA or TEMA (responsive) - Ranging: Use TRIMA or SMA (smooth) - Volatile: Use KAMA (adaptive)</p>"},{"location":"indicators/overlap/ma/#3-ma-type-divergence","title":"3. MA Type Divergence","text":"<p>Compare fast and slow MA types: <pre><code>fast_responsive = SQA::TAI.ma(prices, period: 20, ma_type: 3)  # DEMA\nslow_smooth = SQA::TAI.ma(prices, period: 20, ma_type: 5)      # TRIMA\n# Divergence between types signals momentum change\n</code></pre></p>"},{"location":"indicators/overlap/ma/#4-ma-envelope-strategy","title":"4. MA Envelope Strategy","text":"<p>Create envelopes around any MA type: <pre><code>ma = SQA::TAI.ma(prices, period: 20, ma_type: 6)  # KAMA\nupper = ma.map { |m| m * 1.02 }  # +2%\nlower = ma.map { |m| m * 0.98 }  # -2%\n</code></pre></p>"},{"location":"indicators/overlap/ma/#common-settings","title":"Common Settings","text":"Period Use Case Recommended MA Type 9-13 Short-term trading EMA (1), DEMA (3) 20-26 Swing trading EMA (1), TEMA (4) 50 Medium-term trend SMA (0), KAMA (6) 100-200 Long-term trend SMA (0), TRIMA (5)"},{"location":"indicators/overlap/ma/#ma-type-selection-guide","title":"MA Type Selection Guide","text":""},{"location":"indicators/overlap/ma/#when-to-use-each-type","title":"When to Use Each Type:","text":"<p>SMA (0): Classic analysis, support/resistance levels, long-term trends</p> <p>EMA (1): Most popular, good balance, all timeframes</p> <p>WMA (2): When you want more weight on recent data than SMA but less than EMA</p> <p>DEMA (3): Trending markets, need faster signals, trend following</p> <p>TEMA (4): Strong trends, minimize lag, momentum trading</p> <p>TRIMA (5): Ranging markets, noise reduction, smooth analysis</p> <p>KAMA (6): Volatile/changing markets, automatic adaptation, sophisticated strategies</p> <p>MAMA (7): Cycle trading, frequency analysis, advanced technical analysis</p> <p>T3 (8): Smooth trends, minimal whipsaws, position trading</p>"},{"location":"indicators/overlap/ma/#performance-characteristics","title":"Performance Characteristics","text":"MA Type Lag Smoothness Responsiveness Complexity SMA High Medium Low Low EMA Medium Medium Medium Low WMA Medium Medium Medium Low DEMA Low Low High Medium TEMA Very Low Low Very High Medium TRIMA Very High Very High Low Low KAMA Adaptive Medium Adaptive High MAMA Low Medium High Very High T3 Low Very High Medium High"},{"location":"indicators/overlap/ma/#related-indicators","title":"Related Indicators","text":"<ul> <li>Simple Moving Average (SMA) - Individual SMA documentation</li> <li>Exponential Moving Average (EMA) - Individual EMA documentation</li> <li>DEMA - Double Exponential MA</li> <li>TEMA - Triple Exponential MA</li> <li>TRIMA - Triangular MA</li> <li>KAMA - Kaufman Adaptive MA</li> <li>T3 - T3 Moving Average</li> <li>WMA - Weighted Moving Average</li> </ul>"},{"location":"indicators/overlap/ma/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Trend Analysis Example</li> </ul>"},{"location":"indicators/overlap/sma/","title":"SMA (Simple Moving Average)","text":""},{"location":"indicators/overlap/sma/#overview","title":"Overview","text":"<p>The Simple Moving Average (SMA) is the most basic and widely used moving average in technical analysis. Developed as one of the earliest technical indicators, SMA calculates the arithmetic mean of prices over a specified period, giving equal weight to each data point. Despite its simplicity, the SMA remains a cornerstone of technical analysis, serving as a foundation for trend identification, support/resistance levels, and as a component in numerous other technical indicators.</p>"},{"location":"indicators/overlap/sma/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 30 Number of periods for SMA calculation"},{"location":"indicators/overlap/sma/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types (high, low, open, typical price) for specialized analysis - Requires at least <code>period</code> number of data points for calculation - More historical data provides better context for crossover and trend analysis</p> <p>period (time_period) - No universally \"correct\" period; choice depends on trading timeframe and style - Common periods and their uses:   - 10-20 periods: Short-term trends, day trading   - 50 periods: Intermediate trends, swing trading   - 200 periods: Long-term trends, major support/resistance - Shorter periods are more responsive but generate more noise - Longer periods are smoother but have greater lag - Recommended ranges:   - Day trading: 9-20 periods   - Swing trading: 20-50 periods   - Position trading: 50-200 periods</p>"},{"location":"indicators/overlap/sma/#usage","title":"Usage","text":""},{"location":"indicators/overlap/sma/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41]\n\n# Calculate 5-period SMA\nsma = SQA::TAI.sma(prices, period: 5)\n\nputs \"Current SMA: #{sma.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/sma/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Calculate multiple SMAs for trend analysis\nsma_20 = SQA::TAI.sma(prices, period: 20)   # Short-term trend\nsma_50 = SQA::TAI.sma(prices, period: 50)   # Intermediate trend\nsma_200 = SQA::TAI.sma(prices, period: 200) # Long-term trend\n\nputs \"20-period SMA: #{sma_20.last.round(2)}\"\nputs \"50-period SMA: #{sma_50.last.round(2)}\"\nputs \"200-period SMA: #{sma_200.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/sma/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/sma/#what-it-measures","title":"What It Measures","text":"<p>The Simple Moving Average measures the average price over a specified period:</p> <ul> <li>Trend Direction: Shows the overall direction of price movement by smoothing out short-term fluctuations</li> <li>Momentum: The slope of the SMA indicates trend strength (steep = strong, flat = weak)</li> <li>Support/Resistance: Acts as dynamic support in uptrends and resistance in downtrends</li> <li>Fair Value: Represents a consensus price level over the specified period</li> </ul> <p>SMA answers the question: \"What has been the average price over the recent period, and is current price above or below that average?\"</p>"},{"location":"indicators/overlap/sma/#calculation-method","title":"Calculation Method","text":"<p>The SMA is calculated using simple arithmetic:</p> <ol> <li>Sum Prices: Add up all closing prices over the specified period</li> <li>Divide by Period: Divide the sum by the number of periods</li> <li>Move Forward: For each new price, drop the oldest price and add the newest</li> <li>Repeat: This creates a moving average that follows price action</li> </ol> <p>Formula: <pre><code>SMA = (P1 + P2 + P3 + ... + Pn) / n\n\nWhere:\nP = Price at each period\nn = Number of periods\n\nExample for 5-period SMA:\nPrices: [10, 11, 12, 11, 10]\nSMA = (10 + 11 + 12 + 11 + 10) / 5 = 54 / 5 = 10.8\n</code></pre></p>"},{"location":"indicators/overlap/sma/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded; moves with price</li> <li>Type: Trend-following overlay indicator</li> <li>Lag: High lag due to equal weighting of all periods</li> <li>Best Used: Trending markets, trend identification, classical technical analysis</li> <li>Limitations: Lags price action significantly; all data points weighted equally regardless of recency</li> </ul>"},{"location":"indicators/overlap/sma/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/sma/#value-ranges","title":"Value Ranges","text":"<p>The SMA itself doesn't have fixed ranges, but its relationship to price provides signals:</p> <ul> <li>Price Above SMA: Bullish condition; price is trading above average. Suggests uptrend or bullish momentum.</li> <li>Price At SMA: Equilibrium point; price at fair value. Often acts as support or resistance.</li> <li>Price Below SMA: Bearish condition; price is trading below average. Suggests downtrend or bearish momentum.</li> <li>Distance from SMA: Large deviations suggest overbought/oversold conditions and potential mean reversion.</li> </ul>"},{"location":"indicators/overlap/sma/#key-levels","title":"Key Levels","text":"<ul> <li>50-period SMA: Widely watched intermediate trend indicator. Price above = intermediate uptrend, below = intermediate downtrend.</li> <li>200-period SMA: Most important SMA for long-term trend. Acts as major support/resistance. Often called \"the line in the sand.\"</li> <li>Multiple SMA Alignment: When price &gt; SMA20 &gt; SMA50 &gt; SMA200, this shows strong uptrend with all timeframes aligned.</li> </ul>"},{"location":"indicators/overlap/sma/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read SMA signals:</p> <ol> <li>Trend Direction</li> <li>SMA sloping upward: Uptrend</li> <li>SMA sloping downward: Downtrend</li> <li> <p>SMA flat: Consolidation or range-bound</p> </li> <li> <p>Trend Strength</p> </li> <li>Steep SMA slope: Strong trend</li> <li>Gradual SMA slope: Moderate trend</li> <li> <p>Flat SMA: Weak or no trend</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price crosses above SMA: Potential bullish reversal</li> <li>Price crosses below SMA: Potential bearish reversal</li> <li>SMA crossovers: Golden Cross (bullish), Death Cross (bearish)</li> </ol>"},{"location":"indicators/overlap/sma/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/sma/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price crosses above SMA from below</li> <li>Indicates momentum shift from bearish to bullish</li> <li> <p>Most reliable when SMA is sloping upward</p> </li> <li> <p>Confirmation Signal: Price pulls back to SMA and bounces (SMA acts as support)</p> </li> <li>Shows SMA is respected as support level</li> <li> <p>Provides lower-risk entry in established uptrend</p> </li> <li> <p>Golden Cross: Shorter-period SMA crosses above longer-period SMA</p> </li> <li>Classic bullish signal (e.g., 50 SMA crosses above 200 SMA)</li> <li>Indicates major trend change to bullish</li> </ol> <p>Example Scenario: <pre><code>When price crosses above 50-period SMA while the SMA is rising,\nconsider a long position. Confirm with:\n- Volume increasing on the breakout\n- Price closing above SMA (not just touching)\n- 200-period SMA also sloping upward\n- Set stop loss below recent swing low or below SMA\n- Target: Next resistance level or previous high\n</code></pre></p>"},{"location":"indicators/overlap/sma/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price crosses below SMA from above</li> <li>Indicates momentum shift from bullish to bearish</li> <li> <p>Most reliable when SMA is sloping downward</p> </li> <li> <p>Confirmation Signal: Price rallies to SMA and rejects (SMA acts as resistance)</p> </li> <li>Shows SMA is respected as resistance level</li> <li> <p>Provides lower-risk entry for shorts in established downtrend</p> </li> <li> <p>Death Cross: Shorter-period SMA crosses below longer-period SMA</p> </li> <li>Classic bearish signal (e.g., 50 SMA crosses below 200 SMA)</li> <li>Indicates major trend change to bearish</li> </ol> <p>Example Scenario: <pre><code>When price crosses below 50-period SMA while the SMA is falling,\nconsider closing longs or initiating shorts. Confirm with:\n- Volume increasing on the breakdown\n- Price closing below SMA (not just touching)\n- 200-period SMA also sloping downward\n- Set stop loss above recent swing high or above SMA\n- Target: Next support level or previous low\n</code></pre></p>"},{"location":"indicators/overlap/sma/#divergence-analysis","title":"Divergence Analysis","text":"<p>While SMA itself doesn't show divergence, comparing price action to SMA behavior provides insights:</p> <p>Bullish Setup: - Pattern: Price makes lower low but remains above rising SMA - Identification: SMA continues rising while price corrects - Significance: Suggests correction within uptrend, buying opportunity - Reliability: High when price stays above SMA during correction</p> <p>Bearish Setup: - Pattern: Price makes higher high but SMA begins flattening or falling - Identification: Price momentum weakening despite higher prices - Significance: Suggests weakening uptrend, potential reversal - Reliability: High when price starts oscillating around SMA after trend</p>"},{"location":"indicators/overlap/sma/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/sma/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When SMA works best:</p> <ul> <li>Market conditions: Most effective in trending markets. Less useful in choppy, range-bound markets where frequent crossovers generate whipsaws.</li> <li>Time frames: Works on all timeframes. Daily charts most popular for 50/200 SMA. Hourly charts common for day trading with 20/50 SMA.</li> <li>Asset classes: Universal application across stocks, forex, commodities, cryptocurrencies. Particularly reliable for liquid, established markets.</li> </ul>"},{"location":"indicators/overlap/sma/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Momentum Indicators (RSI, MACD): Use SMA for trend direction, RSI/MACD for timing. Only take RSI buy signals when price is above SMA (with-trend trades).</p> </li> <li> <p>With Volume Indicators: Confirm SMA crossovers with volume. Valid breakouts above SMA should show increased volume. Low volume crossovers are less reliable.</p> </li> <li> <p>With Other Moving Averages: Multiple SMA periods (20/50/200) create trend hierarchy. EMA for faster signals, SMA for trend confirmation. Shorter SMA crossing longer SMA generates crossover signals.</p> </li> </ul>"},{"location":"indicators/overlap/sma/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Using single SMA in isolation: SMA alone generates many false signals. Always combine with trend confirmation, volume, or momentum indicators.</p> </li> <li> <p>Chasing crossovers in choppy markets: In ranging markets, price crosses SMA frequently causing whipsaws. Use ADX or other trend strength indicators to filter choppy periods.</p> </li> <li> <p>Ignoring the lag: SMA lags price significantly. By the time SMA signals a trend change, much of the move may be over. Use shorter periods or leading indicators for early entries.</p> </li> <li> <p>Wrong period for timeframe: Using daily chart parameters (50/200) on 5-minute charts, or vice versa, generates poor results. Adjust periods to your trading timeframe.</p> </li> </ol>"},{"location":"indicators/overlap/sma/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading):</li> <li>Period: 9-20 for trend direction</li> <li>Crossover pairs: 9/21 or 12/26</li> <li> <p>Focus: Intraday trends, quick reversals</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>Period: 20-50 (standard)</li> <li>Crossover pairs: 20/50 or 50/100</li> <li> <p>Focus: Multi-day/week trends</p> </li> <li> <p>Long-term trading (position trading):</p> </li> <li>Period: 50-200 for major trends</li> <li>Crossover pairs: 50/200 (Golden/Death Cross)</li> <li> <p>Focus: Monthly/yearly trends, major support/resistance</p> </li> <li> <p>Backtesting approach: Test various periods on historical data. Calculate win rate and profit factor for price-SMA crosses. Optimal period shows best risk/reward for your specific market and timeframe.</p> </li> </ul>"},{"location":"indicators/overlap/sma/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data for a stock\nhistorical_prices = [\n  44.34, 44.09, 44.15, 43.61, 44.33, 44.83, 45.10, 45.42,\n  45.84, 46.08, 46.03, 46.41, 46.22, 45.64, 46.21, 46.25,\n  46.08, 46.46, 46.57, 45.95, 46.50, 46.02, 45.55, 46.08,\n  46.34, 46.00, 45.75, 46.45, 47.02, 46.87, 47.20, 47.55,\n  47.85, 48.10, 48.35, 48.60, 48.85, 49.10, 49.35, 49.60,\n  49.85, 50.10, 50.35, 50.60, 50.85, 51.10, 51.35, 51.60,\n  51.85, 52.10\n]\n\n# Calculate multiple SMAs for comprehensive analysis\nsma_20 = SQA::TAI.sma(historical_prices, period: 20)\nsma_50 = SQA::TAI.sma(historical_prices, period: 50)\n\n# Current values\ncurrent_price = historical_prices.last\ncurrent_sma_20 = sma_20.last\ncurrent_sma_50 = sma_50.last\n\nputs \"=== SMA Trading Analysis ===\"\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"20-period SMA: #{current_sma_20.round(2)}\"\nputs \"50-period SMA: #{current_sma_50.round(2)}\"\nputs\n\n# Determine overall trend\nif current_price &gt; current_sma_20 &amp;&amp; current_sma_20 &gt; current_sma_50\n  trend = \"STRONG UPTREND\"\n  bias = \"BULLISH\"\nelsif current_price &lt; current_sma_20 &amp;&amp; current_sma_20 &lt; current_sma_50\n  trend = \"STRONG DOWNTREND\"\n  bias = \"BEARISH\"\nelsif current_price &gt; current_sma_20\n  trend = \"SHORT-TERM UPTREND\"\n  bias = \"CAUTIOUSLY BULLISH\"\nelsif current_price &lt; current_sma_20\n  trend = \"SHORT-TERM DOWNTREND\"\n  bias = \"CAUTIOUSLY BEARISH\"\nelse\n  trend = \"NEUTRAL/CONSOLIDATING\"\n  bias = \"NEUTRAL\"\nend\n\nputs \"Trend: #{trend}\"\nputs \"Bias: #{bias}\"\nputs\n\n# Detect crossovers\nif sma_20[-2] &lt; sma_50[-2] &amp;&amp; sma_20.last &gt; sma_50.last\n  puts \"GOLDEN CROSS DETECTED!\"\n  puts \"20 SMA crossed above 50 SMA\"\n  puts \"Strong bullish signal - major trend change\"\n  puts\nelsif sma_20[-2] &gt; sma_50[-2] &amp;&amp; sma_20.last &lt; sma_50.last\n  puts \"DEATH CROSS DETECTED!\"\n  puts \"20 SMA crossed below 50 SMA\"\n  puts \"Strong bearish signal - major trend change\"\n  puts\nend\n\n# Check price position relative to SMAs\nprice_to_sma20_pct = ((current_price - current_sma_20) / current_sma_20 * 100).round(2)\nprice_to_sma50_pct = ((current_price - current_sma_50) / current_sma_50 * 100).round(2)\n\nputs \"Price distance from 20 SMA: #{price_to_sma20_pct}%\"\nputs \"Price distance from 50 SMA: #{price_to_sma50_pct}%\"\nputs\n\n# Trading signals\nif current_price &gt; current_sma_20 &amp;&amp; historical_prices[-2] &lt;= sma_20[-2]\n  puts \"BUY SIGNAL: Price crossed above 20 SMA\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{(current_sma_20 * 0.98).round(2)} (2% below 20 SMA)\"\n  puts \"Target: Previous resistance or extended move\"\n  puts\n\nelsif current_price &lt; current_sma_20 &amp;&amp; historical_prices[-2] &gt;= sma_20[-2]\n  puts \"SELL SIGNAL: Price crossed below 20 SMA\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{(current_sma_20 * 1.02).round(2)} (2% above 20 SMA)\"\n  puts \"Target: Previous support or extended move\"\n  puts\n\nelsif price_to_sma20_pct &gt; 5 &amp;&amp; bias == \"BULLISH\"\n  puts \"TAKE PROFITS SIGNAL\"\n  puts \"Price extended #{price_to_sma20_pct}% above 20 SMA\"\n  puts \"Consider taking partial profits\"\n  puts \"Potential mean reversion to SMA\"\n  puts\n\nelsif price_to_sma20_pct &lt; -5 &amp;&amp; bias == \"BEARISH\"\n  puts \"COVER SHORTS SIGNAL\"\n  puts \"Price extended #{price_to_sma20_pct.abs}% below 20 SMA\"\n  puts \"Consider covering partial shorts\"\n  puts \"Potential mean reversion to SMA\"\n  puts\n\nelsif price_to_sma20_pct.abs &lt; 1\n  puts \"PRICE AT SMA\"\n  if bias == \"BULLISH\"\n    puts \"Price testing 20 SMA support\"\n    puts \"Watch for bounce - potential buying opportunity\"\n  elsif bias == \"BEARISH\"\n    puts \"Price testing 20 SMA resistance\"\n    puts \"Watch for rejection - potential shorting opportunity\"\n  end\n  puts\n\nelse\n  puts \"NO CLEAR SIGNAL - HOLD CURRENT POSITIONS\"\n  puts \"Waiting for price to reach key levels\"\n  puts\nend\n\n# Calculate SMA slope for trend strength\nsma20_slope = ((current_sma_20 - sma_20[-5]) / sma_20[-5] * 100).round(2)\nsma50_slope = ((current_sma_50 - sma_50[-10]) / sma_50[-10] * 100).round(2)\n\nputs \"=== Trend Strength Analysis ===\"\nputs \"20 SMA slope (5 bars): #{sma20_slope}%\"\nputs \"50 SMA slope (10 bars): #{sma50_slope}%\"\n\nif sma20_slope &gt; 2\n  puts \"Strong upward momentum on 20 SMA\"\nelsif sma20_slope &lt; -2\n  puts \"Strong downward momentum on 20 SMA\"\nelse\n  puts \"Flat or weak momentum on 20 SMA\"\nend\n</code></pre>"},{"location":"indicators/overlap/sma/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/overlap/sma/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>Exponential Moving Average (EMA): Gives more weight to recent prices. EMA is more responsive than SMA but also more prone to whipsaws. Use EMA when you need faster signals, SMA for smoother analysis.</li> <li>Weighted Moving Average (WMA): Applies linear weighting. WMA falls between SMA and EMA in responsiveness. Less common but useful for balanced approach.</li> </ul>"},{"location":"indicators/overlap/sma/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>Bollinger Bands: Uses SMA as middle band with standard deviation bands. Perfect combination for volatility and mean reversion analysis.</li> <li>MACD: Uses EMAs but combines well with SMA for trend confirmation. Use 200 SMA for long-term trend, MACD for timing.</li> <li>ADX: Measures trend strength. Use ADX to determine when SMA signals are most reliable (ADX &gt; 25 = strong trend, use SMA crosses).</li> </ul>"},{"location":"indicators/overlap/sma/#indicator-family","title":"Indicator Family","text":"<p>SMA belongs to the moving average family: - SMA: Equal weighting, smoothest, highest lag - EMA: Exponential weighting, more responsive - WMA: Linear weighting, balanced approach - DEMA/TEMA: Multiple smoothing, lowest lag</p> <p>When to prefer SMA: For classical technical analysis, identifying major support/resistance (especially 200 SMA), and when you want the most reliable long-term trend indicator. SMA's lag is actually beneficial for filtering noise and avoiding false signals.</p>"},{"location":"indicators/overlap/sma/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/sma/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use SMA across multiple timeframes for comprehensive analysis:</p> <ul> <li>Higher timeframe SMA (daily 200 SMA) identifies major trend direction - this is your primary trend filter</li> <li>Lower timeframe SMA (hourly 20 SMA) provides precise entry timing within the higher timeframe trend</li> <li>Strongest trades when all timeframes align (price above daily 200 SMA, hourly 20 SMA, and 4H 50 SMA)</li> </ul> <p>Example: If daily 200 SMA is rising and price is above it, only take hourly 20 SMA buy signals. Ignore sell signals against the major trend.</p>"},{"location":"indicators/overlap/sma/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>SMA behavior and effectiveness changes in different market conditions:</p> <ul> <li>Trending Markets: SMA works excellently. Price respects SMA as support/resistance. Use SMA crossovers and price-SMA crosses confidently.</li> <li>Ranging Markets: SMA generates many false crossovers. Price oscillates above/below SMA frequently. Consider using shorter periods or different indicators (RSI, Stochastic).</li> <li>High Volatility: Price makes large moves away from SMA. Increase SMA period to filter noise, or use ATR for stop losses instead of SMA-based stops.</li> <li>Low Volatility: Price stays very close to SMA. Small moves trigger signals. Tighten stop losses and take quicker profits.</li> </ul>"},{"location":"indicators/overlap/sma/#statistical-validation","title":"Statistical Validation","text":"<p>SMA reliability metrics and considerations:</p> <ul> <li>Crossover Success Rate: Price crossing SMA has approximately 50-60% success rate in trending markets, but only 40-45% in ranging markets. Always identify trend regime first.</li> <li>Golden/Death Cross Effectiveness: 50/200 SMA crosses are lagging signals but historically reliable. Success rate approximately 60-70% but significant portion of move completed before signal.</li> <li>SMA as Support/Resistance: 200 SMA acts as support/resistance with approximately 65-70% success rate in established trends. First touch usually holds better than subsequent touches.</li> <li>Optimal Period: Varies by market. Test historically: calculate win rate for price-SMA crosses at various periods (10, 20, 30, 50, 100, 200). Peak win rate indicates optimal period for your specific market.</li> </ul>"},{"location":"indicators/overlap/sma/#references","title":"References","text":"<ul> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999) - Classic comprehensive guide covering moving averages</li> <li>Kirkpatrick, Charles D. and Dahlquist, Julie R. \"Technical Analysis: The Complete Resource for Financial Market Technicians\" (2010)</li> <li>StockCharts: Moving Averages - Educational resource for MA analysis</li> <li>TradingView: Moving Averages Guide</li> <li>Granville, Joseph. \"Granville's New Strategy of Daily Stock Market Timing for Maximum Profit\" (1976) - Early work on moving average strategies</li> </ul>"},{"location":"indicators/overlap/sma/#see-also","title":"See Also","text":"<ul> <li>Overlap Studies Overview</li> <li>Exponential Moving Average (EMA) - More responsive alternative</li> <li>Bollinger Bands - Uses SMA as foundation</li> <li>MACD - Uses EMAs but complements SMA analysis</li> <li>Basic Usage Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/overlap/t3/","title":"T3 (Tillson T3 Moving Average)","text":""},{"location":"indicators/overlap/t3/#overview","title":"Overview","text":"<p>The Tillson T3 Moving Average is a sophisticated technical indicator developed by Tim Tillson that achieves an optimal balance between smoothness and lag reduction. Using a unique algorithm involving six exponential smoothings combined with a customizable volume factor, T3 provides one of the smoothest trend indicators available while maintaining excellent responsiveness. The volume factor parameter allows traders to fine-tune the indicator's behavior for different market conditions and trading styles.</p>"},{"location":"indicators/overlap/t3/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 5 Number of periods for calculation <code>vfactor</code> Float 0.7 Volume factor (0 to 1) controlling smoothness vs responsiveness trade-off"},{"location":"indicators/overlap/t3/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types for specialized applications - Requires sufficient data points for the six-layer smoothing calculation - More historical data improves stability of the indicator</p> <p>period (time_period) - Default is 5 periods, optimized by Tillson for most applications - Common periods:   - 5-8 periods: Short-term trading, standard T3 usage   - 10-15 periods: Medium-term trends   - 20+ periods: Long-term trend identification - Shorter periods increase responsiveness - Longer periods provide more smoothing - Most traders use default of 5 and adjust vfactor instead</p> <p>vfactor (volume_factor) - Default is 0.7, providing excellent balance - Range from 0 to 1:   - 0.0-0.3: Very responsive, more noise   - 0.4-0.6: Balanced response   - 0.7 (default): Smooth with good response   - 0.8-1.0: Very smooth, slower response - Lower values = more responsive, less smooth - Higher values = more smooth, less responsive - Adjust based on market volatility and trading style</p>"},{"location":"indicators/overlap/t3/#usage","title":"Usage","text":""},{"location":"indicators/overlap/t3/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70]\n\n# Calculate T3 with default parameters\nt3 = SQA::TAI.t3(prices)\n\nputs \"Current T3: #{t3.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/t3/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Calculate with custom period\nt3_10 = SQA::TAI.t3(prices, period: 10)\n\n# Calculate with different vfactor for more/less smoothness\nt3_smooth = SQA::TAI.t3(prices, period: 5, vfactor: 0.9)      # More smooth\nt3_responsive = SQA::TAI.t3(prices, period: 5, vfactor: 0.5)  # More responsive\n\nputs \"Default T3: #{t3.last.round(2)}\"\nputs \"T3-10: #{t3_10.last.round(2)}\"\nputs \"T3 Smooth (vf=0.9): #{t3_smooth.last.round(2)}\"\nputs \"T3 Responsive (vf=0.5): #{t3_responsive.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/t3/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/t3/#what-it-measures","title":"What It Measures","text":"<p>T3 measures trend direction with optimal smoothness:</p> <ul> <li>Smooth Trend Direction: Six-layer smoothing eliminates most noise</li> <li>Reduced Lag: Despite smoothness, maintains good responsiveness</li> <li>Customizable Behavior: vfactor allows adaptation to market conditions</li> <li>Clear Signals: Reduced noise means fewer false signals</li> </ul> <p>T3 solves the classic dilemma between smoothness and responsiveness. Through its innovative six-pass smoothing with volume factor compensation, T3 achieves smoothness comparable to highly lagged indicators while maintaining much better responsiveness.</p>"},{"location":"indicators/overlap/t3/#calculation-method","title":"Calculation Method","text":"<p>T3 uses a sophisticated six-pass exponential smoothing:</p> <ol> <li>Apply Six EMAs: Each successively smooths the previous</li> <li>Calculate Coefficients: Based on volume factor</li> <li>Combine with Weights: Apply coefficients to different EMA levels</li> <li>Result: Smooth, responsive moving average</li> </ol>"},{"location":"indicators/overlap/t3/#formula","title":"Formula","text":"<p>The T3 is calculated using six exponential smoothings with a volume factor (vfactor) that controls the smoothness versus responsiveness trade-off:</p> <p>T3 = c1 * e6 + c2 * e5 + c3 * e4 + c4 * e3</p> <p>Where e1 through e6 are successive EMAs, and c1-c4 are coefficients derived from the volume factor.</p>"},{"location":"indicators/overlap/t3/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (follows price range)</li> <li>Type: Overlay indicator (plotted on price chart)</li> <li>Lag: Low lag with excellent smoothness</li> <li>Best Used: All timeframes, smooth trend following</li> </ul>"},{"location":"indicators/overlap/t3/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/t3/#value-ranges","title":"Value Ranges","text":"<p>T3's value provides smooth trend indication:</p> <ul> <li>T3 Rising: Uptrend with clean signal</li> <li>T3 Falling: Downtrend with clean signal</li> <li>T3 Flat: Consolidation or range-bound market</li> </ul>"},{"location":"indicators/overlap/t3/#key-levels","title":"Key Levels","text":"<ul> <li>Price Above T3: Bullish condition</li> <li>Price Below T3: Bearish condition</li> <li>Price Crossing T3: Trend change signal (very clean due to smoothness)</li> <li>T3 Slope: Indicates trend strength</li> </ul>"},{"location":"indicators/overlap/t3/#signal-interpretation","title":"Signal Interpretation","text":"<ol> <li>Trend Direction</li> <li>Price above rising T3 = clean uptrend</li> <li>Price below falling T3 = clean downtrend</li> <li> <p>T3 flat = no clear trend</p> </li> <li> <p>Momentum Changes</p> </li> <li>T3 slope steepening = strengthening trend</li> <li>T3 slope flattening = weakening trend</li> <li> <p>T3 slope reversal = trend change</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price crosses are very clean due to T3's smoothness</li> <li>Fewer false signals than most MAs</li> <li>Confirm with volume for best results</li> </ol>"},{"location":"indicators/overlap/t3/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/t3/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price crosses above T3 while T3 is rising</li> <li>Confirmation Signal: Volume increasing on crossover</li> <li>Entry Criteria: T3 slope positive, price above T3</li> </ol> <p>Example Scenario: <pre><code>When price crosses above T3 and T3 slope is positive,\nenter long with stop loss 2-3% below T3.\nT3's smoothness means cleaner signals with less whipsaw.\n</code></pre></p>"},{"location":"indicators/overlap/t3/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price crosses below T3 while T3 is falling</li> <li>Confirmation Signal: Volume increasing on breakdown</li> <li>Exit Criteria: T3 slope negative, price below T3</li> </ol> <p>Example Scenario: <pre><code>When price crosses below T3 and T3 slope is negative,\nexit long positions or enter short with stop loss 2-3% above T3.\n</code></pre></p>"},{"location":"indicators/overlap/t3/#returns","title":"Returns","text":"<p>Returns an array of T3 values. The first several values will be <code>nil</code> due to the multiple smoothing calculations.</p>"},{"location":"indicators/overlap/t3/#usage_1","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70]\n\n# Calculate T3 with default parameters\nt3 = SQA::TAI.t3(prices)\n\n# Calculate with custom period\nt3_10 = SQA::TAI.t3(prices, period: 10)\n\n# Calculate with different vfactor for more/less smoothness\nt3_smooth = SQA::TAI.t3(prices, period: 5, vfactor: 0.9)   # More smooth\nt3_responsive = SQA::TAI.t3(prices, period: 5, vfactor: 0.5) # More responsive\n\nputs \"Current T3: #{t3.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/t3/#volume-factor-vfactor-guide","title":"Volume Factor (vfactor) Guide","text":"<p>The vfactor parameter controls the balance between smoothness and responsiveness:</p> vfactor Characteristics Best For 0.0 - 0.3 Very responsive, more noise Scalping, very short-term 0.4 - 0.6 Balanced response Day trading 0.7 (default) Smooth with good response Swing trading, general use 0.8 - 1.0 Very smooth, slower Position trading, long-term"},{"location":"indicators/overlap/t3/#interpretation_1","title":"Interpretation","text":"<p>The T3 provides clear trend signals with minimal noise:</p> <ul> <li>Price above T3: Bullish trend</li> <li>Price below T3: Bearish trend</li> <li>T3 slope upward: Uptrend strength</li> <li>T3 slope downward: Downtrend strength</li> <li>Flat T3: Consolidation or range-bound</li> </ul>"},{"location":"indicators/overlap/t3/#example-t3-trend-trading","title":"Example: T3 Trend Trading","text":"<pre><code>prices = load_historical_prices('AAPL')\nt3 = SQA::TAI.t3(prices, period: 8, vfactor: 0.7)\n\ncurrent_price = prices.last\ncurrent_t3 = t3.last\n\n# Calculate T3 slope over last 3 bars\nt3_slope = current_t3 - t3[-3]\nslope_pct = (t3_slope / t3[-3] * 100).round(2)\n\nif current_price &gt; current_t3 &amp;&amp; t3_slope &gt; 0\n  puts \"STRONG UPTREND\"\n  puts \"Price above rising T3 (slope: +#{slope_pct}%)\"\n  puts \"Action: HOLD LONG / BUY PULLBACKS\"\nelsif current_price &lt; current_t3 &amp;&amp; t3_slope &lt; 0\n  puts \"STRONG DOWNTREND\"\n  puts \"Price below falling T3 (slope: #{slope_pct}%)\"\n  puts \"Action: HOLD SHORT / SELL RALLIES\"\nelsif current_price &gt; current_t3 &amp;&amp; t3_slope &lt; 0\n  puts \"WEAKENING TREND\"\n  puts \"Price above but T3 falling - potential reversal\"\nelsif current_price &lt; current_t3 &amp;&amp; t3_slope &gt; 0\n  puts \"BUILDING MOMENTUM\"\n  puts \"Price below but T3 rising - watch for breakout\"\nend\n</code></pre>"},{"location":"indicators/overlap/t3/#example-t3-crossover-system","title":"Example: T3 Crossover System","text":"<pre><code>prices = load_historical_prices('SPY')\n\n# Fast T3 with lower vfactor (more responsive)\nt3_fast = SQA::TAI.t3(prices, period: 5, vfactor: 0.5)\n\n# Slow T3 with higher vfactor (more smooth)\nt3_slow = SQA::TAI.t3(prices, period: 13, vfactor: 0.8)\n\n# Check for crossover\nif t3_fast[-2] &lt;= t3_slow[-2] &amp;&amp; t3_fast[-1] &gt; t3_slow[-1]\n  puts \"BULLISH CROSSOVER\"\n  puts \"Fast T3 crossed above Slow T3\"\n  puts \"Signal: BUY\"\nelsif t3_fast[-2] &gt;= t3_slow[-2] &amp;&amp; t3_fast[-1] &lt; t3_slow[-1]\n  puts \"BEARISH CROSSOVER\"\n  puts \"Fast T3 crossed below Slow T3\"\n  puts \"Signal: SELL\"\nend\n\n# Calculate separation\nseparation_pct = ((t3_fast.last - t3_slow.last) / t3_slow.last * 100).round(2)\nputs \"T3 Separation: #{separation_pct}%\"\n</code></pre>"},{"location":"indicators/overlap/t3/#example-t3-with-dynamic-bands","title":"Example: T3 with Dynamic Bands","text":"<pre><code>prices = load_historical_prices('TSLA')\nt3 = SQA::TAI.t3(prices, period: 10, vfactor: 0.7)\n\n# Calculate ATR for dynamic band width\natr = SQA::TAI.atr(\n  prices.map { |p| p * 1.01 },  # Approximate high\n  prices.map { |p| p * 0.99 },  # Approximate low\n  prices,\n  period: 14\n)\n\n# Create bands at \u00b12 ATR from T3\nupper_band = t3.last(20).zip(atr.last(20)).map do |t3_val, atr_val|\n  next nil if t3_val.nil? || atr_val.nil?\n  t3_val + (2 * atr_val)\nend\n\nlower_band = t3.last(20).zip(atr.last(20)).map do |t3_val, atr_val|\n  next nil if t3_val.nil? || atr_val.nil?\n  t3_val - (2 * atr_val)\nend\n\ncurrent_price = prices.last\n\nif current_price &gt; upper_band.compact.last\n  puts \"Price above upper T3 band - overbought\"\nelsif current_price &lt; lower_band.compact.last\n  puts \"Price below lower T3 band - oversold\"\nelse\n  puts \"Price within T3 bands - normal range\"\nend\n</code></pre>"},{"location":"indicators/overlap/t3/#example-optimizing-vfactor-for-market-conditions","title":"Example: Optimizing vfactor for Market Conditions","text":"<pre><code>prices = load_historical_prices('MSFT')\n\n# Test different vfactors\nvfactors = [0.3, 0.5, 0.7, 0.9]\n\nvfactors.each do |vf|\n  t3 = SQA::TAI.t3(prices, period: 8, vfactor: vf)\n\n  # Calculate how closely T3 follows price\n  recent_prices = prices.last(20).compact\n  recent_t3 = t3.last(20).compact\n\n  next if recent_t3.empty?\n\n  avg_distance = recent_prices.zip(recent_t3).map do |p, t|\n    ((p - t).abs / t * 100)\n  end.sum / recent_prices.size\n\n  puts \"vfactor #{vf}: Avg distance from price: #{avg_distance.round(2)}%\"\nend\n\nputs \"\\nLower distance = more responsive\"\nputs \"Higher distance = more smooth\"\n</code></pre>"},{"location":"indicators/overlap/t3/#advantages","title":"Advantages","text":"<ol> <li>Excellent Smoothness: One of the smoothest indicators available</li> <li>Low Lag: Despite smoothness, maintains good responsiveness</li> <li>Customizable: vfactor allows tuning for different markets</li> <li>Clear Signals: Reduced noise means fewer false signals</li> <li>Versatile: Works across all timeframes and markets</li> </ol>"},{"location":"indicators/overlap/t3/#common-settings","title":"Common Settings","text":"Period vfactor Use Case 5 0.7 Short-term trading (default) 8 0.6-0.8 Day trading 13 0.7-0.9 Swing trading 21 0.8-1.0 Position trading"},{"location":"indicators/overlap/t3/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/t3/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When T3 works best: - All market conditions: T3's smoothness works well in trending and ranging markets - Quality over quantity: Generates fewer but higher-quality signals - All timeframes: Effective from intraday to weekly charts - Smooth trend following: Ideal for traders who prefer clean, clear signals</p>"},{"location":"indicators/overlap/t3/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Use ADX to confirm trend strength when following T3 signals - Combine with faster MAs for earlier entry signals while T3 confirms trend</p> <p>With Volume Indicators: - Confirm T3 crossovers with volume for higher probability trades - Use volume to validate T3 trend direction</p> <p>With Other Oscillators: - RSI helps identify overbought/oversold within T3 trends - MACD provides momentum confirmation for T3 signals - Stochastic for precise entry timing in T3-defined trends</p>"},{"location":"indicators/overlap/t3/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li>Over-adjusting vfactor: Start with 0.7 and only adjust if needed</li> <li>Ignoring smoothness trade-off: Lower vfactor = more signals but more noise</li> <li>Using wrong period: Most applications work best with period 5; adjust vfactor instead</li> <li>Expecting instant signals: T3's smoothness means slightly delayed but cleaner signals</li> </ol>"},{"location":"indicators/overlap/t3/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading: Period 5, vfactor 0.5-0.6 for more responsiveness</li> <li>Medium-term trading: Period 5-8, vfactor 0.7 (default) for balanced approach</li> <li>Long-term trading: Period 10-13, vfactor 0.8-0.9 for maximum smoothness</li> <li>Volatile markets: Increase vfactor to reduce noise</li> <li>Trending markets: Decrease vfactor for faster response</li> <li>Backtesting: Test vfactor variations; period usually stays at 5</li> </ul>"},{"location":"indicators/overlap/t3/#practical-example","title":"Practical Example","text":"<p>See the comprehensive examples above demonstrating: - T3 trend trading with slope analysis - T3 crossover systems with different vfactors - T3 with dynamic bands using ATR - Optimizing vfactor for market conditions</p>"},{"location":"indicators/overlap/t3/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/t3/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use T3 across multiple timeframes: - Higher timeframe T3 for overall trend direction - Lower timeframe T3 for entry timing - Align vfactors: higher timeframes use higher vfactor (smoother) - Only trade when all timeframes show same T3 trend</p>"},{"location":"indicators/overlap/t3/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Adjust T3 parameters based on market volatility: - High volatility: Use vfactor 0.8-0.9 for smoother signals - Low volatility: Use vfactor 0.5-0.6 for faster response - Trending markets: Lower vfactor (0.5-0.6) captures trends earlier - Ranging markets: Higher vfactor (0.8-0.9) reduces whipsaws</p>"},{"location":"indicators/overlap/t3/#statistical-validation","title":"Statistical Validation","text":"<p>T3 reliability metrics: - Generates 30-50% fewer signals than EMA due to smoothness - Higher win rate (65-75%) due to cleaner signals - Best in trending markets with proper vfactor selection - Reduced whipsaw rate compared to faster MAs</p>"},{"location":"indicators/overlap/t3/#references","title":"References","text":"<ul> <li>Tillson, Tim. \"Better Moving Averages\" Technical Analysis of Stocks &amp; Commodities magazine</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\"</li> <li>Pring, Martin J. \"Technical Analysis Explained\"</li> </ul>"},{"location":"indicators/overlap/t3/#related-indicators","title":"Related Indicators","text":"<ul> <li>EMA - Exponential Moving Average</li> <li>DEMA - Double Exponential Moving Average</li> <li>TEMA - Triple Exponential Moving Average</li> <li>KAMA - Kaufman Adaptive Moving Average</li> </ul>"},{"location":"indicators/overlap/t3/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Overlap Studies Overview</li> </ul>"},{"location":"indicators/overlap/tema/","title":"TEMA (Triple Exponential Moving Average)","text":""},{"location":"indicators/overlap/tema/#overview","title":"Overview","text":"<p>The Triple Exponential Moving Average (TEMA) is an advanced technical indicator designed to minimize lag even further than the Double Exponential Moving Average (DEMA). Developed by Patrick Mulloy in 1994, TEMA uses a triple calculation of exponential moving averages to provide one of the most responsive trend-following indicators while maintaining smoothness and filtering out market noise.</p>"},{"location":"indicators/overlap/tema/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 30 Number of periods for TEMA calculation"},{"location":"indicators/overlap/tema/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types (high, low, typical price, median price) for specialized applications - Requires sufficient data points: approximately <code>period * 3</code> for stable calculations - More historical data improves the indicator's reliability and reduces initial calculation artifacts</p> <p>period (time_period) - Default is 30 periods, providing excellent responsiveness with good smoothness - Common periods and their uses:   - 5-8 periods: Scalping and very short-term trading   - 10-15 periods: Day trading and active swing trading   - 20-30 periods: Standard swing and position trading   - 50+ periods: Long-term trend identification - Shorter periods maximize responsiveness but may increase noise - Longer periods provide smoother trends with slightly more lag - Recommended ranges:   - Scalping: 5-9 periods   - Day trading: 10-15 periods   - Swing trading: 20-30 periods   - Position trading: 50-100 periods</p>"},{"location":"indicators/overlap/tema/#usage","title":"Usage","text":""},{"location":"indicators/overlap/tema/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00]\n\n# Calculate 30-period TEMA (default)\ntema = SQA::TAI.tema(prices)\n\nputs \"Current TEMA: #{tema.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/tema/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Calculate 10-period TEMA for maximum responsiveness\ntema_10 = SQA::TAI.tema(prices, period: 10)\n\n# Calculate 50-period TEMA for longer-term trends\ntema_50 = SQA::TAI.tema(prices, period: 50)\n\nputs \"Short-term TEMA (10): #{tema_10.last.round(2)}\"\nputs \"Standard TEMA (30): #{tema.last.round(2)}\"\nputs \"Long-term TEMA (50): #{tema_50.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/tema/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/tema/#what-it-measures","title":"What It Measures","text":"<p>The TEMA measures trend direction with minimal lag:</p> <ul> <li>Trend Direction: Identifies the current market trend by triple-smoothing price data</li> <li>Momentum: The slope and position of TEMA relative to price indicate strong momentum shifts</li> <li>Dynamic Support/Resistance: Acts as a highly responsive support level in uptrends and resistance in downtrends</li> <li>Minimal Lag: Responds to price changes faster than any traditional moving average</li> </ul> <p>TEMA addresses the core challenge of technical analysis: balancing responsiveness with smoothness. By using three layers of exponential smoothing with a compensation formula, TEMA achieves remarkable responsiveness while still filtering out most market noise.</p>"},{"location":"indicators/overlap/tema/#calculation-method","title":"Calculation Method","text":"<p>The TEMA uses a sophisticated triple calculation process:</p> <ol> <li>Calculate First EMA: Apply exponential moving average to prices</li> <li>Calculate Second EMA: Apply EMA to the first EMA result</li> <li>Calculate Third EMA: Apply EMA to the second EMA result</li> <li>Apply TEMA Formula: Combine all three EMAs with specific weightings</li> <li>Result: A highly responsive moving average with minimal lag</li> </ol> <p>Formula: <pre><code>EMA1 = EMA(prices, period)\nEMA2 = EMA(EMA1, period)\nEMA3 = EMA(EMA2, period)\nTEMA = (3 \u00d7 EMA1) - (3 \u00d7 EMA2) + EMA3\n\nWhere:\n- EMA1 is the first exponential moving average of prices\n- EMA2 is the exponential moving average of EMA1\n- EMA3 is the exponential moving average of EMA2\n- The formula removes triple smoothing lag while maintaining smoothness\n- Coefficients (3, -3, +1) compensate for the triple calculation\n</code></pre></p>"},{"location":"indicators/overlap/tema/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (follows price range)</li> <li>Type: Overlay indicator (plotted on price chart)</li> <li>Lag: Minimal lag, most responsive of standard moving averages</li> <li>Best Used: Strong trending markets, momentum trading, breakout strategies</li> </ul>"},{"location":"indicators/overlap/tema/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/tema/#value-ranges","title":"Value Ranges","text":"<p>The TEMA's value closely tracks the price range:</p> <ul> <li>TEMA Rising Steeply: Indicates strong upward momentum and bullish trend</li> <li>TEMA Falling Steeply: Indicates strong downward momentum and bearish trend</li> <li>TEMA Flat: Suggests consolidation or range-bound market, reduced momentum</li> </ul>"},{"location":"indicators/overlap/tema/#key-levels","title":"Key Levels","text":"<ul> <li>Price Above TEMA: Bullish condition, uptrend in progress</li> <li>Price Below TEMA: Bearish condition, downtrend in progress</li> <li>Price Crossing TEMA: Potential trend change signal (highly responsive)</li> <li>Distance from TEMA: Large distances may indicate exhaustion or strong momentum</li> </ul>"},{"location":"indicators/overlap/tema/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read the TEMA's signals:</p> <ol> <li>Trend Direction</li> <li>Price consistently above rising TEMA = strong uptrend with momentum</li> <li>Price consistently below falling TEMA = strong downtrend with momentum</li> <li> <p>Price oscillating around TEMA = no clear trend, avoid trend-following</p> </li> <li> <p>Momentum Changes</p> </li> <li>TEMA slope steepening rapidly = accelerating momentum, strong move</li> <li>TEMA slope flattening = decelerating momentum, trend weakening</li> <li> <p>TEMA slope reversal = potential trend change, watch for confirmation</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price crosses below TEMA = early warning of potential reversal to downtrend</li> <li>Price crosses above TEMA = early warning of potential reversal to uptrend</li> <li>Multiple crosses in short period = ranging market, avoid trading</li> </ol>"},{"location":"indicators/overlap/tema/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/tema/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price crosses above TEMA while TEMA is rising or just starting to rise</li> <li>Confirmation Signal: Increasing volume on the crossover, RSI above 50</li> <li>Entry Criteria: Close above TEMA, TEMA slope turning upward</li> </ol> <p>Example Scenario: <pre><code>When price closes above TEMA and TEMA slope has turned positive,\nconsider a long position with stop loss 1-2% below TEMA.\nDue to TEMA's responsiveness, use tighter stops than with slower MAs.\nTarget recent resistance or use a trailing stop to capture the trend.\n</code></pre></p>"},{"location":"indicators/overlap/tema/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price crosses below TEMA while TEMA is falling or just starting to fall</li> <li>Confirmation Signal: Increasing volume on the crossover, RSI below 50</li> <li>Exit Criteria: Close below TEMA, TEMA slope turning downward</li> </ol> <p>Example Scenario: <pre><code>When price closes below TEMA and TEMA slope has turned negative,\nconsider exiting long positions or entering short with stop loss 1-2% above TEMA.\nTEMA responds quickly, so act promptly on signals to avoid larger losses.\n</code></pre></p>"},{"location":"indicators/overlap/tema/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Price makes lower lows while TEMA makes higher lows - Indicates weakening downward momentum despite lower prices - TEMA's responsiveness makes this signal appear earlier than with slower MAs - Confirm with RSI or MACD divergence for higher probability setups</p> <p>Bearish Divergence: - Price makes higher highs while TEMA makes lower highs or fails to confirm - Indicates weakening upward momentum despite higher prices - Often precedes sharp reversals due to TEMA's sensitivity - Most reliable when occurring at resistance levels</p>"},{"location":"indicators/overlap/tema/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/tema/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When TEMA works best: - Strong trending markets: TEMA excels at catching and riding strong trends - Momentum trading: Ideal for traders who want to enter trends early - Short to medium timeframes: Works well on 5-min to daily charts - Liquid, volatile markets: Best in active markets with clear price movements</p>"},{"location":"indicators/overlap/tema/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <p>With Trend Indicators: - Use ADX above 25 to confirm strong trend before following TEMA signals - Combine with slower MA (SMA 50 or 200) for multi-timeframe trend filter</p> <p>With Volume Indicators: - Confirm TEMA crossovers with above-average volume for higher probability - Use volume price trend (VPT) to validate TEMA direction</p> <p>With Other Oscillators: - Use RSI to avoid taking TEMA signals in extreme overbought/oversold - Combine with Stochastic for precise entry timing - MACD provides good confirmation for TEMA trend changes</p>"},{"location":"indicators/overlap/tema/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li>Over-trading: TEMA's sensitivity can generate frequent signals in choppy markets</li> <li>Ignoring Market Context: TEMA works poorly in ranging markets; use ADX filter</li> <li>Too-tight Stops: While stops should be tighter with TEMA, too tight causes premature exits</li> <li>Chasing Price: Don't chase price far from TEMA; wait for pullbacks</li> </ol>"},{"location":"indicators/overlap/tema/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (scalping): 5-9 period TEMA for ultra-responsive signals</li> <li>Medium-term trading (day/swing): 15-30 period TEMA for balanced approach</li> <li>Long-term trading (position): 50-100 period TEMA for major trend identification</li> <li>Backtesting: Test multiple periods to find optimal for your instrument and style</li> </ul>"},{"location":"indicators/overlap/tema/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Load historical price data\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00]\n\n# Calculate TEMA for trend following\ntema = SQA::TAI.tema(prices, period: 20)\n\n# Calculate ADX to filter ranging markets\n# (assuming we have high, low, close data)\n# adx = SQA::TAI.adx(high, low, prices, period: 14)\n\n# Analysis logic\ncurrent_price = prices.last\ncurrent_tema = tema.last\nprev_price = prices[-2]\nprev_tema = tema[-2]\n\n# Calculate TEMA slope\ntema_slope = current_tema - tema[-3]\nslope_direction = tema_slope &gt; 0 ? \"rising\" : \"falling\"\n\n# Check for crossover signals\nif prev_price &lt;= prev_tema &amp;&amp; current_price &gt; current_tema\n  puts \"BUY Signal: Price crossed above TEMA\"\n  puts \"TEMA is #{slope_direction}\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"TEMA: #{current_tema.round(2)}\"\n  puts \"Stop Loss: #{(current_tema * 0.98).round(2)}\"\n  puts \"Target: #{(current_price * 1.03).round(2)}\"\n\nelsif prev_price &gt;= prev_tema &amp;&amp; current_price &lt; current_tema\n  puts \"SELL Signal: Price crossed below TEMA\"\n  puts \"TEMA is #{slope_direction}\"\n  puts \"Exit/Short Entry: #{current_price.round(2)}\"\n  puts \"TEMA: #{current_tema.round(2)}\"\n  puts \"Stop Loss: #{(current_tema * 1.02).round(2)}\"\n\n# Trend continuation analysis\nelsif current_price &gt; current_tema &amp;&amp; tema_slope &gt; 0\n  distance = ((current_price - current_tema) / current_tema * 100).round(2)\n  puts \"Uptrend in Progress\"\n  puts \"Price #{distance}% above rising TEMA\"\n\n  if distance &lt; 2\n    puts \"Good entry zone - price near TEMA support\"\n  elsif distance &gt; 5\n    puts \"Extended - wait for pullback to TEMA\"\n  else\n    puts \"Normal distance - trend healthy\"\n  end\n\nelsif current_price &lt; current_tema &amp;&amp; tema_slope &lt; 0\n  distance = ((current_tema - current_price) / current_tema * 100).round(2)\n  puts \"Downtrend in Progress\"\n  puts \"Price #{distance}% below falling TEMA\"\n  puts \"Avoid longs - stay in cash or consider shorts on rallies to TEMA\"\nend\n</code></pre>"},{"location":"indicators/overlap/tema/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/overlap/tema/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>DEMA: Double exponential MA, slightly more lag but smoother</li> <li>EMA: Single exponential MA, traditional approach with more lag</li> <li>T3: Tillson T3, similar responsiveness with different calculation</li> </ul>"},{"location":"indicators/overlap/tema/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Essential for filtering trending vs ranging markets</li> <li>RSI: Helps identify overbought/oversold for better entries</li> <li>Stochastic: Precise entry timing with TEMA direction</li> <li>ATR: Sets appropriate stop-loss distances</li> </ul>"},{"location":"indicators/overlap/tema/#indicator-family","title":"Indicator Family","text":"<p>TEMA belongs to the exponential moving average family: - SMA: Base moving average with maximum lag - EMA: Exponential weighting, reduced lag - DEMA: Double calculation, low lag - TEMA: Triple calculation, minimal lag (most responsive) - Use TEMA when you need the fastest reaction to price changes</p>"},{"location":"indicators/overlap/tema/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/tema/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use TEMA across multiple timeframes for comprehensive trend analysis: - Higher timeframe TEMA (daily/weekly) for overall trend direction - Medium timeframe TEMA (4H/1H) for entry setup identification - Lower timeframe TEMA (15M/5M) for precise entry timing - Trade only when all timeframes align in same direction</p>"},{"location":"indicators/overlap/tema/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Adjust TEMA usage based on market conditions: - Trending markets (ADX &gt; 25): Follow TEMA signals aggressively - Ranging markets (ADX &lt; 20): Reduce position size or avoid TEMA trades - High volatility: Use longer periods (30-50) to reduce whipsaws - Low volatility: Use shorter periods (10-20) to catch early moves</p>"},{"location":"indicators/overlap/tema/#statistical-validation","title":"Statistical Validation","text":"<p>TEMA reliability metrics: - Most reliable in strong trends (ADX &gt; 30): 70-80% win rate - Less reliable in ranging markets (ADX &lt; 20): 40-50% win rate - False signal rate lower when confirmed with volume - Optimal when combined with momentum oscillators (RSI, Stochastic)</p>"},{"location":"indicators/overlap/tema/#references","title":"References","text":"<ul> <li>Mulloy, Patrick (1994). \"Smoothing Data with Faster Moving Averages\". Technical Analysis of Stocks &amp; Commodities magazine</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\"</li> <li>Pring, Martin J. \"Technical Analysis Explained\"</li> <li>Achelis, Steven B. \"Technical Analysis from A to Z\"</li> </ul>"},{"location":"indicators/overlap/tema/#see-also","title":"See Also","text":"<ul> <li>Overlap Studies Overview</li> <li>DEMA Documentation</li> <li>EMA Documentation</li> <li>Moving Average Comparison</li> <li>ADX for Trend Filtering</li> </ul>"},{"location":"indicators/overlap/trima/","title":"TRIMA (Triangular Moving Average)","text":""},{"location":"indicators/overlap/trima/#overview","title":"Overview","text":"<p>The Triangular Moving Average (TRIMA) is a double-smoothed moving average that places more weight on the middle portion of the data series, creating a triangular weight distribution. Developed as an enhancement to the Simple Moving Average, TRIMA provides one of the smoothest trend indicators available, making it particularly valuable for identifying longer-term trends and filtering out short-term market noise.</p>"},{"location":"indicators/overlap/trima/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 30 Number of periods for TRIMA calculation"},{"location":"indicators/overlap/trima/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types (high, low, typical price) for specialized applications - Requires sufficient data points: approximately <code>period * 1.5</code> for stable calculations - More historical data improves the indicator's reliability and smoothness</p> <p>period (time_period) - Default is 30 periods, providing excellent smoothness for trend identification - Common periods and their uses:   - 10-20 periods: Short to medium-term trends   - 30-50 periods: Standard trend identification (most common)   - 100+ periods: Major long-term trends only - Shorter periods provide some responsiveness but lose TRIMA's smoothness advantage - Longer periods maximize smoothness but increase lag significantly - Recommended ranges:   - Swing trading: 20-30 periods   - Position trading: 30-50 periods   - Long-term investing: 100-200 periods</p>"},{"location":"indicators/overlap/trima/#usage","title":"Usage","text":""},{"location":"indicators/overlap/trima/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00]\n\n# Calculate 30-period TRIMA (default)\ntrima = SQA::TAI.trima(prices)\n\nputs \"Current TRIMA: #{trima.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/trima/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Calculate 20-period TRIMA\ntrima_20 = SQA::TAI.trima(prices, period: 20)\n\n# Calculate 50-period TRIMA for long-term trends\ntrima_50 = SQA::TAI.trima(prices, period: 50)\n\nputs \"Short-term TRIMA (20): #{trima_20.last.round(2)}\"\nputs \"Standard TRIMA (30): #{trima.last.round(2)}\"\nputs \"Long-term TRIMA (50): #{trima_50.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/trima/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/trima/#what-it-measures","title":"What It Measures","text":"<p>The TRIMA measures trend direction with maximum smoothness:</p> <ul> <li>Long-term Trend Direction: Identifies major market trends by double-smoothing price data</li> <li>Market Structure: Shows the overall direction of market movement without short-term noise</li> <li>Dynamic Support/Resistance: Acts as a very stable support level in uptrends and resistance in downtrends</li> <li>Trend Confirmation: Excellent for confirming trends identified by faster indicators</li> </ul> <p>TRIMA solves the problem of market noise obscuring the underlying trend. By applying a triangular weight distribution where middle values have the highest influence, TRIMA creates one of the smoothest trend indicators available.</p>"},{"location":"indicators/overlap/trima/#calculation-method","title":"Calculation Method","text":"<p>The TRIMA uses a double-smoothing process with triangular weighting:</p> <ol> <li>Determine Sub-period: Calculate (period + 1) / 2 for odd periods, or period / 2 for even periods</li> <li>First SMA: Calculate Simple Moving Average over the sub-period</li> <li>Second SMA: Calculate SMA of the first SMA</li> <li>Result: A double-smoothed average with triangular weight distribution</li> </ol> <p>Formula: <pre><code>For odd period n:\n  Sub-period = (n + 1) / 2\n  TRIMA = SMA(SMA(prices, sub-period), sub-period)\n\nFor even period n:\n  Sub-period = n / 2\n  TRIMA = SMA(SMA(prices, sub-period), sub-period + 1)\n\nWhere:\n- The first SMA smooths the price data\n- The second SMA smooths the first SMA\n- This creates a triangular weight distribution\n- Middle values have the highest influence on the result\n</code></pre></p>"},{"location":"indicators/overlap/trima/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (follows price range)</li> <li>Type: Overlay indicator (plotted on price chart)</li> <li>Lag: High lag, very smooth with delayed response</li> <li>Best Used: Long-term position trading, trend confirmation, filtering noise</li> </ul>"},{"location":"indicators/overlap/trima/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/trima/#value-ranges","title":"Value Ranges","text":"<p>The TRIMA's value follows the price range with significant smoothing:</p> <ul> <li>TRIMA Rising: Indicates established uptrend</li> <li>TRIMA Falling: Indicates established downtrend</li> <li>TRIMA Flat: Suggests consolidation or balanced market</li> </ul>"},{"location":"indicators/overlap/trima/#key-levels","title":"Key Levels","text":"<ul> <li>Price Above TRIMA: Bullish condition, confirmed uptrend</li> <li>Price Below TRIMA: Bearish condition, confirmed downtrend</li> <li>Price Crossing TRIMA: Major trend change signal (infrequent but significant)</li> <li>Distance from TRIMA: Extreme distances suggest potential mean reversion</li> </ul>"},{"location":"indicators/overlap/trima/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read the TRIMA's signals:</p> <ol> <li>Trend Direction</li> <li>Price above rising TRIMA = confirmed major uptrend</li> <li>Price below falling TRIMA = confirmed major downtrend</li> <li> <p>TRIMA flat = no clear long-term trend</p> </li> <li> <p>Momentum Changes</p> </li> <li>TRIMA slope steepening = strengthening trend</li> <li>TRIMA slope flattening = weakening trend</li> <li> <p>TRIMA slope reversal = major trend change (rare but significant)</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price crosses below TRIMA = major trend reversal to downtrend</li> <li>Price crosses above TRIMA = major trend reversal to uptrend</li> <li>Due to lag, these are late signals but very reliable</li> </ol>"},{"location":"indicators/overlap/trima/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/trima/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price crosses above TRIMA and TRIMA is rising</li> <li>Confirmation Signal: Multiple periods of closes above TRIMA</li> <li>Entry Criteria: Wait for pullback to TRIMA for better entry</li> </ol> <p>Example Scenario: <pre><code>When price crosses above TRIMA and TRIMA slope turns upward,\nconfirm the uptrend. Wait for price to pull back toward TRIMA,\nthen enter long with stop loss 3-5% below TRIMA.\nTarget major resistance levels or use trailing stop.\n</code></pre></p>"},{"location":"indicators/overlap/trima/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price crosses below TRIMA and TRIMA is falling</li> <li>Confirmation Signal: Multiple periods of closes below TRIMA</li> <li>Exit Criteria: Don't wait for signal; TRIMA is for trend confirmation, not timing</li> </ol> <p>Example Scenario: <pre><code>When price crosses below TRIMA and TRIMA slope turns downward,\nexit all long positions. The major trend has reversed.\nConsider re-entering only after price recrosses above TRIMA.\n</code></pre></p>"},{"location":"indicators/overlap/trima/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Price makes lower lows while TRIMA makes higher lows or stays flat - Indicates major trend exhaustion to the downside - Very reliable due to TRIMA's smoothness eliminating false signals - Excellent long-term reversal indicator</p> <p>Bearish Divergence: - Price makes higher highs while TRIMA makes lower highs or stays flat - Indicates major trend exhaustion to the upside - Signals potential long-term top formation - Best used for position exits rather than short entries</p>"},{"location":"indicators/overlap/trima/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/trima/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When TRIMA works best: - Long-term position trading: Ideal timeframe for TRIMA's characteristics - Trend confirmation: Excellent filter for faster indicator signals - Major trend identification: Clear identification of primary market direction - Low-frequency trading: Best for traders who make few, high-conviction trades</p>"},{"location":"indicators/overlap/trima/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <p>With Trend Indicators: - Use faster MA (EMA 20) for entries while TRIMA confirms overall trend - Combine with ADX to confirm trend strength when TRIMA shows direction</p> <p>With Volume Indicators: - Confirm TRIMA crossovers with volume analysis for major trend changes - Use volume to time entries within TRIMA-confirmed trends</p> <p>With Other Oscillators: - Use RSI for entry timing within TRIMA trends - Use MACD for earlier trend change warnings while TRIMA confirms - Stochastic helps identify pullback entry points in TRIMA trends</p>"},{"location":"indicators/overlap/trima/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li>Using for Timing: TRIMA is too slow for entry/exit timing</li> <li>Day Trading: TRIMA lag makes it unsuitable for short-term trading</li> <li>Expecting Quick Signals: TRIMA signals are infrequent but significant</li> <li>Over-trading: Wait for clear TRIMA signals; fewer trades, higher quality</li> </ol>"},{"location":"indicators/overlap/trima/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading: Not recommended; use faster MAs instead</li> <li>Medium-term trading (swing): 20-30 period TRIMA as trend filter only</li> <li>Long-term trading (position): 30-50 period TRIMA for primary trend</li> <li>Backtesting: Test on historical data; optimize for trend filtering, not entries</li> </ul>"},{"location":"indicators/overlap/trima/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Load historical price data\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00, 49.15, 49.30, 49.45, 49.60]\n\n# Calculate TRIMA for trend filter\ntrima = SQA::TAI.trima(prices, period: 30)\n\n# Calculate faster EMA for entries\nema_fast = SQA::TAI.ema(prices, period: 10)\n\n# Analysis logic\ncurrent_price = prices.last\ncurrent_trima = trima.last\ncurrent_ema = ema_fast.last\n\n# Check TRIMA trend direction\ntrima_slope = current_trima - trima[-5]\ntrend = if trima_slope &gt; 0\n  \"UPTREND\"\nelsif trima_slope &lt; 0\n  \"DOWNTREND\"\nelse\n  \"NEUTRAL\"\nend\n\nputs \"Major Trend (TRIMA): #{trend}\"\nputs \"TRIMA Value: #{current_trima.round(2)}\"\n\n# Trading logic based on TRIMA trend\nif trend == \"UPTREND\"\n  # Look for pullback entries in uptrend\n  if current_price &lt; current_ema &amp;&amp; current_price &gt; current_trima\n    puts \"BUY Setup: Pullback in uptrend\"\n    puts \"Price between EMA and TRIMA - good entry zone\"\n    puts \"Entry: Near #{current_ema.round(2)}\"\n    puts \"Stop: Below #{current_trima.round(2)}\"\n  elsif current_price &gt; current_ema\n    puts \"Uptrend in Progress\"\n    puts \"Hold long positions, wait for pullback to add\"\n  elsif current_price &lt; current_trima\n    puts \"WARNING: Price below TRIMA in uptrend\"\n    puts \"Consider tightening stops\"\n  end\n\nelsif trend == \"DOWNTREND\"\n  puts \"Downtrend in Progress - AVOID LONGS\"\n  if current_price &gt; current_ema\n    puts \"Rally to resistance (EMA) - potential short entry\"\n    puts \"Or wait for trend reversal above TRIMA\"\n  end\n\nelse\n  puts \"No Clear Trend - Wait for TRIMA direction\"\n  puts \"Current Price: #{current_price.round(2)}\"\n  puts \"Distance from TRIMA: #{((current_price - current_trima) / current_trima * 100).round(2)}%\"\nend\n\n# Check for major trend reversal\nprev_price_position = prices[-2] &gt; trima[-2]\ncurrent_price_position = current_price &gt; current_trima\n\nif !prev_price_position &amp;&amp; current_price_position\n  puts \"\\n*** MAJOR TREND REVERSAL: Bullish ***\"\n  puts \"Price crossed above TRIMA - major uptrend beginning\"\nelsif prev_price_position &amp;&amp; !current_price_position\n  puts \"\\n*** MAJOR TREND REVERSAL: Bearish ***\"\n  puts \"Price crossed below TRIMA - major downtrend beginning\"\nend\n</code></pre>"},{"location":"indicators/overlap/trima/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/overlap/trima/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>SMA: Single smoothing, less smooth than TRIMA</li> <li>EMA: Exponential weighting, much more responsive</li> <li>DEMA: Double exponential, opposite philosophy (speed vs smoothness)</li> </ul>"},{"location":"indicators/overlap/trima/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>EMA: Use for entries while TRIMA confirms trend</li> <li>ADX: Confirms trend strength when TRIMA shows direction</li> <li>RSI: Times entries within TRIMA trends</li> <li>ATR: Sets stop-loss distances in TRIMA trends</li> </ul>"},{"location":"indicators/overlap/trima/#indicator-family","title":"Indicator Family","text":"<p>TRIMA belongs to the moving average family with unique characteristics: - SMA: Equal weighting of all periods - WMA: Linear weighting favoring recent prices - TRIMA: Triangular weighting favoring middle prices (smoothest) - Use TRIMA when smoothness and noise reduction are paramount</p>"},{"location":"indicators/overlap/trima/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/trima/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use TRIMA across multiple timeframes: - Weekly/Monthly TRIMA for primary market direction - Daily TRIMA for intermediate trend - Use faster indicators on lower timeframes for entries - Only trade in direction of TRIMA on higher timeframe</p>"},{"location":"indicators/overlap/trima/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>TRIMA performance in different market conditions: - Strong trends: TRIMA excels at identifying and confirming - Ranging markets: TRIMA stays flat, signaling no trend (very useful) - Volatile markets: TRIMA smooths volatility, shows underlying trend - Quiet markets: TRIMA may be too slow; consider faster indicators</p>"},{"location":"indicators/overlap/trima/#statistical-validation","title":"Statistical Validation","text":"<p>TRIMA reliability metrics: - Very high reliability for trend identification (80-90% accuracy) - Low false signal rate due to extreme smoothing - Late entry signals but excellent trend confirmation - Best used as filter, not standalone trading system</p>"},{"location":"indicators/overlap/trima/#references","title":"References","text":"<ul> <li>Kaufman, Perry J. \"Trading Systems and Methods\"</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\"</li> <li>Pring, Martin J. \"Technical Analysis Explained\"</li> </ul>"},{"location":"indicators/overlap/trima/#see-also","title":"See Also","text":"<ul> <li>Overlap Studies Overview</li> <li>SMA Documentation</li> <li>WMA Documentation</li> <li>Moving Average Comparison</li> </ul>"},{"location":"indicators/overlap/vwap/","title":"VWAP (Volume-Weighted Average Price)","text":"<p>Note: VWAP is not a standard TA-Lib indicator and is not currently available in SQA::TAI. This page is provided for reference purposes as VWAP is commonly used alongside other technical indicators.</p>"},{"location":"indicators/overlap/vwap/#overview","title":"Overview","text":"<p>VWAP (Volume-Weighted Average Price) is a trading benchmark that shows the average price an asset has traded at throughout the day, weighted by volume. Unlike simple moving averages, VWAP gives more weight to price levels where more volume traded.</p>"},{"location":"indicators/overlap/vwap/#what-is-vwap","title":"What is VWAP?","text":"<p>VWAP represents the true average price at which an asset has traded during the day. Institutional traders and algorithms often use VWAP to: - Benchmark execution quality - Identify value areas - Make entry/exit decisions - Assess intraday trends</p>"},{"location":"indicators/overlap/vwap/#formula","title":"Formula","text":"<pre><code>VWAP = \u03a3(Typical Price \u00d7 Volume) / \u03a3(Volume)\n\nWhere:\n- Typical Price = (High + Low + Close) / 3\n- \u03a3 = Cumulative sum from start of day\n</code></pre>"},{"location":"indicators/overlap/vwap/#typical-usage","title":"Typical Usage","text":"<p>If VWAP were available, it would be used like this:</p> <pre><code># Hypothetical usage (NOT currently available in SQA::TAI)\nrequire 'sqa/tai'\n\n# Note: This functionality is not implemented\n# vwap = SQA::TAI.vwap(high, low, close, volume)\n\n# Manual calculation approach:\ntypical_price = high.zip(low, close).map { |h, l, c| (h + l + c) / 3.0 }\nvolume_price = typical_price.zip(volume).map { |tp, v| tp * v }\n\ncumulative_volume_price = volume_price.each_with_index.map do |vp, i|\n  volume_price[0..i].sum\nend\n\ncumulative_volume = volume.each_with_index.map do |v, i|\n  volume[0..i].sum\nend\n\nvwap = cumulative_volume_price.zip(cumulative_volume).map { |vp, v| vp / v }\n\nputs \"Current VWAP: $#{vwap.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/vwap/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/vwap/#trading-abovebelow-vwap","title":"Trading Above/Below VWAP","text":"<ul> <li>Price &gt; VWAP: Bullish intraday sentiment</li> <li>Buyers willing to pay above average price</li> <li>Potential uptrend continuation</li> <li> <p>Long positions favored</p> </li> <li> <p>Price &lt; VWAP: Bearish intraday sentiment</p> </li> <li>Sellers accepting below average price</li> <li>Potential downtrend continuation</li> <li> <p>Short positions favored</p> </li> <li> <p>Price at VWAP: Neutral zone</p> </li> <li>Fair value area</li> <li>Potential support/resistance</li> <li>Breakout direction uncertain</li> </ul>"},{"location":"indicators/overlap/vwap/#vwap-as-supportresistance","title":"VWAP as Support/Resistance","text":"<p>VWAP often acts as dynamic support and resistance: - In uptrends, price tends to stay above VWAP - In downtrends, price tends to stay below VWAP - Crosses of VWAP can signal trend changes</p>"},{"location":"indicators/overlap/vwap/#common-trading-strategies","title":"Common Trading Strategies","text":""},{"location":"indicators/overlap/vwap/#1-vwap-cross-strategy","title":"1. VWAP Cross Strategy","text":"<pre><code># Price crosses above VWAP = Buy signal\n# Price crosses below VWAP = Sell signal\n\nif close.last &gt; vwap.last &amp;&amp; close[-2] &lt;= vwap[-2]\n  puts \"VWAP Cross Up - Consider LONG\"\nelsif close.last &lt; vwap.last &amp;&amp; close[-2] &gt;= vwap[-2]\n  puts \"VWAP Cross Down - Consider SHORT\"\nend\n</code></pre>"},{"location":"indicators/overlap/vwap/#2-vwap-pullback-strategy","title":"2. VWAP Pullback Strategy","text":"<pre><code># In uptrend, buy pullbacks to VWAP\n# In downtrend, sell rallies to VWAP\n\nuptrend = close[-5..-1].all? { |c| c &gt; vwap[-5..-1].shift }\n\nif uptrend &amp;&amp; (close.last - vwap.last).abs / vwap.last &lt; 0.002\n  puts \"Pullback to VWAP in uptrend - BUY opportunity\"\nend\n</code></pre>"},{"location":"indicators/overlap/vwap/#3-vwap-bands-strategy","title":"3. VWAP Bands Strategy","text":"<pre><code># Calculate standard deviation bands around VWAP\n# Similar to Bollinger Bands\n\nstd_dev = calculate_std_dev(close, vwap)\nupper_band = vwap.map { |v| v + (2 * std_dev) }\nlower_band = vwap.map { |v| v - (2 * std_dev) }\n\nif close.last &lt; lower_band.last\n  puts \"Price below VWAP lower band - OVERSOLD\"\nelsif close.last &gt; upper_band.last\n  puts \"Price above VWAP upper band - OVERBOUGHT\"\nend\n</code></pre>"},{"location":"indicators/overlap/vwap/#vwap-best-practices","title":"VWAP Best Practices","text":""},{"location":"indicators/overlap/vwap/#1-intraday-focus","title":"1. Intraday Focus","text":"<p>VWAP is primarily an intraday indicator: - Resets at the start of each trading day - Most useful for day traders - Less relevant for swing/position traders</p>"},{"location":"indicators/overlap/vwap/#2-combine-with-other-indicators","title":"2. Combine with Other Indicators","text":"<p>Use VWAP with available SQA::TAI indicators:</p> <pre><code># VWAP + RSI\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif close.last &gt; vwap.last &amp;&amp; rsi.last &lt; 70\n  puts \"Above VWAP and not overbought - STRONG BUY\"\nend\n\n# VWAP + Moving Averages\nema_20 = SQA::TAI.ema(close, period: 20)\n\nif close.last &gt; vwap.last &amp;&amp; close.last &gt; ema_20.last\n  puts \"Aligned with both VWAP and EMA - TREND CONFIRMED\"\nend\n</code></pre>"},{"location":"indicators/overlap/vwap/#3-volume-confirmation","title":"3. Volume Confirmation","text":"<p>VWAP is volume-weighted, so volume spikes matter: - High volume near VWAP = strong support/resistance - Low volume near VWAP = weaker significance</p>"},{"location":"indicators/overlap/vwap/#alternative-indicators-in-sqatai","title":"Alternative Indicators in SQA::TAI","text":"<p>While VWAP is not available, consider these similar indicators:</p>"},{"location":"indicators/overlap/vwap/#typical-price-typprice","title":"Typical Price (TYPPRICE)","text":"<p>Component of VWAP calculation: <pre><code>typical = SQA::TAI.typprice(high, low, close)\n</code></pre></p>"},{"location":"indicators/overlap/vwap/#moving-averages","title":"Moving Averages","text":"<p>Dynamic support/resistance like VWAP: <pre><code>ema_20 = SQA::TAI.ema(close, period: 20)\nsma_20 = SQA::TAI.sma(close, period: 20)\n</code></pre></p>"},{"location":"indicators/overlap/vwap/#on-balance-volume-obv","title":"On Balance Volume (OBV)","text":"<p>Volume-based indicator: <pre><code>obv = SQA::TAI.obv(close, volume)\n</code></pre></p>"},{"location":"indicators/overlap/vwap/#accumulationdistribution-ad","title":"Accumulation/Distribution (AD)","text":"<p>Volume-weighted price indicator: <pre><code>ad = SQA::TAI.ad(high, low, close, volume)\n</code></pre></p>"},{"location":"indicators/overlap/vwap/#manual-vwap-calculation","title":"Manual VWAP Calculation","text":"<p>Here's a complete Ruby implementation for calculating VWAP:</p> <pre><code>class VWAPCalculator\n  def self.calculate(high, low, close, volume)\n    # Calculate typical price\n    typical_prices = high.zip(low, close).map do |h, l, c|\n      (h + l + c) / 3.0\n    end\n\n    # Calculate cumulative volume * price and cumulative volume\n    cumulative_vp = 0\n    cumulative_vol = 0\n\n    vwap_values = typical_prices.zip(volume).map do |tp, vol|\n      cumulative_vp += tp * vol\n      cumulative_vol += vol\n\n      cumulative_vp / cumulative_vol\n    end\n\n    vwap_values\n  end\n\n  # Calculate VWAP bands (similar to Bollinger Bands)\n  def self.calculate_with_bands(high, low, close, volume, num_std_dev = 2)\n    vwap = calculate(high, low, close, volume)\n    typical_prices = high.zip(low, close).map { |h, l, c| (h + l + c) / 3.0 }\n\n    # Calculate standard deviation\n    std_devs = vwap.each_with_index.map do |v, i|\n      prices_so_far = typical_prices[0..i]\n      mean = v\n      variance = prices_so_far.map { |p| (p - mean) ** 2 }.sum / prices_so_far.length\n      Math.sqrt(variance)\n    end\n\n    upper_band = vwap.zip(std_devs).map { |v, sd| v + (num_std_dev * sd) }\n    lower_band = vwap.zip(std_devs).map { |v, sd| v - (num_std_dev * sd) }\n\n    { vwap: vwap, upper: upper_band, lower: lower_band }\n  end\nend\n\n# Usage example\nhigh = [100.5, 101.2, 102.0, 101.5]\nlow = [99.5, 100.0, 100.5, 100.0]\nclose = [100.0, 101.0, 101.5, 101.0]\nvolume = [1000, 1500, 2000, 1200]\n\nvwap = VWAPCalculator.calculate(high, low, close, volume)\nputs \"VWAP: $#{vwap.last.round(2)}\"\n\nbands = VWAPCalculator.calculate_with_bands(high, low, close, volume)\nputs \"VWAP with bands:\"\nputs \"  Upper: $#{bands[:upper].last.round(2)}\"\nputs \"  VWAP: $#{bands[:vwap].last.round(2)}\"\nputs \"  Lower: $#{bands[:lower].last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/vwap/#resources","title":"Resources","text":"<ul> <li>Investopedia: VWAP</li> <li>Volume-Weighted Indicators</li> <li>Price Transform Indicators</li> </ul>"},{"location":"indicators/overlap/vwap/#see-also","title":"See Also","text":"<ul> <li>Accumulation/Distribution Line (AD) - Volume-weighted price indicator</li> <li>Typical Price (TYPPRICE) - Component of VWAP</li> <li>On Balance Volume (OBV) - Volume-based momentum</li> <li>Moving Averages - Alternative dynamic support/resistance</li> <li>Back to Indicators</li> </ul> <p>Implementation Status: Not available in current TA-Lib/SQA::TAI version. Use manual calculation or alternative volume-weighted indicators.</p>"},{"location":"indicators/overlap/wma/","title":"WMA (Weighted Moving Average)","text":""},{"location":"indicators/overlap/wma/#overview","title":"Overview","text":"<p>The Weighted Moving Average (WMA) is a technical indicator that applies linear weighting to price data, giving progressively more importance to recent prices while still considering historical data. Developed to address the limitations of the Simple Moving Average's equal weighting, WMA provides a middle ground between the simplicity of SMA and the exponential nature of EMA, making it valuable for traders seeking balanced responsiveness in trend identification.</p>"},{"location":"indicators/overlap/wma/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>input_data</code> Array Required The price data array (typically close prices) <code>period</code> Integer 30 Number of periods for WMA calculation"},{"location":"indicators/overlap/wma/#parameter-details","title":"Parameter Details","text":"<p>input_data - Typically uses closing prices for standard trend analysis - Can use other price types (high, low, typical price) for specialized applications - Requires at least <code>period</code> number of data points for calculation - More historical data provides better context for trend analysis</p> <p>period (time_period) - Default is 30 periods, providing good balance of smoothness and responsiveness - Common periods and their uses:   - 10-20 periods: Short-term trading, active trend following   - 20-30 periods: Medium-term trends, standard analysis   - 50+ periods: Long-term trend identification - Shorter periods increase responsiveness but generate more signals - Longer periods provide smoother trends with less noise - Recommended ranges:   - Day trading: 10-20 periods   - Swing trading: 20-30 periods   - Position trading: 50-100 periods</p>"},{"location":"indicators/overlap/wma/#usage","title":"Usage","text":""},{"location":"indicators/overlap/wma/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41]\n\n# Calculate 10-period WMA\nwma = SQA::TAI.wma(prices, period: 10)\n\nputs \"Current WMA: #{wma.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/wma/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Calculate 20-period WMA for swing trading\nwma_20 = SQA::TAI.wma(prices, period: 20)\n\n# Calculate 50-period WMA for position trading\nwma_50 = SQA::TAI.wma(prices, period: 50)\n\nputs \"Short-term WMA (20): #{wma_20.last.round(2)}\"\nputs \"Standard WMA (30): #{SQA::TAI.wma(prices).last.round(2)}\"\nputs \"Long-term WMA (50): #{wma_50.last.round(2)}\"\n</code></pre>"},{"location":"indicators/overlap/wma/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/overlap/wma/#what-it-measures","title":"What It Measures","text":"<p>The WMA measures trend direction with linear weighting:</p> <ul> <li>Trend Direction: Identifies market trends by weighting recent prices more heavily</li> <li>Momentum: The slope and position indicate trend strength and direction</li> <li>Dynamic Support/Resistance: Acts as support in uptrends, resistance in downtrends</li> <li>Balanced Response: More responsive than SMA, smoother than EMA</li> </ul> <p>WMA solves the dilemma between SMA's lag and EMA's potential over-sensitivity by applying a linear weighting scheme that gradually increases weight on more recent prices.</p>"},{"location":"indicators/overlap/wma/#calculation-method","title":"Calculation Method","text":"<p>The WMA uses linear weighting where recent prices have progressively more weight:</p> <ol> <li>Assign Weights: Most recent price gets weight of n, previous gets n-1, etc.</li> <li>Multiply Prices by Weights: Each price is multiplied by its weight</li> <li>Sum Weighted Prices: Add all weighted prices together</li> <li>Divide by Weight Sum: Divide by sum of weights (n \u00d7 (n+1) / 2)</li> </ol> <p>Formula: <pre><code>WMA = (P1 \u00d7 n + P2 \u00d7 (n-1) + P3 \u00d7 (n-2) + ... + Pn \u00d7 1) / (n \u00d7 (n+1) / 2)\n\nWhere:\nP1 = Most recent price (weight = n)\nP2 = Previous price (weight = n-1)\nPn = Oldest price (weight = 1)\nn = Period\n\nExample for 5-period WMA:\nPrices: [10, 11, 12, 11, 10] (oldest to newest)\nWeights: [1, 2, 3, 4, 5]\nWMA = (10\u00d71 + 11\u00d72 + 12\u00d73 + 11\u00d74 + 10\u00d75) / (1+2+3+4+5)\n    = (10 + 22 + 36 + 44 + 50) / 15\n    = 162 / 15 = 10.8\n</code></pre></p>"},{"location":"indicators/overlap/wma/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (follows price range)</li> <li>Type: Overlay indicator (plotted on price chart)</li> <li>Lag: Medium lag, between SMA and EMA</li> <li>Best Used: Trending markets, balanced trend following, crossover systems</li> </ul>"},{"location":"indicators/overlap/wma/#interpretation","title":"Interpretation","text":""},{"location":"indicators/overlap/wma/#value-ranges","title":"Value Ranges","text":"<p>The WMA's value follows the price range:</p> <ul> <li>WMA Rising: Indicates upward momentum and bullish trend</li> <li>WMA Falling: Indicates downward momentum and bearish trend</li> <li>WMA Flat: Suggests consolidation or range-bound market</li> </ul>"},{"location":"indicators/overlap/wma/#key-levels","title":"Key Levels","text":"<ul> <li>Price Above WMA: Bullish condition, uptrend in progress</li> <li>Price Below WMA: Bearish condition, downtrend in progress</li> <li>Price Crossing WMA: Potential trend change signal</li> <li>Distance from WMA: Extreme distances may indicate overbought/oversold</li> </ul>"},{"location":"indicators/overlap/wma/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read the WMA's signals:</p> <ol> <li>Trend Direction</li> <li>Price consistently above rising WMA = uptrend</li> <li>Price consistently below falling WMA = downtrend</li> <li> <p>Price oscillating around WMA = no clear trend</p> </li> <li> <p>Momentum Changes</p> </li> <li>WMA slope steepening = accelerating momentum</li> <li>WMA slope flattening = decelerating momentum</li> <li> <p>WMA slope change = potential trend change</p> </li> <li> <p>Reversal Signals</p> </li> <li>Price crosses below WMA = potential reversal to downtrend</li> <li>Price crosses above WMA = potential reversal to uptrend</li> <li>Confirm with volume and other indicators</li> </ol>"},{"location":"indicators/overlap/wma/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/overlap/wma/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: Price crosses above WMA while WMA is rising</li> <li>Confirmation Signal: Increasing volume on the crossover</li> <li>Entry Criteria: Close above WMA, WMA sloping upward</li> </ol> <p>Example Scenario: <pre><code>When price closes above WMA and WMA has been rising for 2-3 periods,\nconsider a long position with stop loss 2-3% below WMA.\nTarget the next resistance level or use a trailing stop.\n</code></pre></p>"},{"location":"indicators/overlap/wma/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: Price crosses below WMA while WMA is falling</li> <li>Confirmation Signal: Increasing volume on the crossover</li> <li>Exit Criteria: Close below WMA, WMA sloping downward</li> </ol> <p>Example Scenario: <pre><code>When price closes below WMA and WMA has been falling for 2-3 periods,\nconsider exiting long positions or entering short with stop loss 2-3% above WMA.\n</code></pre></p>"},{"location":"indicators/overlap/wma/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Price makes lower lows while WMA makes higher lows - Indicates weakening downward momentum - Often precedes trend reversal to the upside - More reliable when confirmed with RSI or MACD</p> <p>Bearish Divergence: - Price makes higher highs while WMA makes lower highs - Indicates weakening upward momentum - Often precedes trend reversal to the downside - Best used at resistance levels</p>"},{"location":"indicators/overlap/wma/#best-practices","title":"Best Practices","text":""},{"location":"indicators/overlap/wma/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When WMA works best: - Balanced trend following: When you want more response than SMA but less sensitivity than EMA - All timeframes: Effective on intraday, daily, and weekly charts - Liquid markets: Works best in stocks, forex, major cryptocurrencies - Crossover systems: Excellent for dual moving average strategies</p>"},{"location":"indicators/overlap/wma/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <p>With Trend Indicators: - Use ADX to confirm trend strength before following WMA signals - Combine with longer SMA for multi-timeframe confirmation</p> <p>With Volume Indicators: - Confirm WMA crossovers with volume spikes - Use OBV to validate WMA trend direction</p> <p>With Other Oscillators: - Use RSI for overbought/oversold identification - Combine with MACD for momentum confirmation - Stochastic for precise entry timing</p>"},{"location":"indicators/overlap/wma/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li>Comparing Directly to SMA/EMA: WMA produces different values; don't expect same results</li> <li>Over-optimization: Don't curve-fit period selection to historical data</li> <li>Ignoring Context: Consider market conditions and multiple timeframes</li> <li>Using Alone: WMA works best as part of a complete trading system</li> </ol>"},{"location":"indicators/overlap/wma/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>How to choose optimal parameters:</p> <ul> <li>Short-term trading (day trading): 10-20 period WMA for active signals</li> <li>Medium-term trading (swing trading): 20-30 period WMA for balanced approach</li> <li>Long-term trading (position trading): 50-100 period WMA for major trends</li> <li>Backtesting: Test on historical data to find optimal period for your instrument</li> </ul>"},{"location":"indicators/overlap/wma/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Load historical price data\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70]\n\n# Calculate WMA for crossover strategy\nwma_20 = SQA::TAI.wma(prices, period: 20)\nwma_50 = SQA::TAI.wma(prices, period: 50)\n\n# Compare with SMA and EMA\nsma_20 = SQA::TAI.sma(prices, period: 20)\nema_20 = SQA::TAI.ema(prices, period: 20)\n\n# Analysis logic\ncurrent_price = prices.last\ncurrent_wma = wma_20.last\ncurrent_sma = sma_20.last\ncurrent_ema = ema_20.last\n\nprev_wma_20 = wma_20[-2]\nprev_wma_50 = wma_50[-2]\ncurrent_wma_50 = wma_50.last\n\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"WMA-20: #{current_wma.round(2)}\"\nputs \"SMA-20: #{current_sma.round(2)}\"\nputs \"EMA-20: #{current_ema.round(2)}\"\nputs \"\"\n\n# WMA typically falls between SMA and EMA\nputs \"MA Comparison (showing WMA's balanced nature):\"\nputs \"SMA (slowest): #{current_sma.round(2)}\"\nputs \"WMA (balanced): #{current_wma.round(2)}\"\nputs \"EMA (fastest): #{current_ema.round(2)}\"\nputs \"\"\n\n# Check for golden cross/death cross\nif prev_wma_20 &lt;= prev_wma_50 &amp;&amp; current_wma &gt;= current_wma_50\n  puts \"GOLDEN CROSS: WMA-20 crossed above WMA-50\"\n  puts \"Bullish trend signal\"\n  puts \"Entry: #{current_price.round(2)}\"\n  puts \"Stop Loss: #{(current_wma_50 * 0.97).round(2)}\"\n\nelsif prev_wma_20 &gt;= prev_wma_50 &amp;&amp; current_wma &lt;= current_wma_50\n  puts \"DEATH CROSS: WMA-20 crossed below WMA-50\"\n  puts \"Bearish trend signal\"\n  puts \"Exit longs or consider shorts\"\n\n# Price position relative to WMA\nelsif current_price &gt; current_wma &amp;&amp; current_wma &gt; current_wma_50\n  puts \"Uptrend: Price &gt; WMA-20 &gt; WMA-50\"\n  puts \"Hold long positions\"\n\nelsif current_price &lt; current_wma &amp;&amp; current_wma &lt; current_wma_50\n  puts \"Downtrend: Price &lt; WMA-20 &lt; WMA-50\"\n  puts \"Avoid longs, stay in cash or short\"\nend\n</code></pre>"},{"location":"indicators/overlap/wma/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/overlap/wma/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>SMA: Equal weighting, slower response</li> <li>EMA: Exponential weighting, faster response</li> <li>DEMA: Double exponential, very low lag</li> </ul>"},{"location":"indicators/overlap/wma/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Confirms trend strength for WMA signals</li> <li>RSI: Identifies overbought/oversold for better entries</li> <li>MACD: Momentum confirmation for WMA crossovers</li> <li>Volume: Confirms trend changes with WMA</li> </ul>"},{"location":"indicators/overlap/wma/#indicator-family","title":"Indicator Family","text":"<p>WMA belongs to the moving average family: - SMA: Equal weighting (most lag) - WMA: Linear weighting (balanced) - EMA: Exponential weighting (least lag) - Use WMA when you want balance between smoothness and responsiveness</p>"},{"location":"indicators/overlap/wma/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/overlap/wma/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use WMA across multiple timeframes: - Daily WMA for overall trend direction - 4-hour WMA for intermediate entries - 1-hour WMA for precise timing - Trade when all timeframes align</p>"},{"location":"indicators/overlap/wma/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Adjust WMA parameters based on market volatility: - High volatility: Use longer periods (30-50) to reduce noise - Low volatility: Use shorter periods (15-25) for better responsiveness - Calculate ATR to measure volatility and adapt</p>"},{"location":"indicators/overlap/wma/#statistical-validation","title":"Statistical Validation","text":"<p>WMA reliability metrics: - Reliable in trending markets (ADX &gt; 25) - False signal rate increases in ranging markets - Crossover signals have 65-75% success rate in trends - Combine with volume for 75-85% accuracy</p>"},{"location":"indicators/overlap/wma/#references","title":"References","text":"<ul> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\"</li> <li>Pring, Martin J. \"Technical Analysis Explained\"</li> <li>Achelis, Steven B. \"Technical Analysis from A to Z\"</li> </ul>"},{"location":"indicators/overlap/wma/#see-also","title":"See Also","text":"<ul> <li>Overlap Studies Overview</li> <li>SMA Documentation</li> <li>EMA Documentation</li> <li>Moving Average Comparison</li> </ul>"},{"location":"indicators/patterns/","title":"Candlestick Pattern Recognition","text":"<p>TA-Lib provides 60+ candlestick pattern recognition functions that identify common Japanese candlestick patterns. These patterns can signal potential reversals or continuations in price trends.</p>"},{"location":"indicators/patterns/#overview","title":"Overview","text":"<p>Candlestick patterns are formed by one or more candlesticks and can indicate: - Potential trend reversals - Trend continuation signals - Market indecision - Bullish or bearish sentiment</p>"},{"location":"indicators/patterns/#using-pattern-recognition","title":"Using Pattern Recognition","text":"<p>All pattern functions follow the same API:</p> <pre><code>require 'sqa/tai'\n\n# OHLC data required\nopen   = [100.0, 101.0, 102.0, 101.5, 103.0]\nhigh   = [102.0, 103.0, 104.0, 103.0, 105.0]\nlow    = [99.5, 100.0, 101.0, 100.5, 102.0]\nclose  = [101.0, 102.0, 101.5, 103.0, 104.0]\n\n# Detect patterns\ndoji = SQA::TAI.cdl_doji(open, high, low, close)\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n</code></pre>"},{"location":"indicators/patterns/#return-values","title":"Return Values","text":"<p>Pattern functions return an array of integers: - 0: No pattern detected - +100: Bullish pattern - -100: Bearish pattern - Some functions may return +200/-200 for stronger patterns</p>"},{"location":"indicators/patterns/#featured-patterns","title":"Featured Patterns","text":""},{"location":"indicators/patterns/#single-candlestick-patterns","title":"Single Candlestick Patterns","text":"<ul> <li>Doji - Indecision, potential reversal</li> <li>Hammer - Bullish reversal after downtrend</li> <li>Shooting Star - Bearish reversal after uptrend</li> <li>Spinning Top - Indecision, small body</li> </ul>"},{"location":"indicators/patterns/#two-candlestick-patterns","title":"Two Candlestick Patterns","text":"<ul> <li>Engulfing Pattern - Strong reversal signal</li> <li>Harami - Potential trend change</li> <li>Piercing Pattern - Bullish reversal</li> <li>Dark Cloud Cover - Bearish reversal</li> </ul>"},{"location":"indicators/patterns/#three-candlestick-patterns","title":"Three Candlestick Patterns","text":"<ul> <li>Morning Star - Bullish reversal</li> <li>Evening Star - Bearish reversal</li> <li>Three White Soldiers - Strong bullish continuation</li> <li>Three Black Crows - Strong bearish continuation</li> </ul>"},{"location":"indicators/patterns/#example-scanning-for-multiple-patterns","title":"Example: Scanning for Multiple Patterns","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\n# Check multiple patterns\npatterns = {\n  'Doji' =&gt; SQA::TAI.cdl_doji(open, high, low, close),\n  'Hammer' =&gt; SQA::TAI.cdl_hammer(open, high, low, close),\n  'Shooting Star' =&gt; SQA::TAI.cdl_shooting_star(open, high, low, close),\n  'Engulfing' =&gt; SQA::TAI.cdl_engulfing(open, high, low, close),\n  'Morning Star' =&gt; SQA::TAI.cdl_morning_star(open, high, low, close),\n  'Evening Star' =&gt; SQA::TAI.cdl_evening_star(open, high, low, close),\n  'Harami' =&gt; SQA::TAI.cdl_harami(open, high, low, close)\n}\n\n# Check current bar for patterns\npatterns.each do |name, values|\n  signal = values.last\n  next if signal == 0\n\n  sentiment = signal &gt; 0 ? \"Bullish\" : \"Bearish\"\n  puts \"#{name}: #{sentiment} (#{signal})\"\nend\n</code></pre>"},{"location":"indicators/patterns/#example-pattern-with-trend-filter","title":"Example: Pattern with Trend Filter","text":"<pre><code>open, high, low, close = load_ohlc_data('TSLA')\n\n# Calculate trend\nsma_50 = SQA::TAI.sma(close, period: 50)\nuptrend = close.last &gt; sma_50.last\n\n# Detect patterns\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\nshooting_star = SQA::TAI.cdl_shooting_star(open, high, low, close)\n\n# Only take reversal signals aligned with trend context\nif hammer.last == 100 &amp;&amp; !uptrend\n  puts \"Hammer in downtrend - Strong bullish reversal signal!\"\n  puts \"Consider buying\"\nelsif shooting_star.last == -100 &amp;&amp; uptrend\n  puts \"Shooting Star in uptrend - Strong bearish reversal signal!\"\n  puts \"Consider selling\"\nend\n</code></pre>"},{"location":"indicators/patterns/#example-pattern-confirmation-with-volume","title":"Example: Pattern Confirmation with Volume","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('MSFT')\n\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n\n# Calculate average volume\navg_volume = volume[-20..-1].sum / 20.0\n\n# Pattern detected?\nif engulfing.last != 0\n  pattern_type = engulfing.last &gt; 0 ? \"Bullish\" : \"Bearish\"\n\n  # Confirm with volume\n  if volume.last &gt; avg_volume * 1.5\n    puts \"#{pattern_type} Engulfing with high volume!\"\n    puts \"Volume: #{volume.last.round(0)} (avg: #{avg_volume.round(0)})\"\n    puts \"Strong confirmation - high probability setup\"\n  else\n    puts \"#{pattern_type} Engulfing but volume low\"\n    puts \"Weaker signal - wait for confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/#pattern-categories","title":"Pattern Categories","text":""},{"location":"indicators/patterns/#reversal-patterns","title":"Reversal Patterns","text":"<p>Indicate potential trend changes: - Hammer, Hanging Man - Engulfing Patterns - Morning Star, Evening Star - Piercing Pattern, Dark Cloud Cover</p>"},{"location":"indicators/patterns/#continuation-patterns","title":"Continuation Patterns","text":"<p>Suggest trend will continue: - Three White Soldiers - Three Black Crows - Rising Three Methods - Falling Three Methods</p>"},{"location":"indicators/patterns/#indecision-patterns","title":"Indecision Patterns","text":"<p>Show market uncertainty: - Doji - Spinning Top - Harami - High Wave</p>"},{"location":"indicators/patterns/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/#1-use-trend-context","title":"1. Use Trend Context","text":"<pre><code># Bullish patterns work best at support in uptrends\n# Bearish patterns work best at resistance in downtrends\n</code></pre>"},{"location":"indicators/patterns/#2-confirm-with-volume","title":"2. Confirm with Volume","text":"<pre><code># Patterns on high volume are more reliable\nif pattern_detected &amp;&amp; volume &gt; avg_volume * 1.5\n  # Higher probability trade\nend\n</code></pre>"},{"location":"indicators/patterns/#3-wait-for-confirmation","title":"3. Wait for Confirmation","text":"<pre><code># Don't trade on pattern alone\n# Wait for next bar to confirm direction\n</code></pre>"},{"location":"indicators/patterns/#4-combine-multiple-signals","title":"4. Combine Multiple Signals","text":"<pre><code># Pattern + RSI + Support/Resistance\n# Multiple confirmations = higher probability\n</code></pre>"},{"location":"indicators/patterns/#example-complete-pattern-analysis-system","title":"Example: Complete Pattern Analysis System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('NVDA')\n\n# Trend context\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\ntrend = if close.last &gt; sma_50.last &amp;&amp; sma_50.last &gt; sma_200.last\n  \"Uptrend\"\nelsif close.last &lt; sma_50.last &amp;&amp; sma_50.last &lt; sma_200.last\n  \"Downtrend\"\nelse\n  \"Sideways\"\nend\n\n# Momentum\nrsi = SQA::TAI.rsi(close, period: 14)\n\n# Volume\navg_volume = volume[-20..-1].sum / 20.0\nvolume_ratio = volume.last / avg_volume\n\n# Patterns to check\npatterns_to_check = {\n  'Hammer' =&gt; { func: :cdl_hammer, bullish: true },\n  'Shooting Star' =&gt; { func: :cdl_shooting_star, bullish: false },\n  'Engulfing' =&gt; { func: :cdl_engulfing, bullish: nil },  # Can be either\n  'Morning Star' =&gt; { func: :cdl_morning_star, bullish: true },\n  'Evening Star' =&gt; { func: :cdl_evening_star, bullish: false }\n}\n\nputs \"Market Context:\"\nputs \"Trend: #{trend}\"\nputs \"RSI: #{rsi.last.round(2)}\"\nputs \"Volume Ratio: #{volume_ratio.round(2)}x\"\nputs \"\\nPattern Analysis:\"\n\npatterns_to_check.each do |name, config|\n  result = SQA::TAI.send(config[:func], open, high, low, close)\n  signal = result.last\n\n  next if signal == 0\n\n  is_bullish = signal &gt; 0\n\n  # Score the setup\n  score = 0\n  score += 1 if volume_ratio &gt; 1.5  # High volume\n  score += 1 if trend == \"Uptrend\" &amp;&amp; is_bullish  # Aligned with trend\n  score += 1 if trend == \"Downtrend\" &amp;&amp; !is_bullish\n  score += 1 if is_bullish &amp;&amp; rsi.last &lt; 40  # RSI not overbought\n  score += 1 if !is_bullish &amp;&amp; rsi.last &gt; 60  # RSI not oversold\n\n  puts \"\\n#{name}: #{is_bullish ? 'Bullish' : 'Bearish'}\"\n  puts \"Setup Score: #{score}/5\"\n\n  if score &gt;= 4\n    puts \"HIGH PROBABILITY SETUP!\"\n  elsif score &gt;= 3\n    puts \"Decent setup, monitor closely\"\n  else\n    puts \"Weak setup, low probability\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/#common-patterns-quick-reference","title":"Common Patterns Quick Reference","text":"Pattern Candles Signal Reliability Doji 1 Reversal Medium Hammer 1 Bullish High Shooting Star 1 Bearish High Engulfing 2 Strong Reversal High Harami 2 Reversal Medium Morning Star 3 Bullish High Evening Star 3 Bearish High Three White Soldiers 3 Bullish High Three Black Crows 3 Bearish High"},{"location":"indicators/patterns/#see-also","title":"See Also","text":"<ul> <li>Doji Pattern</li> <li>Hammer Pattern</li> <li>Engulfing Pattern</li> <li>Back to Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/","title":"Two Crows Pattern","text":"<p>The Two Crows is a rare three-candlestick bearish reversal pattern that appears at the top of an uptrend. It consists of a long bullish candle followed by two bearish candles that gap up but fail to hold their gains, suggesting the uptrend is losing momentum.</p>"},{"location":"indicators/patterns/cdl_2crows/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Bearish Reversal</li> <li>Candles Required: 3</li> <li>Trend Context: Appears after uptrend</li> <li>Reliability: Medium to High (when confirmed)</li> <li>Frequency: Rare</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 102.0, 104.0, 103.5, 103.0]\nhigh  = [102.5, 105.0, 105.5, 105.0, 104.5]\nlow   = [99.5, 101.5, 102.5, 102.0, 101.5]\nclose = [102.0, 104.5, 103.0, 102.5, 101.0]\n\n# Detect Two Crows pattern\npattern = SQA::TAI.cdl_2crows(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Two Crows detected - Bearish reversal signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_2crows/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Two Crows pattern detected - -100: Two Crows pattern detected (bearish reversal signal)</p> <p>Note: This pattern only returns bearish signals. There is no bullish equivalent.</p>"},{"location":"indicators/patterns/cdl_2crows/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_2crows/#three-candle-structure","title":"Three Candle Structure","text":"<ol> <li>First Candle: Long bullish (white) candle in an established uptrend</li> <li>Second Candle: Bearish (black) candle that gaps up above first candle's close but closes lower</li> <li>Third Candle: Another bearish candle that opens within second candle's body and closes lower, ideally near first candle's close</li> </ol>"},{"location":"indicators/patterns/cdl_2crows/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>First candle shows strong bullish momentum</li> <li>Second candle gaps up (bullish gap) but closes bearish</li> <li>Third candle continues lower, confirming weakness</li> <li>Pattern looks like two crows (bearish candles) sitting on a branch (first bullish candle)</li> <li>The failure to hold the gap suggests exhaustion</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#visual-pattern","title":"Visual Pattern","text":"<pre><code>After uptrend:\n\n        [==]     Second candle (gaps up, closes lower)\n       [===]     Third candle (continues down)\n\n    [=======]    First candle (long bullish)\n     |     |\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#interpretation","title":"Interpretation","text":"<p>The Two Crows pattern signals potential trend reversal through:</p> <ol> <li>Gap Failure: Bulls gap price higher but can't maintain gains</li> <li>Momentum Shift: Two consecutive bearish closes after gap</li> <li>Exhaustion Signal: Buyers losing control at trend top</li> <li>Crow Formation: Pattern name comes from visual of two crows (bearish candles) perched on a tree</li> </ol>"},{"location":"indicators/patterns/cdl_2crows/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Strength Weak uptrend Clear uptrend Strong uptrend Volume Decreasing Normal Increasing on black candles Gap Size Small gap Moderate gap Large gap that fails Location Mid-chart Near resistance At major resistance Third Candle Shallow close Moderate close Closes near first candle"},{"location":"indicators/patterns/cdl_2crows/#example-two-crows-in-uptrend-context","title":"Example: Two Crows in Uptrend Context","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_2crows(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == -100\n  # Verify uptrend context\n  in_uptrend = close[-4] &gt; sma_50[-4] &amp;&amp; sma_50[-4] &gt; sma_200[-4]\n\n  if in_uptrend\n    puts \"Two Crows pattern in strong uptrend!\"\n    puts \"High probability bearish reversal\"\n    puts \"Current price: #{close.last.round(2)}\"\n    puts \"SMA(50): #{sma_50.last.round(2)}\"\n\n    # Calculate gap\n    gap_size = ((open[-2] - close[-3]) / close[-3] * 100).round(2)\n    puts \"Gap up size: #{gap_size}%\"\n\n    # Check how far third candle retraced\n    retrace = ((close[-3] - close.last) / close[-3] * 100).round(2)\n    puts \"Retracement: #{retrace}%\"\n  else\n    puts \"Two Crows but not in clear uptrend\"\n    puts \"Lower reliability - verify context\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#example-two-crows-with-volume-analysis","title":"Example: Two Crows with Volume Analysis","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_2crows(open, high, low, close)\n\nif pattern.last == -100\n  # Volume analysis\n  vol_first = volume[-3]   # Bullish candle\n  vol_second = volume[-2]  # First crow\n  vol_third = volume[-1]   # Second crow\n  avg_volume = volume[-20..-1].sum / 20.0\n\n  puts \"Two Crows Volume Analysis:\"\n  puts \"First candle (bullish): #{vol_first.round(0)}\"\n  puts \"Second candle (crow 1): #{vol_second.round(0)}\"\n  puts \"Third candle (crow 2): #{vol_third.round(0)}\"\n  puts \"Average volume: #{avg_volume.round(0)}\"\n\n  # Ideal: Increasing volume on bearish candles\n  if vol_second &gt; vol_first &amp;&amp; vol_third &gt; vol_second\n    puts \"\\nSTRONG PATTERN: Increasing volume on decline\"\n    puts \"High conviction selling\"\n  elsif vol_second &gt; avg_volume || vol_third &gt; avg_volume\n    puts \"\\nGOOD PATTERN: Above average volume on crows\"\n  else\n    puts \"\\nWEAK PATTERN: Low volume\"\n    puts \"Less reliable - wait for confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#example-two-crows-at-resistance","title":"Example: Two Crows at Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_2crows(open, high, low, close)\n\n# Find resistance\nresistance = close[-120..-1].max\n\nif pattern.last == -100\n  distance_from_resistance = ((high[-2] - resistance) / resistance * 100).abs\n\n  if distance_from_resistance &lt; 2  # Within 2% of resistance\n    puts \"Two Crows AT MAJOR RESISTANCE!\"\n    puts \"Resistance level: #{resistance.round(2)}\"\n    puts \"Pattern high: #{high[-2].round(2)}\"\n    puts \"Current close: #{close.last.round(2)}\"\n    puts \"\\nFailed breakout - sellers defending resistance\"\n    puts \"HIGH PROBABILITY reversal setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#example-two-crows-with-rsi-confirmation","title":"Example: Two Crows with RSI Confirmation","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\npattern = SQA::TAI.cdl_2crows(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == -100\n  rsi_at_pattern = rsi[-3]  # RSI at first candle\n  rsi_current = rsi.last\n\n  puts \"Two Crows Pattern with RSI:\"\n  puts \"RSI at pattern start: #{rsi_at_pattern.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n\n  if rsi_at_pattern &gt; 70\n    puts \"\\nOVERBOUGHT RSI + Two Crows\"\n    puts \"Multiple bearish signals - Strong SELL setup\"\n  elsif rsi_at_pattern &gt; 60\n    puts \"\\nElevated RSI + Two Crows\"\n    puts \"Good reversal confirmation\"\n  else\n    puts \"\\nTwo Crows without overbought RSI\"\n    puts \"Moderate signal strength\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_2crows/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_2crows/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation candle after pattern\nif pattern[-2] == -100  # Pattern two candles ago\n  if close[-1] &lt; close[-2]  # Confirmation: another bearish close\n    puts \"Two Crows CONFIRMED - Enter SHORT\"\n    entry = close.last\n    puts \"Entry: #{entry.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion (third candle close)\nif pattern.last == -100\n  entry = close.last\n  puts \"Two Crows completed - Enter SHORT at #{entry.round(2)}\"\n  puts \"Higher risk - no confirmation\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == -100\n  # Stop above the gap high (second candle's high)\n  stop = high[-2]\n  stop_with_buffer = stop * 1.01  # 1% buffer\n\n  puts \"Stop loss: #{stop_with_buffer.round(2)}\"\n  puts \"Rationale: Above gap high - pattern invalidated if exceeded\"\n\n  # Alternative: Stop above first candle high\n  alt_stop = high[-3] * 1.01\n  puts \"Alternative stop (wider): #{alt_stop.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == -100\n  entry = close.last\n  stop = high[-2] * 1.01\n  risk = stop - entry\n\n  # Multiple targets\n  target_1 = entry - (risk * 1.5)  # 1.5:1 R:R\n  target_2 = entry - (risk * 2.5)  # 2.5:1 R:R\n  target_3 = entry - (risk * 4.0)  # 4:1 R:R\n\n  puts \"Profit Targets:\"\n  puts \"T1 (1.5:1): #{target_1.round(2)}\"\n  puts \"T2 (2.5:1): #{target_2.round(2)}\"\n  puts \"T3 (4:1): #{target_3.round(2)}\"\n\n  # Or target previous support\n  support = close[-60..-1].min\n  puts \"Support target: #{support.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_2crows(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == -100\n  puts \"Two Crows Pattern Detected\"\n  puts \"=\" * 50\n\n  # 1. Trend verification\n  in_uptrend = close[-4] &gt; sma_50[-4] &amp;&amp; sma_50[-4] &gt; sma_200[-4]\n\n  # 2. RSI check\n  rsi_overbought = rsi[-3] &gt; 60\n\n  # 3. Volume analysis\n  avg_vol = volume[-20..-1].sum / 20.0\n  vol_increasing = volume[-2] &gt; volume[-3] &amp;&amp; volume[-1] &gt; avg_vol\n\n  # 4. Resistance check\n  resistance = close[-120..-1].max\n  near_resistance = (high[-2] - resistance).abs &lt; resistance * 0.03\n\n  # 5. Gap analysis\n  gap_size = ((open[-2] - close[-3]) / close[-3] * 100)\n  significant_gap = gap_size &gt; 1.0\n\n  # 6. Retracement check\n  retraced_well = close.last &lt; (close[-3] + (high[-2] - close[-3]) * 0.5)\n\n  # Calculate score\n  score = 0\n  score += 1 if in_uptrend\n  score += 1 if rsi_overbought\n  score += 1 if vol_increasing\n  score += 1 if near_resistance\n  score += 1 if significant_gap\n  score += 1 if retraced_well\n\n  puts \"Setup Analysis:\"\n  puts \"In uptrend: #{in_uptrend} (#{score &gt;= 1 ? '\u2713' : '\u2717'})\"\n  puts \"RSI overbought: #{rsi_overbought} (RSI: #{rsi[-3].round(2)})\"\n  puts \"Volume increasing: #{vol_increasing}\"\n  puts \"Near resistance: #{near_resistance}\"\n  puts \"Significant gap: #{significant_gap} (#{gap_size.round(2)}%)\"\n  puts \"Good retracement: #{retraced_well}\"\n  puts \"\\nSetup Score: #{score}/6\"\n\n  if score &gt;= 4\n    entry = close.last\n    stop = high[-2] * 1.01\n    risk = stop - entry\n    target = entry - (risk * 3)\n\n    puts \"\\n*** HIGH PROBABILITY SHORT SETUP ***\"\n    puts \"Entry: #{entry.round(2)}\"\n    puts \"Stop: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)}\"\n    puts \"Reward: $#{(entry - target).round(2)}\"\n    puts \"R:R Ratio: 1:3\"\n\n    # Position sizing\n    account_size = 100000\n    risk_percent = 0.01  # 1% account risk\n    risk_amount = account_size * risk_percent\n    shares = (risk_amount / risk).floor\n    puts \"\\nPosition Size: #{shares} shares\"\n    puts \"Total risk: $#{risk_amount.round(2)} (1% of account)\"\n  elsif score &gt;= 3\n    puts \"\\nDECENT SETUP - Consider reduced position size\"\n  else\n    puts \"\\nLOW PROBABILITY - Skip this trade\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_2crows/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_2crows/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Rare (appears less than 1% of the time)</li> <li>Best Timeframes: Daily, Weekly (more reliable)</li> <li>Markets: Works on all markets (stocks, forex, crypto)</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#success-rate","title":"Success Rate","text":"<ul> <li>With confirmation: 65-75% success rate</li> <li>Without confirmation: 45-55% success rate</li> <li>At resistance: 70-80% success rate</li> <li>With volume: 68-78% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#average-move","title":"Average Move","text":"<ul> <li>Typical decline: 5-15% from pattern high</li> <li>Major reversals: 20-40% decline possible</li> <li>Time to target: 2-10 candles (varies by timeframe)</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_2crows/#dos","title":"Do's","text":"<ol> <li>Wait for established uptrend before taking signal</li> <li>Verify gap is significant (at least 1-2%)</li> <li>Look for increasing volume on bearish candles</li> <li>Trade near resistance levels for best results</li> <li>Wait for confirmation candle in choppy markets</li> <li>Use with overbought RSI for stronger signal</li> <li>Calculate risk/reward before entry</li> </ol>"},{"location":"indicators/patterns/cdl_2crows/#donts","title":"Don'ts","text":"<ol> <li>Don't trade pattern in downtrend or sideways market</li> <li>Don't ignore volume (low volume = low reliability)</li> <li>Don't enter without proper stop loss</li> <li>Don't chase if pattern is too far from resistance</li> <li>Don't trade if gap is tiny (&lt; 0.5%)</li> <li>Don't ignore broader market context</li> <li>Don't risk more than 1-2% of account</li> </ol>"},{"location":"indicators/patterns/cdl_2crows/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Trading without uptrend: Pattern requires uptrend context</li> <li>Ignoring the gap: Gap failure is crucial to pattern</li> <li>Poor stop placement: Must be above gap high</li> <li>No confirmation: Better results with fourth candle confirmation</li> <li>Confusing with Three Black Crows: Different patterns</li> </ol>"},{"location":"indicators/patterns/cdl_2crows/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_2crows/#similar-bearish-patterns","title":"Similar Bearish Patterns","text":"<ul> <li>Three Black Crows - Three consecutive bearish candles</li> <li>Evening Star - Three-candle reversal with star</li> <li>Dark Cloud Cover - Two-candle bearish reversal</li> <li>Advance Block - Three-candle topping pattern</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#opposite-pattern","title":"Opposite Pattern","text":"<ul> <li>Bullish Variant: No direct bullish equivalent</li> <li>Consider: Three White Soldiers for bullish reversal</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_2crows/#strong-two-crows","title":"Strong Two Crows","text":"<ul> <li>Large gap (2%+)</li> <li>Third candle closes below first candle's midpoint</li> <li>High volume on both crows</li> <li>Appears at major resistance</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#weak-two-crows","title":"Weak Two Crows","text":"<ul> <li>Small gap (&lt; 1%)</li> <li>Third candle doesn't retrace much</li> <li>Low or declining volume</li> <li>No clear resistance level</li> </ul>"},{"location":"indicators/patterns/cdl_2crows/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Rare but reliable when all conditions align</li> <li>Gap failure is the critical element</li> <li>Uptrend context is mandatory for validity</li> <li>Confirmation helps reduce false signals</li> <li>Volume matters - increases reliability significantly</li> <li>Resistance confluence improves success rate</li> <li>Risk management is essential - use stops</li> </ol>"},{"location":"indicators/patterns/cdl_2crows/#see-also","title":"See Also","text":"<ul> <li>Three Black Crows</li> <li>Evening Star</li> <li>Dark Cloud Cover</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/","title":"Three Black Crows Pattern","text":"<p>The Three Black Crows is one of the most reliable and powerful bearish reversal patterns in candlestick analysis. It consists of three consecutive long bearish candles, each opening within the previous candle's body and closing progressively lower, signaling a strong shift from bullish to bearish momentum.</p>"},{"location":"indicators/patterns/cdl_3blackcrows/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Bearish Reversal</li> <li>Candles Required: 3</li> <li>Trend Context: Appears after uptrend or at market top</li> <li>Reliability: High (one of the most reliable bearish patterns)</li> <li>Frequency: Moderate (appears 2-3% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [105.0, 104.5, 103.0, 101.5, 100.0]\nhigh  = [106.0, 105.0, 103.5, 102.0, 100.5]\nlow   = [104.0, 103.0, 101.0, 99.5, 98.0]\nclose = [104.5, 103.0, 101.5, 100.0, 98.5]\n\n# Detect Three Black Crows pattern\npattern = SQA::TAI.cdl_3blackcrows(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Three Black Crows detected - Strong bearish reversal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_3blackcrows/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Three Black Crows pattern detected - -100: Three Black Crows pattern detected (strong bearish reversal signal)</p> <p>Note: This pattern only returns bearish signals (-100). There is no bullish variant from this indicator (see Three White Soldiers for the bullish counterpart).</p>"},{"location":"indicators/patterns/cdl_3blackcrows/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_3blackcrows/#three-candle-structure","title":"Three Candle Structure","text":"<ol> <li>First Candle: Long bearish (black/red) candle that closes near its low</li> <li>Second Candle: Opens within first candle's body, closes lower, creating another long bearish candle</li> <li>Third Candle: Opens within second candle's body, closes even lower, completing the pattern</li> </ol>"},{"location":"indicators/patterns/cdl_3blackcrows/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>All three candles are bearish with long bodies</li> <li>Each candle opens within the previous candle's real body (not at gaps)</li> <li>Each candle closes progressively lower</li> <li>Limited or no upper shadows (closes near the lows)</li> <li>Ideally similar-sized candles showing consistent selling pressure</li> <li>Pattern appears after an uptrend or at market tops</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Consistent bodies: All three candles roughly the same size</li> <li>No gaps: Candles open within previous bodies (orderly decline)</li> <li>Minimal shadows: Little to no upper wicks (strong selling)</li> <li>Volume: Increasing or high volume on all three candles</li> <li>Context: Follows a clear uptrend</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#visual-pattern","title":"Visual Pattern","text":"<pre><code>After uptrend:\n\n    [====]       First black crow\n     |   |\n\n      [====]     Second black crow (opens in first, closes lower)\n       |   |\n\n        [====]   Third black crow (opens in second, closes lower)\n         |   |\n\n    Stepwise decline with consistent bearish pressure\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#interpretation","title":"Interpretation","text":"<p>The Three Black Crows signals a significant shift in market sentiment:</p> <ol> <li>Momentum Reversal: Bulls lose control after each attempt to recover</li> <li>Distribution: Smart money exiting positions</li> <li>Cascading Sell-off: Three consecutive down days shows persistent selling</li> <li>Trend Change: High probability the uptrend has ended</li> <li>Psychological Impact: Pattern creates fear and selling pressure</li> </ol>"},{"location":"indicators/patterns/cdl_3blackcrows/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Context Weak uptrend Clear uptrend Strong uptrend Candle Size Short bodies Medium bodies Long bodies Shadows Long upper shadows Some shadows Minimal shadows Volume Decreasing Normal Increasing Position Mid-chart After rally At resistance Consistency Variable sizes Similar sizes Uniform sizes"},{"location":"indicators/patterns/cdl_3blackcrows/#example-three-black-crows-in-context","title":"Example: Three Black Crows in Context","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_3blackcrows(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == -100\n  # Verify uptrend context\n  was_uptrend = close[-4] &gt; sma_50[-4] &amp;&amp; sma_50[-4] &gt; sma_200[-4]\n\n  if was_uptrend\n    puts \"Three Black Crows after strong uptrend!\"\n    puts \"HIGH PROBABILITY reversal\"\n    puts \"Previous close: #{close[-4].round(2)}\"\n    puts \"Current close: #{close.last.round(2)}\"\n\n    # Calculate decline\n    decline = ((close[-4] - close.last) / close[-4] * 100).round(2)\n    puts \"Decline: #{decline}%\"\n\n    # Check candle consistency\n    body1 = (open[-3] - close[-3]).abs\n    body2 = (open[-2] - close[-2]).abs\n    body3 = (open[-1] - close[-1]).abs\n    avg_body = (body1 + body2 + body3) / 3\n\n    consistent = (body1 - avg_body).abs &lt; avg_body * 0.3 &amp;&amp;\n                 (body2 - avg_body).abs &lt; avg_body * 0.3 &amp;&amp;\n                 (body3 - avg_body).abs &lt; avg_body * 0.3\n\n    if consistent\n      puts \"Candles are consistent - STRONG pattern\"\n    else\n      puts \"Candles vary in size - moderate pattern\"\n    end\n  else\n    puts \"Three Black Crows but not after uptrend\"\n    puts \"Lower reliability - may be continuation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#example-three-black-crows-with-volume","title":"Example: Three Black Crows with Volume","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_3blackcrows(open, high, low, close)\n\nif pattern.last == -100\n  # Volume analysis for each crow\n  vol_crow1 = volume[-3]\n  vol_crow2 = volume[-2]\n  vol_crow3 = volume[-1]\n  avg_volume = volume[-20..-4].sum / 17.0  # Before pattern\n\n  puts \"Three Black Crows Volume Analysis:\"\n  puts \"Crow 1 volume: #{vol_crow1.round(0)}\"\n  puts \"Crow 2 volume: #{vol_crow2.round(0)}\"\n  puts \"Crow 3 volume: #{vol_crow3.round(0)}\"\n  puts \"Average volume (before): #{avg_volume.round(0)}\"\n\n  # Check for volume confirmation\n  vol_increasing = vol_crow2 &gt; vol_crow1 &amp;&amp; vol_crow3 &gt; vol_crow2\n  high_vol = vol_crow1 &gt; avg_volume &amp;&amp; vol_crow2 &gt; avg_volume &amp;&amp; vol_crow3 &gt; avg_volume\n\n  if vol_increasing &amp;&amp; high_vol\n    puts \"\\nEXCELLENT: Increasing volume on all three crows\"\n    puts \"High conviction selling - VERY STRONG pattern\"\n  elsif high_vol\n    puts \"\\nGOOD: High volume on all crows\"\n    puts \"Strong selling pressure\"\n  elsif vol_increasing\n    puts \"\\nDECENT: Volume increasing\"\n    puts \"Building selling momentum\"\n  else\n    puts \"\\nWEAK: Low or decreasing volume\"\n    puts \"Less reliable - may lack follow-through\"\n  end\n\n  # Panic selling check\n  if vol_crow3 &gt; avg_volume * 2\n    puts \"\\nWARNING: Panic selling on third crow\"\n    puts \"May be climactic - watch for reversal\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#example-three-black-crows-at-resistance","title":"Example: Three Black Crows at Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_3blackcrows(open, high, low, close)\n\n# Find resistance\nresistance = close[-120..-1].max\nprior_high = high[-4]\n\nif pattern.last == -100\n  # Check if pattern formed at/near resistance\n  at_resistance = (prior_high - resistance).abs &lt; resistance * 0.02\n\n  if at_resistance\n    puts \"Three Black Crows AT RESISTANCE!\"\n    puts \"Resistance: #{resistance.round(2)}\"\n    puts \"Pattern started near: #{prior_high.round(2)}\"\n    puts \"Current price: #{close.last.round(2)}\"\n    puts \"\\nFailed breakout or resistance rejection\"\n    puts \"VERY HIGH PROBABILITY reversal\"\n\n    # Calculate potential downside\n    support = close[-60..-1].min\n    potential_move = ((close.last - support) / close.last * 100).round(2)\n    puts \"Potential move to support: #{potential_move}%\"\n  else\n    distance = ((prior_high - resistance) / resistance * 100).round(2)\n    puts \"Three Black Crows #{distance}% from resistance\"\n    puts \"Moderate setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#example-three-black-crows-with-rsi","title":"Example: Three Black Crows with RSI","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\npattern = SQA::TAI.cdl_3blackcrows(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == -100\n  rsi_before = rsi[-4]   # Before pattern\n  rsi_current = rsi.last  # After pattern\n\n  puts \"Three Black Crows with RSI:\"\n  puts \"RSI before pattern: #{rsi_before.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n  puts \"RSI change: #{(rsi_current - rsi_before).round(2)}\"\n\n  if rsi_before &gt; 70\n    puts \"\\nPattern formed from OVERBOUGHT\"\n    puts \"Classic reversal from extremes\"\n    puts \"STRONG bearish signal\"\n  elsif rsi_before &gt; 60\n    puts \"\\nPattern formed from elevated RSI\"\n    puts \"Good reversal setup\"\n  end\n\n  # Check for oversold\n  if rsi_current &lt; 30\n    puts \"\\nWARNING: Now oversold\"\n    puts \"May see bounce - consider waiting\"\n  elsif rsi_current &lt; 40\n    puts \"\\nApproaching oversold - monitor closely\"\n  else\n    puts \"\\nRoom to fall - RSI not oversold yet\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_3blackcrows/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_3blackcrows/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation candle after pattern\nif pattern[-2] == -100  # Pattern completed two candles ago\n  if close[-1] &lt; close[-2] || close.last &lt; close[-1]\n    puts \"Three Black Crows CONFIRMED\"\n    entry = close.last\n    puts \"Enter SHORT at #{entry.round(2)}\"\n  else\n    puts \"Waiting for confirmation - price trying to recover\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter immediately on pattern completion\nif pattern.last == -100\n  entry = close.last\n  puts \"Three Black Crows completed - Enter SHORT\"\n  puts \"Entry: #{entry.round(2)}\"\n  puts \"Note: Higher risk without confirmation\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#pullback-entry","title":"Pullback Entry","text":"<pre><code># Wait for pullback to pattern area\nif pattern[-3] == -100  # Pattern 3 candles ago\n  pattern_high = [high[-3], high[-2], high[-1]].max\n\n  if close.last &gt; close[-1] &amp;&amp; close.last &lt; pattern_high\n    puts \"Pullback to pattern resistance\"\n    puts \"Enter SHORT at #{close.last.round(2)}\"\n    puts \"Lower risk entry point\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == -100\n  # Stop above pattern high\n  pattern_high = [high[-3], high[-2], high[-1]].max\n  stop = pattern_high * 1.01  # 1% buffer\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Rationale: Above pattern high - invalidates bearish setup\"\n\n  # Alternative: Tighter stop above first candle\n  tight_stop = high[-3] * 1.005  # 0.5% buffer\n  puts \"Tighter stop: #{tight_stop.round(2)} (higher risk)\"\n\n  # Calculate risk\n  entry = close.last\n  risk = stop - entry\n  risk_percent = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_percent}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == -100\n  entry = close.last\n  stop = [high[-3], high[-2], high[-1]].max * 1.01\n  risk = stop - entry\n\n  # Risk-based targets\n  target_1 = entry - (risk * 2)    # 2:1 R:R\n  target_2 = entry - (risk * 3)    # 3:1 R:R\n  target_3 = entry - (risk * 5)    # 5:1 R:R\n\n  puts \"Risk-Based Targets:\"\n  puts \"T1 (2:1): #{target_1.round(2)}\"\n  puts \"T2 (3:1): #{target_2.round(2)}\"\n  puts \"T3 (5:1): #{target_3.round(2)}\"\n\n  # Support-based target\n  support = close[-120..-1].min\n  puts \"\\nSupport target: #{support.round(2)}\"\n\n  # Moving average target\n  sma_50 = SQA::TAI.sma(close, period: 50)\n  puts \"50 SMA target: #{sma_50.last.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_3blackcrows(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == -100\n  puts \"Three Black Crows Pattern Analysis\"\n  puts \"=\" * 60\n\n  # 1. Trend context\n  was_uptrend = close[-4] &gt; sma_50[-4] &amp;&amp; sma_50[-4] &gt; sma_200[-4]\n\n  # 2. Resistance check\n  resistance = close[-120..-1].max\n  high_before = high[-4]\n  near_resistance = (high_before - resistance).abs &lt; resistance * 0.03\n\n  # 3. RSI analysis\n  rsi_before = rsi[-4]\n  rsi_overbought = rsi_before &gt; 60\n\n  # 4. Volume analysis\n  avg_vol = volume[-20..-4].sum / 17.0\n  vol_crows = [volume[-3], volume[-2], volume[-1]]\n  high_volume = vol_crows.all? { |v| v &gt; avg_vol }\n  vol_increasing = vol_crows[-1] &gt; vol_crows[-2] &amp;&amp; vol_crows[-2] &gt; vol_crows[-1]\n\n  # 5. Candle quality\n  body1 = (open[-3] - close[-3]).abs\n  body2 = (open[-2] - close[-2]).abs\n  body3 = (open[-1] - close[-1]).abs\n  bodies = [body1, body2, body3]\n  avg_body = bodies.sum / 3.0\n\n  long_bodies = bodies.all? { |b| b &gt; close[-4] * 0.02 }  # At least 2% bodies\n  consistent = bodies.all? { |b| (b - avg_body).abs &lt; avg_body * 0.4 }\n\n  # 6. Shadow analysis\n  shadow1_up = high[-3] - [open[-3], close[-3]].max\n  shadow2_up = high[-2] - [open[-2], close[-2]].max\n  shadow3_up = high[-1] - [open[-1], close[-1]].max\n\n  minimal_shadows = [shadow1_up, shadow2_up, shadow3_up].all? { |s| s &lt; avg_body * 0.3 }\n\n  # 7. Progressive decline\n  proper_opens = open[-2] &lt; close[-3] &amp;&amp; open[-2] &gt; close[-3] - body1 &amp;&amp;\n                 open[-1] &lt; close[-2] &amp;&amp; open[-1] &gt; close[-2] - body2\n  progressive_closes = close[-2] &lt; close[-3] &amp;&amp; close[-1] &lt; close[-2]\n\n  # Calculate score\n  score = 0\n  score += 2 if was_uptrend           # Critical\n  score += 2 if near_resistance       # Very important\n  score += 1 if rsi_overbought\n  score += 1 if high_volume\n  score += 1 if long_bodies\n  score += 1 if consistent\n  score += 1 if minimal_shadows\n  score += 1 if proper_opens &amp;&amp; progressive_closes\n\n  puts \"Quality Checks:\"\n  puts \"1. Uptrend context: #{was_uptrend} #{was_uptrend ? '\u2713\u2713' : '\u2717\u2717'}\"\n  puts \"2. Near resistance: #{near_resistance} #{near_resistance ? '\u2713\u2713' : '\u2717'}\"\n  puts \"3. RSI overbought (#{rsi_before.round(2)}): #{rsi_overbought} #{rsi_overbought ? '\u2713' : '\u2717'}\"\n  puts \"4. High volume: #{high_volume} #{high_volume ? '\u2713' : '\u2717'}\"\n  puts \"5. Long bodies: #{long_bodies} #{long_bodies ? '\u2713' : '\u2717'}\"\n  puts \"6. Consistent size: #{consistent} #{consistent ? '\u2713' : '\u2717'}\"\n  puts \"7. Minimal shadows: #{minimal_shadows} #{minimal_shadows ? '\u2713' : '\u2717'}\"\n  puts \"8. Proper formation: #{proper_opens &amp;&amp; progressive_closes} #{proper_opens &amp;&amp; progressive_closes ? '\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/10\"\n\n  if score &gt;= 7\n    # Calculate trade parameters\n    entry = close.last\n    pattern_high = [high[-3], high[-2], high[-1]].max\n    stop = pattern_high * 1.01\n    risk = stop - entry\n\n    # Find support for target\n    support = close[-120..-1].min\n    target_support = support\n    target_rr3 = entry - (risk * 3)\n\n    target = [target_support, target_rr3].max  # Use closer target\n    reward = entry - target\n    rr_ratio = (reward / risk).round(1)\n\n    puts \"\\n*** EXCELLENT SHORT SETUP ***\"\n    puts \"-\" * 60\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)} (above pattern high)\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)} (#{(reward/entry*100).round(2)}%)\"\n    puts \"R:R Ratio: 1:#{rr_ratio}\"\n\n    # Position sizing (1% account risk)\n    account_size = 100000\n    risk_amount = account_size * 0.01\n    shares = (risk_amount / risk).floor\n    position_value = shares * entry\n\n    puts \"\\nPosition Sizing (1% risk):\"\n    puts \"Shares: #{shares}\"\n    puts \"Position value: $#{position_value.round(2)}\"\n    puts \"Total risk: $#{risk_amount.round(2)}\"\n    puts \"Potential profit: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 5\n    puts \"\\nDECENT SETUP - Consider smaller position\"\n    puts \"Missing some ideal conditions\"\n\n  else\n    puts \"\\nWEAK SETUP - SKIP\"\n    puts \"Too many missing conditions\"\n    puts \"Wait for better opportunity\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_3blackcrows/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Moderate (2-3% of the time)</li> <li>Best Timeframes: Daily and Weekly (most reliable)</li> <li>Markets: Works on all markets (stocks, forex, crypto, commodities)</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 78-85% success rate</li> <li>Good pattern: 65-75% success rate</li> <li>Average pattern: 55-65% success rate</li> <li>At resistance: 80-88% success rate</li> <li>With volume: 72-82% success rate</li> <li>After strong uptrend: 75-85% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#average-move","title":"Average Move","text":"<ul> <li>Initial decline: 8-18% from pattern high</li> <li>Major reversals: 25-45% decline</li> <li>Time to target: 5-20 candles (varies by timeframe)</li> <li>Follow-through: 70% show continued weakness</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_3blackcrows/#dos","title":"Do's","text":"<ol> <li>Wait for established uptrend before taking signal</li> <li>Verify all three candles have substantial bodies</li> <li>Check for minimal upper shadows (strong selling)</li> <li>Look for increasing or consistently high volume</li> <li>Trade near resistance for best results</li> <li>Confirm with RSI overbought conditions</li> <li>Use proper stop loss above pattern high</li> <li>Scale out at multiple targets</li> <li>Look for consistent candle sizes</li> <li>Verify proper candle progression (opens within bodies)</li> </ol>"},{"location":"indicators/patterns/cdl_3blackcrows/#donts","title":"Don'ts","text":"<ol> <li>Don't trade in existing downtrend (not a reversal there)</li> <li>Don't ignore volume (critical confirmation)</li> <li>Don't trade with long upper shadows (shows buying interest)</li> <li>Don't enter without stop loss</li> <li>Don't ignore overall market conditions</li> <li>Don't trade if candles are tiny (weak pattern)</li> <li>Don't chase if you missed entry</li> <li>Don't confuse with ordinary decline</li> <li>Don't trade if RSI already oversold</li> <li>Don't risk more than 1-2% account</li> </ol>"},{"location":"indicators/patterns/cdl_3blackcrows/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Trading in downtrend: Pattern needs uptrend for reversal validity</li> <li>Ignoring candle quality: Bodies must be long and consistent</li> <li>Poor stop placement: Must protect above pattern high</li> <li>No volume confirmation: High volume = high conviction</li> <li>Entering too late: Best entry is at/near pattern completion</li> <li>Ignoring shadows: Long upper shadows = buying pressure</li> <li>Wrong timeframe: More reliable on daily/weekly charts</li> </ol>"},{"location":"indicators/patterns/cdl_3blackcrows/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_3blackcrows/#similar-bearish-patterns","title":"Similar Bearish Patterns","text":"<ul> <li>Two Crows - Two candle bearish reversal</li> <li>Advance Block - Three-candle topping</li> <li>Evening Star - Three-candle reversal with star</li> <li>Dark Cloud Cover - Two-candle reversal</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#opposite-pattern","title":"Opposite Pattern","text":"<ul> <li>Three White Soldiers - Bullish equivalent</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#component-patterns","title":"Component Patterns","text":"<ul> <li>Engulfing - May occur within the pattern</li> <li>Marubozu - Long bodies with no shadows</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_3blackcrows/#perfect-three-black-crows","title":"Perfect Three Black Crows","text":"<ul> <li>All three candles long and similar size</li> <li>Opens within previous bodies (no gaps)</li> <li>Closes at or near lows (minimal shadows)</li> <li>High volume on all three</li> <li>Appears at resistance after strong uptrend</li> <li>Success Rate: 80-85%</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#good-three-black-crows","title":"Good Three Black Crows","text":"<ul> <li>Long bodies with some variation</li> <li>Mostly minimal shadows</li> <li>Good volume</li> <li>Clear uptrend context</li> <li>Success Rate: 65-75%</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#weak-three-black-crows","title":"Weak Three Black Crows","text":"<ul> <li>Variable candle sizes</li> <li>Long upper shadows (buying interest)</li> <li>Low volume</li> <li>No clear uptrend</li> <li>Not at resistance</li> <li>Success Rate: 45-55%</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#modified-patterns","title":"Modified Patterns","text":"<ul> <li>Identical Three Crows: All three nearly same size (stronger)</li> <li>Deliberate Three Crows: Small gaps between crows (weaker)</li> </ul>"},{"location":"indicators/patterns/cdl_3blackcrows/#advanced-concepts","title":"Advanced Concepts","text":""},{"location":"indicators/patterns/cdl_3blackcrows/#crow-quality-score","title":"Crow Quality Score","text":"<pre><code>def score_three_black_crows(open, high, low, close, volume)\n  return 0 unless pattern.last == -100\n\n  score = 0\n\n  # Body length (0-2 points)\n  bodies = [-3, -2, -1].map { |i| (open[i] - close[i]).abs }\n  avg_body = bodies.sum / 3.0\n  score += 2 if avg_body &gt; close.last * 0.025  # 2.5%+ bodies\n  score += 1 if avg_body &gt; close.last * 0.015  # 1.5%+ bodies\n\n  # Consistency (0-2 points)\n  std_dev = Math.sqrt(bodies.sum { |b| (b - avg_body)**2 } / 3)\n  score += 2 if std_dev &lt; avg_body * 0.2   # Very consistent\n  score += 1 if std_dev &lt; avg_body * 0.4   # Fairly consistent\n\n  # Shadow analysis (0-2 points)\n  shadows = [-3, -2, -1].map { |i| high[i] - [open[i], close[i]].max }\n  score += 2 if shadows.all? { |s| s &lt; avg_body * 0.2 }\n  score += 1 if shadows.all? { |s| s &lt; avg_body * 0.4 }\n\n  # Volume (0-2 points)\n  avg_vol = volume[-20..-4].sum / 17.0\n  crow_vols = volume[-3..-1]\n  score += 2 if crow_vols.all? { |v| v &gt; avg_vol * 1.3 }\n  score += 1 if crow_vols.all? { |v| v &gt; avg_vol }\n\n  # Formation (0-2 points)\n  proper_form = open[-2] &lt; close[-3] &amp;&amp; open[-2] &gt; low[-3] &amp;&amp;\n                open[-1] &lt; close[-2] &amp;&amp; open[-1] &gt; low[-2] &amp;&amp;\n                close[-2] &lt; close[-3] &amp;&amp; close[-1] &lt; close[-2]\n  score += 2 if proper_form\n\n  score  # 0-10\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3blackcrows/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Highly reliable when all conditions present (uptrend, resistance, volume)</li> <li>Three is key - shows persistence, not just one-off selling</li> <li>Context critical - must follow uptrend for reversal signal</li> <li>Quality matters - long consistent bodies with minimal shadows</li> <li>Volume confirms - high volume shows conviction</li> <li>Stop protection - always use stop above pattern high</li> <li>Patient entry - best results with confirmation</li> <li>Multiple targets - scale out as pattern plays out</li> <li>Risk management - never risk more than 1-2% per trade</li> <li>Best at resistance - failed breakout = strongest signal</li> </ol>"},{"location":"indicators/patterns/cdl_3blackcrows/#see-also","title":"See Also","text":"<ul> <li>Three White Soldiers - Bullish counterpart</li> <li>Two Crows - Similar two-candle pattern</li> <li>Evening Star - Three-candle reversal</li> <li>Advance Block - Related topping pattern</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/","title":"Three Inside Up/Down Pattern","text":"<p>The Three Inside Up/Down is a reliable three-candlestick reversal pattern that combines an engulfing pattern with a confirmation candle. The bullish variant (Three Inside Up) appears in downtrends, while the bearish variant (Three Inside Down) appears in uptrends, making them powerful trend reversal signals.</p>"},{"location":"indicators/patterns/cdl_3inside/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (both bullish and bearish variants)</li> <li>Candles Required: 3</li> <li>Trend Context: Appears at trend extremes</li> <li>Reliability: High (combines engulfing + confirmation)</li> <li>Frequency: Moderate (2-3% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [105.0, 103.0, 102.0, 103.5, 104.5]\nhigh  = [106.0, 104.0, 104.5, 105.0, 106.0]\nlow   = [102.0, 101.5, 101.5, 102.5, 103.5]\nclose = [103.0, 102.0, 104.0, 104.5, 105.5]\n\n# Detect Three Inside Up/Down pattern\npattern = SQA::TAI.cdl_3inside(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Three Inside Up detected - Bullish reversal signal!\"\nelsif pattern.last == -100\n  puts \"Three Inside Down detected - Bearish reversal signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_3inside/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Three Inside Up/Down pattern detected - 100: Three Inside Up pattern detected (bullish reversal signal) - -100: Three Inside Down pattern detected (bearish reversal signal)</p>"},{"location":"indicators/patterns/cdl_3inside/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_3inside/#three-inside-up-bullish","title":"Three Inside Up (Bullish)","text":"<ol> <li>First Candle: Long bearish candle in established downtrend</li> <li>Second Candle: Bullish candle that is engulfed by first candle's body (harami)</li> <li>Third Candle: Bullish candle that closes above first candle's close (confirmation)</li> </ol>"},{"location":"indicators/patterns/cdl_3inside/#three-inside-down-bearish","title":"Three Inside Down (Bearish)","text":"<ol> <li>First Candle: Long bullish candle in established uptrend</li> <li>Second Candle: Bearish candle that is engulfed by first candle's body (harami)</li> <li>Third Candle: Bearish candle that closes below first candle's close (confirmation)</li> </ol>"},{"location":"indicators/patterns/cdl_3inside/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Pattern is essentially a harami (engulfing) followed by confirmation</li> <li>Second candle opens and closes within first candle's range</li> <li>Third candle confirms direction by breaking past first candle's close</li> <li>More reliable than standalone harami due to confirmation</li> <li>\"Inside\" refers to second candle being inside first candle</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Three Inside Up (Bullish):\nAfter downtrend:\n\n  |=====|      First candle (long bearish)\n  |     |\n    |==|        Second candle (bullish, inside first)\n     |===|      Third candle (bullish confirmation)\n     |   |\n\nThree Inside Down (Bearish):\nAfter uptrend:\n\n  |=====|      First candle (long bullish)\n  |     |\n    |==|        Second candle (bearish, inside first)\n     |===|      Third candle (bearish confirmation)\n     |   |\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#interpretation","title":"Interpretation","text":"<p>The Three Inside pattern signals trend reversal through:</p> <ol> <li>Initial Exhaustion: Long first candle shows trend climax</li> <li>Hesitation: Second candle inside first shows momentum loss</li> <li>Confirmation: Third candle confirms new direction</li> <li>Psychological Shift: Pattern shows clear sentiment change</li> <li>Higher Reliability: Three-candle formation reduces false signals</li> </ol>"},{"location":"indicators/patterns/cdl_3inside/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Strength Weak trend Clear trend Strong trend First Candle Short body Medium body Long body Second Candle Near edge Mid-range Well-centered Third Candle Small close Moderate close Strong close Volume Decreasing Normal Increasing on 3<sup>rd</sup> Location Mid-chart Near level At support/resistance"},{"location":"indicators/patterns/cdl_3inside/#example-three-inside-up-in-downtrend","title":"Example: Three Inside Up in Downtrend","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_3inside(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == 100\n  # Three Inside Up (bullish)\n  in_downtrend = close[-4] &lt; sma_50[-4] &amp;&amp; sma_50[-4] &lt; sma_200[-4]\n\n  if in_downtrend\n    puts \"Three Inside Up after strong downtrend!\"\n    puts \"HIGH PROBABILITY bullish reversal\"\n    puts \"Pattern low: #{low[-3..-1].min.round(2)}\"\n    puts \"Current close: #{close.last.round(2)}\"\n\n    # Calculate pattern strength\n    first_body = (open[-3] - close[-3]).abs\n    second_body = (close[-2] - open[-2]).abs\n    third_body = (close[-1] - open[-1]).abs\n\n    puts \"First candle size: #{first_body.round(2)}\"\n    puts \"Third candle (confirmation): #{third_body.round(2)}\"\n\n    if third_body &gt; first_body * 0.5\n      puts \"Strong confirmation candle - excellent setup\"\n    end\n  else\n    puts \"Three Inside Up but not in clear downtrend\"\n    puts \"Lower reliability - verify context\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#example-three-inside-down-in-uptrend","title":"Example: Three Inside Down in Uptrend","text":"<pre><code>open, high, low, close = load_ohlc_data('TSLA')\n\npattern = SQA::TAI.cdl_3inside(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last == -100\n  # Three Inside Down (bearish)\n  in_uptrend = close[-4] &gt; sma_50[-4]\n\n  if in_uptrend\n    puts \"Three Inside Down after uptrend!\"\n    puts \"HIGH PROBABILITY bearish reversal\"\n    puts \"Pattern high: #{high[-3..-1].max.round(2)}\"\n    puts \"Current close: #{close.last.round(2)}\"\n\n    # Check confirmation strength\n    first_body = (close[-3] - open[-3]).abs\n    third_body = (open[-1] - close[-1]).abs\n    confirmation_ratio = (third_body / first_body * 100).round(2)\n\n    puts \"Confirmation strength: #{confirmation_ratio}%\"\n\n    if confirmation_ratio &gt; 50\n      puts \"Strong confirmation - powerful reversal signal\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#example-three-inside-with-volume-analysis","title":"Example: Three Inside with Volume Analysis","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('MSFT')\n\npattern = SQA::TAI.cdl_3inside(open, high, low, close)\n\nif pattern.last != 0\n  pattern_type = pattern.last &gt; 0 ? \"Three Inside Up\" : \"Three Inside Down\"\n\n  # Volume analysis\n  vol_first = volume[-3]\n  vol_second = volume[-2]\n  vol_third = volume[-1]\n  avg_volume = volume[-20..-1].sum / 20.0\n\n  puts \"#{pattern_type} Volume Analysis:\"\n  puts \"First candle: #{vol_first.round(0)}\"\n  puts \"Second candle: #{vol_second.round(0)}\"\n  puts \"Third candle (confirmation): #{vol_third.round(0)}\"\n  puts \"Average volume: #{avg_volume.round(0)}\"\n\n  # Ideal: High volume on confirmation candle\n  if vol_third &gt; avg_volume * 1.5\n    puts \"\\nEXCELLENT: High volume on confirmation\"\n    puts \"Strong conviction - reliable reversal\"\n  elsif vol_third &gt; avg_volume\n    puts \"\\nGOOD: Above average volume on confirmation\"\n    puts \"Decent conviction\"\n  else\n    puts \"\\nWEAK: Low volume on confirmation\"\n    puts \"Less reliable - may lack follow-through\"\n  end\n\n  # Check for volume pattern\n  if vol_third &gt; vol_second &amp;&amp; vol_second &gt; vol_first\n    puts \"\\nIncreasing volume throughout pattern - very bullish setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#example-three-inside-at-supportresistance","title":"Example: Three Inside at Support/Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\npattern = SQA::TAI.cdl_3inside(open, high, low, close)\n\n# Find support and resistance\nsupport = close[-120..-1].min\nresistance = close[-120..-1].max\n\nif pattern.last == 100  # Bullish\n  distance_from_support = ((close[-3] - support) / support * 100).abs\n\n  if distance_from_support &lt; 2  # Within 2% of support\n    puts \"Three Inside Up AT MAJOR SUPPORT!\"\n    puts \"Support level: #{support.round(2)}\"\n    puts \"Pattern low: #{low[-3..-1].min.round(2)}\"\n    puts \"Current close: #{close.last.round(2)}\"\n    puts \"\\nBuyers defending support - HIGH PROBABILITY reversal\"\n\n    # Calculate potential upside\n    target = resistance\n    potential_gain = ((target - close.last) / close.last * 100).round(2)\n    puts \"Potential to resistance: #{potential_gain}%\"\n  end\n\nelsif pattern.last == -100  # Bearish\n  distance_from_resistance = ((close[-3] - resistance) / resistance * 100).abs\n\n  if distance_from_resistance &lt; 2  # Within 2% of resistance\n    puts \"Three Inside Down AT MAJOR RESISTANCE!\"\n    puts \"Resistance level: #{resistance.round(2)}\"\n    puts \"Pattern high: #{high[-3..-1].max.round(2)}\"\n    puts \"Current close: #{close.last.round(2)}\"\n    puts \"\\nSellers defending resistance - HIGH PROBABILITY reversal\"\n\n    # Calculate potential downside\n    target = support\n    potential_decline = ((close.last - target) / close.last * 100).round(2)\n    puts \"Potential to support: #{potential_decline}%\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#example-three-inside-with-rsi-confirmation","title":"Example: Three Inside with RSI Confirmation","text":"<pre><code>open, high, low, close = load_ohlc_data('GOOGL')\n\npattern = SQA::TAI.cdl_3inside(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == 100  # Bullish\n  rsi_at_pattern = rsi[-3]\n  rsi_current = rsi.last\n\n  puts \"Three Inside Up with RSI:\"\n  puts \"RSI at pattern start: #{rsi_at_pattern.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n\n  if rsi_at_pattern &lt; 30\n    puts \"\\nOVERSOLD RSI + Three Inside Up\"\n    puts \"Multiple bullish signals - Strong BUY setup\"\n  elsif rsi_at_pattern &lt; 40\n    puts \"\\nLow RSI + Three Inside Up\"\n    puts \"Good reversal confirmation\"\n  else\n    puts \"\\nThree Inside Up without oversold RSI\"\n    puts \"Moderate signal strength\"\n  end\n\nelsif pattern.last == -100  # Bearish\n  rsi_at_pattern = rsi[-3]\n  rsi_current = rsi.last\n\n  puts \"Three Inside Down with RSI:\"\n  puts \"RSI at pattern start: #{rsi_at_pattern.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n\n  if rsi_at_pattern &gt; 70\n    puts \"\\nOVERBOUGHT RSI + Three Inside Down\"\n    puts \"Multiple bearish signals - Strong SELL setup\"\n  elsif rsi_at_pattern &gt; 60\n    puts \"\\nHigh RSI + Three Inside Down\"\n    puts \"Good reversal confirmation\"\n  else\n    puts \"\\nThree Inside Down without overbought RSI\"\n    puts \"Moderate signal strength\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_3inside/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_3inside/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for additional confirmation after pattern\nif pattern[-2] == 100  # Bullish pattern two candles ago\n  if close[-1] &gt; close[-2]  # Another bullish close\n    puts \"Three Inside Up CONFIRMED - Enter LONG\"\n    entry = close.last\n    puts \"Entry: #{entry.round(2)}\"\n  end\nelsif pattern[-2] == -100  # Bearish pattern two candles ago\n  if close[-1] &lt; close[-2]  # Another bearish close\n    puts \"Three Inside Down CONFIRMED - Enter SHORT\"\n    entry = close.last\n    puts \"Entry: #{entry.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion (third candle close)\nif pattern.last == 100\n  entry = close.last\n  puts \"Three Inside Up completed - Enter LONG at #{entry.round(2)}\"\nelsif pattern.last == -100\n  entry = close.last\n  puts \"Three Inside Down completed - Enter SHORT at #{entry.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == 100  # Bullish\n  # Stop below pattern low\n  stop = low[-3..-1].min\n  stop_with_buffer = stop * 0.995  # 0.5% buffer\n\n  puts \"Stop loss: #{stop_with_buffer.round(2)}\"\n  puts \"Rationale: Below pattern low - invalidates bullish setup\"\n\nelsif pattern.last == -100  # Bearish\n  # Stop above pattern high\n  stop = high[-3..-1].max\n  stop_with_buffer = stop * 1.005  # 0.5% buffer\n\n  puts \"Stop loss: #{stop_with_buffer.round(2)}\"\n  puts \"Rationale: Above pattern high - invalidates bearish setup\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == 100  # Bullish\n  entry = close.last\n  stop = low[-3..-1].min * 0.995\n  risk = entry - stop\n\n  # Multiple targets\n  target_1 = entry + (risk * 2)    # 2:1 R:R\n  target_2 = entry + (risk * 3)    # 3:1 R:R\n  target_3 = entry + (risk * 5)    # 5:1 R:R\n\n  puts \"Profit Targets (Long):\"\n  puts \"T1 (2:1): #{target_1.round(2)}\"\n  puts \"T2 (3:1): #{target_2.round(2)}\"\n  puts \"T3 (5:1): #{target_3.round(2)}\"\n\nelsif pattern.last == -100  # Bearish\n  entry = close.last\n  stop = high[-3..-1].max * 1.005\n  risk = stop - entry\n\n  # Multiple targets\n  target_1 = entry - (risk * 2)    # 2:1 R:R\n  target_2 = entry - (risk * 3)    # 3:1 R:R\n  target_3 = entry - (risk * 5)    # 5:1 R:R\n\n  puts \"Profit Targets (Short):\"\n  puts \"T1 (2:1): #{target_1.round(2)}\"\n  puts \"T2 (3:1): #{target_2.round(2)}\"\n  puts \"T3 (5:1): #{target_3.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('AMZN')\n\npattern = SQA::TAI.cdl_3inside(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last != 0\n  is_bullish = pattern.last &gt; 0\n  pattern_name = is_bullish ? \"Three Inside Up\" : \"Three Inside Down\"\n\n  puts \"#{pattern_name} Pattern Detected\"\n  puts \"=\" * 50\n\n  # 1. Trend verification\n  proper_trend = if is_bullish\n    close[-4] &lt; sma_50[-4]  # Downtrend for bullish pattern\n  else\n    close[-4] &gt; sma_50[-4]  # Uptrend for bearish pattern\n  end\n\n  # 2. RSI check\n  rsi_val = rsi[-3]\n  rsi_favorable = is_bullish ? rsi_val &lt; 40 : rsi_val &gt; 60\n\n  # 3. Volume analysis\n  avg_vol = volume[-20..-1].sum / 20.0\n  vol_confirmation = volume[-1] &gt; avg_vol * 1.2\n\n  # 4. Support/Resistance check\n  support = close[-120..-1].min\n  resistance = close[-120..-1].max\n  near_key_level = if is_bullish\n    (low[-3..-1].min - support).abs &lt; support * 0.03\n  else\n    (high[-3..-1].max - resistance).abs &lt; resistance * 0.03\n  end\n\n  # 5. Pattern quality check\n  first_body = (open[-3] - close[-3]).abs\n  third_body = (close[-1] - open[-1]).abs\n  strong_confirmation = third_body &gt; first_body * 0.4\n\n  # 6. Second candle positioning\n  second_range = high[-2] - low[-2]\n  first_range = high[-3] - low[-3]\n  well_inside = second_range &lt; first_range * 0.7\n\n  # Calculate score\n  score = 0\n  score += 1 if proper_trend\n  score += 1 if rsi_favorable\n  score += 1 if vol_confirmation\n  score += 1 if near_key_level\n  score += 1 if strong_confirmation\n  score += 1 if well_inside\n\n  puts \"Setup Analysis:\"\n  puts \"Proper trend context: #{proper_trend}\"\n  puts \"RSI favorable (#{rsi_val.round(2)}): #{rsi_favorable}\"\n  puts \"Volume confirmation: #{vol_confirmation}\"\n  puts \"Near key level: #{near_key_level}\"\n  puts \"Strong confirmation: #{strong_confirmation}\"\n  puts \"Well inside pattern: #{well_inside}\"\n  puts \"\\nSetup Score: #{score}/6\"\n\n  if score &gt;= 4\n    entry = close.last\n\n    if is_bullish\n      stop = low[-3..-1].min * 0.995\n      risk = entry - stop\n      target = entry + (risk * 3)\n      direction = \"LONG\"\n    else\n      stop = high[-3..-1].max * 1.005\n      risk = stop - entry\n      target = entry - (risk * 3)\n      direction = \"SHORT\"\n    end\n\n    puts \"\\n*** HIGH PROBABILITY #{direction} SETUP ***\"\n    puts \"Entry: #{entry.round(2)}\"\n    puts \"Stop: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)}\"\n    puts \"Reward: $#{(target - entry).abs.round(2)}\"\n    puts \"R:R Ratio: 1:3\"\n\n    # Position sizing\n    account_size = 100000\n    risk_percent = 0.01  # 1% account risk\n    risk_amount = account_size * risk_percent\n    shares = (risk_amount / risk).floor\n    puts \"\\nPosition Size: #{shares} shares\"\n    puts \"Total risk: $#{risk_amount.round(2)} (1% of account)\"\n\n  elsif score &gt;= 3\n    puts \"\\nDECENT SETUP - Consider reduced position size\"\n  else\n    puts \"\\nLOW PROBABILITY - Skip this trade\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3inside/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_3inside/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Moderate (2-3% of the time)</li> <li>Best Timeframes: Daily, 4-hour (more reliable)</li> <li>Markets: Works on all markets (stocks, forex, crypto)</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#success-rate","title":"Success Rate","text":"<ul> <li>With confirmation: 70-78% success rate</li> <li>Without confirmation: 55-65% success rate</li> <li>At support/resistance: 75-82% success rate</li> <li>With volume: 72-80% success rate</li> <li>With RSI extremes: 75-83% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#average-move","title":"Average Move","text":"<ul> <li>Typical move: 8-15% from pattern completion</li> <li>Major reversals: 20-35% move possible</li> <li>Time to target: 5-15 candles (varies by timeframe)</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_3inside/#dos","title":"Do's","text":"<ol> <li>Wait for proper trend context before taking signal</li> <li>Verify second candle is well inside first candle</li> <li>Look for strong confirmation on third candle</li> <li>Check for volume increase on confirmation</li> <li>Trade near support/resistance for best results</li> <li>Use with RSI extremes for stronger signal</li> <li>Calculate risk/reward before entry</li> <li>Scale out at multiple targets</li> </ol>"},{"location":"indicators/patterns/cdl_3inside/#donts","title":"Don'ts","text":"<ol> <li>Don't trade pattern without trend context</li> <li>Don't ignore volume (confirms conviction)</li> <li>Don't enter without proper stop loss</li> <li>Don't trade if second candle is near edge</li> <li>Don't ignore broader market context</li> <li>Don't risk more than 1-2% of account</li> <li>Don't chase if pattern is not at key level</li> <li>Don't confuse with standalone harami</li> </ol>"},{"location":"indicators/patterns/cdl_3inside/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Trading without trend: Pattern requires proper trend for reversal</li> <li>Weak confirmation: Third candle must strongly confirm direction</li> <li>Poor stop placement: Must be beyond pattern extreme</li> <li>No volume check: Volume confirms conviction</li> <li>Confusing with harami: Three Inside has confirmation candle</li> </ol>"},{"location":"indicators/patterns/cdl_3inside/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_3inside/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Engulfing - Two-candle reversal (harami is inverse)</li> <li>Three Outside Up/Down - Uses engulfing instead of harami</li> <li>Harami - Two-candle pattern without confirmation</li> <li>Morning/Evening Star - Three-candle reversal with gap</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#component-patterns","title":"Component Patterns","text":"<ul> <li>Harami pattern forms first two candles</li> <li>Confirmation candle completes the pattern</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_3inside/#strong-three-inside","title":"Strong Three Inside","text":"<ul> <li>Large first candle (shows exhaustion)</li> <li>Second candle well-centered in first</li> <li>Strong third candle (&gt; 50% of first)</li> <li>High volume on confirmation</li> <li>At major support/resistance</li> <li>Success Rate: 78-85%</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#average-three-inside","title":"Average Three Inside","text":"<ul> <li>Medium first candle</li> <li>Second candle positioned well</li> <li>Decent third candle confirmation</li> <li>Normal volume</li> <li>Clear trend context</li> <li>Success Rate: 65-72%</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#weak-three-inside","title":"Weak Three Inside","text":"<ul> <li>Small first candle</li> <li>Second candle near edge of first</li> <li>Weak third candle confirmation</li> <li>Low volume</li> <li>No clear trend or level</li> <li>Success Rate: 45-55%</li> </ul>"},{"location":"indicators/patterns/cdl_3inside/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Reliable reversal pattern when all conditions align</li> <li>Confirmation is key - third candle validates reversal</li> <li>Trend context required - must appear at trend extremes</li> <li>Volume matters - confirms conviction on reversal</li> <li>Better than harami alone - three candles reduce false signals</li> <li>Support/resistance confluence improves success rate</li> <li>Risk management essential - always use stops</li> <li>Scale entries - better results with partial positions</li> </ol>"},{"location":"indicators/patterns/cdl_3inside/#see-also","title":"See Also","text":"<ul> <li>Three Outside Up/Down - Related three-candle pattern</li> <li>Engulfing Pattern - Two-candle reversal</li> <li>Harami Pattern - Inside pattern without confirmation</li> <li>Morning/Evening Star - Three-candle reversal</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/","title":"Three Line Strike Pattern","text":"<p>The Three Line Strike is a powerful four-candlestick reversal pattern that appears in both bullish and bearish forms. It consists of three consecutive candles moving in one direction, followed by a fourth candle that completely engulfs the prior three, signaling a potential reversal of the established trend.</p>"},{"location":"indicators/patterns/cdl_3linestrike/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (Both Bullish and Bearish)</li> <li>Candles Required: 4</li> <li>Trend Context: Can appear in uptrends (bearish variant) or downtrends (bullish variant)</li> <li>Reliability: High (one of the most reliable reversal patterns)</li> <li>Frequency: Rare (appears less than 1% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 101.0, 102.0, 103.0, 99.0]\nhigh  = [101.5, 102.5, 103.5, 104.0, 104.5]\nlow   = [99.5, 100.5, 101.5, 102.5, 98.5]\nclose = [101.0, 102.0, 103.0, 103.5, 104.0]\n\n# Detect Three Line Strike pattern\npattern = SQA::TAI.cdl_3linestrike(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Bullish Three Line Strike - Strong reversal signal!\"\nelsif pattern.last == -100\n  puts \"Bearish Three Line Strike - Strong reversal signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_3linestrike/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Three Line Strike pattern detected - +100: Bullish Three Line Strike (reversal from downtrend) - -100: Bearish Three Line Strike (reversal from uptrend)</p>"},{"location":"indicators/patterns/cdl_3linestrike/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_3linestrike/#bullish-three-line-strike-four-candle-structure","title":"Bullish Three Line Strike (Four Candle Structure)","text":"<ol> <li>First Three Candles: Three consecutive bearish candles (resembling Three Black Crows)</li> <li>Each opens within previous body</li> <li>Each closes progressively lower</li> <li> <p>All three are bearish</p> </li> <li> <p>Fourth Candle: Large bullish candle that:</p> </li> <li>Opens at or below the third candle's close</li> <li>Rallies strongly upward</li> <li>Closes above the first candle's open</li> <li>Completely engulfs all three prior candles</li> </ol>"},{"location":"indicators/patterns/cdl_3linestrike/#bearish-three-line-strike-four-candle-structure","title":"Bearish Three Line Strike (Four Candle Structure)","text":"<ol> <li>First Three Candles: Three consecutive bullish candles (resembling Three White Soldiers)</li> <li>Each opens within previous body</li> <li>Each closes progressively higher</li> <li> <p>All three are bullish</p> </li> <li> <p>Fourth Candle: Large bearish candle that:</p> </li> <li>Opens at or above the third candle's close</li> <li>Sells off strongly downward</li> <li>Closes below the first candle's open</li> <li>Completely engulfs all three prior candles</li> </ol>"},{"location":"indicators/patterns/cdl_3linestrike/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>First three candles show clear directional momentum</li> <li>Fourth candle is a complete reversal</li> <li>Fourth candle must engulf entire range of first three</li> <li>High volume on fourth candle confirms strength</li> <li>Pattern shows failed continuation becoming powerful reversal</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Bullish Three Line Strike (in downtrend):\n\n       [========]    Fourth candle (huge bullish, engulfs all)\n       |        |\n    [===]\n     |  |          Third bearish candle\n   [===]\n    | |            Second bearish candle\n  [===]\n   | |             First bearish candle\n\nBearish Three Line Strike (in uptrend):\n\n  [===]\n   | |             First bullish candle\n   [===]\n    | |            Second bullish candle\n    [===]\n     |  |          Third bullish candle\n       |        |\n       [========]  Fourth candle (huge bearish, engulfs all)\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#interpretation","title":"Interpretation","text":"<p>The Three Line Strike signals a powerful reversal through:</p> <ol> <li>False Continuation: First three candles appear to continue trend</li> <li>Capitulation: Fourth candle shows complete rejection</li> <li>Absorption: All selling/buying in first three candles absorbed</li> <li>Momentum Shift: Direction completely reverses</li> <li>Psychological Impact: Traders positioned for continuation get trapped</li> </ol>"},{"location":"indicators/patterns/cdl_3linestrike/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Fourth Candle Size Barely engulfs Good engulfment Deep engulfment Volume Normal Above average Exceptionally high Trend Strength Weak trend Clear trend Strong trend First Three Quality Variable sizes Consistent Uniform progression Location Mid-chart Near S/R At major S/R level"},{"location":"indicators/patterns/cdl_3linestrike/#example-bullish-three-line-strike","title":"Example: Bullish Three Line Strike","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_3linestrike(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == 100\n  # Verify downtrend context\n  was_downtrend = close[-5] &lt; sma_50[-5] &amp;&amp; sma_50[-5] &lt; sma_200[-5]\n\n  if was_downtrend\n    puts \"Bullish Three Line Strike after downtrend!\"\n    puts \"HIGH PROBABILITY reversal\"\n\n    # Measure the strike candle\n    strike_body = close.last - open.last\n    avg_prior = (close[-4] - open[-4]).abs +\n                (close[-3] - open[-3]).abs +\n                (close[-2] - open[-2]).abs\n    avg_prior /= 3.0\n\n    strike_ratio = strike_body / avg_prior\n    puts \"Strike candle is #{strike_ratio.round(2)}x average prior candles\"\n\n    if strike_ratio &gt; 2.0\n      puts \"VERY STRONG reversal candle\"\n    elsif strike_ratio &gt; 1.5\n      puts \"Strong reversal candle\"\n    else\n      puts \"Moderate reversal candle\"\n    end\n\n    # Check engulfment quality\n    first_open = open[-4]\n    third_low = low[-2]\n    engulfs = close.last &gt; first_open &amp;&amp; open.last &lt; third_low\n\n    puts \"Complete engulfment: #{engulfs}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#example-bearish-three-line-strike-with-volume","title":"Example: Bearish Three Line Strike with Volume","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_3linestrike(open, high, low, close)\n\nif pattern.last == -100\n  # Volume analysis\n  vol_soldiers = volume[-4..-2]  # First three bullish\n  vol_strike = volume[-1]         # Strike candle\n  avg_volume = volume[-20..-5].sum / 16.0\n\n  puts \"Bearish Three Line Strike Volume Analysis:\"\n  puts \"Soldiers average: #{(vol_soldiers.sum / 3.0).round(0)}\"\n  puts \"Strike volume: #{vol_strike.round(0)}\"\n  puts \"Average volume: #{avg_volume.round(0)}\"\n\n  vol_ratio = vol_strike / (vol_soldiers.sum / 3.0)\n  puts \"Strike volume ratio: #{vol_ratio.round(2)}x\"\n\n  if vol_strike &gt; avg_volume * 2 &amp;&amp; vol_ratio &gt; 1.5\n    puts \"\\nEXCELLENT: Massive volume on strike candle\"\n    puts \"High conviction reversal - VERY STRONG\"\n  elsif vol_strike &gt; avg_volume &amp;&amp; vol_ratio &gt; 1.2\n    puts \"\\nGOOD: Elevated volume on strike\"\n    puts \"Strong reversal signal\"\n  else\n    puts \"\\nMODERATE: Normal volume\"\n    puts \"Watch for confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#example-three-line-strike-at-supportresistance","title":"Example: Three Line Strike at Support/Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_3linestrike(open, high, low, close)\n\nif pattern.last == 100\n  # Find support level\n  support = close[-120..-1].min\n  pattern_low = low[-2]  # Low of third candle\n\n  distance = ((pattern_low - support).abs / support * 100).round(2)\n\n  if distance &lt; 2\n    puts \"Bullish Three Line Strike AT SUPPORT!\"\n    puts \"Support: #{support.round(2)}\"\n    puts \"Pattern low: #{pattern_low.round(2)}\"\n    puts \"Distance: #{distance}%\"\n    puts \"\\nPerfect reversal setup - bounce from support\"\n    puts \"VERY HIGH PROBABILITY\"\n  end\nelsif pattern.last == -100\n  # Find resistance level\n  resistance = close[-120..-1].max\n  pattern_high = high[-2]  # High of third candle\n\n  distance = ((pattern_high - resistance).abs / resistance * 100).round(2)\n\n  if distance &lt; 2\n    puts \"Bearish Three Line Strike AT RESISTANCE!\"\n    puts \"Resistance: #{resistance.round(2)}\"\n    puts \"Pattern high: #{pattern_high.round(2)}\"\n    puts \"Distance: #{distance}%\"\n    puts \"\\nPerfect reversal setup - rejection at resistance\"\n    puts \"VERY HIGH PROBABILITY\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#example-three-line-strike-with-rsi","title":"Example: Three Line Strike with RSI","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\npattern = SQA::TAI.cdl_3linestrike(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == 100\n  rsi_at_low = rsi[-2]   # RSI at third bearish candle\n  rsi_current = rsi.last\n\n  puts \"Bullish Three Line Strike with RSI:\"\n  puts \"RSI at pattern low: #{rsi_at_low.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n\n  if rsi_at_low &lt; 30\n    puts \"\\nPattern formed from OVERSOLD\"\n    puts \"Classic reversal from extremes - STRONG\"\n  elsif rsi_at_low &lt; 40\n    puts \"\\nPattern from depressed RSI - Good setup\"\n  end\n\n  rsi_jump = rsi_current - rsi_at_low\n  puts \"RSI jump: #{rsi_jump.round(2)} points\"\n\n  if rsi_jump &gt; 20\n    puts \"Massive momentum shift!\"\n  end\n\nelsif pattern.last == -100\n  rsi_at_high = rsi[-2]\n  rsi_current = rsi.last\n\n  puts \"Bearish Three Line Strike with RSI:\"\n  puts \"RSI at pattern high: #{rsi_at_high.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n\n  if rsi_at_high &gt; 70\n    puts \"\\nPattern formed from OVERBOUGHT\"\n    puts \"Classic reversal from extremes - STRONG\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_3linestrike/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_3linestrike/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation candle after pattern\nif pattern[-2] == 100  # Bullish pattern two candles ago\n  if close[-1] &gt; close[-2] || close.last &gt; close[-1]\n    puts \"Bullish Three Line Strike CONFIRMED\"\n    entry = close.last\n    puts \"Enter LONG at #{entry.round(2)}\"\n  end\nelsif pattern[-2] == -100  # Bearish pattern\n  if close[-1] &lt; close[-2] || close.last &lt; close[-1]\n    puts \"Bearish Three Line Strike CONFIRMED\"\n    entry = close.last\n    puts \"Enter SHORT at #{entry.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter immediately on pattern completion (fourth candle close)\nif pattern.last == 100\n  entry = close.last\n  puts \"Bullish Three Line Strike - Enter LONG\"\n  puts \"Entry: #{entry.round(2)}\"\nelsif pattern.last == -100\n  entry = close.last\n  puts \"Bearish Three Line Strike - Enter SHORT\"\n  puts \"Entry: #{entry.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#pullback-entry","title":"Pullback Entry","text":"<pre><code># Wait for minor pullback to better entry\nif pattern[-3] == 100  # Bullish pattern 3 candles ago\n  if close.last &lt; close[-1] &amp;&amp; close.last &gt; close[-3]\n    puts \"Pullback after bullish strike - Enter LONG\"\n    puts \"Entry: #{close.last.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == 100\n  # Stop below the third candle's low (before strike)\n  stop = low[-2] * 0.99  # 1% buffer\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Rationale: Below pattern low before strike\"\n\n  entry = close.last\n  risk = entry - stop\n  risk_percent = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_percent}%)\"\n\nelsif pattern.last == -100\n  # Stop above the third candle's high (before strike)\n  stop = high[-2] * 1.01  # 1% buffer\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Rationale: Above pattern high before strike\"\n\n  entry = close.last\n  risk = stop - entry\n  risk_percent = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_percent}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == 100\n  entry = close.last\n  stop = low[-2] * 0.99\n  risk = entry - stop\n\n  # Risk-based targets\n  target_1 = entry + (risk * 2)    # 2:1 R:R\n  target_2 = entry + (risk * 3)    # 3:1 R:R\n  target_3 = entry + (risk * 5)    # 5:1 R:R\n\n  puts \"Long Targets:\"\n  puts \"T1 (2:1): #{target_1.round(2)}\"\n  puts \"T2 (3:1): #{target_2.round(2)}\"\n  puts \"T3 (5:1): #{target_3.round(2)}\"\n\n  # Resistance-based target\n  resistance = close[-120..-1].max\n  puts \"Resistance target: #{resistance.round(2)}\"\n\nelsif pattern.last == -100\n  entry = close.last\n  stop = high[-2] * 1.01\n  risk = stop - entry\n\n  target_1 = entry - (risk * 2)\n  target_2 = entry - (risk * 3)\n  target_3 = entry - (risk * 5)\n\n  puts \"Short Targets:\"\n  puts \"T1 (2:1): #{target_1.round(2)}\"\n  puts \"T2 (3:1): #{target_2.round(2)}\"\n  puts \"T3 (5:1): #{target_3.round(2)}\"\n\n  # Support-based target\n  support = close[-120..-1].min\n  puts \"Support target: #{support.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_3linestrike(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last != 0\n  is_bullish = pattern.last == 100\n\n  puts \"Three Line Strike #{is_bullish ? 'BULLISH' : 'BEARISH'}\"\n  puts \"=\" * 60\n\n  # 1. Trend verification\n  if is_bullish\n    was_downtrend = close[-5] &lt; sma_50[-5] &amp;&amp; sma_50[-5] &lt; sma_200[-5]\n    trend_ok = was_downtrend\n  else\n    was_uptrend = close[-5] &gt; sma_50[-5] &amp;&amp; sma_50[-5] &gt; sma_200[-5]\n    trend_ok = was_uptrend\n  end\n\n  # 2. Strike candle quality\n  strike_body = (close.last - open.last).abs\n  prior_bodies = [-4, -3, -2].map { |i| (close[i] - open[i]).abs }\n  avg_prior = prior_bodies.sum / 3.0\n  strike_ratio = strike_body / avg_prior\n  strong_strike = strike_ratio &gt; 1.5\n\n  # 3. Engulfment quality\n  if is_bullish\n    full_engulf = close.last &gt; open[-4] &amp;&amp; open.last &lt; low[-2]\n  else\n    full_engulf = close.last &lt; open[-4] &amp;&amp; open.last &gt; high[-2]\n  end\n\n  # 4. Volume analysis\n  avg_vol = volume[-20..-5].sum / 16.0\n  strike_vol = volume[-1]\n  high_volume = strike_vol &gt; avg_vol * 1.5\n\n  # 5. RSI confirmation\n  rsi_before = rsi[-2]\n  if is_bullish\n    rsi_ok = rsi_before &lt; 40\n  else\n    rsi_ok = rsi_before &gt; 60\n  end\n\n  # 6. Support/Resistance proximity\n  if is_bullish\n    support = close[-120..-1].min\n    near_level = (low[-2] - support).abs &lt; support * 0.03\n  else\n    resistance = close[-120..-1].max\n    near_level = (high[-2] - resistance).abs &lt; resistance * 0.03\n  end\n\n  # Calculate score\n  score = 0\n  score += 2 if trend_ok           # Critical\n  score += 2 if strong_strike      # Very important\n  score += 2 if full_engulf        # Very important\n  score += 1 if high_volume\n  score += 1 if rsi_ok\n  score += 2 if near_level         # Very important\n\n  puts \"Setup Quality Checks:\"\n  puts \"1. Proper trend context: #{trend_ok} #{trend_ok ? '\u2713\u2713' : '\u2717\u2717'}\"\n  puts \"2. Strong strike (#{strike_ratio.round(2)}x): #{strong_strike} #{strong_strike ? '\u2713\u2713' : '\u2717'}\"\n  puts \"3. Full engulfment: #{full_engulf} #{full_engulf ? '\u2713\u2713' : '\u2717'}\"\n  puts \"4. High volume: #{high_volume} #{high_volume ? '\u2713' : '\u2717'}\"\n  puts \"5. RSI favorable: #{rsi_ok} #{rsi_ok ? '\u2713' : '\u2717'}\"\n  puts \"6. Near S/R level: #{near_level} #{near_level ? '\u2713\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/10\"\n\n  if score &gt;= 7\n    entry = close.last\n    if is_bullish\n      stop = low[-2] * 0.99\n      risk = entry - stop\n      target = entry + (risk * 3)\n    else\n      stop = high[-2] * 1.01\n      risk = stop - entry\n      target = entry - (risk * 3)\n    end\n\n    reward = (target - entry).abs\n    rr_ratio = (reward / risk).round(1)\n\n    puts \"\\n*** EXCELLENT #{is_bullish ? 'LONG' : 'SHORT'} SETUP ***\"\n    puts \"-\" * 60\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)} (#{(reward/entry*100).round(2)}%)\"\n    puts \"R:R Ratio: 1:#{rr_ratio}\"\n\n    # Position sizing\n    account_size = 100000\n    risk_amount = account_size * 0.02  # 2% risk\n    shares = (risk_amount / risk).floor\n\n    puts \"\\nPosition Sizing (2% risk):\"\n    puts \"Shares: #{shares}\"\n    puts \"Position value: $#{(shares * entry).round(2)}\"\n    puts \"Total risk: $#{risk_amount.round(2)}\"\n    puts \"Potential profit: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 5\n    puts \"\\nDECENT SETUP - Reduced position size\"\n  else\n    puts \"\\nWEAK SETUP - SKIP\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3linestrike/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_3linestrike/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Rare (less than 1% of the time)</li> <li>Best Timeframes: Daily, Weekly (most reliable)</li> <li>Markets: All markets (stocks, forex, crypto, commodities)</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect setup: 80-88% success rate</li> <li>Good setup: 70-78% success rate</li> <li>Average setup: 60-70% success rate</li> <li>At support/resistance: 82-90% success rate</li> <li>With volume: 75-85% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#average-move","title":"Average Move","text":"<ul> <li>Initial move: 5-15% in reversal direction</li> <li>Major reversals: 20-50% possible</li> <li>Time to target: 5-15 candles</li> <li>Follow-through: 75% show continuation after pattern</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_3linestrike/#dos","title":"Do's","text":"<ol> <li>Verify proper trend context before pattern</li> <li>Confirm fourth candle completely engulfs first three</li> <li>Look for high volume on strike candle</li> <li>Trade near major support/resistance levels</li> <li>Check RSI for extreme readings before pattern</li> <li>Wait for confirmation in choppy markets</li> <li>Use proper stop loss below/above pattern extremes</li> <li>Scale out at multiple profit targets</li> <li>Verify first three candles show clear progression</li> <li>Give pattern room to work (3-5 candles minimum)</li> </ol>"},{"location":"indicators/patterns/cdl_3linestrike/#donts","title":"Don'ts","text":"<ol> <li>Don't trade without proper trend context</li> <li>Don't ignore engulfment quality (critical)</li> <li>Don't trade on low volume strike candle</li> <li>Don't enter without stop loss</li> <li>Don't confuse with regular engulfing patterns</li> <li>Don't trade if fourth candle barely engulfs</li> <li>Don't chase if entry missed</li> <li>Don't ignore broader market conditions</li> <li>Don't risk more than 2% account per trade</li> <li>Don't trade if first three candles are inconsistent</li> </ol>"},{"location":"indicators/patterns/cdl_3linestrike/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Misidentifying pattern: Requires complete engulfment of all three prior candles</li> <li>Wrong trend context: Pattern must appear in established trend</li> <li>Poor stop placement: Must be beyond pattern extremes</li> <li>Ignoring volume: Strike candle volume is critical</li> <li>Entering too early: Wait for fourth candle to complete</li> <li>Weak engulfment: Fourth candle must be decisive</li> <li>No confirmation: Better results with follow-through candle</li> </ol>"},{"location":"indicators/patterns/cdl_3linestrike/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_3linestrike/#similar-reversal-patterns","title":"Similar Reversal Patterns","text":"<ul> <li>Three Black Crows - First three candles of bearish version</li> <li>Three White Soldiers - First three candles of bullish version</li> <li>Engulfing - Two-candle engulfing pattern</li> <li>Morning Star - Three-candle bullish reversal</li> <li>Evening Star - Three-candle bearish reversal</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#component-patterns","title":"Component Patterns","text":"<ul> <li>Marubozu - Strike candle often resembles this</li> <li>Long Line - Strike candle characteristics</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_3linestrike/#perfect-three-line-strike","title":"Perfect Three Line Strike","text":"<ul> <li>First three candles show clear, consistent progression</li> <li>Fourth candle engulfs by significant margin</li> <li>Very high volume on fourth candle</li> <li>Appears at major support/resistance</li> <li>RSI at extremes before pattern</li> <li>Success Rate: 85-90%</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#strong-three-line-strike","title":"Strong Three Line Strike","text":"<ul> <li>Good progression in first three</li> <li>Clear engulfment on fourth</li> <li>Above average volume</li> <li>Clear trend context</li> <li>Success Rate: 70-80%</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#weak-three-line-strike","title":"Weak Three Line Strike","text":"<ul> <li>Inconsistent first three candles</li> <li>Barely engulfs on fourth</li> <li>Low volume</li> <li>Unclear trend</li> <li>Success Rate: 50-60%</li> </ul>"},{"location":"indicators/patterns/cdl_3linestrike/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Rare but powerful - One of best reversal patterns when perfect</li> <li>Complete engulfment required - Fourth candle must engulf all three</li> <li>Trend context critical - Must appear in established trend</li> <li>Volume confirms - High volume on strike candle essential</li> <li>Support/resistance - Best at major technical levels</li> <li>Fourth candle decisive - Shows complete momentum shift</li> <li>High reliability - 75-85% success with proper setup</li> <li>Risk/reward excellent - Tight stops, large targets</li> <li>Patience required - Don't anticipate, wait for completion</li> <li>Confirmation helps - Fifth candle confirmation reduces risk</li> </ol>"},{"location":"indicators/patterns/cdl_3linestrike/#see-also","title":"See Also","text":"<ul> <li>Three Black Crows</li> <li>Three White Soldiers</li> <li>Engulfing</li> <li>Morning Star</li> <li>Evening Star</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/","title":"Three Outside Up/Down Pattern","text":"<p>The Three Outside Up/Down is a powerful three-candlestick reversal pattern that combines an engulfing pattern with a confirmation candle. It provides one of the most reliable reversal signals in candlestick analysis, appearing in both bullish (Three Outside Up) and bearish (Three Outside Down) forms.</p>"},{"location":"indicators/patterns/cdl_3outside/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (Both Bullish and Bearish)</li> <li>Candles Required: 3</li> <li>Trend Context: Bullish variant after downtrend, Bearish variant after uptrend</li> <li>Reliability: High (one of the most reliable reversal patterns)</li> <li>Frequency: Moderate (appears 2-4% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [102.0, 101.0, 99.0, 98.5, 100.0]\nhigh  = [102.5, 101.5, 100.5, 100.0, 101.5]\nlow   = [100.5, 98.5, 97.5, 98.0, 99.5]\nclose = [101.0, 99.0, 100.5, 100.0, 101.0]\n\n# Detect Three Outside pattern\npattern = SQA::TAI.cdl_3outside(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Three Outside Up - Strong bullish reversal!\"\nelsif pattern.last == -100\n  puts \"Three Outside Down - Strong bearish reversal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_3outside/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Three Outside pattern detected - +100: Three Outside Up (bullish reversal signal) - -100: Three Outside Down (bearish reversal signal)</p>"},{"location":"indicators/patterns/cdl_3outside/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_3outside/#three-outside-up-bullish-three-candle-structure","title":"Three Outside Up (Bullish - Three Candle Structure)","text":"<ol> <li>First Candle: Small bearish candle in downtrend</li> <li>Second Candle: Large bullish candle that:</li> <li>Opens below first candle's close</li> <li>Closes above first candle's open</li> <li>Completely engulfs first candle's body</li> <li>Forms a bullish engulfing pattern</li> <li>Third Candle: Another bullish candle that:</li> <li>Closes higher than second candle's close</li> <li>Confirms the reversal</li> <li>Shows continued buying momentum</li> </ol>"},{"location":"indicators/patterns/cdl_3outside/#three-outside-down-bearish-three-candle-structure","title":"Three Outside Down (Bearish - Three Candle Structure)","text":"<ol> <li>First Candle: Small bullish candle in uptrend</li> <li>Second Candle: Large bearish candle that:</li> <li>Opens above first candle's close</li> <li>Closes below first candle's open</li> <li>Completely engulfs first candle's body</li> <li>Forms a bearish engulfing pattern</li> <li>Third Candle: Another bearish candle that:</li> <li>Closes lower than second candle's close</li> <li>Confirms the reversal</li> <li>Shows continued selling momentum</li> </ol>"},{"location":"indicators/patterns/cdl_3outside/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Combines engulfing pattern (candles 1-2) with confirmation (candle 3)</li> <li>Second candle shows strong momentum shift</li> <li>Third candle validates the reversal</li> <li>More reliable than simple engulfing due to confirmation</li> <li>Volume typically increases through the pattern</li> <li>\"Outside\" refers to second candle engulfing first</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Three Outside Up (in downtrend):\n\n        [===]      Third candle (confirms, closes higher)\n         | |\n       [=====]     Second candle (engulfs first)\n       |     |\n     [==]          First candle (small bearish)\n      ||\n\nThree Outside Down (in uptrend):\n\n     [==]          First candle (small bullish)\n      ||\n       |     |\n       [=====]     Second candle (engulfs first)\n         | |\n        [===]      Third candle (confirms, closes lower)\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#interpretation","title":"Interpretation","text":"<p>The Three Outside pattern signals reversal through:</p> <ol> <li>Initial Exhaustion: First candle shows weakening trend</li> <li>Momentum Shift: Second candle (engulfing) shows power reversal</li> <li>Confirmation: Third candle validates new direction</li> <li>Psychological Shift: Three consecutive moves establish new trend</li> <li>Reliability: Confirmation reduces false signals significantly</li> </ol>"},{"location":"indicators/patterns/cdl_3outside/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Strength Weak trend Clear trend Strong trend Engulfment Size Barely engulfs Good engulfment Deep engulfment Third Candle Small body Medium body Large body Volume Decreasing Normal Increasing Location Mid-chart Near S/R At major S/R level Shadows Long shadows Normal Minimal shadows"},{"location":"indicators/patterns/cdl_3outside/#example-three-outside-up-in-context","title":"Example: Three Outside Up in Context","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_3outside(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == 100\n  # Verify downtrend context\n  was_downtrend = close[-4] &lt; sma_50[-4] &amp;&amp; sma_50[-4] &lt; sma_200[-4]\n\n  if was_downtrend\n    puts \"Three Outside Up after downtrend!\"\n    puts \"HIGH PROBABILITY bullish reversal\"\n\n    # Analyze engulfment quality\n    first_body = (close[-3] - open[-3]).abs\n    second_body = (close[-2] - open[-2]).abs\n    engulf_ratio = second_body / first_body\n\n    puts \"Engulfment ratio: #{engulf_ratio.round(2)}x\"\n\n    if engulf_ratio &gt; 3.0\n      puts \"VERY STRONG engulfment\"\n    elsif engulf_ratio &gt; 2.0\n      puts \"Strong engulfment\"\n    else\n      puts \"Moderate engulfment\"\n    end\n\n    # Check confirmation quality\n    third_gain = close.last - close[-2]\n    third_percent = (third_gain / close[-2] * 100).round(2)\n\n    puts \"Third candle gain: #{third_percent}%\"\n\n    if third_percent &gt; 2.0\n      puts \"STRONG confirmation\"\n    elsif third_percent &gt; 0.5\n      puts \"Good confirmation\"\n    else\n      puts \"Weak confirmation - watch closely\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#example-three-outside-down-with-volume","title":"Example: Three Outside Down with Volume","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_3outside(open, high, low, close)\n\nif pattern.last == -100\n  # Volume progression analysis\n  vol1 = volume[-3]  # First candle\n  vol2 = volume[-2]  # Engulfing candle\n  vol3 = volume[-1]  # Confirmation candle\n  avg_volume = volume[-20..-4].sum / 17.0\n\n  puts \"Three Outside Down Volume Analysis:\"\n  puts \"First candle: #{vol1.round(0)}\"\n  puts \"Engulfing: #{vol2.round(0)} (#{(vol2/vol1).round(2)}x)\"\n  puts \"Confirmation: #{vol3.round(0)} (#{(vol3/vol1).round(2)}x)\"\n  puts \"Average: #{avg_volume.round(0)}\"\n\n  # Check volume pattern\n  volume_increasing = vol2 &gt; vol1 &amp;&amp; vol3 &gt;= vol2\n  above_average = vol2 &gt; avg_volume &amp;&amp; vol3 &gt; avg_volume\n\n  if volume_increasing &amp;&amp; above_average\n    puts \"\\nEXCELLENT: Increasing volume + above average\"\n    puts \"High conviction reversal - VERY STRONG\"\n  elsif above_average\n    puts \"\\nGOOD: Above average volume\"\n    puts \"Strong reversal signal\"\n  elsif volume_increasing\n    puts \"\\nDECENT: Volume trend correct\"\n    puts \"Moderate signal\"\n  else\n    puts \"\\nWEAK: Poor volume confirmation\"\n    puts \"Lower reliability\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#example-three-outside-at-supportresistance","title":"Example: Three Outside at Support/Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_3outside(open, high, low, close)\n\nif pattern.last == 100\n  # Find support\n  support = close[-120..-1].min\n  pattern_low = low[-3]  # First candle low\n\n  distance = ((pattern_low - support).abs / support * 100).round(2)\n\n  if distance &lt; 2\n    puts \"Three Outside Up AT SUPPORT!\"\n    puts \"Support: #{support.round(2)}\"\n    puts \"Pattern low: #{pattern_low.round(2)}\"\n    puts \"Distance: #{distance}%\"\n    puts \"\\nTextbook reversal from support\"\n    puts \"VERY HIGH PROBABILITY\"\n  end\n\nelsif pattern.last == -100\n  # Find resistance\n  resistance = close[-120..-1].max\n  pattern_high = high[-3]  # First candle high\n\n  distance = ((pattern_high - resistance).abs / resistance * 100).round(2)\n\n  if distance &lt; 2\n    puts \"Three Outside Down AT RESISTANCE!\"\n    puts \"Resistance: #{resistance.round(2)}\"\n    puts \"Pattern high: #{pattern_high.round(2)}\"\n    puts \"Distance: #{distance}%\"\n    puts \"\\nTextbook reversal from resistance\"\n    puts \"VERY HIGH PROBABILITY\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#example-three-outside-with-rsi","title":"Example: Three Outside with RSI","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\npattern = SQA::TAI.cdl_3outside(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == 100\n  rsi_before = rsi[-4]  # Before pattern\n  rsi_current = rsi.last\n\n  puts \"Three Outside Up with RSI:\"\n  puts \"RSI before pattern: #{rsi_before.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n  puts \"RSI change: +#{(rsi_current - rsi_before).round(2)}\"\n\n  if rsi_before &lt; 30\n    puts \"\\nOVERSOLD reversal - EXCELLENT\"\n    puts \"Classic bounce from extreme\"\n  elsif rsi_before &lt; 40\n    puts \"\\nDepressed RSI reversal - GOOD\"\n  end\n\n  if rsi_current &gt; 50\n    puts \"RSI crossed midpoint - momentum confirmed\"\n  end\n\nelsif pattern.last == -100\n  rsi_before = rsi[-4]\n  rsi_current = rsi.last\n\n  puts \"Three Outside Down with RSI:\"\n  puts \"RSI before pattern: #{rsi_before.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n  puts \"RSI change: #{(rsi_current - rsi_before).round(2)}\"\n\n  if rsi_before &gt; 70\n    puts \"\\nOVERBOUGHT reversal - EXCELLENT\"\n    puts \"Classic rejection from extreme\"\n  elsif rsi_before &gt; 60\n    puts \"\\nElevated RSI reversal - GOOD\"\n  end\n\n  if rsi_current &lt; 50\n    puts \"RSI crossed midpoint - momentum confirmed\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_3outside/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_3outside/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for fourth candle confirmation\nif pattern[-2] == 100  # Pattern two candles ago\n  if close[-1] &gt; close[-2] || close.last &gt; close[-1]\n    puts \"Three Outside Up CONFIRMED\"\n    entry = close.last\n    puts \"Enter LONG at #{entry.round(2)}\"\n  end\n\nelsif pattern[-2] == -100\n  if close[-1] &lt; close[-2] || close.last &lt; close[-1]\n    puts \"Three Outside Down CONFIRMED\"\n    entry = close.last\n    puts \"Enter SHORT at #{entry.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion (third candle close)\nif pattern.last == 100\n  entry = close.last\n  puts \"Three Outside Up - Enter LONG\"\n  puts \"Entry: #{entry.round(2)}\"\n\nelsif pattern.last == -100\n  entry = close.last\n  puts \"Three Outside Down - Enter SHORT\"\n  puts \"Entry: #{entry.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#pullback-entry","title":"Pullback Entry","text":"<pre><code># Wait for pullback to engulfing candle level\nif pattern[-3] == 100  # Pattern 3 candles ago\n  engulf_close = close[-2]\n\n  if close.last &lt; close[-1] &amp;&amp; close.last &gt; engulf_close * 0.99\n    puts \"Pullback to engulfing level - Enter LONG\"\n    puts \"Entry: #{close.last.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == 100\n  # Stop below first candle's low\n  stop = low[-3] * 0.99  # 1% buffer\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Rationale: Below pattern low (first candle)\"\n\n  entry = close.last\n  risk = entry - stop\n  risk_percent = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_percent}%)\"\n\nelsif pattern.last == -100\n  # Stop above first candle's high\n  stop = high[-3] * 1.01  # 1% buffer\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Rationale: Above pattern high (first candle)\"\n\n  entry = close.last\n  risk = stop - entry\n  risk_percent = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_percent}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == 100\n  entry = close.last\n  stop = low[-3] * 0.99\n  risk = entry - stop\n\n  # Risk-based targets\n  target_1 = entry + (risk * 2)    # 2:1 R:R\n  target_2 = entry + (risk * 3)    # 3:1 R:R\n  target_3 = entry + (risk * 4)    # 4:1 R:R\n\n  puts \"Long Targets:\"\n  puts \"T1 (2:1): #{target_1.round(2)}\"\n  puts \"T2 (3:1): #{target_2.round(2)}\"\n  puts \"T3 (4:1): #{target_3.round(2)}\"\n\n  # Resistance-based\n  resistance = close[-120..-1].max\n  puts \"Resistance: #{resistance.round(2)}\"\n\nelsif pattern.last == -100\n  entry = close.last\n  stop = high[-3] * 1.01\n  risk = stop - entry\n\n  target_1 = entry - (risk * 2)\n  target_2 = entry - (risk * 3)\n  target_3 = entry - (risk * 4)\n\n  puts \"Short Targets:\"\n  puts \"T1 (2:1): #{target_1.round(2)}\"\n  puts \"T2 (3:1): #{target_2.round(2)}\"\n  puts \"T3 (4:1): #{target_3.round(2)}\"\n\n  # Support-based\n  support = close[-120..-1].min\n  puts \"Support: #{support.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_3outside(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last != 0\n  is_bullish = pattern.last == 100\n\n  puts \"Three Outside #{is_bullish ? 'UP' : 'DOWN'}\"\n  puts \"=\" * 60\n\n  # 1. Trend verification\n  if is_bullish\n    trend_ok = close[-4] &lt; sma_50[-4] &amp;&amp; sma_50[-4] &lt; sma_200[-4]\n  else\n    trend_ok = close[-4] &gt; sma_50[-4] &amp;&amp; sma_50[-4] &gt; sma_200[-4]\n  end\n\n  # 2. Engulfment quality\n  first_body = (close[-3] - open[-3]).abs\n  second_body = (close[-2] - open[-2]).abs\n  engulf_ratio = second_body / first_body\n  strong_engulf = engulf_ratio &gt; 2.0\n\n  # 3. Full engulfment check\n  if is_bullish\n    full_engulf = close[-2] &gt; open[-3] &amp;&amp; open[-2] &lt; close[-3]\n  else\n    full_engulf = close[-2] &lt; open[-3] &amp;&amp; open[-2] &gt; close[-3]\n  end\n\n  # 4. Confirmation quality\n  if is_bullish\n    good_confirm = close.last &gt; close[-2]\n    strong_confirm = (close.last - close[-2]) &gt; (close[-2] - close[-3]) * 0.3\n  else\n    good_confirm = close.last &lt; close[-2]\n    strong_confirm = (close[-2] - close.last) &gt; (close[-3] - close[-2]) * 0.3\n  end\n\n  # 5. Volume analysis\n  avg_vol = volume[-20..-4].sum / 17.0\n  vol_engulf = volume[-2]\n  vol_confirm = volume[-1]\n  high_volume = vol_engulf &gt; avg_vol * 1.3\n\n  # 6. RSI confirmation\n  rsi_before = rsi[-4]\n  if is_bullish\n    rsi_ok = rsi_before &lt; 45\n  else\n    rsi_ok = rsi_before &gt; 55\n  end\n\n  # 7. Support/Resistance\n  if is_bullish\n    support = close[-120..-1].min\n    near_level = (low[-3] - support).abs &lt; support * 0.03\n  else\n    resistance = close[-120..-1].max\n    near_level = (high[-3] - resistance).abs &lt; resistance * 0.03\n  end\n\n  # Calculate score\n  score = 0\n  score += 2 if trend_ok\n  score += 2 if strong_engulf\n  score += 1 if full_engulf\n  score += 2 if strong_confirm\n  score += 1 if high_volume\n  score += 1 if rsi_ok\n  score += 1 if near_level\n\n  puts \"Setup Quality:\"\n  puts \"1. Trend context: #{trend_ok} #{trend_ok ? '\u2713\u2713' : '\u2717'}\"\n  puts \"2. Strong engulf (#{engulf_ratio.round(2)}x): #{strong_engulf} #{strong_engulf ? '\u2713\u2713' : '\u2717'}\"\n  puts \"3. Full engulfment: #{full_engulf} #{full_engulf ? '\u2713' : '\u2717'}\"\n  puts \"4. Strong confirmation: #{strong_confirm} #{strong_confirm ? '\u2713\u2713' : '\u2717'}\"\n  puts \"5. High volume: #{high_volume} #{high_volume ? '\u2713' : '\u2717'}\"\n  puts \"6. RSI favorable: #{rsi_ok} #{rsi_ok ? '\u2713' : '\u2717'}\"\n  puts \"7. Near S/R: #{near_level} #{near_level ? '\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/10\"\n\n  if score &gt;= 7\n    entry = close.last\n    if is_bullish\n      stop = low[-3] * 0.99\n      risk = entry - stop\n      target = entry + (risk * 3)\n    else\n      stop = high[-3] * 1.01\n      risk = stop - entry\n      target = entry - (risk * 3)\n    end\n\n    reward = (target - entry).abs\n    rr_ratio = (reward / risk).round(1)\n\n    puts \"\\n*** EXCELLENT #{is_bullish ? 'LONG' : 'SHORT'} SETUP ***\"\n    puts \"-\" * 60\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)}\"\n    puts \"R:R: 1:#{rr_ratio}\"\n\n    # Position sizing\n    account = 100000\n    risk_amount = account * 0.015  # 1.5% risk\n    shares = (risk_amount / risk).floor\n\n    puts \"\\nPosition (1.5% risk):\"\n    puts \"Shares: #{shares}\"\n    puts \"Value: $#{(shares * entry).round(2)}\"\n    puts \"Risk: $#{risk_amount.round(2)}\"\n    puts \"Potential: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 5\n    puts \"\\nDECENT - Reduce position\"\n  else\n    puts \"\\nWEAK - SKIP\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3outside/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_3outside/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Moderate (2-4% of the time)</li> <li>Best Timeframes: Daily, Weekly</li> <li>Markets: All markets (stocks, forex, crypto, commodities)</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect setup: 78-85% success rate</li> <li>Good setup: 68-75% success rate</li> <li>Average setup: 58-68% success rate</li> <li>At support/resistance: 80-88% success rate</li> <li>With volume: 72-82% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#average-move","title":"Average Move","text":"<ul> <li>Initial move: 6-18% from pattern</li> <li>Major reversals: 20-45%</li> <li>Time to target: 5-15 candles</li> <li>Follow-through: 70% show continuation</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_3outside/#dos","title":"Do's","text":"<ol> <li>Verify proper trend before pattern</li> <li>Confirm second candle fully engulfs first</li> <li>Wait for third candle confirmation</li> <li>Check volume increases through pattern</li> <li>Trade near support/resistance</li> <li>Use RSI for additional confirmation</li> <li>Place stops beyond pattern extremes</li> <li>Scale out at multiple targets</li> <li>Look for increasing body sizes</li> <li>Give pattern room to develop</li> </ol>"},{"location":"indicators/patterns/cdl_3outside/#donts","title":"Don'ts","text":"<ol> <li>Don't trade without trend context</li> <li>Don't ignore engulfment quality</li> <li>Don't skip confirmation candle</li> <li>Don't trade on low volume</li> <li>Don't enter without stops</li> <li>Don't confuse with simple engulfing</li> <li>Don't chase after big move</li> <li>Don't ignore broader market</li> <li>Don't risk more than 2% account</li> <li>Don't trade weak confirmations</li> </ol>"},{"location":"indicators/patterns/cdl_3outside/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Ignoring confirmation: Third candle is critical</li> <li>Weak engulfment: Second candle must fully engulf first</li> <li>Wrong trend: Must have prior trend to reverse</li> <li>Poor stop placement: Use pattern extremes</li> <li>No volume check: Volume validates pattern</li> <li>Entering too early: Wait for completion</li> <li>Missing context: Support/resistance critical</li> </ol>"},{"location":"indicators/patterns/cdl_3outside/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_3outside/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Engulfing - Two-candle version (first two candles)</li> <li>Three Inside Up/Down - Related three-candle pattern</li> <li>Piercing Pattern - Similar bullish signal</li> <li>Dark Cloud Cover - Similar bearish signal</li> <li>Morning Star - Three-candle bullish reversal</li> <li>Evening Star - Three-candle bearish reversal</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#component-patterns","title":"Component Patterns","text":"<ul> <li>Engulfing - Core of pattern (candles 1-2)</li> <li>Long Line - Second and third candles</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_3outside/#perfect-three-outside","title":"Perfect Three Outside","text":"<ul> <li>Clear trend before pattern</li> <li>Second candle deeply engulfs first (3x+)</li> <li>Third candle strong continuation</li> <li>High volume on candles 2 and 3</li> <li>At major support/resistance</li> <li>Success Rate: 82-88%</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#strong-three-outside","title":"Strong Three Outside","text":"<ul> <li>Good trend context</li> <li>Solid engulfment (2x+)</li> <li>Decent confirmation</li> <li>Above average volume</li> <li>Success Rate: 70-78%</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#weak-three-outside","title":"Weak Three Outside","text":"<ul> <li>Unclear trend</li> <li>Barely engulfs (1.2x)</li> <li>Weak confirmation</li> <li>Low volume</li> <li>Success Rate: 50-60%</li> </ul>"},{"location":"indicators/patterns/cdl_3outside/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>High reliability - Confirmation makes it superior to engulfing alone</li> <li>Complete pattern - All three candles matter</li> <li>Trend context - Must have trend to reverse</li> <li>Engulfment critical - Second candle must fully engulf first</li> <li>Confirmation validates - Third candle confirms reversal</li> <li>Volume confirms - Should increase through pattern</li> <li>Support/resistance - Best at technical levels</li> <li>Tight stops - Risk well-defined at pattern extremes</li> <li>Good R:R - Typically 1:3 or better possible</li> <li>Patient entry - Wait for full pattern completion</li> </ol>"},{"location":"indicators/patterns/cdl_3outside/#see-also","title":"See Also","text":"<ul> <li>Engulfing</li> <li>Three Inside Up/Down</li> <li>Piercing Pattern</li> <li>Dark Cloud Cover</li> <li>Morning Star</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/","title":"Three Stars in the South Pattern","text":"<p>The Three Stars in the South is a rare but highly reliable three-candle bullish reversal pattern that appears during downtrends. It consists of three consecutive black (bearish) candles with progressively smaller bodies and lower shadows, indicating that selling pressure is diminishing and a bullish reversal is imminent.</p>"},{"location":"indicators/patterns/cdl_3starsinsouth/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Bullish Reversal</li> <li>Candles Required: 3</li> <li>Trend Context: Appears during or at the end of a downtrend</li> <li>Reliability: Very High (rare but accurate when it appears)</li> <li>Frequency: Rare (appears less than 1% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 98.0, 97.0, 96.5, 97.0]\nhigh  = [100.5, 98.5, 97.3, 96.8, 98.0]\nlow   = [96.0, 96.0, 96.5, 96.3, 96.8]\nclose = [98.0, 97.0, 96.8, 96.7, 97.5]\n\n# Detect Three Stars in the South pattern\npattern = SQA::TAI.cdl_3starsinsouth(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Three Stars in the South detected - Rare bullish reversal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_3starsinsouth/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Three Stars in the South pattern detected - +100: Three Stars in the South pattern detected (bullish reversal signal)</p> <p>Note: This pattern only returns bullish signals as it's specifically a bullish reversal pattern.</p>"},{"location":"indicators/patterns/cdl_3starsinsouth/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_3starsinsouth/#three-candle-structure","title":"Three Candle Structure","text":"<ol> <li>First Candle: Long black candle with a long lower shadow</li> <li>Significant bearish body</li> <li>Long lower shadow (at least as long as body)</li> <li> <p>Shows strong selling but some buying support</p> </li> <li> <p>Second Candle: Smaller black candle</p> </li> <li>Opens within first candle's body</li> <li>Smaller body than first candle</li> <li>Shorter lower shadow than first</li> <li> <p>Does not make new low (higher low)</p> </li> <li> <p>Third Candle: Small black marubozu or near-marubozu</p> </li> <li>Very small body</li> <li>Opens within second candle's body</li> <li>Little to no shadow</li> <li>Does not make new low (higher low again)</li> </ol>"},{"location":"indicators/patterns/cdl_3starsinsouth/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>All three candles are black (bearish)</li> <li>Progressive decrease in body size</li> <li>Progressive decrease in lower shadow length</li> <li>Each candle makes a higher low</li> <li>Pattern shows exhaustion of selling pressure</li> <li>Final candle is almost a doji-like small body</li> <li>Pattern resembles three stars aligned in the southern sky</li> <li>Indicates sellers losing momentum</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Clear downtrend: Pattern must occur during established downtrend</li> <li>First candle: Long body with significant lower shadow</li> <li>Progressive shortening: Each candle noticeably smaller</li> <li>Higher lows: Each low is higher than previous</li> <li>Third candle: Very small body, minimal shadows</li> <li>Volume: Often declining volume through pattern</li> <li>Context: Forms near support or oversold levels</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#visual-pattern","title":"Visual Pattern","text":"<pre><code>During downtrend:\n\nFirst: [====]         Long black with long lower shadow\n         |   |\n         |   |\n        /     \\\n\nSecond: [==]          Smaller black, shorter shadow, higher low\n         |  |\n         | /\n\nThird:  [=]           Tiny black, no/minimal shadow, higher low still\n        | |\n\nThree diminishing \"stars\" showing selling exhaustion\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#interpretation","title":"Interpretation","text":"<p>The Three Stars in the South signals bullish reversal through:</p> <ol> <li>Selling Exhaustion: Three consecutive down days but weakening</li> <li>Higher Lows: Each candle refuses to make new low</li> <li>Shrinking Bodies: Sellers unable to push price down as much</li> <li>Diminishing Shadows: Less intraday volatility</li> <li>Capitulation: Final small candle shows sellers exhausted</li> <li>Support: Pattern shows strong support emerging</li> </ol>"},{"location":"indicators/patterns/cdl_3starsinsouth/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Context Weak downtrend Clear downtrend Strong downtrend Body Progression Irregular Some decrease Clear decrease Lower Shadows Inconsistent Mostly decreasing Clearly decreasing Third Candle Medium body Small body Tiny/doji-like Higher Lows Slight Clear Very distinct Support No support Some support At key support"},{"location":"indicators/patterns/cdl_3starsinsouth/#example-three-stars-in-the-south-after-downtrend","title":"Example: Three Stars in the South After Downtrend","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_3starsinsouth(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last == 100\n  puts \"RARE: Three Stars in the South detected!\"\n\n  # Verify downtrend context\n  downtrend = close[-4] &lt; sma_50[-4] &amp;&amp; close[-5] &lt; close[-10]\n\n  if downtrend\n    puts \"Pattern formed after downtrend - HIGH RELIABILITY\"\n\n    # Check progressive characteristics\n    body1 = (close[-3] - open[-3]).abs\n    body2 = (close[-2] - open[-2]).abs\n    body3 = (close[-1] - open[-1]).abs\n\n    shadow1 = open[-3] - low[-3]\n    shadow2 = open[-2] - low[-2]\n    shadow3 = open[-1] - low[-1]\n\n    puts \"\\nCandle Analysis:\"\n    puts \"Candle 1 - Body: #{body1.round(2)}, Shadow: #{shadow1.round(2)}\"\n    puts \"Candle 2 - Body: #{body2.round(2)}, Shadow: #{shadow2.round(2)}\"\n    puts \"Candle 3 - Body: #{body3.round(2)}, Shadow: #{shadow3.round(2)}\"\n\n    # Check for proper progression\n    bodies_decreasing = body1 &gt; body2 &amp;&amp; body2 &gt; body3\n    shadows_decreasing = shadow1 &gt; shadow2 &amp;&amp; shadow2 &gt;= shadow3\n\n    higher_lows = low[-2] &gt; low[-3] &amp;&amp; low[-1] &gt; low[-2]\n\n    if bodies_decreasing &amp;&amp; shadows_decreasing &amp;&amp; higher_lows\n      puts \"\\nPERFECT PATTERN - All conditions met!\"\n      puts \"Selling pressure clearly exhausting\"\n    end\n\n    # Calculate potential reversal\n    pattern_low = [low[-3], low[-2], low[-1]].min\n    puts \"\\nPattern low: #{pattern_low.round(2)}\"\n    puts \"Current: #{close.last.round(2)}\"\n    puts \"Excellent risk/reward from this rare pattern\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#example-three-stars-with-rsi-oversold","title":"Example: Three Stars with RSI Oversold","text":"<pre><code>open, high, low, close = load_ohlc_data('TSLA')\n\npattern = SQA::TAI.cdl_3starsinsouth(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == 100\n  rsi_start = rsi[-4]\n  rsi_current = rsi.last\n\n  puts \"Three Stars in the South with RSI:\"\n  puts \"RSI before pattern: #{rsi_start.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n\n  if rsi_start &lt; 30\n    puts \"\\nPattern formed in OVERSOLD territory!\"\n    puts \"Extremely high probability reversal\"\n    puts \"Classic exhaustion bottom\"\n  elsif rsi_start &lt; 40\n    puts \"\\nPattern formed with depressed RSI\"\n    puts \"Strong reversal signal\"\n  end\n\n  # Check RSI behavior during pattern\n  rsi1 = rsi[-3]\n  rsi2 = rsi[-2]\n  rsi3 = rsi[-1]\n\n  rsi_divergence = rsi3 &gt; rsi2 &amp;&amp; rsi2 &gt; rsi1 &amp;&amp; close[-1] &lt;= close[-3]\n\n  if rsi_divergence\n    puts \"\\nBULLISH DIVERGENCE present!\"\n    puts \"RSI making higher lows while price stalling\"\n    puts \"VERY STRONG confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#example-three-stars-at-support","title":"Example: Three Stars at Support","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_3starsinsouth(open, high, low, close)\n\n# Find support level\nsupport = close[-120..-5].min\npattern_low = [low[-3], low[-2], low[-1]].min\n\nif pattern.last == 100\n  # Check if at support\n  at_support = (pattern_low - support).abs &lt; support * 0.02\n\n  if at_support\n    puts \"Three Stars in the South AT SUPPORT!\"\n    puts \"Support: #{support.round(2)}\"\n    puts \"Pattern low: #{pattern_low.round(2)}\"\n    puts \"\\nTEXTBOOK reversal setup\"\n    puts \"Support holding + selling exhaustion\"\n    puts \"VERY HIGH PROBABILITY bullish reversal\"\n\n    # Calculate risk/reward\n    resistance = close[-60..-1].max\n    entry = close.last\n    stop = pattern_low * 0.99\n    target = resistance\n\n    risk = entry - stop\n    reward = target - entry\n    rr = (reward / risk).round(2)\n\n    puts \"\\nRisk/Reward:\"\n    puts \"Entry: #{entry.round(2)}\"\n    puts \"Stop: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n    puts \"R:R Ratio: 1:#{rr}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#example-volume-analysis","title":"Example: Volume Analysis","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('NVDA')\n\npattern = SQA::TAI.cdl_3starsinsouth(open, high, low, close)\n\nif pattern.last == 100\n  # Analyze volume through pattern\n  vol1 = volume[-3]\n  vol2 = volume[-2]\n  vol3 = volume[-1]\n  avg_vol = volume[-20..-4].sum / 17.0\n\n  puts \"Three Stars in the South Volume Analysis:\"\n  puts \"Star 1 volume: #{vol1.round(0)}\"\n  puts \"Star 2 volume: #{vol2.round(0)}\"\n  puts \"Star 3 volume: #{vol3.round(0)}\"\n  puts \"Avg volume: #{avg_vol.round(0)}\"\n\n  # Ideal: decreasing volume shows selling exhaustion\n  vol_decreasing = vol1 &gt; vol2 &amp;&amp; vol2 &gt; vol3\n  vol_below_avg = vol3 &lt; avg_vol\n\n  if vol_decreasing &amp;&amp; vol_below_avg\n    puts \"\\nIDEAL: Declining volume through pattern\"\n    puts \"Selling pressure truly exhausted\"\n    puts \"VERY STRONG signal\"\n  elsif vol_decreasing\n    puts \"\\nGOOD: Volume declining\"\n    puts \"Seller fatigue evident\"\n  elsif vol_below_avg\n    puts \"\\nDECENT: Volume subdued on final candle\"\n    puts \"Sellers losing interest\"\n  else\n    puts \"\\nWARNING: High volume maintained\"\n    puts \"May need more time to bottom\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_3starsinsouth/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_3starsinsouth/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for bullish confirmation candle\nif pattern[-2] == 100  # Pattern completed 2 candles ago\n  if close[-1] &gt; open[-1] &amp;&amp; close.last &gt; close[-1]\n    puts \"Three Stars CONFIRMED with bullish follow-through\"\n    entry = close.last\n    puts \"Enter LONG at #{entry.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter at pattern completion\nif pattern.last == 100\n  entry = close.last\n  pattern_low = [low[-3], low[-2], low[-1]].min\n  stop = pattern_low * 0.99\n\n  puts \"Entering LONG at pattern completion\"\n  puts \"Entry: #{entry.round(2)}\"\n  puts \"Stop: #{stop.round(2)}\"\n  puts \"Note: Rare pattern - high confidence despite no confirmation\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#pullback-entry","title":"Pullback Entry","text":"<pre><code># Wait for minor pullback after pattern\nif pattern[-3..-1].include?(100)\n  pattern_idx = -3 + pattern[-3..-1].index(100)\n  pattern_high = high[pattern_idx..-1].max\n\n  # Enter on pullback that holds pattern low\n  pattern_low = [low[-3], low[-2], low[-1]].min\n\n  if close.last &lt; pattern_high &amp;&amp; low.last &gt; pattern_low\n    puts \"Pullback entry opportunity\"\n    puts \"Entry: #{close.last.round(2)}\"\n    puts \"Protected above pattern low\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == 100\n  # Stop below pattern low (standard)\n  pattern_low = [low[-3], low[-2], low[-1]].min\n  stop = pattern_low * 0.985  # 1.5% buffer\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Rationale: Below all three stars\"\n\n  # Calculate risk\n  entry = close.last\n  risk = entry - stop\n  risk_pct = (risk / entry * 100).round(2)\n\n  puts \"Risk: $#{risk.round(2)} (#{risk_pct}%)\"\n\n  # Alternative: Tighter stop below third candle only\n  tight_stop = low[-1] * 0.99\n  puts \"\\nTighter stop: #{tight_stop.round(2)}\"\n  puts \"(Higher risk but final star is key support)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == 100\n  entry = close.last\n  pattern_low = [low[-3], low[-2], low[-1]].min\n  stop = pattern_low * 0.985\n  risk = entry - stop\n\n  # Risk-based targets\n  target_1 = entry + (risk * 2)    # 2R\n  target_2 = entry + (risk * 3)    # 3R\n  target_3 = entry + (risk * 5)    # 5R (rare pattern justifies)\n\n  puts \"Risk-Based Targets:\"\n  puts \"T1 (2R): #{target_1.round(2)}\"\n  puts \"T2 (3R): #{target_2.round(2)}\"\n  puts \"T3 (5R): #{target_3.round(2)}\"\n\n  # Technical targets\n  sma_50 = SQA::TAI.sma(close, period: 50)\n  resistance = close[-60..-1].max\n\n  puts \"\\nTechnical Targets:\"\n  puts \"50 SMA: #{sma_50.last.round(2)}\"\n  puts \"Recent high: #{resistance.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_3starsinsouth(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == 100\n  puts \"Three Stars in the South Pattern Analysis\"\n  puts \"=\" * 60\n  puts \"(RARE PATTERN - High significance)\"\n\n  # 1. Trend context\n  downtrend = close[-4] &lt; sma_50[-4] &amp;&amp; sma_50[-4] &lt; sma_200[-4]\n\n  # 2. Pattern structure\n  body1 = (close[-3] - open[-3]).abs\n  body2 = (close[-2] - open[-2]).abs\n  body3 = (close[-1] - open[-1]).abs\n\n  shadow1 = open[-3] - low[-3]\n  shadow2 = open[-2] - low[-2]\n  shadow3 = open[-1] - low[-1]\n\n  bodies_decrease = body1 &gt; body2 &amp;&amp; body2 &gt; body3 &amp;&amp;\n                    body3 &lt; body2 * 0.6  # Third significantly smaller\n\n  shadows_decrease = shadow1 &gt; shadow2 &amp;&amp; shadow2 &gt;= shadow3\n\n  first_long_shadow = shadow1 &gt;= body1\n\n  higher_lows = low[-2] &gt; low[-3] &amp;&amp; low[-1] &gt; low[-2]\n\n  third_small = body3 &lt; body1 * 0.3  # Less than 30% of first\n\n  # 3. Support check\n  support = close[-120..-5].min\n  pattern_low = [low[-3], low[-2], low[-1]].min\n  at_support = (pattern_low - support).abs &lt; support * 0.03\n\n  # 4. RSI oversold\n  rsi_before = rsi[-4]\n  oversold = rsi_before &lt; 40\n\n  # 5. Volume declining\n  vol1, vol2, vol3 = volume[-3], volume[-2], volume[-1]\n  avg_vol = volume[-20..-4].sum / 17.0\n  vol_declining = vol1 &gt; vol2 &amp;&amp; vol2 &gt; vol3\n\n  # 6. All three candles are black\n  all_black = close[-3] &lt; open[-3] &amp;&amp;\n              close[-2] &lt; open[-2] &amp;&amp;\n              close[-1] &lt; open[-1]\n\n  # Calculate quality score\n  score = 0\n  score += 3 if downtrend              # Critical\n  score += 2 if bodies_decrease        # Very important\n  score += 2 if higher_lows             # Very important\n  score += 2 if first_long_shadow      # Important\n  score += 1 if shadows_decrease\n  score += 1 if third_small\n  score += 2 if at_support             # Very important\n  score += 1 if oversold\n  score += 1 if vol_declining\n  score += 1 if all_black\n\n  puts \"\\nQuality Checks:\"\n  puts \"1. Downtrend: #{downtrend} #{downtrend ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"2. Bodies decreasing: #{bodies_decrease} #{bodies_decrease ? '\u2713\u2713' : '\u2717'}\"\n  puts \"3. Higher lows: #{higher_lows} #{higher_lows ? '\u2713\u2713' : '\u2717'}\"\n  puts \"4. First long shadow: #{first_long_shadow} #{first_long_shadow ? '\u2713\u2713' : '\u2717'}\"\n  puts \"5. Shadows decreasing: #{shadows_decrease} #{shadows_decrease ? '\u2713' : '\u2717'}\"\n  puts \"6. Third tiny: #{third_small} #{third_small ? '\u2713' : '\u2717'}\"\n  puts \"7. At support: #{at_support} #{at_support ? '\u2713\u2713' : '\u2717'}\"\n  puts \"8. RSI oversold (#{rsi_before.round(2)}): #{oversold} #{oversold ? '\u2713' : '\u2717'}\"\n  puts \"9. Volume declining: #{vol_declining} #{vol_declining ? '\u2713' : '\u2717'}\"\n  puts \"10. All black candles: #{all_black} #{all_black ? '\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/16\"\n\n  if score &gt;= 11\n    # Calculate trade\n    entry = close.last\n    stop = pattern_low * 0.985\n    risk = entry - stop\n\n    resistance = close[-60..-1].max\n    target = resistance\n    reward = target - entry\n    rr = (reward / risk).round(1)\n\n    puts \"\\n*** EXCELLENT SETUP (Rare Pattern!) ***\"\n    puts \"-\" * 60\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)} (#{(reward/entry*100).round(2)}%)\"\n    puts \"R:R: 1:#{rr}\"\n\n    # Position sizing\n    account = 100000\n    risk_amount = account * 0.02  # 2% for rare high-quality pattern\n    shares = (risk_amount / risk).floor\n\n    puts \"\\nPosition Sizing (2% risk for rare pattern):\"\n    puts \"Shares: #{shares}\"\n    puts \"Position: $#{(shares * entry).round(2)}\"\n    puts \"Risk: $#{risk_amount.round(2)}\"\n    puts \"Potential profit: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 8\n    puts \"\\nGOOD SETUP - Consider trade\"\n    puts \"Rare pattern still valuable\"\n\n  else\n    puts \"\\nWEAK SETUP - Pattern incomplete or poor context\"\n    puts \"Wait for better setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_3starsinsouth/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Very Rare (less than 1% of the time)</li> <li>Best Timeframes: Daily and Weekly charts</li> <li>Markets: Most reliable in stock and commodity markets</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 85-92% success rate</li> <li>Good pattern: 75-85% success rate</li> <li>Average pattern: 65-75% success rate</li> <li>At support: 88-95% success rate</li> <li>With volume decline: 80-88% success rate</li> <li>Oversold RSI: 82-90% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#average-move","title":"Average Move","text":"<ul> <li>Initial reversal: 10-25% from pattern low</li> <li>Major reversals: 30-60% advance</li> <li>Time to target: 10-30 candles</li> <li>Follow-through: 85% show strong continuation</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_3starsinsouth/#dos","title":"Do's","text":"<ol> <li>Recognize the rarity and significance of this pattern</li> <li>Verify clear downtrend before pattern</li> <li>Confirm bodies progressively decrease</li> <li>Check that each candle makes higher low</li> <li>Verify first candle has long lower shadow</li> <li>Ensure third candle is very small</li> <li>Trade when at support for best results</li> <li>Use RSI to confirm oversold conditions</li> <li>Look for declining volume through pattern</li> <li>Be patient - pattern is rare but reliable</li> </ol>"},{"location":"indicators/patterns/cdl_3starsinsouth/#donts","title":"Don'ts","text":"<ol> <li>Don't ignore the pattern due to rarity</li> <li>Don't trade without downtrend context</li> <li>Don't accept if bodies don't decrease</li> <li>Don't ignore if lows are not progressively higher</li> <li>Don't trade if first shadow isn't long</li> <li>Don't enter if third candle is large</li> <li>Don't skip confirmation in uncertain conditions</li> <li>Don't use tight stops - pattern needs room</li> <li>Don't ignore volume signals</li> <li>Don't overtrade - this pattern is genuinely rare</li> </ol>"},{"location":"indicators/patterns/cdl_3starsinsouth/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Misidentifying pattern: Must have exact structure</li> <li>Wrong trend context: Needs clear downtrend</li> <li>Ignoring progression: Bodies and shadows must decrease</li> <li>Missing higher lows: Critical feature</li> <li>Poor stop placement: Must protect below pattern</li> <li>Ignoring rarity: Pattern's rarity adds significance</li> <li>No confirmation: Even rare patterns benefit from confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_3starsinsouth/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_3starsinsouth/#similar-bullish-patterns","title":"Similar Bullish Patterns","text":"<ul> <li>Morning Star - Three-candle bullish reversal</li> <li>Three White Soldiers - Bullish three-candle pattern</li> <li>Abandoned Baby - Another rare reversal</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#component-patterns","title":"Component Patterns","text":"<ul> <li>Long Line - First candle characteristics</li> <li>Short Line - Third candle characteristics</li> <li>Hammer - First candle similar structure</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_3starsinsouth/#perfect-three-stars-in-the-south","title":"Perfect Three Stars in the South","text":"<ul> <li>Clear downtrend context</li> <li>First candle: long body, long lower shadow</li> <li>Second candle: noticeably smaller, shorter shadow, higher low</li> <li>Third candle: tiny body, minimal shadow, higher low</li> <li>All black candles</li> <li>Declining volume</li> <li>At support level</li> <li>Success Rate: 88-95%</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#good-three-stars-in-the-south","title":"Good Three Stars in the South","text":"<ul> <li>Downtrend present</li> <li>Progressive decrease in sizes</li> <li>Higher lows maintained</li> <li>Some variation acceptable</li> <li>Success Rate: 75-85%</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#weak-three-stars-in-the-south","title":"Weak Three Stars in the South","text":"<ul> <li>Unclear downtrend</li> <li>Inconsistent sizing</li> <li>Higher lows not clear</li> <li>High volume maintained</li> <li>Success Rate: 55-65%</li> </ul>"},{"location":"indicators/patterns/cdl_3starsinsouth/#advanced-concepts","title":"Advanced Concepts","text":""},{"location":"indicators/patterns/cdl_3starsinsouth/#pattern-quality-scorer","title":"Pattern Quality Scorer","text":"<pre><code>def score_three_stars_south(open, high, low, close, volume)\n  return 0 unless pattern.last == 100\n\n  score = 0\n\n  # Body progression (0-3 points)\n  body1 = (close[-3] - open[-3]).abs\n  body2 = (close[-2] - open[-2]).abs\n  body3 = (close[-1] - open[-1]).abs\n\n  score += 3 if body1 &gt; body2 &amp;&amp; body2 &gt; body3 &amp;&amp; body3 &lt; body1 * 0.3\n  score += 2 if body1 &gt; body2 &amp;&amp; body2 &gt; body3 &amp;&amp; body3 &lt; body1 * 0.5\n  score += 1 if body1 &gt; body2 &amp;&amp; body2 &gt; body3\n\n  # Shadow progression (0-2 points)\n  shadow1 = open[-3] - low[-3]\n  shadow2 = open[-2] - low[-2]\n  shadow3 = open[-1] - low[-1]\n\n  score += 2 if shadow1 &gt; shadow2 &amp;&amp; shadow2 &gt;= shadow3 &amp;&amp; shadow1 &gt;= body1\n  score += 1 if shadow1 &gt; shadow2 &amp;&amp; shadow2 &gt;= shadow3\n\n  # Higher lows (0-3 points)\n  if low[-2] &gt; low[-3] &amp;&amp; low[-1] &gt; low[-2]\n    diff1 = low[-2] - low[-3]\n    diff2 = low[-1] - low[-2]\n\n    score += 3 if diff1 &gt; body1 * 0.1 &amp;&amp; diff2 &gt; body2 * 0.1\n    score += 2 if diff1 &gt; 0 &amp;&amp; diff2 &gt; 0\n  end\n\n  # Volume decline (0-2 points)\n  vol1, vol2, vol3 = volume[-3], volume[-2], volume[-1]\n  score += 2 if vol1 &gt; vol2 &amp;&amp; vol2 &gt; vol3\n  score += 1 if vol3 &lt; vol1\n\n  # All black candles (0-2 points)\n  all_black = close[-3] &lt; open[-3] &amp;&amp;\n              close[-2] &lt; open[-2] &amp;&amp;\n              close[-1] &lt; open[-1]\n  score += 2 if all_black\n\n  score  # 0-12\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3starsinsouth/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Extremely rare but highly reliable pattern</li> <li>Selling exhaustion clearly visible through progression</li> <li>Higher lows critical feature distinguishing from mere decline</li> <li>Progressive shrinking shows diminishing bearish pressure</li> <li>Downtrend required for reversal signal validity</li> <li>Support confluence dramatically increases success rate</li> <li>Volume decline confirms seller exhaustion</li> <li>Long first shadow shows initial buying interest</li> <li>Tiny third candle signals capitulation complete</li> <li>Don't miss it - rarity makes it significant when it appears</li> </ol>"},{"location":"indicators/patterns/cdl_3starsinsouth/#see-also","title":"See Also","text":"<ul> <li>Morning Star - Common bullish reversal</li> <li>Three White Soldiers - Bullish three-pattern</li> <li>Hammer - Single candle reversal</li> <li>Abandoned Baby - Another rare reversal</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/","title":"Three White Soldiers Pattern","text":"<p>The Three White Soldiers (also known as Three Advancing White Soldiers) is one of the most powerful bullish reversal patterns in candlestick analysis. It consists of three consecutive long bullish candles with progressively higher closes, appearing after a downtrend and signaling a strong shift to bullish momentum.</p>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Bullish Reversal</li> <li>Candles Required: 3</li> <li>Trend Context: Appears after downtrend or at market bottom</li> <li>Reliability: High (one of the most reliable bullish patterns)</li> <li>Frequency: Moderate (appears 2-3% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [95.0, 96.0, 97.5, 99.0, 100.5]\nhigh  = [96.5, 98.0, 99.5, 101.0, 102.0]\nlow   = [94.5, 95.5, 97.0, 98.5, 100.0]\nclose = [96.0, 97.5, 99.0, 100.5, 101.5]\n\n# Detect Three White Soldiers pattern\npattern = SQA::TAI.cdl_3whitesoldiers(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Three White Soldiers detected - Strong bullish reversal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_3whitesoldiers/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Three White Soldiers pattern detected - +100: Three White Soldiers pattern detected (strong bullish reversal signal)</p> <p>Note: This pattern only returns bullish signals. See Three Black Crows for the bearish counterpart.</p>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_3whitesoldiers/#three-candle-structure","title":"Three Candle Structure","text":"<ol> <li>First Candle: Long bullish (white) candle in or after downtrend</li> <li>Second Candle: Another long bullish candle that:</li> <li>Opens within first candle's body</li> <li>Closes higher than first candle</li> <li>Has similar or larger body size</li> <li>Third Candle: Third consecutive long bullish candle that:</li> <li>Opens within second candle's body</li> <li>Closes higher than second candle</li> <li>Completes the ascending pattern</li> </ol>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>All three candles are bullish with long bodies</li> <li>Each candle opens within previous candle's body</li> <li>Each candle closes progressively higher</li> <li>Limited or no lower shadows (closes near highs)</li> <li>Ideally similar-sized candles showing consistent buying</li> <li>Pattern appears after downtrend or at support</li> <li>Resembles soldiers marching upward in formation</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Consistent bodies: All three candles roughly same size</li> <li>No gaps: Candles open within previous bodies (orderly advance)</li> <li>Minimal shadows: Little to no lower wicks (strong buying)</li> <li>Volume: Increasing or high volume on all three candles</li> <li>Context: Follows clear downtrend or consolidation</li> <li>Location: Forms near support or oversold conditions</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#visual-pattern","title":"Visual Pattern","text":"<pre><code>After downtrend:\n\n            [====]   Third white soldier\n             |   |\n          [====]     Second white soldier (opens in first, closes higher)\n           |   |\n        [====]       First white soldier (long bullish)\n         |   |\n\n    Stepwise climb with consistent bullish pressure\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#interpretation","title":"Interpretation","text":"<p>The Three White Soldiers signals strong bullish reversal through:</p> <ol> <li>Momentum Shift: Bears lose control on first candle</li> <li>Acceleration: Second candle confirms buyers taking over</li> <li>Confirmation: Third candle validates new uptrend</li> <li>Accumulation: Smart money establishing long positions</li> <li>Psychological Impact: Three consecutive up days creates FOMO</li> <li>Military Formation: Soldiers advancing in disciplined formation</li> </ol>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Context Weak downtrend Clear downtrend Strong downtrend Candle Size Short bodies Medium bodies Long bodies Shadows Long lower shadows Some shadows Minimal shadows Volume Decreasing Normal Increasing Position Mid-chart After decline At support Consistency Variable sizes Similar sizes Uniform sizes"},{"location":"indicators/patterns/cdl_3whitesoldiers/#example-three-white-soldiers-after-downtrend","title":"Example: Three White Soldiers After Downtrend","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_3whitesoldiers(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == 100\n  # Verify downtrend context\n  was_downtrend = close[-4] &lt; sma_50[-4] &amp;&amp; sma_50[-4] &lt; sma_200[-4]\n\n  if was_downtrend\n    puts \"Three White Soldiers after downtrend!\"\n    puts \"HIGH PROBABILITY bullish reversal\"\n    puts \"Previous close: #{close[-4].round(2)}\"\n    puts \"Current close: #{close.last.round(2)}\"\n\n    # Calculate advance\n    advance = ((close.last - close[-4]) / close[-4] * 100).round(2)\n    puts \"Three-day advance: #{advance}%\"\n\n    # Check candle consistency\n    body1 = close[-3] - open[-3]\n    body2 = close[-2] - open[-2]\n    body3 = close[-1] - open[-1]\n    avg_body = (body1 + body2 + body3) / 3\n\n    consistent = (body1 - avg_body).abs &lt; avg_body * 0.3 &amp;&amp;\n                 (body2 - avg_body).abs &lt; avg_body * 0.3 &amp;&amp;\n                 (body3 - avg_body).abs &lt; avg_body * 0.3\n\n    if consistent\n      puts \"Candles are consistent - STRONG pattern\"\n    else\n      puts \"Candles vary in size - moderate pattern\"\n    end\n\n    # Check for proper progression\n    proper_opens = open[-2] &gt; open[-3] &amp;&amp; open[-2] &lt; close[-3] &amp;&amp;\n                   open[-1] &gt; open[-2] &amp;&amp; open[-1] &lt; close[-2]\n\n    if proper_opens\n      puts \"Proper opening progression - textbook formation\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#example-three-white-soldiers-with-volume","title":"Example: Three White Soldiers with Volume","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_3whitesoldiers(open, high, low, close)\n\nif pattern.last == 100\n  # Volume analysis for each soldier\n  vol_soldier1 = volume[-3]\n  vol_soldier2 = volume[-2]\n  vol_soldier3 = volume[-1]\n  avg_volume = volume[-20..-4].sum / 17.0  # Before pattern\n\n  puts \"Three White Soldiers Volume Analysis:\"\n  puts \"Soldier 1 volume: #{vol_soldier1.round(0)}\"\n  puts \"Soldier 2 volume: #{vol_soldier2.round(0)}\"\n  puts \"Soldier 3 volume: #{vol_soldier3.round(0)}\"\n  puts \"Average volume (before): #{avg_volume.round(0)}\"\n\n  # Check for volume confirmation\n  vol_increasing = vol_soldier2 &gt; vol_soldier1 &amp;&amp; vol_soldier3 &gt; vol_soldier2\n  high_vol = vol_soldier1 &gt; avg_volume &amp;&amp;\n             vol_soldier2 &gt; avg_volume &amp;&amp;\n             vol_soldier3 &gt; avg_volume\n\n  if vol_increasing &amp;&amp; high_vol\n    puts \"\\nEXCELLENT: Increasing volume on all three soldiers\"\n    puts \"High conviction buying - VERY STRONG pattern\"\n  elsif high_vol\n    puts \"\\nGOOD: High volume on all soldiers\"\n    puts \"Strong buying pressure\"\n  elsif vol_increasing\n    puts \"\\nDECENT: Volume increasing\"\n    puts \"Building buying momentum\"\n  else\n    puts \"\\nWEAK: Low or decreasing volume\"\n    puts \"Less reliable - may lack follow-through\"\n  end\n\n  # Check for exhaustion on third soldier\n  if vol_soldier3 &gt; avg_volume * 3\n    puts \"\\nWARNING: Very high volume on third soldier\"\n    puts \"Potential climax buying - watch for pullback\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#example-three-white-soldiers-at-support","title":"Example: Three White Soldiers at Support","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_3whitesoldiers(open, high, low, close)\n\n# Find support level\nsupport = close[-120..-1].min\nprior_low = low[-4]\n\nif pattern.last == 100\n  # Check if pattern formed at/near support\n  at_support = (prior_low - support).abs &lt; support * 0.02\n\n  if at_support\n    puts \"Three White Soldiers AT SUPPORT!\"\n    puts \"Support: #{support.round(2)}\"\n    puts \"Pattern started near: #{prior_low.round(2)}\"\n    puts \"Current price: #{close.last.round(2)}\"\n    puts \"\\nTextbook reversal from support\"\n    puts \"VERY HIGH PROBABILITY continuation\"\n\n    # Calculate potential upside\n    resistance = close[-60..-1].max\n    potential_move = ((resistance - close.last) / close.last * 100).round(2)\n    puts \"Potential move to resistance: #{potential_move}%\"\n  else\n    distance = ((prior_low - support) / support * 100).round(2)\n    puts \"Three White Soldiers #{distance}% from support\"\n    puts \"Moderate setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#example-three-white-soldiers-with-rsi","title":"Example: Three White Soldiers with RSI","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\npattern = SQA::TAI.cdl_3whitesoldiers(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == 100\n  rsi_before = rsi[-4]   # Before pattern\n  rsi_current = rsi.last  # After pattern\n\n  puts \"Three White Soldiers with RSI:\"\n  puts \"RSI before pattern: #{rsi_before.round(2)}\"\n  puts \"Current RSI: #{rsi_current.round(2)}\"\n  puts \"RSI change: +#{(rsi_current - rsi_before).round(2)}\"\n\n  if rsi_before &lt; 30\n    puts \"\\nPattern formed from OVERSOLD\"\n    puts \"Classic reversal from extremes\"\n    puts \"STRONG bullish signal\"\n  elsif rsi_before &lt; 40\n    puts \"\\nPattern formed from depressed RSI\"\n    puts \"Good reversal setup\"\n  end\n\n  # Check for overbought\n  if rsi_current &gt; 70\n    puts \"\\nWARNING: Now overbought\"\n    puts \"May see pullback - consider taking profits\"\n  elsif rsi_current &gt; 60\n    puts \"\\nRSI strong but not extreme\"\n    puts \"Momentum confirmed\"\n  else\n    puts \"\\nRoom to run - RSI not overbought yet\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_3whitesoldiers/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_3whitesoldiers/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation candle after pattern\nif pattern[-2] == 100  # Pattern completed two candles ago\n  if close[-1] &gt; close[-2] || close.last &gt; close[-1]\n    puts \"Three White Soldiers CONFIRMED\"\n    entry = close.last\n    puts \"Enter LONG at #{entry.round(2)}\"\n  else\n    puts \"Waiting for confirmation - price trying to pull back\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter immediately on pattern completion\nif pattern.last == 100\n  entry = close.last\n  puts \"Three White Soldiers completed - Enter LONG\"\n  puts \"Entry: #{entry.round(2)}\"\n  puts \"Note: Higher risk without confirmation\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#pullback-entry","title":"Pullback Entry","text":"<pre><code># Wait for pullback to pattern area\nif pattern[-3] == 100  # Pattern 3 candles ago\n  pattern_low = [low[-3], low[-2], low[-1]].min\n\n  if close.last &lt; close[-1] &amp;&amp; close.last &gt; pattern_low\n    puts \"Pullback to pattern support\"\n    puts \"Enter LONG at #{close.last.round(2)}\"\n    puts \"Lower risk entry point\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == 100\n  # Stop below pattern low\n  pattern_low = [low[-3], low[-2], low[-1]].min\n  stop = pattern_low * 0.99  # 1% buffer\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Rationale: Below pattern low - invalidates bullish setup\"\n\n  # Alternative: Tighter stop below first candle\n  tight_stop = low[-3] * 0.995  # 0.5% buffer\n  puts \"Tighter stop: #{tight_stop.round(2)} (higher risk)\"\n\n  # Calculate risk\n  entry = close.last\n  risk = entry - stop\n  risk_percent = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_percent}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == 100\n  entry = close.last\n  stop = [low[-3], low[-2], low[-1]].min * 0.99\n  risk = entry - stop\n\n  # Risk-based targets\n  target_1 = entry + (risk * 2)    # 2:1 R:R\n  target_2 = entry + (risk * 3)    # 3:1 R:R\n  target_3 = entry + (risk * 5)    # 5:1 R:R\n\n  puts \"Risk-Based Targets:\"\n  puts \"T1 (2:1): #{target_1.round(2)}\"\n  puts \"T2 (3:1): #{target_2.round(2)}\"\n  puts \"T3 (5:1): #{target_3.round(2)}\"\n\n  # Resistance-based target\n  resistance = close[-120..-1].max\n  puts \"\\nResistance target: #{resistance.round(2)}\"\n\n  # Moving average target\n  sma_50 = SQA::TAI.sma(close, period: 50)\n  puts \"50 SMA target: #{sma_50.last.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_3whitesoldiers(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last == 100\n  puts \"Three White Soldiers Pattern Analysis\"\n  puts \"=\" * 60\n\n  # 1. Trend context\n  was_downtrend = close[-4] &lt; sma_50[-4] &amp;&amp; sma_50[-4] &lt; sma_200[-4]\n\n  # 2. Support check\n  support = close[-120..-1].min\n  low_before = low[-4]\n  near_support = (low_before - support).abs &lt; support * 0.03\n\n  # 3. RSI analysis\n  rsi_before = rsi[-4]\n  rsi_oversold = rsi_before &lt; 40\n\n  # 4. Volume analysis\n  avg_vol = volume[-20..-4].sum / 17.0\n  vol_soldiers = [volume[-3], volume[-2], volume[-1]]\n  high_volume = vol_soldiers.all? { |v| v &gt; avg_vol }\n  vol_increasing = vol_soldiers[-1] &gt; vol_soldiers[-2] &amp;&amp;\n                   vol_soldiers[-2] &gt; vol_soldiers[-1]\n\n  # 5. Candle quality\n  body1 = close[-3] - open[-3]\n  body2 = close[-2] - open[-2]\n  body3 = close[-1] - open[-1]\n  bodies = [body1, body2, body3]\n  avg_body = bodies.sum / 3.0\n\n  long_bodies = bodies.all? { |b| b &gt; close[-4] * 0.02 }  # At least 2% bodies\n  consistent = bodies.all? { |b| (b - avg_body).abs &lt; avg_body * 0.4 }\n\n  # 6. Shadow analysis\n  shadow1_low = open[-3] - low[-3]\n  shadow2_low = open[-2] - low[-2]\n  shadow3_low = open[-1] - low[-1]\n\n  minimal_shadows = [shadow1_low, shadow2_low, shadow3_low].all? do |s|\n    s &lt; avg_body * 0.3\n  end\n\n  # 7. Progressive advance\n  proper_opens = open[-2] &lt; close[-3] &amp;&amp; open[-2] &gt; open[-3] &amp;&amp;\n                 open[-1] &lt; close[-2] &amp;&amp; open[-1] &gt; open[-2]\n  progressive_closes = close[-2] &gt; close[-3] &amp;&amp; close[-1] &gt; close[-2]\n\n  # Calculate score\n  score = 0\n  score += 2 if was_downtrend           # Critical\n  score += 2 if near_support             # Very important\n  score += 1 if rsi_oversold\n  score += 1 if high_volume\n  score += 1 if long_bodies\n  score += 1 if consistent\n  score += 1 if minimal_shadows\n  score += 1 if proper_opens &amp;&amp; progressive_closes\n\n  puts \"Quality Checks:\"\n  puts \"1. Downtrend context: #{was_downtrend} #{was_downtrend ? '\u2713\u2713' : '\u2717\u2717'}\"\n  puts \"2. Near support: #{near_support} #{near_support ? '\u2713\u2713' : '\u2717'}\"\n  puts \"3. RSI oversold (#{rsi_before.round(2)}): #{rsi_oversold} #{rsi_oversold ? '\u2713' : '\u2717'}\"\n  puts \"4. High volume: #{high_volume} #{high_volume ? '\u2713' : '\u2717'}\"\n  puts \"5. Long bodies: #{long_bodies} #{long_bodies ? '\u2713' : '\u2717'}\"\n  puts \"6. Consistent size: #{consistent} #{consistent ? '\u2713' : '\u2717'}\"\n  puts \"7. Minimal shadows: #{minimal_shadows} #{minimal_shadows ? '\u2713' : '\u2717'}\"\n  puts \"8. Proper formation: #{proper_opens &amp;&amp; progressive_closes} #{proper_opens &amp;&amp; progressive_closes ? '\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/10\"\n\n  if score &gt;= 7\n    # Calculate trade parameters\n    entry = close.last\n    pattern_low = [low[-3], low[-2], low[-1]].min\n    stop = pattern_low * 0.99\n    risk = entry - stop\n\n    # Find resistance for target\n    resistance = close[-120..-1].max\n    target_resistance = resistance\n    target_rr3 = entry + (risk * 3)\n\n    target = [target_resistance, target_rr3].min  # Use closer target\n    reward = target - entry\n    rr_ratio = (reward / risk).round(1)\n\n    puts \"\\n*** EXCELLENT LONG SETUP ***\"\n    puts \"-\" * 60\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)} (below pattern low)\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)} (#{(reward/entry*100).round(2)}%)\"\n    puts \"R:R Ratio: 1:#{rr_ratio}\"\n\n    # Position sizing (1% account risk)\n    account_size = 100000\n    risk_amount = account_size * 0.01\n    shares = (risk_amount / risk).floor\n    position_value = shares * entry\n\n    puts \"\\nPosition Sizing (1% risk):\"\n    puts \"Shares: #{shares}\"\n    puts \"Position value: $#{position_value.round(2)}\"\n    puts \"Total risk: $#{risk_amount.round(2)}\"\n    puts \"Potential profit: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 5\n    puts \"\\nDECENT SETUP - Consider smaller position\"\n    puts \"Missing some ideal conditions\"\n\n  else\n    puts \"\\nWEAK SETUP - SKIP\"\n    puts \"Too many missing conditions\"\n    puts \"Wait for better opportunity\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_3whitesoldiers/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Moderate (2-3% of the time)</li> <li>Best Timeframes: Daily and Weekly (most reliable)</li> <li>Markets: Works on all markets (stocks, forex, crypto, commodities)</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 78-85% success rate</li> <li>Good pattern: 65-75% success rate</li> <li>Average pattern: 55-65% success rate</li> <li>At support: 80-88% success rate</li> <li>With volume: 72-82% success rate</li> <li>After strong downtrend: 75-85% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#average-move","title":"Average Move","text":"<ul> <li>Initial advance: 8-18% from pattern low</li> <li>Major reversals: 25-45% advance</li> <li>Time to target: 5-20 candles (varies by timeframe)</li> <li>Follow-through: 70% show continued strength</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_3whitesoldiers/#dos","title":"Do's","text":"<ol> <li>Wait for established downtrend before taking signal</li> <li>Verify all three candles have substantial bodies</li> <li>Check for minimal lower shadows (strong buying)</li> <li>Look for increasing or consistently high volume</li> <li>Trade near support for best results</li> <li>Confirm with RSI oversold conditions</li> <li>Use proper stop loss below pattern low</li> <li>Scale out at multiple targets</li> <li>Look for consistent candle sizes</li> <li>Verify proper candle progression (opens within bodies)</li> </ol>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#donts","title":"Don'ts","text":"<ol> <li>Don't trade in existing uptrend (not a reversal there)</li> <li>Don't ignore volume (critical confirmation)</li> <li>Don't trade with long lower shadows (shows selling pressure)</li> <li>Don't enter without stop loss</li> <li>Don't ignore overall market conditions</li> <li>Don't trade if candles are tiny (weak pattern)</li> <li>Don't chase if you missed entry</li> <li>Don't confuse with ordinary advance</li> <li>Don't trade if RSI already overbought</li> <li>Don't risk more than 1-2% account</li> </ol>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Trading in uptrend: Pattern needs downtrend for reversal validity</li> <li>Ignoring candle quality: Bodies must be long and consistent</li> <li>Poor stop placement: Must protect below pattern low</li> <li>No volume confirmation: High volume = high conviction</li> <li>Entering too late: Best entry is at/near pattern completion</li> <li>Ignoring shadows: Long lower shadows = selling pressure</li> <li>Wrong timeframe: More reliable on daily/weekly charts</li> </ol>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_3whitesoldiers/#similar-bullish-patterns","title":"Similar Bullish Patterns","text":"<ul> <li>Three Line Strike - Includes fourth candle</li> <li>Morning Star - Three-candle bullish reversal</li> <li>Three Inside Up - Related three-candle pattern</li> <li>Advance Block - Similar but bearish warning</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#opposite-pattern","title":"Opposite Pattern","text":"<ul> <li>Three Black Crows - Bearish equivalent</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#component-patterns","title":"Component Patterns","text":"<ul> <li>Long Line - Characteristics of each soldier</li> <li>Marubozu - Soldiers often resemble this</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_3whitesoldiers/#perfect-three-white-soldiers","title":"Perfect Three White Soldiers","text":"<ul> <li>All three candles long and similar size</li> <li>Opens within previous bodies (no gaps)</li> <li>Closes at or near highs (minimal shadows)</li> <li>High volume on all three</li> <li>Appears at support after strong downtrend</li> <li>Success Rate: 80-85%</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#good-three-white-soldiers","title":"Good Three White Soldiers","text":"<ul> <li>Long bodies with some variation</li> <li>Mostly minimal shadows</li> <li>Good volume</li> <li>Clear downtrend context</li> <li>Success Rate: 65-75%</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#weak-three-white-soldiers","title":"Weak Three White Soldiers","text":"<ul> <li>Variable candle sizes</li> <li>Long lower shadows (buying hesitation)</li> <li>Low volume</li> <li>No clear downtrend</li> <li>Not at support</li> <li>Success Rate: 45-55%</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#modified-patterns","title":"Modified Patterns","text":"<ul> <li>Identical Three Soldiers: All three nearly same size (stronger)</li> <li>Deliberate Three Soldiers: Small gaps between soldiers (weaker)</li> </ul>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#advanced-concepts","title":"Advanced Concepts","text":""},{"location":"indicators/patterns/cdl_3whitesoldiers/#soldier-quality-score","title":"Soldier Quality Score","text":"<pre><code>def score_three_white_soldiers(open, high, low, close, volume)\n  return 0 unless pattern.last == 100\n\n  score = 0\n\n  # Body length (0-2 points)\n  bodies = [-3, -2, -1].map { |i| close[i] - open[i] }\n  avg_body = bodies.sum / 3.0\n  score += 2 if avg_body &gt; close.last * 0.025  # 2.5%+ bodies\n  score += 1 if avg_body &gt; close.last * 0.015  # 1.5%+ bodies\n\n  # Consistency (0-2 points)\n  std_dev = Math.sqrt(bodies.sum { |b| (b - avg_body)**2 } / 3)\n  score += 2 if std_dev &lt; avg_body * 0.2   # Very consistent\n  score += 1 if std_dev &lt; avg_body * 0.4   # Fairly consistent\n\n  # Shadow analysis (0-2 points)\n  shadows = [-3, -2, -1].map { |i| open[i] - low[i] }\n  score += 2 if shadows.all? { |s| s &lt; avg_body * 0.2 }\n  score += 1 if shadows.all? { |s| s &lt; avg_body * 0.4 }\n\n  # Volume (0-2 points)\n  avg_vol = volume[-20..-4].sum / 17.0\n  soldier_vols = volume[-3..-1]\n  score += 2 if soldier_vols.all? { |v| v &gt; avg_vol * 1.3 }\n  score += 1 if soldier_vols.all? { |v| v &gt; avg_vol }\n\n  # Formation (0-2 points)\n  proper_form = open[-2] &lt; close[-3] &amp;&amp; open[-2] &gt; open[-3] &amp;&amp;\n                open[-1] &lt; close[-2] &amp;&amp; open[-1] &gt; open[-2] &amp;&amp;\n                close[-2] &gt; close[-3] &amp;&amp; close[-1] &gt; close[-2]\n  score += 2 if proper_form\n\n  score  # 0-10\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Highly reliable when all conditions present (downtrend, support, volume)</li> <li>Three is key - shows persistence, not just one-off buying</li> <li>Context critical - must follow downtrend for reversal signal</li> <li>Quality matters - long consistent bodies with minimal shadows</li> <li>Volume confirms - high volume shows conviction</li> <li>Stop protection - always use stop below pattern low</li> <li>Patient entry - best results with confirmation</li> <li>Multiple targets - scale out as pattern plays out</li> <li>Risk management - never risk more than 1-2% per trade</li> <li>Best at support - successful bounce = strongest signal</li> </ol>"},{"location":"indicators/patterns/cdl_3whitesoldiers/#see-also","title":"See Also","text":"<ul> <li>Three Black Crows - Bearish counterpart</li> <li>Three Line Strike - Four-candle version</li> <li>Morning Star - Three-candle reversal</li> <li>Three Inside Up - Related pattern</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/","title":"Abandoned Baby Pattern","text":"<p>The Abandoned Baby is an extremely rare but highly reliable three-candle reversal pattern that signals major trend reversals. It consists of a doji that gaps away from both the preceding and following candles, creating an \"island\" effect. The pattern resembles a baby abandoned on an island, hence its name, and represents a dramatic shift in market sentiment.</p>"},{"location":"indicators/patterns/cdl_abandonedbaby/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (Bullish or Bearish)</li> <li>Candles Required: 3</li> <li>Trend Context: Appears at trend extremes (tops or bottoms)</li> <li>Reliability: Extremely High (one of the most reliable reversal patterns)</li> <li>Frequency: Very Rare (appears less than 0.5% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Bullish Abandoned Baby example\nopen  = [95.0, 92.0, 89.0, 89.5, 93.0]\nhigh  = [95.5, 92.5, 89.2, 89.7, 94.0]\nlow   = [91.0, 88.5, 88.8, 89.3, 92.5]\nclose = [92.0, 89.0, 89.1, 89.5, 93.5]\n\n# Detect Abandoned Baby pattern\npattern = SQA::TAI.cdl_abandonedbaby(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Bullish Abandoned Baby detected - Extremely rare reversal!\"\nelsif pattern.last == -100\n  puts \"Bearish Abandoned Baby detected - Major top signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_abandonedbaby/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Abandoned Baby pattern detected - +100: Bullish Abandoned Baby pattern (bullish reversal signal) - -100: Bearish Abandoned Baby pattern (bearish reversal signal)</p>"},{"location":"indicators/patterns/cdl_abandonedbaby/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_abandonedbaby/#bullish-abandoned-baby-bottom-reversal","title":"Bullish Abandoned Baby (Bottom Reversal)","text":"<ol> <li>First Candle: Long bearish candle in downtrend</li> <li>Strong selling pressure</li> <li> <p>Continues the prevailing downtrend</p> </li> <li> <p>Second Candle: Doji that gaps DOWN</p> </li> <li>Opens and closes at approximately same level</li> <li>Gaps below the first candle (no overlap)</li> <li>High does NOT touch low of first candle</li> <li> <p>Represents indecision at extreme</p> </li> <li> <p>Third Candle: Long bullish candle that gaps UP</p> </li> <li>Opens above the doji</li> <li>Low does NOT touch high of doji</li> <li>Strong buying pressure</li> <li>Ideally closes above first candle's midpoint</li> </ol>"},{"location":"indicators/patterns/cdl_abandonedbaby/#bearish-abandoned-baby-top-reversal","title":"Bearish Abandoned Baby (Top Reversal)","text":"<ol> <li>First Candle: Long bullish candle in uptrend</li> <li>Strong buying pressure</li> <li> <p>Continues the prevailing uptrend</p> </li> <li> <p>Second Candle: Doji that gaps UP</p> </li> <li>Opens and closes at approximately same level</li> <li>Gaps above the first candle (no overlap)</li> <li>Low does NOT touch high of first candle</li> <li> <p>Represents indecision at extreme</p> </li> <li> <p>Third Candle: Long bearish candle that gaps DOWN</p> </li> <li>Opens below the doji</li> <li>High does NOT touch low of doji</li> <li>Strong selling pressure</li> <li>Ideally closes below first candle's midpoint</li> </ol>"},{"location":"indicators/patterns/cdl_abandonedbaby/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Complete gap isolation: Doji must gap away from both candles</li> <li>True doji: Middle candle should be a doji (open \u2248 close)</li> <li>Island formation: Doji appears isolated like an island</li> <li>Strong reversal candles: First and third candles should be long</li> <li>Volume spike: Often see volume increase on third candle</li> <li>Extreme positioning: Pattern appears at trend extremes</li> <li>Psychological significance: Represents complete sentiment reversal</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Perfect doji: Middle candle is a perfect doji</li> <li>Clean gaps: No shadow overlap between candles</li> <li>Long candles: First and third candles are significant</li> <li>Volume confirmation: High volume on reversal candle</li> <li>Trend exhaustion: Clear overextended trend before pattern</li> <li>Support/Resistance: Forms at key technical levels</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Bullish Abandoned Baby (Bottom):\n\n          [====]         Third: Long white (gaps up from doji)\n           |   |\n\n            [=]          Second: Doji (gapped island)\n            | |\n\n       [====]            First: Long black (downtrend)\n        |   |\n\nBaby abandoned on island, rescued by buyers\n\n\nBearish Abandoned Baby (Top):\n\n       [====]            First: Long white (uptrend)\n        |   |\n\n            [=]          Second: Doji (gapped island)\n            | |\n\n          [====]         Third: Long black (gaps down from doji)\n           |   |\n\nBaby abandoned on island, then falls\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#interpretation","title":"Interpretation","text":"<p>The Abandoned Baby signals dramatic reversal through:</p> <ol> <li>Exhaustion: First candle shows trend reaching extreme</li> <li>Confusion: Gapped doji shows market completely uncertain</li> <li>Isolation: Gaps on both sides show complete abandonment of price</li> <li>Reversal: Third candle shows new trend beginning forcefully</li> <li>Island Reversal: Pattern creates an \"island\" of indecision</li> <li>Sentiment Shift: Represents complete change in market psychology</li> </ol>"},{"location":"indicators/patterns/cdl_abandonedbaby/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Strength Weak trend Clear trend Strong/extended trend Doji Quality Not true doji Small body Perfect doji Gap Quality Partial gaps Clean gaps Large gaps Candle Size Small bodies Medium bodies Long bodies Volume Low/normal Increasing High spike on 3<sup>rd</sup> Technical Level Random Near S/R At major S/R"},{"location":"indicators/patterns/cdl_abandonedbaby/#example-bullish-abandoned-baby-at-bottom","title":"Example: Bullish Abandoned Baby at Bottom","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_abandonedbaby(open, high, low, close)\nsma_200 = SQA::TAI.sma(close, period: 200)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == 100\n  puts \"RARE: Bullish Abandoned Baby detected!\"\n\n  # Verify downtrend context\n  extended_downtrend = close[-4] &lt; sma_200[-4] &amp;&amp;\n                       close[-10] &gt; close[-4]\n\n  # Verify gap isolation\n  first_low = low[-3]\n  doji_high = high[-2]\n  doji_low = low[-2]\n  third_low = low[-1]\n\n  gap_down = doji_high &lt; first_low\n  gap_up = third_low &gt; doji_high\n\n  puts \"\\nGap Analysis:\"\n  puts \"Gap down from first: #{gap_down}\"\n  puts \"Gap up to third: #{gap_up}\"\n\n  if gap_down &amp;&amp; gap_up\n    puts \"PERFECT ISOLATION - True Abandoned Baby!\"\n  end\n\n  # Check doji quality\n  doji_body = (close[-2] - open[-2]).abs\n  doji_range = high[-2] - low[-2]\n  doji_quality = doji_body / doji_range\n\n  if doji_quality &lt; 0.1\n    puts \"\\nExcellent doji (body = #{(doji_quality*100).round(1)}% of range)\"\n  end\n\n  if extended_downtrend &amp;&amp; gap_down &amp;&amp; gap_up\n    puts \"\\n*** TEXTBOOK ABANDONED BABY ***\"\n    puts \"Extremely rare and reliable reversal\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n\n    if rsi.last &lt; 30\n      puts \"OVERSOLD + Abandoned Baby = VERY STRONG signal\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#example-bearish-abandoned-baby-at-top","title":"Example: Bearish Abandoned Baby at Top","text":"<pre><code>open, high, low, close = load_ohlc_data('TSLA')\n\npattern = SQA::TAI.cdl_abandonedbaby(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == -100\n  puts \"RARE: Bearish Abandoned Baby detected!\"\n\n  # Verify uptrend context\n  extended_uptrend = close[-4] &gt; sma_50[-4] &amp;&amp;\n                     close[-4] &gt; close[-10]\n\n  # Verify gaps\n  first_high = high[-3]\n  doji_low = low[-2]\n  doji_high = high[-2]\n  third_high = high[-1]\n\n  gap_up = doji_low &gt; first_high\n  gap_down = third_high &lt; doji_low\n\n  puts \"\\nGap Analysis:\"\n  puts \"Gap up from first: #{gap_up}\"\n  puts \"Gap down to third: #{gap_down}\"\n\n  if gap_up &amp;&amp; gap_down\n    puts \"PERFECT ISOLATION - True Abandoned Baby!\"\n  end\n\n  # Check for overbought\n  if rsi[-2] &gt; 70\n    puts \"Doji formed in OVERBOUGHT territory\"\n    puts \"Current RSI: #{rsi.last.round(2)}\"\n    puts \"VERY STRONG bearish reversal signal\"\n  end\n\n  if extended_uptrend &amp;&amp; gap_up &amp;&amp; gap_down\n    puts \"\\n*** MAJOR TOPPING PATTERN ***\"\n    puts \"Extremely reliable reversal signal\"\n    puts \"Consider protecting long positions\"\n\n    # Calculate potential downside\n    recent_low = close[-30..-1].min\n    potential_decline = ((close.last - recent_low) / close.last * 100).round(2)\n    puts \"Potential decline to recent low: #{potential_decline}%\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#example-volume-confirmation","title":"Example: Volume Confirmation","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('NVDA')\n\npattern = SQA::TAI.cdl_abandonedbaby(open, high, low, close)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n  puts \"#{direction} Abandoned Baby detected\"\n\n  # Analyze volume through pattern\n  vol1 = volume[-3]  # Trend candle\n  vol2 = volume[-2]  # Doji\n  vol3 = volume[-1]  # Reversal candle\n  avg_vol = volume[-20..-4].sum / 17.0\n\n  puts \"\\nVolume Analysis:\"\n  puts \"Trend candle: #{vol1.round(0)} (#{(vol1/avg_vol).round(2)}x avg)\"\n  puts \"Doji: #{vol2.round(0)} (#{(vol2/avg_vol).round(2)}x avg)\"\n  puts \"Reversal: #{vol3.round(0)} (#{(vol3/avg_vol).round(2)}x avg)\"\n\n  # Ideal: low volume on doji, high on reversal\n  low_doji_vol = vol2 &lt; avg_vol\n  high_reversal_vol = vol3 &gt; avg_vol * 1.5\n\n  if low_doji_vol &amp;&amp; high_reversal_vol\n    puts \"\\nIDEAL VOLUME PATTERN:\"\n    puts \"- Low volume on doji (indecision)\"\n    puts \"- High volume on reversal (conviction)\"\n    puts \"EXTREMELY STRONG signal\"\n  elsif high_reversal_vol\n    puts \"\\nGOOD: High volume on reversal\"\n    puts \"Strong conviction in new direction\"\n  elsif low_doji_vol\n    puts \"\\nDECENT: Low volume on doji\"\n    puts \"Shows genuine indecision\"\n  else\n    puts \"\\nWARNING: No volume confirmation\"\n    puts \"Pattern less reliable\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#example-gap-quality-analysis","title":"Example: Gap Quality Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_abandonedbaby(open, high, low, close)\n\nif pattern.last == 100  # Bullish\n  puts \"Bullish Abandoned Baby - Gap Analysis\"\n\n  # Measure gap sizes\n  first_low = low[-3]\n  doji_high = high[-2]\n  doji_low = low[-2]\n  third_low = low[-1]\n\n  gap1_size = first_low - doji_high\n  gap2_size = third_low - doji_high\n\n  gap1_pct = (gap1_size / first_low * 100).round(2)\n  gap2_pct = (gap2_size / doji_high * 100).round(2)\n\n  puts \"\\nGap 1 (down): $#{gap1_size.round(2)} (#{gap1_pct}%)\"\n  puts \"Gap 2 (up): $#{gap2_size.round(2)} (#{gap2_pct}%)\"\n\n  if gap1_size &gt; 0 &amp;&amp; gap2_size &gt; 0\n    puts \"\\nBoth gaps present - TRUE Abandoned Baby\"\n\n    if gap1_pct &gt; 0.5 &amp;&amp; gap2_pct &gt; 0.5\n      puts \"Significant gaps (&gt;0.5%)\"\n      puts \"VERY STRONG pattern\"\n    elsif gap1_pct &gt; 0.1 &amp;&amp; gap2_pct &gt; 0.1\n      puts \"Clear gaps present\"\n      puts \"STRONG pattern\"\n    else\n      puts \"Small gaps\"\n      puts \"Decent pattern but gaps could be larger\"\n    end\n  else\n    puts \"\\nWARNING: Not true Abandoned Baby\"\n    puts \"Gaps must be present on both sides\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_abandonedbaby/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_abandonedbaby/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation after pattern\nif pattern[-2] != 0  # Pattern 2 candles ago\n  direction = pattern[-2]\n\n  if direction &gt; 0  # Bullish\n    # Confirm upward momentum\n    if close[-1] &gt; close[-2] &amp;&amp; close.last &gt;= close[-1]\n      puts \"Bullish Abandoned Baby CONFIRMED\"\n      entry = close.last\n      puts \"Enter LONG at #{entry.round(2)}\"\n    end\n  else  # Bearish\n    # Confirm downward momentum\n    if close[-1] &lt; close[-2] &amp;&amp; close.last &lt;= close[-1]\n      puts \"Bearish Abandoned Baby CONFIRMED\"\n      entry = close.last\n      puts \"Enter SHORT at #{entry.round(2)}\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter immediately on pattern completion\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"LONG\" : \"SHORT\"\n  entry = close.last\n\n  puts \"Abandoned Baby completed - Enter #{direction}\"\n  puts \"Entry: #{entry.round(2)}\"\n  puts \"Note: Extremely rare pattern justifies aggressive entry\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#pullback-entry","title":"Pullback Entry","text":"<pre><code># Wait for pullback to doji level\nif pattern[-3..-1].any? { |p| p != 0 }\n  pattern_idx = (-3..-1).find { |i| pattern[i] != 0 }\n  doji_level = (high[-2] + low[-2]) / 2.0\n\n  if pattern[pattern_idx] &gt; 0  # Bullish\n    # Enter on pullback near doji\n    if close.last &gt; doji_level &amp;&amp; low.last &lt;= doji_level * 1.01\n      puts \"Bullish pullback to doji level\"\n      puts \"Entry: #{close.last.round(2)}\"\n    end\n  else  # Bearish\n    # Enter on rally near doji\n    if close.last &lt; doji_level &amp;&amp; high.last &gt;= doji_level * 0.99\n      puts \"Bearish rally to doji level\"\n      puts \"Entry: #{close.last.round(2)}\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last != 0\n  if pattern.last &gt; 0  # Bullish\n    # Stop below doji or pattern low\n    doji_low = low[-2]\n    pattern_low = [low[-3], low[-2], low[-1]].min\n\n    stop = pattern_low * 0.99  # 1% buffer\n\n    puts \"Stop loss: #{stop.round(2)}\"\n    puts \"Below pattern low (invalidation point)\"\n\n    # Alternative: tighter stop below doji only\n    tight_stop = doji_low * 0.995\n    puts \"Tighter stop: #{tight_stop.round(2)} (below doji)\"\n\n  else  # Bearish\n    # Stop above doji or pattern high\n    doji_high = high[-2]\n    pattern_high = [high[-3], high[-2], high[-1]].max\n\n    stop = pattern_high * 1.01  # 1% buffer\n\n    puts \"Stop loss: #{stop.round(2)}\"\n    puts \"Above pattern high (invalidation point)\"\n\n    # Alternative: tighter stop above doji only\n    tight_stop = doji_high * 1.005\n    puts \"Tighter stop: #{tight_stop.round(2)} (above doji)\"\n  end\n\n  # Calculate risk\n  entry = close.last\n  risk = (entry - stop).abs\n  risk_pct = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_pct}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last != 0\n  entry = close.last\n\n  if pattern.last &gt; 0  # Bullish\n    pattern_low = [low[-3], low[-2], low[-1]].min\n    stop = pattern_low * 0.99\n    risk = entry - stop\n\n    # Risk-based targets\n    target_1 = entry + (risk * 2)\n    target_2 = entry + (risk * 3)\n    target_3 = entry + (risk * 5)  # Rare pattern justifies\n\n    puts \"Bullish Targets:\"\n    puts \"T1 (2R): #{target_1.round(2)}\"\n    puts \"T2 (3R): #{target_2.round(2)}\"\n    puts \"T3 (5R): #{target_3.round(2)}\"\n\n    # Technical targets\n    resistance = close[-60..-1].max\n    puts \"\\nResistance: #{resistance.round(2)}\"\n\n  else  # Bearish\n    pattern_high = [high[-3], high[-2], high[-1]].max\n    stop = pattern_high * 1.01\n    risk = stop - entry\n\n    # Risk-based targets\n    target_1 = entry - (risk * 2)\n    target_2 = entry - (risk * 3)\n    target_3 = entry - (risk * 5)\n\n    puts \"Bearish Targets:\"\n    puts \"T1 (2R): #{target_1.round(2)}\"\n    puts \"T2 (3R): #{target_2.round(2)}\"\n    puts \"T3 (5R): #{target_3.round(2)}\"\n\n    # Technical targets\n    support = close[-60..-1].min\n    puts \"\\nSupport: #{support.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_abandonedbaby(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n\n  puts \"#{direction} Abandoned Baby Pattern Analysis\"\n  puts \"=\" * 60\n  puts \"(EXTREMELY RARE PATTERN - High significance)\"\n\n  # 1. Trend context\n  if pattern.last &gt; 0\n    downtrend = close[-4] &lt; sma_50[-4] &amp;&amp; sma_50[-4] &lt; sma_200[-4]\n    extended = close[-10] &gt; close[-4]\n    context_score = downtrend &amp;&amp; extended\n  else\n    uptrend = close[-4] &gt; sma_50[-4] &amp;&amp; sma_50[-4] &gt; sma_200[-4]\n    extended = close[-4] &gt; close[-10]\n    context_score = uptrend &amp;&amp; extended\n  end\n\n  # 2. Gap quality\n  if pattern.last &gt; 0\n    gap1 = low[-3] - high[-2]\n    gap2 = low[-1] - high[-2]\n  else\n    gap1 = low[-2] - high[-3]\n    gap2 = low[-2] - high[-1]\n  end\n\n  both_gaps = gap1 &gt; 0 &amp;&amp; gap2 &gt; 0\n  significant_gaps = gap1 &gt; close[-2] * 0.003 &amp;&amp; gap2 &gt; close[-2] * 0.003\n\n  # 3. Doji quality\n  doji_body = (close[-2] - open[-2]).abs\n  doji_range = high[-2] - low[-2]\n  doji_ratio = doji_range &gt; 0 ? doji_body / doji_range : 1\n  perfect_doji = doji_ratio &lt; 0.1\n\n  # 4. Candle size\n  body1 = (close[-3] - open[-3]).abs\n  body3 = (close[-1] - open[-1]).abs\n  avg_body = (body1 + body3) / 2.0\n  long_candles = avg_body &gt; close[-1] * 0.02\n\n  # 5. Volume\n  vol1, vol2, vol3 = volume[-3], volume[-2], volume[-1]\n  avg_vol = volume[-20..-4].sum / 17.0\n  low_doji_vol = vol2 &lt; avg_vol\n  high_reversal_vol = vol3 &gt; avg_vol * 1.3\n\n  # 6. RSI extreme\n  if pattern.last &gt; 0\n    extreme = rsi[-2] &lt; 30\n  else\n    extreme = rsi[-2] &gt; 70\n  end\n\n  # Calculate quality score\n  score = 0\n  score += 3 if context_score         # Critical\n  score += 3 if both_gaps             # Critical\n  score += 2 if significant_gaps      # Very important\n  score += 2 if perfect_doji          # Very important\n  score += 1 if long_candles\n  score += 1 if low_doji_vol\n  score += 2 if high_reversal_vol     # Important\n  score += 2 if extreme               # Important\n\n  puts \"\\nQuality Checks:\"\n  puts \"1. Trend context: #{context_score} #{context_score ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"2. Both gaps present: #{both_gaps} #{both_gaps ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"3. Significant gaps: #{significant_gaps} #{significant_gaps ? '\u2713\u2713' : '\u2717'}\"\n  puts \"4. Perfect doji (#{(doji_ratio*100).round(1)}%): #{perfect_doji} #{perfect_doji ? '\u2713\u2713' : '\u2717'}\"\n  puts \"5. Long reversal candles: #{long_candles} #{long_candles ? '\u2713' : '\u2717'}\"\n  puts \"6. Low doji volume: #{low_doji_vol} #{low_doji_vol ? '\u2713' : '\u2717'}\"\n  puts \"7. High reversal volume: #{high_reversal_vol} #{high_reversal_vol ? '\u2713\u2713' : '\u2717'}\"\n  puts \"8. RSI extreme: #{extreme} #{extreme ? '\u2713\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/16\"\n\n  if score &gt;= 11\n    # Calculate trade\n    entry = close.last\n\n    if pattern.last &gt; 0\n      pattern_low = [low[-3], low[-2], low[-1]].min\n      stop = pattern_low * 0.99\n      risk = entry - stop\n      resistance = close[-60..-1].max\n      target = resistance\n      reward = target - entry\n    else\n      pattern_high = [high[-3], high[-2], high[-1]].max\n      stop = pattern_high * 1.01\n      risk = stop - entry\n      support = close[-60..-1].min\n      target = support\n      reward = entry - target\n    end\n\n    rr = (reward / risk).round(1)\n\n    puts \"\\n*** EXCEPTIONAL SETUP (Extremely Rare!) ***\"\n    puts \"-\" * 60\n    puts \"Direction: #{direction}\"\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)} (#{(reward/entry*100).round(2)}%)\"\n    puts \"R:R: 1:#{rr}\"\n\n    # Position sizing (larger size for rare high-quality pattern)\n    account = 100000\n    risk_amount = account * 0.025  # 2.5% for exceptional pattern\n    shares = (risk_amount / risk).floor\n\n    puts \"\\nPosition Sizing (2.5% risk - rare pattern):\"\n    puts \"Shares: #{shares}\"\n    puts \"Position: $#{(shares * entry).round(2)}\"\n    puts \"Risk: $#{risk_amount.round(2)}\"\n    puts \"Potential profit: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 8\n    puts \"\\nGOOD SETUP - Still valuable\"\n    puts \"Rare pattern with decent quality\"\n\n  else\n    puts \"\\nWEAK SETUP - Pattern incomplete\"\n    puts \"Missing critical elements\"\n    puts \"May not be true Abandoned Baby\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_abandonedbaby/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Extremely Rare (less than 0.5% of the time)</li> <li>Best Timeframes: Daily and Weekly charts (most reliable)</li> <li>Markets: Works on all markets but most common in volatile stocks</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 88-95% success rate</li> <li>Good pattern: 78-88% success rate</li> <li>Average pattern: 68-78% success rate</li> <li>With volume: 85-92% success rate</li> <li>At major S/R: 90-96% success rate</li> <li>RSI extreme: 86-93% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#average-move","title":"Average Move","text":"<ul> <li>Initial reversal: 15-30% from pattern</li> <li>Major reversals: 40-70% move</li> <li>Time to target: 15-40 candles</li> <li>Follow-through: 88% show strong continuation</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_abandonedbaby/#dos","title":"Do's","text":"<ol> <li>Recognize extreme rarity - this is special</li> <li>Verify complete gap isolation on both sides</li> <li>Confirm middle candle is true doji</li> <li>Check for extended trend before pattern</li> <li>Look for volume confirmation</li> <li>Trade at major support/resistance for best results</li> <li>Use RSI to confirm extremes</li> <li>Take position seriously - pattern very reliable</li> <li>Consider larger position due to high reliability</li> <li>Document the pattern - learn from it</li> </ol>"},{"location":"indicators/patterns/cdl_abandonedbaby/#donts","title":"Don'ts","text":"<ol> <li>Don't confuse with Morning/Evening Star (those touch)</li> <li>Don't trade without complete gaps</li> <li>Don't ignore doji quality</li> <li>Don't trade if first/third candles are small</li> <li>Don't skip confirmation in uncertain setups</li> <li>Don't use tight stops - pattern needs room</li> <li>Don't ignore if it appears - too rare and reliable</li> <li>Don't overtrade - wait for perfect setup</li> <li>Don't miss the opportunity when it appears</li> <li>Don't underestimate pattern significance</li> </ol>"},{"location":"indicators/patterns/cdl_abandonedbaby/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Misidentification: Must have gaps on BOTH sides</li> <li>Accepting shadows touching: Not true if shadows overlap</li> <li>Wrong trend context: Needs extended trend</li> <li>Ignoring doji quality: Middle must be true doji</li> <li>Poor stop placement: Must protect pattern structure</li> <li>Ignoring rarity: Extreme rarity adds to reliability</li> <li>No volume check: Volume confirms conviction</li> </ol>"},{"location":"indicators/patterns/cdl_abandonedbaby/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_abandonedbaby/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Morning Star - Similar but candles touch</li> <li>Evening Star - Similar but candles touch</li> <li>Morning Doji Star - One gap only</li> <li>Evening Doji Star - One gap only</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#component-patterns","title":"Component Patterns","text":"<ul> <li>Doji - Middle candle characteristics</li> <li>Long Line - First and third candle traits</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_abandonedbaby/#perfect-abandoned-baby","title":"Perfect Abandoned Baby","text":"<ul> <li>Extended trend before pattern</li> <li>Perfect doji in middle</li> <li>Complete gaps on both sides (no shadow overlap)</li> <li>Long first and third candles</li> <li>Low volume on doji, high on reversal</li> <li>At major support/resistance</li> <li>RSI at extreme</li> <li>Success Rate: 90-96%</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#good-abandoned-baby","title":"Good Abandoned Baby","text":"<ul> <li>Clear trend context</li> <li>Small body doji</li> <li>Clean gaps present</li> <li>Decent candle sizes</li> <li>Some volume confirmation</li> <li>Success Rate: 78-88%</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#weak-abandoned-baby","title":"Weak Abandoned Baby","text":"<ul> <li>Unclear trend</li> <li>Large doji body</li> <li>Small or questionable gaps</li> <li>Small reversal candles</li> <li>No volume confirmation</li> <li>Success Rate: 60-70%</li> </ul>"},{"location":"indicators/patterns/cdl_abandonedbaby/#advanced-concepts","title":"Advanced Concepts","text":""},{"location":"indicators/patterns/cdl_abandonedbaby/#pattern-quality-scorer","title":"Pattern Quality Scorer","text":"<pre><code>def score_abandoned_baby(open, high, low, close, volume)\n  return 0 if pattern.last == 0\n\n  score = 0\n  direction = pattern.last &gt; 0 ? 1 : -1\n\n  # Gap isolation (0-4 points)\n  if direction &gt; 0\n    gap1 = low[-3] - high[-2]\n    gap2 = low[-1] - high[-2]\n  else\n    gap1 = low[-2] - high[-3]\n    gap2 = low[-2] - high[-1]\n  end\n\n  if gap1 &gt; 0 &amp;&amp; gap2 &gt; 0\n    score += 2  # Both gaps present\n    score += 2 if gap1 &gt; close[-2] * 0.005 &amp;&amp; gap2 &gt; close[-2] * 0.005\n  end\n\n  # Doji quality (0-3 points)\n  doji_body = (close[-2] - open[-2]).abs\n  doji_range = high[-2] - low[-2]\n  doji_ratio = doji_range &gt; 0 ? doji_body / doji_range : 1\n\n  score += 3 if doji_ratio &lt; 0.05   # Perfect doji\n  score += 2 if doji_ratio &lt; 0.1    # Very good doji\n  score += 1 if doji_ratio &lt; 0.2    # Acceptable doji\n\n  # Candle strength (0-2 points)\n  body1 = (close[-3] - open[-3]).abs\n  body3 = (close[-1] - open[-1]).abs\n  avg_body = (body1 + body3) / 2.0\n\n  score += 2 if avg_body &gt; close[-1] * 0.025\n  score += 1 if avg_body &gt; close[-1] * 0.015\n\n  # Volume (0-3 points)\n  avg_vol = volume[-20..-4].sum / 17.0\n  score += 1 if volume[-2] &lt; avg_vol\n  score += 2 if volume[-1] &gt; avg_vol * 1.5\n\n  score  # 0-12\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_abandonedbaby/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Extremely rare - most traders never see one</li> <li>Highly reliable - one of best reversal patterns</li> <li>Gap isolation critical - distinguishes from Star patterns</li> <li>Perfect doji essential - middle candle must be true doji</li> <li>Island formation - creates isolated price area</li> <li>Volume confirmation - adds conviction</li> <li>Major reversals - signals significant trend changes</li> <li>Don't ignore - too rare and reliable to miss</li> <li>Needs room - don't use tight stops</li> <li>Document it - learn from these rare opportunities</li> </ol>"},{"location":"indicators/patterns/cdl_abandonedbaby/#see-also","title":"See Also","text":"<ul> <li>Morning Star - Similar without gaps</li> <li>Evening Star - Similar without gaps</li> <li>Doji - Middle candle pattern</li> <li>Morning Doji Star - One gap version</li> <li>Evening Doji Star - One gap version</li> <li>Three Stars in the South - Another rare pattern</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/","title":"Advance Block Pattern","text":"<p>The Advance Block is a three-candle bearish reversal pattern that appears during an uptrend and signals weakening bullish momentum. It consists of three consecutive white (bullish) candles where each subsequent candle shows diminishing strength - smaller bodies, longer upper shadows, and declining momentum. This pattern is considered a warning of an impending trend reversal rather than an immediate signal.</p>"},{"location":"indicators/patterns/cdl_advanceblock/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (Bearish)</li> <li>Candles Required: 3</li> <li>Trend Context: Appears during uptrends</li> <li>Reliability: Moderate to High</li> <li>Frequency: Uncommon (appears 2-3% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Advance Block example\nopen  = [95.0, 97.0, 98.5, 99.2, 99.4]\nhigh  = [97.5, 99.0, 100.0, 100.2, 100.0]\nlow   = [94.5, 96.5, 98.0, 98.8, 99.0]\nclose = [97.0, 98.5, 99.5, 99.7, 99.5]\n\n# Detect Advance Block pattern\npattern = SQA::TAI.cdl_advanceblock(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Advance Block detected - Uptrend losing steam!\"\n  puts \"Warning: Potential reversal ahead\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_advanceblock/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Advance Block pattern detected - -100: Advance Block pattern detected (bearish reversal warning)</p>"},{"location":"indicators/patterns/cdl_advanceblock/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_advanceblock/#advance-block-bearish-warning","title":"Advance Block (Bearish Warning)","text":"<ol> <li>First Candle: Long white candle</li> <li>Strong bullish body</li> <li>Continues the uptrend</li> <li>Relatively small upper shadow</li> <li> <p>Normal or high volume</p> </li> <li> <p>Second Candle: Medium white candle</p> </li> <li>Opens within first candle's body</li> <li>Body is smaller than first candle</li> <li>Upper shadow is longer than first</li> <li>Close is higher but momentum weakening</li> <li> <p>Volume typically declining</p> </li> <li> <p>Third Candle: Small white candle</p> </li> <li>Opens within second candle's body</li> <li>Body is smaller than second candle</li> <li>Upper shadow is longest of three</li> <li>Close barely advances</li> <li>Volume further declining</li> <li>Shows exhaustion</li> </ol>"},{"location":"indicators/patterns/cdl_advanceblock/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Progressive weakening: Each candle shows less strength</li> <li>Diminishing bodies: Body size decreases with each candle</li> <li>Lengthening shadows: Upper shadows increase progressively</li> <li>Declining volume: Volume typically decreases through pattern</li> <li>Higher closes: All three candles close higher than previous</li> <li>Within bodies: Each open is within previous body</li> <li>Uptrend context: Must occur during established uptrend</li> <li>Exhaustion signal: Buyers losing control gradually</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Clear progression: Obvious decrease in body sizes</li> <li>Long upper shadows: Third candle has significant upper shadow</li> <li>Volume decline: Clear volume reduction through pattern</li> <li>Extended uptrend: Pattern appears after strong rally</li> <li>Consecutive candles: All three are consecutive white candles</li> <li>Resistance level: Forms at or near key resistance</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Advance Block (Bearish Warning):\n\n       |           Third: Small white, long upper shadow\n      [=]                (buyers exhausted)\n       |\n       |\n      |\n     [==]         Second: Medium white, longer shadow\n      |                  (momentum fading)\n      |\n\n    [====]        First: Long white candle\n     |  |               (strong but last push)\n\n\nProgressively smaller bodies and longer shadows\nBuyers advancing but losing strength\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#interpretation","title":"Interpretation","text":"<p>The Advance Block signals trend exhaustion through:</p> <ol> <li>Diminishing Power: Each candle shows less buying power</li> <li>Shadow Extension: Increasing upper shadows show rejection</li> <li>Volume Decline: Decreasing participation signals weakness</li> <li>Buyer Exhaustion: Bulls unable to sustain momentum</li> <li>Distribution: Early warning of potential distribution</li> <li>Caution Signal: Time to protect long positions</li> </ol>"},{"location":"indicators/patterns/cdl_advanceblock/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Strength Weak uptrend Clear uptrend Strong/extended uptrend Body Progression Irregular sizes Some decrease Clear progressive decrease Shadow Growth No pattern Some increase Clear progressive increase Volume Pattern No decline Some decline Clear volume decline Resistance Level Random location Near resistance At major resistance Prior Rally Weak Moderate Strong/extended"},{"location":"indicators/patterns/cdl_advanceblock/#example-advance-block-at-resistance","title":"Example: Advance Block at Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_advanceblock(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == -100\n  puts \"Advance Block detected!\"\n\n  # Verify uptrend context\n  uptrend = close[-4] &gt; sma_50[-4] &amp;&amp;\n            close[-4] &gt; close[-10]\n\n  # Analyze candle progression\n  body1 = (close[-3] - open[-3]).abs\n  body2 = (close[-2] - open[-2]).abs\n  body3 = (close[-1] - open[-1]).abs\n\n  puts \"\\nBody Size Analysis:\"\n  puts \"First candle: $#{body1.round(2)}\"\n  puts \"Second candle: $#{body2.round(2)} (#{((body2/body1)*100).round(1)}% of first)\"\n  puts \"Third candle: $#{body3.round(2)} (#{((body3/body2)*100).round(1)}% of second)\"\n\n  if body1 &gt; body2 &amp;&amp; body2 &gt; body3\n    puts \"\\nCLEAR PROGRESSION - bodies decreasing\"\n  end\n\n  # Analyze upper shadows\n  shadow1 = high[-3] - close[-3]\n  shadow2 = high[-2] - close[-2]\n  shadow3 = high[-1] - close[-1]\n\n  puts \"\\nUpper Shadow Analysis:\"\n  puts \"First: $#{shadow1.round(2)}\"\n  puts \"Second: $#{shadow2.round(2)}\"\n  puts \"Third: $#{shadow3.round(2)}\"\n\n  if shadow1 &lt; shadow2 &amp;&amp; shadow2 &lt; shadow3\n    puts \"INCREASING REJECTION - shadows growing\"\n  end\n\n  # Check resistance\n  recent_high = close[-20..-4].max\n  near_resistance = close.last &gt;= recent_high * 0.98\n\n  if uptrend &amp;&amp; body1 &gt; body2 &amp;&amp; body2 &gt; body3\n    puts \"\\n*** TEXTBOOK ADVANCE BLOCK ***\"\n    puts \"Clear warning of trend exhaustion\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n\n    if rsi.last &gt; 70\n      puts \"OVERBOUGHT + Advance Block = Strong warning\"\n    end\n\n    if near_resistance\n      puts \"At resistance - reversal more likely\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#example-volume-confirmation","title":"Example: Volume Confirmation","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_advanceblock(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Advance Block detected\"\n\n  # Analyze volume progression\n  vol1 = volume[-3]\n  vol2 = volume[-2]\n  vol3 = volume[-1]\n  avg_vol = volume[-20..-4].sum / 17.0\n\n  puts \"\\nVolume Analysis:\"\n  puts \"First candle: #{vol1.round(0)} (#{(vol1/avg_vol).round(2)}x avg)\"\n  puts \"Second candle: #{vol2.round(0)} (#{(vol2/avg_vol).round(2)}x avg)\"\n  puts \"Third candle: #{vol3.round(0)} (#{(vol3/avg_vol).round(2)}x avg)\"\n\n  # Ideal: declining volume through pattern\n  declining_volume = vol1 &gt; vol2 &amp;&amp; vol2 &gt; vol3\n\n  if declining_volume\n    puts \"\\nIDEAL VOLUME PATTERN:\"\n    puts \"- Volume declining through pattern\"\n    puts \"- Confirms loss of buying pressure\"\n    puts \"- Strong warning signal\"\n\n    vol_decline_pct = ((vol1 - vol3) / vol1 * 100).round(1)\n    puts \"Volume declined #{vol_decline_pct}% through pattern\"\n\n  elsif vol3 &lt; avg_vol\n    puts \"\\nGOOD: Final candle shows weak volume\"\n    puts \"Confirms exhaustion\"\n\n  else\n    puts \"\\nWARNING: Volume not confirming\"\n    puts \"Pattern less reliable without volume decline\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#example-momentum-decline","title":"Example: Momentum Decline","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_advanceblock(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Advance Block - Momentum Analysis\"\n\n  # Calculate momentum for each candle\n  momentum1 = close[-3] - open[-3]\n  momentum2 = close[-2] - open[-2]\n  momentum3 = close[-1] - open[-1]\n\n  puts \"\\nMomentum (Price Gain):\"\n  puts \"First: $#{momentum1.round(2)}\"\n  puts \"Second: $#{momentum2.round(2)} (#{((momentum2/momentum1)*100).round(1)}% of first)\"\n  puts \"Third: $#{momentum3.round(2)} (#{((momentum3/momentum1)*100).round(1)}% of first)\"\n\n  # Calculate deceleration\n  decel_1_2 = ((momentum1 - momentum2) / momentum1 * 100).round(1)\n  decel_2_3 = ((momentum2 - momentum3) / momentum2 * 100).round(1)\n\n  puts \"\\nDeceleration:\"\n  puts \"First to second: #{decel_1_2}%\"\n  puts \"Second to third: #{decel_2_3}%\"\n\n  if decel_1_2 &gt; 30 &amp;&amp; decel_2_3 &gt; 30\n    puts \"\\nSEVERE DECELERATION\"\n    puts \"Momentum declining rapidly\"\n    puts \"Strong reversal warning\"\n  elsif decel_1_2 &gt; 20 || decel_2_3 &gt; 20\n    puts \"\\nCLEAR DECELERATION\"\n    puts \"Uptrend losing steam\"\n  end\n\n  # Project potential reversal\n  if momentum3 &lt; momentum1 * 0.3\n    puts \"\\nThird candle gain &lt; 30% of first\"\n    puts \"Exhaustion evident - reversal likely\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#example-shadow-analysis","title":"Example: Shadow Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\npattern = SQA::TAI.cdl_advanceblock(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Advance Block - Shadow Analysis\"\n\n  # Calculate upper shadows\n  upper_shadow1 = high[-3] - close[-3]\n  upper_shadow2 = high[-2] - close[-2]\n  upper_shadow3 = high[-1] - close[-1]\n\n  # Calculate shadow as percentage of range\n  range1 = high[-3] - low[-3]\n  range2 = high[-2] - low[-2]\n  range3 = high[-1] - low[-1]\n\n  shadow_pct1 = (upper_shadow1 / range1 * 100).round(1)\n  shadow_pct2 = (upper_shadow2 / range2 * 100).round(1)\n  shadow_pct3 = (upper_shadow3 / range3 * 100).round(1)\n\n  puts \"\\nUpper Shadow as % of Range:\"\n  puts \"First: #{shadow_pct1}%\"\n  puts \"Second: #{shadow_pct2}%\"\n  puts \"Third: #{shadow_pct3}%\"\n\n  if shadow_pct3 &gt; shadow_pct2 &amp;&amp; shadow_pct2 &gt; shadow_pct1\n    puts \"\\nPROGRESSIVE REJECTION\"\n    puts \"Each candle shows more selling pressure\"\n    puts \"Clear exhaustion pattern\"\n  end\n\n  # Calculate rejection zone\n  rejection_high = high[-1]\n  rejection_zone = rejection_high - close[-1]\n\n  puts \"\\nRejection Zone:\"\n  puts \"High: $#{rejection_high.round(2)}\"\n  puts \"Close: $#{close[-1].round(2)}\"\n  puts \"Rejection: $#{rejection_zone.round(2)} (#{(rejection_zone/close[-1]*100).round(2)}%)\"\n\n  if rejection_zone &gt; (close[-1] - open[-1]) * 0.5\n    puts \"Large rejection zone - strong selling pressure above\"\n  end\n\n  # Identify resistance\n  if shadow_pct3 &gt; 40\n    puts \"\\nThird candle rejected &gt;40% of range\"\n    puts \"Strong resistance at $#{rejection_high.round(2)}\"\n    puts \"Risk/reward poor for new longs\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_advanceblock/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_advanceblock/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation candle\nif pattern[-2] == -100  # Pattern 2 candles ago\n  # Look for bearish confirmation\n  if close[-1] &lt; open[-1] &amp;&amp; close.last &lt; close[-1]\n    puts \"Advance Block CONFIRMED with bearish follow-through\"\n    entry = close.last\n\n    puts \"Enter SHORT at #{entry.round(2)}\"\n    puts \"Pattern confirmed by declining prices\"\n\n    # Can also exit longs here\n    puts \"Consider closing long positions\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion\nif pattern.last == -100\n  entry = close.last\n\n  puts \"Advance Block completed\"\n  puts \"Enter SHORT (aggressive) at #{entry.round(2)}\"\n  puts \"Or exit long positions immediately\"\n  puts \"Stop above pattern high\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#long-position-protection","title":"Long Position Protection","text":"<pre><code># Close longs on warning\nif pattern.last == -100\n  puts \"Advance Block warning - Protect long positions\"\n\n  # Tighten stop on existing longs\n  pattern_high = [high[-3], high[-2], high[-1]].max\n  trailing_stop = pattern_high\n\n  puts \"Tighten stop to: #{trailing_stop.round(2)}\"\n  puts \"Or close position and wait for clarity\"\n\n  # Alternative: Scale out\n  puts \"\\nOr scale out of position:\"\n  puts \"- Close 50% now\"\n  puts \"- Trail stop on remaining 50%\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == -100\n  # Stop above pattern high\n  pattern_high = [high[-3], high[-2], high[-1]].max\n  stop = pattern_high * 1.01  # 1% buffer\n\n  entry = close.last\n  risk = stop - entry\n  risk_pct = (risk / entry * 100).round(2)\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Above pattern high (invalidation point)\"\n  puts \"Risk: $#{risk.round(2)} (#{risk_pct}%)\"\n\n  # Alternative: Above highest rejection\n  highest_rejection = high[-1]\n  tight_stop = highest_rejection * 1.005\n\n  puts \"\\nTighter stop: #{tight_stop.round(2)}\"\n  puts \"(Above third candle high)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == -100\n  entry = close.last\n  pattern_high = [high[-3], high[-2], high[-1]].max\n  stop = pattern_high * 1.01\n  risk = stop - entry\n\n  # Risk-based targets\n  target_1 = entry - (risk * 2)\n  target_2 = entry - (risk * 3)\n  target_3 = entry - (risk * 4)\n\n  puts \"Short Targets (from #{entry.round(2)}):\"\n  puts \"T1 (2R): #{target_1.round(2)}\"\n  puts \"T2 (3R): #{target_2.round(2)}\"\n  puts \"T3 (4R): #{target_3.round(2)}\"\n\n  # Technical targets\n  support_1 = close[-20..-4].min\n  body_low = low[-3]\n\n  puts \"\\nTechnical Targets:\"\n  puts \"Pattern base: #{body_low.round(2)}\"\n  puts \"Recent support: #{support_1.round(2)}\"\n\n  # Pattern height projection\n  pattern_height = pattern_high - body_low\n  measured_target = body_low - pattern_height\n\n  puts \"Measured move: #{measured_target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_advanceblock(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_20 = SQA::TAI.sma(close, period: 20)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last == -100\n  puts \"Advance Block Pattern Analysis\"\n  puts \"=\" * 60\n\n  # 1. Trend context\n  uptrend = close[-4] &gt; sma_20[-4] &amp;&amp; sma_20[-4] &gt; sma_50[-4]\n  extended = close[-4] &gt; close[-15]\n  context_score = uptrend &amp;&amp; extended\n\n  # 2. Body progression\n  body1 = (close[-3] - open[-3]).abs\n  body2 = (close[-2] - open[-2]).abs\n  body3 = (close[-1] - open[-1]).abs\n\n  decreasing_bodies = body1 &gt; body2 &amp;&amp; body2 &gt; body3\n  significant_decrease = body3 &lt; body1 * 0.5\n\n  # 3. Shadow progression\n  shadow1 = high[-3] - close[-3]\n  shadow2 = high[-2] - close[-2]\n  shadow3 = high[-1] - close[-1]\n\n  increasing_shadows = shadow1 &lt; shadow2 &amp;&amp; shadow2 &lt; shadow3\n  long_third_shadow = shadow3 &gt; (close[-1] - open[-1]) * 0.3\n\n  # 4. Volume decline\n  vol1, vol2, vol3 = volume[-3], volume[-2], volume[-1]\n  avg_vol = volume[-20..-4].sum / 17.0\n\n  declining_volume = vol1 &gt; vol2 &amp;&amp; vol2 &gt; vol3\n  weak_final_vol = vol3 &lt; avg_vol\n\n  # 5. RSI condition\n  overbought = rsi[-4] &gt; 70\n  divergence = close[-1] &gt; close[-5] &amp;&amp; rsi[-1] &lt; rsi[-5]\n\n  # 6. Resistance\n  resistance = close[-30..-4].max\n  near_resistance = close[-1] &gt;= resistance * 0.98\n\n  # Calculate quality score\n  score = 0\n  score += 2 if context_score\n  score += 3 if decreasing_bodies\n  score += 2 if significant_decrease\n  score += 3 if increasing_shadows\n  score += 1 if long_third_shadow\n  score += 2 if declining_volume\n  score += 1 if weak_final_vol\n  score += 2 if overbought\n  score += 2 if divergence\n  score += 2 if near_resistance\n\n  puts \"\\nQuality Score: #{score}/20\"\n\n  if score &gt;= 14\n    entry = close.last\n    pattern_high = [high[-3], high[-2], high[-1]].max\n    stop = pattern_high * 1.01\n    risk = stop - entry\n\n    support = close[-30..-4].min\n    target = support\n    reward = entry - target\n    rr = (reward / risk).round(1)\n\n    puts \"\\n*** STRONG REVERSAL WARNING ***\"\n    puts \"Direction: SHORT (or close longs)\"\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"R:R: 1:#{rr}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_advanceblock/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_advanceblock/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Uncommon (2-3% of uptrends)</li> <li>Best Timeframes: Daily and weekly charts</li> <li>Markets: Works on all markets</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 72-78% reversal rate</li> <li>Good pattern: 62-72% reversal rate</li> <li>With volume decline: 70-80% success</li> <li>At resistance: 75-82% success</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/#average-move","title":"Average Move","text":"<ul> <li>Initial decline: 8-15% from pattern high</li> <li>Major reversals: 20-35% decline</li> <li>Time to target: 10-25 candles</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_advanceblock/#dos","title":"Do's","text":"<ol> <li>Verify clear uptrend before pattern</li> <li>Confirm diminishing body sizes</li> <li>Look for increasing upper shadows</li> <li>Check for declining volume</li> <li>Wait for bearish confirmation if unsure</li> <li>Use pattern to protect long positions</li> <li>Combine with overbought RSI</li> <li>Look for pattern at resistance</li> <li>Measure momentum decline</li> <li>Monitor for early reversal signs</li> </ol>"},{"location":"indicators/patterns/cdl_advanceblock/#donts","title":"Don'ts","text":"<ol> <li>Don't trade without uptrend context</li> <li>Don't ignore body size progression</li> <li>Don't overlook shadow analysis</li> <li>Don't skip volume confirmation</li> <li>Don't use in choppy markets</li> <li>Don't trade with increasing volume</li> <li>Don't ignore if bodies grow larger</li> <li>Don't confuse with Three White Soldiers</li> <li>Don't chase if already reversed</li> <li>Don't ignore resistance levels</li> </ol>"},{"location":"indicators/patterns/cdl_advanceblock/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Misidentification: Must have three white candles with decreasing bodies</li> <li>Ignoring progression: Bodies must get progressively smaller</li> <li>Wrong trend context: Needs clear uptrend</li> <li>Ignoring shadows: Upper shadows must lengthen</li> <li>Volume oversight: Declining volume confirms pattern</li> <li>No confirmation: Better to wait for bearish follow-through</li> <li>Confusing patterns: Not same as Three Advancing White Soldiers</li> </ol>"},{"location":"indicators/patterns/cdl_advanceblock/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_advanceblock/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Stalled Pattern - Similar exhaustion pattern</li> <li>Three White Soldiers - Bullish version</li> <li>Evening Star - Another bearish reversal</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/#component-patterns","title":"Component Patterns","text":"<ul> <li>Long Line - First candle characteristics</li> <li>Short Line - Third candle characteristics</li> </ul>"},{"location":"indicators/patterns/cdl_advanceblock/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Warning signal - not immediate reversal</li> <li>Progressive weakening - each candle shows less strength</li> <li>Body decrease critical - must see diminishing bodies</li> <li>Shadow increase important - shows rejection</li> <li>Volume confirms - declining volume validates pattern</li> <li>Protect longs - time to tighten stops</li> <li>Wait for confirmation - pattern shows warning, not certainty</li> <li>Resistance matters - more reliable at resistance</li> <li>Combine indicators - use with RSI, volume, support/resistance</li> <li>Early warning - gives time to prepare for reversal</li> </ol>"},{"location":"indicators/patterns/cdl_advanceblock/#see-also","title":"See Also","text":"<ul> <li>Stalled Pattern</li> <li>Three White Soldiers</li> <li>Evening Star</li> <li>Dark Cloud Cover</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/","title":"Belt Hold Pattern","text":"<p>The Belt Hold (Yorikiri in Japanese) is a single-candle reversal pattern that signals potential trend changes. A Bullish Belt Hold is a strong white candle opening on or near the low with little to no lower shadow, appearing after a downtrend. A Bearish Belt Hold is a strong black candle opening on or near the high with little to no upper shadow, appearing after an uptrend. The pattern is essentially a White/Black Marubozu appearing at trend extremes.</p>"},{"location":"indicators/patterns/cdl_belthold/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (Bullish or Bearish)</li> <li>Candles Required: 1</li> <li>Trend Context: Appears at trend extremes</li> <li>Reliability: Moderate</li> <li>Frequency: Common (5-7%)</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen  = [95.0, 92.0, 89.0, 89.5, 93.0]\nhigh  = [95.5, 92.5, 89.2, 89.7, 94.0]\nlow   = [91.0, 88.5, 88.8, 89.3, 92.5]\nclose = [92.0, 89.0, 89.1, 89.5, 93.5]\n\n# Detect Belt Hold pattern\npattern = SQA::TAI.cdl_belthold(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Bullish Belt Hold detected!\"\nelsif pattern.last == -100\n  puts \"Bearish Belt Hold detected!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_belthold/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_belthold/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No pattern detected - +100: Bullish pattern signal - -100: Bearish pattern signal</p>"},{"location":"indicators/patterns/cdl_belthold/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_belthold/#bullish-belt-hold","title":"Bullish Belt Hold","text":"<ul> <li>Downtrend Context: Must occur during downtrend</li> <li>Opening: Opens at or near the low of the session</li> <li>Body: Long white (bullish) body</li> <li>Lower Shadow: Little to no lower shadow</li> <li>Upper Shadow: Can have upper shadow</li> <li>Close: Closes significantly higher than open</li> <li>Strength: Stronger if gap down on open</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#bearish-belt-hold","title":"Bearish Belt Hold","text":"<ul> <li>Uptrend Context: Must occur during uptrend</li> <li>Opening: Opens at or near the high of the session</li> <li>Body: Long black (bearish) body</li> <li>Upper Shadow: Little to no upper shadow</li> <li>Lower Shadow: Can have lower shadow</li> <li>Close: Closes significantly lower than open</li> <li>Strength: Stronger if gap up on open</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Clear trend context required</li> <li>Strong directional move</li> <li>Specific body and shadow requirements</li> <li>Volume confirmation helpful</li> <li>More reliable at support/resistance levels</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_belthold/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_belthold/#conservative-entry","title":"Conservative Entry","text":"<pre><code># Wait for confirmation\nif pattern[-2] != 0\n  direction = pattern[-2] &gt; 0 ? \"LONG\" : \"SHORT\"\n  # Confirm with next candle\n  if (pattern[-2] &gt; 0 &amp;&amp; close.last &gt; close[-1]) ||\n     (pattern[-2] &lt; 0 &amp;&amp; close.last &lt; close[-1])\n    puts \"Enter #{direction} with confirmation\"\n    entry = close.last\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_belthold/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"LONG\" : \"SHORT\"\n  entry = close.last\n  puts \"Enter #{direction} at #{entry}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_belthold/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last != 0\n  if pattern.last &gt; 0  # Bullish\n    stop = low[-1] * 0.99\n    puts \"Stop below pattern low: #{stop}\"\n  else  # Bearish\n    stop = high[-1] * 1.01\n    puts \"Stop above pattern high: #{stop}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_belthold/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last != 0\n  entry = close.last\n  if pattern.last &gt; 0  # Bullish\n    stop = low[-1] * 0.99\n    risk = entry - stop\n    target_1 = entry + (risk * 2)\n    target_2 = entry + (risk * 3)\n  else  # Bearish\n    stop = high[-1] * 1.01\n    risk = stop - entry\n    target_1 = entry - (risk * 2)\n    target_2 = entry - (risk * 3)\n  end\n\n  puts \"T1 (2R): #{target_1}\"\n  puts \"T2 (3R): #{target_2}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_belthold/#example-complete-analysis","title":"Example: Complete Analysis","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('AAPL')\n\npattern = SQA::TAI.cdl_belthold(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n  puts \"#{direction} Belt Hold Pattern Detected\"\n  puts \"=\" * 60\n\n  # Trend verification\n  if pattern.last &gt; 0\n    downtrend = close[-5] &lt; sma_50[-5]\n    oversold = rsi.last &lt; 30\n    puts \"Downtrend: #{downtrend}\"\n    puts \"Oversold: #{oversold}\"\n  else\n    uptrend = close[-5] &gt; sma_50[-5]\n    overbought = rsi.last &gt; 70\n    puts \"Uptrend: #{uptrend}\"\n    puts \"Overbought: #{overbought}\"\n  end\n\n  # Volume analysis\n  avg_vol = volume[-20..-2].sum / 19.0\n  vol_confirmation = volume.last &gt; avg_vol * 1.2\n\n  puts \"Volume confirmation: #{vol_confirmation}\"\n\n  # Calculate trade setup\n  entry = close.last\n  if pattern.last &gt; 0\n    stop = low[-1] * 0.99\n    risk = entry - stop\n    target = entry + (risk * 2.5)\n  else\n    stop = high[-1] * 1.01\n    risk = stop - entry\n    target = entry - (risk * 2.5)\n  end\n\n  rr = ((target - entry).abs / risk).round(1)\n\n  puts \"\\nTrade Setup:\"\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Stop: $#{stop.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"R:R: 1:#{rr}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_belthold/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_belthold/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Common (5-7%)</li> <li>Best Timeframes: Daily and weekly charts</li> <li>Markets: Works on all liquid markets</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 65-75%</li> <li>With confirmation: 75-85%</li> <li>At support/resistance: 78-88%</li> <li>With volume: 72-82%</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#average-move","title":"Average Move","text":"<ul> <li>Initial move: 8-15%</li> <li>Major reversals: 20-40%</li> <li>Time to target: 10-30 candles</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_belthold/#dos","title":"Do's","text":"<ol> <li>Verify trend context before trading</li> <li>Check for volume confirmation</li> <li>Combine with RSI for extremes</li> <li>Look for pattern at key levels</li> <li>Wait for confirmation if unsure</li> <li>Use proper stop loss placement</li> <li>Scale positions appropriately</li> <li>Monitor for pattern invalidation</li> <li>Consider timeframe alignment</li> <li>Track pattern success rate</li> </ol>"},{"location":"indicators/patterns/cdl_belthold/#donts","title":"Don'ts","text":"<ol> <li>Don't trade without trend context</li> <li>Don't ignore volume signals</li> <li>Don't skip confirmation in ranging markets</li> <li>Don't use tight stops initially</li> <li>Don't overtrade the pattern</li> <li>Don't ignore larger timeframes</li> <li>Don't chase after significant move</li> <li>Don't skip risk management</li> <li>Don't trade in low liquidity</li> <li>Don't ignore market conditions</li> </ol>"},{"location":"indicators/patterns/cdl_belthold/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Misidentification: Verify all pattern requirements</li> <li>Wrong context: Pattern needs appropriate trend</li> <li>No confirmation: Wait for follow-through</li> <li>Poor stop placement: Use logical invalidation points</li> <li>Ignoring volume: Volume confirms conviction</li> <li>Overtrading: Wait for quality setups</li> <li>No risk management: Always use stops</li> </ol>"},{"location":"indicators/patterns/cdl_belthold/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_belthold/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Hammer - Single candle reversal</li> <li>Engulfing - Two candle reversal</li> <li>Morning Star - Three candle reversal</li> <li>Evening Star - Three candle reversal</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#component-patterns","title":"Component Patterns","text":"<ul> <li>Marubozu - Strong directional candle</li> <li>Doji - Indecision candle</li> <li>Long Line - Strong body</li> </ul>"},{"location":"indicators/patterns/cdl_belthold/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Trend context critical - must have appropriate trend</li> <li>Volume confirms - high volume on reversal validates</li> <li>Wait for confirmation - reduces false signals</li> <li>Support/resistance - more reliable at key levels</li> <li>Risk management - always use stops</li> <li>Position sizing - adjust for pattern strength</li> <li>Timeframe matters - higher timeframes more reliable</li> <li>Combine indicators - use RSI, MA, volume</li> <li>Track performance - learn from results</li> <li>Stay disciplined - follow your rules</li> </ol>"},{"location":"indicators/patterns/cdl_belthold/#see-also","title":"See Also","text":"<ul> <li>Hammer</li> <li>Shooting Star</li> <li>Engulfing</li> <li>Morning Star</li> <li>Evening Star</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/","title":"Breakaway Pattern","text":"<p>The Breakaway is a five-candle reversal pattern that signals a trend change after a strong move. It begins with a gap in the trend direction, followed by three candles continuing the trend, and concludes with a strong reversal candle that closes within the gap. The pattern shows initial momentum in the old trend direction, followed by exhaustion and reversal.</p>"},{"location":"indicators/patterns/cdl_breakaway/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (Bullish or Bearish)</li> <li>Candles Required: 5</li> <li>Trend Context: Appears at trend extremes</li> <li>Reliability: Moderate to High</li> <li>Frequency: Rare (1-2%)</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen  = [95.0, 92.0, 89.0, 89.5, 93.0]\nhigh  = [95.5, 92.5, 89.2, 89.7, 94.0]\nlow   = [91.0, 88.5, 88.8, 89.3, 92.5]\nclose = [92.0, 89.0, 89.1, 89.5, 93.5]\n\n# Detect Breakaway pattern\npattern = SQA::TAI.cdl_breakaway(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Bullish Breakaway detected!\"\nelsif pattern.last == -100\n  puts \"Bearish Breakaway detected!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_breakaway/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_breakaway/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No pattern detected - +100: Bullish pattern signal - -100: Bearish pattern signal</p>"},{"location":"indicators/patterns/cdl_breakaway/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_breakaway/#bullish-breakaway","title":"Bullish Breakaway","text":"<ul> <li>First Candle: Long black candle in downtrend</li> <li>Second Candle: Gaps down, continues lower (any color)</li> <li>Third &amp; Fourth Candles: Continue in trend direction</li> <li>Fifth Candle: Long white candle that closes into the gap</li> <li>Gap Closure: Fifth candle closes within first candle body</li> <li>Volume: Typically declining through middle candles</li> <li>Reversal Volume: High volume on fifth candle</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#bearish-breakaway","title":"Bearish Breakaway","text":"<ul> <li>First Candle: Long white candle in uptrend</li> <li>Second Candle: Gaps up, continues higher (any color)</li> <li>Third &amp; Fourth Candles: Continue in trend direction</li> <li>Fifth Candle: Long black candle that closes into the gap</li> <li>Gap Closure: Fifth candle closes within first candle body</li> <li>Volume: Typically declining through middle candles</li> <li>Reversal Volume: High volume on fifth candle</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Clear trend context required</li> <li>Strong directional move</li> <li>Specific body and shadow requirements</li> <li>Volume confirmation helpful</li> <li>More reliable at support/resistance levels</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_breakaway/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_breakaway/#conservative-entry","title":"Conservative Entry","text":"<pre><code># Wait for confirmation\nif pattern[-2] != 0\n  direction = pattern[-2] &gt; 0 ? \"LONG\" : \"SHORT\"\n  # Confirm with next candle\n  if (pattern[-2] &gt; 0 &amp;&amp; close.last &gt; close[-1]) ||\n     (pattern[-2] &lt; 0 &amp;&amp; close.last &lt; close[-1])\n    puts \"Enter #{direction} with confirmation\"\n    entry = close.last\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_breakaway/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"LONG\" : \"SHORT\"\n  entry = close.last\n  puts \"Enter #{direction} at #{entry}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_breakaway/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last != 0\n  if pattern.last &gt; 0  # Bullish\n    stop = low[-1] * 0.99\n    puts \"Stop below pattern low: #{stop}\"\n  else  # Bearish\n    stop = high[-1] * 1.01\n    puts \"Stop above pattern high: #{stop}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_breakaway/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last != 0\n  entry = close.last\n  if pattern.last &gt; 0  # Bullish\n    stop = low[-1] * 0.99\n    risk = entry - stop\n    target_1 = entry + (risk * 2)\n    target_2 = entry + (risk * 3)\n  else  # Bearish\n    stop = high[-1] * 1.01\n    risk = stop - entry\n    target_1 = entry - (risk * 2)\n    target_2 = entry - (risk * 3)\n  end\n\n  puts \"T1 (2R): #{target_1}\"\n  puts \"T2 (3R): #{target_2}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_breakaway/#example-complete-analysis","title":"Example: Complete Analysis","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('AAPL')\n\npattern = SQA::TAI.cdl_breakaway(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n  puts \"#{direction} Breakaway Pattern Detected\"\n  puts \"=\" * 60\n\n  # Trend verification\n  if pattern.last &gt; 0\n    downtrend = close[-5] &lt; sma_50[-5]\n    oversold = rsi.last &lt; 30\n    puts \"Downtrend: #{downtrend}\"\n    puts \"Oversold: #{oversold}\"\n  else\n    uptrend = close[-5] &gt; sma_50[-5]\n    overbought = rsi.last &gt; 70\n    puts \"Uptrend: #{uptrend}\"\n    puts \"Overbought: #{overbought}\"\n  end\n\n  # Volume analysis\n  avg_vol = volume[-20..-2].sum / 19.0\n  vol_confirmation = volume.last &gt; avg_vol * 1.2\n\n  puts \"Volume confirmation: #{vol_confirmation}\"\n\n  # Calculate trade setup\n  entry = close.last\n  if pattern.last &gt; 0\n    stop = low[-1] * 0.99\n    risk = entry - stop\n    target = entry + (risk * 2.5)\n  else\n    stop = high[-1] * 1.01\n    risk = stop - entry\n    target = entry - (risk * 2.5)\n  end\n\n  rr = ((target - entry).abs / risk).round(1)\n\n  puts \"\\nTrade Setup:\"\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Stop: $#{stop.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"R:R: 1:#{rr}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_breakaway/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_breakaway/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Rare (1-2%)</li> <li>Best Timeframes: Daily and weekly charts</li> <li>Markets: Works on all liquid markets</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 70-78%</li> <li>With confirmation: 75-85%</li> <li>At support/resistance: 78-88%</li> <li>With volume: 72-82%</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#average-move","title":"Average Move","text":"<ul> <li>Initial move: 8-15%</li> <li>Major reversals: 20-40%</li> <li>Time to target: 10-30 candles</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_breakaway/#dos","title":"Do's","text":"<ol> <li>Verify trend context before trading</li> <li>Check for volume confirmation</li> <li>Combine with RSI for extremes</li> <li>Look for pattern at key levels</li> <li>Wait for confirmation if unsure</li> <li>Use proper stop loss placement</li> <li>Scale positions appropriately</li> <li>Monitor for pattern invalidation</li> <li>Consider timeframe alignment</li> <li>Track pattern success rate</li> </ol>"},{"location":"indicators/patterns/cdl_breakaway/#donts","title":"Don'ts","text":"<ol> <li>Don't trade without trend context</li> <li>Don't ignore volume signals</li> <li>Don't skip confirmation in ranging markets</li> <li>Don't use tight stops initially</li> <li>Don't overtrade the pattern</li> <li>Don't ignore larger timeframes</li> <li>Don't chase after significant move</li> <li>Don't skip risk management</li> <li>Don't trade in low liquidity</li> <li>Don't ignore market conditions</li> </ol>"},{"location":"indicators/patterns/cdl_breakaway/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Misidentification: Verify all pattern requirements</li> <li>Wrong context: Pattern needs appropriate trend</li> <li>No confirmation: Wait for follow-through</li> <li>Poor stop placement: Use logical invalidation points</li> <li>Ignoring volume: Volume confirms conviction</li> <li>Overtrading: Wait for quality setups</li> <li>No risk management: Always use stops</li> </ol>"},{"location":"indicators/patterns/cdl_breakaway/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_breakaway/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Hammer - Single candle reversal</li> <li>Engulfing - Two candle reversal</li> <li>Morning Star - Three candle reversal</li> <li>Evening Star - Three candle reversal</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#component-patterns","title":"Component Patterns","text":"<ul> <li>Marubozu - Strong directional candle</li> <li>Doji - Indecision candle</li> <li>Long Line - Strong body</li> </ul>"},{"location":"indicators/patterns/cdl_breakaway/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Trend context critical - must have appropriate trend</li> <li>Volume confirms - high volume on reversal validates</li> <li>Wait for confirmation - reduces false signals</li> <li>Support/resistance - more reliable at key levels</li> <li>Risk management - always use stops</li> <li>Position sizing - adjust for pattern strength</li> <li>Timeframe matters - higher timeframes more reliable</li> <li>Combine indicators - use RSI, MA, volume</li> <li>Track performance - learn from results</li> <li>Stay disciplined - follow your rules</li> </ol>"},{"location":"indicators/patterns/cdl_breakaway/#see-also","title":"See Also","text":"<ul> <li>Hammer</li> <li>Shooting Star</li> <li>Engulfing</li> <li>Morning Star</li> <li>Evening Star</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/","title":"Closing Marubozu Pattern","text":"<p>The Closing Marubozu is a single-candle pattern characterized by a strong directional move with no shadow (or minimal shadow) at the close. A Bullish Closing Marubozu closes at or near the high with little to no upper shadow, showing strong buying pressure through the session. A Bearish Closing Marubozu closes at or near the low with little to no lower shadow, showing strong selling pressure. This pattern is essentially a half-Marubozu, missing a shadow only on the closing side.</p>"},{"location":"indicators/patterns/cdl_closingmarubozu/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Continuation/Reversal</li> <li>Candles Required: 1</li> <li>Trend Context: Can appear in any trend</li> <li>Reliability: Moderate</li> <li>Frequency: Common (8-12%)</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Closing Marubozu example\nopen  = [95.0, 92.0, 89.5, 88.0, 89.0]\nhigh  = [95.5, 92.5, 91.0, 88.5, 93.0]\nlow   = [91.0, 88.5, 88.0, 86.0, 88.5]\nclose = [92.0, 89.0, 91.0, 86.0, 93.0]\n\n# Detect Closing Marubozu pattern\npattern = SQA::TAI.cdl_closingmarubozu(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Bullish Closing Marubozu - Strong buying to close!\"\nelsif pattern.last == -100\n  puts \"Bearish Closing Marubozu - Strong selling to close!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_closingmarubozu/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Closing Marubozu pattern detected - +100: Bullish Closing Marubozu (continuation or reversal up) - -100: Bearish Closing Marubozu (continuation or reversal down)</p>"},{"location":"indicators/patterns/cdl_closingmarubozu/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#bullish-closing-marubozu-white","title":"Bullish Closing Marubozu (White)","text":"<ul> <li>Body: Long white (bullish) candle</li> <li>Close: At or very near the high</li> <li>Upper Shadow: None or very small</li> <li>Lower Shadow: Present (distinguishes from full Marubozu)</li> <li>Opening: Can be anywhere in the range</li> <li>Direction: Strong upward momentum to close</li> <li>Volume: Higher volume strengthens signal</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#bearish-closing-marubozu-black","title":"Bearish Closing Marubozu (Black)","text":"<ul> <li>Body: Long black (bearish) candle</li> <li>Close: At or very near the low</li> <li>Lower Shadow: None or very small</li> <li>Upper Shadow: Present (distinguishes from full Marubozu)</li> <li>Opening: Can be anywhere in the range</li> <li>Direction: Strong downward momentum to close</li> <li>Volume: Higher volume strengthens signal</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Strong directional close</li> <li>No hesitation at closing price</li> <li>Shows momentum and commitment</li> <li>More reliable with large body</li> <li>Volume confirms strength</li> <li>Context determines continuation vs reversal</li> <li>One shadow distinguishes from full Marubozu</li> <li>Closing strength indicates follow-through likely</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Large body: Body should be at least 2% of price</li> <li>Minimal closing shadow: Less than 10% of range</li> <li>Clear opening shadow: Distinguishes from full Marubozu</li> <li>High volume: Above average volume validates</li> <li>Trend alignment: Works best with existing momentum</li> <li>Time of day: More significant on daily charts</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Bullish Closing Marubozu:\n\n       [====]        Close at or near high\n        |   |        Strong buying to close\n        |            Lower shadow present\n       [             Open lower in range\n\n\nBearish Closing Marubozu:\n\n        |            Upper shadow present\n        |   ]        Open higher in range\n       [====]        Strong selling to close\n                     Close at or near low\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#interpretation","title":"Interpretation","text":"<p>The Closing Marubozu shows strong directional momentum into the close, suggesting continuation is likely. A Bullish Closing Marubozu indicates buyers controlled the session finish, potentially signaling more upside. A Bearish Closing Marubozu shows sellers dominated the close, suggesting continued downside. The pattern is stronger with a large body and high volume.</p>"},{"location":"indicators/patterns/cdl_closingmarubozu/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Body Size Small Medium Large (&gt;2% of price) Shadow Visible shadow at close Tiny shadow No shadow Volume Below average Average Above average Trend Counter-trend No clear trend With trend Prior Action Choppy Some direction Clear momentum"},{"location":"indicators/patterns/cdl_closingmarubozu/#example-pattern-detection-and-analysis","title":"Example: Pattern Detection and Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_closingmarubozu(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n  puts \"#{direction} Closing Marubozu detected!\"\n\n  # Verify trend context\n  if pattern.last &gt; 0\n        downtrend = close[-5] &lt; sma_50[-5]\n        puts \"Reversal from downtrend: \\#{downtrend}\"\n      else\n        uptrend = close[-5] &gt; sma_50[-5]\n        puts \"Reversal from uptrend: \\#{uptrend}\"\n      end\n\n  puts \"RSI: #{rsi.last.round(2)}\"\n\n  if pattern.last &gt; 0 &amp;&amp; rsi.last &lt; 30\n    puts \"OVERSOLD + Closing Marubozu = Strong signal\"\n  elsif pattern.last &lt; 0 &amp;&amp; rsi.last &gt; 70\n    puts \"OVERBOUGHT + Closing Marubozu = Strong signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#example-volume-confirmation","title":"Example: Volume Confirmation","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_closingmarubozu(open, high, low, close)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"Bullish\" : \"Bearish\"\n  puts \"#{direction} Closing Marubozu detected\"\n\n  # Analyze volume\n  avg_vol = volume[-20..-2].sum / 19.0\n  current_vol = volume.last\n\n  puts \"\\nVolume Analysis:\"\n  puts \"Current: #{current_vol.round(0)}\"\n  puts \"Average: #{avg_vol.round(0)}\"\n  puts \"Ratio: #{(current_vol/avg_vol).round(2)}x\"\n\n  if current_vol &gt; avg_vol * 1.5\n    puts \"\\nSTRONG VOLUME CONFIRMATION\"\n    puts \"High volume validates the pattern\"\n  elsif current_vol &gt; avg_vol\n    puts \"\\nGood volume support\"\n  else\n    puts \"\\nWARNING: Low volume - pattern less reliable\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation candle\nif pattern[-2] != 0  # Pattern 2 candles ago\n  direction = pattern[-2]\n\n  if direction &gt; 0  # Bullish\n    # Confirm upward momentum\n    if close[-1] &gt; close[-2] &amp;&amp; close.last &gt;= close[-1]\n      puts \"Closing Marubozu CONFIRMED\"\n      entry = close.last\n      puts \"Enter LONG at #{entry.round(2)}\"\n    end\n  else  # Bearish\n    # Confirm downward momentum\n    if close[-1] &lt; close[-2] &amp;&amp; close.last &lt;= close[-1]\n      puts \"Closing Marubozu CONFIRMED\"\n      entry = close.last\n      puts \"Enter SHORT at #{entry.round(2)}\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter immediately on pattern completion\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"LONG\" : \"SHORT\"\n  entry = close.last\n\n  puts \"Closing Marubozu completed - Enter #{direction}\"\n  puts \"Entry: #{entry.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last != 0\n  if pattern.last &gt; 0  # Bullish\n    # Stop below pattern low\n    pattern_low = low.last\n    stop = pattern_low * 0.99  # 1% buffer\n\n    puts \"Stop loss: #{stop.round(2)}\"\n    puts \"Below pattern low (invalidation point)\"\n\n  else  # Bearish\n    # Stop above pattern high\n    pattern_high = high.last\n    stop = pattern_high * 1.01  # 1% buffer\n\n    puts \"Stop loss: #{stop.round(2)}\"\n    puts \"Above pattern high (invalidation point)\"\n  end\n\n  entry = close.last\n  risk = (entry - stop).abs\n  risk_pct = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_pct}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last != 0\n  entry = close.last\n\n  if pattern.last &gt; 0  # Bullish\n    pattern_low = low.last\n    stop = pattern_low * 0.99\n    risk = entry - stop\n\n    # Risk-based targets\n    target_1 = entry + (risk * 2)\n    target_2 = entry + (risk * 3)\n    target_3 = entry + (risk * 4)\n\n    puts \"Bullish Targets:\"\n    puts \"T1 (2R): #{target_1.round(2)}\"\n    puts \"T2 (3R): #{target_2.round(2)}\"\n    puts \"T3 (4R): #{target_3.round(2)}\"\n\n  else  # Bearish\n    pattern_high = high.last\n    stop = pattern_high * 1.01\n    risk = stop - entry\n\n    # Risk-based targets\n    target_1 = entry - (risk * 2)\n    target_2 = entry - (risk * 3)\n    target_3 = entry - (risk * 4)\n\n    puts \"Bearish Targets:\"\n    puts \"T1 (2R): #{target_1.round(2)}\"\n    puts \"T2 (3R): #{target_2.round(2)}\"\n    puts \"T3 (4R): #{target_3.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_closingmarubozu(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_20 = SQA::TAI.sma(close, period: 20)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n\n  puts \"#{direction} Closing Marubozu Pattern Analysis\"\n  puts \"=\" * 60\n\n  # 1. Trend context\n  if pattern.last &gt; 0\n    downtrend = close[-5] &lt; sma_20[-5] &amp;&amp; sma_20[-5] &lt; sma_50[-5]\n    extended = close[-10] &gt; close[-5]\n    context_score = downtrend &amp;&amp; extended\n    puts \"Downtrend context: #{context_score}\"\n  else\n    uptrend = close[-5] &gt; sma_20[-5] &amp;&amp; sma_20[-5] &gt; sma_50[-5]\n    extended = close[-5] &gt; close[-10]\n    context_score = uptrend &amp;&amp; extended\n    puts \"Uptrend context: #{context_score}\"\n  end\n\n  # 2. Volume\n  avg_vol = volume[-20..-2].sum / 19.0\n  high_volume = volume.last &gt; avg_vol * 1.3\n  puts \"Volume confirmation: #{high_volume}\"\n\n  # 3. RSI extreme\n  if pattern.last &gt; 0\n    extreme = rsi[-2] &lt; 30\n    puts \"Oversold: #{extreme}\"\n  else\n    extreme = rsi[-2] &gt; 70\n    puts \"Overbought: #{extreme}\"\n  end\n\n  # Calculate trade setup\n  entry = close.last\n  if pattern.last &gt; 0\n    pattern_low = low.last\n    stop = pattern_low * 0.99\n    risk = entry - stop\n    target = entry + (risk * 2.5)\n  else\n    pattern_high = high.last\n    stop = pattern_high * 1.01\n    risk = stop - entry\n    target = entry - (risk * 2.5)\n  end\n\n  rr = ((target - entry).abs / risk).round(1)\n\n  puts \"\\nTrade Setup:\"\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Stop: $#{stop.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"R:R: 1:#{rr}\"\n\n  if context_score &amp;&amp; (high_volume || extreme)\n    puts \"\\n*** HIGH QUALITY SETUP ***\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#example-shadow-analysis","title":"Example: Shadow Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_closingmarubozu(open, high, low, close)\n\nif pattern.last != 0\n  # Analyze shadow characteristics\n  body = (close.last - open.last).abs\n  total_range = high.last - low.last\n\n  if pattern.last &gt; 0  # Bullish\n    upper_shadow = high.last - close.last\n    lower_shadow = open.last - low.last\n\n    puts \"Bullish Closing Marubozu Analysis:\"\n    puts \"Body: $#{body.round(2)} (#{(body/total_range*100).round(1)}%)\"\n    puts \"Upper shadow: $#{upper_shadow.round(2)} (#{(upper_shadow/total_range*100).round(1)}%)\"\n    puts \"Lower shadow: $#{lower_shadow.round(2)} (#{(lower_shadow/total_range*100).round(1)}%)\"\n\n    if upper_shadow &lt; total_range * 0.05\n      puts \"\\nExcellent - Minimal upper shadow\"\n    elsif upper_shadow &lt; total_range * 0.1\n      puts \"\\nGood - Small upper shadow\"\n    else\n      puts \"\\nWARNING - Upper shadow may be too large\"\n    end\n\n  else  # Bearish\n    upper_shadow = high.last - open.last\n    lower_shadow = close.last - low.last\n\n    puts \"Bearish Closing Marubozu Analysis:\"\n    puts \"Body: $#{body.round(2)} (#{(body/total_range*100).round(1)}%)\"\n    puts \"Upper shadow: $#{upper_shadow.round(2)} (#{(upper_shadow/total_range*100).round(1)}%)\"\n    puts \"Lower shadow: $#{lower_shadow.round(2)} (#{(lower_shadow/total_range*100).round(1)}%)\"\n\n    if lower_shadow &lt; total_range * 0.05\n      puts \"\\nExcellent - Minimal lower shadow\"\n    elsif lower_shadow &lt; total_range * 0.1\n      puts \"\\nGood - Small lower shadow\"\n    else\n      puts \"\\nWARNING - Lower shadow may be too large\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#example-timeframe-alignment","title":"Example: Timeframe Alignment","text":"<pre><code># Check pattern across multiple timeframes\nrequire 'sqa/tai'\n\ndef analyze_timeframes(symbol)\n  daily_data = load_ohlc_data(symbol, '1d')\n  hourly_data = load_ohlc_data(symbol, '1h')\n\n  daily_pattern = SQA::TAI.cdl_closingmarubozu(\n    daily_data[:open], daily_data[:high],\n    daily_data[:low], daily_data[:close]\n  )\n\n  hourly_pattern = SQA::TAI.cdl_closingmarubozu(\n    hourly_data[:open], hourly_data[:high],\n    hourly_data[:low], hourly_data[:close]\n  )\n\n  if daily_pattern.last != 0\n    daily_direction = daily_pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n    puts \"Daily: #{daily_direction} Closing Marubozu\"\n\n    # Check last 8 hours for alignment\n    recent_hourly = hourly_pattern[-8..-1]\n    aligned_signals = recent_hourly.count { |p| p == daily_pattern.last }\n\n    puts \"Hourly alignment: #{aligned_signals}/8 candles\"\n\n    if aligned_signals &gt;= 5\n      puts \"\\nSTRONG TIMEFRAME ALIGNMENT\"\n      puts \"Multiple timeframes confirm direction\"\n    elsif aligned_signals &gt;= 3\n      puts \"\\nGood timeframe alignment\"\n    else\n      puts \"\\nWeak alignment - be cautious\"\n    end\n  end\nend\n\nanalyze_timeframes('AAPL')\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Common (8-12%)</li> <li>Best Timeframes: Daily and intraday charts</li> <li>Markets: All liquid markets</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 70-75%</li> <li>Good pattern: 60-70%</li> <li>With confirmation: 72-80%</li> <li>At support/resistance: 75-82%</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#average-move","title":"Average Move","text":"<ul> <li>Initial move: 5-12%</li> <li>Major reversals: 15-30%</li> <li>Time to target: 8-20 candles</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#dos","title":"Do's","text":"<ol> <li>Verify body size is significant</li> <li>Check for minimal shadow at close</li> <li>Confirm with volume</li> <li>Consider trend context</li> <li>Wait for confirmation if unsure</li> <li>Use proper stop loss</li> <li>Look for pattern at key levels</li> <li>Combine with momentum indicators</li> <li>Check timeframe alignment</li> <li>Monitor for follow-through</li> </ol>"},{"location":"indicators/patterns/cdl_closingmarubozu/#donts","title":"Don'ts","text":"<ol> <li>Don't trade small-bodied versions</li> <li>Don't ignore closing shadow size</li> <li>Don't skip volume analysis</li> <li>Don't trade without trend context</li> <li>Don't use tight stops initially</li> <li>Don't ignore larger timeframe</li> <li>Don't overtrade the pattern</li> <li>Don't confuse with full Marubozu</li> <li>Don't chase after big moves</li> <li>Don't skip risk management</li> </ol>"},{"location":"indicators/patterns/cdl_closingmarubozu/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Ignoring body size: Small bodies are weak signals</li> <li>Accepting large closing shadow: Must close at/near extreme</li> <li>No volume check: Volume validates the move</li> <li>Wrong context: Trend context affects interpretation</li> <li>Poor stop placement: Use logical invalidation points</li> <li>Confusing with Marubozu: This has one shadow, Marubozu has none</li> <li>Overtrading: Wait for quality setups</li> <li>No confirmation: Pattern stronger with follow-through</li> <li>Ignoring opening shadow: Must have shadow on opening side</li> <li>Missing trend analysis: Context determines significance</li> </ol>"},{"location":"indicators/patterns/cdl_closingmarubozu/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#perfect-closing-marubozu","title":"Perfect Closing Marubozu","text":"<ul> <li>Large body (&gt;3% of price)</li> <li>Minimal closing shadow (&lt;5% of range)</li> <li>Clear opening shadow present</li> <li>High volume (&gt;1.5x average)</li> <li>Strong trend context</li> <li>Success Rate: 78-85%</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#good-closing-marubozu","title":"Good Closing Marubozu","text":"<ul> <li>Medium body (1.5-3% of price)</li> <li>Small closing shadow (&lt;10% of range)</li> <li>Opening shadow visible</li> <li>Above average volume</li> <li>Clear market direction</li> <li>Success Rate: 68-78%</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#weak-closing-marubozu","title":"Weak Closing Marubozu","text":"<ul> <li>Small body (&lt;1.5% of price)</li> <li>Larger closing shadow (10-15% of range)</li> <li>Unclear opening shadow</li> <li>Low volume</li> <li>Choppy market context</li> <li>Success Rate: 55-68%</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#advanced-concepts","title":"Advanced Concepts","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#pattern-quality-scorer","title":"Pattern Quality Scorer","text":"<pre><code>def score_closing_marubozu(open, high, low, close, volume)\n  return 0 if pattern.last == 0\n\n  score = 0\n  direction = pattern.last &gt; 0 ? 1 : -1\n\n  # Body size (0-3 points)\n  body = (close.last - open.last).abs\n  body_pct = body / close.last * 100\n\n  score += 3 if body_pct &gt; 3.0    # Large body\n  score += 2 if body_pct &gt; 2.0    # Medium body\n  score += 1 if body_pct &gt; 1.5    # Acceptable body\n\n  # Closing shadow (0-3 points)\n  total_range = high.last - low.last\n\n  if direction &gt; 0  # Bullish\n    closing_shadow = high.last - close.last\n  else  # Bearish\n    closing_shadow = close.last - low.last\n  end\n\n  shadow_pct = total_range &gt; 0 ? closing_shadow / total_range * 100 : 100\n\n  score += 3 if shadow_pct &lt; 5     # Minimal shadow\n  score += 2 if shadow_pct &lt; 10    # Small shadow\n  score += 1 if shadow_pct &lt; 15    # Acceptable shadow\n\n  # Volume (0-2 points)\n  avg_vol = volume[-20..-2].sum / 19.0\n  vol_ratio = volume.last / avg_vol\n\n  score += 2 if vol_ratio &gt; 1.5\n  score += 1 if vol_ratio &gt; 1.2\n\n  # Trend context (0-2 points)\n  sma_20 = close[-20..-1].sum / 20.0\n  if direction &gt; 0\n    score += 2 if close[-2] &lt; sma_20  # Reversal from down\n    score += 1 if close[-2] &gt; sma_20  # Continuation up\n  else\n    score += 2 if close[-2] &gt; sma_20  # Reversal from up\n    score += 1 if close[-2] &lt; sma_20  # Continuation down\n  end\n\n  score  # 0-10\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#multi-pattern-analysis","title":"Multi-Pattern Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\nclosing_marubozu = SQA::TAI.cdl_closingmarubozu(open, high, low, close)\nmarubozu = SQA::TAI.cdl_marubozu(open, high, low, close)\nbelt_hold = SQA::TAI.cdl_belthold(open, high, low, close)\n\nif closing_marubozu.last != 0\n  puts \"Closing Marubozu detected\"\n\n  # Check related patterns\n  related_patterns = []\n  related_patterns &lt;&lt; \"Full Marubozu\" if marubozu.last != 0\n  related_patterns &lt;&lt; \"Belt Hold\" if belt_hold.last != 0\n\n  if related_patterns.any?\n    puts \"Also detected: #{related_patterns.join(', ')}\"\n    puts \"\\nMULTIPLE STRONG PATTERNS CONFIRM\"\n    puts \"Very high probability setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#risk-management-calculator","title":"Risk Management Calculator","text":"<pre><code>def calculate_position_size(entry, stop, account_size, risk_pct)\n  risk_amount = account_size * (risk_pct / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n\n  {\n    shares: shares,\n    position_value: shares * entry,\n    risk_amount: risk_amount,\n    risk_per_share: risk_per_share,\n    position_pct: (shares * entry / account_size * 100).round(2)\n  }\nend\n\n# Example usage\nif pattern.last != 0\n  entry = close.last\n  stop = pattern.last &gt; 0 ? low.last * 0.99 : high.last * 1.01\n\n  position = calculate_position_size(entry, stop, 100000, 2.0)\n\n  puts \"Position Sizing (2% risk):\"\n  puts \"Shares: #{position[:shares]}\"\n  puts \"Position value: $#{position[:position_value].round(2)}\"\n  puts \"Risk amount: $#{position[:risk_amount].round(2)}\"\n  puts \"Risk per share: $#{position[:risk_per_share].round(2)}\"\n  puts \"Position size: #{position[:position_pct]}% of account\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#market-context-analysis","title":"Market Context Analysis","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#support-and-resistance","title":"Support and Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_closingmarubozu(open, high, low, close)\n\nif pattern.last != 0\n  # Find recent support/resistance levels\n  lookback = 60\n\n  # Resistance levels\n  resistance_levels = []\n  high[-lookback..-1].each_with_index do |h, i|\n    if i &gt; 0 &amp;&amp; i &lt; lookback - 1\n      if h &gt; high[-lookback + i - 1] &amp;&amp; h &gt; high[-lookback + i + 1]\n        resistance_levels &lt;&lt; h\n      end\n    end\n  end\n\n  # Support levels\n  support_levels = []\n  low[-lookback..-1].each_with_index do |l, i|\n    if i &gt; 0 &amp;&amp; i &lt; lookback - 1\n      if l &lt; low[-lookback + i - 1] &amp;&amp; l &lt; low[-lookback + i + 1]\n        support_levels &lt;&lt; l\n      end\n    end\n  end\n\n  current = close.last\n\n  # Find nearest levels\n  above = resistance_levels.select { |r| r &gt; current }.min\n  below = support_levels.select { |s| s &lt; current }.max\n\n  puts \"Closing Marubozu at Key Level Analysis:\"\n  puts \"Current: $#{current.round(2)}\"\n  puts \"Nearest resistance: $#{above.round(2) if above}\"\n  puts \"Nearest support: $#{below.round(2) if below}\"\n\n  if pattern.last &gt; 0 &amp;&amp; below\n    dist_to_support = ((current - below) / current * 100).round(2)\n    puts \"\\nBullish pattern #{dist_to_support}% above support\"\n\n    if dist_to_support &lt; 2\n      puts \"STRONG - Pattern at support\"\n    end\n  elsif pattern.last &lt; 0 &amp;&amp; above\n    dist_to_resistance = ((above - current) / current * 100).round(2)\n    puts \"\\nBearish pattern #{dist_to_resistance}% below resistance\"\n\n    if dist_to_resistance &lt; 2\n      puts \"STRONG - Pattern at resistance\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#volatility-context","title":"Volatility Context","text":"<pre><code>open, high, low, close = load_ohlc_data('TSLA')\n\npattern = SQA::TAI.cdl_closingmarubozu(open, high, low, close)\natr = SQA::TAI.atr(high, low, close, period: 14)\n\nif pattern.last != 0\n  # Measure pattern size vs volatility\n  body = (close.last - open.last).abs\n  avg_atr = atr[-20..-2].sum / 19.0\n\n  body_vs_atr = (body / avg_atr).round(2)\n\n  puts \"Closing Marubozu Volatility Analysis:\"\n  puts \"Pattern body: $#{body.round(2)}\"\n  puts \"Average ATR: $#{avg_atr.round(2)}\"\n  puts \"Body is #{body_vs_atr}x ATR\"\n\n  if body_vs_atr &gt; 2.0\n    puts \"\\nEXTREMELY STRONG - Body &gt;2x ATR\"\n    puts \"Exceptional momentum\"\n  elsif body_vs_atr &gt; 1.5\n    puts \"\\nVERY STRONG - Body &gt;1.5x ATR\"\n    puts \"Strong momentum\"\n  elsif body_vs_atr &gt; 1.0\n    puts \"\\nGOOD - Body &gt;1x ATR\"\n    puts \"Decent momentum\"\n  else\n    puts \"\\nWEAK - Body &lt;1x ATR\"\n    puts \"Below average move\"\n  end\n\n  # Adjust stops based on volatility\n  if pattern.last &gt; 0\n    stop = low.last - (avg_atr * 0.5)\n  else\n    stop = high.last + (avg_atr * 0.5)\n  end\n\n  puts \"\\nVolatility-adjusted stop: $#{stop.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_closingmarubozu/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_closingmarubozu/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Marubozu</li> <li>Belt Hold</li> <li>Long Line</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#component-patterns","title":"Component Patterns","text":"<ul> <li>Long Line</li> <li>Marubozu</li> </ul>"},{"location":"indicators/patterns/cdl_closingmarubozu/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Strong close - no hesitation at session end</li> <li>One shadow - distinguishes from full Marubozu</li> <li>Body size matters - larger is stronger</li> <li>Volume confirms - high volume validates</li> <li>Context dependent - can signal continuation or reversal</li> <li>Momentum indicator - shows strength into close</li> <li>Reliable with confirmation - better with follow-through</li> <li>Common pattern - appears frequently</li> <li>Use stops - always protect positions</li> <li>Combine indicators - use with RSI, MA, volume</li> </ol>"},{"location":"indicators/patterns/cdl_closingmarubozu/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> <li>Marubozu</li> <li>Belt Hold</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/","title":"Concealing Baby Swallow Pattern","text":"<p>The Concealing Baby Swallow is a rare and reliable four-candle bullish reversal pattern that appears in downtrends. It consists of a series of black (bearish) candles followed by a final black candle that completely engulfs the previous candle, signaling an exhaustion of selling pressure. The pattern is unique as it uses bearish candles to signal a bullish reversal, similar to how a baby bird conceals itself before emerging.</p>"},{"location":"indicators/patterns/cdl_concealbabyswall/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (Bullish)</li> <li>Candles Required: 4</li> <li>Trend Context: Appears at the end of downtrends</li> <li>Reliability: High (when complete)</li> <li>Frequency: Rare (appears less than 1% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Concealing Baby Swallow example\nopen  = [95.0, 92.0, 90.0, 88.5, 91.0]\nhigh  = [95.5, 93.0, 90.2, 88.7, 91.5]\nlow   = [91.5, 88.0, 87.0, 86.5, 86.0]\nclose = [92.0, 89.0, 87.5, 87.0, 86.5]\n\n# Detect Concealing Baby Swallow pattern\npattern = SQA::TAI.cdl_concealbabyswall(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Concealing Baby Swallow detected - Rare bullish reversal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_concealbabyswall/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Concealing Baby Swallow pattern detected - +100: Bullish Concealing Baby Swallow pattern (bullish reversal signal)</p>"},{"location":"indicators/patterns/cdl_concealbabyswall/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_concealbabyswall/#four-candle-formation","title":"Four-Candle Formation","text":"<ol> <li>First Candle: Black Marubozu or long black candle</li> <li>Continues the downtrend</li> <li>Preferably a strong bearish candle</li> <li> <p>Shows strong selling pressure</p> </li> <li> <p>Second Candle: Black candle that gaps down</p> </li> <li>Opens below first candle's close</li> <li>Continues downward momentum</li> <li> <p>Should also be bearish</p> </li> <li> <p>Third Candle: Small black candle</p> </li> <li>May have shadows (not marubozu)</li> <li>Shows potential slowing of downtrend</li> <li> <p>Body is smaller than second candle</p> </li> <li> <p>Fourth Candle: Black Marubozu</p> </li> <li>Completely engulfs third candle (body and shadows)</li> <li>Opens above third candle's open</li> <li>Closes below third candle's low</li> <li>Signals exhaustion despite bearish appearance</li> </ol>"},{"location":"indicators/patterns/cdl_concealbabyswall/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>All four candles are black (bearish)</li> <li>Gap down between first and second candles</li> <li>Fourth candle engulfs third candle completely</li> <li>Pattern shows selling exhaustion through engulfing</li> <li>Despite bearish appearance, signals bullish reversal</li> <li>Volume typically decreases through pattern</li> <li>Final engulfing shows last push by sellers</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Clear downtrend: Strong trend before pattern</li> <li>Definite gap: Clear gap between first and second candles</li> <li>Complete engulfment: Fourth candle fully engulfs third</li> <li>Marubozu candles: First and fourth are marubozu-type</li> <li>Volume decline: Volume decreases through pattern</li> <li>Oversold conditions: RSI below 30 strengthens signal</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Concealing Baby Swallow:\n\n[====]              First: Black Marubozu in downtrend\n |   |\n\n     [====]         Second: Black candle gaps down\n      |   |\n\n        [==]        Third: Small black candle\n         ||\n\n         [====]     Fourth: Black Marubozu engulfs third\n          |   |\n\nPattern complete when fourth engulfs third\nAll candles black, but reversal signal\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#interpretation","title":"Interpretation","text":"<p>The Concealing Baby Swallow is paradoxical - it uses all bearish candles to signal a bullish reversal. The fourth candle's engulfing action, despite being black, shows that sellers have exhausted their strength. The pattern suggests that bears made one final push down (the engulfing move) but this represents the last of the selling pressure. The complete engulfment of the third candle, despite making new lows, indicates that the downtrend is ending and a reversal is imminent.</p>"},{"location":"indicators/patterns/cdl_concealbabyswall/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Downtrend Weak or choppy Clear downtrend Extended downtrend Gap Small or absent Modest gap Clear gap Engulfment Partial Complete body Complete with shadows Candle Quality Mixed types Mostly strong Marubozu types Volume Increasing Stable Decreasing RSI Above 40 30-40 Below 30"},{"location":"indicators/patterns/cdl_concealbabyswall/#example-pattern-detection-and-analysis","title":"Example: Pattern Detection and Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_concealbabyswall(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last == 100\n  puts \"RARE: Concealing Baby Swallow detected!\"\n\n  # Verify downtrend context\n  extended_downtrend = close[-5] &lt; sma_50[-5] &amp;&amp;\n                       close[-10] &gt; close[-5]\n\n  puts \"\\nTrend Analysis:\"\n  puts \"Extended downtrend: #{extended_downtrend}\"\n  puts \"Current RSI: #{rsi.last.round(2)}\"\n\n  # Verify engulfment\n  fourth_open = open.last\n  fourth_close = close.last\n  third_high = high[-2]\n  third_low = low[-2]\n\n  complete_engulfment = fourth_open &gt; third_high &amp;&amp;\n                        fourth_close &lt; third_low\n\n  puts \"\\nEngulfment Analysis:\"\n  puts \"Fourth opens above third high: #{fourth_open &gt; third_high}\"\n  puts \"Fourth closes below third low: #{fourth_close &lt; third_low}\"\n  puts \"Complete engulfment: #{complete_engulfment}\"\n\n  if extended_downtrend &amp;&amp; complete_engulfment &amp;&amp; rsi.last &lt; 30\n    puts \"\\n*** TEXTBOOK CONCEALING BABY SWALLOW ***\"\n    puts \"High-probability reversal signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#example-volume-confirmation","title":"Example: Volume Confirmation","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_concealbabyswall(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Concealing Baby Swallow Pattern\"\n  puts \"=\" * 60\n\n  # Analyze volume through pattern\n  vol1, vol2, vol3, vol4 = volume[-4], volume[-3], volume[-2], volume[-1]\n  avg_vol = volume[-20..-5].sum / 16.0\n\n  puts \"\\nVolume Analysis:\"\n  puts \"Candle 1: #{vol1.round(0)} (#{(vol1/avg_vol).round(2)}x avg)\"\n  puts \"Candle 2: #{vol2.round(0)} (#{(vol2/avg_vol).round(2)}x avg)\"\n  puts \"Candle 3: #{vol3.round(0)} (#{(vol3/avg_vol).round(2)}x avg)\"\n  puts \"Candle 4: #{vol4.round(0)} (#{(vol4/avg_vol).round(2)}x avg)\"\n\n  # Ideal: declining volume through pattern\n  declining = vol1 &gt; vol2 &amp;&amp; vol2 &gt; vol3 &amp;&amp; vol3 &gt; vol4\n\n  if declining\n    puts \"\\nIDEAL: Declining volume through pattern\"\n    puts \"Shows diminishing selling pressure\"\n    puts \"VERY STRONG reversal signal\"\n  elsif vol4 &lt; avg_vol\n    puts \"\\nGOOD: Low volume on final candle\"\n    puts \"Suggests selling exhaustion\"\n  else\n    puts \"\\nCAUTION: High volume on final candle\"\n    puts \"May indicate continued selling\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_concealbabyswall/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_concealbabyswall/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for bullish confirmation candle\nif pattern[-2] == 100  # Pattern 2 candles ago\n  # Look for bullish confirmation\n  if close[-1] &gt; open[-1] &amp;&amp; close.last &gt; close[-1]\n    puts \"Concealing Baby Swallow CONFIRMED\"\n    entry = close.last\n    pattern_low = [low[-4], low[-3], low[-2], low[-1]].min\n\n    puts \"Enter LONG at #{entry.round(2)}\"\n    puts \"Pattern validated by bullish follow-through\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion\nif pattern.last == 100\n  entry = close.last\n  pattern_low = [low[-4], low[-3], low[-2], low[-1]].min\n\n  puts \"Concealing Baby Swallow completed\"\n  puts \"Entry: #{entry.round(2)}\"\n  puts \"Note: Rare pattern with high reliability\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == 100\n  # Stop below pattern low\n  pattern_low = [low[-4], low[-3], low[-2], low[-1]].min\n  stop = pattern_low * 0.99  # 1% buffer\n\n  entry = close.last\n  risk = entry - stop\n  risk_pct = (risk / entry * 100).round(2)\n\n  puts \"\\nStop Loss Analysis:\"\n  puts \"Pattern low: #{pattern_low.round(2)}\"\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Risk: $#{risk.round(2)} (#{risk_pct}%)\"\n\n  # Alternative: tighter stop below fourth candle only\n  tight_stop = low.last * 0.995\n  tight_risk = entry - tight_stop\n\n  puts \"\\nTighter Stop (below 4th candle):\"\n  puts \"Stop: #{tight_stop.round(2)}\"\n  puts \"Risk: $#{tight_risk.round(2)} (#{(tight_risk/entry*100).round(2)}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == 100\n  entry = close.last\n  pattern_low = [low[-4], low[-3], low[-2], low[-1]].min\n  stop = pattern_low * 0.99\n  risk = entry - stop\n\n  # Risk-based targets\n  target_1 = entry + (risk * 2)\n  target_2 = entry + (risk * 3)\n  target_3 = entry + (risk * 4)\n\n  puts \"\\nProfit Targets:\"\n  puts \"T1 (2R): #{target_1.round(2)}\"\n  puts \"T2 (3R): #{target_2.round(2)}\"\n  puts \"T3 (4R): #{target_3.round(2)}\"\n\n  # Technical target: first candle high\n  resistance = high[-4]\n  puts \"\\nTechnical Target:\"\n  puts \"First candle high: #{resistance.round(2)}\"\n\n  # Move stop to breakeven after T1\n  puts \"\\nTrailing Stop Strategy:\"\n  puts \"After T1: Move stop to breakeven\"\n  puts \"After T2: Move stop to T1\"\n  puts \"After T3: Trail with 2x ATR\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('NVDA')\n\npattern = SQA::TAI.cdl_concealbabyswall(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_20 = SQA::TAI.sma(close, period: 20)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last == 100\n  puts \"Concealing Baby Swallow Pattern Analysis\"\n  puts \"=\" * 60\n  puts \"(RARE PATTERN - High significance)\"\n\n  # 1. Trend context\n  downtrend = close[-5] &lt; sma_20[-5] &amp;&amp; sma_20[-5] &lt; sma_50[-5]\n  extended = close[-10] &gt; close[-5]\n  context_score = downtrend &amp;&amp; extended\n\n  # 2. Engulfment quality\n  fourth_open = open.last\n  fourth_close = close.last\n  third_high = high[-2]\n  third_low = low[-2]\n  complete_engulf = fourth_open &gt; third_high &amp;&amp; fourth_close &lt; third_low\n\n  # 3. Gap present\n  first_close = close[-4]\n  second_open = open[-3]\n  gap_down = second_open &lt; first_close\n\n  # 4. Volume declining\n  volumes = [volume[-4], volume[-3], volume[-2], volume[-1]]\n  declining_volume = volumes.each_cons(2).all? { |a, b| a &gt; b }\n\n  # 5. Marubozu characteristics\n  first_body = (first_close - open[-4]).abs\n  first_range = high[-4] - low[-4]\n  first_marubozu = first_body / first_range &gt; 0.8\n\n  fourth_body = (fourth_close - open.last).abs\n  fourth_range = high.last - low.last\n  fourth_marubozu = fourth_body / fourth_range &gt; 0.8\n\n  strong_candles = first_marubozu &amp;&amp; fourth_marubozu\n\n  # 6. RSI oversold\n  oversold = rsi[-5] &lt; 30\n\n  # Calculate quality score\n  score = 0\n  score += 3 if context_score      # Critical\n  score += 3 if complete_engulf    # Critical\n  score += 2 if gap_down           # Very important\n  score += 2 if declining_volume   # Very important\n  score += 2 if strong_candles     # Important\n  score += 2 if oversold           # Important\n\n  puts \"\\nQuality Checks:\"\n  puts \"1. Downtrend context: #{context_score} #{context_score ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"2. Complete engulfment: #{complete_engulf} #{complete_engulf ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"3. Gap down present: #{gap_down} #{gap_down ? '\u2713\u2713' : '\u2717'}\"\n  puts \"4. Declining volume: #{declining_volume} #{declining_volume ? '\u2713\u2713' : '\u2717'}\"\n  puts \"5. Strong marubozu candles: #{strong_candles} #{strong_candles ? '\u2713\u2713' : '\u2717'}\"\n  puts \"6. RSI oversold: #{oversold} #{oversold ? '\u2713\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/14\"\n\n  if score &gt;= 10\n    # Calculate trade\n    entry = close.last\n    pattern_low = [low[-4], low[-3], low[-2], low[-1]].min\n    stop = pattern_low * 0.99\n    risk = entry - stop\n    target = entry + (risk * 3)\n    reward = target - entry\n    rr = (reward / risk).round(1)\n\n    puts \"\\n*** EXCEPTIONAL SETUP ***\"\n    puts \"-\" * 60\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)} (#{(reward/entry*100).round(2)}%)\"\n    puts \"R:R: 1:#{rr}\"\n\n    # Position sizing\n    account = 100000\n    risk_amount = account * 0.02  # 2% risk\n    shares = (risk_amount / risk).floor\n\n    puts \"\\nPosition Sizing (2% risk):\"\n    puts \"Shares: #{shares}\"\n    puts \"Position: $#{(shares * entry).round(2)}\"\n    puts \"Risk: $#{risk_amount.round(2)}\"\n    puts \"Potential profit: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 7\n    puts \"\\nGOOD SETUP - Decent quality\"\n    puts \"Rare pattern worth considering\"\n  else\n    puts \"\\nWEAK SETUP - Missing critical elements\"\n    puts \"Pattern incomplete or context wrong\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_concealbabyswall/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Rare (less than 1% of the time)</li> <li>Best Timeframes: Daily charts (most reliable)</li> <li>Markets: All markets, most effective in trending stocks</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 78-85% success rate</li> <li>Good pattern: 68-78% success rate</li> <li>With confirmation: 80-88% success rate</li> <li>At support: 82-90% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#average-move","title":"Average Move","text":"<ul> <li>Initial reversal: 8-15% from pattern</li> <li>Major reversals: 20-40% move</li> <li>Time to target: 10-25 candles</li> <li>Follow-through: 80% show bullish continuation</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_concealbabyswall/#dos","title":"Do's","text":"<ol> <li>Verify all four candles are black</li> <li>Confirm clear gap down between first and second</li> <li>Ensure fourth candle completely engulfs third</li> <li>Check for extended downtrend before pattern</li> <li>Look for declining volume through pattern</li> <li>Verify RSI oversold conditions</li> <li>Wait for bullish confirmation if uncertain</li> <li>Use proper stop below pattern low</li> <li>Take advantage of rarity - high reliability</li> <li>Document the pattern for learning</li> </ol>"},{"location":"indicators/patterns/cdl_concealbabyswall/#donts","title":"Don'ts","text":"<ol> <li>Don't trade without clear downtrend</li> <li>Don't accept partial engulfment</li> <li>Don't ignore volume patterns</li> <li>Don't skip gap verification</li> <li>Don't use tight stops initially</li> <li>Don't confuse with other engulfing patterns</li> <li>Don't ignore the rarity signal</li> <li>Don't overtrade - wait for perfect setup</li> <li>Don't chase after confirmation candles</li> <li>Don't skip risk management</li> </ol>"},{"location":"indicators/patterns/cdl_concealbabyswall/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Misidentifying pattern: All four candles must be black</li> <li>Accepting partial engulfment: Fourth must fully engulf third</li> <li>Ignoring gap: Gap between first and second is important</li> <li>Wrong trend context: Needs clear downtrend</li> <li>No volume analysis: Declining volume strengthens pattern</li> <li>Poor stop placement: Must protect pattern structure</li> <li>Rushing entry: Confirmation adds reliability</li> </ol>"},{"location":"indicators/patterns/cdl_concealbabyswall/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_concealbabyswall/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Three Black Crows - Bearish continuation</li> <li>Engulfing Pattern - Two-candle reversal</li> <li>Harami - Opposite of engulfing</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#component-patterns","title":"Component Patterns","text":"<ul> <li>Marubozu - First and fourth candle characteristics</li> <li>Engulfing - Fourth candle engulfs third</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_concealbabyswall/#perfect-concealing-baby-swallow","title":"Perfect Concealing Baby Swallow","text":"<ul> <li>Extended downtrend (10+ candles)</li> <li>Clear gap down between first and second</li> <li>First and fourth are perfect marubozu</li> <li>Complete engulfment with shadows</li> <li>Steadily declining volume</li> <li>RSI below 30</li> <li>Success Rate: 82-90%</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#good-concealing-baby-swallow","title":"Good Concealing Baby Swallow","text":"<ul> <li>Clear downtrend present</li> <li>Gap visible</li> <li>Strong first and fourth candles</li> <li>Complete body engulfment</li> <li>Some volume decline</li> <li>Success Rate: 72-82%</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#weak-concealing-baby-swallow","title":"Weak Concealing Baby Swallow","text":"<ul> <li>Unclear trend</li> <li>Small or no gap</li> <li>Weak candle bodies</li> <li>Partial engulfment</li> <li>Rising volume</li> <li>Success Rate: 60-70%</li> </ul>"},{"location":"indicators/patterns/cdl_concealbabyswall/#advanced-concepts","title":"Advanced Concepts","text":""},{"location":"indicators/patterns/cdl_concealbabyswall/#pattern-quality-scorer","title":"Pattern Quality Scorer","text":"<pre><code>def score_concealing_baby_swallow(open, high, low, close, volume)\n  return 0 if pattern.last == 0\n\n  score = 0\n\n  # Engulfment quality (0-4 points)\n  fourth_open = open.last\n  fourth_close = close.last\n  third_high = high[-2]\n  third_low = low[-2]\n\n  body_engulf = fourth_open &gt; open[-2] &amp;&amp; fourth_close &lt; close[-2]\n  shadow_engulf = fourth_open &gt; third_high &amp;&amp; fourth_close &lt; third_low\n\n  score += 2 if body_engulf\n  score += 2 if shadow_engulf\n\n  # Gap quality (0-2 points)\n  gap_size = close[-4] - open[-3]\n  gap_pct = gap_size / close[-4] * 100\n\n  score += 2 if gap_pct &gt; 1.0\n  score += 1 if gap_pct &gt; 0.5\n\n  # Volume decline (0-2 points)\n  volumes = [volume[-4], volume[-3], volume[-2], volume[-1]]\n  declining = volumes.each_cons(2).all? { |a, b| a &gt; b }\n  mostly_declining = volumes[-3..-1].each_cons(2).all? { |a, b| a &gt; b }\n\n  score += 2 if declining\n  score += 1 if mostly_declining\n\n  # Marubozu quality (0-2 points)\n  first_body = (close[-4] - open[-4]).abs\n  first_range = high[-4] - low[-4]\n  fourth_body = (close.last - open.last).abs\n  fourth_range = high.last - low.last\n\n  first_strong = first_body / first_range &gt; 0.8\n  fourth_strong = fourth_body / fourth_range &gt; 0.8\n\n  score += 1 if first_strong\n  score += 1 if fourth_strong\n\n  score  # 0-10\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_concealbabyswall/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Extremely rare - distinctive four-candle pattern</li> <li>All black candles - paradoxically bullish</li> <li>Engulfing action - fourth engulfs third completely</li> <li>Selling exhaustion - despite new lows, reversal imminent</li> <li>Gap important - gap down strengthens pattern</li> <li>Volume decline - shows diminishing selling pressure</li> <li>High reliability - when conditions are right</li> <li>Needs confirmation - wait for bullish follow-through</li> <li>Proper stops - below pattern low</li> <li>Rare opportunity - don't ignore when it appears</li> </ol>"},{"location":"indicators/patterns/cdl_concealbabyswall/#see-also","title":"See Also","text":"<ul> <li>Engulfing Pattern - Related engulfing concept</li> <li>Three Black Crows - Opposite bearish pattern</li> <li>Marubozu - Component candle type</li> <li>Abandoned Baby - Another rare reversal</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/","title":"Counterattack Pattern","text":"<p>The Counterattack is a powerful two-candle reversal pattern that signals a sudden shift in market momentum. It occurs when the second candle opens at a significant gap but closes at or very near the previous candle's close, showing that the opposing force has \"counterattacked\" and neutralized the initial move. This pattern demonstrates a dramatic rejection of the trend direction.</p>"},{"location":"indicators/patterns/cdl_counterattack/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Reversal (Bullish or Bearish)</li> <li>Candles Required: 2</li> <li>Trend Context: Requires established trend</li> <li>Reliability: High (strong reversal signal)</li> <li>Frequency: Uncommon (appears 2-4% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Bullish Counterattack example\nopen  = [95.0, 92.0, 88.0, 85.0, 92.0]\nhigh  = [95.5, 92.5, 88.5, 85.5, 92.5]\nlow   = [91.0, 88.0, 84.0, 82.0, 84.5]\nclose = [92.0, 88.5, 85.0, 82.5, 85.0]\n\n# Detect Counterattack pattern\npattern = SQA::TAI.cdl_counterattack(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Bullish Counterattack - Strong reversal signal!\"\nelsif pattern.last == -100\n  puts \"Bearish Counterattack - Topping pattern!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_counterattack/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Counterattack pattern detected - +100: Bullish Counterattack pattern (bullish reversal signal) - -100: Bearish Counterattack pattern (bearish reversal signal)</p>"},{"location":"indicators/patterns/cdl_counterattack/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_counterattack/#bullish-counterattack-bottom-reversal","title":"Bullish Counterattack (Bottom Reversal)","text":"<ol> <li>First Candle: Long bearish candle in downtrend</li> <li>Strong selling pressure</li> <li>Continues the prevailing downtrend</li> <li> <p>Large real body (significant price decline)</p> </li> <li> <p>Second Candle: Bullish candle with specific characteristics</p> </li> <li>Opens significantly LOWER (gap down)</li> <li>Shows initial continuation of bearish sentiment</li> <li>Rallies strongly during the session</li> <li>Closes at or very near the first candle's close</li> <li>Creates a \"counterattack\" against the downtrend</li> </ol>"},{"location":"indicators/patterns/cdl_counterattack/#bearish-counterattack-top-reversal","title":"Bearish Counterattack (Top Reversal)","text":"<ol> <li>First Candle: Long bullish candle in uptrend</li> <li>Strong buying pressure</li> <li>Continues the prevailing uptrend</li> <li> <p>Large real body (significant price advance)</p> </li> <li> <p>Second Candle: Bearish candle with specific characteristics</p> </li> <li>Opens significantly HIGHER (gap up)</li> <li>Shows initial continuation of bullish sentiment</li> <li>Declines strongly during the session</li> <li>Closes at or very near the first candle's close</li> <li>Creates a \"counterattack\" against the uptrend</li> </ol>"},{"location":"indicators/patterns/cdl_counterattack/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Gap opening: Second candle must open with a gap</li> <li>Close alignment: Closes must be very close (within 0.1-0.3%)</li> <li>Strong reversal: Second candle shows powerful reversal</li> <li>Trend negation: Gap is filled by close</li> <li>Momentum shift: Shows sudden change in control</li> <li>Large bodies: Both candles should have substantial bodies</li> <li>Psychological impact: Gap opening shakes out weak hands</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Large gap: Second candle opens with significant gap</li> <li>Exact close match: Closes align perfectly</li> <li>Long candles: Both candles have long real bodies</li> <li>Volume surge: High volume on reversal candle</li> <li>Trend context: Clear established trend before pattern</li> <li>Support/Resistance: Forms at key technical levels</li> <li>Follow-through: Next candle confirms reversal</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Bullish Counterattack (Bottom):\n\n                        Second: Opens lower,\n         [====]         closes at first's close\n          |   |         (counterattack!)\n          |   |\n    [=====]             First: Long bearish\n     |    |             (downtrend)\n\nBears attempt continuation via gap down,\nbut bulls counterattack and close at same level\n\n\nBearish Counterattack (Top):\n\n    [=====]             First: Long bullish\n     |    |             (uptrend)\n          |   |\n          |   |\n         [====]         Second: Opens higher,\n                        closes at first's close\n                        (counterattack!)\n\nBulls attempt continuation via gap up,\nbut bears counterattack and close at same level\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#interpretation","title":"Interpretation","text":"<p>The Counterattack pattern signals reversal through:</p> <ol> <li>Gap deception: Opening gap suggests continuation</li> <li>Momentum reversal: Strong move back to previous close</li> <li>Failed breakout: Gap gets completely filled</li> <li>Sentiment shift: Initial direction is rejected</li> <li>Battle of forces: Shows conflict between bulls/bears</li> <li>Line in sand: Previous close becomes key level</li> <li>Psychological impact: Traps traders on wrong side</li> </ol>"},{"location":"indicators/patterns/cdl_counterattack/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Strength Weak trend Clear trend Strong/extended trend Gap Size Small gap Medium gap Large gap Close Match &gt;0.5% apart 0.2-0.5% apart &lt;0.2% apart Candle Size Small bodies Medium bodies Long bodies Volume Low/normal Increasing High spike on 2<sup>nd</sup> Technical Level Random Near S/R At major S/R"},{"location":"indicators/patterns/cdl_counterattack/#example-bullish-counterattack-at-bottom","title":"Example: Bullish Counterattack at Bottom","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_counterattack(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == 100\n  puts \"Bullish Counterattack detected!\"\n\n  # Verify downtrend context\n  downtrend = close[-3] &lt; sma_50[-3] &amp;&amp;\n              close[-5] &gt; close[-3]\n\n  # Measure gap\n  gap_size = open[-1] - close[-2]\n  gap_pct = (gap_size.abs / close[-2] * 100).round(2)\n\n  # Measure close alignment\n  close_diff = (close[-1] - close[-2]).abs\n  close_diff_pct = (close_diff / close[-2] * 100).round(2)\n\n  puts \"\\nPattern Analysis:\"\n  puts \"Gap down: #{gap_pct}%\"\n  puts \"Close difference: #{close_diff_pct}%\"\n\n  if close_diff_pct &lt; 0.3\n    puts \"EXCELLENT close alignment!\"\n  elsif close_diff_pct &lt; 0.5\n    puts \"Good close alignment\"\n  else\n    puts \"Fair close alignment\"\n  end\n\n  # Check candle sizes\n  body1 = (close[-2] - open[-2]).abs\n  body2 = (close[-1] - open[-1]).abs\n  avg_range = (high[-10..-3] - low[-10..-3]).sum / 8.0\n\n  strong_candles = body1 &gt; avg_range * 0.6 &amp;&amp;\n                   body2 &gt; avg_range * 0.6\n\n  if downtrend &amp;&amp; gap_pct &gt; 1.0 &amp;&amp;\n     close_diff_pct &lt; 0.3 &amp;&amp; strong_candles\n    puts \"\\n*** TEXTBOOK BULLISH COUNTERATTACK ***\"\n    puts \"Bears tried to continue via gap\"\n    puts \"Bulls counterattacked strongly\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n\n    if rsi.last &lt; 35\n      puts \"OVERSOLD + Counterattack = STRONG signal\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#example-bearish-counterattack-at-top","title":"Example: Bearish Counterattack at Top","text":"<pre><code>open, high, low, close = load_ohlc_data('TSLA')\n\npattern = SQA::TAI.cdl_counterattack(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, period: 20)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == -100\n  puts \"Bearish Counterattack detected!\"\n\n  # Verify uptrend context\n  uptrend = close[-3] &gt; sma_20[-3] &amp;&amp;\n            close[-3] &gt; close[-5]\n\n  # Measure gap\n  gap_size = open[-1] - close[-2]\n  gap_pct = (gap_size / close[-2] * 100).round(2)\n\n  # Measure close alignment\n  close_diff = (close[-1] - close[-2]).abs\n  close_diff_pct = (close_diff / close[-2] * 100).round(2)\n\n  puts \"\\nPattern Analysis:\"\n  puts \"Gap up: #{gap_pct}%\"\n  puts \"Close difference: #{close_diff_pct}%\"\n\n  # Check for distribution\n  if close_diff_pct &lt; 0.3 &amp;&amp; gap_pct &gt; 1.0\n    puts \"\\nPERFECT BEARISH COUNTERATTACK\"\n    puts \"Bulls gapped up (strength)\"\n    puts \"Bears counterattacked (closed at same level)\"\n    puts \"Gap filled completely!\"\n\n    if rsi[-2] &gt; 70\n      puts \"\\nFormed in OVERBOUGHT territory\"\n      puts \"Very strong reversal signal\"\n    end\n  end\n\n  if uptrend &amp;&amp; gap_pct &gt; 1.0 &amp;&amp; close_diff_pct &lt; 0.3\n    puts \"\\n*** MAJOR TOPPING PATTERN ***\"\n    puts \"Consider protective stops on longs\"\n\n    # Estimate potential decline\n    recent_support = close[-20..-1].min\n    potential_decline = ((close.last - recent_support) / close.last * 100).round(2)\n    puts \"Potential decline to support: #{potential_decline}%\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#example-volume-confirmation","title":"Example: Volume Confirmation","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('NVDA')\n\npattern = SQA::TAI.cdl_counterattack(open, high, low, close)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n  puts \"#{direction} Counterattack detected\"\n\n  # Analyze volume pattern\n  vol1 = volume[-2]  # First candle\n  vol2 = volume[-1]  # Counterattack candle\n  avg_vol = volume[-20..-3].sum / 18.0\n\n  puts \"\\nVolume Analysis:\"\n  puts \"First candle: #{vol1.round(0)} (#{(vol1/avg_vol).round(2)}x avg)\"\n  puts \"Counterattack: #{vol2.round(0)} (#{(vol2/avg_vol).round(2)}x avg)\"\n\n  # Ideal: high volume on counterattack\n  high_counterattack_vol = vol2 &gt; avg_vol * 1.5\n\n  if high_counterattack_vol\n    puts \"\\nEXCELLENT: High volume on counterattack\"\n    puts \"Shows strong conviction in reversal\"\n    puts \"Pattern much more reliable\"\n  elsif vol2 &gt; avg_vol\n    puts \"\\nGOOD: Above average volume\"\n    puts \"Decent conviction\"\n  else\n    puts \"\\nWARNING: Low volume\"\n    puts \"Pattern less reliable\"\n  end\n\n  # Volume ratio\n  vol_ratio = vol2 / vol1\n  if vol_ratio &gt; 1.3\n    puts \"\\nCounterattack volume &gt; First candle\"\n    puts \"Very strong reversal conviction\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#example-close-alignment-analysis","title":"Example: Close Alignment Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_counterattack(open, high, low, close)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"Bullish\" : \"Bearish\"\n  puts \"#{direction} Counterattack - Close Analysis\"\n\n  # Measure how closely the closes align\n  close1 = close[-2]\n  close2 = close[-1]\n  diff = (close2 - close1).abs\n  diff_pct = (diff / close1 * 100).round(3)\n\n  puts \"\\nClose Alignment:\"\n  puts \"First close: $#{close1.round(2)}\"\n  puts \"Second close: $#{close2.round(2)}\"\n  puts \"Difference: $#{diff.round(2)} (#{diff_pct}%)\"\n\n  # Grade the alignment\n  if diff_pct &lt; 0.1\n    grade = \"PERFECT\"\n    score = 10\n  elsif diff_pct &lt; 0.2\n    grade = \"EXCELLENT\"\n    score = 9\n  elsif diff_pct &lt; 0.3\n    grade = \"VERY GOOD\"\n    score = 8\n  elsif diff_pct &lt; 0.5\n    grade = \"GOOD\"\n    score = 7\n  elsif diff_pct &lt; 0.8\n    grade = \"FAIR\"\n    score = 6\n  else\n    grade = \"POOR\"\n    score = 4\n  end\n\n  puts \"\\nAlignment Grade: #{grade} (#{score}/10)\"\n\n  # Check gap size\n  if pattern.last &gt; 0\n    gap = close1 - open[-1]  # Gap down\n  else\n    gap = open[-1] - close1  # Gap up\n  end\n\n  gap_pct = (gap / close1 * 100).round(2)\n  puts \"\\nGap size: #{gap_pct}%\"\n\n  if gap_pct &gt; 2.0 &amp;&amp; diff_pct &lt; 0.3\n    puts \"\\n*** TEXTBOOK COUNTERATTACK ***\"\n    puts \"Large gap + Perfect close alignment\"\n    puts \"Extremely reliable pattern\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_counterattack/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_counterattack/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation after pattern\nif pattern[-2] != 0  # Pattern 2 candles ago\n  direction = pattern[-2]\n\n  if direction &gt; 0  # Bullish\n    # Confirm with follow-through\n    if close[-1] &gt; close[-2] &amp;&amp; close.last &gt; close[-1]\n      puts \"Bullish Counterattack CONFIRMED\"\n      entry = close.last\n      puts \"Enter LONG at #{entry.round(2)}\"\n    end\n  else  # Bearish\n    # Confirm with follow-through\n    if close[-1] &lt; close[-2] &amp;&amp; close.last &lt; close[-1]\n      puts \"Bearish Counterattack CONFIRMED\"\n      entry = close.last\n      puts \"Enter SHORT at #{entry.round(2)}\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"LONG\" : \"SHORT\"\n  entry = close.last\n\n  # Verify close alignment\n  close_diff = (close[-1] - close[-2]).abs\n  close_diff_pct = close_diff / close[-2] * 100\n\n  if close_diff_pct &lt; 0.5\n    puts \"Counterattack completed - Enter #{direction}\"\n    puts \"Entry: #{entry.round(2)}\"\n    puts \"Close alignment: #{close_diff_pct.round(2)}%\"\n  else\n    puts \"WARNING: Poor close alignment (#{close_diff_pct.round(2)}%)\"\n    puts \"Consider waiting for confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#breakout-entry","title":"Breakout Entry","text":"<pre><code># Enter on break of pattern high/low\nif pattern[-1] != 0\n  if pattern[-1] &gt; 0  # Bullish\n    pattern_high = [high[-2], high[-1]].max\n\n    if close.last &gt; pattern_high\n      puts \"Bullish breakout above Counterattack\"\n      puts \"Entry: #{close.last.round(2)}\"\n      puts \"Pattern confirmed by breakout\"\n    end\n  else  # Bearish\n    pattern_low = [low[-2], low[-1]].min\n\n    if close.last &lt; pattern_low\n      puts \"Bearish breakdown below Counterattack\"\n      puts \"Entry: #{close.last.round(2)}\"\n      puts \"Pattern confirmed by breakdown\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last != 0\n  if pattern.last &gt; 0  # Bullish\n    # Stop below pattern low\n    pattern_low = [low[-2], low[-1]].min\n    stop = pattern_low * 0.99  # 1% buffer\n\n    puts \"Stop loss: #{stop.round(2)}\"\n    puts \"Below pattern low (invalidation point)\"\n\n    # Alternative: stop below counterattack close\n    alt_stop = (close[-1] - (close[-1] * 0.015)).round(2)\n    puts \"Alternative stop: #{alt_stop} (1.5% below close)\"\n\n  else  # Bearish\n    # Stop above pattern high\n    pattern_high = [high[-2], high[-1]].max\n    stop = pattern_high * 1.01  # 1% buffer\n\n    puts \"Stop loss: #{stop.round(2)}\"\n    puts \"Above pattern high (invalidation point)\"\n\n    # Alternative: stop above counterattack close\n    alt_stop = (close[-1] + (close[-1] * 0.015)).round(2)\n    puts \"Alternative stop: #{alt_stop} (1.5% above close)\"\n  end\n\n  # Calculate risk\n  entry = close.last\n  risk = (entry - stop).abs\n  risk_pct = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_pct}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last != 0\n  entry = close.last\n\n  if pattern.last &gt; 0  # Bullish\n    pattern_low = [low[-2], low[-1]].min\n    stop = pattern_low * 0.99\n    risk = entry - stop\n\n    # Risk-based targets\n    target_1 = entry + (risk * 2)\n    target_2 = entry + (risk * 3)\n    target_3 = entry + (risk * 5)\n\n    puts \"Bullish Targets:\"\n    puts \"T1 (2R): #{target_1.round(2)}\"\n    puts \"T2 (3R): #{target_2.round(2)}\"\n    puts \"T3 (5R): #{target_3.round(2)}\"\n\n    # Technical targets\n    resistance = close[-30..-1].max\n    puts \"\\nResistance: #{resistance.round(2)}\"\n\n    # Pattern-based target (gap fill)\n    if open[-2] &gt; close[-2]  # Was gap down\n      gap_top = open[-2]\n      puts \"Gap fill target: #{gap_top.round(2)}\"\n    end\n\n  else  # Bearish\n    pattern_high = [high[-2], high[-1]].max\n    stop = pattern_high * 1.01\n    risk = stop - entry\n\n    # Risk-based targets\n    target_1 = entry - (risk * 2)\n    target_2 = entry - (risk * 3)\n    target_3 = entry - (risk * 5)\n\n    puts \"Bearish Targets:\"\n    puts \"T1 (2R): #{target_1.round(2)}\"\n    puts \"T2 (3R): #{target_2.round(2)}\"\n    puts \"T3 (5R): #{target_3.round(2)}\"\n\n    # Technical targets\n    support = close[-30..-1].min\n    puts \"\\nSupport: #{support.round(2)}\"\n\n    # Pattern-based target (gap fill)\n    if open[-2] &lt; close[-2]  # Was gap up\n      gap_bottom = open[-2]\n      puts \"Gap fill target: #{gap_bottom.round(2)}\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_counterattack(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_20 = SQA::TAI.sma(close, period: 20)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last != 0\n  direction = pattern.last &gt; 0 ? \"BULLISH\" : \"BEARISH\"\n\n  puts \"#{direction} Counterattack Pattern Analysis\"\n  puts \"=\" * 60\n\n  # 1. Trend context\n  if pattern.last &gt; 0\n    downtrend = close[-3] &lt; sma_20[-3] &amp;&amp; sma_20[-3] &lt; sma_50[-3]\n    extended = close[-10] &gt; close[-3]\n    context_score = downtrend &amp;&amp; extended\n  else\n    uptrend = close[-3] &gt; sma_20[-3] &amp;&amp; sma_20[-3] &gt; sma_50[-3]\n    extended = close[-3] &gt; close[-10]\n    context_score = uptrend &amp;&amp; extended\n  end\n\n  # 2. Gap quality\n  if pattern.last &gt; 0\n    gap = close[-2] - open[-1]\n  else\n    gap = open[-1] - close[-2]\n  end\n  gap_pct = (gap / close[-2] * 100).round(2)\n  significant_gap = gap_pct &gt; 1.0\n\n  # 3. Close alignment\n  close_diff = (close[-1] - close[-2]).abs\n  close_diff_pct = (close_diff / close[-2] * 100).round(3)\n  excellent_alignment = close_diff_pct &lt; 0.3\n\n  # 4. Candle size\n  body1 = (close[-2] - open[-2]).abs\n  body2 = (close[-1] - open[-1]).abs\n  avg_range = (high[-10..-3] - low[-10..-3]).sum / 8.0\n  strong_candles = body1 &gt; avg_range * 0.5 &amp;&amp; body2 &gt; avg_range * 0.5\n\n  # 5. Volume\n  vol1, vol2 = volume[-2], volume[-1]\n  avg_vol = volume[-20..-3].sum / 18.0\n  high_counterattack_vol = vol2 &gt; avg_vol * 1.3\n\n  # 6. RSI extreme\n  if pattern.last &gt; 0\n    extreme = rsi[-2] &lt; 35\n  else\n    extreme = rsi[-2] &gt; 65\n  end\n\n  # Calculate quality score\n  score = 0\n  score += 3 if context_score          # Critical\n  score += 2 if significant_gap        # Very important\n  score += 3 if excellent_alignment    # Critical\n  score += 2 if strong_candles         # Very important\n  score += 2 if high_counterattack_vol # Important\n  score += 2 if extreme                # Important\n\n  puts \"\\nQuality Checks:\"\n  puts \"1. Trend context: #{context_score} #{context_score ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"2. Significant gap (#{gap_pct}%): #{significant_gap} #{significant_gap ? '\u2713\u2713' : '\u2717'}\"\n  puts \"3. Close alignment (#{close_diff_pct}%): #{excellent_alignment} #{excellent_alignment ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"4. Strong candles: #{strong_candles} #{strong_candles ? '\u2713\u2713' : '\u2717'}\"\n  puts \"5. High volume: #{high_counterattack_vol} #{high_counterattack_vol ? '\u2713\u2713' : '\u2717'}\"\n  puts \"6. RSI extreme: #{extreme} #{extreme ? '\u2713\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/14\"\n\n  if score &gt;= 10\n    # Calculate trade\n    entry = close.last\n\n    if pattern.last &gt; 0\n      pattern_low = [low[-2], low[-1]].min\n      stop = pattern_low * 0.99\n      risk = entry - stop\n      resistance = close[-40..-1].max\n      target = resistance\n      reward = target - entry\n    else\n      pattern_high = [high[-2], high[-1]].max\n      stop = pattern_high * 1.01\n      risk = stop - entry\n      support = close[-40..-1].min\n      target = support\n      reward = entry - target\n    end\n\n    rr = (reward / risk).round(1)\n\n    puts \"\\n*** EXCELLENT SETUP ***\"\n    puts \"-\" * 60\n    puts \"Direction: #{direction}\"\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)} (#{(reward/entry*100).round(2)}%)\"\n    puts \"R:R: 1:#{rr}\"\n\n    # Position sizing\n    account = 100000\n    risk_amount = account * 0.02  # 2% risk\n    shares = (risk_amount / risk).floor\n\n    puts \"\\nPosition Sizing (2% risk):\"\n    puts \"Shares: #{shares}\"\n    puts \"Position: $#{(shares * entry).round(2)}\"\n    puts \"Risk: $#{risk_amount.round(2)}\"\n    puts \"Potential profit: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 7\n    puts \"\\nGOOD SETUP - Consider trading\"\n    puts \"Decent pattern quality\"\n\n  else\n    puts \"\\nWEAK SETUP - Pattern incomplete\"\n    puts \"Missing critical elements\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_counterattack/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Uncommon (2-4% of patterns)</li> <li>Best Timeframes: Daily and 4-hour charts (most reliable)</li> <li>Markets: All markets, especially liquid stocks</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 78-85% success rate</li> <li>Good pattern: 68-78% success rate</li> <li>Average pattern: 58-68% success rate</li> <li>With volume: 75-82% success rate</li> <li>At major S/R: 80-88% success rate</li> <li>RSI extreme: 76-84% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#average-move","title":"Average Move","text":"<ul> <li>Initial reversal: 8-15% from pattern</li> <li>Major reversals: 20-40% move</li> <li>Time to target: 10-25 candles</li> <li>Follow-through: 72% show continuation</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_counterattack/#dos","title":"Do's","text":"<ol> <li>Verify strong trend before pattern</li> <li>Measure gap size (larger is better)</li> <li>Check close alignment (tighter is better)</li> <li>Confirm with volume on counterattack</li> <li>Use at major support/resistance</li> <li>Check RSI for extreme readings</li> <li>Wait for confirmation on weaker patterns</li> <li>Consider candle body sizes</li> <li>Combine with other indicators</li> <li>Set stops beyond pattern extremes</li> </ol>"},{"location":"indicators/patterns/cdl_counterattack/#donts","title":"Don'ts","text":"<ol> <li>Don't trade without clear trend</li> <li>Don't accept small gaps</li> <li>Don't ignore close alignment quality</li> <li>Don't trade on low volume</li> <li>Don't use in ranging markets</li> <li>Don't ignore RSI levels</li> <li>Don't chase after several candles</li> <li>Don't use tight stops</li> <li>Don't trade every occurrence</li> <li>Don't ignore follow-through action</li> </ol>"},{"location":"indicators/patterns/cdl_counterattack/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Poor close alignment: Closes must be very close</li> <li>Insufficient gap: Gap must be significant</li> <li>Wrong trend context: Needs established trend</li> <li>Ignoring volume: Volume confirms conviction</li> <li>Weak candles: Bodies should be substantial</li> <li>No confirmation: Wait for follow-through on weaker setups</li> <li>Bad stop placement: Must protect pattern structure</li> </ol>"},{"location":"indicators/patterns/cdl_counterattack/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_counterattack/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Piercing Pattern - Bullish reversal, different structure</li> <li>Dark Cloud Cover - Bearish reversal, different structure</li> <li>Engulfing - Reversal with engulfing action</li> <li>Meeting Lines - Very similar pattern concept</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#component-patterns","title":"Component Patterns","text":"<ul> <li>Long Line - First candle characteristics</li> <li>Marubozu - Ideal candle types</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_counterattack/#perfect-counterattack","title":"Perfect Counterattack","text":"<ul> <li>Extended trend before pattern</li> <li>Gap &gt; 1.5%</li> <li>Closes within 0.2%</li> <li>Long bodies on both candles</li> <li>High volume on counterattack</li> <li>At major support/resistance</li> <li>RSI extreme</li> <li>Success Rate: 82-88%</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#good-counterattack","title":"Good Counterattack","text":"<ul> <li>Clear trend context</li> <li>Gap &gt; 0.8%</li> <li>Closes within 0.5%</li> <li>Medium-large bodies</li> <li>Above average volume</li> <li>Success Rate: 70-78%</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#weak-counterattack","title":"Weak Counterattack","text":"<ul> <li>Unclear trend</li> <li>Small gap</li> <li>Closes &gt; 0.5% apart</li> <li>Small candle bodies</li> <li>Low volume</li> <li>Success Rate: 55-65%</li> </ul>"},{"location":"indicators/patterns/cdl_counterattack/#advanced-concepts","title":"Advanced Concepts","text":""},{"location":"indicators/patterns/cdl_counterattack/#pattern-quality-scorer","title":"Pattern Quality Scorer","text":"<pre><code>def score_counterattack(open, high, low, close, volume)\n  return 0 if pattern.last == 0\n\n  score = 0\n  direction = pattern.last &gt; 0 ? 1 : -1\n\n  # Gap quality (0-3 points)\n  if direction &gt; 0\n    gap = close[-2] - open[-1]\n  else\n    gap = open[-1] - close[-2]\n  end\n  gap_pct = (gap / close[-2] * 100).abs\n\n  score += 3 if gap_pct &gt; 2.0\n  score += 2 if gap_pct &gt; 1.0\n  score += 1 if gap_pct &gt; 0.5\n\n  # Close alignment (0-4 points)\n  close_diff = (close[-1] - close[-2]).abs\n  close_diff_pct = (close_diff / close[-2] * 100)\n\n  score += 4 if close_diff_pct &lt; 0.1\n  score += 3 if close_diff_pct &lt; 0.2\n  score += 2 if close_diff_pct &lt; 0.3\n  score += 1 if close_diff_pct &lt; 0.5\n\n  # Candle strength (0-2 points)\n  body1 = (close[-2] - open[-2]).abs\n  body2 = (close[-1] - open[-1]).abs\n  avg_range = (high[-10..-3] - low[-10..-3]).sum / 8.0\n\n  score += 2 if body1 &gt; avg_range * 0.7 &amp;&amp; body2 &gt; avg_range * 0.7\n  score += 1 if body1 &gt; avg_range * 0.5 &amp;&amp; body2 &gt; avg_range * 0.5\n\n  # Volume (0-2 points)\n  avg_vol = volume[-20..-3].sum / 18.0\n  score += 2 if volume[-1] &gt; avg_vol * 1.5\n  score += 1 if volume[-1] &gt; avg_vol * 1.2\n\n  score  # 0-11\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_counterattack/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Gap opening - Second candle must gap in trend direction</li> <li>Close alignment - Closes must be very close together</li> <li>Counterattack - Second candle reverses and closes at first's close</li> <li>Strong candles - Both should have substantial bodies</li> <li>Volume confirmation - High volume on counterattack is ideal</li> <li>Trend context - Requires established trend</li> <li>Psychological - Traps traders expecting continuation</li> <li>Failed breakout - Gap gets filled completely</li> <li>Reliability - Strong pattern when properly formed</li> <li>Confirmation - Follow-through strengthens signal</li> </ol>"},{"location":"indicators/patterns/cdl_counterattack/#see-also","title":"See Also","text":"<ul> <li>Piercing Pattern - Related bullish reversal</li> <li>Dark Cloud Cover - Related bearish reversal</li> <li>Engulfing - Different reversal mechanism</li> <li>Meeting Lines - Similar close concept</li> <li>Marubozu - Ideal candle type</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/","title":"Dark Cloud Cover Pattern","text":"<p>The Dark Cloud Cover is a powerful two-candle bearish reversal pattern that appears at the end of an uptrend. It consists of a long bullish candle followed by a bearish candle that opens above the first candle's high but closes more than halfway into the first candle's body. This pattern signals that bears have overwhelmed bulls and suggests a potential trend reversal from up to down.</p>"},{"location":"indicators/patterns/cdl_darkcloudcover/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Bearish Reversal</li> <li>Candles Required: 2</li> <li>Trend Context: Must appear in uptrend</li> <li>Reliability: High (strong reversal indicator)</li> <li>Frequency: Common (appears 4-6% of the time)</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Dark Cloud Cover example\nopen  = [90.0, 94.0, 98.0, 102.0, 104.0]\nhigh  = [90.5, 94.5, 98.5, 102.5, 105.0]\nlow   = [89.0, 93.0, 97.0, 101.0, 98.5]\nclose = [94.0, 98.0, 102.0, 103.5, 99.5]\n\n# Detect Dark Cloud Cover pattern\npattern = SQA::TAI.cdl_darkcloudcover(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Dark Cloud Cover detected - Bearish reversal signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_darkcloudcover/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Dark Cloud Cover pattern detected - -100: Dark Cloud Cover pattern (bearish reversal signal)</p> <p>Note: This is a bearish-only pattern. No positive values are returned.</p>"},{"location":"indicators/patterns/cdl_darkcloudcover/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_darkcloudcover/#dark-cloud-cover-formation","title":"Dark Cloud Cover Formation","text":"<ol> <li>First Candle: Long bullish (white/green) candle</li> <li>Strong buying pressure</li> <li>Part of existing uptrend</li> <li>Large real body showing conviction</li> <li> <p>Ideally closes near its high</p> </li> <li> <p>Second Candle: Bearish (black/red) candle with specific characteristics</p> </li> <li>Opens ABOVE the first candle's high (gap up)</li> <li>Shows initial bullish continuation</li> <li>Reverses and closes BELOW the midpoint of first candle's body</li> <li>Demonstrates bear takeover during session</li> <li>Does NOT close below first candle's low</li> </ol>"},{"location":"indicators/patterns/cdl_darkcloudcover/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Gap up opening: Second candle must gap above first</li> <li>Penetration depth: Must close &gt;50% into first candle body</li> <li>Body overlap: Significant penetration but not full engulfing</li> <li>Trend context: Requires established uptrend</li> <li>Psychological shift: Bulls lose control to bears</li> <li>Failed breakout: Gap up fails completely</li> <li>Distribution signal: Often marks institutional selling</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#ideal-pattern-features","title":"Ideal Pattern Features","text":"<ul> <li>Strong uptrend: Clear established uptrend before pattern</li> <li>Gap opening: Second candle gaps significantly higher</li> <li>Deep penetration: Close well below 50% mark (70%+ is ideal)</li> <li>Long candles: Both candles have substantial bodies</li> <li>Volume surge: High volume on second (bearish) candle</li> <li>Resistance level: Forms at key resistance</li> <li>Equal lengths: Both candles similar size</li> <li>Clean pattern: Minimal shadows on second candle</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#visual-pattern","title":"Visual Pattern","text":"<pre><code>Dark Cloud Cover (Top Reversal):\n\n    [=====]             First: Long bullish\n     |    |             (uptrend continuation)\n          |\n          [====]        Second: Opens higher (gap),\n           |   |        closes deep into first\n           |   |        (bear takeover)\n\nGap up shows strength, but close shows weakness\nBears overwhelm bulls during the session\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#interpretation","title":"Interpretation","text":"<p>The Dark Cloud Cover signals bearish reversal through:</p> <ol> <li>False strength: Gap up suggests continued bullish momentum</li> <li>Reversal action: Strong decline during session shows bear strength</li> <li>Penetration: Closing below midpoint negates bullish candle</li> <li>Distribution: Often marks smart money selling</li> <li>Sentiment shift: Bulls trapped, bears in control</li> <li>Failed breakout: New highs rejected completely</li> <li>Trend exhaustion: Uptrend losing momentum</li> </ol>"},{"location":"indicators/patterns/cdl_darkcloudcover/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Strength Weak uptrend Clear uptrend Strong/extended uptrend Penetration 50-60% 60-75% 75%+ into body Candle Size Small bodies Medium bodies Long bodies Gap Size Small gap Medium gap Large gap Volume Low/normal Increasing High spike on 2<sup>nd</sup> Technical Level Random Near resistance At major resistance"},{"location":"indicators/patterns/cdl_darkcloudcover/#example-dark-cloud-cover-at-resistance","title":"Example: Dark Cloud Cover at Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_darkcloudcover(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, period: 20)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == -100\n  puts \"Dark Cloud Cover detected!\"\n\n  # Verify uptrend context\n  uptrend = close[-3] &gt; sma_20[-3] &amp;&amp;\n            close[-3] &gt; close[-10]\n\n  # Calculate penetration depth\n  first_body = close[-2] - open[-2]\n  penetration = close[-2] - close[-1]\n  penetration_pct = (penetration / first_body * 100).round(2)\n\n  puts \"\\nPenetration: #{penetration_pct}%\"\n\n  if penetration_pct &gt; 75\n    puts \"DEEP penetration - Very strong signal\"\n  elsif penetration_pct &gt; 60\n    puts \"Good penetration - Strong signal\"\n  else\n    puts \"Minimum penetration - Fair signal\"\n  end\n\n  # Check gap\n  gap = open[-1] - high[-2]\n  gap_pct = (gap / close[-2] * 100).round(2)\n  puts \"Gap up: #{gap_pct}%\"\n\n  # Check resistance\n  resistance = close[-30..-3].max\n  at_resistance = (high[-1] - resistance).abs &lt; resistance * 0.02\n\n  if uptrend &amp;&amp; penetration_pct &gt; 60 &amp;&amp; at_resistance\n    puts \"\\n*** TEXTBOOK DARK CLOUD COVER ***\"\n    puts \"At resistance level\"\n    puts \"Deep penetration into bullish candle\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n\n    if rsi.last &gt; 70\n      puts \"OVERBOUGHT + Dark Cloud = VERY STRONG bearish signal\"\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#example-volume-analysis","title":"Example: Volume Analysis","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\npattern = SQA::TAI.cdl_darkcloudcover(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Dark Cloud Cover detected\"\n\n  # Analyze volume pattern\n  vol1 = volume[-2]  # Bullish candle\n  vol2 = volume[-1]  # Dark cloud candle\n  avg_vol = volume[-20..-3].sum / 18.0\n\n  puts \"\\nVolume Analysis:\"\n  puts \"Bullish candle: #{vol1.round(0)} (#{(vol1/avg_vol).round(2)}x avg)\"\n  puts \"Dark cloud: #{vol2.round(0)} (#{(vol2/avg_vol).round(2)}x avg)\"\n\n  # Ideal: high volume on dark cloud (distribution)\n  high_dark_vol = vol2 &gt; avg_vol * 1.5\n\n  if high_dark_vol\n    puts \"\\nEXCELLENT: High volume on dark cloud\"\n    puts \"Shows institutional distribution\"\n    puts \"Pattern very reliable\"\n  elsif vol2 &gt; vol1\n    puts \"\\nGOOD: Dark cloud volume &gt; Bullish candle\"\n    puts \"Shows selling pressure\"\n  else\n    puts \"\\nWARNING: Low volume\"\n    puts \"Pattern less reliable - may be false signal\"\n  end\n\n  # Volume ratio\n  vol_ratio = vol2 / vol1\n  if vol_ratio &gt; 1.5\n    puts \"\\nDark cloud volume 1.5x+ bullish candle\"\n    puts \"Very strong distribution signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#example-penetration-depth-analysis","title":"Example: Penetration Depth Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\npattern = SQA::TAI.cdl_darkcloudcover(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Dark Cloud Cover - Penetration Analysis\"\n\n  # Measure penetration depth precisely\n  first_open = open[-2]\n  first_close = close[-2]\n  first_body = first_close - first_open\n\n  second_close = close[-1]\n\n  # Calculate how far into body\n  penetration = first_close - second_close\n  penetration_pct = (penetration / first_body * 100).round(2)\n\n  # Distance from midpoint\n  midpoint = first_open + (first_body / 2.0)\n  distance_from_mid = midpoint - second_close\n  distance_pct = (distance_from_mid / first_body * 100).round(2)\n\n  puts \"\\nPenetration Details:\"\n  puts \"First candle body: $#{first_body.round(2)}\"\n  puts \"Penetration: $#{penetration.round(2)}\"\n  puts \"Penetration %: #{penetration_pct}%\"\n  puts \"Distance below midpoint: #{distance_pct}%\"\n\n  # Grade the penetration\n  if penetration_pct &gt;= 80\n    grade = \"EXCEPTIONAL\"\n    score = 10\n  elsif penetration_pct &gt;= 70\n    grade = \"EXCELLENT\"\n    score = 9\n  elsif penetration_pct &gt;= 60\n    grade = \"VERY GOOD\"\n    score = 8\n  elsif penetration_pct &gt;= 55\n    grade = \"GOOD\"\n    score = 7\n  elsif penetration_pct &gt;= 50\n    grade = \"ACCEPTABLE\"\n    score = 6\n  else\n    grade = \"INSUFFICIENT\"\n    score = 4\n  end\n\n  puts \"\\nPenetration Grade: #{grade} (#{score}/10)\"\n\n  if penetration_pct &gt;= 70\n    puts \"\\nDeep penetration - High probability reversal\"\n  elsif penetration_pct &gt;= 60\n    puts \"\\nGood penetration - Solid reversal signal\"\n  elsif penetration_pct &gt;= 50\n    puts \"\\nMinimum penetration - Monitor for confirmation\"\n  else\n    puts \"\\nWARNING: Insufficient penetration\"\n    puts \"May not be valid Dark Cloud Cover\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#example-gap-quality-analysis","title":"Example: Gap Quality Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\npattern = SQA::TAI.cdl_darkcloudcover(open, high, low, close)\n\nif pattern.last == -100\n  puts \"Dark Cloud Cover - Gap Analysis\"\n\n  # Measure gap\n  gap = open[-1] - high[-2]\n  gap_pct = (gap / close[-2] * 100).round(2)\n\n  puts \"\\nGap Details:\"\n  puts \"First candle high: $#{high[-2].round(2)}\"\n  puts \"Second candle open: $#{open[-1].round(2)}\"\n  puts \"Gap size: $#{gap.round(2)} (#{gap_pct}%)\"\n\n  if gap &gt; 0\n    puts \"TRUE gap present - Opens above first high\"\n\n    if gap_pct &gt; 1.0\n      puts \"LARGE gap - Very bullish opening\"\n      puts \"Reversal even more significant\"\n    elsif gap_pct &gt; 0.3\n      puts \"CLEAR gap - Bullish opening rejected\"\n    else\n      puts \"Small gap - Still valid pattern\"\n    end\n  elsif gap &gt; -0.01  # Effectively no gap but opens at/near high\n    puts \"Opens at first candle high - Valid\"\n  else\n    puts \"WARNING: No gap - Weaker pattern\"\n    puts \"Opens below previous high\"\n  end\n\n  # How far did it reverse from the high?\n  reversal = high[-1] - close[-1]\n  reversal_pct = (reversal / high[-1] * 100).round(2)\n\n  puts \"\\nReversal from high: $#{reversal.round(2)} (#{reversal_pct}%)\"\n\n  if reversal_pct &gt; 3.0\n    puts \"STRONG intraday reversal\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_darkcloudcover/#entry-rules","title":"Entry Rules","text":""},{"location":"indicators/patterns/cdl_darkcloudcover/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation after pattern\nif pattern[-2] == -100  # Pattern 2 candles ago\n  # Confirm with follow-through\n  if close[-1] &lt; close[-2] &amp;&amp; close.last &lt; close[-1]\n    puts \"Dark Cloud Cover CONFIRMED\"\n    entry = close.last\n    puts \"Enter SHORT at #{entry.round(2)}\"\n  elsif close.last &lt; [low[-2], low[-1]].min\n    puts \"Breakdown below pattern - Strong confirmation\"\n    entry = close.last\n    puts \"Enter SHORT at #{entry.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on pattern completion\nif pattern.last == -100\n  entry = close.last\n\n  # Verify penetration is sufficient\n  first_body = close[-2] - open[-2]\n  penetration = close[-2] - close[-1]\n  penetration_pct = (penetration / first_body * 100)\n\n  if penetration_pct &gt;= 60\n    puts \"Dark Cloud Cover completed - Enter SHORT\"\n    puts \"Entry: #{entry.round(2)}\"\n    puts \"Penetration: #{penetration_pct.round(1)}%\"\n  else\n    puts \"WARNING: Weak penetration (#{penetration_pct.round(1)}%)\"\n    puts \"Consider waiting for confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#pullback-entry","title":"Pullback Entry","text":"<pre><code># Enter on pullback to resistance\nif pattern[-2..-1].include?(-100)\n  pattern_high = high[-2..-1].max\n  resistance = pattern_high\n\n  # Wait for pullback to resistance that fails\n  if high.last &gt;= resistance * 0.98 &amp;&amp; close.last &lt; resistance * 0.97\n    puts \"Pullback to resistance rejected\"\n    puts \"Entry: #{close.last.round(2)}\"\n    puts \"Classic resistance test after Dark Cloud\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == -100\n  # Stop above pattern high\n  pattern_high = [high[-2], high[-1]].max\n  stop = pattern_high * 1.01  # 1% buffer\n\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Above pattern high (invalidation point)\"\n\n  # Alternative: stop above second candle open\n  alt_stop = open[-1] * 1.005\n  puts \"Alternative stop: #{alt_stop.round(2)} (above gap open)\"\n\n  # Tighter stop for aggressive traders\n  tight_stop = high[-1] * 1.005\n  puts \"Tight stop: #{tight_stop.round(2)} (above dark cloud high)\"\n\n  # Calculate risk\n  entry = close.last\n  risk = stop - entry\n  risk_pct = (risk / entry * 100).round(2)\n  puts \"Risk: $#{risk.round(2)} (#{risk_pct}%)\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == -100\n  entry = close.last\n  pattern_high = [high[-2], high[-1]].max\n  stop = pattern_high * 1.01\n  risk = stop - entry\n\n  # Risk-based targets\n  target_1 = entry - (risk * 2)\n  target_2 = entry - (risk * 3)\n  target_3 = entry - (risk * 5)\n\n  puts \"Bearish Targets:\"\n  puts \"T1 (2R): #{target_1.round(2)}\"\n  puts \"T2 (3R): #{target_2.round(2)}\"\n  puts \"T3 (5R): #{target_3.round(2)}\"\n\n  # Technical targets\n  support = close[-30..-1].min\n  puts \"\\nSupport: #{support.round(2)}\"\n\n  # Pattern-based target (height projection)\n  first_body = close[-2] - open[-2]\n  pattern_target = close[-1] - first_body\n  puts \"Pattern projection: #{pattern_target.round(2)}\"\n\n  # Fibonacci retracement targets\n  recent_low = close[-20..-1].min\n  range = pattern_high - recent_low\n  fib_382 = pattern_high - (range * 0.382)\n  fib_500 = pattern_high - (range * 0.500)\n  fib_618 = pattern_high - (range * 0.618)\n\n  puts \"\\nFibonacci Targets:\"\n  puts \"38.2%: #{fib_382.round(2)}\"\n  puts \"50.0%: #{fib_500.round(2)}\"\n  puts \"61.8%: #{fib_618.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\npattern = SQA::TAI.cdl_darkcloudcover(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_20 = SQA::TAI.sma(close, period: 20)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last == -100\n  puts \"Dark Cloud Cover Pattern Analysis\"\n  puts \"=\" * 60\n\n  # 1. Trend context\n  uptrend = close[-3] &gt; sma_20[-3] &amp;&amp; sma_20[-3] &gt; sma_50[-3]\n  extended = close[-3] &gt; close[-10]\n  context_score = uptrend &amp;&amp; extended\n\n  # 2. Penetration depth\n  first_body = close[-2] - open[-2]\n  penetration = close[-2] - close[-1]\n  penetration_pct = (penetration / first_body * 100)\n  deep_penetration = penetration_pct &gt;= 65\n\n  # 3. Gap quality\n  gap = open[-1] - high[-2]\n  gap_pct = (gap / close[-2] * 100)\n  has_gap = gap &gt; 0\n\n  # 4. Candle strength\n  body1 = close[-2] - open[-2]\n  body2 = (open[-1] - close[-1]).abs\n  avg_range = (high[-10..-3] - low[-10..-3]).sum / 8.0\n  strong_candles = body1 &gt; avg_range * 0.5 &amp;&amp; body2 &gt; avg_range * 0.5\n\n  # 5. Volume\n  vol1, vol2 = volume[-2], volume[-1]\n  avg_vol = volume[-20..-3].sum / 18.0\n  high_dark_vol = vol2 &gt; avg_vol * 1.3\n\n  # 6. Resistance level\n  resistance = close[-30..-3].max\n  at_resistance = (high[-1] - resistance).abs &lt; resistance * 0.03\n\n  # 7. RSI overbought\n  overbought = rsi[-2] &gt; 65\n\n  # Calculate quality score\n  score = 0\n  score += 3 if context_score      # Critical\n  score += 3 if deep_penetration   # Critical\n  score += 1 if has_gap\n  score += 2 if strong_candles     # Very important\n  score += 2 if high_dark_vol      # Important\n  score += 2 if at_resistance      # Important\n  score += 2 if overbought         # Important\n\n  puts \"\\nQuality Checks:\"\n  puts \"1. Uptrend context: #{context_score} #{context_score ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"2. Deep penetration (#{penetration_pct.round(1)}%): #{deep_penetration} #{deep_penetration ? '\u2713\u2713\u2713' : '\u2717'}\"\n  puts \"3. Gap present: #{has_gap} #{has_gap ? '\u2713' : '\u2717'}\"\n  puts \"4. Strong candles: #{strong_candles} #{strong_candles ? '\u2713\u2713' : '\u2717'}\"\n  puts \"5. High volume: #{high_dark_vol} #{high_dark_vol ? '\u2713\u2713' : '\u2717'}\"\n  puts \"6. At resistance: #{at_resistance} #{at_resistance ? '\u2713\u2713' : '\u2717'}\"\n  puts \"7. RSI overbought: #{overbought} #{overbought ? '\u2713\u2713' : '\u2717'}\"\n  puts \"\\nTotal Score: #{score}/15\"\n\n  if score &gt;= 11\n    # Calculate trade\n    entry = close.last\n    pattern_high = [high[-2], high[-1]].max\n    stop = pattern_high * 1.01\n    risk = stop - entry\n    support = close[-40..-1].min\n    target = support\n    reward = entry - target\n    rr = (reward / risk).round(1)\n\n    puts \"\\n*** EXCELLENT BEARISH SETUP ***\"\n    puts \"-\" * 60\n    puts \"Direction: SHORT\"\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n    puts \"Reward: $#{reward.round(2)} (#{(reward/entry*100).round(2)}%)\"\n    puts \"R:R: 1:#{rr}\"\n\n    # Position sizing\n    account = 100000\n    risk_amount = account * 0.02  # 2% risk\n    shares = (risk_amount / risk).floor\n\n    puts \"\\nPosition Sizing (2% risk):\"\n    puts \"Shares: #{shares}\"\n    puts \"Position: $#{(shares * entry).round(2)}\"\n    puts \"Risk: $#{risk_amount.round(2)}\"\n    puts \"Potential profit: $#{(shares * reward).round(2)}\"\n\n  elsif score &gt;= 8\n    puts \"\\nGOOD SETUP - Consider shorting\"\n    puts \"Decent pattern quality\"\n\n  else\n    puts \"\\nWEAK SETUP - Pattern incomplete\"\n    puts \"Missing critical elements\"\n    puts \"Consider waiting for better setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_darkcloudcover/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Common (4-6% of patterns)</li> <li>Best Timeframes: Daily and 4-hour charts (most reliable)</li> <li>Markets: All markets, very common in stocks</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#success-rate","title":"Success Rate","text":"<ul> <li>Perfect pattern: 75-83% success rate</li> <li>Good pattern: 65-75% success rate</li> <li>Average pattern: 55-65% success rate</li> <li>With volume: 72-80% success rate</li> <li>At resistance: 78-85% success rate</li> <li>Overbought RSI: 74-82% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#average-move","title":"Average Move","text":"<ul> <li>Initial decline: 8-15% from pattern</li> <li>Major declines: 20-40% move possible</li> <li>Time to target: 10-25 candles</li> <li>Follow-through: 68% show continuation</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_darkcloudcover/#dos","title":"Do's","text":"<ol> <li>Verify established uptrend before pattern</li> <li>Measure penetration depth (&gt;60% minimum)</li> <li>Confirm gap opening (stronger signal)</li> <li>Check volume on dark cloud candle</li> <li>Look for pattern at resistance levels</li> <li>Use RSI to confirm overbought conditions</li> <li>Wait for confirmation on weaker patterns</li> <li>Combine with other bearish indicators</li> <li>Consider candle body lengths</li> <li>Set stops above pattern high</li> </ol>"},{"location":"indicators/patterns/cdl_darkcloudcover/#donts","title":"Don'ts","text":"<ol> <li>Don't trade without uptrend context</li> <li>Don't accept &lt;50% penetration</li> <li>Don't ignore volume (low volume = weak)</li> <li>Don't use in downtrends (not valid)</li> <li>Don't ignore resistance levels</li> <li>Don't chase after several candles</li> <li>Don't use overly tight stops</li> <li>Don't trade every occurrence</li> <li>Don't ignore confirmation signals</li> <li>Don't forget to check RSI</li> </ol>"},{"location":"indicators/patterns/cdl_darkcloudcover/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Insufficient penetration: Must close &gt;50% into first body</li> <li>Wrong trend: Pattern only valid in uptrend</li> <li>Ignoring volume: High volume confirms distribution</li> <li>No gap: Stronger with gap opening</li> <li>Small candles: Both bodies should be substantial</li> <li>No confirmation: Weaker patterns need follow-through</li> <li>Poor stop placement: Must protect above pattern high</li> </ol>"},{"location":"indicators/patterns/cdl_darkcloudcover/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_darkcloudcover/#opposite-pattern","title":"Opposite Pattern","text":"<ul> <li>Piercing Pattern - Bullish equivalent</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Bearish Engulfing - Complete engulfment</li> <li>Evening Star - Three-candle version</li> <li>Evening Doji Star - With doji</li> <li>Shooting Star - Single candle reversal</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#component-patterns","title":"Component Patterns","text":"<ul> <li>Long Line - First candle characteristics</li> <li>Marubozu - Ideal candle types</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#pattern-variations","title":"Pattern Variations","text":""},{"location":"indicators/patterns/cdl_darkcloudcover/#perfect-dark-cloud-cover","title":"Perfect Dark Cloud Cover","text":"<ul> <li>Strong extended uptrend</li> <li>Gap opening &gt;0.5%</li> <li>Penetration 70%+ into first body</li> <li>Both candles long bodies</li> <li>High volume on dark cloud</li> <li>At major resistance</li> <li>RSI &gt;70</li> <li>Success Rate: 78-85%</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#good-dark-cloud-cover","title":"Good Dark Cloud Cover","text":"<ul> <li>Clear uptrend</li> <li>Opens at/near first high</li> <li>Penetration 60-70%</li> <li>Medium-large bodies</li> <li>Above average volume</li> <li>Success Rate: 68-78%</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#weak-dark-cloud-cover","title":"Weak Dark Cloud Cover","text":"<ul> <li>Unclear trend</li> <li>No gap</li> <li>Penetration 50-60%</li> <li>Small bodies</li> <li>Low volume</li> <li>Success Rate: 52-62%</li> </ul>"},{"location":"indicators/patterns/cdl_darkcloudcover/#advanced-concepts","title":"Advanced Concepts","text":""},{"location":"indicators/patterns/cdl_darkcloudcover/#pattern-quality-scorer","title":"Pattern Quality Scorer","text":"<pre><code>def score_dark_cloud_cover(open, high, low, close, volume)\n  return 0 if pattern.last != -100\n\n  score = 0\n\n  # Penetration depth (0-4 points)\n  first_body = close[-2] - open[-2]\n  penetration = close[-2] - close[-1]\n  penetration_pct = (penetration / first_body * 100)\n\n  score += 4 if penetration_pct &gt;= 75\n  score += 3 if penetration_pct &gt;= 65\n  score += 2 if penetration_pct &gt;= 55\n  score += 1 if penetration_pct &gt;= 50\n\n  # Gap quality (0-2 points)\n  gap = open[-1] - high[-2]\n  gap_pct = (gap / close[-2] * 100)\n\n  score += 2 if gap_pct &gt; 0.5\n  score += 1 if gap_pct &gt; 0\n\n  # Candle strength (0-2 points)\n  avg_range = (high[-10..-3] - low[-10..-3]).sum / 8.0\n  body1 = close[-2] - open[-2]\n  body2 = open[-1] - close[-1]\n\n  score += 2 if body1 &gt; avg_range * 0.7 &amp;&amp; body2 &gt; avg_range * 0.7\n  score += 1 if body1 &gt; avg_range * 0.5 &amp;&amp; body2 &gt; avg_range * 0.5\n\n  # Volume (0-2 points)\n  avg_vol = volume[-20..-3].sum / 18.0\n  score += 2 if volume[-1] &gt; avg_vol * 1.5\n  score += 1 if volume[-1] &gt; avg_vol * 1.2\n\n  score  # 0-10\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#measuring-distribution","title":"Measuring Distribution","text":"<pre><code>def analyze_distribution(open, high, low, close, volume)\n  if pattern.last == -100\n    # Compare volume on up day vs dark cloud\n    up_volume = volume[-2]\n    down_volume = volume[-1]\n\n    # Distribution: higher volume on down day\n    if down_volume &gt; up_volume * 1.3\n      puts \"DISTRIBUTION DETECTED\"\n      puts \"Down volume significantly exceeds up volume\"\n      puts \"Smart money likely selling\"\n      return :strong_distribution\n    elsif down_volume &gt; up_volume\n      puts \"Possible distribution\"\n      return :moderate_distribution\n    else\n      puts \"No distribution signal\"\n      return :no_distribution\n    end\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_darkcloudcover/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Bearish reversal - Signals end of uptrend</li> <li>Two candles - Long bullish followed by bearish</li> <li>Gap opening - Second candle gaps up (shows initial strength)</li> <li>Deep penetration - Must close &gt;50% into first body (&gt;65% ideal)</li> <li>Volume confirmation - High volume on dark cloud validates</li> <li>Resistance - Most reliable at key resistance levels</li> <li>Overbought - RSI &gt;70 strengthens signal</li> <li>Distribution - Often marks institutional selling</li> <li>Failed breakout - Gap up fails completely</li> <li>Common pattern - Appears frequently, reliable when proper</li> </ol>"},{"location":"indicators/patterns/cdl_darkcloudcover/#see-also","title":"See Also","text":"<ul> <li>Piercing Pattern - Bullish opposite</li> <li>Bearish Engulfing - Full engulfment version</li> <li>Evening Star - Three-candle bearish reversal</li> <li>Shooting Star - Single candle reversal</li> <li>Evening Doji Star - With doji middle</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_doji/","title":"CDL_DOJI (Doji Candlestick Pattern)","text":""},{"location":"indicators/patterns/cdl_doji/#overview","title":"Overview","text":"<p>The Doji is one of the most important single-candlestick patterns in technical analysis, characterized by opening and closing prices that are virtually equal, creating a cross or plus sign shape. This pattern signals market indecision and equilibrium between buyers and sellers, often serving as a precursor to significant price reversals when appearing at key technical levels or after extended trends.</p>"},{"location":"indicators/patterns/cdl_doji/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_doji/#parameter-details","title":"Parameter Details","text":"<p>open, high, low, close (OHLC Data) - All four price arrays must be of equal length - Each index represents the same time period across all arrays - Prices should be in chronological order (oldest to newest) - Minimum of 1 period required, but more periods provide better context - The pattern detection analyzes the relationship between these prices to identify Doji formations</p>"},{"location":"indicators/patterns/cdl_doji/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_doji/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 101.5, 102.0, 103.5, 104.0]\nhigh  = [101.5, 103.0, 104.0, 105.0, 105.5]\nlow   = [99.0, 100.5, 101.5, 102.5, 103.5]\nclose = [101.0, 101.5, 102.0, 103.5, 104.0]\n\n# Detect Doji patterns\ndoji = SQA::TAI.cdl_doji(open, high, low, close)\n\nif doji.last != 0\n  puts \"Doji detected!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_doji/#real-world-example-with-context","title":"Real-World Example with Context","text":"<pre><code># Load historical data for analysis\nopen, high, low, close = load_ohlc_data('AAPL')\n\n# Detect Doji pattern\ndoji = SQA::TAI.cdl_doji(open, high, low, close)\n\n# Analyze the most recent candle\nif doji.last == 100\n  puts \"Doji pattern detected on latest candle\"\n  puts \"Open: #{open.last}, Close: #{close.last}\"\n  puts \"High: #{high.last}, Low: #{low.last}\"\n  puts \"Body size: #{(close.last - open.last).abs}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_doji/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_doji/#what-it-measures","title":"What It Measures","text":"<p>The Doji pattern measures market equilibrium and indecision. When buyers and sellers are perfectly balanced, neither can drive the price decisively higher or lower, resulting in the opening and closing prices being nearly identical. This creates a candlestick with little or no body and potentially long shadows extending above and below.</p> <p>The Doji reveals: - Market Indecision: Equal pressure from bulls and bears - Potential Reversal: Exhaustion of the current trend's momentum - Consolidation Phase: Markets pausing before the next move - Key Decision Points: Critical junctures where trend direction may change</p>"},{"location":"indicators/patterns/cdl_doji/#pattern-recognition-criteria","title":"Pattern Recognition Criteria","text":"<p>For a candle to qualify as a Doji: 1. Open \u2248 Close: Opening and closing prices must be virtually equal (typically within 0.1% of the price range) 2. Body Size: The real body (difference between open and close) should be very small relative to the overall range 3. Shadows: Can have upper and/or lower shadows of any length 4. Context: Most significant when appearing after a trend or at support/resistance levels</p>"},{"location":"indicators/patterns/cdl_doji/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0 (no pattern) or 100 (pattern detected)</li> <li>Type: Single-candle reversal pattern</li> <li>Lag: Real-time pattern recognition (no calculation lag)</li> <li>Best Used: At trend extremes, support/resistance levels, after extended moves</li> <li>Reliability: Medium to high when confirmed with volume and context</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_doji/#value-ranges","title":"Value Ranges","text":"<ul> <li>0: No Doji pattern detected in this period</li> <li>100: Doji pattern detected - indecision present</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#pattern-types","title":"Pattern Types","text":"<p>The Doji family includes several variations, each with slightly different implications:</p>"},{"location":"indicators/patterns/cdl_doji/#standard-doji","title":"Standard Doji","text":"<ul> <li>Open \u2248 Close with shadows on both sides</li> <li>Indicates pure indecision</li> <li>Neutral until context is considered</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#long-legged-doji","title":"Long-Legged Doji","text":"<ul> <li>Open \u2248 Close with long upper and lower shadows</li> <li>Shows high volatility and indecision</li> <li>Strong rejection of both higher and lower prices</li> <li>More significant than standard Doji</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#gravestone-doji","title":"Gravestone Doji","text":"<ul> <li>Open \u2248 Close at the day's low</li> <li>Long upper shadow, no lower shadow</li> <li>Buyers pushed prices up but failed to hold</li> <li>Bearish implications, especially after uptrend</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#dragonfly-doji","title":"Dragonfly Doji","text":"<ul> <li>Open \u2248 Close at the day's high</li> <li>Long lower shadow, no upper shadow</li> <li>Sellers pushed prices down but buyers recovered</li> <li>Bullish implications, especially after downtrend</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#market-psychology","title":"Market Psychology","text":"<p>The Doji represents a tug-of-war between bulls and bears:</p> <ol> <li>Battle for Control: Neither side can maintain dominance</li> <li>Trend Exhaustion: Previous trend participants losing conviction</li> <li>Uncertainty: Market participants unsure of next direction</li> <li>Potential Shift: Balance of power may be changing</li> </ol>"},{"location":"indicators/patterns/cdl_doji/#signal-interpretation","title":"Signal Interpretation","text":"<p>In Uptrend Context: - Suggests bullish momentum may be weakening - Buyers unable to push prices significantly higher - Potential top formation - Requires bearish confirmation for reversal signal</p> <p>In Downtrend Context: - Suggests bearish momentum may be exhausting - Sellers unable to push prices significantly lower - Potential bottom formation - Requires bullish confirmation for reversal signal</p> <p>At Support/Resistance: - Heightened significance - Decision point for trend continuation or reversal - High probability of significant move following confirmation</p>"},{"location":"indicators/patterns/cdl_doji/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_doji/#buy-signals","title":"Buy Signals","text":"<p>Doji patterns generate buy signals under specific conditions:</p> <ol> <li>After Downtrend</li> <li>Doji appears following declining prices</li> <li>Particularly at support levels</li> <li>RSI in oversold territory (&lt; 30)</li> <li> <p>Confirmed by bullish candle close above Doji high</p> </li> <li> <p>Dragonfly Doji at Support</p> </li> <li>Long lower shadow showing rejection of lower prices</li> <li>Close near the high of the session</li> <li>High volume on the shadow</li> <li>Next candle closes above Doji body</li> </ol> <p>Example Scenario: <pre><code>if doji[-2] == 100  # Previous candle was Doji\n  # Check for bullish confirmation\n  if close[-1] &gt; high[-2]  # Confirmation candle broke above Doji high\n    puts \"Bullish Doji reversal confirmed - BUY signal\"\n    entry = close[-1]\n    stop = low[-2]\n    target = entry + (entry - stop) * 2\n    puts \"Entry: #{entry}, Stop: #{stop}, Target: #{target}\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_doji/#sell-signals","title":"Sell Signals","text":"<p>Doji patterns generate sell signals under these conditions:</p> <ol> <li>After Uptrend</li> <li>Doji appears following rising prices</li> <li>Particularly at resistance levels</li> <li>RSI in overbought territory (&gt; 70)</li> <li> <p>Confirmed by bearish candle close below Doji low</p> </li> <li> <p>Gravestone Doji at Resistance</p> </li> <li>Long upper shadow showing rejection of higher prices</li> <li>Close near the low of the session</li> <li>High volume on the shadow</li> <li>Next candle closes below Doji body</li> </ol> <p>Example Scenario: <pre><code>if doji[-2] == 100  # Previous candle was Doji\n  # Check for bearish confirmation\n  if close[-1] &lt; low[-2]  # Confirmation candle broke below Doji low\n    puts \"Bearish Doji reversal confirmed - SELL signal\"\n    entry = close[-1]\n    stop = high[-2]\n    target = entry - (stop - entry) * 2\n    puts \"Entry: #{entry}, Stop: #{stop}, Target: #{target}\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_doji/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Never trade a Doji in isolation. Require:</p> <ol> <li>Trend Context: Clear preceding trend</li> <li>Next Candle Confirmation: Price action validates the reversal</li> <li>Volume: Higher than average volume adds conviction</li> <li>Technical Level: Alignment with support, resistance, or moving averages</li> <li>Momentum Indicators: RSI, MACD showing divergence or extremes</li> </ol>"},{"location":"indicators/patterns/cdl_doji/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_doji/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>The Doji works best in these scenarios:</p> <p>Market Conditions: - After extended trends (3+ days in same direction) - At clearly defined support or resistance zones - During periods of high volume - At the end of strong momentum moves</p> <p>Time Frames: - Daily charts: Most reliable - Weekly charts: Very significant signals - 4-hour charts: Good for swing trading - Intraday (&lt; 1 hour): Less reliable, need multiple confirmations</p> <p>Asset Classes: - Stocks: Excellent reliability - Forex: Good with major pairs - Commodities: Effective at key levels - Cryptocurrencies: Requires larger confirmation candles due to volatility</p>"},{"location":"indicators/patterns/cdl_doji/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: <pre><code>doji = SQA::TAI.cdl_doji(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif doji.last == 100\n  if close[-2] &gt; sma_50[-2] &amp;&amp; close[-2] &gt; sma_200[-2]\n    puts \"Doji in uptrend - watch for bearish reversal\"\n  elsif close[-2] &lt; sma_50[-2] &amp;&amp; close[-2] &lt; sma_200[-2]\n    puts \"Doji in downtrend - watch for bullish reversal\"\n  end\nend\n</code></pre></p> <p>With Momentum Indicators: <pre><code>doji = SQA::TAI.cdl_doji(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif doji.last == 100\n  if rsi.last &gt; 70\n    puts \"Doji + Overbought RSI - strong sell setup\"\n  elsif rsi.last &lt; 30\n    puts \"Doji + Oversold RSI - strong buy setup\"\n  end\nend\n</code></pre></p> <p>With Volume: <pre><code>doji = SQA::TAI.cdl_doji(open, high, low, close)\nvolume_sma = SQA::TAI.sma(volume, period: 20)\n\nif doji.last == 100 &amp;&amp; volume.last &gt; volume_sma.last * 1.5\n  puts \"Doji with high volume - increased significance\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_doji/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Trading Without Confirmation</li> <li>Never enter immediately on Doji formation</li> <li>Wait for next candle to validate direction</li> <li> <p>Premature entries lead to whipsaws</p> </li> <li> <p>Ignoring Context</p> </li> <li>Doji in sideways market = low reliability</li> <li>Doji mid-trend = often just pause, not reversal</li> <li> <p>Must appear at significant technical juncture</p> </li> <li> <p>No Volume Analysis</p> </li> <li>Low volume Doji = weak signal</li> <li>High volume Doji = strong conviction</li> <li> <p>Volume validates the indecision</p> </li> <li> <p>Wrong Time Frame</p> </li> <li>Too short = noise and false signals</li> <li>Too long = slow to react</li> <li>Daily charts optimal for most traders</li> </ol>"},{"location":"indicators/patterns/cdl_doji/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Day Trading: - Use 15-minute or 1-hour charts - Require tight stops (within Doji range) - Need immediate confirmation (next 1-2 candles) - Higher false signal rate</p> <p>Swing Trading: - Use daily charts primarily - Allow 2-3 candles for confirmation - Stop loss beyond Doji high/low - Better reliability</p> <p>Position Trading: - Use daily or weekly charts - Wait for full week of confirmation - Wider stops acceptable - Highest reliability but fewer signals</p>"},{"location":"indicators/patterns/cdl_doji/#practical-example","title":"Practical Example","text":"<p>Complete Doji trading system with confirmation:</p> <pre><code>require 'sqa/tai'\n\n# Load data\nopen, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\n# Calculate indicators\ndoji = SQA::TAI.cdl_doji(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nvolume_sma = SQA::TAI.sma(volume, period: 20)\n\n# Check for Doji on previous candle\nif doji[-2] == 100\n  puts \"Doji Pattern Analysis\"\n  puts \"=\" * 50\n\n  # Determine trend context\n  trend = close[-3] &gt; sma_50[-3] ? \"Uptrend\" : \"Downtrend\"\n  puts \"Trend Context: #{trend}\"\n\n  # Check RSI\n  rsi_val = rsi[-2]\n  rsi_extreme = if rsi_val &gt; 70\n    \"Overbought\"\n  elsif rsi_val &lt; 30\n    \"Oversold\"\n  else\n    \"Neutral\"\n  end\n  puts \"RSI: #{rsi_val.round(2)} (#{rsi_extreme})\"\n\n  # Check volume\n  vol_ratio = volume[-2] / volume_sma[-2]\n  puts \"Volume: #{vol_ratio &gt; 1.3 ? 'High' : 'Normal'} (#{vol_ratio.round(2)}x avg)\"\n\n  # Find support/resistance\n  recent_high = high[-60..-2].max\n  recent_low = low[-60..-2].min\n  at_resistance = (high[-2] - recent_high).abs &lt; recent_high * 0.02\n  at_support = (low[-2] - recent_low).abs &lt; recent_low * 0.02\n\n  if at_resistance\n    puts \"Location: Near Resistance (#{recent_high.round(2)})\"\n  elsif at_support\n    puts \"Location: Near Support (#{recent_low.round(2)})\"\n  else\n    puts \"Location: Mid-range\"\n  end\n\n  # Check for confirmation\n  confirmation = nil\n  if close[-1] &gt; high[-2]\n    confirmation = \"Bullish\"\n  elsif close[-1] &lt; low[-2]\n    confirmation = \"Bearish\"\n  end\n\n  if confirmation\n    puts \"\\nCONFIRMATION: #{confirmation} breakout\"\n\n    # Calculate trade parameters\n    if confirmation == \"Bullish\" &amp;&amp; trend == \"Downtrend\" &amp;&amp; rsi_val &lt; 40\n      entry = close[-1]\n      stop = low[-2] - (low[-2] * 0.005)\n      risk = entry - stop\n      target = entry + (risk * 2.5)\n\n      puts \"\\nBUY SIGNAL\"\n      puts \"Entry: $#{entry.round(2)}\"\n      puts \"Stop Loss: $#{stop.round(2)}\"\n      puts \"Target: $#{target.round(2)}\"\n      puts \"Risk: $#{risk.round(2)}\"\n      puts \"Reward:Risk = 2.5:1\"\n\n    elsif confirmation == \"Bearish\" &amp;&amp; trend == \"Uptrend\" &amp;&amp; rsi_val &gt; 60\n      entry = close[-1]\n      stop = high[-2] + (high[-2] * 0.005)\n      risk = stop - entry\n      target = entry - (risk * 2.5)\n\n      puts \"\\nSELL SIGNAL\"\n      puts \"Entry: $#{entry.round(2)}\"\n      puts \"Stop Loss: $#{stop.round(2)}\"\n      puts \"Target: $#{target.round(2)}\"\n      puts \"Risk: $#{risk.round(2)}\"\n      puts \"Reward:Risk = 2.5:1\"\n    end\n  else\n    puts \"\\nWaiting for confirmation candle...\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_doji/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_doji/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Spinning Top: Small body with shadows on both sides, similar indecision but body can be colored</li> <li>Hammer: Bullish reversal with small body and long lower shadow</li> <li>Shooting Star: Bearish reversal with small body and long upper shadow</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Morning Star: Three-candle bullish reversal often featuring a Doji as middle candle</li> <li>Evening Star: Three-candle bearish reversal often featuring a Doji as middle candle</li> <li>Harami: Two-candle pattern showing indecision similar to Doji</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#pattern-family","title":"Pattern Family","text":"<p>The Doji is part of the single-candle reversal pattern family: - Doji: Open = Close, pure indecision - Gravestone Doji: Bearish variant with long upper shadow - Dragonfly Doji: Bullish variant with long lower shadow - Long-Legged Doji: High volatility variant with long shadows on both sides</p>"},{"location":"indicators/patterns/cdl_doji/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_doji/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For higher probability trades, analyze Doji patterns across multiple timeframes:</p> <pre><code># Daily chart - primary signal\ndaily_doji = SQA::TAI.cdl_doji(daily_open, daily_high, daily_low, daily_close)\n\n# Weekly chart - confirm larger trend\nweekly_doji = SQA::TAI.cdl_doji(weekly_open, weekly_high, weekly_low, weekly_close)\n\n# 4-hour chart - entry timing\nhourly_doji = SQA::TAI.cdl_doji(hourly_open, hourly_high, hourly_low, hourly_close)\n\nif daily_doji.last == 100 &amp;&amp; weekly_trend == \"down\"\n  puts \"Daily Doji in weekly downtrend - watch for bullish reversal\"\n  puts \"Use 4-hour chart for precise entry timing\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_doji/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Trending Markets: - Doji more reliable as reversal signal - Wait for strong confirmation - Tighter stops acceptable</p> <p>Ranging Markets: - Doji less reliable (constant indecision) - Require additional confirmation - Focus on Doji at range boundaries</p> <p>High Volatility: - Expect longer shadows on Doji - Require wider stops - Pattern still valid but need larger confirmation</p>"},{"location":"indicators/patterns/cdl_doji/#statistical-validation","title":"Statistical Validation","text":"<p>Research indicates: - Success Rate: 60-65% with proper confirmation - Best Performance: After trends of 5+ days in same direction - Volume Impact: High volume Doji 15-20% more reliable - Time Frame: Daily charts 10-15% more reliable than intraday - Confirmation: Waiting for confirmation increases success by 25-30%</p>"},{"location":"indicators/patterns/cdl_doji/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" - The definitive guide to candlestick patterns including the Doji</li> <li>Bulkowski, Thomas N. \"Encyclopedia of Candlestick Charts\" - Statistical analysis of Doji reliability</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" - Practical application of Doji patterns</li> <li>StockCharts.com - Doji - Online reference and examples</li> </ul>"},{"location":"indicators/patterns/cdl_doji/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Dragonfly Doji Pattern</li> <li>Gravestone Doji Pattern</li> <li>Doji Star Pattern</li> <li>Morning Star Pattern</li> <li>Evening Star Pattern</li> <li>RSI Indicator</li> </ul>"},{"location":"indicators/patterns/cdl_dojistar/","title":"CDL_DOJISTAR (Doji Star Candlestick Pattern)","text":""},{"location":"indicators/patterns/cdl_dojistar/#overview","title":"Overview","text":"<p>The Doji Star is a two or three-candle reversal pattern that combines the indecision of a Doji with gap characteristics. When a Doji forms after a gap following a strong trend, it signals potential exhaustion and reversal. The pattern is particularly powerful when the Doji gaps away from the previous candle's body, creating a \"star\" appearance that indicates a dramatic shift in market sentiment and momentum.</p>"},{"location":"indicators/patterns/cdl_dojistar/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_dojistar/#parameter-details","title":"Parameter Details","text":"<p>open, high, low, close (OHLC Data) - All four price arrays must be of equal length - Each index represents the same time period across all arrays - Prices should be in chronological order (oldest to newest) - Minimum of 2 periods required to detect the pattern - The pattern analyzes the relationship between consecutive candles to identify Doji Star formations</p>"},{"location":"indicators/patterns/cdl_dojistar/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_dojistar/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 105.0, 106.0, 107.0, 108.0]\nhigh  = [101.0, 106.0, 106.5, 108.0, 109.0]\nlow   = [99.0, 104.5, 105.5, 106.5, 107.5]\nclose = [105.0, 105.5, 106.0, 107.5, 108.5]\n\n# Detect Doji Star patterns\ndoji_star = SQA::TAI.cdl_dojistar(open, high, low, close)\n\nif doji_star.last != 0\n  puts \"Doji Star detected!\"\n  if doji_star.last == 100\n    puts \"Bullish Doji Star - potential upward reversal\"\n  else\n    puts \"Bearish Doji Star - potential downward reversal\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dojistar/#with-trend-context","title":"With Trend Context","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\ndoji_star = SQA::TAI.cdl_dojistar(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, period: 20)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif doji_star.last == 100\n  # Bullish Doji Star\n  if close[-3] &lt; sma_20[-3] &amp;&amp; rsi.last &lt; 40\n    puts \"Bullish Doji Star in downtrend - Strong reversal signal\"\n    puts \"Gap up opening: #{open[-1]} vs prior close: #{close[-2]}\"\n  end\nelsif doji_star.last == -100\n  # Bearish Doji Star\n  if close[-3] &gt; sma_20[-3] &amp;&amp; rsi.last &gt; 60\n    puts \"Bearish Doji Star in uptrend - Strong reversal signal\"\n    puts \"Gap down opening: #{open[-1]} vs prior close: #{close[-2]}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dojistar/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_dojistar/#what-it-measures","title":"What It Measures","text":"<p>The Doji Star measures critical turning points where market momentum has shifted dramatically. The combination of a strong directional move followed by a gapped Doji reveals:</p> <ol> <li>Trend Exhaustion: Previous trend has run its course</li> <li>Momentum Break: Gap shows final push but Doji shows rejection</li> <li>Indecision at Extremes: Uncertainty at potential top or bottom</li> <li>Reversal Setup: Market preparing for direction change</li> </ol> <p>The pattern's power comes from the gap itself - it represents an aggressive move by the trending side that immediately meets resistance, creating the Doji's indecision.</p>"},{"location":"indicators/patterns/cdl_dojistar/#pattern-recognition-criteria","title":"Pattern Recognition Criteria","text":"<p>Bullish Doji Star (in downtrend): 1. First Candle: Long bearish candle continuing the downtrend 2. Gap: Doji gaps down from first candle's body 3. Doji: Small body with open \u2248 close, showing indecision 4. Location: At support level or after extended decline</p> <p>Bearish Doji Star (in uptrend): 1. First Candle: Long bullish candle continuing the uptrend 2. Gap: Doji gaps up from first candle's body 3. Doji: Small body with open \u2248 close, showing indecision 4. Location: At resistance level or after extended rally</p> <p>Visual Pattern: <pre><code>Bearish Doji Star:        Bullish Doji Star:\n\n      ---  (Doji)                |    (Large down candle)\n                                 |\n    |                          ---    (Doji - gapped down)\n    |    (Large up candle)\n    |\n</code></pre></p>"},{"location":"indicators/patterns/cdl_dojistar/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns -100 (bearish), 0 (no pattern), or 100 (bullish)</li> <li>Type: Two-candle reversal pattern</li> <li>Lag: Real-time pattern recognition</li> <li>Best Used: After strong trends, at support/resistance, with volume confirmation</li> <li>Reliability: High when combined with trend context and confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_dojistar/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_dojistar/#value-ranges","title":"Value Ranges","text":"<ul> <li>-100: Bearish Doji Star - potential downward reversal</li> <li>0: No Doji Star pattern detected</li> <li>100: Bullish Doji Star - potential upward reversal</li> </ul>"},{"location":"indicators/patterns/cdl_dojistar/#market-psychology","title":"Market Psychology","text":"<p>Bullish Doji Star Formation: 1. Strong Down Move: Bears dominate, pushing prices lower 2. Gap Down Opening: Bears aggressive, expecting continuation 3. Doji Forms: Despite gap, equal buying and selling pressure 4. Indecision: Bears cannot follow through despite aggressive start 5. Reversal Signal: Selling exhausted, buyers may take control</p> <p>Bearish Doji Star Formation: 1. Strong Up Move: Bulls dominate, pushing prices higher 2. Gap Up Opening: Bulls aggressive, expecting continuation 3. Doji Forms: Despite gap, equal buying and selling pressure 4. Indecision: Bulls cannot follow through despite aggressive start 5. Reversal Signal: Buying exhausted, sellers may take control</p>"},{"location":"indicators/patterns/cdl_dojistar/#signal-interpretation","title":"Signal Interpretation","text":"<p>Context Matters: - Pattern must appear after established trend - Gap is critical - without gap, it's just a regular Doji - Strength of prior trend affects reliability - Distance of gap increases pattern significance</p> <p>At Key Technical Levels: - Doji Star at support (bullish) = high probability bottom - Doji Star at resistance (bearish) = high probability top - Round numbers or psychological levels amplify the signal</p>"},{"location":"indicators/patterns/cdl_dojistar/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_dojistar/#buy-signals-bullish-doji-star","title":"Buy Signals (Bullish Doji Star)","text":"<p>Conditions for buy signals:</p> <ol> <li>Classic Setup</li> <li>Appears after downtrend (3+ bearish candles)</li> <li>Gap down between first candle and Doji</li> <li>Doji shows small body and indecision</li> <li> <p>Third candle confirms with bullish close</p> </li> <li> <p>High-Probability Setup</p> </li> <li>At support level or Fibonacci retracement</li> <li>RSI &lt; 30 (oversold)</li> <li>High volume on confirmation candle</li> <li>Third candle closes above Doji high and first candle's close</li> </ol> <p>Example Scenario: <pre><code>if doji_star[-2] == 100  # Bullish Doji Star two candles ago\n  # Check for bullish confirmation\n  if close[-1] &gt; high[-2] &amp;&amp; close[-1] &gt; close[-3]\n    puts \"Bullish Doji Star confirmed - BUY signal\"\n\n    entry = close[-1]\n    stop = low[-2] - (low[-2] * 0.005)\n    risk = entry - stop\n    target = entry + (risk * 2.5)\n\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop Loss: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk:Reward = 1:2.5\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_dojistar/#sell-signals-bearish-doji-star","title":"Sell Signals (Bearish Doji Star)","text":"<p>Conditions for sell signals:</p> <ol> <li>Classic Setup</li> <li>Appears after uptrend (3+ bullish candles)</li> <li>Gap up between first candle and Doji</li> <li>Doji shows small body and indecision</li> <li> <p>Third candle confirms with bearish close</p> </li> <li> <p>High-Probability Setup</p> </li> <li>At resistance level or Fibonacci extension</li> <li>RSI &gt; 70 (overbought)</li> <li>High volume on confirmation candle</li> <li>Third candle closes below Doji low and first candle's close</li> </ol> <p>Example Scenario: <pre><code>if doji_star[-2] == -100  # Bearish Doji Star two candles ago\n  # Check for bearish confirmation\n  if close[-1] &lt; low[-2] &amp;&amp; close[-1] &lt; close[-3]\n    puts \"Bearish Doji Star confirmed - SELL signal\"\n\n    entry = close[-1]\n    stop = high[-2] + (high[-2] * 0.005)\n    risk = stop - entry\n    target = entry - (risk * 2.5)\n\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop Loss: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk:Reward = 1:2.5\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_dojistar/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Essential confirmation factors:</p> <ol> <li>Trend Context: Clear preceding trend required</li> <li>Gap Presence: Must have gap between bodies</li> <li>Third Candle: Confirmation candle in reversal direction</li> <li>Volume: Increasing volume on confirmation adds conviction</li> <li>Technical Level: Support/resistance alignment increases probability</li> </ol> <p>Advanced Confirmation: <pre><code>if doji_star[-2].abs == 100\n  gap_size = if doji_star[-2] == 100\n    open[-2] - close[-3]  # Gap down size\n  else\n    open[-2] - close[-3]  # Gap up size\n  end\n\n  body_size = (close[-2] - open[-2]).abs\n  gap_to_body_ratio = gap_size.abs / body_size\n\n  if gap_to_body_ratio &gt; 2\n    puts \"Strong gap (#{gap_to_body_ratio.round(1)}x body) - High probability pattern\"\n  elsif gap_to_body_ratio &gt; 1\n    puts \"Moderate gap - Good setup\"\n  else\n    puts \"Small gap - Lower reliability\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_dojistar/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_dojistar/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>The Doji Star works best when:</p> <p>Market Conditions: - After extended trends (5+ candles same direction) - At clearly defined support or resistance - Following parabolic moves or blow-off tops/bottoms - When momentum indicators show extremes or divergence</p> <p>Time Frames: - Daily charts: Most reliable and traditional - Weekly charts: Rare but extremely significant - 4-hour charts: Good for swing trading - Intraday: Less reliable, requires strict confirmation</p> <p>Asset Classes: - Stocks: Excellent, especially at earnings or news events - Indices: Very reliable for major reversals - Forex: Good with major pairs at key levels - Commodities: Effective after supply/demand shocks</p>"},{"location":"indicators/patterns/cdl_dojistar/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Moving Averages: <pre><code>doji_star = SQA::TAI.cdl_dojistar(open, high, low, close)\nema_20 = SQA::TAI.ema(close, period: 20)\nema_50 = SQA::TAI.ema(close, period: 50)\n\nif doji_star.last == 100\n  # Bullish Doji Star\n  if close[-3] &lt; ema_20[-3] &amp;&amp; ema_20.last &gt; ema_50.last\n    puts \"Bullish Doji Star with MA crossover - Strong buy setup\"\n  end\nelsif doji_star.last == -100\n  # Bearish Doji Star\n  if close[-3] &gt; ema_20[-3] &amp;&amp; ema_20.last &lt; ema_50.last\n    puts \"Bearish Doji Star with MA crossover - Strong sell setup\"\n  end\nend\n</code></pre></p> <p>With RSI: <pre><code>doji_star = SQA::TAI.cdl_dojistar(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif doji_star.last == 100 &amp;&amp; rsi.last &lt; 30\n  puts \"Bullish Doji Star + Oversold RSI - STRONG BUY\"\nelsif doji_star.last == -100 &amp;&amp; rsi.last &gt; 70\n  puts \"Bearish Doji Star + Overbought RSI - STRONG SELL\"\nend\n</code></pre></p> <p>With Support/Resistance: <pre><code>doji_star = SQA::TAI.cdl_dojistar(open, high, low, close)\n\n# Find key levels\nresistance = high[-60..-3].max\nsupport = low[-60..-3].min\n\nif doji_star.last == 100\n  distance_to_support = ((low[-2] - support) / support * 100).abs\n  if distance_to_support &lt; 2\n    puts \"Bullish Doji Star AT SUPPORT - High probability\"\n  end\nelsif doji_star.last == -100\n  distance_to_resistance = ((high[-2] - resistance) / resistance * 100).abs\n  if distance_to_resistance &lt; 2\n    puts \"Bearish Doji Star AT RESISTANCE - High probability\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_dojistar/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>No Gap Present</li> <li>Pattern requires gap between bodies</li> <li>Without gap, it's just a regular Doji</li> <li> <p>Overlapping bodies = invalid pattern</p> </li> <li> <p>Trading Without Confirmation</p> </li> <li>Never enter on Doji Star formation alone</li> <li>Wait for third candle to validate direction</li> <li> <p>Premature entry leads to whipsaws</p> </li> <li> <p>Ignoring Trend Context</p> </li> <li>Pattern only valid after established trend</li> <li>Mid-consolidation Doji Stars are unreliable</li> <li> <p>Trend strength affects pattern reliability</p> </li> <li> <p>Wrong Stop Placement</p> </li> <li>Stop should be beyond Doji's extreme</li> <li>Too tight = premature exit</li> <li>Too wide = poor risk:reward</li> </ol>"},{"location":"indicators/patterns/cdl_dojistar/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Day Trading: - Use 1-hour or 4-hour charts minimum - Require immediate confirmation - Tighter stops (1-2% beyond extremes) - Be cautious of false gaps in illiquid hours</p> <p>Swing Trading: - Use daily charts for best results - Allow 1-2 days for confirmation - Stops 2-3% beyond pattern extremes - Optimal risk:reward ratios</p> <p>Position Trading: - Use daily or weekly charts - Wait for full week confirmation on weekly patterns - Wider stops (5-7%) on weekly timeframes - Major trend reversals possible</p>"},{"location":"indicators/patterns/cdl_dojistar/#practical-example","title":"Practical Example","text":"<p>Complete Doji Star trading system:</p> <pre><code>require 'sqa/tai'\n\n# Load data\nopen, high, low, close, volume = load_ohlc_volume_data('NVDA')\n\n# Calculate indicators\ndoji_star = SQA::TAI.cdl_dojistar(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nema_20 = SQA::TAI.ema(close, period: 20)\nema_50 = SQA::TAI.ema(close, period: 50)\nvolume_sma = SQA::TAI.sma(volume, period: 20)\n\n# Check for Doji Star pattern\nif doji_star[-2].abs == 100\n  puts \"Doji Star Pattern Analysis\"\n  puts \"=\" * 60\n\n  pattern_type = doji_star[-2] == 100 ? \"Bullish\" : \"Bearish\"\n  puts \"Pattern Type: #{pattern_type} Doji Star\"\n\n  # Trend analysis\n  if pattern_type == \"Bullish\"\n    trend_candles = close[-8..-3].select { |c| c &lt; close[-9] }.count\n    in_downtrend = trend_candles &gt;= 4\n    puts \"In Downtrend: #{in_downtrend ? 'Yes' : 'No'} (#{trend_candles}/5 down candles)\"\n  else\n    trend_candles = close[-8..-3].select { |c| c &gt; close[-9] }.count\n    in_uptrend = trend_candles &gt;= 4\n    puts \"In Uptrend: #{in_uptrend ? 'Yes' : 'No'} (#{trend_candles}/5 up candles)\"\n  end\n\n  # Gap analysis\n  gap_size = (open[-2] - close[-3]).abs\n  gap_percent = (gap_size / close[-3] * 100).round(2)\n  puts \"Gap Size: $#{gap_size.round(2)} (#{gap_percent}%)\"\n\n  # Doji characteristics\n  doji_body = (close[-2] - open[-2]).abs\n  doji_range = high[-2] - low[-2]\n  body_to_range = (doji_body / doji_range * 100).round(1)\n  puts \"Doji Body/Range: #{body_to_range}% (smaller is better)\"\n\n  # RSI check\n  rsi_val = rsi[-2]\n  if pattern_type == \"Bullish\"\n    rsi_status = rsi_val &lt; 30 ? \"Oversold - Excellent\" : (rsi_val &lt; 40 ? \"Low - Good\" : \"Neutral\")\n  else\n    rsi_status = rsi_val &gt; 70 ? \"Overbought - Excellent\" : (rsi_val &gt; 60 ? \"High - Good\" : \"Neutral\")\n  end\n  puts \"RSI: #{rsi_val.round(2)} (#{rsi_status})\"\n\n  # Volume\n  vol_ratio = volume[-2] / volume_sma[-2]\n  puts \"Volume: #{vol_ratio.round(2)}x average\"\n\n  # Key levels\n  resistance = high[-60..-3].max\n  support = low[-60..-3].min\n\n  if pattern_type == \"Bullish\"\n    distance = ((low[-2] - support) / support * 100).abs\n    at_level = distance &lt; 3\n    puts \"Distance to Support: #{distance.round(2)}% #{at_level ? '(AT SUPPORT)' : ''}\"\n  else\n    distance = ((high[-2] - resistance) / resistance * 100).abs\n    at_level = distance &lt; 3\n    puts \"Distance to Resistance: #{distance.round(2)}% #{at_level ? '(AT RESISTANCE)' : ''}\"\n  end\n\n  # Confirmation check\n  has_confirmation = if pattern_type == \"Bullish\"\n    close[-1] &gt; high[-2] &amp;&amp; close[-1] &gt; close[-3]\n  else\n    close[-1] &lt; low[-2] &amp;&amp; close[-1] &lt; close[-3]\n  end\n\n  puts \"\\nConfirmation: #{has_confirmation ? 'YES' : 'WAITING'}\"\n\n  # Scoring system\n  score = 0\n  score += 2 if (pattern_type == \"Bullish\" &amp;&amp; in_downtrend) || (pattern_type == \"Bearish\" &amp;&amp; in_uptrend)\n  score += 1 if gap_percent &gt; 0.5\n  score += 1 if body_to_range &lt; 20\n  score += 1 if (pattern_type == \"Bullish\" &amp;&amp; rsi_val &lt; 40) || (pattern_type == \"Bearish\" &amp;&amp; rsi_val &gt; 60)\n  score += 1 if vol_ratio &gt; 1.2\n  score += 1 if at_level\n  score += 2 if has_confirmation\n\n  puts \"\\nSetup Quality Score: #{score}/9\"\n\n  # Trade execution\n  if has_confirmation &amp;&amp; score &gt;= 7\n    if pattern_type == \"Bullish\"\n      entry = close[-1]\n      stop = low[-2] - (low[-2] * 0.008)\n      risk = entry - stop\n      target = entry + (risk * 3)\n\n      puts \"\\n*** STRONG BULLISH SETUP - BUY SIGNAL ***\"\n      puts \"Entry: $#{entry.round(2)}\"\n      puts \"Stop Loss: $#{stop.round(2)}\"\n      puts \"Target: $#{target.round(2)}\"\n      puts \"Risk: $#{risk.round(2)} (#{((risk/entry)*100).round(2)}%)\"\n      puts \"Reward: $#{(target-entry).round(2)} (#{(((target-entry)/entry)*100).round(2)}%)\"\n      puts \"R:R = 1:3\"\n\n    else\n      entry = close[-1]\n      stop = high[-2] + (high[-2] * 0.008)\n      risk = stop - entry\n      target = entry - (risk * 3)\n\n      puts \"\\n*** STRONG BEARISH SETUP - SELL SIGNAL ***\"\n      puts \"Entry: $#{entry.round(2)}\"\n      puts \"Stop Loss: $#{stop.round(2)}\"\n      puts \"Target: $#{target.round(2)}\"\n      puts \"Risk: $#{risk.round(2)} (#{((risk/entry)*100).round(2)}%)\"\n      puts \"Reward: $#{(entry-target).round(2)} (#{(((entry-target)/entry)*100).round(2)}%)\"\n      puts \"R:R = 1:3\"\n    end\n\n  elsif score &gt;= 5\n    puts \"\\nDECENT SETUP (Score: #{score}/9)\"\n    puts \"Consider: Reduced position size or wait for better confirmation\"\n\n  else\n    puts \"\\nLOW PROBABILITY SETUP (Score: #{score}/9)\"\n    puts \"Recommendation: Skip this trade\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dojistar/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_dojistar/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji: Single-candle indecision pattern without gap requirement</li> <li>Morning Star: Three-candle bullish reversal with Doji as middle candle</li> <li>Evening Star: Three-candle bearish reversal with Doji as middle candle</li> <li>Abandoned Baby: Rare gapped Doji pattern with gaps on both sides</li> </ul>"},{"location":"indicators/patterns/cdl_dojistar/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Engulfing: Strong two-candle reversal pattern</li> <li>Harami: Two-candle pattern showing momentum shift</li> <li>Piercing Line: Bullish two-candle reversal</li> <li>Dark Cloud Cover: Bearish two-candle reversal</li> </ul>"},{"location":"indicators/patterns/cdl_dojistar/#pattern-family","title":"Pattern Family","text":"<p>The Doji Star is part of the star pattern family: - Doji Star: Reversal pattern with gapped Doji - Morning Star: Bullish reversal with small-bodied middle candle - Evening Star: Bearish reversal with small-bodied middle candle - Abandoned Baby: Rare pattern with gaps on both sides of Doji</p>"},{"location":"indicators/patterns/cdl_dojistar/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_dojistar/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Increase probability by confirming across timeframes:</p> <pre><code># Daily Doji Star - primary signal\ndaily_doji_star = SQA::TAI.cdl_dojistar(daily_open, daily_high, daily_low, daily_close)\n\n# Weekly trend - larger context\nweekly_trend = weekly_close.last &gt; weekly_sma50.last ? \"up\" : \"down\"\n\n# 4-hour confirmation - precise timing\nhourly_confirmation = if daily_doji_star.last == 100\n  hourly_close.last &gt; hourly_high[-5]\nelse\n  hourly_close.last &lt; hourly_low[-5]\nend\n\nif daily_doji_star.last.abs == 100\n  puts \"Daily Doji Star detected\"\n  puts \"Weekly trend: #{weekly_trend}\"\n  puts \"4-hour confirmation: #{hourly_confirmation ? 'Yes' : 'Pending'}\"\n\n  if (daily_doji_star.last == 100 &amp;&amp; weekly_trend == \"down\") ||\n     (daily_doji_star.last == -100 &amp;&amp; weekly_trend == \"up\")\n    puts \"High probability major reversal setup!\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dojistar/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Trending Markets: - Doji Star highly reliable as reversal - Strong confirmation candles expected - Larger price targets justified</p> <p>Ranging Markets: - Doji Star at range boundaries - Expect smaller reversals - Quick profit-taking recommended</p> <p>High Volatility: - Larger gaps common - Wider stops required - Pattern remains valid but needs larger confirmation</p>"},{"location":"indicators/patterns/cdl_dojistar/#statistical-validation","title":"Statistical Validation","text":"<p>Research and backtesting indicate: - Success Rate: 65-70% with proper confirmation - Best Performance: At support/resistance with RSI extremes - Gap Impact: Larger gaps (&gt;1%) improve success by 15-20% - Volume: High volume increases reliability by 20% - Confirmation: Third candle confirmation adds 25-30% to success rate</p>"},{"location":"indicators/patterns/cdl_dojistar/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" - Comprehensive star pattern analysis</li> <li>Bulkowski, Thomas N. \"Encyclopedia of Candlestick Charts\" - Statistical performance data</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" - Practical trading applications</li> <li>StockCharts.com - Doji Star - Educational resource</li> </ul>"},{"location":"indicators/patterns/cdl_dojistar/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Doji Pattern</li> <li>Morning Star Pattern</li> <li>Evening Star Pattern</li> <li>Abandoned Baby Pattern</li> <li>RSI Indicator</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/","title":"Dragonfly Doji Pattern","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#overview","title":"Overview","text":"<p>The Dragonfly Doji is a single-candlestick bullish reversal pattern that appears at the bottom of downtrends. It has a distinctive T-shape with a long lower shadow and virtually no upper shadow or body, indicating strong buyer rejection of lower prices and potential trend reversal. This pattern shows that sellers pushed price significantly lower during the session, but buyers rallied strongly to close near the open and high.</p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#pattern-type","title":"Pattern Type","text":"<ul> <li>Type: Bullish Reversal</li> <li>Candles Required: 1</li> <li>Trend Context: Appears after downtrend</li> <li>Reliability: Medium to High (when confirmed)</li> <li>Frequency: Rare</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 98.0, 95.0, 92.0, 90.0]\nhigh  = [101.0, 99.0, 96.0, 93.0, 90.5]\nlow   = [98.0, 95.0, 91.0, 87.0, 85.0]\nclose = [99.0, 96.0, 92.0, 90.2, 90.3]\n\n# Detect Dragonfly Doji pattern\npattern = SQA::TAI.cdl_dragonflydoji(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Dragonfly Doji detected - Bullish reversal signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_dragonflydoji/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Dragonfly Doji pattern detected - 100: Dragonfly Doji pattern detected (bullish reversal signal)</p> <p>Note: This pattern only returns bullish signals. There is no bearish equivalent (see Gravestone Doji for bearish variant).</p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#pattern-recognition-rules","title":"Pattern Recognition Rules","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#structure-requirements","title":"Structure Requirements","text":"<ol> <li>Body: Very small or nonexistent (open \u2248 close)</li> <li>Upper Shadow: None or very small</li> <li>Lower Shadow: Long (at least 2-3\u00d7 the body size)</li> <li>Shape: Distinctive \"T\" or dragonfly shape</li> <li>Context: Forms after downtrend or at support</li> </ol>"},{"location":"indicators/patterns/cdl_dragonflydoji/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Open and close are at or very near the session high</li> <li>Long lower shadow shows strong rejection of lower prices</li> <li>Sellers pushed price down but buyers completely reversed the move</li> <li>No upper shadow indicates buyers maintained control through close</li> <li>The longer the lower shadow, the more bullish the signal</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#visual-pattern","title":"Visual Pattern","text":"<pre><code>After downtrend:\n\n   _      Open/Close at high (small or no body)\n   |\n   |\n   |\n   |\n   |      Long lower shadow (rejection of lower prices)\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#what-it-measures","title":"What It Measures","text":"<p>The Dragonfly Doji measures: - Seller Exhaustion: Bears pushed down but couldn't hold - Buyer Strength: Bulls reversed entire session's decline - Price Rejection: Strong rejection of lower price levels - Potential Reversal: Shift in control from sellers to buyers</p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#pattern-psychology","title":"Pattern Psychology","text":"<ol> <li>Session Opens: Price opens in downtrend</li> <li>Selling Pressure: Bears push price significantly lower</li> <li>Buyer Entry: Bulls step in aggressively at lower levels</li> <li>Complete Reversal: Buyers push price all the way back to open/high</li> <li>Closing Strength: Session closes at high, showing buyer control</li> </ol>"},{"location":"indicators/patterns/cdl_dragonflydoji/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0 (not present) or 100 (bullish)</li> <li>Type: Bullish reversal pattern</li> <li>Lag: Real-time single-candle pattern</li> <li>Best Used: After downtrends at support levels</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#pattern-signals","title":"Pattern Signals","text":"<p>Bullish Dragonfly Doji (100) - Appears after downtrend or at support - Long lower shadow shows seller exhaustion - Close at high shows buyer strength - Indicates potential bottom formation - Strong reversal signal when confirmed</p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#reliability-factors","title":"Reliability Factors","text":"Factor Low Reliability Medium Reliability High Reliability Trend Context Sideways Downtrend Strong downtrend Lower Shadow 2\u00d7 body 3\u00d7 body 4\u00d7+ body Volume Low Normal High volume Location Mid-chart Swing low Major support Body Size Medium Small Perfect doji"},{"location":"indicators/patterns/cdl_dragonflydoji/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#buy-signals","title":"Buy Signals","text":"<p>Primary Signal: 1. Dragonfly Doji forms after downtrend 2. Long lower shadow (3\u00d7+ body length) 3. Open and close near session high 4. Preferably at support level</p> <p>Confirmation Signal: <pre><code># Wait for bullish confirmation candle\nif pattern[-2] == 100  # Dragonfly two bars ago\n  if close[-1] &gt; close[-2] &amp;&amp; close[-1] &gt; open[-1]\n    puts \"Dragonfly Doji CONFIRMED\"\n    puts \"Enter LONG on bullish confirmation\"\n  end\nend\n</code></pre></p> <p>Entry Criteria: - Enter on close of confirmation candle - Confirmation closes above dragonfly high - Stop below dragonfly low - Volume increases on confirmation</p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#divergence-analysis","title":"Divergence Analysis","text":"<p>With RSI: <pre><code># Bullish divergence + Dragonfly = very strong signal\nif pattern.last == 100\n  # Price making lower low but RSI higher low = bullish divergence\n  if low.last &lt; low[-10] &amp;&amp; rsi.last &gt; rsi[-10]\n    puts \"Bullish Divergence + Dragonfly Doji\"\n    puts \"Very strong reversal signal\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Best Conditions: - Forms after extended downtrend - At major support levels - With oversold RSI (&lt;30) - High volume on the doji - Long lower shadow (3\u00d7+ body) - Perfect doji (open = close)</p> <p>Time Frames: - Daily charts: Most reliable - 4-hour charts: Good reliability - Hourly charts: Moderate (needs confirmation) - Weekly charts: Very reliable but rare</p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With RSI: <pre><code>dragonfly = SQA::TAI.cdl_dragonflydoji(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif dragonfly.last == 100\n  if rsi.last &lt; 30\n    puts \"Dragonfly Doji + Oversold RSI\"\n    puts \"High probability reversal setup\"\n  elsif rsi.last &lt; 40\n    puts \"Dragonfly Doji + Low RSI\"\n    puts \"Good reversal signal\"\n  end\nend\n</code></pre></p> <p>With Support Levels: <pre><code>dragonfly = SQA::TAI.cdl_dragonflydoji(open, high, low, close)\n\nif dragonfly.last == 100\n  # Find recent support\n  support = close[-60..-1].min\n  near_support = (close.last - support).abs &lt; support * 0.02\n\n  if near_support\n    puts \"Dragonfly Doji AT SUPPORT\"\n    puts \"High probability reversal zone\"\n  end\nend\n</code></pre></p> <p>With Moving Averages: <pre><code>dragonfly = SQA::TAI.cdl_dragonflydoji(open, high, low, close)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif dragonfly.last == 100\n  near_200sma = (close.last - sma_200.last).abs &lt; sma_200.last * 0.02\n\n  if near_200sma\n    puts \"Dragonfly Doji at 200 SMA\"\n    puts \"Major support level test\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Trading Without Downtrend</li> <li>Pattern needs downtrend context</li> <li>In uptrend, it's just a doji</li> <li> <p>Verify trend before trading</p> </li> <li> <p>No Confirmation Wait</p> </li> <li>Pattern is setup, not entry</li> <li>Wait for confirmation candle</li> <li> <p>Reduces false signals significantly</p> </li> <li> <p>Ignoring Shadow Length</p> </li> <li>Longer shadow = stronger signal</li> <li>Short shadow = weaker signal</li> <li> <p>Measure shadow-to-body ratio</p> </li> <li> <p>Poor Risk Management</p> </li> <li>Must use stop below low</li> <li>Calculate position size on risk</li> <li>Don't over-leverage</li> </ol>"},{"location":"indicators/patterns/cdl_dragonflydoji/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>For Different Trading Styles:</p> <p>Day Trading (1-hour to 4-hour): - Strict confirmation required - Use intraday support levels - Tighter stops needed - Quick profit taking</p> <p>Swing Trading (Daily): - Standard approach works well - Daily confirmation ideal - 2-5 day holding typical - Target 2-4R moves</p> <p>Position Trading (Weekly): - Very high reliability - Major trend reversals - Weekly confirmation - Hold weeks to months</p>"},{"location":"indicators/patterns/cdl_dragonflydoji/#practical-examples","title":"Practical Examples","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#example-1-dragonfly-doji-at-support","title":"Example 1: Dragonfly Doji at Support","text":"<pre><code>require 'sqa/tai'\n\nopen, high, low, close = load_ohlc_data('AAPL')\n\npattern = SQA::TAI.cdl_dragonflydoji(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last == 100\n  # Verify downtrend\n  in_downtrend = close[-2] &lt; sma_50[-2] &amp;&amp; close[-2] &lt; close[-20]\n\n  # Find support\n  support = close[-60..-1].min\n  near_support = (low.last - support).abs &lt; support * 0.02\n\n  # Calculate shadow length\n  body = (close.last - open.last).abs\n  lower_shadow = open.last - low.last\n  shadow_ratio = body &gt; 0 ? lower_shadow / body : 999\n\n  if in_downtrend &amp;&amp; near_support &amp;&amp; shadow_ratio &gt; 3\n    puts \"Strong Dragonfly Doji Setup!\"\n    puts \"Current: #{close.last.round(2)}\"\n    puts \"Support: #{support.round(2)}\"\n    puts \"Shadow ratio: #{shadow_ratio.round(1)}:1\"\n    puts \"Lower shadow: #{lower_shadow.round(2)}\"\n    puts \"\\nWait for bullish confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#example-2-dragonfly-with-rsi","title":"Example 2: Dragonfly with RSI","text":"<pre><code>open, high, low, close = load_ohlc_data('TSLA')\n\npattern = SQA::TAI.cdl_dragonflydoji(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last == 100\n  puts \"Dragonfly Doji Pattern\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n\n  if rsi.last &lt; 30\n    puts \"\\nOVERSOLD + Dragonfly Doji\"\n    puts \"Very strong reversal signal\"\n    puts \"High probability long setup\"\n  elsif rsi.last &lt; 40\n    puts \"\\nLow RSI + Dragonfly Doji\"\n    puts \"Good reversal signal\"\n  else\n    puts \"\\nDragonfly but RSI not oversold\"\n    puts \"Moderate probability\"\n  end\n\n  # Shadow analysis\n  body = (close.last - open.last).abs\n  lower_shadow = [open.last, close.last].min - low.last\n\n  puts \"\\nShadow Length: #{lower_shadow.round(2)}\"\n  puts \"Body Size: #{body.round(2)}\"\n\n  if body &lt; lower_shadow * 0.1\n    puts \"Excellent doji (tiny body)\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#example-3-dragonfly-with-volume","title":"Example 3: Dragonfly with Volume","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('NVDA')\n\npattern = SQA::TAI.cdl_dragonflydoji(open, high, low, close)\n\nif pattern.last == 100\n  avg_volume = volume[-20..-1].sum / 20.0\n  current_volume = volume.last\n\n  puts \"Dragonfly Doji Volume Analysis\"\n  puts \"Current volume: #{current_volume.round(0)}\"\n  puts \"Average volume: #{avg_volume.round(0)}\"\n  puts \"Ratio: #{(current_volume / avg_volume).round(2)}\u00d7\"\n\n  if current_volume &gt; avg_volume * 2\n    puts \"\\nVERY HIGH VOLUME\"\n    puts \"Strong buying pressure at lows\"\n    puts \"Excellent reversal signal\"\n  elsif current_volume &gt; avg_volume * 1.3\n    puts \"\\nABOVE AVERAGE VOLUME\"\n    puts \"Good buying interest\"\n  else\n    puts \"\\nLOW VOLUME\"\n    puts \"Weaker signal - need confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#example-4-complete-trading-system","title":"Example 4: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('MSFT')\n\npattern = SQA::TAI.cdl_dragonflydoji(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif pattern[-2] == 100  # Pattern formed two bars ago\n  # Check for confirmation\n  confirmed = close[-1] &gt; close[-2] &amp;&amp; close[-1] &gt; open[-1]\n\n  if confirmed\n    puts \"Dragonfly Doji CONFIRMED!\"\n    puts \"=\" * 50\n\n    # Downtrend verification\n    in_downtrend = close[-3] &lt; sma_50[-3]\n\n    # RSI check\n    rsi_val = rsi[-2]\n    oversold = rsi_val &lt; 40\n\n    # Volume check\n    avg_vol = volume[-20..-2].sum / 19.0\n    high_volume = volume[-2] &gt; avg_vol * 1.5\n\n    # Support check\n    support = close[-60..-1].min\n    at_support = (low[-2] - support).abs &lt; support * 0.03\n\n    # Shadow quality\n    body = (close[-2] - open[-2]).abs\n    lower_shadow = [open[-2], close[-2]].min - low[-2]\n    strong_shadow = lower_shadow &gt; body * 3\n\n    # Doji quality\n    perfect_doji = body &lt; (high[-2] - low[-2]) * 0.1\n\n    # Score the setup\n    score = 0\n    score += 1 if in_downtrend\n    score += 1 if oversold\n    score += 1 if high_volume\n    score += 1 if at_support\n    score += 1 if strong_shadow\n    score += 1 if perfect_doji\n\n    puts \"Setup Analysis:\"\n    puts \"Downtrend: #{in_downtrend ? '\u2713' : '\u2717'}\"\n    puts \"Oversold RSI: #{oversold ? '\u2713' : '\u2717'} (#{rsi_val.round(2)})\"\n    puts \"High Volume: #{high_volume ? '\u2713' : '\u2717'}\"\n    puts \"At Support: #{at_support ? '\u2713' : '\u2717'}\"\n    puts \"Strong Shadow: #{strong_shadow ? '\u2713' : '\u2717'} (#{(lower_shadow/body).round(1)}\u00d7)\"\n    puts \"Perfect Doji: #{perfect_doji ? '\u2713' : '\u2717'}\"\n    puts \"\\nSetup Score: #{score}/6\"\n\n    if score &gt;= 4\n      # Calculate trade parameters\n      entry = close[-1]\n      stop = low[-2] * 0.995  # 0.5% below dragonfly low\n      risk = entry - stop\n      target = entry + (risk * 3)\n\n      puts \"\\n*** HIGH PROBABILITY LONG SETUP ***\"\n      puts \"Entry: #{entry.round(2)}\"\n      puts \"Stop Loss: #{stop.round(2)}\"\n      puts \"Target: #{target.round(2)}\"\n      puts \"Risk: $#{risk.round(2)} (#{(risk/entry*100).round(2)}%)\"\n      puts \"Reward: $#{(target-entry).round(2)}\"\n      puts \"R:R Ratio: 1:3\"\n\n      # Position sizing\n      account_size = 100000\n      risk_percent = 0.01\n      risk_amount = account_size * risk_percent\n      shares = (risk_amount / risk).floor\n\n      puts \"\\nPosition Sizing:\"\n      puts \"Account: $#{account_size}\"\n      puts \"Risk per trade: 1% = $#{risk_amount.round(2)}\"\n      puts \"Shares: #{shares}\"\n      puts \"Total position: $#{(shares * entry).round(2)}\"\n\n    elsif score &gt;= 3\n      puts \"\\nDECENT SETUP - Consider reduced size\"\n    else\n      puts \"\\nLOW PROBABILITY - Skip this trade\"\n    end\n  else\n    puts \"Dragonfly Doji waiting for confirmation...\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation candle\nif pattern[-2] == 100\n  if close[-1] &gt; high[-2]  # Broke above dragonfly high\n    entry = close.last\n    stop = low[-2] * 0.995\n    puts \"Enter LONG at #{entry.round(2)}\"\n    puts \"Stop at #{stop.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on dragonfly close (higher risk)\nif pattern.last == 100\n  entry = close.last\n  stop = low.last * 0.995\n  puts \"Enter LONG at #{entry.round(2)}\"\n  puts \"Stop at #{stop.round(2)}\"\n  puts \"WARNING: No confirmation\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if pattern.last == 100\n  # Stop below dragonfly low\n  stop = low.last * 0.995  # 0.5% buffer\n  puts \"Stop loss: #{stop.round(2)}\"\n  puts \"Rationale: Below rejection low\"\n\n  # Calculate risk\n  entry = close.last\n  risk = entry - stop\n  risk_percent = (risk / entry) * 100\n  puts \"Risk: #{risk_percent.round(2)}%\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#profit-targets","title":"Profit Targets","text":"<pre><code>if pattern.last == 100\n  entry = close.last\n  stop = low.last * 0.995\n  risk = entry - stop\n\n  # Multiple targets\n  target_1 = entry + (risk * 1.5)\n  target_2 = entry + (risk * 2.5)\n  target_3 = entry + (risk * 4.0)\n\n  puts \"Profit Targets:\"\n  puts \"T1 (1.5R): #{target_1.round(2)} - 50% position\"\n  puts \"T2 (2.5R): #{target_2.round(2)} - 30% position\"\n  puts \"T3 (4R): #{target_3.round(2)} - 20% position\"\n\n  # Or target resistance\n  resistance = close[-60..-1].max\n  puts \"Resistance target: #{resistance.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_dragonflydoji/#pattern-statistics","title":"Pattern Statistics","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#frequency","title":"Frequency","text":"<ul> <li>Occurrence: Rare (&lt; 2% of candles)</li> <li>Best Timeframes: Daily, Weekly</li> <li>Markets: All markets (stocks, forex, crypto, commodities)</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#success-rate","title":"Success Rate","text":"<ul> <li>With confirmation: 65-75% success rate</li> <li>Without confirmation: 45-55% success rate</li> <li>At support: 75-85% success rate</li> <li>With oversold RSI: 70-80% success rate</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#average-move","title":"Average Move","text":"<ul> <li>Typical bounce: 5-15% from low</li> <li>Major reversals: 20-50% possible</li> <li>Time to target: 5-20 candles (varies by timeframe)</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#pattern-quality-checklist","title":"Pattern Quality Checklist","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#strong-dragonfly-doji-higher-probability","title":"Strong Dragonfly Doji (Higher Probability)","text":"<ul> <li> Forms after clear downtrend (20+ candles)</li> <li> Long lower shadow (3\u00d7+ body length)</li> <li> Perfect doji (open \u2248 close)</li> <li> No or tiny upper shadow</li> <li> High volume on pattern day</li> <li> At major support level</li> <li> RSI &lt; 30 (oversold)</li> <li> Bullish confirmation candle</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#weak-dragonfly-doji-lower-probability","title":"Weak Dragonfly Doji (Lower Probability)","text":"<ul> <li>No clear downtrend</li> <li>Short lower shadow (&lt; 2\u00d7 body)</li> <li>Large body</li> <li>Upper shadow present</li> <li>Low volume</li> <li>Mid-range location</li> <li>Neutral RSI</li> <li>No confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Trading Without Downtrend Context</li> <li>Pattern requires downtrend</li> <li>In uptrend, just a doji</li> <li> <p>Verify trend first</p> </li> <li> <p>No Confirmation</p> </li> <li>Most critical mistake</li> <li>Significantly reduces success rate</li> <li> <p>Always wait for confirmation</p> </li> <li> <p>Ignoring Shadow Length</p> </li> <li>Shadow length indicates strength</li> <li>Short shadow = weak signal</li> <li> <p>Need 3\u00d7+ body for quality</p> </li> <li> <p>Poor Stop Placement</p> </li> <li>Stop must be below low</li> <li>Pattern invalidated if low breaks</li> <li> <p>Use proper buffer (0.5-1%)</p> </li> <li> <p>Wrong Body Assessment</p> </li> <li>Must be very small body</li> <li>Open and close must be near equal</li> <li>Large body = not dragonfly</li> </ol>"},{"location":"indicators/patterns/cdl_dragonflydoji/#related-patterns","title":"Related Patterns","text":""},{"location":"indicators/patterns/cdl_dragonflydoji/#similar-bullish-patterns","title":"Similar Bullish Patterns","text":"<ul> <li>Hammer - Similar but body not at top</li> <li>Inverted Hammer - Long upper shadow instead</li> <li>Morning Star - Three-candle reversal</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#doji-family","title":"Doji Family","text":"<ul> <li>Doji Star - Doji that gaps from trend</li> <li>Gravestone Doji - Bearish opposite</li> <li>Long-Legged Doji - Long shadows both ways</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#opposite-pattern","title":"Opposite Pattern","text":"<ul> <li>Gravestone Doji - Bearish reversal with long upper shadow</li> </ul>"},{"location":"indicators/patterns/cdl_dragonflydoji/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>T-Shape is Key: Long lower shadow + small body at top = dragonfly</li> <li>Downtrend Required: Only valid as reversal in downtrend</li> <li>Confirmation Critical: Wait for bullish candle to confirm</li> <li>Shadow Length Matters: Longer shadow = stronger signal</li> <li>Support Amplifies: Pattern strongest at support levels</li> <li>Volume Confirms: High volume adds conviction</li> <li>Stop Below Low: Pattern fails if low breaks</li> </ol>"},{"location":"indicators/patterns/cdl_dragonflydoji/#see-also","title":"See Also","text":"<ul> <li>Gravestone Doji - Bearish opposite</li> <li>Hammer Pattern - Similar bullish reversal</li> <li>Doji Star - Two-candle doji reversal</li> <li>Morning Star - Three-candle reversal</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_engulfing/","title":"Engulfing Pattern","text":"<p>The Engulfing pattern is a powerful two-candlestick reversal pattern. A bullish engulfing occurs when a large white candle completely engulfs the previous small black candle. A bearish engulfing is the opposite.</p>"},{"location":"indicators/patterns/cdl_engulfing/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 101.0, 102.0, 104.0, 103.0]\nhigh  = [101.0, 102.5, 105.0, 105.0, 108.0]\nlow   = [99.0, 100.5, 101.5, 102.5, 102.0]\nclose = [100.5, 102.0, 104.5, 103.0, 107.0]\n\n# Detect Engulfing patterns\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n\nif engulfing.last == 100\n  puts \"Bullish Engulfing - Buy signal!\"\nelsif engulfing.last == -100\n  puts \"Bearish Engulfing - Sell signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_engulfing/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Engulfing pattern - 100: Bullish Engulfing (buy signal) - -100: Bearish Engulfing (sell signal)</p>"},{"location":"indicators/patterns/cdl_engulfing/#bullish-engulfing","title":"Bullish Engulfing","text":""},{"location":"indicators/patterns/cdl_engulfing/#characteristics","title":"Characteristics","text":"<ul> <li>Occurs after downtrend</li> <li>First candle: Small bearish (black)</li> <li>Second candle: Large bullish (white)</li> <li>Second candle engulfs first</li> </ul>"},{"location":"indicators/patterns/cdl_engulfing/#visual-pattern","title":"Visual Pattern","text":"<pre><code>After downtrend:\n\n  |---|      Small bearish\n\n    |-----|  Large bullish (engulfs previous)\n    |     |\n    |-----|\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#bearish-engulfing","title":"Bearish Engulfing","text":""},{"location":"indicators/patterns/cdl_engulfing/#characteristics_1","title":"Characteristics","text":"<ul> <li>Occurs after uptrend</li> <li>First candle: Small bullish (white)</li> <li>Second candle: Large bearish (black)</li> <li>Second candle engulfs first</li> </ul>"},{"location":"indicators/patterns/cdl_engulfing/#visual-pattern_1","title":"Visual Pattern","text":"<pre><code>After uptrend:\n\n  |-----|    Small bullish\n\n    |-----|  Large bearish (engulfs previous)\n    |     |\n    |-----|\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#interpretation","title":"Interpretation","text":"<ul> <li>Strong reversal signal: One of most reliable patterns</li> <li>Shows momentum shift</li> <li>Large candle shows conviction</li> <li>Best at key support/resistance levels</li> </ul>"},{"location":"indicators/patterns/cdl_engulfing/#example-engulfing-in-trend-context","title":"Example: Engulfing in Trend Context","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif engulfing.last == 100\n  # Bullish engulfing\n  in_downtrend = close[-2] &lt; sma_50[-2]\n\n  if in_downtrend\n    puts \"Bullish Engulfing in downtrend!\"\n    puts \"Strong reversal signal - Consider LONG\"\n  else\n    puts \"Bullish Engulfing but not in downtrend\"\n    puts \"May be continuation - verify context\"\n  end\nelsif engulfing.last == -100\n  # Bearish engulfing\n  in_uptrend = close[-2] &gt; sma_50[-2]\n\n  if in_uptrend\n    puts \"Bearish Engulfing in uptrend!\"\n    puts \"Strong reversal signal - Consider SHORT\"\n  else\n    puts \"Bearish Engulfing but not in uptrend\"\n    puts \"May be continuation - verify context\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#example-engulfing-with-volume-confirmation","title":"Example: Engulfing with Volume Confirmation","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n\nif engulfing.last != 0\n  pattern_type = engulfing.last &gt; 0 ? \"Bullish\" : \"Bearish\"\n\n  # Compare volumes\n  vol_first_candle = volume[-2]\n  vol_engulfing_candle = volume[-1]\n  avg_volume = volume[-20..-1].sum / 20.0\n\n  puts \"#{pattern_type} Engulfing Pattern\"\n  puts \"First candle volume: #{vol_first_candle.round(0)}\"\n  puts \"Engulfing candle volume: #{vol_engulfing_candle.round(0)}\"\n  puts \"Average volume: #{avg_volume.round(0)}\"\n\n  # Strong pattern = engulfing candle has high volume\n  if vol_engulfing_candle &gt; avg_volume * 1.5\n    puts \"\\nSTRONG PATTERN with high volume!\"\n    puts \"High conviction reversal\"\n  elsif vol_engulfing_candle &gt; vol_first_candle\n    puts \"\\nGOOD PATTERN - volume increased\"\n  else\n    puts \"\\nWEAK PATTERN - low volume\"\n    puts \"Less reliable - wait for confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#example-engulfing-at-supportresistance","title":"Example: Engulfing at Support/Resistance","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\n\n# Find key levels\nresistance = close[-120..-1].max\nsupport = close[-120..-1].min\n\nif engulfing.last == 100  # Bullish\n  distance_from_support = ((close.last - support) / support * 100).abs\n\n  if distance_from_support &lt; 3  # Within 3% of support\n    puts \"Bullish Engulfing AT SUPPORT!\"\n    puts \"Current: #{close.last.round(2)}\"\n    puts \"Support: #{support.round(2)}\"\n    puts \"Buyers defending major support\"\n    puts \"HIGH PROBABILITY reversal setup\"\n  end\nelsif engulfing.last == -100  # Bearish\n  distance_from_resistance = ((close.last - resistance) / resistance * 100).abs\n\n  if distance_from_resistance &lt; 3  # Within 3% of resistance\n    puts \"Bearish Engulfing AT RESISTANCE!\"\n    puts \"Current: #{close.last.round(2)}\"\n    puts \"Resistance: #{resistance.round(2)}\"\n    puts \"Sellers defending major resistance\"\n    puts \"HIGH PROBABILITY reversal setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#example-engulfing-with-rsi","title":"Example: Engulfing with RSI","text":"<pre><code>open, high, low, close = load_ohlc_data('NVDA')\n\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif engulfing.last == 100  # Bullish\n  if rsi.last &lt; 30\n    puts \"Bullish Engulfing + OVERSOLD RSI!\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n    puts \"Multiple bullish signals - Strong BUY\"\n  elsif rsi.last &lt; 40\n    puts \"Bullish Engulfing + Low RSI\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n    puts \"Good reversal setup\"\n  end\nelsif engulfing.last == -100  # Bearish\n  if rsi.last &gt; 70\n    puts \"Bearish Engulfing + OVERBOUGHT RSI!\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n    puts \"Multiple bearish signals - Strong SELL\"\n  elsif rsi.last &gt; 60\n    puts \"Bearish Engulfing + High RSI\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n    puts \"Good reversal setup\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#trading-the-engulfing-pattern","title":"Trading the Engulfing Pattern","text":""},{"location":"indicators/patterns/cdl_engulfing/#entry-strategies","title":"Entry Strategies","text":""},{"location":"indicators/patterns/cdl_engulfing/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter immediately at engulfing candle close\nif engulfing.last != 0\n  entry = close.last\n  direction = engulfing.last &gt; 0 ? \"LONG\" : \"SHORT\"\n  puts \"Enter #{direction} at #{entry.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#conservative-entry","title":"Conservative Entry","text":"<pre><code># Wait for next candle confirmation\nif engulfing[-2] != 0\n  if engulfing[-2] == 100 &amp;&amp; close[-1] &gt; close[-2]\n    puts \"Bullish engulfing confirmed - Enter LONG\"\n  elsif engulfing[-2] == -100 &amp;&amp; close[-1] &lt; close[-2]\n    puts \"Bearish engulfing confirmed - Enter SHORT\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code>if engulfing.last == 100  # Bullish\n  # Stop below engulfing pattern low\n  stop = [low[-2], low[-1]].min\n  stop_with_buffer = stop * 0.995  # 0.5% buffer\n  puts \"Stop loss: #{stop_with_buffer.round(2)}\"\n\nelsif engulfing.last == -100  # Bearish\n  # Stop above engulfing pattern high\n  stop = [high[-2], high[-1]].max\n  stop_with_buffer = stop * 1.005  # 0.5% buffer\n  puts \"Stop loss: #{stop_with_buffer.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#profit-targets","title":"Profit Targets","text":"<pre><code>if engulfing.last == 100  # Bullish\n  entry = close.last\n  stop = [low[-2], low[-1]].min\n  risk = entry - stop\n\n  target_1 = entry + (risk * 1.5)  # 1.5:1\n  target_2 = entry + (risk * 2.5)  # 2.5:1\n  target_3 = entry + (risk * 4)    # 4:1\n\n  puts \"Targets:\"\n  puts \"T1 (1.5:1): #{target_1.round(2)}\"\n  puts \"T2 (2.5:1): #{target_2.round(2)}\"\n  puts \"T3 (4:1): #{target_3.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('GOOGL')\n\nengulfing = SQA::TAI.cdl_engulfing(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nsma_200 = SQA::TAI.sma(close, period: 200)\n\nif engulfing.last != 0\n  is_bullish = engulfing.last &gt; 0\n  pattern_name = is_bullish ? \"Bullish Engulfing\" : \"Bearish Engulfing\"\n\n  # Context analysis\n  trend = if is_bullish\n    close[-2] &lt; sma_50[-2] ? \"Downtrend\" : \"Not downtrend\"\n  else\n    close[-2] &gt; sma_50[-2] ? \"Uptrend\" : \"Not uptrend\"\n  end\n\n  # RSI check\n  rsi_val = rsi.last\n  rsi_favorable = is_bullish ? rsi_val &lt; 40 : rsi_val &gt; 60\n\n  # Volume check\n  avg_vol = volume[-20..-1].sum / 20.0\n  high_volume = volume.last &gt; avg_vol * 1.3\n\n  # Support/Resistance check\n  support = close[-60..-1].min\n  resistance = close[-60..-1].max\n  at_key_level = if is_bullish\n    (close.last - support).abs &lt; support * 0.03\n  else\n    (close.last - resistance).abs &lt; resistance * 0.03\n  end\n\n  # Size of engulfing candle\n  first_body = (close[-2] - open[-2]).abs\n  engulf_body = (close[-1] - open[-1]).abs\n  strong_engulf = engulf_body &gt; first_body * 2\n\n  # Calculate score\n  score = 0\n  score += 1 if trend.include?(\"trend\")\n  score += 1 if rsi_favorable\n  score += 1 if high_volume\n  score += 1 if at_key_level\n  score += 1 if strong_engulf\n\n  puts \"#{pattern_name} Pattern Analysis\"\n  puts \"=\" * 40\n  puts \"Trend Context: #{trend}\"\n  puts \"RSI: #{rsi_val.round(2)} (favorable: #{rsi_favorable})\"\n  puts \"Volume: #{high_volume ? 'High' : 'Normal'}\"\n  puts \"At Key Level: #{at_key_level}\"\n  puts \"Strong Engulfing: #{strong_engulf}\"\n  puts \"\\nSetup Score: #{score}/5\"\n\n  if score &gt;= 4\n    entry = close.last\n    stop = is_bullish ? [low[-2], low[-1]].min : [high[-2], high[-1]].max\n    stop = is_bullish ? stop * 0.995 : stop * 1.005\n    risk = (entry - stop).abs\n    target = is_bullish ? entry + risk * 3 : entry - risk * 3\n\n    puts \"\\n*** HIGH PROBABILITY SETUP ***\"\n    puts \"Direction: #{is_bullish ? 'LONG' : 'SHORT'}\"\n    puts \"Entry: #{entry.round(2)}\"\n    puts \"Stop: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)}\"\n    puts \"Reward: $#{((target - entry).abs).round(2)}\"\n    puts \"R:R = 1:3\"\n  elsif score &gt;= 3\n    puts \"\\nDECENT SETUP - Consider position sizing down\"\n  else\n    puts \"\\nLOW PROBABILITY - Skip this trade\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_engulfing/#pattern-strength-factors","title":"Pattern Strength Factors","text":"Factor Weak Medium Strong Engulfing Size 1.2\u00d7 first 1.5\u00d7 first 2\u00d7+ first Volume &lt; Average Average 1.5\u00d7+ avg Trend Context Weak trend Clear trend Strong trend RSI Neutral Approaching Extreme Location Random Near level At key level"},{"location":"indicators/patterns/cdl_engulfing/#advantages","title":"Advantages","text":"<ul> <li>Clear visual pattern</li> <li>Strong reversal signal</li> <li>Objective entry/stop rules</li> <li>Works on all timeframes</li> <li>High reliability when confirmed</li> </ul>"},{"location":"indicators/patterns/cdl_engulfing/#limitations","title":"Limitations","text":"<ul> <li>Can occur mid-trend (false signals)</li> <li>Needs trend context</li> <li>Better with confirmation</li> <li>Requires volume analysis</li> <li>Not common (wait for quality setups)</li> </ul>"},{"location":"indicators/patterns/cdl_engulfing/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Trading without trend context</li> <li>Ignoring volume</li> <li>Not using key levels</li> <li>No confirmation wait</li> <li>Poor stop placement</li> </ol>"},{"location":"indicators/patterns/cdl_engulfing/#best-practices","title":"Best Practices","text":"<ol> <li>\u2705 Wait for right trend context</li> <li>\u2705 Confirm with volume</li> <li>\u2705 Look for RSI extremes</li> <li>\u2705 Trade at support/resistance</li> <li>\u2705 Use proper risk management</li> </ol>"},{"location":"indicators/patterns/cdl_engulfing/#see-also","title":"See Also","text":"<ul> <li>Hammer Pattern - Single candle reversal</li> <li>Doji Pattern - Indecision pattern</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/patterns/cdl_eveningdojistar/","title":"CDL_EVENINGDOJISTAR (Evening Doji Star)","text":""},{"location":"indicators/patterns/cdl_eveningdojistar/#overview","title":"Overview","text":"<p>The Evening Doji Star is a three-candle bearish reversal pattern that typically appears at the top of an uptrend. It consists of a long bullish candle, followed by a doji that gaps up, and then a long bearish candle that closes well into the body of the first candle. This pattern signals potential trend exhaustion and a shift from bullish to bearish sentiment, warning traders of an imminent downward reversal.</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period <code>penetration</code> Float 0.3 Percentage of penetration of the third candle into the first candle's body (0.0 to 1.0)"},{"location":"indicators/patterns/cdl_eveningdojistar/#parameter-details","title":"Parameter Details","text":"<p>open - Opening price for each trading period - Must be same length as high, low, and close arrays - Used to determine candle body direction and size</p> <p>high - Highest price reached during each trading period - Must be same length as other price arrays - Critical for identifying gaps and upper shadows</p> <p>low - Lowest price reached during each trading period - Must be same length as other price arrays - Used to identify shadow lengths and gap characteristics</p> <p>close - Closing price for each trading period - Must be same length as other price arrays - Used to determine candle body direction and pattern completion</p> <p>penetration - Controls how far the third candle must close into the first candle's body - Default 0.3 means 30% penetration required - Higher values (e.g., 0.5) make pattern detection more strict - Lower values (e.g., 0.1) make pattern detection more lenient</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_eveningdojistar/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Price data arrays showing uptrend and reversal\nopen  = [45.0, 47.0, 48.5, 48.6, 46.5]\nhigh  = [47.5, 48.8, 48.7, 48.8, 46.8]\nlow   = [45.0, 46.8, 48.4, 48.5, 44.5]\nclose = [47.0, 48.5, 48.6, 48.5, 45.0]\n\nresult = SQA::TAI.cdl_eveningdojistar(open, high, low, close)\nputs \"Pattern Signal: #{result.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_eveningdojistar/#with-custom-penetration","title":"With Custom Penetration","text":"<pre><code># More strict pattern detection with 50% penetration\nresult = SQA::TAI.cdl_eveningdojistar(\n  open,\n  high,\n  low,\n  close,\n  penetration: 0.5\n)\n\n# Check for pattern detection\nif result.last == -100\n  puts \"Bearish Evening Doji Star detected!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_eveningdojistar/#real-time-pattern-monitoring","title":"Real-Time Pattern Monitoring","text":"<pre><code># Monitor multiple periods for pattern emergence\nopen  = [42.0, 44.0, 46.0, 48.0, 49.5, 49.6, 47.5]\nhigh  = [44.5, 46.5, 48.5, 49.8, 49.8, 49.8, 47.8]\nlow   = [42.0, 43.8, 45.8, 47.8, 49.3, 49.4, 45.5]\nclose = [44.0, 46.0, 48.0, 49.5, 49.6, 49.5, 46.0]\n\nresult = SQA::TAI.cdl_eveningdojistar(open, high, low, close)\n\nresult.each_with_index do |signal, index|\n  if signal == -100\n    puts \"Bearish pattern detected at period #{index}\"\n    puts \"Entry: #{close[index]}, Previous high: #{high[index-1]}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_eveningdojistar/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_eveningdojistar/#what-it-measures","title":"What It Measures","text":"<p>The Evening Doji Star pattern measures potential reversal points at the end of bullish trends. It identifies a specific three-candle sequence that suggests buyers are losing control and sellers may be entering the market. The pattern is valuable because:</p> <ul> <li>It shows indecision (doji) after a strong bullish move, indicating buyer exhaustion</li> <li>The gap up followed by a gap down demonstrates a dramatic shift in sentiment</li> <li>The strong bearish third candle confirms seller commitment</li> <li>It provides an early warning of potential trend reversal at market tops</li> </ul>"},{"location":"indicators/patterns/cdl_eveningdojistar/#pattern-formation","title":"Pattern Formation","text":"<p>The pattern requires three consecutive candles in this specific sequence:</p> <ol> <li> <p>First Candle (Bullish): A long bullish candle showing strong buying pressure, typically near the peak of an uptrend. The candle should have a substantial body with close significantly above open.</p> </li> <li> <p>Second Candle (Doji): A doji candle that gaps up from the first candle's close. The doji indicates market indecision with opening and closing prices nearly equal. This shows buyers are losing momentum.</p> </li> <li> <p>Third Candle (Bearish): A long bearish candle that gaps down from the doji and closes well into the first candle's body (controlled by the penetration parameter). This confirms sellers have taken control.</p> </li> </ol> <p>Key Characteristics: - The doji must gap away from both the first and third candles - The third candle should close at least 30% (default) into the first candle's body - The gaps demonstrate dramatic sentiment shifts - All three candles should show clear directional intent or indecision</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Returns integer values: 0 (no pattern), -100 (bearish pattern detected)</li> <li>Type: Pattern recognition, reversal indicator</li> <li>Lag: None - identifies patterns as they complete (requires three candles)</li> <li>Best Used: At the end of established uptrends, overbought conditions</li> <li>Reliability: Moderate to high when confirmed with other indicators</li> <li>Time Frame: Works on all time frames; more reliable on daily and weekly charts</li> </ul>"},{"location":"indicators/patterns/cdl_eveningdojistar/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_eveningdojistar/#signal-values","title":"Signal Values","text":"<p>The indicator returns specific integer values:</p> <ul> <li>-100 (Bearish Signal): Evening Doji Star pattern detected</li> <li>Indicates potential bearish reversal</li> <li>Suggests uptrend may be ending</li> <li>Sellers are overwhelming buyers</li> <li> <p>Consider short positions or exit longs with confirmation</p> </li> <li> <p>0 (No Pattern): No Evening Doji Star pattern at this position</p> </li> <li>Pattern requirements not met</li> <li>Continue monitoring other indicators</li> <li>Wait for pattern completion or other signals</li> </ul>"},{"location":"indicators/patterns/cdl_eveningdojistar/#pattern-strength-indicators","title":"Pattern Strength Indicators","text":"<p>Assess the reliability of the pattern by examining:</p> <ol> <li>Prior Trend Strength</li> <li>Pattern is most reliable after extended uptrends</li> <li>Multiple bullish candles before pattern increases significance</li> <li> <p>Weaker after sideways or choppy price action</p> </li> <li> <p>Doji Quality</p> </li> <li>Smaller doji body indicates stronger indecision</li> <li>Long shadows on doji show battle between buyers and sellers</li> <li> <p>Doji at resistance level increases pattern reliability</p> </li> <li> <p>Third Candle Penetration</p> </li> <li>Deeper penetration into first candle = stronger reversal signal</li> <li>Close below first candle's midpoint is particularly bearish</li> <li> <p>Higher volume on third candle confirms conviction</p> </li> <li> <p>Gap Sizes</p> </li> <li>Larger gaps indicate more dramatic sentiment shift</li> <li>Visible gaps on charts are more psychologically significant</li> <li>Gap down on third candle especially important</li> </ol>"},{"location":"indicators/patterns/cdl_eveningdojistar/#context-considerations","title":"Context Considerations","text":"<ul> <li>Location: Most effective at established resistance levels or after euphoric rallies</li> <li>Volume: Increasing volume on third candle confirms reversal strength</li> <li>Market Condition: Works best in trending markets, less reliable in ranging markets</li> <li>Time Frame: Higher time frames (daily, weekly) provide more reliable signals</li> </ul>"},{"location":"indicators/patterns/cdl_eveningdojistar/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_eveningdojistar/#sell-signals","title":"Sell Signals","text":"<p>Primary conditions for entering short positions or exiting longs:</p> <ol> <li>Pattern Confirmation</li> <li>All three candles meet Evening Doji Star criteria</li> <li>Signal value = -100</li> <li> <p>Doji clearly gaps from both first and third candles</p> </li> <li> <p>Entry Criteria</p> </li> <li>Exit longs on close of third candle or</li> <li>Enter shorts after confirmation: break below third candle's low</li> <li> <p>More conservative: wait for next candle to close lower</p> </li> <li> <p>Additional Confirmation Factors</p> </li> <li>Pattern forms at known resistance level</li> <li>RSI or other oscillators show overbought conditions</li> <li>Volume increases on third candle</li> <li>Prior uptrend was extended and clear</li> </ol> <p>Example Scenario: <pre><code># After extended uptrend, pattern detected at resistance\nif result.last == -100 &amp;&amp;\n   rsi.last &gt; 70 &amp;&amp;  # Overbought\n   close.last &lt; resistance_level &amp;&amp;  # Below resistance\n   volume.last &gt; volume[-2]  # Increasing volume\n\n  entry_price = close.last\n  stop_loss = high[-2] + (atr.last * 1.5)  # Above doji high\n  target = entry_price - ((stop_loss - entry_price) * 2)  # 2:1 reward/risk\n\n  puts \"SELL Signal: Enter at #{entry_price}\"\n  puts \"Stop Loss: #{stop_loss}\"\n  puts \"Target: #{target}\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#position-management","title":"Position Management","text":"<p>Stop Loss Placement: - Conservative: Above the high of the doji (second candle) - Aggressive: Above the high of the third candle - ATR-based: 1.5-2x ATR above entry point</p> <p>Take Profit Targets: - First target: Recent support level or 1:1 reward/risk - Second target: Next major support or 2:1 reward/risk - Trailing stop: After first target hit, trail with 2x ATR</p> <p>Position Sizing: - Risk 1-2% of capital per trade - Calculate position size based on stop loss distance - Reduce size if pattern appears in choppy/ranging market</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#exit-signals-for-short-positions","title":"Exit Signals for Short Positions","text":"<p>Conditions for closing short positions:</p> <ol> <li>Stop Loss Triggers</li> <li>Price closes above stop loss level</li> <li>Subsequent bullish engulfing pattern forms</li> <li> <p>Break above doji's high with volume</p> </li> <li> <p>Take Profit Conditions</p> </li> <li>Price reaches predetermined target levels</li> <li>Strong support level reached</li> <li> <p>Bullish reversal pattern forms at support</p> </li> <li> <p>Pattern Failure Signs</p> </li> <li>Fourth candle closes above third candle with high volume</li> <li>Price fails to move lower after pattern</li> <li>Bullish candlestick pattern forms immediately after</li> </ol>"},{"location":"indicators/patterns/cdl_eveningdojistar/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_eveningdojistar/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>The Evening Doji Star works best in these conditions:</p> <p>Market Conditions: - Clear uptrend preceding the pattern (at least 5-10 bullish candles) - Overbought conditions per momentum indicators - Market approaching major resistance levels - Low volatility on doji, increasing volatility on third candle</p> <p>Time Frames: - Daily charts: Most reliable and widely recognized - Weekly charts: Stronger signals, fewer occurrences - 4-hour charts: Good for swing trading - Intraday (&lt; 1 hour): Less reliable, more false signals</p> <p>Asset Classes: - Stocks: Highly effective, especially large-cap stocks - Forex: Works well on major pairs with sufficient liquidity - Commodities: Reliable on liquid contracts - Cryptocurrencies: Can work but volatility creates false signals</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Enhance reliability by confirming with complementary indicators:</p> <p>With Trend Indicators: - Moving Averages: Pattern near 200-day MA resistance increases reliability - MACD: Bearish divergence or histogram turning negative confirms reversal - ADX: Low ADX suggests trend change possible; pattern helps identify direction</p> <p>With Momentum Indicators: - RSI: Pattern + RSI &gt; 70 = high probability reversal - Stochastic: Overbought stochastic crossing down confirms pattern - CCI: Emerging from overbought territory strengthens signal</p> <p>With Volume Indicators: - Volume: Third candle volume &gt; average confirms conviction - OBV: Falling OBV confirms distribution despite rising prices - Volume Profile: Pattern at high volume resistance node more significant</p> <p>With Support/Resistance: - Fibonacci Retracements: Pattern at 38.2% or 50% retracement highly significant - Pivot Points: Pattern at daily/weekly pivot resistance adds conviction - Horizontal Resistance: Historical resistance level validates reversal potential</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid these mistakes when trading Evening Doji Star patterns:</p> <ol> <li>Ignoring Prior Trend</li> <li>Pattern requires established uptrend to be valid</li> <li>Appearing in downtrend or sideways market reduces reliability</li> <li> <p>Always confirm preceding bullish trend over multiple periods</p> </li> <li> <p>Trading Without Confirmation</p> </li> <li>Don't enter on second candle expecting doji</li> <li>Wait for third candle completion</li> <li> <p>Consider waiting for fourth candle to confirm reversal</p> </li> <li> <p>Poor Risk Management</p> </li> <li>Pattern can fail; always use stop losses</li> <li>Don't risk more than 2% of capital on single trade</li> <li> <p>Account for gap risk, especially in volatile markets</p> </li> <li> <p>Neglecting Volume Analysis</p> </li> <li>Low volume on third candle suggests weak conviction</li> <li>Declining volume through pattern reduces reliability</li> <li> <p>Always check volume confirms price action</p> </li> <li> <p>Time Frame Mismatch</p> </li> <li>Using pattern on 5-minute chart with daily trend analysis</li> <li>Ensure time frame of pattern matches trading style</li> <li> <p>Higher time frames provide more reliable signals</p> </li> <li> <p>Over-optimization of Penetration Parameter</p> </li> <li>Don't adjust penetration based on historical data mining</li> <li>Stick to default 0.3 or adjust slightly based on asset volatility</li> <li>Over-optimization leads to curve fitting and poor future performance</li> </ol>"},{"location":"indicators/patterns/cdl_eveningdojistar/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Choose optimal parameters based on trading style:</p> <p>Short-term Trading (Day Trading): - Use 5-15 minute charts cautiously - Penetration: 0.4-0.5 (more strict) to reduce false signals - Require additional confirmation (volume, momentum) - Tighter stops due to noise in intraday data</p> <p>Medium-term Trading (Swing Trading): - Use 4-hour to daily charts (recommended) - Penetration: 0.3 (default) works well - Balance between sensitivity and reliability - Hold positions for multiple days to weeks</p> <p>Long-term Trading (Position Trading): - Use daily to weekly charts - Penetration: 0.2-0.3 (slightly looser) to catch all major reversals - Fewer signals but higher reliability - Combine with fundamental analysis</p> <p>Backtesting Guidelines: - Test default parameters first (penetration = 0.3) - Vary penetration from 0.2 to 0.5 in 0.1 increments - Evaluate win rate, profit factor, and drawdown - Choose parameters that work across multiple assets - Avoid parameters that work for only one specific period</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data showing uptrend\nopen  = [40.0, 42.0, 44.0, 46.0, 48.0, 49.5, 50.0, 49.6, 47.5, 46.0, 45.0]\nhigh  = [42.5, 44.5, 46.5, 48.5, 50.0, 50.2, 50.2, 49.8, 47.8, 46.5, 45.5]\nlow   = [40.0, 41.8, 43.8, 45.8, 47.8, 49.3, 49.8, 49.4, 45.5, 44.5, 44.0]\nclose = [42.0, 44.0, 46.0, 48.0, 49.5, 50.0, 49.6, 49.5, 46.0, 44.8, 44.5]\n\n# Calculate pattern with default penetration\npattern = SQA::TAI.cdl_eveningdojistar(open, high, low, close)\n\n# Calculate supporting indicators\nrsi = SQA::TAI.rsi(close, time_period: 14)\nsma_50 = SQA::TAI.sma(close, time_period: 50)\n\n# Analyze most recent signal\ncurrent_signal = pattern.last\nprevious_signals = pattern[-4..-2]\n\nif current_signal == -100\n  puts \"=\" * 50\n  puts \"EVENING DOJI STAR PATTERN DETECTED\"\n  puts \"=\" * 50\n\n  # Pattern details\n  puts \"\\nPattern Structure:\"\n  puts \"  First Candle (Bullish): Open #{open[-3]}, Close #{close[-3]}\"\n  puts \"  Doji Candle: Open #{open[-2]}, Close #{close[-2]}\"\n  puts \"  Third Candle (Bearish): Open #{open[-1]}, Close #{close[-1]}\"\n\n  # Calculate pattern metrics\n  first_body = (close[-3] - open[-3]).abs\n  doji_body = (open[-2] - close[-2]).abs\n  third_body = (open[-1] - close[-1]).abs\n  penetration_pct = (close[-3] - close[-1]) / first_body\n\n  puts \"\\nPattern Metrics:\"\n  puts \"  First candle body: #{first_body.round(2)}\"\n  puts \"  Doji body: #{doji_body.round(2)}\"\n  puts \"  Third candle body: #{third_body.round(2)}\"\n  puts \"  Penetration: #{(penetration_pct * 100).round(1)}%\"\n\n  # Confirmation factors\n  puts \"\\nConfirmation Analysis:\"\n  puts \"  Current RSI: #{rsi.last.round(2)}\"\n  puts \"  RSI Status: #{rsi.last &gt; 70 ? 'OVERBOUGHT \u2713' : 'Not overbought'}\"\n  puts \"  50-day SMA: #{sma_50.last.round(2)}\"\n  puts \"  Price vs SMA: #{close.last &gt; sma_50.last ? 'Above (reversal setup) \u2713' : 'Below'}\"\n\n  # Trend confirmation\n  uptrend_confirmed = close[-6..-4].all? { |c| c &lt; close[-3] }\n  puts \"  Prior uptrend: #{uptrend_confirmed ? 'Confirmed \u2713' : 'Weak'}\"\n\n  # Trading decision\n  puts \"\\nTrading Decision:\"\n\n  if rsi.last &gt; 65 &amp;&amp; close.last &gt; sma_50.last &amp;&amp; uptrend_confirmed\n    # Calculate position parameters\n    entry = close.last\n    stop_loss = high[-2] * 1.02  # 2% above doji high\n    risk_amount = stop_loss - entry\n    target_1 = entry - (risk_amount * 1.5)  # 1.5:1 R/R\n    target_2 = entry - (risk_amount * 3.0)  # 3:1 R/R\n\n    puts \"  STRONG SELL SIGNAL - Multiple confirmations\"\n    puts \"\\nTrade Setup:\"\n    puts \"  Entry Price: $#{entry.round(2)}\"\n    puts \"  Stop Loss: $#{stop_loss.round(2)} (Risk: $#{risk_amount.round(2)})\"\n    puts \"  Target 1 (50% position): $#{target_1.round(2)}\"\n    puts \"  Target 2 (50% position): $#{target_2.round(2)}\"\n    puts \"  Risk/Reward: 1:1.5 and 1:3\"\n\n    # Position sizing example (for $10,000 account, 2% risk)\n    account_size = 10000\n    risk_per_trade = account_size * 0.02\n    position_size = (risk_per_trade / risk_amount).to_i\n\n    puts \"\\nPosition Sizing (2% risk on $#{account_size} account):\"\n    puts \"  Shares to short: #{position_size}\"\n    puts \"  Total position value: $#{(position_size * entry).round(2)}\"\n    puts \"  Maximum risk: $#{risk_per_trade.round(2)}\"\n\n    puts \"\\nFor long holders:\"\n    puts \"  Consider exiting or tightening stops\"\n    puts \"  Pattern suggests trend reversal imminent\"\n\n  elsif rsi.last &gt; 60\n    puts \"  MODERATE SELL SIGNAL - Consider smaller position\"\n    puts \"  Suggestion: Wait for additional confirmation or enter with 50% position\"\n\n  else\n    puts \"  WEAK SIGNAL - Pattern present but confirmations lacking\"\n    puts \"  Suggestion: Monitor for additional confirmation before entry\"\n  end\n\nelsif pattern[-2] == -100\n  puts \"Pattern detected in previous period - Monitor position\"\n  puts \"Current price: #{close.last}\"\n  puts \"Entry was: #{close[-2]}\"\n  puts \"Profit/Loss: #{((close[-2] - close.last) / close[-2] * 100).round(2)}%\"\n\nelse\n  # No pattern - continue monitoring\n  if close.last &gt; close[-1] &amp;&amp; close[-1] &gt; close[-2]\n    puts \"Uptrend continuing - Watch for Evening Doji Star formation\"\n    puts \"Current price: #{close.last}\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_eveningdojistar/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_eveningdojistar/#similar-patterns","title":"Similar Patterns","text":"<ul> <li> <p>Evening Star: Similar three-candle bearish reversal pattern but with a small real body instead of doji on second candle. Evening Doji Star is generally considered slightly more reliable due to the doji showing stronger indecision.</p> </li> <li> <p>Abandoned Baby: More rare and reliable version with gaps on both sides of the doji. Requires complete gap isolation of middle candle, making it stronger but less frequent.</p> </li> <li> <p>Dark Cloud Cover: Two-candle bearish reversal pattern. Simpler than Evening Doji Star but may provide earlier signals with potentially lower reliability.</p> </li> </ul>"},{"location":"indicators/patterns/cdl_eveningdojistar/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li> <p>Bearish Engulfing: Can follow Evening Doji Star to provide additional confirmation of reversal. The combination of both patterns significantly increases probability of successful reversal.</p> </li> <li> <p>Shooting Star: Single candle pattern that can appear as the third candle in Evening Doji Star. Recognizing shooting star characteristics strengthens the overall signal.</p> </li> <li> <p>Morning Doji Star: The bullish counterpart to Evening Doji Star, appearing at bottoms. Understanding both patterns provides complete reversal recognition capability.</p> </li> </ul>"},{"location":"indicators/patterns/cdl_eveningdojistar/#pattern-family","title":"Pattern Family","text":"<p>The Evening Doji Star belongs to the Star Pattern Family:</p> <ul> <li>Evening Star: Uses small real body instead of doji</li> <li>Evening Doji Star: Features doji for stronger indecision signal</li> <li>Morning Star: Bullish reversal at bottoms</li> <li>Morning Doji Star: Bullish reversal with doji</li> </ul> <p>Evolutionary Relationship: The Evening Doji Star is considered an evolution of the Evening Star pattern, with the doji providing a more specific indication of market indecision. Japanese candlestick analysis traditionally views the doji as a more significant reversal indicator than a small real body.</p> <p>When to prefer Evening Doji Star: - When seeking higher probability (though less frequent) reversal signals - In markets where doji patterns have proven historically reliable - When risk management requires high-confidence entry signals</p> <p>When to use Evening Star instead: - For more frequent trading opportunities - In less liquid markets where true dojis rarely form - When backtesting shows Evening Star provides better results for specific asset</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_eveningdojistar/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Enhance pattern reliability using multiple timeframes:</p> <p>Primary Timeframe Strategy: 1. Identify Evening Doji Star on daily chart (primary trading timeframe) 2. Confirm weekly chart shows uptrend and overbought conditions 3. Use 4-hour chart for precise entry timing after pattern completion 4. Monitor 1-hour chart for early exit signals if pattern fails</p> <p>Timeframe Confluence: - Pattern on daily + weekly chart = very high probability signal - Pattern on daily, waiting for 4-hour confirmation = reduced risk entry - Pattern on 4-hour aligned with daily resistance = good swing trade setup</p> <p>Example Multi-Timeframe Approach: <pre><code># Check daily for pattern\ndaily_pattern = SQA::TAI.cdl_eveningdojistar(daily_open, daily_high, daily_low, daily_close)\n\n# Confirm weekly trend\nweekly_sma = SQA::TAI.sma(weekly_close, time_period: 20)\nweekly_uptrend = weekly_close.last &gt; weekly_sma.last\n\n# Entry on 4-hour confirmation\nif daily_pattern.last == -100 &amp;&amp; weekly_uptrend\n  # Monitor 4-hour chart for entry trigger\n  four_hour_pattern = SQA::TAI.cdl_eveningdojistar(h4_open, h4_high, h4_low, h4_close)\n  # Enter when 4-hour also shows pattern or bearish confirmation\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern behavior varies by market condition:</p> <p>Trending Markets (ADX &gt; 25): - Pattern most reliable after strong trends - Higher success rate in established uptrends - Use standard penetration (0.3) and standard confirmation</p> <p>Ranging Markets (ADX &lt; 20): - Pattern less reliable, many false signals - Increase penetration to 0.4-0.5 for stricter detection - Require additional confirmation from oscillators - Consider reducing position size</p> <p>High Volatility (ATR increasing): - Gaps more common, patterns form more frequently - May need wider stops to avoid premature exit - Pattern completion may span more time - Confirm with volume to separate noise from signal</p> <p>Low Volatility (ATR decreasing): - True gaps less likely, doji may be weak - Pattern may signal imminent volatility expansion - Earlier entry can capture larger moves - Tighter stops appropriate</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#statistical-validation","title":"Statistical Validation","text":"<p>Understanding pattern reliability through statistical analysis:</p> <p>Historical Success Rates: - Academic studies show 60-65% success rate in trending markets - Success rate drops to 45-50% in ranging markets - Daily timeframe shows better results than intraday - Confirmation with RSI &gt; 70 increases success to 70-75%</p> <p>Backtesting Considerations: <pre><code># Example backtesting framework\ndef backtest_evening_doji_star(price_data, start_date, end_date)\n  trades = []\n\n  price_data.each_with_index do |data, i|\n    next if i &lt; 3  # Need at least 3 candles\n\n    pattern = SQA::TAI.cdl_eveningdojistar(\n      data[:open], data[:high], data[:low], data[:close]\n    )\n\n    if pattern[i] == -100\n      entry = data[:close][i]\n      stop = data[:high][i-1] * 1.02\n      target = entry - ((stop - entry) * 2)\n\n      # Track trade through subsequent data\n      trades &lt;&lt; {\n        entry: entry,\n        stop: stop,\n        target: target,\n        date: data[:date][i]\n      }\n    end\n  end\n\n  # Analyze results\n  analyze_trades(trades)\nend\n</code></pre></p> <p>Key Metrics to Track: - Win rate (% of profitable trades) - Average win vs average loss - Profit factor (gross profit / gross loss) - Maximum drawdown - Sharpe ratio - Pattern frequency vs opportunity cost</p> <p>Optimization Tips: - Test across multiple assets and market conditions - Avoid over-fitting to specific time periods - Include transaction costs in calculations - Account for slippage, especially on gaps - Consider different penetration parameters systematically</p>"},{"location":"indicators/patterns/cdl_eveningdojistar/#references","title":"References","text":"<ul> <li> <p>\"Japanese Candlestick Charting Techniques\" by Steve Nison: The definitive Western text on candlestick patterns, includes detailed coverage of Evening Doji Star pattern with historical context and trading applications.</p> </li> <li> <p>\"Technical Analysis of the Financial Markets\" by John Murphy: Comprehensive technical analysis reference with section on candlestick patterns and their integration with Western technical analysis.</p> </li> <li> <p>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski: Statistical analysis of candlestick pattern performance, including success rates and failure rates for Evening Doji Star in various market conditions.</p> </li> <li> <p>Original Japanese Candlestick Research: Pattern originated in 18<sup>th</sup> century Japanese rice trading, documented in various historical texts on Sakata's Five Methods.</p> </li> <li> <p>Online Resources:</p> </li> <li>StockCharts.com Candlestick Pattern Reference</li> <li>Investopedia Technical Analysis Guide</li> <li>TradingView Pattern Recognition Tools</li> </ul>"},{"location":"indicators/patterns/cdl_eveningdojistar/#see-also","title":"See Also","text":"<ul> <li>Candlestick Patterns Overview</li> <li>Morning Doji Star - Bullish Counterpart</li> <li>Evening Star - Similar Pattern</li> <li>Doji - Foundation Pattern</li> <li>Pattern Recognition Strategy Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_eveningstar/","title":"CDL_CDL_EVENINGSTAR (Evening Star)","text":""},{"location":"indicators/patterns/cdl_eveningstar/#overview","title":"Overview","text":"<p>The Evening Star is a three-candle bearish reversal pattern that bearish reversal pattern at the top of an uptrend. This pattern is used to identify potential trend changes and provides traders with entry signals when combined with proper confirmation.</p>"},{"location":"indicators/patterns/cdl_eveningstar/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_eveningstar/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Minimum 3 candles required for pattern detection - More historical data provides better context for trend analysis</p>"},{"location":"indicators/patterns/cdl_eveningstar/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_eveningstar/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_eveningstar(open, high, low, close)\n\nputs \"Evening Star signal: #{pattern.last}\"\n# Output: -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_eveningstar/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_eveningstar/#what-it-measures","title":"What It Measures","text":"<p>The Evening Star pattern measures: - Reversal Potential: Shift in market sentiment and momentum - Market Psychology: Change in buyer/seller control - Trend Exhaustion: Signs that current trend is losing strength</p>"},{"location":"indicators/patterns/cdl_eveningstar/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Three-candle bearish reversal</li> <li>Trend Context: Must appear in uptrend</li> <li>Signal: -100</li> <li>Reliability: Moderate to High (with confirmation)</li> <li>Best Timeframes: Daily, 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_eveningstar/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_eveningstar/#entry-signals","title":"Entry Signals","text":"<p>Primary Entry: Short entry when pattern completes</p> <p>Risk Management: - Stop Loss: Above the high of the three-candle pattern - Target: Recent swing low or support level - Risk/Reward: Aim for minimum 1:2 ratio</p>"},{"location":"indicators/patterns/cdl_eveningstar/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Strengthen the signal with: 1. Volume Confirmation: Increased volume on signal candle 2. Trend Confirmation: Clear uptrend established 3. Support/Resistance: Pattern at key price level 4. Next Candle: Following candle confirms direction</p>"},{"location":"indicators/patterns/cdl_eveningstar/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_eveningstar/#optimal-use-cases","title":"Optimal Use Cases","text":"<ul> <li>Market Conditions: After established trend with clear momentum</li> <li>Timeframes: Most reliable on daily charts</li> <li>Asset Classes: Stocks, forex, commodities</li> <li>Volatility: Normal volatility environments</li> </ul>"},{"location":"indicators/patterns/cdl_eveningstar/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<ul> <li>RSI: Confirm overbought/oversold conditions</li> <li>MACD: Verify momentum shift</li> <li>Volume: Validate buying/selling pressure</li> <li>Moving Averages: Confirm trend context</li> </ul>"},{"location":"indicators/patterns/cdl_eveningstar/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend and momentum</li> <li>Volume OBV - Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_eveningstar/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/","title":"CDL_GAPSIDESIDEWHITE (Up/Down-Gap Side-by-Side White Lines)","text":""},{"location":"indicators/patterns/cdl_gapsidesidewhite/#overview","title":"Overview","text":"<p>The Up/Down-Gap Side-by-Side White Lines pattern is a rare three-candle continuation pattern that appears during strong trends. It consists of a gap followed by two consecutive white (bullish) candles with similar bodies, suggesting the current trend will continue despite a brief pause. This pattern signals that buyers or sellers remain in control after a gap, providing confirmation to hold existing positions.</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to identify gap formation and candle body direction</p> <p>high - Array of high prices for each period - Critical for determining candle real body size - Used to verify pattern structure</p> <p>low - Array of low prices for each period - Helps identify gap presence and size - Used to validate pattern formation</p> <p>close - Array of closing prices for each period - Used to determine candle color and body size - Essential for identifying white (bullish) candle formation</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_gapsidesidewhite/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data showing the pattern\nopen =  [50.00, 52.00, 52.50, 52.40]\nhigh =  [50.50, 52.80, 53.00, 52.90]\nlow =   [49.80, 51.90, 52.30, 52.20]\nclose = [50.20, 52.60, 52.80, 52.70]\n\npattern = SQA::TAI.cdl_gapsidesidewhite(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n# 0 = no pattern, +100 = bullish continuation, -100 = bearish continuation\n</code></pre>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Check for pattern occurrence over time\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal == 100\n    puts \"Bullish continuation at index #{idx} - uptrend likely to continue\"\n  elsif signal == -100\n    puts \"Bearish continuation at index #{idx} - downtrend likely to continue\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#combining-with-trend-confirmation","title":"Combining with Trend Confirmation","text":"<pre><code># Use with moving average for trend confirmation\nrequire 'sqa/tai'\n\n# Calculate pattern and trend\npattern = SQA::TAI.cdl_gapsidesidewhite(open, high, low, close)\nma20 = SQA::TAI.sma(close, 20)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\ncurrent_ma = ma20.last\n\nif current_signal == 100 &amp;&amp; current_price &gt; current_ma\n  puts \"Strong bullish continuation signal confirmed by uptrend\"\nelsif current_signal == -100 &amp;&amp; current_price &lt; current_ma\n  puts \"Strong bearish continuation signal confirmed by downtrend\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_gapsidesidewhite/#what-it-measures","title":"What It Measures","text":"<p>The Up/Down-Gap Side-by-Side White Lines pattern measures the strength of trend continuation after a gap. When a gap occurs followed by two consecutive white candles with similar bodies, it suggests: - Strong buying pressure maintaining the trend - Confidence among market participants - Reduced likelihood of reversal despite the gap - Potential for continued movement in the gap direction</p> <p>This pattern is particularly valuable because gaps typically indicate strong momentum, and the formation of two side-by-side white candles after a gap confirms that the momentum is sustained.</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#pattern-structure","title":"Pattern Structure","text":"<p>Upside Gap Side-by-Side White Lines (Bullish Continuation): 1. First candle: A white candle in an uptrend 2. Second candle: A white candle that gaps up from the first candle 3. Third candle: Another white candle with a body similar to the second candle, opening near the second candle's open</p> <p>Downside Gap Side-by-Side White Lines (Bearish Continuation): 1. First candle: A black candle in a downtrend 2. Second candle: A white candle that gaps down from the first candle 3. Third candle: Another white candle with a body similar to the second candle, opening near the second candle's open</p> <p>The key characteristic is that despite the two white candles appearing after a gap, the pattern still suggests continuation of the original trend.</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Returns -100 (bearish continuation), 0 (no pattern), or +100 (bullish continuation)</li> <li>Type: Continuation pattern (three-candle formation)</li> <li>Frequency: Rare pattern</li> <li>Best Used: During strong trending markets with clear directional momentum</li> <li>Reliability: Moderate to high when confirmed with volume and trend indicators</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_gapsidesidewhite/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish continuation pattern detected - uptrend expected to continue</li> <li>0: No pattern present at this position</li> <li>-100: Bearish continuation pattern detected - downtrend expected to continue</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#pattern-recognition","title":"Pattern Recognition","text":"<p>Bullish Continuation Signal (+100): - Appears during an established uptrend - Gap up occurs, followed by two consecutive white candles - Second and third candles have similar body sizes - Suggests buyers remain in control and will push prices higher</p> <p>Bearish Continuation Signal (-100): - Appears during an established downtrend - Gap down occurs, followed by two consecutive white candles - Despite white candles, the gap direction suggests continued downward pressure - Indicates a brief consolidation before resuming the downtrend</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#market-psychology","title":"Market Psychology","text":"<p>The pattern reveals important market psychology: - The gap demonstrates strong initial momentum - The two white candles show buying interest but at a stable level - The similarity of the two white candles suggests equilibrium at the new level - The trend is likely to continue after this brief consolidation</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_gapsidesidewhite/#buy-signals","title":"Buy Signals","text":"<p>For the bullish continuation pattern (+100):</p> <ol> <li>Entry Point: Enter long when the pattern completes (after the third candle closes)</li> <li>Confirmation: Verify the pattern occurs in an established uptrend</li> <li>Volume: Look for sustained or increasing volume during pattern formation</li> </ol> <p>Example Scenario: <pre><code># Detect bullish continuation\nif pattern.last == 100 &amp;&amp; volume.last &gt; volume[-2..-1].sum / 2\n  entry_price = close.last\n  stop_loss = low[-3..-1].min - (0.02 * low[-3..-1].min)\n  target = entry_price + 2 * (entry_price - stop_loss)\n\n  puts \"Buy Signal: Enter at #{entry_price}\"\n  puts \"Stop Loss: #{stop_loss}\"\n  puts \"Target: #{target}\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#sell-signals","title":"Sell Signals","text":"<p>For the bearish continuation pattern (-100):</p> <ol> <li>Entry Point: Consider closing long positions or entering short when pattern completes</li> <li>Confirmation: Verify the pattern occurs in an established downtrend</li> <li>Stop Loss: Place stop above the highest point of the three-candle pattern</li> </ol> <p>Example Scenario: <pre><code># Detect bearish continuation\nif pattern.last == -100 &amp;&amp; close.last &lt; sma_50.last\n  entry_price = close.last\n  stop_loss = high[-3..-1].max + (0.02 * high[-3..-1].max)\n  target = entry_price - 2 * (stop_loss - entry_price)\n\n  puts \"Sell Signal: Enter short at #{entry_price}\"\n  puts \"Stop Loss: #{stop_loss}\"\n  puts \"Target: #{target}\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#position-management","title":"Position Management","text":"<p>Holding Existing Positions: - If already long and +100 appears: Hold position, trend continuation expected - If already short and -100 appears: Hold position, downtrend continuation expected - Pattern serves as confirmation to maintain current positions</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_gapsidesidewhite/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best in: - Strong trending markets: Clear directional movement required - Medium to high volatility: Gaps are more meaningful - Liquid markets: Better price discovery and gap reliability - Continuation phase: After initial trend establishment, not at trend start - Time frames: Works across timeframes but most reliable on daily and 4-hour charts</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm trend direction; pattern should align with MA slope - ADX: Verify trend strength; ADX above 25 confirms strong trend - MACD: Look for continued separation of MACD lines in trend direction</p> <p>With Volume Indicators: - Volume Analysis: Increasing volume strengthens continuation signal - On-Balance Volume (OBV): Should confirm trend direction - Volume Profile: Look for acceptance at new price levels after gap</p> <p>With Support/Resistance: - Verify pattern doesn't occur near major resistance (bullish) or support (bearish) - Pattern is more reliable when room exists for continued trend movement</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Ignoring Trend Context: Pattern requires an established trend; avoid using in ranging markets</li> <li>Misidentifying White Candles: Ensure both second and third candles are genuinely white (close &gt; open)</li> <li>Overlooking Gap Size: Small gaps may not provide sufficient continuation momentum</li> <li>False Gaps: In 24-hour markets, weekend gaps may be less reliable</li> <li>Over-trading: Pattern is rare; don't force pattern recognition in unclear formations</li> </ol>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Bullish Pattern: Below the low of the three-candle formation - Bearish Pattern: Above the high of the three-candle formation - Buffer: Add 1-2% buffer for volatility</p> <p>Position Sizing: - Use smaller position sizes due to moderate pattern reliability - Consider scaling in after initial confirmation - Never risk more than 2% of capital on a single trade</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical data showing strong uptrend\nopen =  [45.00, 46.00, 47.50, 49.00, 51.00, 51.50, 51.40]\nhigh =  [46.20, 47.80, 49.30, 50.80, 52.00, 52.10, 51.90]\nlow =   [44.80, 45.90, 47.30, 48.80, 50.80, 51.20, 51.10]\nclose = [46.00, 47.50, 49.00, 50.50, 51.80, 51.70, 51.60]\n\n# Calculate pattern\npattern = SQA::TAI.cdl_gapsidesidewhite(open, high, low, close)\n\n# Calculate supporting indicators\nsma_20 = SQA::TAI.sma(close, 5)  # Using 5 for short data\nadx = SQA::TAI.adx(high, low, close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\ntrend_confirmed = current_price &gt; sma_20.last\n\nif current_signal == 100 &amp;&amp; trend_confirmed\n  puts \"=\" * 50\n  puts \"BULLISH CONTINUATION PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Current Price: $#{current_price}\"\n  puts \"Pattern Signal: #{current_signal}\"\n  puts \"Above 20 SMA: #{trend_confirmed}\"\n  puts \"\"\n\n  # Calculate trade parameters\n  pattern_low = low[-3..-1].min\n  stop_loss = pattern_low * 0.98\n  risk = current_price - stop_loss\n  target = current_price + (2 * risk)\n\n  puts \"TRADE SETUP:\"\n  puts \"Entry: $#{current_price.round(2)}\"\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"Risk/Reward: 1:2\"\n  puts \"Risk Amount: $#{risk.round(2)} per share\"\n\nelsif current_signal == -100\n  puts \"Bearish continuation detected - consider exiting longs\"\nelse\n  puts \"No pattern detected at current position\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_gapsidesidewhite/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Three White Soldiers: Strong bullish continuation with three consecutive white candles</li> <li>Rising Three Methods: Continuation pattern with consolidation candles</li> <li>Separating Lines: Another gap-based continuation pattern</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Doji: Helps identify when continuation may pause</li> <li>Engulfing: Can signal reversal if continuation fails</li> <li>Dark Cloud Cover: Potential reversal signal to watch for</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#indicator-combinations","title":"Indicator Combinations","text":"<ul> <li>ADX: Confirms trend strength</li> <li>Volume Indicators: Validates continuation momentum</li> <li>Moving Averages: Confirms overall trend direction</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_gapsidesidewhite/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe (e.g., daily) 2. Confirm trend direction on higher timeframe (e.g., weekly) 3. Use lower timeframe (e.g., 4-hour) for precise entry timing 4. All timeframes should show aligned trend direction</p>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#pattern-variations","title":"Pattern Variations","text":"<ul> <li>Large Gap: Gaps larger than 2% are more significant</li> <li>Equal Bodies: More symmetrical second and third candles increase reliability</li> <li>Volume Pattern: Decreasing volume on the two white candles can indicate consolidation before continuation</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#market-context-considerations","title":"Market Context Considerations","text":"<ul> <li>Gap Fill Risk: Monitor for gap-filling behavior which would invalidate the pattern</li> <li>News Events: Verify gap isn't solely due to temporary news</li> <li>Market Hours: In 24-hour markets, verify gap represents genuine demand shift</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> <li>Technical Analysis of Financial Markets by John J. Murphy</li> </ul>"},{"location":"indicators/patterns/cdl_gapsidesidewhite/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Continuation Patterns Guide</li> <li>Gap Trading Strategies</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_gravestonedoji/","title":"CDL_CDL_GRAVESTONEDOJI (Gravestone Doji)","text":""},{"location":"indicators/patterns/cdl_gravestonedoji/#overview","title":"Overview","text":"<p>The Gravestone Doji is a single-candle bearish reversal pattern that bearish doji with long upper shadow and open/close at the low. This pattern is used to identify potential trend changes and provides traders with entry signals when combined with proper confirmation.</p>"},{"location":"indicators/patterns/cdl_gravestonedoji/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_gravestonedoji/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Minimum 1 candle required for pattern detection - More historical data provides better context for trend analysis</p>"},{"location":"indicators/patterns/cdl_gravestonedoji/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_gravestonedoji/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_gravestonedoji(open, high, low, close)\n\nputs \"Gravestone Doji signal: #{pattern.last}\"\n# Output: -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_gravestonedoji/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_gravestonedoji/#what-it-measures","title":"What It Measures","text":"<p>The Gravestone Doji pattern measures: - Reversal Potential: Shift in market sentiment and momentum - Market Psychology: Bulls attempted rally but completely failed, bears took full control - Trend Exhaustion: Signs that current trend is losing strength</p>"},{"location":"indicators/patterns/cdl_gravestonedoji/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Single-candle bearish reversal</li> <li>Trend Context: Must appear in uptrend</li> <li>Signal: -100</li> <li>Reliability: Moderate to High (with confirmation)</li> <li>Best Timeframes: Daily, 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_gravestonedoji/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_gravestonedoji/#entry-signals","title":"Entry Signals","text":"<p>Primary Entry: Short when next candle confirms with lower close</p> <p>Risk Management: - Stop Loss: Above the high of the gravestone doji - Target: Support level or Fibonacci retracement - Risk/Reward: Aim for minimum 1:2 ratio</p>"},{"location":"indicators/patterns/cdl_gravestonedoji/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Strengthen the signal with: 1. Volume Confirmation: Increased volume on signal candle 2. Trend Confirmation: Clear uptrend established 3. Support/Resistance: Pattern at key price level 4. Next Candle: Following candle confirms direction</p>"},{"location":"indicators/patterns/cdl_gravestonedoji/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_gravestonedoji/#optimal-use-cases","title":"Optimal Use Cases","text":"<ul> <li>Market Conditions: After established trend with clear momentum</li> <li>Timeframes: Most reliable on daily charts</li> <li>Asset Classes: Stocks, forex, commodities</li> <li>Volatility: Normal volatility environments</li> </ul>"},{"location":"indicators/patterns/cdl_gravestonedoji/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<ul> <li>RSI: Confirm overbought/oversold conditions</li> <li>MACD: Verify momentum shift</li> <li>Volume: Validate buying/selling pressure</li> <li>Moving Averages: Confirm trend context</li> </ul>"},{"location":"indicators/patterns/cdl_gravestonedoji/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend and momentum</li> <li>Volume OBV - Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_gravestonedoji/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_hammer/","title":"Hammer Pattern","text":"<p>The Hammer is a bullish reversal candlestick pattern that forms during a downtrend. It has a small body near the high with a long lower shadow, resembling a hammer.</p>"},{"location":"indicators/patterns/cdl_hammer/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 99.0, 98.0, 96.0, 94.0]\nhigh  = [100.5, 99.5, 98.5, 96.5, 95.0]\nlow   = [98.0, 97.0, 95.0, 92.0, 90.0]\nclose = [99.0, 98.0, 96.0, 94.5, 94.5]\n\n# Detect Hammer patterns\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\n\nif hammer.last == 100\n  puts \"Hammer detected - Bullish reversal signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>open</code> Array Yes Array of opening prices <code>high</code> Array Yes Array of high prices <code>low</code> Array Yes Array of low prices <code>close</code> Array Yes Array of closing prices"},{"location":"indicators/patterns/cdl_hammer/#returns","title":"Returns","text":"<p>Returns an array of integers: - 0: No Hammer pattern - 100: Bullish Hammer detected</p>"},{"location":"indicators/patterns/cdl_hammer/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Small body: At upper end of trading range</li> <li>Long lower shadow: At least 2\u00d7 body length</li> <li>Little/no upper shadow: Close near high</li> <li>Forms in downtrend: Reversal signal</li> </ul>"},{"location":"indicators/patterns/cdl_hammer/#visual-pattern","title":"Visual Pattern","text":"<pre><code>  -----  (small body near top)\n    |\n    |\n    |\n    |\n    |    (long lower shadow)\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#interpretation","title":"Interpretation","text":"<ul> <li>After downtrend: Bullish reversal signal</li> <li>Shows rejection of lower prices</li> <li>Buyers stepping in at lower levels</li> <li>Potential bottom formation</li> <li>Best with confirmation candle</li> </ul>"},{"location":"indicators/patterns/cdl_hammer/#related-patterns","title":"Related Patterns","text":"<ul> <li>Inverted Hammer: Long upper shadow (also bullish)</li> <li>Hanging Man: Same shape but in uptrend (bearish)</li> <li>Dragonfly Doji: Open/close at high (similar sentiment)</li> </ul>"},{"location":"indicators/patterns/cdl_hammer/#example-hammer-in-downtrend","title":"Example: Hammer in Downtrend","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, period: 20)\n\nif hammer.last == 100\n  # Verify downtrend context\n  in_downtrend = close[-2] &lt; sma_20[-2] &amp;&amp; close[-2] &lt; close[-10]\n\n  if in_downtrend\n    puts \"Hammer in downtrend - Strong reversal signal!\"\n    puts \"Current: #{close.last.round(2)}\"\n    puts \"Wait for bullish confirmation candle\"\n  else\n    puts \"Hammer detected but not in downtrend\"\n    puts \"Less reliable - exercise caution\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#example-hammer-with-confirmation","title":"Example: Hammer with Confirmation","text":"<pre><code>open, high, low, close = load_ohlc_data('TSLA')\n\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\n\n# Check previous bar for hammer\nif hammer[-2] == 100\n  hammer_close = close[-2]\n  confirm_close = close[-1]\n\n  # Confirmation: next candle closes above hammer body\n  if confirm_close &gt; hammer_close\n    puts \"Hammer CONFIRMED by bullish candle!\"\n    puts \"Hammer close: #{hammer_close.round(2)}\"\n    puts \"Confirmation close: #{confirm_close.round(2)}\"\n    puts \"High probability long entry\"\n\n    # Calculate entry, stop, target\n    entry = confirm_close\n    stop = low[-2] - (low[-2] * 0.005)  # Below hammer low\n    risk = entry - stop\n    target = entry + (risk * 2)  # 2:1 reward\n\n    puts \"\\nTrade Setup:\"\n    puts \"Entry: #{entry.round(2)}\"\n    puts \"Stop: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n    puts \"Risk:Reward = 1:2\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#example-hammer-at-support","title":"Example: Hammer at Support","text":"<pre><code>open, high, low, close = load_ohlc_data('MSFT')\n\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\n\n# Find support level (recent low)\nsupport = close[-60..-1].min\n\nif hammer.last == 100\n  # Check if hammer formed at support\n  distance_from_support = ((close.last - support) / support * 100).abs\n\n  if distance_from_support &lt; 2  # Within 2% of support\n    puts \"Hammer at support level!\"\n    puts \"Current: #{close.last.round(2)}\"\n    puts \"Support: #{support.round(2)}\"\n    puts \"High probability reversal zone\"\n    puts \"Buyers defending support + hammer = strong signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#example-hammer-with-volume","title":"Example: Hammer with Volume","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('NVDA')\n\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\n\nif hammer.last == 100\n  avg_volume = volume[-20..-1].sum / 20.0\n\n  if volume.last &gt; avg_volume * 1.5\n    puts \"Hammer with HIGH VOLUME!\"\n    puts \"Volume: #{volume.last.round(0)} (avg: #{avg_volume.round(0)})\"\n    puts \"Strong buying pressure at lows\"\n    puts \"Very bullish signal\"\n  elsif volume.last &lt; avg_volume * 0.7\n    puts \"Hammer with low volume\"\n    puts \"Weaker signal - less conviction\"\n    puts \"Wait for volume confirmation\"\n  else\n    puts \"Hammer with normal volume\"\n    puts \"Standard setup - wait for confirmation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#example-hammer-with-rsi","title":"Example: Hammer with RSI","text":"<pre><code>open, high, low, close = load_ohlc_data('GOOGL')\n\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif hammer.last == 100\n  current_rsi = rsi.last\n\n  if current_rsi &lt; 30\n    puts \"Hammer in OVERSOLD territory!\"\n    puts \"RSI: #{current_rsi.round(2)}\"\n    puts \"Multiple bullish signals converging\"\n    puts \"High probability reversal\"\n  elsif current_rsi &lt; 40\n    puts \"Hammer with RSI below 40\"\n    puts \"RSI: #{current_rsi.round(2)}\"\n    puts \"Good reversal setup\"\n  else\n    puts \"Hammer but RSI at #{current_rsi.round(2)}\"\n    puts \"Not oversold - lower probability\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#trading-the-hammer","title":"Trading the Hammer","text":""},{"location":"indicators/patterns/cdl_hammer/#conservative-entry-recommended","title":"Conservative Entry (Recommended)","text":"<pre><code># Wait for confirmation candle\nif hammer[-2] == 100 &amp;&amp; close[-1] &gt; close[-2]\n  entry = close[-1]\n  stop = low[-2]\n  puts \"Enter long at #{entry} with stop at #{stop}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#aggressive-entry","title":"Aggressive Entry","text":"<pre><code># Enter on hammer close\nif hammer.last == 100\n  entry = close.last\n  stop = low.last\n  puts \"Enter long at #{entry} with stop at #{stop}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#stop-loss-placement","title":"Stop Loss Placement","text":"<pre><code># Stop below hammer's low\nif hammer[-2] == 100\n  stop_loss = low[-2] - (low[-2] * 0.005)  # 0.5% buffer\n  puts \"Stop loss: #{stop_loss.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#target-setting","title":"Target Setting","text":"<pre><code># Use 2:1 or 3:1 reward:risk\nif hammer[-2] == 100\n  entry = close[-1]\n  stop = low[-2]\n  risk = entry - stop\n\n  target_2to1 = entry + (risk * 2)\n  target_3to1 = entry + (risk * 3)\n\n  puts \"Target (2:1): #{target_2to1.round(2)}\"\n  puts \"Target (3:1): #{target_3to1.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#example-complete-hammer-trading-system","title":"Example: Complete Hammer Trading System","text":"<pre><code>open, high, low, close, volume = load_ohlc_volume_data('AAPL')\n\nhammer = SQA::TAI.cdl_hammer(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\n# Check previous bar\nif hammer[-2] == 100\n  # Context checks\n  in_downtrend = close[-2] &lt; sma_50[-2]\n  oversold = rsi[-2] &lt; 40\n  confirmation = close[-1] &gt; close[-2]\n\n  avg_volume = volume[-20..-2].sum / 19.0\n  high_volume = volume[-2] &gt; avg_volume * 1.3\n\n  # Support check\n  recent_low = close[-60..-2].min\n  at_support = (close[-2] - recent_low).abs &lt; recent_low * 0.02\n\n  # Calculate score\n  score = 0\n  score += 1 if in_downtrend\n  score += 1 if oversold\n  score += 1 if confirmation\n  score += 1 if high_volume\n  score += 1 if at_support\n\n  puts \"Hammer Pattern Analysis:\"\n  puts \"Downtrend: #{in_downtrend ? 'Yes' : 'No'}\"\n  puts \"Oversold RSI: #{oversold ? 'Yes' : 'No'} (#{rsi[-2].round(2)})\"\n  puts \"Confirmation: #{confirmation ? 'Yes' : 'No'}\"\n  puts \"High Volume: #{high_volume ? 'Yes' : 'No'}\"\n  puts \"At Support: #{at_support ? 'Yes' : 'No'}\"\n  puts \"\\nSetup Score: #{score}/5\"\n\n  if score &gt;= 4 &amp;&amp; confirmation\n    entry = close[-1]\n    stop = low[-2]\n    risk = entry - stop\n    target = entry + (risk * 2.5)\n\n    puts \"\\n*** HIGH PROBABILITY LONG SETUP ***\"\n    puts \"Entry: #{entry.round(2)}\"\n    puts \"Stop: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n    puts \"Risk: #{risk.round(2)} (#{((risk/entry)*100).round(2)}%)\"\n    puts \"Reward: #{(target-entry).round(2)} (#{(((target-entry)/entry)*100).round(2)}%)\"\n    puts \"R:R = 1:2.5\"\n  elsif score &gt;= 3\n    puts \"\\nDECENT SETUP - Monitor closely\"\n  else\n    puts \"\\nLOW PROBABILITY - Skip this trade\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hammer/#hammer-quality-factors","title":"Hammer Quality Factors","text":"Factor Good Better Best Shadow Length 2\u00d7 body 3\u00d7 body 4\u00d7+ body Trend Context Down Strong down Capitulation RSI &lt; 50 &lt; 40 &lt; 30 Volume Average 1.3\u00d7 avg 2\u00d7+ avg Support None Near At major level"},{"location":"indicators/patterns/cdl_hammer/#common-mistakes","title":"Common Mistakes","text":"<ol> <li>Trading without confirmation: Wait for next candle</li> <li>Ignoring trend context: Need downtrend for reliability</li> <li>No volume confirmation: High volume adds conviction</li> <li>Wrong timeframe: Works better on daily+ charts</li> <li>Ignoring support levels: Strongest at support zones</li> </ol>"},{"location":"indicators/patterns/cdl_hammer/#reliability","title":"Reliability","text":"<ul> <li>High: After downtrend, at support, with volume, confirmed</li> <li>Medium: In downtrend with confirmation</li> <li>Low: Without downtrend context or confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_hammer/#see-also","title":"See Also","text":"<ul> <li>Shooting Star - Bearish opposite</li> <li>Pattern Recognition Overview</li> <li>Back to Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/patterns/cdl_hangingman/","title":"CDL_HANGINGMAN (Hanging Man Candlestick Pattern)","text":""},{"location":"indicators/patterns/cdl_hangingman/#overview","title":"Overview","text":"<p>The Hanging Man is a bearish reversal candlestick pattern that forms during an uptrend. Visually identical to the bullish Hammer pattern, the Hanging Man has a small body at the upper end of the trading range with a long lower shadow. Despite buyers initially pushing prices lower, they managed to recover by the close, but this recovery attempt signals exhaustion and potential weakness in the uptrend rather than strength.</p>"},{"location":"indicators/patterns/cdl_hangingman/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_hangingman/#parameter-details","title":"Parameter Details","text":"<p>open, high, low, close (OHLC Data) - All four price arrays must be of equal length - Each index represents the same time period across all arrays - Prices should be in chronological order (oldest to newest) - Minimum of 1 period required, but historical context improves pattern reliability - The pattern detection analyzes price relationships to identify Hanging Man formations</p>"},{"location":"indicators/patterns/cdl_hangingman/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_hangingman/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen  = [100.0, 102.0, 104.0, 106.0, 108.0]\nhigh  = [101.0, 103.0, 105.0, 107.0, 108.5]\nlow   = [99.0, 101.5, 103.5, 104.0, 106.0]\nclose = [100.5, 102.5, 104.5, 106.5, 108.0]\n\n# Detect Hanging Man patterns\nhanging_man = SQA::TAI.cdl_hangingman(open, high, low, close)\n\nif hanging_man.last == -100\n  puts \"Hanging Man detected - Bearish reversal signal!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hangingman/#with-trend-analysis","title":"With Trend Analysis","text":"<pre><code>open, high, low, close = load_ohlc_data('AAPL')\n\nhanging_man = SQA::TAI.cdl_hangingman(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif hanging_man.last == -100\n  # Verify uptrend context\n  in_uptrend = close[-2] &gt; sma_50[-2] &amp;&amp; close[-2] &gt; close[-10]\n\n  if in_uptrend\n    puts \"Hanging Man in uptrend - Strong reversal signal!\"\n    puts \"Current: #{close.last.round(2)}\"\n    puts \"Wait for bearish confirmation candle\"\n  else\n    puts \"Hanging Man detected but not in uptrend\"\n    puts \"Less reliable - exercise caution\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hangingman/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_hangingman/#what-it-measures","title":"What It Measures","text":"<p>The Hanging Man measures potential exhaustion in an uptrend. Despite its bullish appearance (recovery from lows), the pattern suggests that:</p> <ol> <li>Sellers Are Testing: Bears attempted to push prices significantly lower</li> <li>Weak Recovery: Bulls could only manage to close near the open, not near the highs</li> <li>Buyer Exhaustion: The inability to sustain higher prices indicates weakening demand</li> <li>Momentum Shift: The balance of power may be shifting from buyers to sellers</li> </ol> <p>The key insight: In a healthy uptrend, any selling pressure should be quickly absorbed. When sellers can drive prices sharply lower (even temporarily), it reveals underlying weakness.</p>"},{"location":"indicators/patterns/cdl_hangingman/#pattern-recognition-criteria","title":"Pattern Recognition Criteria","text":"<p>For a valid Hanging Man pattern:</p> <ol> <li>Location: Must appear in an established uptrend (critical difference from Hammer)</li> <li>Small Body: Real body at the upper end of the trading range</li> <li>Long Lower Shadow: At least 2-3\u00d7 the height of the body</li> <li>Little/No Upper Shadow: Close should be near the high</li> <li>Body Color: Can be bullish or bearish, though bearish is more significant</li> </ol> <p>Visual Pattern: <pre><code>After uptrend:\n\n  -----  (small body at top)\n    |\n    |\n    |    (long lower shadow - 2-3\u00d7 body)\n    |\n    |\n</code></pre></p>"},{"location":"indicators/patterns/cdl_hangingman/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0 (no pattern) or -100 (bearish Hanging Man detected)</li> <li>Type: Single-candle bearish reversal pattern</li> <li>Lag: Real-time pattern recognition (no calculation lag)</li> <li>Best Used: In established uptrends, at resistance levels, after strong rallies</li> <li>Reliability: Medium to high with proper confirmation and context</li> </ul>"},{"location":"indicators/patterns/cdl_hangingman/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_hangingman/#value-ranges","title":"Value Ranges","text":"<ul> <li>0: No Hanging Man pattern detected</li> <li>-100: Hanging Man pattern detected - potential bearish reversal signal</li> </ul>"},{"location":"indicators/patterns/cdl_hangingman/#market-psychology","title":"Market Psychology","text":"<p>The Hanging Man tells a story of failed bullishness:</p> <p>During the Session: 1. Opening: Price opens near recent highs 2. Mid-Session Selloff: Strong selling pressure drives prices sharply lower 3. Recovery Attempt: Bulls fight back, pushing prices higher 4. Weak Close: Despite recovery, close is only near the open, not at new highs</p> <p>What It Means: - Buyers losing control - couldn't maintain upward momentum - Sellers showing strength - able to drive significant intraday decline - Market indecision - equilibrium between bulls and bears - Potential top formation - uptrend may be exhausting</p>"},{"location":"indicators/patterns/cdl_hangingman/#signal-interpretation","title":"Signal Interpretation","text":"<p>Context Is Critical:</p> <p>The identical pattern has opposite meanings in different contexts: - In Uptrend = Hanging Man (bearish) - In Downtrend = Hammer (bullish)</p> <p>After Strong Uptrend: - Hanging Man suggests rally exhaustion - Buyers unable to push to new highs - Sellers testing lower prices successfully - Increased probability of reversal</p> <p>At Resistance: - Pattern significance amplified - Bulls failed to break through resistance - Sellers defending key level - High-probability reversal zone</p>"},{"location":"indicators/patterns/cdl_hangingman/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_hangingman/#sell-signals","title":"Sell Signals","text":"<p>The Hanging Man generates sell signals when:</p> <ol> <li>Classic Setup</li> <li>Appears after 3+ days of rising prices</li> <li>Long lower shadow (2-3\u00d7 body size)</li> <li>Close near the high but not at new highs</li> <li> <p>Confirmed by next day's bearish candle</p> </li> <li> <p>High-Probability Setup</p> </li> <li>At resistance level</li> <li>RSI &gt; 60 (overbought territory)</li> <li>High volume on the Hanging Man day</li> <li>Bearish confirmation closes below Hanging Man body</li> </ol> <p>Example Scenario: <pre><code>if hanging_man[-2] == -100  # Previous candle was Hanging Man\n  # Wait for bearish confirmation\n  if close[-1] &lt; close[-2]  # Confirmation candle closed lower\n    puts \"Hanging Man confirmed by bearish follow-through\"\n\n    entry = close[-1]\n    stop = high[-2]\n    risk = stop - entry\n    target = entry - (risk * 2)\n\n    puts \"SHORT Entry: #{entry.round(2)}\"\n    puts \"Stop Loss: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n    puts \"Risk:Reward = 1:2\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_hangingman/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Never trade a Hanging Man without confirmation:</p> <ol> <li>Trend Context: Must be in uptrend</li> <li>Confirmation Candle: Next candle should close lower (preferably below Hanging Man body)</li> <li>Volume: Higher volume increases reliability</li> <li>Technical Level: Appearance at resistance adds significance</li> <li>Momentum: Overbought RSI or bearish MACD divergence</li> </ol> <p>Conservative Confirmation: <pre><code>if hanging_man[-2] == -100\n  confirmation_close = close[-1]\n  hanging_man_body = [open[-2], close[-2]].min\n\n  # Strong confirmation = close below entire Hanging Man body\n  if confirmation_close &lt; hanging_man_body\n    puts \"STRONG confirmation - High probability short\"\n  elsif confirmation_close &lt; close[-2]\n    puts \"Weak confirmation - Use caution\"\n  else\n    puts \"No confirmation - Pattern failed\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_hangingman/#false-signal-recognition","title":"False Signal Recognition","text":"<p>Avoid these false signals:</p> <p>Pattern Failure Indicators: - Next candle closes higher (bullish continuation) - Appears mid-trend without resistance - Very low volume on pattern day - Short lower shadow (&lt; 2\u00d7 body) - Not in uptrend context</p>"},{"location":"indicators/patterns/cdl_hangingman/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_hangingman/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>The Hanging Man works best when:</p> <p>Market Conditions: - After extended uptrend (5+ days) - At clearly defined resistance levels - Following parabolic price moves - When momentum indicators show divergence</p> <p>Time Frames: - Daily charts: Most reliable - Weekly charts: Very significant (rare but powerful) - 4-hour charts: Good for swing trading - Intraday (&lt; 1 hour): Higher false signal rate</p> <p>Asset Classes: - Stocks: Excellent, especially at previous highs - Indices: Reliable for market tops - Commodities: Effective after strong rallies - Crypto: Works but needs larger confirmation due to volatility</p>"},{"location":"indicators/patterns/cdl_hangingman/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Resistance Levels: <pre><code>hanging_man = SQA::TAI.cdl_hangingman(open, high, low, close)\n\n# Find recent resistance\nresistance = high[-60..-2].max\n\nif hanging_man.last == -100\n  distance = ((close.last - resistance) / resistance * 100).abs\n\n  if distance &lt; 2  # Within 2% of resistance\n    puts \"Hanging Man AT RESISTANCE!\"\n    puts \"High probability reversal zone\"\n  end\nend\n</code></pre></p> <p>With RSI: <pre><code>hanging_man = SQA::TAI.cdl_hangingman(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif hanging_man.last == -100\n  if rsi.last &gt; 70\n    puts \"Hanging Man + Overbought RSI - STRONG SELL\"\n  elsif rsi.last &gt; 60\n    puts \"Hanging Man + High RSI - Good setup\"\n  else\n    puts \"Hanging Man without overbought - Lower probability\"\n  end\nend\n</code></pre></p> <p>With Volume: <pre><code>hanging_man = SQA::TAI.cdl_hangingman(open, high, low, close)\nvolume_avg = volume[-20..-1].sum / 20.0\n\nif hanging_man.last == -100\n  if volume.last &gt; volume_avg * 1.5\n    puts \"Hanging Man with HIGH VOLUME - Significant\"\n  else\n    puts \"Hanging Man with normal/low volume - Less reliable\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_hangingman/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Trading Without Uptrend</li> <li>Pattern only valid after uptrend</li> <li>In downtrend, it's a bullish Hammer</li> <li> <p>Context determines meaning</p> </li> <li> <p>No Confirmation Wait</p> </li> <li>Immediate entry = high whipsaw risk</li> <li>Always wait for bearish confirmation</li> <li> <p>Confirmation dramatically improves success rate</p> </li> <li> <p>Ignoring Shadow Length</p> </li> <li>Short shadow = weak pattern</li> <li>Long shadow (3\u00d7+ body) = stronger signal</li> <li> <p>Shadow length indicates selling pressure magnitude</p> </li> <li> <p>Wrong Stop Placement</p> </li> <li>Stop too tight = premature exit</li> <li>Stop should be above Hanging Man high</li> <li>Allow for normal volatility</li> </ol>"},{"location":"indicators/patterns/cdl_hangingman/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Day Trading (15min - 1hr): - Higher false signal rate - Require immediate confirmation - Tight stops (1-2% above high) - Multiple timeframe confirmation</p> <p>Swing Trading (Daily charts): - Best reliability - Wait for daily confirmation candle - Stops 2-3% above Hanging Man high - Optimal risk:reward ratios</p> <p>Position Trading (Weekly charts): - Very rare but highly significant - Wait for weekly confirmation - Wider stops acceptable (5-7%) - Major trend reversals</p>"},{"location":"indicators/patterns/cdl_hangingman/#practical-example","title":"Practical Example","text":"<p>Complete Hanging Man trading system:</p> <pre><code>require 'sqa/tai'\n\n# Load data\nopen, high, low, close, volume = load_ohlc_volume_data('TSLA')\n\n# Calculate indicators\nhanging_man = SQA::TAI.cdl_hangingman(open, high, low, close)\nrsi = SQA::TAI.rsi(close, period: 14)\nsma_50 = SQA::TAI.sma(close, period: 50)\nvolume_sma = SQA::TAI.sma(volume, period: 20)\n\n# Check previous candle for Hanging Man\nif hanging_man[-2] == -100\n  puts \"Hanging Man Pattern Analysis\"\n  puts \"=\" * 50\n\n  # Trend context\n  in_uptrend = close[-3] &gt; sma_50[-3] &amp;&amp; close[-3] &gt; close[-8]\n  puts \"In Uptrend: #{in_uptrend ? 'Yes' : 'No'}\"\n\n  # RSI check\n  rsi_val = rsi[-2]\n  overbought = rsi_val &gt; 60\n  puts \"RSI: #{rsi_val.round(2)} (Overbought: #{overbought})\"\n\n  # Volume check\n  vol_ratio = volume[-2] / volume_sma[-2]\n  high_volume = vol_ratio &gt; 1.3\n  puts \"Volume: #{vol_ratio.round(2)}x avg (High: #{high_volume})\"\n\n  # Shadow length check\n  body = (close[-2] - open[-2]).abs\n  lower_shadow = [open[-2], close[-2]].min - low[-2]\n  shadow_ratio = lower_shadow / body\n  strong_shadow = shadow_ratio &gt;= 2.5\n  puts \"Lower Shadow: #{shadow_ratio.round(1)}x body (Strong: #{strong_shadow})\"\n\n  # Resistance check\n  resistance = high[-60..-2].max\n  at_resistance = (high[-2] - resistance).abs &lt; resistance * 0.03\n  puts \"At Resistance: #{at_resistance ? 'Yes' : 'No'}\"\n\n  # Confirmation check\n  confirmation = close[-1] &lt; close[-2]\n  strong_confirmation = close[-1] &lt; [open[-2], close[-2]].min\n\n  if confirmation\n    puts \"\\nConfirmation: #{strong_confirmation ? 'STRONG' : 'Weak'}\"\n  else\n    puts \"\\nNo Confirmation - Pattern Failed\"\n  end\n\n  # Scoring system\n  score = 0\n  score += 1 if in_uptrend\n  score += 1 if overbought\n  score += 1 if high_volume\n  score += 1 if strong_shadow\n  score += 1 if at_resistance\n  score += 1 if strong_confirmation\n\n  puts \"\\nSetup Score: #{score}/6\"\n\n  # Trade decision\n  if score &gt;= 5 &amp;&amp; confirmation\n    entry = close[-1]\n    stop = high[-2] + (high[-2] * 0.005)\n    risk = stop - entry\n    target = entry - (risk * 2.5)\n\n    puts \"\\n*** HIGH PROBABILITY SHORT SETUP ***\"\n    puts \"Entry: $#{entry.round(2)}\"\n    puts \"Stop Loss: $#{stop.round(2)}\"\n    puts \"Target: $#{target.round(2)}\"\n    puts \"Risk: $#{risk.round(2)} (#{((risk/entry)*100).round(2)}%)\"\n    puts \"Reward: $#{(entry-target).round(2)} (#{(((entry-target)/entry)*100).round(2)}%)\"\n    puts \"R:R = 1:2.5\"\n\n  elsif score &gt;= 4\n    puts \"\\nDECENT SETUP - Consider reduced position size\"\n  elsif score &gt;= 3\n    puts \"\\nMARGINAL SETUP - High risk\"\n  else\n    puts \"\\nLOW PROBABILITY - Skip this trade\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hangingman/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_hangingman/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Hammer: Identical shape but appears in downtrend (bullish)</li> <li>Shooting Star: Bearish reversal with long upper shadow</li> <li>Inverted Hammer: Bullish reversal with long upper shadow</li> </ul>"},{"location":"indicators/patterns/cdl_hangingman/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Evening Star: Three-candle bearish reversal pattern</li> <li>Bearish Engulfing: Strong two-candle bearish reversal</li> <li>Dark Cloud Cover: Two-candle bearish reversal at tops</li> </ul>"},{"location":"indicators/patterns/cdl_hangingman/#pattern-family","title":"Pattern Family","text":"<p>The Hanging Man belongs to the hammer family: - Hammer: Bullish (in downtrend) - Hanging Man: Bearish (in uptrend) - Inverted Hammer: Bullish (in downtrend) - Shooting Star: Bearish (in uptrend)</p>"},{"location":"indicators/patterns/cdl_hangingman/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_hangingman/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<pre><code># Daily Hanging Man\ndaily_hm = SQA::TAI.cdl_hangingman(daily_open, daily_high, daily_low, daily_close)\n\n# Weekly trend context\nweekly_uptrend = weekly_close.last &gt; weekly_sma50.last\n\n# 4-hour confirmation timing\nhourly_breakdown = hourly_close.last &lt; hourly_support\n\nif daily_hm.last == -100 &amp;&amp; weekly_uptrend\n  puts \"Daily Hanging Man in weekly uptrend - Major reversal potential\"\n\n  if hourly_breakdown\n    puts \"4-hour breakdown confirms - High probability short\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hangingman/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Bull Market: - Hanging Man more significant - Major trend reversals possible - Larger position sizes justified</p> <p>Bear Market Rallies: - Hanging Man ends counter-trend rallies - Quick, sharp reversals - Excellent risk:reward setups</p> <p>Ranging Market: - Hanging Man at range top - Good for swing trades - Smaller moves expected</p>"},{"location":"indicators/patterns/cdl_hangingman/#statistical-validation","title":"Statistical Validation","text":"<p>Research and backtesting show: - Success Rate: 55-60% with confirmation, 40-45% without - Best Performance: At resistance with RSI &gt; 65 - Volume Impact: High volume increases success by 15-20% - Confirmation: Improves win rate by 20-25% - Time Frame: Daily charts 12-18% more reliable than hourly</p>"},{"location":"indicators/patterns/cdl_hangingman/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" - Comprehensive coverage of Hanging Man pattern</li> <li>Bulkowski, Thomas N. \"Encyclopedia of Candlestick Charts\" - Statistical analysis showing ~60% success rate</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" - Practical applications in modern markets</li> <li>StockCharts.com - Hanging Man - Educational resource</li> </ul>"},{"location":"indicators/patterns/cdl_hangingman/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Hammer Pattern - Bullish counterpart</li> <li>Shooting Star Pattern - Similar bearish reversal</li> <li>Evening Star Pattern - Multi-candle bearish reversal</li> <li>RSI Indicator</li> <li>Support and Resistance</li> </ul>"},{"location":"indicators/patterns/cdl_harami/","title":"CDL_CDL_HARAMI (Harami)","text":""},{"location":"indicators/patterns/cdl_harami/#overview","title":"Overview","text":"<p>The Harami is a two-candle reversal pattern that reversal pattern where second candle is contained within first candle. This pattern is used to identify potential trend changes and provides traders with entry signals when combined with proper confirmation.</p>"},{"location":"indicators/patterns/cdl_harami/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_harami/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Minimum 2 candles required for pattern detection - More historical data provides better context for trend analysis</p>"},{"location":"indicators/patterns/cdl_harami/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_harami/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_harami(open, high, low, close)\n\nputs \"Harami signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_harami/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_harami/#what-it-measures","title":"What It Measures","text":"<p>The Harami pattern measures: - Reversal Potential: Shift in market sentiment and momentum - Market Psychology: Momentum slowing, indecision forming, potential trend exhaustion - Trend Exhaustion: Signs that current trend is losing strength</p>"},{"location":"indicators/patterns/cdl_harami/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Two-candle reversal</li> <li>Trend Context: Must appear in trend</li> <li>Signal: 100 or -100</li> <li>Reliability: Moderate to High (with confirmation)</li> <li>Best Timeframes: Daily, 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_harami/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_harami/#entry-signals","title":"Entry Signals","text":"<p>Primary Entry: Enter when third candle confirms direction</p> <p>Risk Management: - Stop Loss: Beyond the first candle extreme - Target: Recent swing point - Risk/Reward: Aim for minimum 1:2 ratio</p>"},{"location":"indicators/patterns/cdl_harami/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Strengthen the signal with: 1. Volume Confirmation: Increased volume on signal candle 2. Trend Confirmation: Clear trend established 3. Support/Resistance: Pattern at key price level 4. Next Candle: Following candle confirms direction</p>"},{"location":"indicators/patterns/cdl_harami/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_harami/#optimal-use-cases","title":"Optimal Use Cases","text":"<ul> <li>Market Conditions: After established trend with clear momentum</li> <li>Timeframes: Most reliable on daily charts</li> <li>Asset Classes: Stocks, forex, commodities</li> <li>Volatility: Normal volatility environments</li> </ul>"},{"location":"indicators/patterns/cdl_harami/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<ul> <li>RSI: Confirm overbought/oversold conditions</li> <li>MACD: Verify momentum shift</li> <li>Volume: Validate buying/selling pressure</li> <li>Moving Averages: Confirm trend context</li> </ul>"},{"location":"indicators/patterns/cdl_harami/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend and momentum</li> <li>Volume OBV - Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_harami/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_haramicross/","title":"CDL_HARAMICROSS (Harami Cross)","text":""},{"location":"indicators/patterns/cdl_haramicross/#overview","title":"Overview","text":"<p>The Harami Cross is a two-candle reversal pattern where a doji appears completely within the body of the previous candle. The pattern signals potential trend exhaustion and indecision in the market, with the cross (doji) indicating a balance between buyers and sellers after a strong directional move.</p>"},{"location":"indicators/patterns/cdl_haramicross/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_haramicross/#parameter-details","title":"Parameter Details","text":"<p>open - Opening price for each trading period - Must be same length as high, low, and close arrays - Used to determine candle body direction and size</p> <p>high - Highest price reached during each trading period - Must be same length as other price arrays - Used to identify shadow lengths</p> <p>low - Lowest price reached during each trading period - Must be same length as other price arrays - Used to identify shadow lengths and doji characteristics</p> <p>close - Closing price for each trading period - Must be same length as other price arrays - Used to determine candle body direction and identify doji formation</p>"},{"location":"indicators/patterns/cdl_haramicross/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_haramicross/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Price data arrays\nopen  = [45.0, 48.0, 47.5, 47.6, 47.5]\nhigh  = [45.5, 48.5, 47.8, 47.9, 48.0]\nlow   = [44.5, 47.5, 47.3, 47.3, 46.5]\nclose = [48.0, 48.2, 47.6, 47.5, 46.8]\n\nresult = SQA::TAI.cdl_haramicross(open, high, low, close)\nputs \"Pattern Signal: #{result.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_haramicross/#real-time-pattern-monitoring","title":"Real-Time Pattern Monitoring","text":"<pre><code># Monitor for pattern across multiple periods\nresult.each_with_index do |signal, index|\n  case signal\n  when 100\n    puts \"Bullish Harami Cross at period #{index}\"\n  when -100\n    puts \"Bearish Harami Cross at period #{index}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_haramicross/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_haramicross/#what-it-measures","title":"What It Measures","text":"<p>The Harami Cross pattern measures potential reversal points through the emergence of market indecision after a strong trend. The pattern is valuable because:</p> <ul> <li>The doji shows perfect balance between buyers and sellers</li> <li>The small doji within a large candle indicates exhaustion of the previous trend</li> <li>It signals hesitation and potential reversal before other indicators</li> <li>More reliable than regular Harami due to the doji's stronger indecision signal</li> </ul>"},{"location":"indicators/patterns/cdl_haramicross/#pattern-formation","title":"Pattern Formation","text":"<p>The pattern requires two consecutive candles:</p> <ol> <li> <p>First Candle (Mother): A large candle (bullish or bearish) showing strong directional movement. This represents the prevailing trend with decisive price action.</p> </li> <li> <p>Second Candle (Cross/Doji): A doji that forms completely within the real body of the first candle. The doji's open and close are nearly equal, showing indecision.</p> </li> </ol> <p>Key Characteristics: - Second candle must be a doji (open \u2248 close) - Doji must be contained within first candle's real body - The larger the first candle, the more significant the pattern - Pattern can be bullish or bearish depending on first candle color</p>"},{"location":"indicators/patterns/cdl_haramicross/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Returns -100 (bearish), 0 (no pattern), or +100 (bullish)</li> <li>Type: Pattern recognition, reversal indicator</li> <li>Lag: None - identifies patterns as they complete (requires two candles)</li> <li>Best Used: After extended trends, at support/resistance levels</li> <li>Reliability: Moderate; improves with confirmation</li> <li>Time Frame: Works on all time frames; daily charts most reliable</li> </ul>"},{"location":"indicators/patterns/cdl_haramicross/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_haramicross/#signal-values","title":"Signal Values","text":"<ul> <li>+100 (Bullish Harami Cross):</li> <li>Bearish mother candle followed by doji</li> <li>Suggests downtrend may be ending</li> <li> <p>Consider long positions with confirmation</p> </li> <li> <p>-100 (Bearish Harami Cross):</p> </li> <li>Bullish mother candle followed by doji</li> <li>Suggests uptrend may be ending</li> <li> <p>Consider short positions or exit longs with confirmation</p> </li> <li> <p>0 (No Pattern): Pattern requirements not met</p> </li> </ul>"},{"location":"indicators/patterns/cdl_haramicross/#pattern-strength-indicators","title":"Pattern Strength Indicators","text":"<ol> <li>Mother Candle Size</li> <li>Larger mother candle = stronger signal</li> <li>Strong directional candle shows trend exhaustion</li> <li> <p>Minimum body size improves reliability</p> </li> <li> <p>Doji Quality</p> </li> <li>Smaller doji body = stronger indecision</li> <li>Long shadows on doji indicate volatility</li> <li> <p>Perfect doji (open = close) is most reliable</p> </li> <li> <p>Positioning</p> </li> <li>Pattern at support/resistance increases reliability</li> <li>After extended trends more significant</li> <li>Volume confirmation strengthens signal</li> </ol>"},{"location":"indicators/patterns/cdl_haramicross/#context-considerations","title":"Context Considerations","text":"<ul> <li>Location: Most effective at key support/resistance levels</li> <li>Volume: Decreasing volume on doji confirms indecision</li> <li>Market Condition: Best in trending markets</li> <li>Time Frame: Higher time frames provide more reliable signals</li> </ul>"},{"location":"indicators/patterns/cdl_haramicross/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_haramicross/#buy-signals-bullish-harami-cross","title":"Buy Signals (Bullish Harami Cross)","text":"<ol> <li>Pattern Confirmation</li> <li>Large bearish candle followed by doji</li> <li>Doji completely within mother candle's body</li> <li> <p>Signal value = +100</p> </li> <li> <p>Entry Criteria</p> </li> <li>Enter on break above pattern high</li> <li>Wait for bullish confirmation candle</li> <li> <p>Conservative: wait for close above mother candle open</p> </li> <li> <p>Additional Confirmation</p> </li> <li>RSI showing oversold conditions</li> <li>At established support level</li> <li>Volume increase on confirmation candle</li> </ol> <p>Example Scenario: <pre><code>if result.last == 100 &amp;&amp;\n   close.last &gt; support_level &amp;&amp;\n   rsi.last &lt; 35\n\n  entry = high.last\n  stop_loss = low[-2] * 0.98\n  target = entry + ((entry - stop_loss) * 2)\n\n  puts \"BUY Signal at #{entry}\"\n  puts \"Stop: #{stop_loss}, Target: #{target}\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_haramicross/#sell-signals-bearish-harami-cross","title":"Sell Signals (Bearish Harami Cross)","text":"<ol> <li>Pattern Confirmation</li> <li>Large bullish candle followed by doji</li> <li>Doji completely within mother candle's body</li> <li> <p>Signal value = -100</p> </li> <li> <p>Entry Criteria</p> </li> <li>Enter on break below pattern low</li> <li>Wait for bearish confirmation candle</li> <li> <p>Conservative: wait for close below mother candle open</p> </li> <li> <p>Additional Confirmation</p> </li> <li>RSI showing overbought conditions</li> <li>At established resistance level</li> <li>Volume increase on confirmation candle</li> </ol>"},{"location":"indicators/patterns/cdl_haramicross/#position-management","title":"Position Management","text":"<p>Stop Loss Placement: - Long: Below doji low or mother candle low - Short: Above doji high or mother candle high - ATR-based: 1.5-2x ATR from entry</p> <p>Take Profit Targets: - First target: 1:1 reward/risk ratio - Second target: Next support/resistance level - Trailing stop: After first target hit</p>"},{"location":"indicators/patterns/cdl_haramicross/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_haramicross/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Market Conditions: - After extended trends (5+ candles in same direction) - At key support/resistance levels - When momentum indicators show extremes - During period of trend exhaustion</p> <p>Time Frames: - Daily charts: Most reliable - 4-hour charts: Good for swing trading - Weekly charts: Stronger signals, fewer occurrences - Intraday: Less reliable, needs confirmation</p> <p>Asset Classes: - Stocks: Highly effective - Forex: Works on major pairs - Commodities: Reliable on liquid contracts - Cryptocurrencies: Use with caution due to volatility</p>"},{"location":"indicators/patterns/cdl_haramicross/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Pattern at MA provides strong support/resistance - MACD: Divergence confirms potential reversal - ADX: Low ADX suggests trend weakening</p> <p>With Momentum Indicators: - RSI: Overbought/oversold confirms pattern - Stochastic: Extreme readings strengthen signal - CCI: Oversold/overbought zones add conviction</p> <p>With Support/Resistance: - Fibonacci Levels: Pattern at key retracement levels - Pivot Points: Daily/weekly pivots add significance - Volume Profile: High volume nodes validate pattern</p>"},{"location":"indicators/patterns/cdl_haramicross/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Trading Without Confirmation</li> <li>Don't enter immediately on pattern completion</li> <li>Wait for third candle confirmation</li> <li> <p>Require break of pattern high/low</p> </li> <li> <p>Ignoring Trend Context</p> </li> <li>Pattern needs preceding trend</li> <li>Weak in ranging markets</li> <li> <p>Verify strong directional move before pattern</p> </li> <li> <p>Poor Risk Management</p> </li> <li>Always use stop losses</li> <li>Don't risk more than 2% per trade</li> <li> <p>Account for pattern failure</p> </li> <li> <p>Volume Neglect</p> </li> <li>Confirm with volume analysis</li> <li>Decreasing volume on doji is positive</li> <li>Volume surge on confirmation validates pattern</li> </ol>"},{"location":"indicators/patterns/cdl_haramicross/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Short-term Trading: - Use 15-minute to 1-hour charts cautiously - Require additional confirmation - Tighter stops, smaller positions</p> <p>Medium-term Trading: - 4-hour to daily charts recommended - Balance sensitivity and reliability - Hold for multiple days</p> <p>Long-term Trading: - Daily to weekly charts - Fewer signals, higher reliability - Larger position sizes with confirmation</p>"},{"location":"indicators/patterns/cdl_haramicross/#practical-example","title":"Practical Example","text":"<pre><code>require 'sqa/tai'\n\n# Historical price data\nopen  = [45.0, 46.0, 48.0, 49.0, 50.0, 51.0, 51.5, 51.6, 49.5]\nhigh  = [46.5, 48.5, 49.5, 50.5, 51.5, 52.0, 51.8, 51.8, 49.8]\nlow   = [45.0, 45.8, 47.8, 48.8, 49.8, 50.8, 51.4, 51.4, 48.5]\nclose = [46.0, 48.0, 49.0, 50.0, 51.0, 51.5, 51.6, 51.5, 49.0]\n\n# Calculate pattern\npattern = SQA::TAI.cdl_haramicross(open, high, low, close)\nrsi = SQA::TAI.rsi(close, time_period: 14)\n\n# Analyze current signal\nif pattern.last == -100\n  puts \"BEARISH HARAMI CROSS DETECTED\"\n  puts \"Mother Candle: O=#{open[-2]}, C=#{close[-2]}\"\n  puts \"Doji: O=#{open[-1]}, C=#{close[-1]}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n\n  if rsi.last &gt; 70\n    puts \"Strong sell signal - RSI overbought\"\n    entry = close.last\n    stop = high[-2] * 1.02\n    target = entry - ((stop - entry) * 2)\n\n    puts \"Entry: #{entry}\"\n    puts \"Stop: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n  end\n\nelsif pattern.last == 100\n  puts \"BULLISH HARAMI CROSS DETECTED\"\n  puts \"Mother Candle: O=#{open[-2]}, C=#{close[-2]}\"\n  puts \"Doji: O=#{open[-1]}, C=#{close[-1]}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n\n  if rsi.last &lt; 30\n    puts \"Strong buy signal - RSI oversold\"\n    entry = close.last\n    stop = low[-2] * 0.98\n    target = entry + ((entry - stop) * 2)\n\n    puts \"Entry: #{entry}\"\n    puts \"Stop: #{stop.round(2)}\"\n    puts \"Target: #{target.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_haramicross/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_haramicross/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Harami: Similar pattern without doji requirement; Harami Cross is more specific and reliable</li> <li>Doji: Single candle indecision pattern; Harami Cross adds context of prior trend</li> <li>Inside Bar: General inside candle pattern; Harami Cross requires doji specifically</li> </ul>"},{"location":"indicators/patterns/cdl_haramicross/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Engulfing: Can follow Harami Cross to confirm reversal</li> <li>Piercing Pattern: Bullish confirmation after Bullish Harami Cross</li> <li>Dark Cloud Cover: Bearish confirmation after Bearish Harami Cross</li> </ul>"},{"location":"indicators/patterns/cdl_haramicross/#pattern-family","title":"Pattern Family","text":"<p>Harami Pattern Family: - Harami: Small candle within large candle - Harami Cross: Doji within large candle (more specific) - Both indicate potential reversals through contraction after expansion</p>"},{"location":"indicators/patterns/cdl_haramicross/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_haramicross/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<pre><code># Daily pattern with 4-hour confirmation\ndaily_pattern = SQA::TAI.cdl_haramicross(daily_open, daily_high, daily_low, daily_close)\nh4_pattern = SQA::TAI.cdl_haramicross(h4_open, h4_high, h4_low, h4_close)\n\nif daily_pattern.last == 100 &amp;&amp; h4_pattern.last == 100\n  puts \"Strong bullish signal - multiple timeframe confirmation\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_haramicross/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Trending Markets: - Pattern most reliable - Standard entry rules apply - Strong confirmation recommended</p> <p>Ranging Markets: - Less reliable, many false signals - Require multiple confirmations - Reduce position size</p> <p>High Volatility: - Wider stops needed - Doji more common, reduce significance - Confirm with volume</p>"},{"location":"indicators/patterns/cdl_haramicross/#statistical-validation","title":"Statistical Validation","text":"<p>Historical Success Rates: - 55-60% success rate with confirmation - 40-45% without confirmation - Daily timeframe shows best results - RSI confirmation increases success to 65-70%</p>"},{"location":"indicators/patterns/cdl_haramicross/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison: Comprehensive coverage of Harami Cross pattern</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski: Statistical analysis of pattern performance</li> <li>Original Japanese Sources: Pattern from traditional Japanese candlestick analysis</li> </ul>"},{"location":"indicators/patterns/cdl_haramicross/#see-also","title":"See Also","text":"<ul> <li>Candlestick Patterns Overview</li> <li>Harami - Similar Pattern</li> <li>Doji - Foundation Pattern</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_highwave/","title":"CDL_CDL_HIGHWAVE (High Wave Candle)","text":""},{"location":"indicators/patterns/cdl_highwave/#overview","title":"Overview","text":"<p>The High Wave Candle is a reversal/indecision candlestick pattern used in technical analysis to identify potential trading opportunities.  This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_highwave/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_highwave/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_highwave/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_highwave/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_highwave(open, high, low, close)\n\nputs \"High Wave Candle signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_highwave/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_highwave(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"High Wave Candle detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_highwave/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_highwave/#what-it-measures","title":"What It Measures","text":"<p>The High Wave Candle pattern measures: - Market Psychology: Extreme indecision between bulls and bears, potential volatility - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_highwave/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Reversal/indecision</li> <li>Context: Best used in any trend</li> <li>Signal: 100 or -100</li> <li>Reliability: Moderate - requires strong confirmation</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul> <p>Body Characteristics: Very small body (open and close nearly equal) Shadow Characteristics: Very long upper and lower shadows</p>"},{"location":"indicators/patterns/cdl_highwave/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_highwave/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_highwave/#pattern-recognition","title":"Pattern Recognition","text":"<p>The High Wave Candle is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Can appear in various market conditions</p>"},{"location":"indicators/patterns/cdl_highwave/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_highwave/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_highwave/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_highwave/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_highwave/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>High Wave Candle works best when: - Pattern appears in appropriate trend context (any trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_highwave/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_highwave/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_highwave/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_highwave/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_highwave(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_highwave/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_highwave/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_highwave/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_highwave/#pattern-family","title":"Pattern Family","text":"<p>The High Wave Candle belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_highwave/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_highwave/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use High Wave Candle across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_highwave/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_highwave/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_highwave/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_highwave/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_hikkake/","title":"CDL_CDL_HIKKAKE (Hikkake Pattern)","text":""},{"location":"indicators/patterns/cdl_hikkake/#overview","title":"Overview","text":"<p>The Hikkake Pattern is a reversal candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Inside day followed by breakout in opposite direction. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_hikkake/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_hikkake/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_hikkake/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_hikkake/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_hikkake(open, high, low, close)\n\nputs \"Hikkake Pattern signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_hikkake/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_hikkake(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Hikkake Pattern detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hikkake/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_hikkake/#what-it-measures","title":"What It Measures","text":"<p>The Hikkake Pattern pattern measures: - Market Psychology: False breakout trap - smart money trapping retail traders - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_hikkake/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Reversal</li> <li>Context: Best used in any trend</li> <li>Signal: 100 or -100</li> <li>Reliability: High when confirmed with volume</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_hikkake/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_hikkake/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_hikkake/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Hikkake Pattern is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Can appear in various market conditions</p>"},{"location":"indicators/patterns/cdl_hikkake/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_hikkake/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_hikkake/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_hikkake/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_hikkake/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Hikkake Pattern works best when: - Pattern appears in appropriate trend context (any trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_hikkake/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_hikkake/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_hikkake/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_hikkake/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_hikkake(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hikkake/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_hikkake/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_hikkake/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_hikkake/#pattern-family","title":"Pattern Family","text":"<p>The Hikkake Pattern belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_hikkake/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_hikkake/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Hikkake Pattern across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_hikkake/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_hikkake/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_hikkake/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_hikkake/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_hikkakemod/","title":"CDL_CDL_HIKKAKEMOD (Modified Hikkake Pattern)","text":""},{"location":"indicators/patterns/cdl_hikkakemod/#overview","title":"Overview","text":"<p>The Modified Hikkake Pattern is a reversal candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Hikkake pattern with additional confirmation candles. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_hikkakemod/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_hikkakemod/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_hikkakemod(open, high, low, close)\n\nputs \"Modified Hikkake Pattern signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_hikkakemod/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_hikkakemod(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Modified Hikkake Pattern detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hikkakemod/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_hikkakemod/#what-it-measures","title":"What It Measures","text":"<p>The Modified Hikkake Pattern pattern measures: - Market Psychology: Enhanced version providing stronger reversal signal - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Reversal</li> <li>Context: Best used in any trend</li> <li>Signal: 100 or -100</li> <li>Reliability: Higher than standard Hikkake</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_hikkakemod/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_hikkakemod/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_hikkakemod/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Modified Hikkake Pattern is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Can appear in various market conditions</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_hikkakemod/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_hikkakemod/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Modified Hikkake Pattern works best when: - Pattern appears in appropriate trend context (any trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_hikkakemod/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_hikkakemod(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_hikkakemod/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_hikkakemod/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_hikkakemod/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_hikkakemod/#pattern-family","title":"Pattern Family","text":"<p>The Modified Hikkake Pattern belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_hikkakemod/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Modified Hikkake Pattern across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_hikkakemod/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_hikkakemod/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_hikkakemod/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_homingpigeon/","title":"CDL_CDL_HOMINGPIGEON (Homing Pigeon)","text":""},{"location":"indicators/patterns/cdl_homingpigeon/#overview","title":"Overview","text":"<p>The Homing Pigeon is a bullish reversal candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Two black candles, second engulfed by first but both bearish. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_homingpigeon/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_homingpigeon/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_homingpigeon(open, high, low, close)\n\nputs \"Homing Pigeon signal: #{pattern.last}\"\n# Output: 100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_homingpigeon/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_homingpigeon(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Homing Pigeon detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_homingpigeon/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_homingpigeon/#what-it-measures","title":"What It Measures","text":"<p>The Homing Pigeon pattern measures: - Market Psychology: Selling pressure decreasing, potential bottom formation - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Bullish reversal</li> <li>Context: Best used in downtrend</li> <li>Signal: 100</li> <li>Reliability: Moderate - needs confirmation</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_homingpigeon/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_homingpigeon/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_homingpigeon/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Homing Pigeon is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Appears primarily in downtrend</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_homingpigeon/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_homingpigeon/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Homing Pigeon works best when: - Pattern appears in appropriate trend context (downtrend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_homingpigeon/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_homingpigeon(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_homingpigeon/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_homingpigeon/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_homingpigeon/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_homingpigeon/#pattern-family","title":"Pattern Family","text":"<p>The Homing Pigeon belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_homingpigeon/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Homing Pigeon across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_homingpigeon/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_homingpigeon/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_homingpigeon/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_identical3crows/","title":"CDL_IDENTICAL3CROWS (Identical Three Crows)","text":""},{"location":"indicators/patterns/cdl_identical3crows/#overview","title":"Overview","text":"<p>The Identical Three Crows is a three-candle bearish reversal candlestick pattern. It consists of three consecutive black candles with progressively lower opens and closes, each opening within the previous candle's body, signaling strong bearish momentum. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_identical3crows/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_identical3crows/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_identical3crows/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_identical3crows/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_identical3crows(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_identical3crows/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_identical3crows/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_identical3crows(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_identical3crows/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_identical3crows/#what-it-measures","title":"What It Measures","text":"<p>The Identical Three Crows pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_identical3crows/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0, or 0 (no pattern)</li> <li>Type: three-candle candlestick pattern</li> <li>Signal: Bearish reversal indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_identical3crows/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_identical3crows/#signal-values","title":"Signal Values","text":"<ul> <li>0: Pattern detected - indicates potential bearish reversal signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_identical3crows/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_identical3crows/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_identical3crows/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_identical3crows/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_identical3crows/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_identical3crows/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_identical3crows/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_identical3crows/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_identical3crows/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_identical3crows/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_identical3crows(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Identical Three Crows PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_identical3crows/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_identical3crows/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_identical3crows/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_identical3crows/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_identical3crows/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_identical3crows/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_identical3crows/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_identical3crows/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_identical3crows/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_inneck/","title":"CDL_INNECK (In-Neck Pattern)","text":""},{"location":"indicators/patterns/cdl_inneck/#overview","title":"Overview","text":"<p>The In-Neck pattern is a two-candle bearish continuation pattern that appears during a downtrend. It consists of a long black candle followed by a white candle that closes near or at the low of the previous candle. This pattern suggests that despite a brief attempt to rally, selling pressure remains dominant and the downtrend is likely to continue. The In-Neck pattern is considered a weak reversal signal and primarily indicates continuation.</p>"},{"location":"indicators/patterns/cdl_inneck/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_inneck/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify the upper range of price movement - Helps determine pattern validity</p> <p>low - Array of low prices for each period - Critical for identifying the \"neck line\" where second candle closes - Used to measure support levels</p> <p>close - Array of closing prices for each period - Used to determine candle color and body size - Essential for pattern recognition</p>"},{"location":"indicators/patterns/cdl_inneck/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_inneck/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data showing downtrend with In-Neck pattern\nopen =  [50.00, 48.50, 47.00, 46.80]\nhigh =  [50.20, 48.80, 47.20, 47.50]\nlow =   [48.30, 46.90, 46.70, 46.60]\nclose = [48.50, 47.00, 46.80, 46.90]\n\npattern = SQA::TAI.cdl_inneck(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n# 0 = no pattern, -100 = bearish continuation\n</code></pre>"},{"location":"indicators/patterns/cdl_inneck/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for bearish continuation signals\npattern.each_with_index do |signal, idx|\n  if signal == -100\n    puts \"Bearish In-Neck pattern at index #{idx}\"\n    puts \"Price: #{close[idx]}, downtrend likely to continue\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_inneck/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with moving average for confirmation\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_inneck(open, high, low, close)\nma50 = SQA::TAI.sma(close, 50)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal == -100 &amp;&amp; current_price &lt; ma50.last\n  puts \"In-Neck pattern confirmed by downtrend - strong bearish signal\"\n  puts \"Consider exiting long positions or entering short\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_inneck/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_inneck/#what-it-measures","title":"What It Measures","text":"<p>The In-Neck pattern measures the strength of selling pressure during a downtrend. When a white candle appears but can only close at or near the previous candle's low, it indicates: - Failed rally attempt - Strong resistance at previous low levels - Sellers maintaining control despite buying pressure - High probability of continued decline</p> <p>This pattern is significant because the market attempts to bounce but fails to recover, demonstrating that bears remain firmly in control.</p>"},{"location":"indicators/patterns/cdl_inneck/#pattern-structure","title":"Pattern Structure","text":"<p>In-Neck Pattern (Bearish Continuation): 1. First candle: Long black candle in an established downtrend 2. Second candle: White candle that:    - Opens below the previous close    - Rallies during the session    - Closes near or at the previous candle's low (the \"neck line\")    - Fails to close significantly above the previous low</p> <p>The critical element is that the second candle closes near the first candle's low, creating a \"neck line\" that acts as resistance.</p>"},{"location":"indicators/patterns/cdl_inneck/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Returns -100 (bearish continuation) or 0 (no pattern)</li> <li>Type: Bearish continuation pattern (two-candle formation)</li> <li>Frequency: Relatively common in downtrends</li> <li>Best Used: During established downtrends with clear selling pressure</li> <li>Reliability: Moderate; works best when confirmed with other indicators</li> </ul>"},{"location":"indicators/patterns/cdl_inneck/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_inneck/#signal-values","title":"Signal Values","text":"<ul> <li>-100: Bearish In-Neck pattern detected - downtrend expected to continue</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_inneck/#pattern-recognition","title":"Pattern Recognition","text":"<p>Bearish Continuation Signal (-100): - Appears during an established downtrend - First candle shows strong selling with a long black body - Second candle attempts to rally but closes at or near first candle's low - The \"neck line\" (first candle's low) acts as resistance - Indicates sellers remain in control despite brief buying pressure</p>"},{"location":"indicators/patterns/cdl_inneck/#market-psychology","title":"Market Psychology","text":"<p>The In-Neck pattern reveals important market dynamics: - Initial Decline: Long black candle shows strong selling pressure - Failed Rally: White candle attempts recovery but fails - Resistance at Neck Line: Previous low becomes resistance level - Renewed Selling: Failure to break above neck line invites more selling - Continuation Bias: Pattern confirms downtrend will likely continue</p>"},{"location":"indicators/patterns/cdl_inneck/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_inneck/#sell-signals","title":"Sell Signals","text":"<p>When the In-Neck pattern appears (-100):</p> <ol> <li>Entry Point: Enter short position at the close of the second candle or on a breakdown below the neck line</li> <li>Confirmation: Verify pattern occurs in an established downtrend</li> <li>Stop Loss: Place stop above the high of the second candle</li> </ol> <p>Example Scenario: <pre><code># Detect In-Neck pattern and generate trading signal\nif pattern.last == -100\n  entry_price = close.last\n  pattern_high = [high[-2], high[-1]].max\n  stop_loss = pattern_high * 1.02\n  risk = stop_loss - entry_price\n  target = entry_price - (2 * risk)\n\n  puts \"SELL Signal: In-Neck Pattern Detected\"\n  puts \"Entry: $#{entry_price.round(2)}\"\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"Risk/Reward: 1:2\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_inneck/#exit-signals-for-long-positions","title":"Exit Signals for Long Positions","text":"<p>For traders holding long positions:</p> <ol> <li>Exit Point: Close long positions when In-Neck pattern completes</li> <li>Partial Exit: Consider reducing position size immediately</li> <li>Trailing Stop: Tighten stop losses to protect profits</li> </ol> <p>Example Scenario: <pre><code># Exit long position on In-Neck pattern\nif pattern.last == -100 &amp;&amp; position == :long\n  puts \"WARNING: In-Neck pattern detected\"\n  puts \"Recommendation: Exit long position\"\n  puts \"Current Price: $#{close.last}\"\n  puts \"Downtrend continuation expected\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_inneck/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_inneck/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best in: - Established downtrends: Clear downward price movement required - After significant decline: Pattern more reliable after sustained selling - Near resistance levels: Added confirmation when pattern forms at resistance - Time frames: Most reliable on daily charts; also effective on 4-hour charts - Volume confirmation: Decreasing volume on second candle strengthens signal</p>"},{"location":"indicators/patterns/cdl_inneck/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Price should be below key MAs (20, 50, 200-day) - ADX: ADX above 25 confirms strong downtrend - MACD: MACD below signal line confirms bearish momentum</p> <p>With Volume Indicators: - Volume Analysis: High volume on first candle, lower on second - On-Balance Volume (OBV): Declining OBV confirms selling pressure - Volume decrease: Lower volume on second candle shows weak buying</p> <p>With Support/Resistance: - Resistance Levels: Pattern more significant at known resistance - Previous Lows: Neck line at previous support turned resistance - Fibonacci Levels: Pattern at Fibonacci retracement adds confirmation</p>"},{"location":"indicators/patterns/cdl_inneck/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Trading Against Major Support: Avoid pattern near strong support levels</li> <li>Ignoring Overall Trend: Pattern requires established downtrend</li> <li>Confusing with On-Neck: In-Neck closes at low; On-Neck closes below low</li> <li>Missing Volume Confirmation: Pattern stronger with appropriate volume</li> <li>Weak Downtrend Context: Pattern less reliable in ranging or weak downtrends</li> </ol>"},{"location":"indicators/patterns/cdl_inneck/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Initial Stop: Above the high of the second candle - Alternative Stop: Above recent swing high - Buffer: Add 1-2% for volatility - Time Stop: Exit if pattern doesn't follow through within 3-5 bars</p> <p>Position Sizing: - Risk no more than 1-2% of account per trade - Consider smaller positions due to moderate reliability - Scale into position after confirmation</p>"},{"location":"indicators/patterns/cdl_inneck/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical data showing downtrend\nopen =  [52.00, 51.00, 50.00, 48.50, 47.00, 46.80, 46.00]\nhigh =  [52.50, 51.20, 50.20, 48.80, 47.20, 47.50, 46.50]\nlow =   [50.90, 49.80, 48.30, 46.90, 46.70, 46.60, 45.50]\nclose = [51.00, 50.00, 48.50, 47.00, 46.80, 46.90, 45.80]\n\n# Calculate indicators\npattern = SQA::TAI.cdl_inneck(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)  # Using 5 for short data\nadx = SQA::TAI.adx(high, low, close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\nin_downtrend = current_price &lt; sma_20.last\n\nif current_signal == -100 &amp;&amp; in_downtrend\n  puts \"=\" * 50\n  puts \"IN-NECK BEARISH CONTINUATION PATTERN\"\n  puts \"=\" * 50\n  puts \"Current Price: $#{current_price}\"\n  puts \"Pattern Signal: #{current_signal}\"\n  puts \"Below 20 SMA: #{in_downtrend}\"\n  puts \"\"\n\n  # Calculate trade parameters\n  entry = current_price\n  pattern_high = [high[-2], high[-1]].max\n  stop = pattern_high * 1.02\n  risk = stop - entry\n  target = entry - (2 * risk)\n\n  puts \"SHORT TRADE SETUP:\"\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Stop Loss: $#{stop.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"Risk per share: $#{risk.round(2)}\"\n  puts \"\"\n  puts \"STRATEGY:\"\n  puts \"- Enter short at market\"\n  puts \"- Place stop above pattern high\"\n  puts \"- Take profit at 2x risk target\"\n  puts \"- Monitor for breakdown below neck line\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_inneck/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_inneck/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>On-Neck Pattern: Similar but second candle closes below first candle's low</li> <li>Thrusting Pattern: Second candle closes slightly higher into first candle's body</li> <li>Dark Cloud Cover: Stronger bearish reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_inneck/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Bearish Engulfing: Stronger bearish signal</li> <li>Evening Star: Bearish reversal pattern</li> <li>Three Black Crows: Strong bearish continuation</li> </ul>"},{"location":"indicators/patterns/cdl_inneck/#indicator-combinations","title":"Indicator Combinations","text":"<ul> <li>RSI: RSI below 50 confirms bearish momentum</li> <li>Moving Averages: Price below MAs confirms downtrend</li> <li>Volume: Volume pattern confirms selling pressure</li> </ul>"},{"location":"indicators/patterns/cdl_inneck/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_inneck/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify In-Neck pattern on trading timeframe (daily) 2. Confirm downtrend on higher timeframe (weekly) 3. Use lower timeframe (4-hour) for precise entry 4. Wait for breakdown below neck line on lower timeframe</p>"},{"location":"indicators/patterns/cdl_inneck/#pattern-variations","title":"Pattern Variations","text":"<ul> <li>Perfect In-Neck: Second candle closes exactly at first candle's low</li> <li>Near In-Neck: Second candle closes within 1% of first candle's low</li> <li>Volume Pattern: High volume on first candle, declining volume on second</li> </ul>"},{"location":"indicators/patterns/cdl_inneck/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research by Thomas Bulkowski suggests: - Success rate: Approximately 56-62% for continuation - Average decline: 3-7% after pattern completion - Time to target: Usually achieved within 10-15 trading days - Performance better in strong downtrends</p>"},{"location":"indicators/patterns/cdl_inneck/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"The Candlestick Course\" by Steve Nison</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> </ul>"},{"location":"indicators/patterns/cdl_inneck/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Bearish Continuation Patterns</li> <li>On-Neck Pattern</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_inside/","title":"CDL_INSIDE - See Three Inside Up/Down","text":"<p>Redirect: The pattern you're looking for is documented as Three Inside Up/Down (CDL_3INSIDE).</p>"},{"location":"indicators/patterns/cdl_inside/#pattern-name-clarification","title":"Pattern Name Clarification","text":"<p>In TA-Lib, the \"inside\" pattern is officially named CDL_3INSIDE, which stands for \"Three Inside Up\" (bullish) and \"Three Inside Down\" (bearish).</p>"},{"location":"indicators/patterns/cdl_inside/#quick-reference","title":"Quick Reference","text":"<p>Pattern Type: Three-candle reversal pattern</p> <p>Bullish Version (Three Inside Up): 1. Large bearish candle 2. Small bullish candle inside first candle's range (harami) 3. Bullish candle closing above first candle's high</p> <p>Bearish Version (Three Inside Down): 1. Large bullish candle 2. Small bearish candle inside first candle's range (harami) 3. Bearish candle closing below first candle's low</p>"},{"location":"indicators/patterns/cdl_inside/#documentation","title":"Documentation","text":"<p>For complete documentation, please see:</p>"},{"location":"indicators/patterns/cdl_inside/#three-inside-updown-cdl_3inside","title":"\u2192 Three Inside Up/Down (CDL_3INSIDE)","text":"<p>The complete documentation includes: - Detailed pattern structure - Parameter specifications - Usage examples - Trading strategies - Confirmation techniques - Risk management guidelines</p>"},{"location":"indicators/patterns/cdl_inside/#usage-example","title":"Usage Example","text":"<pre><code>require 'sqa/tai'\n\nopen  = [50.0, 49.5, 49.8, 50.5]\nhigh  = [50.5, 50.0, 50.0, 51.0]\nlow   = [49.5, 49.0, 49.5, 49.5]\nclose = [49.5, 49.7, 50.2, 50.8]\n\n# Use cdl_3inside (not cdl_inside)\npattern = SQA::TAI.cdl_3inside(open, high, low, close)\n\nif pattern.last == 100\n  puts \"Bullish Three Inside Up detected\"\nelsif pattern.last == -100\n  puts \"Bearish Three Inside Down detected\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_inside/#related-patterns","title":"Related Patterns","text":"<ul> <li>Three Inside Up/Down (CDL_3INSIDE) - Full documentation</li> <li>Harami (CDL_HARAMI) - Two-candle precursor pattern</li> <li>Three Outside Up/Down (CDL_3OUTSIDE) - Related pattern with engulfing</li> </ul>"},{"location":"indicators/patterns/cdl_inside/#see-also","title":"See Also","text":"<ul> <li>Candlestick Patterns Index</li> <li>Pattern Recognition Guide</li> <li>All Two-Candle Patterns</li> <li>All Three-Candle Patterns</li> </ul> <p>Note: Always use <code>cdl_3inside</code> in your code, not <code>cdl_inside</code>. The \"3\" prefix indicates it's a three-candle pattern and is the correct TA-Lib function name.</p>"},{"location":"indicators/patterns/cdl_invertedhammer/","title":"CDL_CDL_INVERTEDHAMMER (Inverted Hammer)","text":""},{"location":"indicators/patterns/cdl_invertedhammer/#overview","title":"Overview","text":"<p>The Inverted Hammer is a single-candle bullish reversal pattern that bullish reversal pattern with long upper shadow at bottom of downtrend. This pattern is used to identify potential trend changes and provides traders with entry signals when combined with proper confirmation.</p>"},{"location":"indicators/patterns/cdl_invertedhammer/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_invertedhammer/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Minimum 1 candle required for pattern detection - More historical data provides better context for trend analysis</p>"},{"location":"indicators/patterns/cdl_invertedhammer/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_invertedhammer/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_invertedhammer(open, high, low, close)\n\nputs \"Inverted Hammer signal: #{pattern.last}\"\n# Output: 100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_invertedhammer/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_invertedhammer/#what-it-measures","title":"What It Measures","text":"<p>The Inverted Hammer pattern measures: - Reversal Potential: Shift in market sentiment and momentum - Market Psychology: Bears still in control but bulls testing resistance, potential shift - Trend Exhaustion: Signs that current trend is losing strength</p>"},{"location":"indicators/patterns/cdl_invertedhammer/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Single-candle bullish reversal</li> <li>Trend Context: Must appear in downtrend</li> <li>Signal: 100</li> <li>Reliability: Moderate to High (with confirmation)</li> <li>Best Timeframes: Daily, 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_invertedhammer/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_invertedhammer/#entry-signals","title":"Entry Signals","text":"<p>Primary Entry: Long when next candle closes above inverted hammer</p> <p>Risk Management: - Stop Loss: Below the low of the inverted hammer - Target: Recent resistance or swing high - Risk/Reward: Aim for minimum 1:2 ratio</p>"},{"location":"indicators/patterns/cdl_invertedhammer/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Strengthen the signal with: 1. Volume Confirmation: Increased volume on signal candle 2. Trend Confirmation: Clear downtrend established 3. Support/Resistance: Pattern at key price level 4. Next Candle: Following candle confirms direction</p>"},{"location":"indicators/patterns/cdl_invertedhammer/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_invertedhammer/#optimal-use-cases","title":"Optimal Use Cases","text":"<ul> <li>Market Conditions: After established trend with clear momentum</li> <li>Timeframes: Most reliable on daily charts</li> <li>Asset Classes: Stocks, forex, commodities</li> <li>Volatility: Normal volatility environments</li> </ul>"},{"location":"indicators/patterns/cdl_invertedhammer/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<ul> <li>RSI: Confirm overbought/oversold conditions</li> <li>MACD: Verify momentum shift</li> <li>Volume: Validate buying/selling pressure</li> <li>Moving Averages: Confirm trend context</li> </ul>"},{"location":"indicators/patterns/cdl_invertedhammer/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend and momentum</li> <li>Volume OBV - Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_invertedhammer/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_kicking/","title":"CDL_KICKING (Kicking Pattern)","text":""},{"location":"indicators/patterns/cdl_kicking/#overview","title":"Overview","text":"<p>The Kicking pattern is a powerful two-candle reversal pattern characterized by two consecutive marubozu candlesticks (candles with no or minimal shadows) that gap in opposite directions. This pattern signals a dramatic shift in market sentiment with strong conviction from both bulls and bears, making it one of the most reliable reversal patterns in candlestick analysis.</p>"},{"location":"indicators/patterns/cdl_kicking/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_kicking/#parameter-details","title":"Parameter Details","text":"<p>open - Opening price for each trading period - Critical for identifying marubozu characteristics (open near high/low) - Must be same length as other price arrays</p> <p>high - Highest price reached during each trading period - Used to verify marubozu formation (minimal upper shadow) - Must be same length as other price arrays</p> <p>low - Lowest price reached during each trading period - Used to verify marubozu formation (minimal lower shadow) - Must be same length as other price arrays</p> <p>close - Closing price for each trading period - Critical for identifying marubozu characteristics (close near high/low) - Must be same length as other price arrays</p>"},{"location":"indicators/patterns/cdl_kicking/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_kicking/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Price data showing kicking pattern\nopen  = [50.0, 48.0, 47.0, 52.0, 53.0]\nhigh  = [50.2, 48.1, 47.1, 53.5, 54.0]\nlow   = [47.8, 46.9, 46.8, 52.0, 52.8]\nclose = [48.0, 47.0, 46.9, 53.5, 53.8]\n\nresult = SQA::TAI.cdl_kicking(open, high, low, close)\nputs \"Pattern Signal: #{result.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_kicking/#real-time-monitoring","title":"Real-Time Monitoring","text":"<pre><code>result.each_with_index do |signal, index|\n  case signal\n  when 100\n    puts \"Bullish Kicking pattern at period #{index}\"\n  when -100\n    puts \"Bearish Kicking pattern at period #{index}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_kicking/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_kicking/#what-it-measures","title":"What It Measures","text":"<p>The Kicking pattern identifies dramatic sentiment reversals through: - Two consecutive marubozu candles showing strong conviction - Gap between candles demonstrating sudden shift - Absence of shadows indicating no hesitation - Complete rejection of previous trend</p>"},{"location":"indicators/patterns/cdl_kicking/#pattern-formation","title":"Pattern Formation","text":"<p>Bullish Kicking: 1. First candle: Bearish marubozu (open near high, close near low) 2. Gap up opening of second candle 3. Second candle: Bullish marubozu (open near low, close near high)</p> <p>Bearish Kicking: 1. First candle: Bullish marubozu (open near low, close near high) 2. Gap down opening of second candle 3. Second candle: Bearish marubozu (open near high, close near low)</p> <p>Key Characteristics: - Both candles must be marubozu (minimal/no shadows) - Clear gap between the two candles - Strong bodies on both candles - Complete trend reversal signal</p>"},{"location":"indicators/patterns/cdl_kicking/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: -100 (bearish), 0 (no pattern), +100 (bullish)</li> <li>Type: Reversal pattern, high reliability</li> <li>Lag: None - two candle identification</li> <li>Best Used: At trend reversal points, breakouts</li> <li>Reliability: High - one of strongest reversal patterns</li> <li>Time Frame: All time frames; daily most reliable</li> </ul>"},{"location":"indicators/patterns/cdl_kicking/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_kicking/#signal-values","title":"Signal Values","text":"<ul> <li>+100 (Bullish Kicking): Strong bullish reversal</li> <li>Sellers completely rejected</li> <li>Buyers in full control</li> <li> <p>High probability uptrend initiation</p> </li> <li> <p>-100 (Bearish Kicking): Strong bearish reversal</p> </li> <li>Buyers completely rejected</li> <li>Sellers in full control</li> <li> <p>High probability downtrend initiation</p> </li> <li> <p>0 (No Pattern): Requirements not met</p> </li> </ul>"},{"location":"indicators/patterns/cdl_kicking/#pattern-strength-indicators","title":"Pattern Strength Indicators","text":"<ol> <li>Gap Size: Larger gaps = stronger signals</li> <li>Body Size: Larger marubozu bodies = more conviction</li> <li>Shadow Absence: Perfect marubozu = strongest signal</li> <li>Volume: High volume confirms pattern strength</li> </ol>"},{"location":"indicators/patterns/cdl_kicking/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_kicking/#buy-signals-bullish-kicking","title":"Buy Signals (Bullish Kicking)","text":"<p>Entry Criteria: - Pattern confirmed (signal = +100) - Enter on close of second candle - Or enter on break above second candle high</p> <p>Stop Loss: - Below second candle low - Or below gap level</p> <p>Take Profit: - 2:1 or 3:1 reward/risk - Next resistance level</p> <p>Example: <pre><code>if result.last == 100\n  entry = close.last\n  stop = low.last * 0.98\n  target = entry + ((entry - stop) * 2)\n\n  puts \"BUY: #{entry}\"\n  puts \"Stop: #{stop.round(2)}\"\n  puts \"Target: #{target.round(2)}\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_kicking/#sell-signals-bearish-kicking","title":"Sell Signals (Bearish Kicking)","text":"<p>Entry Criteria: - Pattern confirmed (signal = -100) - Enter on close of second candle - Or enter on break below second candle low</p> <p>Stop Loss: - Above second candle high - Or above gap level</p> <p>Take Profit: - 2:1 or 3:1 reward/risk - Next support level</p>"},{"location":"indicators/patterns/cdl_kicking/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_kicking/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Market Conditions: - After extended trends - At breakout points - High volume periods - Clear support/resistance levels</p> <p>Time Frames: - Daily: Most reliable - 4-hour: Good for swing trading - Weekly: Very strong signals - Intraday: Requires confirmation</p> <p>Asset Classes: - Stocks: Highly effective - Forex: Works on major pairs - Futures: Very reliable - Cryptocurrencies: Effective in high volatility</p>"},{"location":"indicators/patterns/cdl_kicking/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Volume: - High volume on both candles confirms strength - Volume surge validates pattern</p> <p>With Momentum: - RSI extremes add conviction - MACD confirmation strengthens signal</p> <p>With Support/Resistance: - Pattern at key levels highly significant - Fibonacci levels add importance</p>"},{"location":"indicators/patterns/cdl_kicking/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Ignoring Gap Requirement</li> <li>Must have clear gap between candles</li> <li> <p>Gap validates sentiment shift</p> </li> <li> <p>Poor Marubozu Identification</p> </li> <li>Check for minimal shadows</li> <li> <p>Both candles must be strong marubozu</p> </li> <li> <p>No Volume Confirmation</p> </li> <li>Always verify with volume</li> <li> <p>Low volume reduces reliability</p> </li> <li> <p>Wrong Time Frame</p> </li> <li>Higher time frames more reliable</li> <li>Intraday needs strict filtering</li> </ol>"},{"location":"indicators/patterns/cdl_kicking/#practical-example","title":"Practical Example","text":"<pre><code>require 'sqa/tai'\n\n# Historical data\nopen  = [48.0, 49.0, 50.0, 51.0, 50.8, 46.0, 47.0]\nhigh  = [49.5, 50.5, 51.5, 51.2, 50.9, 47.5, 48.5]\nlow   = [47.8, 48.8, 49.8, 50.7, 46.0, 45.9, 46.8]\nclose = [49.0, 50.0, 51.0, 50.8, 46.1, 47.0, 48.2]\n\npattern = SQA::TAI.cdl_kicking(open, high, low, close)\n\nif pattern.last == 100\n  puts \"BULLISH KICKING DETECTED\"\n  puts \"First candle (bearish): O=#{open[-2]}, C=#{close[-2]}\"\n  puts \"Second candle (bullish): O=#{open[-1]}, C=#{close[-1]}\"\n  puts \"Gap size: #{(open[-1] - close[-2]).round(2)}\"\n\n  entry = close.last\n  stop = low.last * 0.985\n  target = entry + ((entry - stop) * 2.5)\n\n  puts \"\\nTrade Setup:\"\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Stop: $#{stop.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"Risk/Reward: 1:2.5\"\n\nelsif pattern.last == -100\n  puts \"BEARISH KICKING DETECTED\"\n  puts \"First candle (bullish): O=#{open[-2]}, C=#{close[-2]}\"\n  puts \"Second candle (bearish): O=#{open[-1]}, C=#{close[-1]}\"\n  puts \"Gap size: #{(close[-2] - open[-1]).round(2)}\"\n\n  entry = close.last\n  stop = high.last * 1.015\n  target = entry - ((stop - entry) * 2.5)\n\n  puts \"\\nTrade Setup:\"\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Stop: $#{stop.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"Risk/Reward: 1:2.5\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_kicking/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_kicking/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Kicking by Length: Variant where direction determined by longer marubozu</li> <li>Engulfing: Similar reversal concept but without gap requirement</li> <li>Marubozu: Single candle component of Kicking pattern</li> </ul>"},{"location":"indicators/patterns/cdl_kicking/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Belt Hold: Single marubozu providing continuation confirmation</li> <li>Two Crows: Can follow bearish kicking for additional bearish confirmation</li> <li>Three White Soldiers: Can follow bullish kicking to confirm uptrend</li> </ul>"},{"location":"indicators/patterns/cdl_kicking/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_kicking/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<pre><code># Daily kicking with weekly confirmation\ndaily_pattern = SQA::TAI.cdl_kicking(daily_open, daily_high, daily_low, daily_close)\nweekly_trend = weekly_close.last &gt; weekly_sma.last\n\nif daily_pattern.last == 100 &amp;&amp; weekly_trend\n  puts \"Strong bullish setup - daily kicking + weekly uptrend\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_kicking/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Trending Markets: Pattern most powerful, high success rate</p> <p>Ranging Markets: Less frequent but still reliable at range boundaries</p> <p>High Volatility: More frequent patterns, confirm with volume</p>"},{"location":"indicators/patterns/cdl_kicking/#statistical-validation","title":"Statistical Validation","text":"<p>Success Rates: - 70-75% success rate with proper confirmation - 65-70% on daily charts - Improves to 75-80% with volume confirmation - One of highest reliability candlestick patterns</p>"},{"location":"indicators/patterns/cdl_kicking/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison: Comprehensive coverage of Kicking pattern</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski: Statistical performance analysis</li> <li>Traditional Japanese Analysis: Pattern represents complete market reversal</li> </ul>"},{"location":"indicators/patterns/cdl_kicking/#see-also","title":"See Also","text":"<ul> <li>Candlestick Patterns Overview</li> <li>Kicking by Length</li> <li>Marubozu</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_kickingbylength/","title":"CDL_CDL_KICKINGBYLENGTH (Kicking By Length)","text":""},{"location":"indicators/patterns/cdl_kickingbylength/#overview","title":"Overview","text":"<p>The Kicking By Length is a strong reversal candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Two marubozu candles in opposite directions with gap. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_kickingbylength/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_kickingbylength/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_kickingbylength(open, high, low, close)\n\nputs \"Kicking By Length signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_kickingbylength/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_kickingbylength(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Kicking By Length detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_kickingbylength/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_kickingbylength/#what-it-measures","title":"What It Measures","text":"<p>The Kicking By Length pattern measures: - Market Psychology: Powerful shift in market sentiment with strong conviction - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Strong reversal</li> <li>Context: Best used in any trend</li> <li>Signal: 100 or -100</li> <li>Reliability: Very high - one of strongest reversal patterns</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_kickingbylength/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_kickingbylength/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_kickingbylength/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Kicking By Length is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Can appear in various market conditions</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_kickingbylength/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_kickingbylength/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Kicking By Length works best when: - Pattern appears in appropriate trend context (any trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_kickingbylength/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_kickingbylength(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_kickingbylength/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_kickingbylength/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_kickingbylength/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_kickingbylength/#pattern-family","title":"Pattern Family","text":"<p>The Kicking By Length belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_kickingbylength/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Kicking By Length across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_kickingbylength/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_kickingbylength/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_kickingbylength/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_ladderbottom/","title":"CDL_CDL_LADDERBOTTOM (Ladder Bottom)","text":""},{"location":"indicators/patterns/cdl_ladderbottom/#overview","title":"Overview","text":"<p>The Ladder Bottom is a bullish reversal candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Three long black candles, then opening gap down but closing higher. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_ladderbottom/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_ladderbottom/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_ladderbottom(open, high, low, close)\n\nputs \"Ladder Bottom signal: #{pattern.last}\"\n# Output: 100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_ladderbottom/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_ladderbottom(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Ladder Bottom detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_ladderbottom/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_ladderbottom/#what-it-measures","title":"What It Measures","text":"<p>The Ladder Bottom pattern measures: - Market Psychology: Extreme selling exhaustion followed by buying pressure - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Bullish reversal</li> <li>Context: Best used in downtrend</li> <li>Signal: 100</li> <li>Reliability: High - rare pattern</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_ladderbottom/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_ladderbottom/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_ladderbottom/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Ladder Bottom is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Appears primarily in downtrend</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_ladderbottom/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_ladderbottom/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Ladder Bottom works best when: - Pattern appears in appropriate trend context (downtrend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_ladderbottom/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_ladderbottom(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_ladderbottom/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_ladderbottom/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_ladderbottom/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_ladderbottom/#pattern-family","title":"Pattern Family","text":"<p>The Ladder Bottom belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_ladderbottom/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Ladder Bottom across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_ladderbottom/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_ladderbottom/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_ladderbottom/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_longleggeddoji/","title":"CDL_CDL_LONGLEGGEDDOJI (Long-Legged Doji)","text":""},{"location":"indicators/patterns/cdl_longleggeddoji/#overview","title":"Overview","text":"<p>The Long-Legged Doji is a reversal/indecision candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Doji with very long upper and lower shadows. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_longleggeddoji/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_longleggeddoji/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_longleggeddoji(open, high, low, close)\n\nputs \"Long-Legged Doji signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_longleggeddoji/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_longleggeddoji(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Long-Legged Doji detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_longleggeddoji/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_longleggeddoji/#what-it-measures","title":"What It Measures","text":"<p>The Long-Legged Doji pattern measures: - Market Psychology: Extreme volatility and indecision, market at crossroads - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Reversal/indecision</li> <li>Context: Best used in any trend</li> <li>Signal: 100 or -100</li> <li>Reliability: Moderate - context dependent</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_longleggeddoji/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_longleggeddoji/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_longleggeddoji/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Long-Legged Doji is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Can appear in various market conditions</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_longleggeddoji/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_longleggeddoji/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Long-Legged Doji works best when: - Pattern appears in appropriate trend context (any trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_longleggeddoji/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_longleggeddoji(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_longleggeddoji/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_longleggeddoji/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_longleggeddoji/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_longleggeddoji/#pattern-family","title":"Pattern Family","text":"<p>The Long-Legged Doji belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_longleggeddoji/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Long-Legged Doji across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_longleggeddoji/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_longleggeddoji/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_longleggeddoji/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_longline/","title":"CDL_LONGLINE (Long Line Candle)","text":""},{"location":"indicators/patterns/cdl_longline/#overview","title":"Overview","text":"<p>The Long Line Candle is a single-candle strength candlestick pattern. This pattern identifies candles with unusually long bodies relative to recent price action, indicating strong directional momentum and conviction. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_longline/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_longline/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_longline/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_longline/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_longline(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_longline/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_longline/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_longline(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_longline/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_longline/#what-it-measures","title":"What It Measures","text":"<p>The Long Line Candle pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_longline/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns +100 (bullish) or -100 (bearish), or 0 (no pattern)</li> <li>Type: single-candle candlestick pattern</li> <li>Signal: Strength indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_longline/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_longline/#signal-values","title":"Signal Values","text":"<ul> <li>+100 (bullish) or -100 (bearish): Pattern detected - indicates potential strength signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_longline/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_longline/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_longline/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_longline/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_longline/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_longline/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_longline/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_longline/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_longline/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_longline/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_longline(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Long Line Candle PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_longline/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_longline/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_longline/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_longline/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_longline/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_longline/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_longline/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_longline/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_longline/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_marubozu/","title":"CDL_CDL_MARUBOZU (Marubozu)","text":""},{"location":"indicators/patterns/cdl_marubozu/#overview","title":"Overview","text":"<p>The Marubozu is a continuation candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Long candle with no shadows (or very small shadows). This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_marubozu/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_marubozu/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_marubozu/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_marubozu/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_marubozu(open, high, low, close)\n\nputs \"Marubozu signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_marubozu/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_marubozu(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Marubozu detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_marubozu/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_marubozu/#what-it-measures","title":"What It Measures","text":"<p>The Marubozu pattern measures: - Market Psychology: Strong directional conviction from open to close - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_marubozu/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Continuation</li> <li>Context: Best used in any trend</li> <li>Signal: 100 or -100</li> <li>Reliability: High for continuation</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_marubozu/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_marubozu/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_marubozu/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Marubozu is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Can appear in various market conditions</p>"},{"location":"indicators/patterns/cdl_marubozu/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_marubozu/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_marubozu/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_marubozu/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_marubozu/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Marubozu works best when: - Pattern appears in appropriate trend context (any trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_marubozu/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_marubozu/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_marubozu/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_marubozu/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_marubozu(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_marubozu/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_marubozu/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_marubozu/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_marubozu/#pattern-family","title":"Pattern Family","text":"<p>The Marubozu belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_marubozu/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_marubozu/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Marubozu across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_marubozu/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Higher reliability - Ranging Markets: Moderate reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_marubozu/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_marubozu/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_marubozu/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_matchinglow/","title":"CDL_MATCHINGLOW (Matching Low)","text":""},{"location":"indicators/patterns/cdl_matchinglow/#overview","title":"Overview","text":"<p>The Matching Low is a two-candle bullish reversal candlestick pattern. It features two consecutive black candles with matching or very similar low prices, indicating potential support and a bullish reversal. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_matchinglow/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_matchinglow/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_matchinglow/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_matchinglow/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_matchinglow(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_matchinglow/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_matchinglow/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_matchinglow(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_matchinglow/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_matchinglow/#what-it-measures","title":"What It Measures","text":"<p>The Matching Low pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_matchinglow/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0, or 0 (no pattern)</li> <li>Type: two-candle candlestick pattern</li> <li>Signal: Bullish reversal indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_matchinglow/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_matchinglow/#signal-values","title":"Signal Values","text":"<ul> <li>0: Pattern detected - indicates potential bullish reversal signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_matchinglow/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_matchinglow/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_matchinglow/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_matchinglow/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_matchinglow/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_matchinglow/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_matchinglow/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_matchinglow/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_matchinglow/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_matchinglow/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_matchinglow(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Matching Low PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_matchinglow/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_matchinglow/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_matchinglow/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_matchinglow/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_matchinglow/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_matchinglow/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_matchinglow/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_matchinglow/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_matchinglow/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_mathold/","title":"CDL_CDL_MATHOLD (Mat Hold)","text":""},{"location":"indicators/patterns/cdl_mathold/#overview","title":"Overview","text":"<p>The Mat Hold is a bullish continuation candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Long white candle, three small black candles, then white candle. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_mathold/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_mathold/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_mathold/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_mathold/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_mathold(open, high, low, close)\n\nputs \"Mat Hold signal: #{pattern.last}\"\n# Output: 100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_mathold/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_mathold(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Mat Hold detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_mathold/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_mathold/#what-it-measures","title":"What It Measures","text":"<p>The Mat Hold pattern measures: - Market Psychology: Brief consolidation in uptrend before continuation - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_mathold/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Bullish continuation</li> <li>Context: Best used in uptrend</li> <li>Signal: 100</li> <li>Reliability: Moderate - rare pattern</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_mathold/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_mathold/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_mathold/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Mat Hold is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Appears primarily in uptrend</p>"},{"location":"indicators/patterns/cdl_mathold/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_mathold/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_mathold/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_mathold/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_mathold/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Mat Hold works best when: - Pattern appears in appropriate trend context (uptrend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_mathold/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_mathold/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_mathold/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_mathold/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_mathold(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_mathold/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_mathold/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_mathold/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_mathold/#pattern-family","title":"Pattern Family","text":"<p>The Mat Hold belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_mathold/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_mathold/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Mat Hold across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_mathold/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Higher reliability - Ranging Markets: Moderate reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_mathold/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_mathold/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_mathold/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_meetinglines/","title":"CDL_MEETINGLINES (Meeting Lines)","text":"<p>Note: This pattern may not be implemented in the current version of TA-Lib/SQA::TAI. Please verify availability before use. The Counterattack Pattern is very similar and may be used as an alternative.</p>"},{"location":"indicators/patterns/cdl_meetinglines/#overview","title":"Overview","text":"<p>Meeting Lines is a two-candle reversal pattern where two opposite-colored candles have nearly identical closing prices. The pattern suggests a potential trend reversal when the second candle \"meets\" the first at the same price level, indicating a shift in market sentiment.</p>"},{"location":"indicators/patterns/cdl_meetinglines/#pattern-structure","title":"Pattern Structure","text":""},{"location":"indicators/patterns/cdl_meetinglines/#bullish-meeting-lines","title":"Bullish Meeting Lines","text":"<ul> <li>First Candle: Long bearish (black/red) candle in downtrend</li> <li>Second Candle: Bullish (white/green) candle</li> <li>Key Feature: Both candles close at approximately the same price</li> <li>Signal: Potential bullish reversal</li> </ul>"},{"location":"indicators/patterns/cdl_meetinglines/#bearish-meeting-lines","title":"Bearish Meeting Lines","text":"<ul> <li>First Candle: Long bullish (white/green) candle in uptrend</li> <li>Second Candle: Bearish (black/red) candle</li> <li>Key Feature: Both candles close at approximately the same price</li> <li>Signal: Potential bearish reversal</li> </ul>"},{"location":"indicators/patterns/cdl_meetinglines/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_meetinglines/#hypothetical-usage","title":"Hypothetical Usage","text":"<pre><code>require 'sqa/tai'\n\n# Note: Verify this pattern is available in your TA-Lib version\nopen  = [50.0, 49.5, 48.0, 47.5]\nhigh  = [50.5, 50.0, 48.5, 48.5]\nlow   = [49.5, 48.5, 47.5, 47.0]\nclose = [49.5, 48.5, 47.5, 47.5]  # Note: last two closes are equal\n\n# If available:\n# pattern = SQA::TAI.cdl_meetinglines(open, high, low, close)\n#\n# if pattern.last == 100\n#   puts \"Bullish Meeting Lines detected\"\n# elsif pattern.last == -100\n#   puts \"Bearish Meeting Lines detected\"\n# end\n</code></pre>"},{"location":"indicators/patterns/cdl_meetinglines/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_meetinglines/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish Meeting Lines pattern</li> <li>-100: Bearish Meeting Lines pattern</li> <li>0: No pattern detected</li> </ul>"},{"location":"indicators/patterns/cdl_meetinglines/#trading-implications","title":"Trading Implications","text":"<p>Bullish Meeting Lines: - Appears after downtrend - Shows bears losing control - Bulls managing to close at previous level - Suggests potential bottom formation</p> <p>Bearish Meeting Lines: - Appears after uptrend - Shows bulls losing control - Bears managing to close at previous level - Suggests potential top formation</p>"},{"location":"indicators/patterns/cdl_meetinglines/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Two-candle reversal pattern</li> <li>Reliability: Moderate (requires confirmation)</li> <li>Best Timeframe: Daily charts</li> <li>Confirmation: Wait for next candle to confirm direction</li> </ul>"},{"location":"indicators/patterns/cdl_meetinglines/#comparison-with-similar-patterns","title":"Comparison with Similar Patterns","text":""},{"location":"indicators/patterns/cdl_meetinglines/#vs-counterattack-pattern","title":"vs Counterattack Pattern","text":"<p>Meeting Lines is extremely similar to the Counterattack Pattern: - Both have similar structure - Both are two-candle reversals - Key difference: Subtle variations in how TA-Lib defines the closing price proximity</p> <p>Recommendation: Use Counterattack if Meeting Lines is not available.</p>"},{"location":"indicators/patterns/cdl_meetinglines/#vs-piercingdark-cloud-cover","title":"vs Piercing/Dark Cloud Cover","text":"<ul> <li>Meeting Lines: Closes at same level</li> <li>Piercing: Closes above midpoint of first candle</li> <li>Dark Cloud Cover: Closes below midpoint of first candle</li> </ul>"},{"location":"indicators/patterns/cdl_meetinglines/#trading-guidelines","title":"Trading Guidelines","text":""},{"location":"indicators/patterns/cdl_meetinglines/#entry-signals","title":"Entry Signals","text":"<ol> <li>Wait for pattern completion (both candles closed)</li> <li>Confirm with next candle moving in signal direction</li> <li>Check for volume increase on reversal candle</li> <li>Verify pattern appears at key support/resistance</li> </ol>"},{"location":"indicators/patterns/cdl_meetinglines/#risk-management","title":"Risk Management","text":"<ul> <li>Stop Loss: Place beyond the pattern's extreme (high for bearish, low for bullish)</li> <li>Position Sizing: Use smaller size until confirmation</li> <li>Target: Next significant support/resistance level</li> </ul>"},{"location":"indicators/patterns/cdl_meetinglines/#confirmation-techniques","title":"Confirmation Techniques","text":""},{"location":"indicators/patterns/cdl_meetinglines/#1-volume-confirmation","title":"1. Volume Confirmation","text":"<pre><code># Higher volume on second candle strengthens signal\nif pattern.last != 0 &amp;&amp; volume.last &gt; volume[-2]\n  puts \"Volume confirms pattern\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_meetinglines/#2-trend-context","title":"2. Trend Context","text":"<pre><code># Pattern more reliable when reversing established trend\nsma_50 = SQA::TAI.sma(close, period: 50)\n\nif pattern.last == 100 &amp;&amp; close.last &lt; sma_50.last\n  puts \"Bullish pattern in downtrend - stronger signal\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_meetinglines/#3-supportresistance","title":"3. Support/Resistance","text":"<pre><code># Pattern at key level increases reliability\nif pattern.last == 100 &amp;&amp; close.last &gt;= support_level * 0.99\n  puts \"Pattern at support - high probability\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_meetinglines/#see-also","title":"See Also","text":""},{"location":"indicators/patterns/cdl_meetinglines/#similar-reversal-patterns","title":"Similar Reversal Patterns","text":"<ul> <li>Counterattack - Very similar pattern</li> <li>Piercing Pattern - Bullish reversal</li> <li>Dark Cloud Cover - Bearish reversal</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_meetinglines/#pattern-resources","title":"Pattern Resources","text":"<ul> <li>Candlestick Pattern Index</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul> <p>Availability Note: This pattern may not be in all TA-Lib implementations. Consider using the Counterattack Pattern as a close alternative, or use general pattern recognition techniques described in the Pattern Recognition Guide.</p>"},{"location":"indicators/patterns/cdl_morningdojistar/","title":"CDL_MORNINGDOJISTAR (Morning Doji Star)","text":""},{"location":"indicators/patterns/cdl_morningdojistar/#overview","title":"Overview","text":"<p>The Morning Doji Star is a three-candle bullish reversal pattern that typically appears at the bottom of a downtrend. It consists of a long bearish candle, followed by a doji that gaps down, and then a long bullish candle that closes well into the body of the first candle. This pattern signals potential trend exhaustion and a shift from bearish to bullish sentiment.</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period <code>penetration</code> Float 0.3 Percentage of penetration of the third candle into the first candle's body (0.0 to 1.0)"},{"location":"indicators/patterns/cdl_morningdojistar/#parameter-details","title":"Parameter Details","text":"<p>open - Opening price for each trading period - Must be same length as high, low, and close arrays - Used to determine candle body direction and size</p> <p>high - Highest price reached during each trading period - Must be same length as other price arrays - Used to identify gaps and shadow lengths</p> <p>low - Lowest price reached during each trading period - Must be same length as other price arrays - Critical for identifying doji characteristics and gaps</p> <p>close - Closing price for each trading period - Must be same length as other price arrays - Used to determine candle body direction and completion of pattern</p> <p>penetration - Controls how far the third candle must close into the first candle's body - Default 0.3 means 30% penetration required - Higher values (e.g., 0.5) make pattern detection more strict - Lower values (e.g., 0.1) make pattern detection more lenient</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_morningdojistar/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Price data arrays\nopen  = [50.0, 48.0, 47.0, 47.5, 49.0]\nhigh  = [50.5, 48.2, 47.2, 47.6, 50.0]\nlow   = [48.0, 46.5, 46.8, 47.3, 47.4]\nclose = [48.0, 47.0, 47.0, 47.4, 49.5]\n\nresult = SQA::TAI.cdl_morningdojistar(open, high, low, close)\nputs \"Pattern Signal: #{result.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_morningdojistar/#with-custom-penetration","title":"With Custom Penetration","text":"<pre><code># More strict pattern detection with 50% penetration\nresult = SQA::TAI.cdl_morningdojistar(\n  open,\n  high,\n  low,\n  close,\n  penetration: 0.5\n)\n\n# Check for pattern detection\nif result.last == 100\n  puts \"Bullish Morning Doji Star detected!\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_morningdojistar/#real-time-pattern-monitoring","title":"Real-Time Pattern Monitoring","text":"<pre><code># Monitor multiple periods for pattern emergence\nopen  = [52.0, 50.0, 48.0, 47.0, 47.5, 49.0, 50.5]\nhigh  = [52.5, 50.5, 48.2, 47.2, 47.6, 50.0, 51.0]\nlow   = [50.0, 48.0, 46.5, 46.8, 47.3, 47.4, 49.5]\nclose = [50.0, 48.0, 47.0, 47.0, 47.4, 49.5, 50.8]\n\nresult = SQA::TAI.cdl_morningdojistar(open, high, low, close)\n\nresult.each_with_index do |signal, index|\n  if signal == 100\n    puts \"Bullish pattern detected at period #{index}\"\n    puts \"Entry: #{close[index]}, Previous low: #{low[index-1]}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_morningdojistar/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_morningdojistar/#what-it-measures","title":"What It Measures","text":"<p>The Morning Doji Star pattern measures potential reversal points at the end of bearish trends. It identifies a specific three-candle sequence that suggests sellers are losing control and buyers may be entering the market. The pattern is valuable because:</p> <ul> <li>It shows indecision (doji) after a strong bearish move, indicating seller exhaustion</li> <li>The gap down followed by a gap up demonstrates a dramatic shift in sentiment</li> <li>The strong bullish third candle confirms buyer commitment</li> <li>It provides an early warning of potential trend reversal before other indicators</li> </ul>"},{"location":"indicators/patterns/cdl_morningdojistar/#pattern-formation","title":"Pattern Formation","text":"<p>The pattern requires three consecutive candles in this specific sequence:</p> <ol> <li> <p>First Candle (Bearish): A long bearish candle showing strong selling pressure, typically at the end of a downtrend. The candle should have a substantial body with close significantly below open.</p> </li> <li> <p>Second Candle (Doji): A doji candle that gaps down from the first candle's close. The doji indicates market indecision with opening and closing prices nearly equal. This shows sellers are losing momentum.</p> </li> <li> <p>Third Candle (Bullish): A long bullish candle that gaps up from the doji and closes well into the first candle's body (controlled by the penetration parameter). This confirms buyers have taken control.</p> </li> </ol> <p>Key Characteristics: - The doji must gap away from both the first and third candles - The third candle should close at least 30% (default) into the first candle's body - The gaps demonstrate dramatic sentiment shifts - All three candles should show clear directional intent or indecision</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Returns integer values: 0 (no pattern), +100 (bullish pattern detected)</li> <li>Type: Pattern recognition, reversal indicator</li> <li>Lag: None - identifies patterns as they complete (requires three candles)</li> <li>Best Used: At the end of established downtrends, oversold conditions</li> <li>Reliability: Moderate to high when confirmed with other indicators</li> <li>Time Frame: Works on all time frames; more reliable on daily and weekly charts</li> </ul>"},{"location":"indicators/patterns/cdl_morningdojistar/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_morningdojistar/#signal-values","title":"Signal Values","text":"<p>The indicator returns specific integer values:</p> <ul> <li>+100 (Bullish Signal): Morning Doji Star pattern detected</li> <li>Indicates potential bullish reversal</li> <li>Suggests downtrend may be ending</li> <li>Buyers are overwhelming sellers</li> <li> <p>Consider long positions with confirmation</p> </li> <li> <p>0 (No Pattern): No Morning Doji Star pattern at this position</p> </li> <li>Pattern requirements not met</li> <li>Continue monitoring other indicators</li> <li>Wait for pattern completion or other signals</li> </ul>"},{"location":"indicators/patterns/cdl_morningdojistar/#pattern-strength-indicators","title":"Pattern Strength Indicators","text":"<p>Assess the reliability of the pattern by examining:</p> <ol> <li>Prior Trend Strength</li> <li>Pattern is most reliable after extended downtrends</li> <li>Multiple bearish candles before pattern increases significance</li> <li> <p>Weaker after sideways or choppy price action</p> </li> <li> <p>Doji Quality</p> </li> <li>Smaller doji body indicates stronger indecision</li> <li>Long shadows on doji show battle between buyers and sellers</li> <li> <p>Doji at support level increases pattern reliability</p> </li> <li> <p>Third Candle Penetration</p> </li> <li>Deeper penetration into first candle = stronger reversal signal</li> <li>Close above first candle's midpoint is particularly bullish</li> <li> <p>Higher volume on third candle confirms conviction</p> </li> <li> <p>Gap Sizes</p> </li> <li>Larger gaps indicate more dramatic sentiment shift</li> <li>Visible gaps on charts are more psychologically significant</li> <li>Gap up on third candle especially important</li> </ol>"},{"location":"indicators/patterns/cdl_morningdojistar/#context-considerations","title":"Context Considerations","text":"<ul> <li>Location: Most effective at established support levels or after capitulation</li> <li>Volume: Increasing volume on third candle confirms reversal strength</li> <li>Market Condition: Works best in trending markets, less reliable in ranging markets</li> <li>Time Frame: Higher time frames (daily, weekly) provide more reliable signals</li> </ul>"},{"location":"indicators/patterns/cdl_morningdojistar/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_morningdojistar/#buy-signals","title":"Buy Signals","text":"<p>Primary conditions for entering long positions:</p> <ol> <li>Pattern Confirmation</li> <li>All three candles meet Morning Doji Star criteria</li> <li>Signal value = +100</li> <li> <p>Doji clearly gaps from both first and third candles</p> </li> <li> <p>Entry Criteria</p> </li> <li>Enter on close of third candle or</li> <li>Wait for confirmation: enter on break above third candle's high</li> <li> <p>More conservative: wait for next candle to close higher</p> </li> <li> <p>Additional Confirmation Factors</p> </li> <li>Pattern forms at known support level</li> <li>RSI or other oscillators show oversold conditions</li> <li>Volume increases on third candle</li> <li>Prior downtrend was extended and clear</li> </ol> <p>Example Scenario: <pre><code># After extended downtrend, pattern detected at support\nif result.last == 100 &amp;&amp;\n   rsi.last &lt; 30 &amp;&amp;  # Oversold\n   close.last &gt; support_level &amp;&amp;  # Above support\n   volume.last &gt; volume[-2]  # Increasing volume\n\n  entry_price = close.last\n  stop_loss = low[-2] - (atr.last * 1.5)  # Below doji low\n  target = entry_price + ((entry_price - stop_loss) * 2)  # 2:1 reward/risk\n\n  puts \"BUY Signal: Enter at #{entry_price}\"\n  puts \"Stop Loss: #{stop_loss}\"\n  puts \"Target: #{target}\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_morningdojistar/#position-management","title":"Position Management","text":"<p>Stop Loss Placement: - Conservative: Below the low of the doji (second candle) - Aggressive: Below the low of the third candle - ATR-based: 1.5-2x ATR below entry point</p> <p>Take Profit Targets: - First target: Recent resistance level or 1:1 reward/risk - Second target: Next major resistance or 2:1 reward/risk - Trailing stop: After first target hit, trail with 2x ATR</p> <p>Position Sizing: - Risk 1-2% of capital per trade - Calculate position size based on stop loss distance - Reduce size if pattern appears in choppy/ranging market</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#exit-signals","title":"Exit Signals","text":"<p>Conditions for closing long positions:</p> <ol> <li>Stop Loss Triggers</li> <li>Price closes below stop loss level</li> <li>Subsequent bearish engulfing pattern forms</li> <li> <p>Break below doji's low with volume</p> </li> <li> <p>Take Profit Conditions</p> </li> <li>Price reaches predetermined target levels</li> <li>Strong resistance level reached</li> <li> <p>Bearish reversal pattern forms at resistance</p> </li> <li> <p>Pattern Failure Signs</p> </li> <li>Fourth candle closes below third candle with high volume</li> <li>Price fails to move higher after pattern</li> <li>Bearish candlestick pattern forms immediately after</li> </ol>"},{"location":"indicators/patterns/cdl_morningdojistar/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_morningdojistar/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>The Morning Doji Star works best in these conditions:</p> <p>Market Conditions: - Clear downtrend preceding the pattern (at least 5-10 bearish candles) - Oversold conditions per momentum indicators - Market approaching major support levels - Low volatility on doji, increasing volatility on third candle</p> <p>Time Frames: - Daily charts: Most reliable and widely recognized - Weekly charts: Stronger signals, fewer occurrences - 4-hour charts: Good for swing trading - Intraday (&lt; 1 hour): Less reliable, more false signals</p> <p>Asset Classes: - Stocks: Highly effective, especially large-cap stocks - Forex: Works well on major pairs with sufficient liquidity - Commodities: Reliable on liquid contracts - Cryptocurrencies: Can work but volatility creates false signals</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Enhance reliability by confirming with complementary indicators:</p> <p>With Trend Indicators: - Moving Averages: Pattern near 200-day MA support increases reliability - MACD: Bullish divergence or histogram turning positive confirms reversal - ADX: Low ADX suggests trend change possible; pattern helps identify direction</p> <p>With Momentum Indicators: - RSI: Pattern + RSI &lt; 30 = high probability reversal - Stochastic: Oversold stochastic crossing up confirms pattern - CCI: Emerging from oversold territory strengthens signal</p> <p>With Volume Indicators: - Volume: Third candle volume &gt; average confirms conviction - OBV: Rising OBV confirms accumulation despite falling prices - Volume Profile: Pattern at high volume support node more significant</p> <p>With Support/Resistance: - Fibonacci Retracements: Pattern at 50% or 61.8% level highly significant - Pivot Points: Pattern at daily/weekly pivot support adds conviction - Horizontal Support: Historical support level validates reversal potential</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid these mistakes when trading Morning Doji Star patterns:</p> <ol> <li>Ignoring Prior Trend</li> <li>Pattern requires established downtrend to be valid</li> <li>Appearing in uptrend or sideways market reduces reliability</li> <li> <p>Always confirm preceding bearish trend over multiple periods</p> </li> <li> <p>Trading Without Confirmation</p> </li> <li>Don't enter on second candle expecting doji</li> <li>Wait for third candle completion</li> <li> <p>Consider waiting for fourth candle to confirm reversal</p> </li> <li> <p>Poor Risk Management</p> </li> <li>Pattern can fail; always use stop losses</li> <li>Don't risk more than 2% of capital on single trade</li> <li> <p>Account for gap risk, especially in volatile markets</p> </li> <li> <p>Neglecting Volume Analysis</p> </li> <li>Low volume on third candle suggests weak conviction</li> <li>Declining volume through pattern reduces reliability</li> <li> <p>Always check volume confirms price action</p> </li> <li> <p>Time Frame Mismatch</p> </li> <li>Using pattern on 5-minute chart with daily trend analysis</li> <li>Ensure time frame of pattern matches trading style</li> <li> <p>Higher time frames provide more reliable signals</p> </li> <li> <p>Over-optimization of Penetration Parameter</p> </li> <li>Don't adjust penetration based on historical data mining</li> <li>Stick to default 0.3 or adjust slightly based on asset volatility</li> <li>Over-optimization leads to curve fitting and poor future performance</li> </ol>"},{"location":"indicators/patterns/cdl_morningdojistar/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>Choose optimal parameters based on trading style:</p> <p>Short-term Trading (Day Trading): - Use 5-15 minute charts cautiously - Penetration: 0.4-0.5 (more strict) to reduce false signals - Require additional confirmation (volume, momentum) - Tighter stops due to noise in intraday data</p> <p>Medium-term Trading (Swing Trading): - Use 4-hour to daily charts (recommended) - Penetration: 0.3 (default) works well - Balance between sensitivity and reliability - Hold positions for multiple days to weeks</p> <p>Long-term Trading (Position Trading): - Use daily to weekly charts - Penetration: 0.2-0.3 (slightly looser) to catch all major reversals - Fewer signals but higher reliability - Combine with fundamental analysis</p> <p>Backtesting Guidelines: - Test default parameters first (penetration = 0.3) - Vary penetration from 0.2 to 0.5 in 0.1 increments - Evaluate win rate, profit factor, and drawdown - Choose parameters that work across multiple assets - Avoid parameters that work for only one specific period</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data showing downtrend\nopen  = [55.0, 54.0, 53.0, 51.5, 50.0, 48.5, 47.0, 47.5, 49.0, 50.5, 51.0]\nhigh  = [55.5, 54.5, 53.5, 52.0, 50.5, 49.0, 47.2, 47.6, 50.0, 51.0, 51.5]\nlow   = [54.0, 53.0, 51.5, 50.0, 48.5, 47.0, 46.8, 47.3, 47.4, 49.5, 50.5]\nclose = [54.0, 53.0, 51.5, 50.0, 48.5, 47.0, 47.0, 47.4, 49.5, 50.8, 51.2]\n\n# Calculate pattern with default penetration\npattern = SQA::TAI.cdl_morningdojistar(open, high, low, close)\n\n# Calculate supporting indicators\nrsi = SQA::TAI.rsi(close, time_period: 14)\nsma_50 = SQA::TAI.sma(close, time_period: 50)\n\n# Analyze most recent signal\ncurrent_signal = pattern.last\nprevious_signals = pattern[-4..-2]\n\nif current_signal == 100\n  puts \"=\" * 50\n  puts \"MORNING DOJI STAR PATTERN DETECTED\"\n  puts \"=\" * 50\n\n  # Pattern details\n  puts \"\\nPattern Structure:\"\n  puts \"  First Candle (Bearish): Open #{open[-3]}, Close #{close[-3]}\"\n  puts \"  Doji Candle: Open #{open[-2]}, Close #{close[-2]}\"\n  puts \"  Third Candle (Bullish): Open #{open[-1]}, Close #{close[-1]}\"\n\n  # Calculate pattern metrics\n  first_body = (open[-3] - close[-3]).abs\n  doji_body = (open[-2] - close[-2]).abs\n  third_body = (close[-1] - open[-1]).abs\n  penetration_pct = (close[-1] - close[-3]) / first_body\n\n  puts \"\\nPattern Metrics:\"\n  puts \"  First candle body: #{first_body.round(2)}\"\n  puts \"  Doji body: #{doji_body.round(2)}\"\n  puts \"  Third candle body: #{third_body.round(2)}\"\n  puts \"  Penetration: #{(penetration_pct * 100).round(1)}%\"\n\n  # Confirmation factors\n  puts \"\\nConfirmation Analysis:\"\n  puts \"  Current RSI: #{rsi.last.round(2)}\"\n  puts \"  RSI Status: #{rsi.last &lt; 30 ? 'OVERSOLD \u2713' : 'Not oversold'}\"\n  puts \"  50-day SMA: #{sma_50.last.round(2)}\"\n  puts \"  Price vs SMA: #{close.last &lt; sma_50.last ? 'Below (reversal setup) \u2713' : 'Above'}\"\n\n  # Trend confirmation\n  downtrend_confirmed = close[-6..-4].all? { |c| c &gt; close[-3] }\n  puts \"  Prior downtrend: #{downtrend_confirmed ? 'Confirmed \u2713' : 'Weak'}\"\n\n  # Trading decision\n  puts \"\\nTrading Decision:\"\n\n  if rsi.last &lt; 35 &amp;&amp; close.last &lt; sma_50.last &amp;&amp; downtrend_confirmed\n    # Calculate position parameters\n    entry = close.last\n    stop_loss = low[-2] * 0.98  # 2% below doji low\n    risk_amount = entry - stop_loss\n    target_1 = entry + (risk_amount * 1.5)  # 1.5:1 R/R\n    target_2 = entry + (risk_amount * 3.0)  # 3:1 R/R\n\n    puts \"  STRONG BUY SIGNAL - Multiple confirmations\"\n    puts \"\\nTrade Setup:\"\n    puts \"  Entry Price: $#{entry.round(2)}\"\n    puts \"  Stop Loss: $#{stop_loss.round(2)} (Risk: $#{risk_amount.round(2)})\"\n    puts \"  Target 1 (50% position): $#{target_1.round(2)}\"\n    puts \"  Target 2 (50% position): $#{target_2.round(2)}\"\n    puts \"  Risk/Reward: 1:1.5 and 1:3\"\n\n    # Position sizing example (for $10,000 account, 2% risk)\n    account_size = 10000\n    risk_per_trade = account_size * 0.02\n    position_size = (risk_per_trade / risk_amount).to_i\n\n    puts \"\\nPosition Sizing (2% risk on $#{account_size} account):\"\n    puts \"  Shares to buy: #{position_size}\"\n    puts \"  Total position value: $#{(position_size * entry).round(2)}\"\n    puts \"  Maximum risk: $#{risk_per_trade.round(2)}\"\n\n  elsif rsi.last &lt; 40\n    puts \"  MODERATE BUY SIGNAL - Consider smaller position\"\n    puts \"  Suggestion: Wait for additional confirmation or enter with 50% position\"\n\n  else\n    puts \"  WEAK SIGNAL - Pattern present but confirmations lacking\"\n    puts \"  Suggestion: Monitor for additional confirmation before entry\"\n  end\n\nelsif pattern[-2] == 100\n  puts \"Pattern detected in previous period - Monitor position\"\n  puts \"Current price: #{close.last}\"\n  puts \"Entry was: #{close[-2]}\"\n  puts \"Profit/Loss: #{((close.last - close[-2]) / close[-2] * 100).round(2)}%\"\n\nelse\n  # No pattern - continue monitoring\n  if close.last &lt; close[-1] &amp;&amp; close[-1] &lt; close[-2]\n    puts \"Downtrend continuing - Watch for Morning Doji Star formation\"\n    puts \"Current price: #{close.last}\"\n    puts \"RSI: #{rsi.last.round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_morningdojistar/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_morningdojistar/#similar-patterns","title":"Similar Patterns","text":"<ul> <li> <p>Morning Star: Similar three-candle bullish reversal pattern but with a small real body instead of doji on second candle. Morning Doji Star is generally considered slightly more reliable due to the doji showing stronger indecision.</p> </li> <li> <p>Abandoned Baby: More rare and reliable version with gaps on both sides of the doji. Requires complete gap isolation of middle candle, making it stronger but less frequent.</p> </li> <li> <p>Piercing Pattern: Two-candle bullish reversal pattern. Simpler than Morning Doji Star but may provide earlier signals with potentially lower reliability.</p> </li> </ul>"},{"location":"indicators/patterns/cdl_morningdojistar/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li> <p>Bullish Engulfing: Can follow Morning Doji Star to provide additional confirmation of reversal. The combination of both patterns significantly increases probability of successful reversal.</p> </li> <li> <p>Hammer: Single candle pattern that can appear as the third candle in Morning Doji Star. Recognizing hammer characteristics strengthens the overall signal.</p> </li> <li> <p>Evening Doji Star: The bearish counterpart to Morning Doji Star, appearing at tops. Understanding both patterns provides complete reversal recognition capability.</p> </li> </ul>"},{"location":"indicators/patterns/cdl_morningdojistar/#pattern-family","title":"Pattern Family","text":"<p>The Morning Doji Star belongs to the Star Pattern Family:</p> <ul> <li>Morning Star: Uses small real body instead of doji</li> <li>Morning Doji Star: Features doji for stronger indecision signal</li> <li>Evening Star: Bearish reversal at tops</li> <li>Evening Doji Star: Bearish reversal with doji</li> </ul> <p>Evolutionary Relationship: The Morning Doji Star is considered an evolution of the Morning Star pattern, with the doji providing a more specific indication of market indecision. Japanese candlestick analysis traditionally views the doji as a more significant reversal indicator than a small real body.</p> <p>When to prefer Morning Doji Star: - When seeking higher probability (though less frequent) reversal signals - In markets where doji patterns have proven historically reliable - When risk management requires high-confidence entry signals</p> <p>When to use Morning Star instead: - For more frequent trading opportunities - In less liquid markets where true dojis rarely form - When backtesting shows Morning Star provides better results for specific asset</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_morningdojistar/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Enhance pattern reliability using multiple timeframes:</p> <p>Primary Timeframe Strategy: 1. Identify Morning Doji Star on daily chart (primary trading timeframe) 2. Confirm weekly chart shows downtrend and oversold conditions 3. Use 4-hour chart for precise entry timing after pattern completion 4. Monitor 1-hour chart for early exit signals if pattern fails</p> <p>Timeframe Confluence: - Pattern on daily + weekly chart = very high probability signal - Pattern on daily, waiting for 4-hour confirmation = reduced risk entry - Pattern on 4-hour aligned with daily support = good swing trade setup</p> <p>Example Multi-Timeframe Approach: <pre><code># Check daily for pattern\ndaily_pattern = SQA::TAI.cdl_morningdojistar(daily_open, daily_high, daily_low, daily_close)\n\n# Confirm weekly trend\nweekly_sma = SQA::TAI.sma(weekly_close, time_period: 20)\nweekly_downtrend = weekly_close.last &lt; weekly_sma.last\n\n# Entry on 4-hour confirmation\nif daily_pattern.last == 100 &amp;&amp; weekly_downtrend\n  # Monitor 4-hour chart for entry trigger\n  four_hour_pattern = SQA::TAI.cdl_morningdojistar(h4_open, h4_high, h4_low, h4_close)\n  # Enter when 4-hour also shows pattern or bullish confirmation\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_morningdojistar/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern behavior varies by market condition:</p> <p>Trending Markets (ADX &gt; 25): - Pattern most reliable after strong trends - Higher success rate in established downtrends - Use standard penetration (0.3) and standard confirmation</p> <p>Ranging Markets (ADX &lt; 20): - Pattern less reliable, many false signals - Increase penetration to 0.4-0.5 for stricter detection - Require additional confirmation from oscillators - Consider reducing position size</p> <p>High Volatility (ATR increasing): - Gaps more common, patterns form more frequently - May need wider stops to avoid premature exit - Pattern completion may span more time - Confirm with volume to separate noise from signal</p> <p>Low Volatility (ATR decreasing): - True gaps less likely, doji may be weak - Pattern may signal imminent volatility expansion - Earlier entry can capture larger moves - Tighter stops appropriate</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#statistical-validation","title":"Statistical Validation","text":"<p>Understanding pattern reliability through statistical analysis:</p> <p>Historical Success Rates: - Academic studies show 60-65% success rate in trending markets - Success rate drops to 45-50% in ranging markets - Daily timeframe shows better results than intraday - Confirmation with RSI &lt; 30 increases success to 70-75%</p> <p>Backtesting Considerations: <pre><code># Example backtesting framework\ndef backtest_morning_doji_star(price_data, start_date, end_date)\n  trades = []\n\n  price_data.each_with_index do |data, i|\n    next if i &lt; 3  # Need at least 3 candles\n\n    pattern = SQA::TAI.cdl_morningdojistar(\n      data[:open], data[:high], data[:low], data[:close]\n    )\n\n    if pattern[i] == 100\n      entry = data[:close][i]\n      stop = data[:low][i-1] * 0.98\n      target = entry + ((entry - stop) * 2)\n\n      # Track trade through subsequent data\n      trades &lt;&lt; {\n        entry: entry,\n        stop: stop,\n        target: target,\n        date: data[:date][i]\n      }\n    end\n  end\n\n  # Analyze results\n  analyze_trades(trades)\nend\n</code></pre></p> <p>Key Metrics to Track: - Win rate (% of profitable trades) - Average win vs average loss - Profit factor (gross profit / gross loss) - Maximum drawdown - Sharpe ratio - Pattern frequency vs opportunity cost</p> <p>Optimization Tips: - Test across multiple assets and market conditions - Avoid over-fitting to specific time periods - Include transaction costs in calculations - Account for slippage, especially on gaps - Consider different penetration parameters systematically</p>"},{"location":"indicators/patterns/cdl_morningdojistar/#references","title":"References","text":"<ul> <li> <p>\"Japanese Candlestick Charting Techniques\" by Steve Nison: The definitive Western text on candlestick patterns, includes detailed coverage of Morning Doji Star pattern with historical context and trading applications.</p> </li> <li> <p>\"Technical Analysis of the Financial Markets\" by John Murphy: Comprehensive technical analysis reference with section on candlestick patterns and their integration with Western technical analysis.</p> </li> <li> <p>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski: Statistical analysis of candlestick pattern performance, including success rates and failure rates for Morning Doji Star in various market conditions.</p> </li> <li> <p>Original Japanese Candlestick Research: Pattern originated in 18<sup>th</sup> century Japanese rice trading, documented in various historical texts on Sakata's Five Methods.</p> </li> <li> <p>Online Resources:</p> </li> <li>StockCharts.com Candlestick Pattern Reference</li> <li>Investopedia Technical Analysis Guide</li> <li>TradingView Pattern Recognition Tools</li> </ul>"},{"location":"indicators/patterns/cdl_morningdojistar/#see-also","title":"See Also","text":"<ul> <li>Candlestick Patterns Overview</li> <li>Evening Doji Star - Bearish Counterpart</li> <li>Morning Star - Similar Pattern</li> <li>Doji - Foundation Pattern</li> <li>Pattern Recognition Strategy Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/","title":"CDL_MORNINGSTAR (Morning Star)","text":""},{"location":"indicators/patterns/cdl_morningstar/#overview","title":"Overview","text":"<p>The Morning Star is a three-candle bullish reversal pattern that appears at the bottom of a downtrend, signaling a potential trend change. Named after the planet Venus that appears before sunrise, this pattern represents the \"dawn\" of a new uptrend. The pattern consists of a long bearish candle, followed by a small-bodied candle (star) that gaps down, and completed by a long bullish candle that closes well into the first candle's body.</p>"},{"location":"indicators/patterns/cdl_morningstar/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices <code>penetration</code> Float 0.3 Minimum penetration into first candle's body (30%)"},{"location":"indicators/patterns/cdl_morningstar/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Minimum 3 candles required for pattern detection - More historical data provides better context for trend analysis</p> <p>penetration - Controls how far the third candle must close into the first candle's body - Default 0.3 means 30% penetration required - Higher values (0.5) create stricter, more reliable signals - Lower values (0.2) create more frequent but potentially less reliable signals</p>"},{"location":"indicators/patterns/cdl_morningstar/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_morningstar/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.0, 47.5, 47.0, 48.5]\nhigh =  [50.5, 49.5, 48.0, 47.5, 49.5]\nlow =   [49.5, 47.0, 46.5, 46.5, 47.5]\nclose = [49.0, 47.5, 47.0, 47.2, 49.0]\n\npattern = SQA::TAI.cdl_morningstar(open, high, low, close)\n\nputs \"Morning Star signal: #{pattern.last}\"\n# Output: 100 (bullish pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_morningstar/#with-trend-analysis","title":"With Trend Analysis","text":"<pre><code>require 'sqa/tai'\n\n# Historical price data showing downtrend\nopen =  [55.0, 54.0, 53.0, 52.0, 51.0, 50.0, 49.0, 47.5, 47.0, 48.5]\nhigh =  [55.5, 54.5, 53.5, 52.5, 51.5, 50.5, 49.5, 48.0, 47.5, 49.5]\nlow =   [54.0, 53.0, 52.0, 51.0, 50.0, 49.5, 47.0, 46.5, 46.5, 47.5]\nclose = [54.0, 53.0, 52.0, 51.0, 50.0, 49.0, 47.5, 47.0, 47.2, 49.0]\n\npattern = SQA::TAI.cdl_morningstar(open, high, low, close)\n\n# Check for pattern at end of downtrend\nif pattern.last == 100\n  puts \"BULLISH REVERSAL: Morning Star detected\"\n  puts \"First candle (bearish): Close #{close[-3]}\"\n  puts \"Star candle (small): Close #{close[-2]}\"\n  puts \"Third candle (bullish): Close #{close[-1]}\"\n  puts \"Potential entry: #{close.last}\"\n  puts \"Stop loss: #{low[-3..1].min}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_morningstar/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_morningstar/#what-it-measures","title":"What It Measures","text":"<p>The Morning Star pattern measures: - Reversal Potential: Shift from selling pressure to buying pressure - Market Psychology: Transition from bearish sentiment to bullish sentiment - Support Formation: Price finding a bottom and rejecting lower levels - Momentum Shift: Bears losing control, bulls gaining strength</p> <p>The pattern answers: \"Is the downtrend exhausted and ready to reverse?\"</p>"},{"location":"indicators/patterns/cdl_morningstar/#pattern-structure","title":"Pattern Structure","text":"<p>The Morning Star consists of three distinct candles:</p> <ol> <li>First Candle (Bearish):</li> <li>Long red/black candle continuing the downtrend</li> <li>Represents final selling pressure</li> <li> <p>Confirms the existing bearish momentum</p> </li> <li> <p>Second Candle (Star):</p> </li> <li>Small-bodied candle (can be any color)</li> <li>Gaps down from the first candle's close</li> <li>Indecision candle showing momentum loss</li> <li> <p>Can be a doji, spinning top, or small real body</p> </li> <li> <p>Third Candle (Bullish):</p> </li> <li>Long green/white candle</li> <li>Closes well above the star candle</li> <li>Penetrates at least 30% into the first candle's body</li> <li>Confirms the reversal with strong buying pressure</li> </ol>"},{"location":"indicators/patterns/cdl_morningstar/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Three-candle bullish reversal pattern</li> <li>Trend Context: Must appear in a downtrend</li> <li>Reliability: High (especially with confirmation)</li> <li>Frequency: Moderately rare (appears 1-2% of the time)</li> <li>Best Timeframes: Daily, 4-hour charts (less reliable on very short timeframes)</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_morningstar/#signal-values","title":"Signal Values","text":"<p>The pattern returns specific signal values:</p> <ul> <li>+100: Perfect Morning Star pattern detected</li> <li>Three-candle sequence complete</li> <li>All criteria met (gap, penetration, candle sizes)</li> <li> <p>Bullish reversal signal</p> </li> <li> <p>0: No pattern detected</p> </li> <li>Pattern criteria not met</li> <li>Continue monitoring for pattern formation</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#pattern-recognition-criteria","title":"Pattern Recognition Criteria","text":"<p>A valid Morning Star requires:</p> <ol> <li>Downtrend Context: Must occur after a price decline</li> <li>First Candle: Long bearish candle (large real body)</li> <li>Gap Down: Second candle gaps below first candle's close</li> <li>Small Body: Second candle has small real body (&lt; 30% of first candle)</li> <li>Gap Up: Third candle gaps above second candle</li> <li>Bullish Close: Third candle closes into first candle's body (&gt;30% penetration)</li> <li>Long Body: Third candle has substantial real body</li> </ol>"},{"location":"indicators/patterns/cdl_morningstar/#signal-interpretation","title":"Signal Interpretation","text":"<p>Strong Signals (High Probability): - Pattern appears after extended downtrend (20+ days) - Second candle is a doji (maximum indecision) - Third candle closes above the midpoint of first candle - Pattern confirmed by high volume on third candle - Support level nearby confirms the reversal zone</p> <p>Moderate Signals: - Standard pattern with 30-50% penetration - Second candle is small-bodied but not a doji - Moderate volume increase on third candle</p> <p>Weak Signals (Use Caution): - Pattern appears early in downtrend - Minimal penetration (&lt;30%) - Third candle's body is relatively small - No volume confirmation</p>"},{"location":"indicators/patterns/cdl_morningstar/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_morningstar/#buy-signals","title":"Buy Signals","text":"<p>Primary Entry Signal: When Morning Star pattern completes with +100 signal:</p> <ol> <li>Confirmation Entry: Wait for next candle to close above the third candle's high</li> <li>Aggressive Entry: Enter at close of third candle</li> <li>Conservative Entry: Wait for pattern confirmation with RSI &gt; 30 or above key support</li> </ol> <p>Example Scenario: <pre><code>Stock in downtrend from $60 to $47 over 3 weeks.\nMorning Star forms:\n- Day 1: Close $47 (long red candle)\n- Day 2: Close $46.80 (small doji, gaps down)\n- Day 3: Close $48.50 (long green candle, 50% penetration)\n\nEntry: $48.50-$49.00\nStop Loss: $46.20 (below pattern low)\nTarget 1: $51.00 (recent resistance)\nTarget 2: $54.00 (Fibonacci retracement)\nRisk/Reward: 1:2.5\n</code></pre></p>"},{"location":"indicators/patterns/cdl_morningstar/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Strengthen the signal with:</p> <ol> <li>Volume Confirmation: Volume increases on third candle (20%+ above average)</li> <li>RSI Confirmation: RSI crossing above 30 from oversold territory</li> <li>Support Level: Pattern forms at known support or previous resistance</li> <li>Trend Indicators: MACD showing bullish divergence or crossover</li> <li>Next Candle: Following candle closes higher, confirming bullish momentum</li> </ol>"},{"location":"indicators/patterns/cdl_morningstar/#false-signal-recognition","title":"False Signal Recognition","text":"<p>Avoid these weak patterns:</p> <ul> <li>Shallow Penetration: Third candle barely enters first candle's body</li> <li>Small Third Candle: Bullish candle lacks conviction (small body)</li> <li>No Gap: Second candle doesn't gap away from first or third</li> <li>Resistance Overhead: Strong resistance level immediately above pattern</li> <li>Weak Volume: No volume increase on the reversal candle</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_morningstar/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Morning Star works best in:</p> <ul> <li>Market Conditions: After extended downtrends with exhausted selling</li> <li>Timeframes: Daily charts (most reliable), 4-hour charts (good), 1-hour charts (less reliable)</li> <li>Asset Classes: Stocks and forex (excellent), cryptocurrencies (good but volatile)</li> <li>Volatility: Normal to low volatility environments (high volatility creates false signals)</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended combinations:</p> <ul> <li>With Trend Indicators: Confirm downtrend with 50/200-day SMA before pattern</li> <li>With Oscillators: RSI oversold (&lt;30) adds confirmation to reversal</li> <li>With Volume: Volume spike on third candle validates buying pressure</li> <li>With Support/Resistance: Pattern at key support level significantly more reliable</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li>Trading Without Context: Pattern must occur in established downtrend, not consolidation</li> <li>Ignoring Volume: Low volume patterns have higher failure rates</li> <li>Premature Entry: Entering before third candle completes risks invalidation</li> <li>Missing Overhead Resistance: Check for nearby resistance that could stop the rally</li> <li>Over-trading: Morning Stars are relatively rare; don't force the pattern</li> </ol>"},{"location":"indicators/patterns/cdl_morningstar/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Proper risk management:</p> <ul> <li>Stop Loss Placement: Below the low of the three-candle pattern (typically second candle)</li> <li>Position Sizing: Risk 1-2% of capital per trade</li> <li>Profit Targets:</li> <li>First target: Recent swing high or resistance level (1.5-2R)</li> <li>Second target: Major resistance or Fibonacci level (2.5-3R)</li> <li>Trailing Stop: After 1:1 reward, trail stop to breakeven</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario with Morning Star:</p> <pre><code>require 'sqa/tai'\n\n# Real-world downtrend scenario\nhistorical_data = {\n  open:  [62.0, 60.5, 59.0, 57.5, 56.0, 54.5, 53.0, 51.5, 50.0, 48.5, 47.0, 46.8, 47.5],\n  high:  [62.5, 61.0, 59.5, 58.0, 56.5, 55.0, 53.5, 52.0, 50.5, 49.0, 47.5, 47.5, 48.5],\n  low:   [60.0, 59.0, 57.5, 56.0, 54.5, 53.0, 51.5, 50.0, 48.5, 47.0, 45.5, 45.8, 46.5],\n  close: [60.5, 59.0, 57.5, 56.0, 54.5, 53.0, 51.5, 50.0, 48.5, 47.0, 45.8, 46.0, 48.0]\n}\n\n# Calculate pattern\npattern = SQA::TAI.cdl_morningstar(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\n# Calculate supporting indicators\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nsma_50 = SQA::TAI.sma(historical_data[:close], period: 10)  # Using shorter period for example\n\n# Analyze the signal\nif pattern.last == 100\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low][-3..-1].min\n  first_candle_high = historical_data[:high][-3]\n\n  puts \"=\" * 50\n  puts \"MORNING STAR PATTERN DETECTED\"\n  puts \"=\" * 50\n\n  # Pattern details\n  puts \"\\nPattern Structure:\"\n  puts \"1st Candle (Bearish): O:#{historical_data[:open][-3]} C:#{historical_data[:close][-3]}\"\n  puts \"2nd Candle (Star):    O:#{historical_data[:open][-2]} C:#{historical_data[:close][-2]}\"\n  puts \"3rd Candle (Bullish): O:#{historical_data[:open][-1]} C:#{historical_data[:close][-1]}\"\n\n  # Confirmation checks\n  puts \"\\nConfirmation Analysis:\"\n  puts \"\u2713 Downtrend established: Price down from #{historical_data[:close][0]} to #{pattern_low}\"\n  puts \"\u2713 RSI: #{rsi.last.round(2)} #{'(OVERSOLD - Strong confirmation)' if rsi.last &lt; 35}\"\n  puts \"\u2713 Pattern penetration: #{((historical_data[:close][-1] - historical_data[:close][-3]).abs / (historical_data[:open][-3] - historical_data[:close][-3]).abs * 100).round(1)}%\"\n\n  # Trading recommendation\n  puts \"\\nTrading Setup:\"\n  puts \"Entry Price: #{current_price} (on close of 3rd candle)\"\n  puts \"Stop Loss: #{(pattern_low * 0.995).round(2)} (below pattern low)\"\n  puts \"Target 1: #{first_candle_high.round(2)} (top of first candle)\"\n  puts \"Target 2: #{(first_candle_high * 1.05).round(2)} (extended target)\"\n\n  risk = current_price - (pattern_low * 0.995)\n  reward_1 = first_candle_high - current_price\n  reward_2 = (first_candle_high * 1.05) - current_price\n\n  puts \"\\nRisk/Reward Analysis:\"\n  puts \"Risk per share: $#{risk.round(2)}\"\n  puts \"Reward to Target 1: $#{reward_1.round(2)} (#{(reward_1/risk).round(2)}:1)\"\n  puts \"Reward to Target 2: $#{reward_2.round(2)} (#{(reward_2/risk).round(2)}:1)\"\n\n  puts \"\\nRecommendation: #{(reward_1/risk) &gt; 2 ? 'STRONG BUY' : 'MODERATE BUY'}\"\n  puts \"=\"  * 50\nelse\n  puts \"No Morning Star pattern detected. Continue monitoring.\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_morningstar/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_morningstar/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Evening Star: Bearish counterpart to Morning Star. Use Evening Star at top of uptrends, Morning Star at bottom of downtrends.</li> <li>Morning Doji Star: Variation with doji as second candle. More reliable but less frequent than standard Morning Star.</li> <li>Three White Soldiers: Another bullish reversal but requires three consecutive bullish candles.</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI: Use to confirm oversold conditions. Morning Star with RSI &lt;30 is highly reliable.</li> <li>MACD: Bullish MACD crossover with Morning Star provides strong confirmation.</li> <li>Volume (OBV): Rising volume on third candle confirms buying pressure.</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#pattern-family","title":"Pattern Family","text":"<p>Morning Star belongs to the Star pattern family: - Morning Star: Bullish reversal at downtrend bottom - Evening Star: Bearish reversal at uptrend top - Doji Star: Variations with doji candles (stronger indecision) - Abandoned Baby: Rare variation with gaps on both sides of star</p>"},{"location":"indicators/patterns/cdl_morningstar/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_morningstar/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Strengthen Morning Star signals with multiple timeframes:</p> <ul> <li>Higher Timeframe (Weekly): Confirm overall downtrend context</li> <li>Trading Timeframe (Daily): Identify Morning Star pattern</li> <li>Lower Timeframe (4H): Fine-tune entry after pattern confirmation</li> </ul> <p>Example: Morning Star on daily chart after 3-month downtrend + 4-hour chart showing bullish momentum = very high probability setup.</p>"},{"location":"indicators/patterns/cdl_morningstar/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Morning Star reliability varies by market condition:</p> <ul> <li>Bear Markets: Most reliable (60-70% success rate). Downtrends provide ideal context.</li> <li>Bull Markets: Less reliable (45-55% success rate). Downtrends are shallow corrections.</li> <li>Ranging Markets: Moderate reliability (50-60%). Watch for true trend exhaustion vs. consolidation.</li> <li>High Volatility: Lower reliability. Gaps and long candles are common, creating false patterns.</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#statistical-validation","title":"Statistical Validation","text":"<p>Morning Star performance metrics:</p> <ul> <li>Success Rate: 60-65% when properly confirmed (50-55% without confirmation)</li> <li>Average Gain: 5-8% within 1-2 weeks of pattern completion</li> <li>Risk/Reward: Typically 1:2 to 1:3 with proper stop loss placement</li> <li>False Signal Rate: 35-40%, higher in ranging or volatile markets</li> <li>Best Markets: Most reliable in stocks and forex, less reliable in crypto</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991) - Original English publication of candlestick patterns</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008) - Statistical analysis of pattern performance</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006) - Comprehensive pattern interpretation guide</li> <li>StockCharts: Morning Star Pattern</li> <li>Investopedia: Morning Star Candlestick</li> </ul>"},{"location":"indicators/patterns/cdl_morningstar/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_onneck/","title":"CDL_ONNECK (On-Neck Pattern)","text":""},{"location":"indicators/patterns/cdl_onneck/#overview","title":"Overview","text":"<p>The On-Neck pattern is a two-candle bearish continuation pattern that appears during a downtrend. It consists of a long black candle followed by a white candle that closes at or slightly below the low of the previous candle. This pattern is similar to the In-Neck pattern but with the second candle closing even lower, indicating stronger selling pressure and a higher probability of downtrend continuation.</p>"},{"location":"indicators/patterns/cdl_onneck/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_onneck/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify the upper range of price movement - Helps determine pattern validity</p> <p>low - Array of low prices for each period - Critical for identifying the \"on-neck\" line where second candle closes - Used to measure support breakdown</p> <p>close - Array of closing prices for each period - Used to determine candle color and body size - Essential for pattern recognition</p>"},{"location":"indicators/patterns/cdl_onneck/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_onneck/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data showing downtrend with On-Neck pattern\nopen =  [50.00, 48.50, 47.00, 46.70]\nhigh =  [50.20, 48.80, 47.20, 47.40]\nlow =   [48.30, 46.90, 46.70, 46.50]\nclose = [48.50, 47.00, 46.70, 46.65]\n\npattern = SQA::TAI.cdl_onneck(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n# 0 = no pattern, -100 = bearish continuation\n</code></pre>"},{"location":"indicators/patterns/cdl_onneck/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for bearish continuation signals\npattern.each_with_index do |signal, idx|\n  if signal == -100\n    puts \"Bearish On-Neck pattern at index #{idx}\"\n    puts \"Price: #{close[idx]}, strong downtrend continuation expected\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_onneck/#combining-with-support-levels","title":"Combining with Support Levels","text":"<pre><code># Use with support/resistance for confirmation\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_onneck(open, high, low, close)\nma50 = SQA::TAI.sma(close, 50)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal == -100 &amp;&amp; current_price &lt; ma50.last\n  puts \"On-Neck pattern breaking below support - very bearish\"\n  puts \"Consider aggressive short positions\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_onneck/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_onneck/#what-it-measures","title":"What It Measures","text":"<p>The On-Neck pattern measures the failure of a rally attempt during a downtrend, with the second candle closing at or below the first candle's low. This indicates: - Complete rejection of rally attempts - Breakdown of support at previous low - Strong selling pressure overwhelming buyers - High probability of continued sharp decline</p> <p>This pattern is more bearish than the In-Neck pattern because the second candle not only fails to rally but actually closes at or below the previous low, showing extreme weakness.</p>"},{"location":"indicators/patterns/cdl_onneck/#pattern-structure","title":"Pattern Structure","text":"<p>On-Neck Pattern (Bearish Continuation): 1. First candle: Long black candle in an established downtrend 2. Second candle: White candle that:    - Opens below the previous close (gaps down)    - Attempts to rally during the session    - Closes at or slightly below the previous candle's low    - Shows complete failure to hold above the \"neck line\"</p> <p>The key difference from In-Neck: On-Neck closes AT or BELOW the first candle's low, while In-Neck closes NEAR but above the low.</p>"},{"location":"indicators/patterns/cdl_onneck/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Returns -100 (bearish continuation) or 0 (no pattern)</li> <li>Type: Bearish continuation pattern (two-candle formation)</li> <li>Frequency: Less common than In-Neck, more reliable</li> <li>Best Used: During strong downtrends with clear selling dominance</li> <li>Reliability: Moderate to high; stronger signal than In-Neck pattern</li> </ul>"},{"location":"indicators/patterns/cdl_onneck/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_onneck/#signal-values","title":"Signal Values","text":"<ul> <li>-100: Bearish On-Neck pattern detected - strong downtrend continuation expected</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_onneck/#pattern-recognition","title":"Pattern Recognition","text":"<p>Bearish Continuation Signal (-100): - Appears during an established downtrend - First candle shows strong selling with a long black body - Second candle gaps down, attempts rally, but closes at/below first candle's low - The \"on-neck\" close demonstrates complete support failure - Indicates bears are firmly in control with no viable support</p>"},{"location":"indicators/patterns/cdl_onneck/#market-psychology","title":"Market Psychology","text":"<p>The On-Neck pattern reveals critical market dynamics: - Initial Decline: Long black candle confirms strong selling - Gap Down Open: Market opens lower, showing overnight weakness - Failed Recovery: White candle attempts recovery but completely fails - Support Breakdown: Close at/below previous low breaks support - Capitulation Signal: Buyers give up, sellers dominate completely - Continuation Certainty: Pattern strongly suggests more downside ahead</p>"},{"location":"indicators/patterns/cdl_onneck/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_onneck/#sell-signals","title":"Sell Signals","text":"<p>When the On-Neck pattern appears (-100):</p> <ol> <li>Entry Point: Enter short at close of second candle or on breakdown below pattern</li> <li>Confirmation: Verify pattern occurs in strong downtrend with volume</li> <li>Stop Loss: Place stop above the high of the second candle</li> <li>Target: Project distance from pattern to next support level</li> </ol> <p>Example Scenario: <pre><code># Detect On-Neck pattern and generate aggressive short signal\nif pattern.last == -100\n  entry_price = close.last\n  pattern_high = [high[-2], high[-1]].max\n  stop_loss = pattern_high * 1.015\n  risk = stop_loss - entry_price\n  target = entry_price - (2.5 * risk)  # More aggressive target\n\n  puts \"STRONG SELL Signal: On-Neck Pattern Detected\"\n  puts \"Entry: $#{entry_price.round(2)}\"\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"Risk/Reward: 1:2.5\"\n  puts \"Support broken - expect accelerated decline\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_onneck/#exit-signals-for-long-positions","title":"Exit Signals for Long Positions","text":"<p>For traders holding long positions:</p> <ol> <li>Immediate Exit: Close all long positions when On-Neck pattern completes</li> <li>No Partial Exit: Pattern too bearish for partial positions</li> <li>Consider Reversal: May warrant opening short position</li> </ol> <p>Example Scenario: <pre><code># Urgent exit signal for long positions\nif pattern.last == -100 &amp;&amp; position == :long\n  puts \"URGENT: On-Neck pattern detected - STRONG BEARISH\"\n  puts \"Recommendation: Exit ALL long positions immediately\"\n  puts \"Current Price: $#{close.last}\"\n  puts \"Support broken - sharp decline expected\"\n  puts \"Consider reversing to short position\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_onneck/#short-entry-strategy","title":"Short Entry Strategy","text":"<pre><code># Complete short strategy with On-Neck pattern\nif pattern.last == -100\n  # Verify downtrend strength\n  recent_lows = low[-10..-1]\n  declining_lows = recent_lows.each_cons(2).all? { |a, b| b &lt; a }\n\n  if declining_lows\n    puts \"ON-NECK PATTERN IN STRONG DOWNTREND\"\n    puts \"High probability short setup\"\n    puts \"\"\n    puts \"Entry triggers:\"\n    puts \"1. Immediate entry at market\"\n    puts \"2. Or wait for break below #{close.last - 0.10}\"\n    puts \"3. Add to position on continuation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_onneck/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_onneck/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best in: - Strong established downtrends: Clear persistent selling pressure - After significant decline: Pattern more reliable after sustained move down - Breaking support: Pattern at key support levels increases significance - High volume context: High volume on both candles confirms pattern - Time frames: Most reliable on daily charts; very effective on weekly charts</p>"},{"location":"indicators/patterns/cdl_onneck/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Price well below all major MAs (20, 50, 200-day) - ADX: ADX above 30 confirms very strong downtrend - MACD: MACD well below signal line with increasing separation - Parabolic SAR: SAR dots above price confirming downtrend</p> <p>With Volume Indicators: - Volume Analysis: High volume on both candles critical - On-Balance Volume (OBV): Sharply declining OBV confirms pattern - Accumulation/Distribution: Declining line confirms distribution - Volume Surge: Increasing volume validates support breakdown</p> <p>With Momentum Indicators: - RSI: RSI below 40, ideally below 30 - Stochastic: In oversold territory but not turning up - CCI: Below -100 confirming bearish momentum</p>"},{"location":"indicators/patterns/cdl_onneck/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Trading Near Major Support: Avoid pattern at very strong historical support</li> <li>Low Volume Pattern: Pattern much less reliable without volume confirmation</li> <li>Confused Identification: Ensure close is AT or BELOW first candle's low</li> <li>Weak Downtrend: Pattern requires strong pre-existing downtrend</li> <li>Oversold Bounce Risk: Be cautious if RSI below 20 (potential bounce)</li> </ol>"},{"location":"indicators/patterns/cdl_onneck/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Tight Stop: Just above second candle's high (aggressive) - Standard Stop: 1-2% above pattern high - Swing Stop: Above recent swing high - Time Stop: Exit if no follow-through in 2-3 bars</p> <p>Position Sizing: - Can use larger position size due to higher reliability - Still risk no more than 2% of account - Consider scaling in after initial confirmation - Trail stops as profit develops</p> <p>Profit Targets: - Target 1: 1.5x risk (take partial profit) - Target 2: 2.5x risk (main target) - Target 3: Trail stop for extended move - Next Support: Project to next major support level</p>"},{"location":"indicators/patterns/cdl_onneck/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical data showing strong downtrend\nopen =  [55.00, 53.00, 51.00, 49.50, 47.50, 46.70, 45.00]\nhigh =  [55.50, 53.20, 51.30, 49.80, 47.80, 47.40, 45.50]\nlow =   [52.80, 50.80, 49.30, 47.30, 46.60, 46.50, 44.20]\nclose = [53.00, 51.00, 49.50, 47.50, 46.70, 46.55, 44.50]\n\n# Calculate indicators\npattern = SQA::TAI.cdl_onneck(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)  # Using 5 for short data\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\nin_strong_downtrend = current_price &lt; sma_20.last\nrsi_bearish = rsi.last &lt; 50\n\nif current_signal == -100 &amp;&amp; in_strong_downtrend\n  puts \"=\" * 60\n  puts \"ON-NECK BEARISH CONTINUATION PATTERN DETECTED\"\n  puts \"=\" * 60\n  puts \"Current Price: $#{current_price}\"\n  puts \"Pattern Signal: #{current_signal}\"\n  puts \"Below 20 SMA: #{in_strong_downtrend}\"\n  puts \"RSI: #{rsi.last.round(2)} (bearish: #{rsi_bearish})\"\n  puts \"\"\n\n  # Calculate trade parameters\n  entry = current_price\n  pattern_high = [high[-2], high[-1]].max\n  stop = pattern_high * 1.015\n  risk = stop - entry\n\n  target1 = entry - (1.5 * risk)\n  target2 = entry - (2.5 * risk)\n  target3 = entry - (4.0 * risk)\n\n  puts \"AGGRESSIVE SHORT TRADE SETUP:\"\n  puts \"-\" * 60\n  puts \"Entry Price: $#{entry.round(2)}\"\n  puts \"Stop Loss: $#{stop.round(2)}\"\n  puts \"Risk per share: $#{risk.round(2)}\"\n  puts \"\"\n  puts \"PROFIT TARGETS:\"\n  puts \"Target 1 (50% exit): $#{target1.round(2)} - 1.5R\"\n  puts \"Target 2 (30% exit): $#{target2.round(2)} - 2.5R\"\n  puts \"Target 3 (trail 20%): $#{target3.round(2)} - 4.0R\"\n  puts \"\"\n  puts \"RATIONALE:\"\n  puts \"- Strong downtrend confirmed\"\n  puts \"- Support level broken at #{low[-2]}\"\n  puts \"- Failed rally shows weakness\"\n  puts \"- RSI confirms bearish momentum\"\n  puts \"\"\n  puts \"EXECUTION PLAN:\"\n  puts \"1. Enter short at market open\"\n  puts \"2. Place stop at $#{stop.round(2)}\"\n  puts \"3. Scale out at targets\"\n  puts \"4. Trail stop on remaining position\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_onneck/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_onneck/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>In-Neck Pattern: Similar but less bearish (closes near vs at/below low)</li> <li>Thrusting Pattern: Second candle closes slightly higher into body</li> <li>Piercing Line: Bullish counterpart pattern</li> <li>Dark Cloud Cover: Bearish reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_onneck/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Bearish Engulfing: Another strong bearish signal</li> <li>Three Black Crows: Strong bearish continuation</li> <li>Evening Star: Bearish reversal at tops</li> <li>Shooting Star: Bearish reversal signal</li> </ul>"},{"location":"indicators/patterns/cdl_onneck/#indicator-combinations","title":"Indicator Combinations","text":"<ul> <li>RSI: Confirms bearish momentum</li> <li>ADX: Validates trend strength</li> <li>Moving Averages: Confirms downtrend structure</li> <li>MACD: Shows bearish divergence</li> </ul>"},{"location":"indicators/patterns/cdl_onneck/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_onneck/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For optimal confirmation: 1. Weekly Chart: Confirm major downtrend 2. Daily Chart: Identify On-Neck pattern 3. 4-Hour Chart: Time precise entry 4. 1-Hour Chart: Monitor for follow-through</p> <p>All timeframes should align bearishly for highest probability trades.</p>"},{"location":"indicators/patterns/cdl_onneck/#pattern-variations-and-reliability","title":"Pattern Variations and Reliability","text":"<p>High Reliability Indicators: - Close more than 0.5% below first candle's low - High volume on both candles - Occurs at broken support level - Part of larger bearish pattern complex</p> <p>Lower Reliability Indicators: - Close exactly at (not below) first candle's low - Low volume on second candle - No support level nearby - Oversold conditions present</p>"},{"location":"indicators/patterns/cdl_onneck/#statistical-performance","title":"Statistical Performance","text":"<p>Research by Thomas Bulkowski: - Success rate: Approximately 63-67% for continuation - Average decline: 5-10% after pattern completion - Time to target: Usually 8-20 trading days - Break-even failure rate: About 33% - Works better in bear markets than bull markets</p>"},{"location":"indicators/patterns/cdl_onneck/#market-context-considerations","title":"Market Context Considerations","text":"<p>Best Market Conditions: - Bear market environment - Sector rotation away from stock - Negative news flow - Increased market volatility</p> <p>Caution Conditions: - Extreme oversold readings (RSI &lt; 20) - Major support nearby - Positive divergences forming - Market turning bullish</p>"},{"location":"indicators/patterns/cdl_onneck/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"The Candlestick Course\" by Steve Nison</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Trading Classic Chart Patterns\" by Thomas Bulkowski</li> </ul>"},{"location":"indicators/patterns/cdl_onneck/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Bearish Continuation Patterns</li> <li>In-Neck Pattern</li> <li>Thrusting Pattern</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_piercing/","title":"CDL_CDL_PIERCING (Piercing Pattern)","text":""},{"location":"indicators/patterns/cdl_piercing/#overview","title":"Overview","text":"<p>The Piercing Pattern is a bullish reversal candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Long black candle followed by white candle closing above midpoint. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_piercing/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_piercing/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_piercing/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_piercing/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_piercing(open, high, low, close)\n\nputs \"Piercing Pattern signal: #{pattern.last}\"\n# Output: 100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_piercing/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_piercing(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Piercing Pattern detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_piercing/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_piercing/#what-it-measures","title":"What It Measures","text":"<p>The Piercing Pattern pattern measures: - Market Psychology: Bears lose control, bulls aggressively buying - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_piercing/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Bullish reversal</li> <li>Context: Best used in downtrend</li> <li>Signal: 100</li> <li>Reliability: High - especially with volume confirmation</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_piercing/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_piercing/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_piercing/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Piercing Pattern is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Appears primarily in downtrend</p>"},{"location":"indicators/patterns/cdl_piercing/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_piercing/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_piercing/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_piercing/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_piercing/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Piercing Pattern works best when: - Pattern appears in appropriate trend context (downtrend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_piercing/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_piercing/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_piercing/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_piercing/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_piercing(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_piercing/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_piercing/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_piercing/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_piercing/#pattern-family","title":"Pattern Family","text":"<p>The Piercing Pattern belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_piercing/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_piercing/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Piercing Pattern across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_piercing/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_piercing/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_piercing/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_piercing/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_rickshawman/","title":"CDL_CDL_RICKSHAWMAN (Rickshaw Man)","text":""},{"location":"indicators/patterns/cdl_rickshawman/#overview","title":"Overview","text":"<p>The Rickshaw Man is a reversal/indecision candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Doji with long shadows and body in middle of range. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_rickshawman/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_rickshawman/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_rickshawman/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_rickshawman/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_rickshawman(open, high, low, close)\n\nputs \"Rickshaw Man signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_rickshawman/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_rickshawman(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Rickshaw Man detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_rickshawman/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_rickshawman/#what-it-measures","title":"What It Measures","text":"<p>The Rickshaw Man pattern measures: - Market Psychology: Market equilibrium, neither bulls nor bears in control - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_rickshawman/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Reversal/indecision</li> <li>Context: Best used in any trend</li> <li>Signal: 100 or -100</li> <li>Reliability: Moderate - similar to long-legged doji</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_rickshawman/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_rickshawman/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_rickshawman/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Rickshaw Man is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Can appear in various market conditions</p>"},{"location":"indicators/patterns/cdl_rickshawman/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_rickshawman/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_rickshawman/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_rickshawman/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_rickshawman/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Rickshaw Man works best when: - Pattern appears in appropriate trend context (any trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_rickshawman/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_rickshawman/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_rickshawman/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_rickshawman/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_rickshawman(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_rickshawman/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_rickshawman/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_rickshawman/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_rickshawman/#pattern-family","title":"Pattern Family","text":"<p>The Rickshaw Man belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_rickshawman/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_rickshawman/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Rickshaw Man across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_rickshawman/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_rickshawman/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_rickshawman/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_rickshawman/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_risefall3methods/","title":"CDL_CDL_RISEFALL3METHODS (Rising/Falling Three Methods)","text":""},{"location":"indicators/patterns/cdl_risefall3methods/#overview","title":"Overview","text":"<p>The Rising/Falling Three Methods is a continuation candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Long candle, three small counter-trend candles, long continuation candle. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_risefall3methods/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_risefall3methods/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_risefall3methods(open, high, low, close)\n\nputs \"Rising/Falling Three Methods signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_risefall3methods/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_risefall3methods(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Rising/Falling Three Methods detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_risefall3methods/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_risefall3methods/#what-it-measures","title":"What It Measures","text":"<p>The Rising/Falling Three Methods pattern measures: - Market Psychology: Brief pause in strong trend before continuation - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Continuation</li> <li>Context: Best used in strong trend</li> <li>Signal: 100 or -100</li> <li>Reliability: High - classic continuation pattern</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_risefall3methods/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_risefall3methods/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_risefall3methods/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Rising/Falling Three Methods is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Appears primarily in strong trend</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_risefall3methods/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_risefall3methods/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Rising/Falling Three Methods works best when: - Pattern appears in appropriate trend context (strong trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_risefall3methods/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_risefall3methods(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_risefall3methods/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_risefall3methods/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_risefall3methods/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_risefall3methods/#pattern-family","title":"Pattern Family","text":"<p>The Rising/Falling Three Methods belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_risefall3methods/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Rising/Falling Three Methods across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Higher reliability - Ranging Markets: Moderate reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_risefall3methods/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_risefall3methods/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_risefall3methods/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_separatinglines/","title":"CDL_SEPARATINGLINES (Separating Lines)","text":""},{"location":"indicators/patterns/cdl_separatinglines/#overview","title":"Overview","text":"<p>The Separating Lines pattern is a two-candle continuation pattern that can be either bullish or bearish depending on the prevailing trend. It consists of two candles of opposite colors that open at the same level, with the second candle moving in the direction of the trend. This pattern suggests strong momentum continuation and is considered a reliable signal when it appears in established trends.</p>"},{"location":"indicators/patterns/cdl_separatinglines/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_separatinglines/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Critical for identifying the \"separating\" open at same level - Must have same length as other price arrays</p> <p>high - Array of high prices for each period - Used to validate candle body structure - Helps confirm pattern strength</p> <p>low - Array of low prices for each period - Used in pattern validation - Helps measure candle body size</p> <p>close - Array of closing prices for each period - Determines candle color and direction - Essential for pattern recognition</p>"},{"location":"indicators/patterns/cdl_separatinglines/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_separatinglines/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.50]\nhigh =  [48.70, 48.72, 48.90, 49.20]\nlow =   [47.79, 48.14, 48.39, 48.40]\nclose = [48.20, 48.61, 48.50, 49.00]\n\npattern = SQA::TAI.cdl_separatinglines(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n# -100 = bearish continuation, 0 = no pattern, +100 = bullish continuation\n</code></pre>"},{"location":"indicators/patterns/cdl_separatinglines/#analyzing-signals","title":"Analyzing Signals","text":"<pre><code># Monitor for continuation signals\npattern.each_with_index do |signal, idx|\n  case signal\n  when 100\n    puts \"Bullish Separating Lines at #{idx} - uptrend continuation\"\n  when -100\n    puts \"Bearish Separating Lines at #{idx} - downtrend continuation\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_separatinglines/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_separatinglines/#what-it-measures","title":"What It Measures","text":"<p>The Separating Lines pattern measures trend continuation strength through equal opens with opposite-colored candles. It indicates: - Strong momentum in the trend direction - Market agreement at a specific price level - High probability of trend continuation - Rejection of counter-trend movement</p> <p>The pattern is significant because both candles open at the same level but move in opposite directions, with the trend-following candle showing strength.</p>"},{"location":"indicators/patterns/cdl_separatinglines/#pattern-structure","title":"Pattern Structure","text":"<p>Bullish Separating Lines (Uptrend Continuation): 1. First candle: Black candle in an uptrend (pullback) 2. Second candle: White candle that:    - Opens at same level as first candle's open    - Closes higher, confirming uptrend    - Shows strong bullish momentum</p> <p>Bearish Separating Lines (Downtrend Continuation): 1. First candle: White candle in a downtrend (bounce) 2. Second candle: Black candle that:    - Opens at same level as first candle's open    - Closes lower, confirming downtrend    - Shows strong bearish momentum</p>"},{"location":"indicators/patterns/cdl_separatinglines/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Returns -100 (bearish continuation), 0 (no pattern), or +100 (bullish continuation)</li> <li>Type: Continuation pattern (two-candle formation)</li> <li>Frequency: Moderately rare</li> <li>Best Used: Strong trending markets</li> <li>Reliability: High when in established trend</li> </ul>"},{"location":"indicators/patterns/cdl_separatinglines/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_separatinglines/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish continuation - uptrend expected to continue</li> <li>0: No pattern present</li> <li>-100: Bearish continuation - downtrend expected to continue</li> </ul>"},{"location":"indicators/patterns/cdl_separatinglines/#pattern-recognition","title":"Pattern Recognition","text":"<p>Bullish Continuation (+100): - Appears in established uptrend - Black candle (pullback) followed by white candle - Both open at same level - White candle confirms trend strength</p> <p>Bearish Continuation (-100): - Appears in established downtrend - White candle (bounce) followed by black candle - Both open at same level - Black candle confirms trend weakness</p>"},{"location":"indicators/patterns/cdl_separatinglines/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_separatinglines/#buy-signals","title":"Buy Signals","text":"<p>For bullish pattern (+100):</p> <pre><code>if pattern.last == 100\n  entry_price = close.last\n  stop_loss = low[-2..-1].min * 0.98\n  target = entry_price + 2 * (entry_price - stop_loss)\n\n  puts \"BUY Signal: Bullish Separating Lines\"\n  puts \"Entry: $#{entry_price.round(2)}\"\n  puts \"Stop: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_separatinglines/#sell-signals","title":"Sell Signals","text":"<p>For bearish pattern (-100):</p> <pre><code>if pattern.last == -100\n  entry_price = close.last\n  stop_loss = high[-2..-1].max * 1.02\n  target = entry_price - 2 * (stop_loss - entry_price)\n\n  puts \"SELL Signal: Bearish Separating Lines\"\n  puts \"Entry: $#{entry_price.round(2)}\"\n  puts \"Stop: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_separatinglines/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_separatinglines/#optimal-use-cases","title":"Optimal Use Cases","text":"<ul> <li>Strong established trends</li> <li>Liquid markets with clear price action</li> <li>Daily and 4-hour timeframes</li> <li>Trend confirmation needed</li> </ul>"},{"location":"indicators/patterns/cdl_separatinglines/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm trend direction - ADX: Verify trend strength above 25 - MACD: Validate momentum direction</p> <p>With Volume: - Higher volume on second candle strengthens signal - OBV should confirm trend direction</p>"},{"location":"indicators/patterns/cdl_separatinglines/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Trading in ranging markets</li> <li>Ignoring overall trend context</li> <li>Missing volume confirmation</li> <li>Incorrect open level identification</li> </ol>"},{"location":"indicators/patterns/cdl_separatinglines/#practical-example","title":"Practical Example","text":"<pre><code>require 'sqa/tai'\n\nopen =  [45.00, 46.00, 47.50, 47.00, 47.00]\nhigh =  [46.20, 47.80, 48.30, 47.80, 48.50]\nlow =   [44.80, 45.90, 47.00, 46.80, 46.90]\nclose = [46.00, 47.50, 47.00, 47.00, 48.30]\n\npattern = SQA::TAI.cdl_separatinglines(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\n\nif pattern.last == 100 &amp;&amp; close.last &gt; sma_20.last\n  puts \"Bullish Separating Lines in uptrend - STRONG BUY\"\nelsif pattern.last == -100 &amp;&amp; close.last &lt; sma_20.last\n  puts \"Bearish Separating Lines in downtrend - STRONG SELL\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_separatinglines/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_separatinglines/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Meeting Lines: Opposite pattern</li> <li>Piercing Line: Similar bullish signal</li> <li>Dark Cloud Cover: Similar bearish signal</li> </ul>"},{"location":"indicators/patterns/cdl_separatinglines/#indicator-combinations","title":"Indicator Combinations","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>Moving Averages: Trend direction</li> <li>Volume: Momentum validation</li> </ul>"},{"location":"indicators/patterns/cdl_separatinglines/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> </ul>"},{"location":"indicators/patterns/cdl_separatinglines/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Continuation Patterns</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_shootingstar/","title":"CDL_CDL_SHOOTINGSTAR (Shooting Star)","text":""},{"location":"indicators/patterns/cdl_shootingstar/#overview","title":"Overview","text":"<p>The Shooting Star is a single-candle bearish reversal pattern that bearish reversal pattern with long upper shadow. This pattern is used to identify potential trend changes and provides traders with entry signals when combined with proper confirmation.</p>"},{"location":"indicators/patterns/cdl_shootingstar/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_shootingstar/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Minimum 1 candle required for pattern detection - More historical data provides better context for trend analysis</p>"},{"location":"indicators/patterns/cdl_shootingstar/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_shootingstar/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_shootingstar(open, high, low, close)\n\nputs \"Shooting Star signal: #{pattern.last}\"\n# Output: -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_shootingstar/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_shootingstar/#what-it-measures","title":"What It Measures","text":"<p>The Shooting Star pattern measures: - Reversal Potential: Shift in market sentiment and momentum - Market Psychology: Bulls pushed prices higher but lost control, bears regained momentum - Trend Exhaustion: Signs that current trend is losing strength</p>"},{"location":"indicators/patterns/cdl_shootingstar/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Single-candle bearish reversal</li> <li>Trend Context: Must appear in uptrend</li> <li>Signal: -100</li> <li>Reliability: Moderate to High (with confirmation)</li> <li>Best Timeframes: Daily, 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_shootingstar/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_shootingstar/#entry-signals","title":"Entry Signals","text":"<p>Primary Entry: Short when next candle closes below shooting star body</p> <p>Risk Management: - Stop Loss: Above the high of the shooting star - Target: Recent support level - Risk/Reward: Aim for minimum 1:2 ratio</p>"},{"location":"indicators/patterns/cdl_shootingstar/#confirmation-requirements","title":"Confirmation Requirements","text":"<p>Strengthen the signal with: 1. Volume Confirmation: Increased volume on signal candle 2. Trend Confirmation: Clear uptrend established 3. Support/Resistance: Pattern at key price level 4. Next Candle: Following candle confirms direction</p>"},{"location":"indicators/patterns/cdl_shootingstar/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_shootingstar/#optimal-use-cases","title":"Optimal Use Cases","text":"<ul> <li>Market Conditions: After established trend with clear momentum</li> <li>Timeframes: Most reliable on daily charts</li> <li>Asset Classes: Stocks, forex, commodities</li> <li>Volatility: Normal volatility environments</li> </ul>"},{"location":"indicators/patterns/cdl_shootingstar/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<ul> <li>RSI: Confirm overbought/oversold conditions</li> <li>MACD: Verify momentum shift</li> <li>Volume: Validate buying/selling pressure</li> <li>Moving Averages: Confirm trend context</li> </ul>"},{"location":"indicators/patterns/cdl_shootingstar/#related-indicators","title":"Related Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend and momentum</li> <li>Volume OBV - Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_shootingstar/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_shortline/","title":"CDL_SHORTLINE (Short Line Candle)","text":""},{"location":"indicators/patterns/cdl_shortline/#overview","title":"Overview","text":"<p>The Short Line Candle is a single-candle strength candlestick pattern. This pattern identifies candles with unusually short bodies relative to recent price action, indicating indecision, consolidation, or lack of conviction. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_shortline/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_shortline/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_shortline/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_shortline/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_shortline(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_shortline/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_shortline/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_shortline(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_shortline/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_shortline/#what-it-measures","title":"What It Measures","text":"<p>The Short Line Candle pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_shortline/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns +100 (bullish) or -100 (bearish), or 0 (no pattern)</li> <li>Type: single-candle candlestick pattern</li> <li>Signal: Strength indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_shortline/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_shortline/#signal-values","title":"Signal Values","text":"<ul> <li>+100 (bullish) or -100 (bearish): Pattern detected - indicates potential strength signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_shortline/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_shortline/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_shortline/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_shortline/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_shortline/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_shortline/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_shortline/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_shortline/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_shortline/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_shortline/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_shortline(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Short Line Candle PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_shortline/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_shortline/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_shortline/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_shortline/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_shortline/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_shortline/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_shortline/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_shortline/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_shortline/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_spinningtop/","title":"CDL_CDL_SPINNINGTOP (Spinning Top)","text":""},{"location":"indicators/patterns/cdl_spinningtop/#overview","title":"Overview","text":"<p>The Spinning Top is a indecision candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Small body with upper and lower shadows of similar length. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_spinningtop/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_spinningtop/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_spinningtop/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_spinningtop/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_spinningtop(open, high, low, close)\n\nputs \"Spinning Top signal: #{pattern.last}\"\n# Output: 100 or -100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_spinningtop/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_spinningtop(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Spinning Top detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_spinningtop/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_spinningtop/#what-it-measures","title":"What It Measures","text":"<p>The Spinning Top pattern measures: - Market Psychology: Indecision, balance between buyers and sellers - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_spinningtop/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Indecision</li> <li>Context: Best used in any trend</li> <li>Signal: 100 or -100</li> <li>Reliability: Low alone - needs confirmation</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_spinningtop/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_spinningtop/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_spinningtop/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Spinning Top is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Can appear in various market conditions</p>"},{"location":"indicators/patterns/cdl_spinningtop/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_spinningtop/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_spinningtop/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_spinningtop/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_spinningtop/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Spinning Top works best when: - Pattern appears in appropriate trend context (any trend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_spinningtop/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_spinningtop/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_spinningtop/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_spinningtop/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_spinningtop(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_spinningtop/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_spinningtop/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_spinningtop/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_spinningtop/#pattern-family","title":"Pattern Family","text":"<p>The Spinning Top belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_spinningtop/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_spinningtop/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Spinning Top across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_spinningtop/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Moderate reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_spinningtop/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_spinningtop/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_spinningtop/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_stalledpattern/","title":"CDL_STALLEDPATTERN (Stalled Pattern)","text":""},{"location":"indicators/patterns/cdl_stalledpattern/#overview","title":"Overview","text":"<p>The Stalled Pattern is a three-candle bearish reversal candlestick pattern. It features three white candles with progressively smaller bodies and shorter upper shadows, indicating upward momentum is stalling and a bearish reversal may occur. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_stalledpattern/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_stalledpattern/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_stalledpattern(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_stalledpattern/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_stalledpattern/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_stalledpattern(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_stalledpattern/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_stalledpattern/#what-it-measures","title":"What It Measures","text":"<p>The Stalled Pattern pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0, or 0 (no pattern)</li> <li>Type: three-candle candlestick pattern</li> <li>Signal: Bearish reversal indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_stalledpattern/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_stalledpattern/#signal-values","title":"Signal Values","text":"<ul> <li>0: Pattern detected - indicates potential bearish reversal signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_stalledpattern/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_stalledpattern/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_stalledpattern/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_stalledpattern/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_stalledpattern/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_stalledpattern/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_stalledpattern(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Stalled Pattern PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_stalledpattern/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_stalledpattern/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_stalledpattern/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_stalledpattern/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_stalledpattern/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_stalledpattern/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_stalledpattern/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_sticksandwich/","title":"CDL_STICKSANDWICH (Stick Sandwich)","text":""},{"location":"indicators/patterns/cdl_sticksandwich/#overview","title":"Overview","text":"<p>The Stick Sandwich is a three-candle bullish reversal candlestick pattern. It consists of two black candles with matching closes surrounding a white candle, suggesting a potential bottom and reversal to the upside. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_sticksandwich/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_sticksandwich/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_sticksandwich(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_sticksandwich/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_sticksandwich/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_sticksandwich(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_sticksandwich/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_sticksandwich/#what-it-measures","title":"What It Measures","text":"<p>The Stick Sandwich pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0, or 0 (no pattern)</li> <li>Type: three-candle candlestick pattern</li> <li>Signal: Bullish reversal indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_sticksandwich/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_sticksandwich/#signal-values","title":"Signal Values","text":"<ul> <li>0: Pattern detected - indicates potential bullish reversal signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_sticksandwich/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_sticksandwich/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_sticksandwich/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_sticksandwich/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_sticksandwich/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_sticksandwich/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_sticksandwich(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Stick Sandwich PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_sticksandwich/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_sticksandwich/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_sticksandwich/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_sticksandwich/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_sticksandwich/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_sticksandwich/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_sticksandwich/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_takuri/","title":"CDL_CDL_TAKURI (Takuri Line (Dragonfly Doji at Support))","text":""},{"location":"indicators/patterns/cdl_takuri/#overview","title":"Overview","text":"<p>The Takuri Line (Dragonfly Doji at Support) is a bullish reversal candlestick pattern used in technical analysis to identify potential trading opportunities. The pattern consists of Long lower shadow, open/close at high, at support level. This pattern provides traders with insights into market psychology and potential price movements when properly confirmed.</p>"},{"location":"indicators/patterns/cdl_takuri/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices <code>high</code> Array Required Array of high prices <code>low</code> Array Required Array of low prices <code>close</code> Array Required Array of closing prices"},{"location":"indicators/patterns/cdl_takuri/#parameter-details","title":"Parameter Details","text":"<p>OHLC Arrays - All four price arrays must have the same length - Requires sufficient historical data for pattern recognition - More data provides better trend context for signal validation</p>"},{"location":"indicators/patterns/cdl_takuri/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_takuri/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nopen =  [50.0, 49.5, 48.0, 47.5, 48.5]\nhigh =  [50.5, 50.0, 48.5, 48.0, 49.5]\nlow =   [49.5, 48.5, 47.5, 47.0, 48.0]\nclose = [49.5, 48.5, 48.0, 47.5, 49.0]\n\npattern = SQA::TAI.cdl_takuri(open, high, low, close)\n\nputs \"Takuri Line (Dragonfly Doji at Support) signal: #{pattern.last}\"\n# Output: 100 (pattern detected) or 0 (no pattern)\n</code></pre>"},{"location":"indicators/patterns/cdl_takuri/#with-confirmation","title":"With Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Get historical data\nopen, high, low, close = get_ohlc_data('AAPL')\n\n# Calculate pattern\npattern = SQA::TAI.cdl_takuri(open, high, low, close)\n\n# Add confirmation with volume and RSI\nvolume = get_volume_data('AAPL')\nrsi = SQA::TAI.rsi(close, period: 14)\n\nif pattern.last != 0\n  puts \"Takuri Line (Dragonfly Doji at Support) detected!\"\n  puts \"Signal strength: #{pattern.last}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"Consider entry with proper risk management\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_takuri/#understanding-the-pattern","title":"Understanding the Pattern","text":""},{"location":"indicators/patterns/cdl_takuri/#what-it-measures","title":"What It Measures","text":"<p>The Takuri Line (Dragonfly Doji at Support) pattern measures: - Market Psychology: Strong rejection of lower prices, bulls gaining control - Trend Dynamics: Potential shift or continuation in price direction - Momentum: Balance of power between buyers and sellers</p>"},{"location":"indicators/patterns/cdl_takuri/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Type: Bullish reversal</li> <li>Context: Best used in downtrend</li> <li>Signal: 100</li> <li>Reliability: High - especially at key support</li> <li>Timeframes: Most reliable on daily and 4-hour charts</li> </ul>"},{"location":"indicators/patterns/cdl_takuri/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_takuri/#signal-values","title":"Signal Values","text":"<ul> <li>+100: Bullish pattern detected - potential upward reversal or continuation</li> <li>-100: Bearish pattern detected - potential downward reversal or continuation</li> <li>0: No pattern detected - continue monitoring</li> </ul>"},{"location":"indicators/patterns/cdl_takuri/#pattern-recognition","title":"Pattern Recognition","text":"<p>The Takuri Line (Dragonfly Doji at Support) is identified by: - Specific candle body and shadow relationships - Position within the prevailing trend - Appears primarily in downtrend</p>"},{"location":"indicators/patterns/cdl_takuri/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_takuri/#entry-strategy","title":"Entry Strategy","text":"<p>Pattern Confirmation: 1. Wait for pattern completion 2. Confirm with next candle moving in signal direction 3. Verify with volume increase 4. Check RSI for overbought/oversold conditions</p> <p>Entry Points: - Aggressive: Enter on pattern completion - Conservative: Wait for next candle confirmation - Safe: Combine with support/resistance levels</p>"},{"location":"indicators/patterns/cdl_takuri/#risk-management","title":"Risk Management","text":"<p>Stop Loss Placement: - Place beyond the pattern's extreme point - Use ATR to set appropriate distance - Never risk more than 1-2% of capital per trade</p> <p>Take Profit Targets: - Target 1: Recent swing high/low - Target 2: Key support/resistance levels - Target 3: Fibonacci extensions</p>"},{"location":"indicators/patterns/cdl_takuri/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_takuri/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>Takuri Line (Dragonfly Doji at Support) works best when: - Pattern appears in appropriate trend context (downtrend) - Volume confirms the price action - Other technical indicators align (RSI, MACD, Moving Averages) - Pattern forms at key support or resistance levels</p>"},{"location":"indicators/patterns/cdl_takuri/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended Combinations: - RSI: Confirm momentum and overbought/oversold conditions - MACD: Verify trend direction and strength - Volume: Validate buying/selling pressure - Moving Averages: Identify overall trend direction - Support/Resistance: Enhance signal reliability at key levels</p>"},{"location":"indicators/patterns/cdl_takuri/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes: 1. Trading pattern without confirmation 2. Ignoring overall market trend 3. Not using proper stop losses 4. Over-leveraging based on single pattern 5. Forgetting to check volume confirmation</p>"},{"location":"indicators/patterns/cdl_takuri/#parameter-optimization","title":"Parameter Optimization","text":"<ul> <li>Use daily timeframe for highest reliability</li> <li>Combine with 4-hour for entry timing</li> <li>Avoid very short timeframes (increases false signals)</li> <li>Test on historical data before live trading</li> </ul>"},{"location":"indicators/patterns/cdl_takuri/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nhistorical_data = get_market_data('AAPL', days: 50)\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_takuri(\n  historical_data[:open],\n  historical_data[:high],\n  historical_data[:low],\n  historical_data[:close]\n)\n\nrsi = SQA::TAI.rsi(historical_data[:close], period: 14)\nmacd, signal, _ = SQA::TAI.macd(historical_data[:close])\n\n# Trading logic\nif pattern.last == 100  # Bullish signal\n  current_price = historical_data[:close].last\n  pattern_low = historical_data[:low].last(3).min\n\n  if rsi.last &lt; 70 &amp;&amp; macd.last &gt; signal.last\n    puts \"STRONG BUY SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_low * 0.98}\"\n    puts \"Target: $#{current_price * 1.05}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nelsif pattern.last == -100  # Bearish signal\n  current_price = historical_data[:close].last\n  pattern_high = historical_data[:high].last(3).max\n\n  if rsi.last &gt; 30 &amp;&amp; macd.last &lt; signal.last\n    puts \"STRONG SELL SIGNAL\"\n    puts \"Entry: $#{current_price}\"\n    puts \"Stop: $#{pattern_high * 1.02}\"\n    puts \"Target: $#{current_price * 0.95}\"\n    puts \"Risk/Reward: 1:2.5\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_takuri/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_takuri/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Doji - Indecision candle patterns</li> <li>Hammer - Bullish reversal pattern</li> <li>Engulfing - Strong reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_takuri/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>RSI - Momentum confirmation</li> <li>MACD - Trend direction and strength</li> <li>Volume OBV - Volume analysis</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/patterns/cdl_takuri/#pattern-family","title":"Pattern Family","text":"<p>The Takuri Line (Dragonfly Doji at Support) belongs to the candlestick pattern family used for: - Identifying potential reversals - Confirming trend continuations - Analyzing market psychology - Timing entry and exit points</p>"},{"location":"indicators/patterns/cdl_takuri/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_takuri/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use Takuri Line (Dragonfly Doji at Support) across multiple timeframes: - Weekly: Identify major trend direction - Daily: Spot pattern formation - 4-Hour: Fine-tune entry timing - 1-Hour: Manage position and stops</p>"},{"location":"indicators/patterns/cdl_takuri/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>Pattern reliability varies by market: - Trending Markets: Moderate reliability - Ranging Markets: Higher reliability - High Volatility: Use wider stops and smaller position sizes - Low Volatility: Tighten stops but expect smaller moves</p>"},{"location":"indicators/patterns/cdl_takuri/#statistical-considerations","title":"Statistical Considerations","text":"<ul> <li>Success rate varies by market conditions (typically 50-65%)</li> <li>Confirmation significantly improves reliability</li> <li>Volume validation adds 10-15% to success rate</li> <li>Pattern at support/resistance adds 15-20% reliability</li> </ul>"},{"location":"indicators/patterns/cdl_takuri/#references","title":"References","text":"<ul> <li>Nison, Steve. \"Japanese Candlestick Charting Techniques\" (1991)</li> <li>Bulkowski, Thomas. \"Encyclopedia of Candlestick Charts\" (2008)</li> <li>Morris, Gregory L. \"Candlestick Charting Explained\" (2006)</li> <li>StockCharts Candlestick Patterns</li> </ul>"},{"location":"indicators/patterns/cdl_takuri/#see-also","title":"See Also","text":"<ul> <li>Candlestick Pattern Overview</li> <li>Pattern Recognition Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/patterns/cdl_tasukigap/","title":"CDL_TASUKIGAP (Tasuki Gap)","text":""},{"location":"indicators/patterns/cdl_tasukigap/#overview","title":"Overview","text":"<p>The Tasuki Gap is a three-candle both candlestick pattern. This continuation pattern features a gap followed by a candle of opposite color that partially fills the gap but doesn't close it, suggesting the trend will continue. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_tasukigap/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_tasukigap/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_tasukigap/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_tasukigap/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_tasukigap(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_tasukigap/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tasukigap/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_tasukigap(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tasukigap/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_tasukigap/#what-it-measures","title":"What It Measures","text":"<p>The Tasuki Gap pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_tasukigap/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns +100 (bullish) or -100 (bearish), or 0 (no pattern)</li> <li>Type: three-candle candlestick pattern</li> <li>Signal: Both indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_tasukigap/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_tasukigap/#signal-values","title":"Signal Values","text":"<ul> <li>+100 (bullish) or -100 (bearish): Pattern detected - indicates potential both signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_tasukigap/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_tasukigap/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_tasukigap/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tasukigap/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tasukigap/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_tasukigap/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_tasukigap/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_tasukigap/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_tasukigap/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_tasukigap/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_tasukigap(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Tasuki Gap PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tasukigap/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_tasukigap/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_tasukigap/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_tasukigap/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_tasukigap/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_tasukigap/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_tasukigap/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_tasukigap/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_tasukigap/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_thrusting/","title":"CDL_THRUSTING (Thrusting Pattern)","text":""},{"location":"indicators/patterns/cdl_thrusting/#overview","title":"Overview","text":"<p>The Thrusting pattern is a two-candle bearish continuation pattern that appears during a downtrend. It consists of a long black candle followed by a white candle that closes above the first candle's low but well below its midpoint. This pattern indicates a failed rally attempt where buying pressure is insufficient to reverse the downtrend, suggesting continuation of the bearish move. The Thrusting pattern is less bearish than the In-Neck and On-Neck patterns but still signals downtrend continuation.</p>"},{"location":"indicators/patterns/cdl_thrusting/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_thrusting/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify the upper range of price movement - Helps validate pattern structure</p> <p>low - Array of low prices for each period - Critical for pattern identification - Establishes the support level reference</p> <p>close - Array of closing prices for each period - Key for determining the \"thrusting\" level (above low, below midpoint) - Essential for pattern recognition</p>"},{"location":"indicators/patterns/cdl_thrusting/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_thrusting/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data showing downtrend with Thrusting pattern\nopen =  [50.00, 48.50, 47.00, 46.50]\nhigh =  [50.20, 48.80, 47.30, 47.50]\nlow =   [48.30, 46.90, 46.50, 46.40]\nclose = [48.50, 47.00, 46.50, 47.00]\n\npattern = SQA::TAI.cdl_thrusting(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n# 0 = no pattern, -100 = bearish continuation\n</code></pre>"},{"location":"indicators/patterns/cdl_thrusting/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for bearish continuation signals\npattern.each_with_index do |signal, idx|\n  if signal == -100\n    puts \"Bearish Thrusting pattern at index #{idx}\"\n    puts \"Price: #{close[idx]}, downtrend continuation expected\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_thrusting/#combining-with-trend-analysis","title":"Combining with Trend Analysis","text":"<pre><code># Use with multiple indicators for confirmation\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_thrusting(open, high, low, close)\nma50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal == -100 &amp;&amp; current_price &lt; ma50.last &amp;&amp; rsi.last &lt; 50\n  puts \"Thrusting pattern with bearish trend confirmation\"\n  puts \"Consider short positions or exit longs\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_thrusting/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_thrusting/#what-it-measures","title":"What It Measures","text":"<p>The Thrusting pattern measures the strength of a failed rally attempt during a downtrend. When a white candle appears but closes above the previous low yet below the midpoint of the black candle's body, it indicates: - Insufficient buying pressure to reverse the trend - Resistance at mid-body level of previous candle - Bears maintaining control despite brief rally - Likely continuation of the downtrend</p> <p>The key characteristic is that the second candle \"thrusts\" into the first candle's body but doesn't penetrate deeply enough to suggest reversal.</p>"},{"location":"indicators/patterns/cdl_thrusting/#pattern-structure","title":"Pattern Structure","text":"<p>Thrusting Pattern (Bearish Continuation): 1. First candle: Long black candle in an established downtrend 2. Second candle: White candle that:    - Opens below the previous close    - Rallies during the session    - Closes above the first candle's low    - Closes below the midpoint of the first candle's body    - Fails to show sufficient strength for reversal</p> <p>The critical element is the second candle closing in the lower half of the first candle's body, showing weakness in the rally attempt.</p>"},{"location":"indicators/patterns/cdl_thrusting/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Returns -100 (bearish continuation) or 0 (no pattern)</li> <li>Type: Bearish continuation pattern (two-candle formation)</li> <li>Frequency: Moderately common in downtrends</li> <li>Best Used: During established downtrends with moderate selling pressure</li> <li>Reliability: Moderate; less reliable than In-Neck and On-Neck patterns</li> </ul>"},{"location":"indicators/patterns/cdl_thrusting/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_thrusting/#signal-values","title":"Signal Values","text":"<ul> <li>-100: Bearish Thrusting pattern detected - downtrend expected to continue</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_thrusting/#pattern-recognition","title":"Pattern Recognition","text":"<p>Bearish Continuation Signal (-100): - Appears during an established downtrend - First candle shows strong selling with a long black body - Second candle attempts rally but closes well below the midpoint - The penetration level indicates insufficient bullish strength - Suggests sellers will reassert control and push prices lower</p>"},{"location":"indicators/patterns/cdl_thrusting/#market-psychology","title":"Market Psychology","text":"<p>The Thrusting pattern reveals important market dynamics: - Initial Decline: Long black candle confirms selling pressure - Gap Down: Second candle opens lower, showing bearish sentiment - Rally Attempt: White candle shows some buying interest - Weak Penetration: Close below midpoint shows buyers lack conviction - Resistance at Midpoint: Previous candle's mid-body acts as resistance - Continuation Expected: Insufficient strength suggests more downside</p>"},{"location":"indicators/patterns/cdl_thrusting/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_thrusting/#sell-signals","title":"Sell Signals","text":"<p>When the Thrusting pattern appears (-100):</p> <ol> <li>Entry Point: Enter short after pattern confirmation or on breakdown</li> <li>Confirmation: Verify pattern occurs in downtrend with volume confirmation</li> <li>Stop Loss: Place stop above the high of the second candle</li> <li>Target: Project to next support level or use 2:1 risk-reward</li> </ol> <p>Example Scenario: <pre><code># Detect Thrusting pattern and generate trading signal\nif pattern.last == -100\n  entry_price = close.last\n  pattern_high = [high[-2], high[-1]].max\n  stop_loss = pattern_high * 1.02\n  risk = stop_loss - entry_price\n  target = entry_price - (2 * risk)\n\n  puts \"SELL Signal: Thrusting Pattern Detected\"\n  puts \"Entry: $#{entry_price.round(2)}\"\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"Risk/Reward: 1:2\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_thrusting/#exit-signals-for-long-positions","title":"Exit Signals for Long Positions","text":"<p>For traders holding long positions:</p> <ol> <li>Exit Point: Consider closing long positions when Thrusting pattern completes</li> <li>Partial Exit: May reduce position size rather than full exit</li> <li>Tighten Stops: Move stops closer to current price</li> </ol> <p>Example Scenario: <pre><code># Exit or reduce long position on Thrusting pattern\nif pattern.last == -100 &amp;&amp; position == :long\n  puts \"WARNING: Thrusting pattern detected\"\n  puts \"Recommendation: Reduce or exit long position\"\n  puts \"Current Price: $#{close.last}\"\n  puts \"Consider tightening stop loss\"\nend\n</code></pre></p>"},{"location":"indicators/patterns/cdl_thrusting/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_thrusting/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best in: - Established downtrends: Clear downward price movement required - Moderate volatility: Not in extreme market conditions - Liquid markets: Better price discovery and execution - Time frames: Most reliable on daily charts; also works on 4-hour charts - Volume context: Pattern stronger with declining volume on second candle</p>"},{"location":"indicators/patterns/cdl_thrusting/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Price below key MAs (20, 50-day) confirms downtrend - ADX: ADX above 20 confirms trend strength - MACD: MACD below signal line confirms bearish momentum</p> <p>With Volume Indicators: - Volume Analysis: Lower volume on second candle strengthens signal - On-Balance Volume (OBV): Declining OBV confirms selling pressure - Volume pattern: High volume on first candle, lower on second ideal</p> <p>With Support/Resistance: - Resistance Levels: Pattern at resistance adds confirmation - Fibonacci Levels: Pattern at retracement level increases significance - Previous Lows: Distance to next support guides profit targets</p>"},{"location":"indicators/patterns/cdl_thrusting/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Confusing with Piercing Line: Thrusting closes below midpoint, Piercing above</li> <li>Ignoring Trend Context: Pattern requires established downtrend</li> <li>Trading Near Major Support: Avoid pattern at strong support levels</li> <li>Overestimating Reliability: Pattern less reliable than In-Neck/On-Neck</li> <li>Missing Volume Confirmation: Volume pattern critical for validation</li> </ol>"},{"location":"indicators/patterns/cdl_thrusting/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Initial Stop: Above the high of the second candle - Alternative Stop: Above recent swing high - Buffer: Add 1-2% for volatility - Time Stop: Exit if no follow-through within 3-5 bars</p> <p>Position Sizing: - Use conservative position sizes due to moderate reliability - Risk no more than 1-2% of account per trade - Consider waiting for additional confirmation before entering - Scale into position gradually</p>"},{"location":"indicators/patterns/cdl_thrusting/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical data showing downtrend\nopen =  [52.00, 51.00, 50.00, 48.50, 47.00, 46.50, 45.50]\nhigh =  [52.50, 51.20, 50.20, 48.80, 47.40, 47.50, 46.00]\nlow =   [50.90, 49.80, 48.30, 46.90, 46.40, 46.30, 45.20]\nclose = [51.00, 50.00, 48.50, 47.00, 46.50, 47.00, 45.40]\n\n# Calculate indicators\npattern = SQA::TAI.cdl_thrusting(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)  # Using 5 for short data\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\nin_downtrend = current_price &lt; sma_20.last\n\nif current_signal == -100 &amp;&amp; in_downtrend\n  puts \"=\" * 50\n  puts \"THRUSTING BEARISH CONTINUATION PATTERN\"\n  puts \"=\" * 50\n  puts \"Current Price: $#{current_price}\"\n  puts \"Pattern Signal: #{current_signal}\"\n  puts \"Below 20 SMA: #{in_downtrend}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Calculate trade parameters\n  entry = current_price\n  pattern_high = [high[-2], high[-1]].max\n  stop = pattern_high * 1.02\n  risk = stop - entry\n  target = entry - (2 * risk)\n\n  puts \"SHORT TRADE SETUP:\"\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Stop Loss: $#{stop.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\n  puts \"Risk per share: $#{risk.round(2)}\"\n  puts \"\"\n  puts \"PATTERN DETAILS:\"\n  puts \"- First candle: Long black (selling pressure)\"\n  puts \"- Second candle: White thrust (weak rally)\"\n  puts \"- Close below midpoint: Insufficient buying\"\n  puts \"- Downtrend expected to continue\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_thrusting/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_thrusting/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>In-Neck Pattern: More bearish, closes at previous low</li> <li>On-Neck Pattern: Most bearish, closes below previous low</li> <li>Piercing Line: Bullish counterpart, closes above midpoint</li> <li>Dark Cloud Cover: Bearish reversal pattern</li> </ul>"},{"location":"indicators/patterns/cdl_thrusting/#complementary-patterns","title":"Complementary Patterns","text":"<ul> <li>Bearish Engulfing: Stronger bearish signal</li> <li>Evening Star: Bearish reversal pattern</li> <li>Three Black Crows: Strong bearish continuation</li> </ul>"},{"location":"indicators/patterns/cdl_thrusting/#indicator-combinations","title":"Indicator Combinations","text":"<ul> <li>RSI: Confirms bearish momentum below 50</li> <li>Moving Averages: Confirms downtrend structure</li> <li>MACD: Validates bearish momentum</li> </ul>"},{"location":"indicators/patterns/cdl_thrusting/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_thrusting/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify Thrusting pattern on trading timeframe (daily) 2. Confirm downtrend on higher timeframe (weekly) 3. Use lower timeframe (4-hour) for precise entry timing 4. Monitor for follow-through on all timeframes</p>"},{"location":"indicators/patterns/cdl_thrusting/#pattern-variations","title":"Pattern Variations","text":"<ul> <li>Strong Thrusting: Second candle closes near (but below) midpoint</li> <li>Weak Thrusting: Second candle barely penetrates first candle's body</li> <li>Volume Pattern: High volume first candle, declining volume second</li> </ul>"},{"location":"indicators/patterns/cdl_thrusting/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests: - Success rate: Approximately 54-60% for continuation - Average decline: 3-6% after pattern completion - Time to target: Usually 10-20 trading days - Less reliable than In-Neck or On-Neck patterns - Works better when combined with other bearish indicators</p>"},{"location":"indicators/patterns/cdl_thrusting/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"The Candlestick Course\" by Steve Nison</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> </ul>"},{"location":"indicators/patterns/cdl_thrusting/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Bearish Continuation Patterns</li> <li>In-Neck Pattern</li> <li>On-Neck Pattern</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_tristar/","title":"CDL_TRISTAR (Tristar)","text":""},{"location":"indicators/patterns/cdl_tristar/#overview","title":"Overview","text":"<p>The Tristar is a three-candle both candlestick pattern. This rare pattern consists of three consecutive doji candles, with the middle doji gapping away from the others, indicating a potential major trend reversal. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_tristar/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_tristar/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_tristar/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_tristar/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_tristar(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_tristar/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tristar/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_tristar(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tristar/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_tristar/#what-it-measures","title":"What It Measures","text":"<p>The Tristar pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_tristar/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns +100 (bullish) or -100 (bearish), or 0 (no pattern)</li> <li>Type: three-candle candlestick pattern</li> <li>Signal: Both indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_tristar/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_tristar/#signal-values","title":"Signal Values","text":"<ul> <li>+100 (bullish) or -100 (bearish): Pattern detected - indicates potential both signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_tristar/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_tristar/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_tristar/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tristar/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tristar/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_tristar/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_tristar/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_tristar/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_tristar/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_tristar/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_tristar(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Tristar PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_tristar/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_tristar/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_tristar/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_tristar/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_tristar/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_tristar/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_tristar/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_tristar/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_tristar/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_unique3river/","title":"CDL_UNIQUE3RIVER (Unique 3 River)","text":""},{"location":"indicators/patterns/cdl_unique3river/#overview","title":"Overview","text":"<p>The Unique 3 River is a three-candle bullish reversal candlestick pattern. This rare pattern consists of a long black candle, a small black candle making a new low, and a small white candle closing above the second candle, suggesting a potential bullish reversal. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_unique3river/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_unique3river/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_unique3river/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_unique3river/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_unique3river(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_unique3river/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_unique3river/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_unique3river(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_unique3river/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_unique3river/#what-it-measures","title":"What It Measures","text":"<p>The Unique 3 River pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_unique3river/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0, or 0 (no pattern)</li> <li>Type: three-candle candlestick pattern</li> <li>Signal: Bullish reversal indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_unique3river/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_unique3river/#signal-values","title":"Signal Values","text":"<ul> <li>0: Pattern detected - indicates potential bullish reversal signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_unique3river/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_unique3river/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_unique3river/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_unique3river/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_unique3river/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_unique3river/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_unique3river/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_unique3river/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_unique3river/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_unique3river/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_unique3river(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Unique 3 River PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_unique3river/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_unique3river/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_unique3river/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_unique3river/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_unique3river/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_unique3river/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_unique3river/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_unique3river/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_unique3river/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_upsidegap2crows/","title":"CDL_UPSIDEGAP2CROWS (Upside Gap Two Crows)","text":""},{"location":"indicators/patterns/cdl_upsidegap2crows/#overview","title":"Overview","text":"<p>The Upside Gap Two Crows is a three-candle bearish reversal candlestick pattern. It consists of a white candle, followed by a gap up to a small black candle, then a larger black candle that engulfs the second, suggesting a bearish reversal in an uptrend. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_upsidegap2crows/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_upsidegap2crows/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_upsidegap2crows(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_upsidegap2crows(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_upsidegap2crows/#what-it-measures","title":"What It Measures","text":"<p>The Upside Gap Two Crows pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns 0, or 0 (no pattern)</li> <li>Type: three-candle candlestick pattern</li> <li>Signal: Bearish reversal indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_upsidegap2crows/#signal-values","title":"Signal Values","text":"<ul> <li>0: Pattern detected - indicates potential bearish reversal signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_upsidegap2crows/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_upsidegap2crows/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_upsidegap2crows(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Upside Gap Two Crows PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_upsidegap2crows/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_upsidegap2crows/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_upsidegap2crows/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/patterns/cdl_xsidegap3methods/","title":"CDL_XSIDEGAP3METHODS (Upside/Downside Gap Three Methods)","text":""},{"location":"indicators/patterns/cdl_xsidegap3methods/#overview","title":"Overview","text":"<p>The Gap Three Methods is a three-candle both candlestick pattern. This continuation pattern features two same-colored candles with a gap, followed by an opposite-colored candle that fills the gap, confirming trend continuation. This pattern is recognized by TA-Lib and provides potential trading signals when specific price action criteria are met.</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of opening prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period"},{"location":"indicators/patterns/cdl_xsidegap3methods/#parameter-details","title":"Parameter Details","text":"<p>open - Array of opening prices for the analyzed time series - Must have the same length as high, low, and close arrays - Used to determine candle body size and direction</p> <p>high - Array of high prices for each period - Used to identify upper shadows and price ranges - Critical for pattern recognition</p> <p>low - Array of low prices for each period - Used to identify lower shadows and price ranges - Essential for pattern validation</p> <p>close - Array of closing prices for each period - Determines candle color (white/black) and body size - Key element in pattern recognition</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#usage","title":"Usage","text":""},{"location":"indicators/patterns/cdl_xsidegap3methods/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Example price data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\npattern = SQA::TAI.cdl_xsidegap3methods(open, high, low, close)\n\nputs \"Pattern signal: #{pattern.last}\"\n</code></pre>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#analyzing-pattern-signals","title":"Analyzing Pattern Signals","text":"<pre><code># Monitor for pattern signals\npattern.each_with_index do |signal, idx|\n  next if signal == 0\n\n  if signal &gt; 0\n    puts \"Bullish signal at index #{idx}\"\n  elsif signal &lt; 0\n    puts \"Bearish signal at index #{idx}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#combining-with-trend-indicators","title":"Combining with Trend Indicators","text":"<pre><code># Use with confirmation indicators\nrequire 'sqa/tai'\n\npattern = SQA::TAI.cdl_xsidegap3methods(open, high, low, close)\nsma_50 = SQA::TAI.sma(close, 50)\nrsi = SQA::TAI.rsi(close, 14)\n\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  trend_aligned = (current_signal &gt; 0 &amp;&amp; current_price &gt; sma_50.last) ||\n                  (current_signal &lt; 0 &amp;&amp; current_price &lt; sma_50.last)\n\n  if trend_aligned\n    puts \"Pattern confirmed by trend - #{current_signal &gt; 0 ? 'BULLISH' : 'BEARISH'}\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/patterns/cdl_xsidegap3methods/#what-it-measures","title":"What It Measures","text":"<p>The Gap Three Methods pattern measures specific price action characteristics that suggest potential market direction. Candlestick patterns capture market psychology through the interaction of opening, high, low, and closing prices within and across multiple periods.</p> <p>Key aspects: - Market sentiment through candle body size and position - Battle between bulls and bears through shadow formation - Momentum and trend continuation or reversal potential - Entry and exit timing through pattern completion</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#pattern-characteristics","title":"Pattern Characteristics","text":"<ul> <li>Range: Returns +100 (bullish) or -100 (bearish), or 0 (no pattern)</li> <li>Type: three-candle candlestick pattern</li> <li>Signal: Both indication</li> <li>Best Used: Context-dependent; works best in specific market conditions</li> <li>Reliability: Should be confirmed with other technical indicators</li> </ul>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#interpretation","title":"Interpretation","text":""},{"location":"indicators/patterns/cdl_xsidegap3methods/#signal-values","title":"Signal Values","text":"<ul> <li>+100 (bullish) or -100 (bearish): Pattern detected - indicates potential both signal</li> <li>0: No pattern present at this position</li> </ul>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#pattern-recognition","title":"Pattern Recognition","text":"<p>The pattern is identified by TA-Lib's recognition algorithms which analyze: - Relative candle body sizes - Shadow lengths and proportions - Price gaps between candles - Sequential candle colors and relationships - Overall market context</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/patterns/cdl_xsidegap3methods/#entry-signals","title":"Entry Signals","text":"<p>When the pattern appears:</p> <pre><code>if pattern.last != 0\n  entry_price = close.last\n\n  if pattern.last &gt; 0\n    # Bullish signal\n    stop_loss = low[-3..-1].min * 0.98\n    target = entry_price + 2 * (entry_price - stop_loss)\n    puts \"BUY Signal at $#{entry_price.round(2)}\"\n  else\n    # Bearish signal\n    stop_loss = high[-3..-1].max * 1.02\n    target = entry_price - 2 * (stop_loss - entry_price)\n    puts \"SELL Signal at $#{entry_price.round(2)}\"\n  end\n\n  puts \"Stop Loss: $#{stop_loss.round(2)}\"\n  puts \"Target: $#{target.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#risk-management","title":"Risk Management","text":"<pre><code># Calculate position size based on risk\ndef calculate_position_size(capital, risk_percent, entry, stop)\n  risk_amount = capital * (risk_percent / 100.0)\n  risk_per_share = (entry - stop).abs\n  shares = (risk_amount / risk_per_share).floor\n  return shares\nend\n\n# Example\nif pattern.last != 0\n  capital = 10000\n  risk_percent = 2\n  shares = calculate_position_size(capital, risk_percent, close.last, stop_loss)\n  puts \"Position size: #{shares} shares\"\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#best-practices","title":"Best Practices","text":""},{"location":"indicators/patterns/cdl_xsidegap3methods/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>This pattern works best when: - Used in conjunction with trend indicators - Combined with volume analysis - Confirmed by support/resistance levels - Applied on appropriate timeframes (daily, 4-hour) - Part of a comprehensive trading strategy</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Trend Indicators: - Moving Averages: Confirm overall trend direction - ADX: Verify trend strength - MACD: Validate momentum</p> <p>With Volume Indicators: - Volume: Confirm pattern with volume spikes - OBV: Check for volume trend alignment - VWAP: Validate price levels</p> <p>With Support/Resistance: - Key Levels: Pattern more significant at support/resistance - Fibonacci: Pattern at Fib levels adds conviction - Pivot Points: Confluence with pivots strengthens signal</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Using in Isolation: Always combine with other indicators</li> <li>Ignoring Context: Market conditions matter significantly</li> <li>Over-Trading: Not every pattern results in profitable trade</li> <li>Poor Risk Management: Always use stops and position sizing</li> <li>Missing Confirmation: Wait for pattern completion and confirmation</li> </ol>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#risk-management-guidelines","title":"Risk Management Guidelines","text":"<p>Stop Loss Placement: - Place stops beyond pattern extremes - Add buffer for volatility (1-2%) - Use ATR for dynamic stop placement - Consider time-based stops</p> <p>Position Sizing: - Risk no more than 1-2% per trade - Scale positions based on conviction - Consider market volatility - Adjust for pattern reliability</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#practical-example","title":"Practical Example","text":"<p>Complete trading scenario:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data\nopen =  [45.00, 46.00, 47.50, 49.00, 48.50]\nhigh =  [46.20, 47.80, 49.30, 50.00, 49.00]\nlow =   [44.80, 45.90, 47.30, 48.70, 48.00]\nclose = [46.00, 47.50, 49.00, 48.80, 48.50]\n\n# Calculate pattern and indicators\npattern = SQA::TAI.cdl_xsidegap3methods(open, high, low, close)\nsma_20 = SQA::TAI.sma(close, 5)\nrsi = SQA::TAI.rsi(close, 5)\n\n# Analysis\ncurrent_signal = pattern.last\ncurrent_price = close.last\n\nif current_signal != 0\n  puts \"=\" * 50\n  puts \"Gap Three Methods PATTERN DETECTED\"\n  puts \"=\" * 50\n  puts \"Signal: #{current_signal}\"\n  puts \"Current Price: $#{current_price}\"\n  puts \"SMA: $#{sma_20.last.round(2)}\"\n  puts \"RSI: #{rsi.last.round(2)}\"\n  puts \"\"\n\n  # Trading decision\n  if current_signal &gt; 0 &amp;&amp; current_price &gt; sma_20.last\n    puts \"BULLISH SETUP - Consider long position\"\n  elsif current_signal &lt; 0 &amp;&amp; current_price &lt; sma_20.last\n    puts \"BEARISH SETUP - Consider short position\"\n  else\n    puts \"Pattern detected but not confirmed by trend\"\n  end\nend\n</code></pre>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/patterns/cdl_xsidegap3methods/#similar-patterns","title":"Similar Patterns","text":"<ul> <li>Other candlestick patterns with similar characteristics</li> <li>Patterns that work well in conjunction</li> <li>Alternative patterns for same market conditions</li> </ul>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ADX: Trend strength confirmation</li> <li>RSI: Momentum validation</li> <li>Moving Averages: Trend direction</li> <li>Volume Indicators: Volume confirmation</li> </ul>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/patterns/cdl_xsidegap3methods/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>For stronger confirmation: 1. Identify pattern on primary timeframe 2. Confirm trend on higher timeframe 3. Use lower timeframe for entry timing 4. Ensure alignment across timeframes</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#pattern-reliability","title":"Pattern Reliability","text":"<p>Factors affecting pattern reliability: - Market conditions (trending vs ranging) - Volatility levels - Volume characteristics - Position within larger trend - Confluence with other signals</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#statistical-considerations","title":"Statistical Considerations","text":"<p>Research suggests candlestick patterns work best when: - Combined with other technical analysis tools - Applied in appropriate market contexts - Used with proper risk management - Confirmed by volume and momentum</p>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#references","title":"References","text":"<ul> <li>\"Japanese Candlestick Charting Techniques\" by Steve Nison</li> <li>\"Encyclopedia of Candlestick Charts\" by Thomas Bulkowski</li> <li>\"Technical Analysis of the Financial Markets\" by John J. Murphy</li> <li>\"Beyond Candlesticks\" by Steve Nison</li> </ul>"},{"location":"indicators/patterns/cdl_xsidegap3methods/#see-also","title":"See Also","text":"<ul> <li>Pattern Recognition Overview</li> <li>Candlestick Pattern Guide</li> <li>Technical Analysis Basics</li> <li>Back to Indicators</li> </ul>"},{"location":"indicators/price_transform/","title":"Price Transform Indicators","text":"<p>Price transform indicators create simplified or alternative representations of price data by combining OHLC values in different ways. These transformed prices can reduce noise and provide clearer signals for trend analysis and trading decisions.</p>"},{"location":"indicators/price_transform/#overview","title":"Overview","text":"<p>Price transform indicators help traders: - Reduce Market Noise: Smooth out erratic price movements - Identify True Price Levels: Focus on representative price points - Simplify Analysis: Use single values instead of full OHLC bars - Improve Indicator Accuracy: Feed cleaner data to other indicators</p>"},{"location":"indicators/price_transform/#available-price-transform-indicators","title":"Available Price Transform Indicators","text":""},{"location":"indicators/price_transform/#average-price-avgprice","title":"Average Price (AVGPRICE)","text":"<p>Simple average of open, high, low, and close prices.</p> <pre><code>avg_price = SQA::TAI.avgprice(open, high, low, close)\n</code></pre> <p>Key Features: - Equal weighting of all four price points - Smooths price action - Useful as base for other calculations</p> <p>Formula: <code>(Open + High + Low + Close) / 4</code></p>"},{"location":"indicators/price_transform/#median-price-medprice","title":"Median Price (MEDPRICE)","text":"<p>Midpoint of the high-low range for each period.</p> <pre><code>med_price = SQA::TAI.medprice(high, low)\n</code></pre> <p>Key Features: - Focuses on trading range midpoint - Ignores open and close - Good for range-bound markets</p> <p>Formula: <code>(High + Low) / 2</code></p>"},{"location":"indicators/price_transform/#typical-price-typprice","title":"Typical Price (TYPPRICE)","text":"<p>Weighted average emphasizing the high, low, and close.</p> <pre><code>typ_price = SQA::TAI.typprice(high, low, close)\n</code></pre> <p>Key Features: - Most commonly used transform - Represents \"typical\" trading activity - Used in many volume-weighted indicators</p> <p>Formula: <code>(High + Low + Close) / 3</code></p>"},{"location":"indicators/price_transform/#weighted-close-price-wclprice","title":"Weighted Close Price (WCLPRICE)","text":"<p>Price transform giving extra weight to the closing price.</p> <pre><code>wcl_price = SQA::TAI.wclprice(high, low, close)\n</code></pre> <p>Key Features: - Double weights the close - Emphasizes where price actually settled - Preferred when close is most important</p> <p>Formula: <code>(High + Low + Close + Close) / 4</code></p>"},{"location":"indicators/price_transform/#common-usage-patterns","title":"Common Usage Patterns","text":""},{"location":"indicators/price_transform/#basic-price-transformation","title":"Basic Price Transformation","text":"<pre><code>require 'sqa/tai'\n\n# Load OHLC data\nopen, high, low, close = load_ohlc('AAPL')\n\n# Calculate all price transforms\navg_price = SQA::TAI.avgprice(open, high, low, close)\nmed_price = SQA::TAI.medprice(high, low)\ntyp_price = SQA::TAI.typprice(high, low, close)\nwcl_price = SQA::TAI.wclprice(high, low, close)\n\nputs \"Current Price Analysis:\"\nputs \"Close: $#{close.last.round(2)}\"\nputs \"Average Price: $#{avg_price.last.round(2)}\"\nputs \"Median Price: $#{med_price.last.round(2)}\"\nputs \"Typical Price: $#{typ_price.last.round(2)}\"\nputs \"Weighted Close: $#{wcl_price.last.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/#using-transforms-with-moving-averages","title":"Using Transforms with Moving Averages","text":"<pre><code>require 'sqa/tai'\n\nhigh, low, close = load_hlc('MSFT')\n\n# Calculate typical price\ntypical = SQA::TAI.typprice(high, low, close)\n\n# Use typical price for moving averages\nsma_typical = SQA::TAI.sma(typical, period: 20)\nema_typical = SQA::TAI.ema(typical, period: 20)\n\n# Compare with standard close-based MA\nsma_close = SQA::TAI.sma(close, period: 20)\n\nputs \"Typical Price MA: $#{sma_typical.last.round(2)}\"\nputs \"Close Price MA: $#{sma_close.last.round(2)}\"\nputs \"Difference: $#{(sma_typical.last - sma_close.last).round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/#volatility-analysis-with-median-price","title":"Volatility Analysis with Median Price","text":"<pre><code>require 'sqa/tai'\n\nhigh, low, close = load_hlc('TSLA')\n\n# Calculate median price and standard close\nmed_price = SQA::TAI.medprice(high, low)\n\n# Calculate distance from median\ndeviation = close.zip(med_price).map { |c, m| ((c - m) / m * 100).round(2) }\n\nputs \"Close vs Median Price Analysis:\"\nputs \"Current close deviation: #{deviation.last}%\"\n\nif deviation.last.abs &gt; 2.0\n  puts \"Price extended from range midpoint\"\n  puts deviation.last &gt; 0 ? \"Trading near high\" : \"Trading near low\"\nelse\n  puts \"Price balanced around range midpoint\"\nend\n</code></pre>"},{"location":"indicators/price_transform/#choosing-the-right-transform","title":"Choosing the Right Transform","text":"<pre><code>require 'sqa/tai'\n\nopen, high, low, close = load_ohlc('NVDA')\n\n# Different scenarios call for different transforms\n\n# Scenario 1: Trend following (emphasize close)\nwcl = SQA::TAI.wclprice(high, low, close)\ntrend_signal = SQA::TAI.ema(wcl, period: 20)\n\n# Scenario 2: Range trading (emphasize midpoint)\nmed = SQA::TAI.medprice(high, low)\nrange_signal = SQA::TAI.sma(med, period: 20)\n\n# Scenario 3: Volume analysis (use typical)\ntyp = SQA::TAI.typprice(high, low, close)\n# typ commonly used with volume indicators\n\nputs \"Transform Selection Guide:\"\nputs \"Weighted Close (trend): $#{wcl.last.round(2)}\"\nputs \"Median (range): $#{med.last.round(2)}\"\nputs \"Typical (volume): $#{typ.last.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/#comparison-of-price-transforms","title":"Comparison of Price Transforms","text":"Transform Inputs Weights Best For AVGPRICE OHLC All equal General smoothing MEDPRICE HL Equal Range trading TYPPRICE HLC Equal Volume analysis WCLPRICE HLC Close x2 Trend following"},{"location":"indicators/price_transform/#best-practices","title":"Best Practices","text":""},{"location":"indicators/price_transform/#1-match-transform-to-strategy","title":"1. Match Transform to Strategy","text":"<pre><code># Trend following: Use WCLPRICE (emphasizes close)\n# Range trading: Use MEDPRICE (emphasizes midpoint)\n# Volume analysis: Use TYPPRICE (standard for volume)\n# General purpose: Use AVGPRICE (balanced)\n</code></pre>"},{"location":"indicators/price_transform/#2-consistency-is-key","title":"2. Consistency is Key","text":"<pre><code># Use same transform throughout analysis\n# Don't mix transforms in single strategy\n# Backtest to find best transform for your style\n</code></pre>"},{"location":"indicators/price_transform/#3-combine-with-other-indicators","title":"3. Combine with Other Indicators","text":"<pre><code># Transforms work best feeding other indicators\n# RSI on typical price vs close price\n# Moving averages on weighted close\n# Bollinger Bands on median price\n</code></pre>"},{"location":"indicators/price_transform/#4-consider-market-type","title":"4. Consider Market Type","text":"<pre><code># Trending markets: WCLPRICE or AVGPRICE\n# Choppy markets: MEDPRICE\n# High volume assets: TYPPRICE\n</code></pre>"},{"location":"indicators/price_transform/#example-complete-transform-analysis","title":"Example: Complete Transform Analysis","text":"<pre><code>require 'sqa/tai'\n\n# Load data\nopen, high, low, close = load_ohlc('AAPL')\n\n# Calculate all transforms\navg_price = SQA::TAI.avgprice(open, high, low, close)\nmed_price = SQA::TAI.medprice(high, low)\ntyp_price = SQA::TAI.typprice(high, low, close)\nwcl_price = SQA::TAI.wclprice(high, low, close)\n\nputs \"Price Transform Analysis\"\nputs \"=\" * 50\n\n# Current values\nputs \"\\nCurrent Prices:\"\nputs \"Close: $#{close.last.round(2)}\"\nputs \"Average: $#{avg_price.last.round(2)}\"\nputs \"Median: $#{med_price.last.round(2)}\"\nputs \"Typical: $#{typ_price.last.round(2)}\"\nputs \"Weighted Close: $#{wcl_price.last.round(2)}\"\n\n# Calculate relative positions\nputs \"\\nRelative to Close:\"\n[\n  ['Average', avg_price.last],\n  ['Median', med_price.last],\n  ['Typical', typ_price.last],\n  ['Weighted', wcl_price.last]\n].each do |name, value|\n  diff = ((value - close.last) / close.last * 100).round(2)\n  puts \"#{name}: #{diff}%\"\nend\n\n# Trend analysis using different transforms\nputs \"\\nTrend Analysis (20-period SMA):\"\n\nsma_close = SQA::TAI.sma(close, period: 20)\nsma_wcl = SQA::TAI.sma(wcl_price, period: 20)\nsma_typ = SQA::TAI.sma(typ_price, period: 20)\nsma_med = SQA::TAI.sma(med_price, period: 20)\n\n[\n  ['Close', close.last, sma_close.last],\n  ['Weighted', wcl_price.last, sma_wcl.last],\n  ['Typical', typ_price.last, sma_typ.last],\n  ['Median', med_price.last, sma_med.last]\n].each do |name, price, ma|\n  trend = price &gt; ma ? \"Above\" : \"Below\"\n  pct = ((price - ma) / ma * 100).round(2)\n  puts \"#{name}: #{trend} MA by #{pct.abs}%\"\nend\n\n# Volatility assessment\nrange_pct = ((high.last - low.last) / close.last * 100).round(2)\nclose_position = ((close.last - low.last) / (high.last - low.last) * 100).round(2)\n\nputs \"\\nVolatility Assessment:\"\nputs \"Daily Range: #{range_pct}%\"\nputs \"Close Position in Range: #{close_position.round(0)}%\"\n\nif close_position &gt; 70\n  puts \"Close near top of range - bullish\"\nelsif close_position &lt; 30\n  puts \"Close near bottom of range - bearish\"\nelse\n  puts \"Close near middle of range - neutral\"\nend\n\n# Recommendation\nputs \"\\nRecommended Transform:\"\nif range_pct &gt; 3.0\n  puts \"High volatility - use MEDPRICE for stability\"\nelsif close_position &gt; 60 || close_position &lt; 40\n  puts \"Strong directional move - use WCLPRICE\"\nelse\n  puts \"Balanced conditions - use TYPPRICE or AVGPRICE\"\nend\n</code></pre>"},{"location":"indicators/price_transform/#advanced-applications","title":"Advanced Applications","text":""},{"location":"indicators/price_transform/#custom-pivot-points","title":"Custom Pivot Points","text":"<pre><code># Traditional pivot uses typical price\ntypical = SQA::TAI.typprice(high, low, close)\npivot = typical.last\n\nresistance1 = 2 * pivot - low.last\nsupport1 = 2 * pivot - high.last\n\nputs \"Pivot: $#{pivot.round(2)}\"\nputs \"R1: $#{resistance1.round(2)}\"\nputs \"S1: $#{support1.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/#multi-timeframe-transform-analysis","title":"Multi-Timeframe Transform Analysis","text":"<pre><code># Daily typical price\ndaily_typ = SQA::TAI.typprice(daily_high, daily_low, daily_close)\ndaily_ma = SQA::TAI.sma(daily_typ, period: 50)\n\n# Hourly typical price\nhourly_typ = SQA::TAI.typprice(hourly_high, hourly_low, hourly_close)\nhourly_ma = SQA::TAI.sma(hourly_typ, period: 20)\n\n# Align timeframes\nif hourly_typ.last &gt; hourly_ma.last &amp;&amp; daily_typ.last &gt; daily_ma.last\n  puts \"Both timeframes bullish\"\nend\n</code></pre>"},{"location":"indicators/price_transform/#see-also","title":"See Also","text":"<ul> <li>Average Price (AVGPRICE)</li> <li>Median Price (MEDPRICE)</li> <li>Typical Price (TYPPRICE)</li> <li>Weighted Close Price (WCLPRICE)</li> <li>Back to Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/price_transform/avgprice/","title":"AVGPRICE (Average Price)","text":""},{"location":"indicators/price_transform/avgprice/#overview","title":"Overview","text":"<p>The Average Price (AVGPRICE) is a simple yet effective price transformation indicator that calculates the arithmetic mean of the Open, High, Low, and Close (OHLC) prices for each period. This indicator provides a balanced representation of price action by giving equal weight to all four critical price points, creating a smoothed price series that reduces noise and captures the true center of each period's trading range.</p>"},{"location":"indicators/price_transform/avgprice/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>open</code> Array Required Array of open prices for each period <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of close prices for each period"},{"location":"indicators/price_transform/avgprice/#parameter-details","title":"Parameter Details","text":"<p>open - Opening price for each trading period - Represents the first traded price when the period begins - Critical for understanding session gaps and overnight market action - All arrays must have the same length</p> <p>high - Highest price reached during each trading period - Captures maximum bullish momentum for the period - Important for identifying resistance levels and breakout points - All arrays must have the same length</p> <p>low - Lowest price reached during each trading period - Captures maximum bearish pressure for the period - Important for identifying support levels and breakdown points - All arrays must have the same length</p> <p>close - Closing price for each trading period - Represents the final settlement price for the period - Often considered the most important price point - All arrays must have the same length</p>"},{"location":"indicators/price_transform/avgprice/#usage","title":"Usage","text":""},{"location":"indicators/price_transform/avgprice/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Sample OHLC data\nopen =  [48.00, 48.20, 48.50, 48.40, 48.30]\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\n# Calculate average price\navgprice = SQA::TAI.avgprice(open, high, low, close)\n\nputs \"Current Average Price: #{avgprice.last.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/avgprice/#with-real-market-data","title":"With Real Market Data","text":"<pre><code># Load historical OHLC data\nohlc_data = load_historical_data('AAPL')\nopen  = ohlc_data.map(&amp;:open)\nhigh  = ohlc_data.map(&amp;:high)\nlow   = ohlc_data.map(&amp;:low)\nclose = ohlc_data.map(&amp;:close)\n\n# Calculate average price series\navgprice = SQA::TAI.avgprice(open, high, low, close)\n\n# Display recent values\nputs \"Last 5 Average Prices:\"\navgprice.last(5).each_with_index do |price, i|\n  puts \"#{i+1}. #{price.round(4)}\"\nend\n</code></pre>"},{"location":"indicators/price_transform/avgprice/#multiple-timeframe-analysis","title":"Multiple Timeframe Analysis","text":"<pre><code># Daily and hourly data\ndaily_ohlc = load_historical_data('SPY', timeframe: 'daily')\nhourly_ohlc = load_historical_data('SPY', timeframe: 'hourly')\n\ndaily_avg = SQA::TAI.avgprice(\n  daily_ohlc.map(&amp;:open),\n  daily_ohlc.map(&amp;:high),\n  daily_ohlc.map(&amp;:low),\n  daily_ohlc.map(&amp;:close)\n)\n\nhourly_avg = SQA::TAI.avgprice(\n  hourly_ohlc.map(&amp;:open),\n  hourly_ohlc.map(&amp;:high),\n  hourly_ohlc.map(&amp;:low),\n  hourly_ohlc.map(&amp;:close)\n)\n\nputs \"Daily Average Price: #{daily_avg.last.round(2)}\"\nputs \"Current Hourly Average Price: #{hourly_avg.last.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/avgprice/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/price_transform/avgprice/#what-it-measures","title":"What It Measures","text":"<p>The Average Price provides a comprehensive snapshot of price action by considering all four critical price points:</p> <ul> <li>True Center Point: Unlike using only close prices, AVGPRICE captures the mathematical center of the entire period's trading range</li> <li>Reduced Noise: By averaging four price points, random price spikes or drops are smoothed out, revealing underlying trends</li> <li>Balanced Representation: Equal weighting of OHLC ensures no single price point dominates the analysis</li> <li>Session Completeness: Incorporates the full price journey from open through the high-low range to close</li> </ul> <p>AVGPRICE answers the question: \"What is the fair average value where the market traded during this period?\"</p>"},{"location":"indicators/price_transform/avgprice/#calculation-method","title":"Calculation Method","text":"<p>The Average Price is calculated using a simple arithmetic mean:</p> <ol> <li>Sum all four prices: Add Open + High + Low + Close</li> <li>Divide by four: Calculate the arithmetic mean</li> <li>Result: A single average price value that represents the period</li> </ol> <p>Formula: <pre><code>AVGPRICE = (Open + High + Low + Close) / 4\n\nWhere:\n- Open = Opening price of the period\n- High = Highest price reached during the period\n- Low = Lowest price reached during the period\n- Close = Closing price of the period\n- Result is a simple average (arithmetic mean)\n</code></pre></p>"},{"location":"indicators/price_transform/avgprice/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (can be any positive value, bounded by the price range of the security)</li> <li>Type: Price transformation indicator / smoothing indicator</li> <li>Lag: Minimal (real-time calculation with no historical dependencies)</li> <li>Best Used: Smoothing price series, base for further calculations, trend identification, reducing noise in volatile markets</li> <li>Limitations: Loses some information by simplifying four values into one; may not reflect intraday dynamics for long-period charts</li> </ul>"},{"location":"indicators/price_transform/avgprice/#interpretation","title":"Interpretation","text":""},{"location":"indicators/price_transform/avgprice/#value-ranges","title":"Value Ranges","text":"<p>The Average Price itself doesn't have fixed interpretation levels, but its relationship to other price points provides valuable insights:</p> <ul> <li>AVGPRICE = Close: Balanced session - close is at the average of the range</li> <li>AVGPRICE &gt; Close: Weak close - price closed below the period's average, suggesting bearish pressure</li> <li>AVGPRICE &lt; Close: Strong close - price closed above the period's average, suggesting bullish strength</li> <li>AVGPRICE near High: Bullish session - most trading occurred in upper range</li> <li>AVGPRICE near Low: Bearish session - most trading occurred in lower range</li> </ul>"},{"location":"indicators/price_transform/avgprice/#key-levels","title":"Key Levels","text":"<ul> <li>Close vs AVGPRICE: Primary relationship to assess session strength</li> <li>Close &gt; AVGPRICE: Bulls controlled the close</li> <li>Close &lt; AVGPRICE: Bears controlled the close</li> <li> <p>Close = AVGPRICE: Neutral session</p> </li> <li> <p>AVGPRICE as Support/Resistance: When price approaches previous AVGPRICE levels, it may act as support (below) or resistance (above)</p> </li> <li> <p>Moving Average of AVGPRICE: Applying a moving average to AVGPRICE creates a double-smoothed trend indicator</p> </li> </ul>"},{"location":"indicators/price_transform/avgprice/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read Average Price signals:</p> <ol> <li>Trend Direction</li> <li>Series of rising AVGPRICE values: Uptrend</li> <li>Series of falling AVGPRICE values: Downtrend</li> <li> <p>Flat AVGPRICE values: Consolidation or range-bound</p> </li> <li> <p>Price Strength</p> </li> <li>Close consistently above AVGPRICE: Strong bullish momentum</li> <li>Close consistently below AVGPRICE: Strong bearish momentum</li> <li> <p>Close oscillating around AVGPRICE: Balanced trading, no clear momentum</p> </li> <li> <p>Volatility Assessment</p> </li> <li>Large difference between AVGPRICE and Close: High intraday volatility</li> <li>Small difference between AVGPRICE and Close: Low volatility, tight range trading</li> <li>AVGPRICE smooths out extreme values compared to using Close alone</li> </ol>"},{"location":"indicators/price_transform/avgprice/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/price_transform/avgprice/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal - Close Above Average: Current close crosses above AVGPRICE after being below</li> <li>Indicates shift from weak to strong session</li> <li>Best when occurring after oversold conditions</li> <li> <p>Confirms buyers stepped in during the session</p> </li> <li> <p>Confirmation Signal - AVGPRICE Uptrend: Rising series of AVGPRICE values</p> </li> <li>Confirms underlying trend is bullish</li> <li>Provides objective measure of trend direction</li> <li> <p>Works as trend filter for other indicators</p> </li> <li> <p>Support Test: Price declines to previous AVGPRICE levels and bounces</p> </li> <li>AVGPRICE from prior periods can act as support</li> <li>Bounce from AVGPRICE support suggests buying interest</li> <li>Strongest when combined with volume confirmation</li> </ol> <p>Example Scenario: <pre><code>When price has been below AVGPRICE for several periods (weak closes),\nand then closes above AVGPRICE, consider a long position:\n- Confirms shift from bearish to bullish momentum\n- Entry: On close above AVGPRICE\n- Stop Loss: Below recent AVGPRICE low\n- Target: Previous resistance or when close falls below AVGPRICE\n</code></pre></p>"},{"location":"indicators/price_transform/avgprice/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal - Close Below Average: Current close crosses below AVGPRICE after being above</li> <li>Indicates shift from strong to weak session</li> <li>Best when occurring after overbought conditions</li> <li> <p>Confirms sellers controlled the session close</p> </li> <li> <p>Confirmation Signal - AVGPRICE Downtrend: Falling series of AVGPRICE values</p> </li> <li>Confirms underlying trend is bearish</li> <li>Provides objective measure of trend deterioration</li> <li> <p>Works as trend filter to avoid longs</p> </li> <li> <p>Resistance Test: Price rallies to previous AVGPRICE levels and fails</p> </li> <li>AVGPRICE from prior periods can act as resistance</li> <li>Rejection at AVGPRICE resistance suggests selling pressure</li> <li>Strongest when combined with volume confirmation</li> </ol> <p>Example Scenario: <pre><code>When price has been above AVGPRICE for several periods (strong closes),\nand then closes below AVGPRICE, consider closing longs or initiating shorts:\n- Confirms shift from bullish to bearish momentum\n- Entry: On close below AVGPRICE\n- Stop Loss: Above recent AVGPRICE high\n- Target: Previous support or when close rises above AVGPRICE\n</code></pre></p>"},{"location":"indicators/price_transform/avgprice/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Pattern: Price makes lower low, but AVGPRICE makes higher low - Identification: Compare recent price lows with corresponding AVGPRICE values - Significance: Suggests the average trading level is improving even as price makes new lows - Reliability: Moderate - works best when combined with momentum indicators - Example: Stock drops to $50 (AVGPRICE $51), then to $49 (AVGPRICE $51.50). Price made new low but AVGPRICE held higher, suggesting accumulation.</p> <p>Bearish Divergence: - Pattern: Price makes higher high, but AVGPRICE makes lower high - Identification: Compare recent price highs with corresponding AVGPRICE values - Significance: Suggests the average trading level is deteriorating even as price makes new highs - Reliability: Moderate - works best when combined with momentum indicators - Example: Stock rises to $100 (AVGPRICE $98), then to $102 (AVGPRICE $97). Price made new high but AVGPRICE is lower, suggesting distribution.</p>"},{"location":"indicators/price_transform/avgprice/#best-practices","title":"Best Practices","text":""},{"location":"indicators/price_transform/avgprice/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When Average Price works best:</p> <ul> <li>Market conditions: All market conditions - trending, ranging, volatile, or calm. AVGPRICE is a neutral transformation that works universally.</li> <li>Time frames: Works on all timeframes - intraday (1-min, 5-min), daily, weekly, monthly. Most commonly used on daily charts.</li> <li>Asset classes: Applicable to all assets with OHLC data - stocks, forex, commodities, cryptocurrencies, indices, futures.</li> <li>Volatility: Particularly useful in volatile markets where close prices alone may misrepresent the period's true trading center.</li> </ul>"},{"location":"indicators/price_transform/avgprice/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Moving Averages: Apply SMA or EMA to AVGPRICE series for double-smoothed trend indicators. This reduces noise further while maintaining trend sensitivity.   <pre><code>avgprice = SQA::TAI.avgprice(open, high, low, close)\navgprice_sma = SQA::TAI.sma(avgprice, period: 20)\n</code></pre></p> </li> <li> <p>With Momentum Indicators: Use AVGPRICE as the input for RSI, MACD, or Stochastic instead of close prices. This provides momentum analysis based on the period's average rather than just the close.   <pre><code>avgprice = SQA::TAI.avgprice(open, high, low, close)\nrsi_on_avg = SQA::TAI.rsi(avgprice, period: 14)\n</code></pre></p> </li> <li> <p>With Volatility Indicators: Compare AVGPRICE to Bollinger Bands or ATR to assess whether the average price is within normal volatility ranges.</p> </li> <li> <p>With Volume: Combine AVGPRICE with volume analysis. High volume at AVGPRICE levels confirms significance of that price zone.</p> </li> </ul>"},{"location":"indicators/price_transform/avgprice/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Using alone for trading decisions: AVGPRICE is a smoothing tool, not a complete trading system. Always combine with trend, momentum, or volume indicators for confirmation.</p> </li> <li> <p>Ignoring the price components: While AVGPRICE provides a smooth average, check the individual OHLC components. Large spreads between high and low indicate volatility that AVGPRICE masks.</p> </li> <li> <p>Over-smoothing: Applying multiple layers of smoothing (AVGPRICE \u2192 SMA \u2192 EMA) can create excessive lag and delayed signals.</p> </li> <li> <p>Neglecting timeframe context: AVGPRICE on a 5-minute chart has different implications than on a daily chart. Match your analysis timeframe to your trading horizon.</p> </li> </ol>"},{"location":"indicators/price_transform/avgprice/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>AVGPRICE has no configurable parameters (always uses all four OHLC values), but consider these factors when using it:</p> <ul> <li>Short-term trading (day trading):</li> <li>Use AVGPRICE on 1-min to 15-min charts</li> <li>Focus on Close vs AVGPRICE relationship for entry/exit timing</li> <li> <p>Quick reversals: Watch for close crossing AVGPRICE</p> </li> <li> <p>Medium-term trading (swing trading):</p> </li> <li>Use AVGPRICE on hourly or daily charts</li> <li>Apply moving averages to AVGPRICE for trend identification</li> <li> <p>Look for AVGPRICE trend alignment with price trend</p> </li> <li> <p>Long-term trading (position trading):</p> </li> <li>Use AVGPRICE on daily or weekly charts</li> <li>Focus on long-term AVGPRICE trends</li> <li>Combine with fundamental analysis for major positions</li> </ul>"},{"location":"indicators/price_transform/avgprice/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Historical OHLC data for a stock\nhistorical_data = [\n  { open: 48.00, high: 48.70, low: 47.79, close: 48.20 },\n  { open: 48.20, high: 48.72, low: 48.14, close: 48.61 },\n  { open: 48.50, high: 48.90, low: 48.39, close: 48.75 },\n  { open: 48.40, high: 48.87, low: 48.37, close: 48.63 },\n  { open: 48.30, high: 48.82, low: 48.24, close: 48.74 },\n  { open: 48.60, high: 49.05, low: 48.50, close: 48.95 },\n  { open: 48.80, high: 49.20, low: 48.70, close: 49.10 },\n  { open: 49.00, high: 49.50, low: 48.85, close: 49.35 },\n  { open: 49.20, high: 49.80, low: 49.10, close: 49.60 },\n  { open: 49.50, high: 50.00, low: 49.30, close: 49.85 }\n]\n\n# Extract OHLC arrays\nopen  = historical_data.map { |d| d[:open] }\nhigh  = historical_data.map { |d| d[:high] }\nlow   = historical_data.map { |d| d[:low] }\nclose = historical_data.map { |d| d[:close] }\n\n# Calculate Average Price\navgprice = SQA::TAI.avgprice(open, high, low, close)\n\n# Calculate supporting indicators\navgprice_sma = SQA::TAI.sma(avgprice, period: 5)\nclose_sma = SQA::TAI.sma(close, period: 5)\n\n# Current values\ncurrent_close = close.last\ncurrent_avgprice = avgprice.last\nprevious_close = close[-2]\nprevious_avgprice = avgprice[-2]\n\nputs \"=== Average Price Trading Analysis ===\"\nputs \"Current Close: #{current_close.round(2)}\"\nputs \"Current AVGPRICE: #{current_avgprice.round(2)}\"\nputs \"Difference: #{(current_close - current_avgprice).round(4)}\"\nputs\n\n# Analyze close strength relative to AVGPRICE\nclose_position = ((current_close - current_avgprice) / current_avgprice * 100).round(2)\n\nif current_close &gt; current_avgprice\n  puts \"STRONG CLOSE: Close is #{close_position.abs}% above AVGPRICE\"\n  puts \"Interpretation: Bulls controlled the session\"\n  puts \"Price closed in upper portion of the range\"\nelsif current_close &lt; current_avgprice\n  puts \"WEAK CLOSE: Close is #{close_position.abs}% below AVGPRICE\"\n  puts \"Interpretation: Bears controlled the session\"\n  puts \"Price closed in lower portion of the range\"\nelse\n  puts \"NEUTRAL CLOSE: Close equals AVGPRICE\"\n  puts \"Interpretation: Balanced session, no clear advantage\"\nend\nputs\n\n# Check for crossovers (trading signals)\nif previous_close &lt;= previous_avgprice &amp;&amp; current_close &gt; current_avgprice\n  puts \"BUY SIGNAL: Close crossed above AVGPRICE\"\n  puts \"Action: Consider long entry\"\n  puts \"Entry: #{current_close.round(2)}\"\n  puts \"Stop Loss: #{(current_close * 0.98).round(2)} (2% below)\"\n  puts \"Rationale: Shift from weak to strong closes indicates potential uptrend\"\n  puts\n\nelsif previous_close &gt;= previous_avgprice &amp;&amp; current_close &lt; current_avgprice\n  puts \"SELL SIGNAL: Close crossed below AVGPRICE\"\n  puts \"Action: Consider closing longs or short entry\"\n  puts \"Entry: #{current_close.round(2)}\"\n  puts \"Stop Loss: #{(current_close * 1.02).round(2)} (2% above)\"\n  puts \"Rationale: Shift from strong to weak closes indicates potential downtrend\"\n  puts\nend\n\n# Trend analysis using AVGPRICE\nputs \"=== Trend Analysis ===\"\nrecent_avgprices = avgprice.last(5)\n\nif recent_avgprices.each_cons(2).all? { |a, b| b &gt; a }\n  puts \"AVGPRICE Trend: STRONG UPTREND\"\n  puts \"Last 5 AVGPRICE values are consistently rising\"\n  puts \"Strategy: Look for dips to buy, hold long positions\"\nelsif recent_avgprices.each_cons(2).all? { |a, b| b &lt; a }\n  puts \"AVGPRICE Trend: STRONG DOWNTREND\"\n  puts \"Last 5 AVGPRICE values are consistently falling\"\n  puts \"Strategy: Look for rallies to sell, avoid long positions\"\nelse\n  puts \"AVGPRICE Trend: MIXED/CONSOLIDATING\"\n  puts \"No clear directional trend in AVGPRICE\"\n  puts \"Strategy: Range trading, wait for breakout confirmation\"\nend\nputs\n\n# Compare smoothed AVGPRICE to smoothed close\nif avgprice_sma.last &gt; close_sma.last\n  puts \"AVGPRICE SMA &gt; Close SMA\"\n  puts \"Interpretation: Recent closes have been below average ranges\"\n  puts \"Potential: Market may be oversold or weakening\"\nelsif avgprice_sma.last &lt; close_sma.last\n  puts \"AVGPRICE SMA &lt; Close SMA\"\n  puts \"Interpretation: Recent closes have been above average ranges\"\n  puts \"Potential: Market may be overbought or strengthening\"\nelse\n  puts \"AVGPRICE SMA \u2248 Close SMA\"\n  puts \"Interpretation: Balanced trading, closes near range midpoints\"\nend\n\n# Volatility assessment using AVGPRICE\nputs \"\\n=== Volatility Assessment ===\"\nvolatility_score = historical_data.map do |d|\n  avg = (d[:open] + d[:high] + d[:low] + d[:close]) / 4.0\n  (d[:close] - avg).abs\nend.last(5).reduce(:+) / 5.0\n\nputs \"Average deviation of Close from AVGPRICE (last 5 periods): #{volatility_score.round(4)}\"\nif volatility_score &gt; current_avgprice * 0.01\n  puts \"HIGH VOLATILITY: Closes vary significantly from AVGPRICE\"\n  puts \"Implication: Wide intraday ranges, increased risk\"\nelsif volatility_score &lt; current_avgprice * 0.003\n  puts \"LOW VOLATILITY: Closes near AVGPRICE consistently\"\n  puts \"Implication: Tight trading ranges, potential for breakout\"\nelse\n  puts \"MODERATE VOLATILITY: Normal variation between Close and AVGPRICE\"\nend\n</code></pre>"},{"location":"indicators/price_transform/avgprice/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/price_transform/avgprice/#similar-indicators","title":"Similar Indicators","text":"<ul> <li> <p>MEDPRICE (Median Price): Calculates (High + Low) / 2. MEDPRICE focuses only on the trading range extremes, while AVGPRICE includes open and close. Use MEDPRICE when you want to focus purely on the range center regardless of where the session opened or closed.</p> </li> <li> <p>TYPPRICE (Typical Price): Calculates (High + Low + Close) / 3. TYPPRICE gives more weight to the close by excluding open. Use TYPPRICE when the close is most important, AVGPRICE when all four values matter equally.</p> </li> <li> <p>WCLPRICE (Weighted Close Price): Calculates (High + Low + Close + Close) / 4, giving double weight to close. WCLPRICE emphasizes the close while AVGPRICE treats all values equally. Use WCLPRICE when close is most significant.</p> </li> </ul>"},{"location":"indicators/price_transform/avgprice/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li> <p>SMA (Simple Moving Average): Apply SMA to AVGPRICE for a double-smoothed trend indicator. This combination reduces noise while maintaining trend identification capability.</p> </li> <li> <p>ATR (Average True Range): Use ATR to measure volatility while AVGPRICE provides the price center. Together they give both central tendency and dispersion measures.</p> </li> <li> <p>RSI (Relative Strength Index): Calculate RSI using AVGPRICE instead of close for momentum analysis based on the period's average rather than just the closing value.</p> </li> </ul>"},{"location":"indicators/price_transform/avgprice/#indicator-family","title":"Indicator Family","text":"<p>AVGPRICE belongs to the price transformation family: - AVGPRICE: Equal-weighted average of all four OHLC values - MEDPRICE: Simple average of high and low (range midpoint) - TYPPRICE: Weighted average emphasizing close over high/low - WCLPRICE: Heavily weighted toward close (double weight)</p> <p>When to prefer AVGPRICE: When you want an unbiased, balanced representation of the period's trading activity. AVGPRICE gives equal importance to the open, high, low, and close, making it ideal when no single price point should dominate the analysis.</p>"},{"location":"indicators/price_transform/avgprice/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/price_transform/avgprice/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use AVGPRICE across multiple timeframes for comprehensive analysis:</p> <ul> <li>Higher timeframe AVGPRICE (daily/weekly) identifies major support/resistance levels and primary trend direction</li> <li>Lower timeframe AVGPRICE (hourly/4H) provides precise entry/exit timing within the higher timeframe context</li> <li>Strongest signals occur when close crosses AVGPRICE on multiple timeframes simultaneously</li> </ul> <p>Example: If daily AVGPRICE shows an uptrend and hourly close crosses above hourly AVGPRICE, this represents a high-probability long entry with both timeframes aligned.</p>"},{"location":"indicators/price_transform/avgprice/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>AVGPRICE behavior in different market conditions:</p> <ul> <li> <p>Bull Markets: AVGPRICE tends to rise steadily. Closes consistently above AVGPRICE indicate strong hands accumulating. Use AVGPRICE pullbacks as buying opportunities.</p> </li> <li> <p>Bear Markets: AVGPRICE trends downward. Closes consistently below AVGPRICE indicate distribution. Use AVGPRICE rallies as selling opportunities.</p> </li> <li> <p>Ranging Markets: AVGPRICE oscillates within a range. Use AVGPRICE as a dynamic support/resistance level within the range boundaries.</p> </li> <li> <p>High Volatility: Large gap between individual OHLC values means AVGPRICE provides significant smoothing. Particularly valuable for filtering noise.</p> </li> <li> <p>Low Volatility: AVGPRICE, close, and other price transformations converge tightly. Less differentiation between indicators.</p> </li> </ul>"},{"location":"indicators/price_transform/avgprice/#statistical-validation","title":"Statistical Validation","text":"<p>AVGPRICE reliability and characteristics:</p> <ul> <li> <p>Smoothing Effect: AVGPRICE reduces standard deviation of price series by approximately 20-30% compared to close prices alone, depending on volatility.</p> </li> <li> <p>Central Tendency: AVGPRICE represents the true mathematical center of the period's price action, making it an unbiased measure of central tendency.</p> </li> <li> <p>Lag: Zero lag - AVGPRICE is calculated in real-time with current period data. Unlike moving averages, there is no historical dependency creating lag.</p> </li> <li> <p>Correlation with Close: High correlation (typically 0.95-0.99) with close prices, but smoother and less susceptible to extreme values.</p> </li> <li> <p>Optimal Applications: Most effective when used as input for other indicators or as a smoothed price series for trend analysis. Less effective as a standalone trading signal generator.</p> </li> </ul>"},{"location":"indicators/price_transform/avgprice/#references","title":"References","text":"<ul> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999) - Discussion of price transformation indicators</li> <li>Achelis, Steven B. \"Technical Analysis from A to Z\" (2000) - Comprehensive overview of price transformation techniques</li> <li>Kirkpatrick, Charles D. &amp; Dahlquist, Julie R. \"Technical Analysis: The Complete Resource for Financial Market Technicians\" (2010)</li> <li>StockCharts: Price Transformations</li> <li>TradingView: Price Calculations</li> </ul>"},{"location":"indicators/price_transform/avgprice/#see-also","title":"See Also","text":"<ul> <li>Price Transform Indicators Overview</li> <li>MEDPRICE (Median Price)</li> <li>TYPPRICE (Typical Price)</li> <li>WCLPRICE (Weighted Close Price)</li> <li>Basic Usage Guide</li> <li>API Reference</li> </ul>"},{"location":"indicators/price_transform/medprice/","title":"Median Price (MEDPRICE)","text":"<p>The Median Price (MEDPRICE) is a price transformation that calculates the midpoint between the high and low prices for each period. Unlike the close price, which only captures the final transaction price, the median price represents the typical intraday midpoint, filtering out some noise while providing a balanced view of the trading range. It's commonly used as input to other technical indicators and for smoothing price data in analysis.</p>"},{"location":"indicators/price_transform/medprice/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh = [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =  [47.79, 48.14, 48.39, 48.37, 48.24]\n\nmedprice = SQA::TAI.medprice(high, low)\n\nputs \"Current Median Price: #{medprice.last.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/medprice/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices for each period <code>low</code> Array Yes - Array of low prices for each period"},{"location":"indicators/price_transform/medprice/#returns","title":"Returns","text":"<p>Returns an array of median price values, one for each period. No warmup period needed as this is a simple bar-by-bar calculation.</p>"},{"location":"indicators/price_transform/medprice/#formula","title":"Formula","text":"<pre><code>Median Price = (High + Low) / 2\n</code></pre> <p>This formula calculates the arithmetic mean of the highest and lowest prices traded during each period, representing the midpoint of the trading range.</p>"},{"location":"indicators/price_transform/medprice/#interpretation","title":"Interpretation","text":"Concept Description Typical Midpoint Represents the average of extremes, smoothing intraday volatility Range Center Shows where price action centered during the period Noise Filtering Less affected by gap openings or volatile closes Balance Point Captures both buying and selling extremes equally <p>The median price is particularly useful when: - You want to reduce the impact of outlier closes - Analyzing the typical price level for a period - Building indicators that need smoothed price input - Comparing price action across different securities</p>"},{"location":"indicators/price_transform/medprice/#example-basic-medprice-calculation","title":"Example: Basic MEDPRICE Calculation","text":"<pre><code>high =      [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =       [47.79, 48.14, 48.39, 48.37, 48.24]\nclose =     [48.20, 48.61, 48.75, 48.63, 48.74]\n\nmedprice = SQA::TAI.medprice(high, low)\n\n# Compare median price to close\nputs \"Period Analysis:\"\nmedprice.each_with_index do |mp, i|\n  difference = close[i] - mp\n  position = difference &gt; 0 ? \"above\" : \"below\"\n\n  puts \"Period #{i+1}:\"\n  puts \"  High: #{high[i]}, Low: #{low[i]}, Close: #{close[i]}\"\n  puts \"  Median Price: #{mp.round(2)}\"\n  puts \"  Close is #{difference.abs.round(2)} #{position} median\"\n  puts \"  #{difference &gt; 0 ? 'Bullish close (upper half)' : 'Bearish close (lower half)'}\"\n  puts\nend\n</code></pre>"},{"location":"indicators/price_transform/medprice/#example-medprice-vs-close-price","title":"Example: MEDPRICE vs Close Price","text":"<pre><code>high_prices =  load_historical_data('AAPL', field: :high)\nlow_prices =   load_historical_data('AAPL', field: :low)\nclose_prices = load_historical_data('AAPL', field: :close)\n\nmedprice = SQA::TAI.medprice(high_prices, low_prices)\n\n# Analyze where closes fall relative to median\nrecent_periods = 20\nupper_half_closes = 0\nlower_half_closes = 0\n\nrecent_periods.times do |i|\n  index = -(i + 1)\n  if close_prices[index] &gt; medprice[index]\n    upper_half_closes += 1\n  else\n    lower_half_closes += 1\n  end\nend\n\nputs \"Last #{recent_periods} periods:\"\nputs \"Closes in upper half: #{upper_half_closes} (#{(upper_half_closes.to_f/recent_periods*100).round(1)}%)\"\nputs \"Closes in lower half: #{lower_half_closes} (#{(lower_half_closes.to_f/recent_periods*100).round(1)}%)\"\n\nif upper_half_closes &gt; lower_half_closes * 1.5\n  puts \"Strong bullish bias - closes consistently in upper range\"\nelsif lower_half_closes &gt; upper_half_closes * 1.5\n  puts \"Strong bearish bias - closes consistently in lower range\"\nelse\n  puts \"Balanced - no clear directional bias\"\nend\n</code></pre>"},{"location":"indicators/price_transform/medprice/#example-medprice-as-moving-average-input","title":"Example: MEDPRICE as Moving Average Input","text":"<pre><code>high_prices = load_historical_data('MSFT', field: :high)\nlow_prices =  load_historical_data('MSFT', field: :low)\nclose_prices = load_historical_data('MSFT', field: :close)\n\n# Compare different moving average inputs\nma_close = SQA::TAI.sma(close_prices, period: 20)\n\nmedprice = SQA::TAI.medprice(high_prices, low_prices)\nma_median = SQA::TAI.sma(medprice, period: 20)\n\ncurrent_close = close_prices.last\ncurrent_ma_close = ma_close.last\ncurrent_ma_median = ma_median.last\n\nputs \"Moving Average Comparison (20-period):\"\nputs \"Price: #{current_close.round(2)}\"\nputs \"MA of Close: #{current_ma_close.round(2)}\"\nputs \"MA of Median: #{current_ma_median.round(2)}\"\nputs \"Difference: #{(current_ma_close - current_ma_median).round(2)}\"\n\n# Median-based MA is often smoother and less affected by gaps\nif (current_close - current_ma_median).abs &lt; (current_close - current_ma_close).abs\n  puts \"MA of Median Price provides tighter support/resistance\"\nend\n</code></pre>"},{"location":"indicators/price_transform/medprice/#example-support-and-resistance-levels","title":"Example: Support and Resistance Levels","text":"<pre><code>high_prices = load_historical_data('TSLA', field: :high)\nlow_prices =  load_historical_data('TSLA', field: :low)\n\nmedprice = SQA::TAI.medprice(high_prices, low_prices)\n\n# Find recent pivot points using median price\nlookback = 50\nrecent_medians = medprice[-lookback..-1]\n\n# Calculate potential support/resistance zones\nresistance_zone = recent_medians.max\nsupport_zone = recent_medians.min\ncurrent_median = medprice.last\n\nputs \"Support/Resistance Analysis (#{lookback} periods):\"\nputs \"Resistance (highest median): #{resistance_zone.round(2)}\"\nputs \"Current Median Price: #{current_median.round(2)}\"\nputs \"Support (lowest median): #{support_zone.round(2)}\"\n\nrange = resistance_zone - support_zone\ncurrent_position = ((current_median - support_zone) / range * 100).round(1)\n\nputs \"Current position in range: #{current_position}%\"\n\ncase current_position\nwhen 0...25\n  puts \"Near support - potential bounce zone\"\nwhen 25...50\n  puts \"Lower half of range\"\nwhen 50...75\n  puts \"Upper half of range\"\nwhen 75..100\n  puts \"Near resistance - potential reversal zone\"\nend\n</code></pre>"},{"location":"indicators/price_transform/medprice/#example-volume-weighted-analysis","title":"Example: Volume-Weighted Analysis","text":"<pre><code>high_prices =   load_historical_data('SPY', field: :high)\nlow_prices =    load_historical_data('SPY', field: :low)\nclose_prices =  load_historical_data('SPY', field: :close)\nvolume =        load_historical_data('SPY', field: :volume)\n\nmedprice = SQA::TAI.medprice(high_prices, low_prices)\n\n# Calculate volume-weighted median price\nlookback = 20\ntotal_volume = 0\nweighted_sum = 0\n\nlookback.times do |i|\n  index = -(i + 1)\n  total_volume += volume[index]\n  weighted_sum += medprice[index] * volume[index]\nend\n\nvwmp = weighted_sum / total_volume  # Volume-Weighted Median Price\n\ncurrent_close = close_prices.last\nputs \"Volume-Weighted Analysis (#{lookback} periods):\"\nputs \"Current Close: #{current_close.round(2)}\"\nputs \"Volume-Weighted Median Price: #{vwmp.round(2)}\"\n\nif current_close &gt; vwmp\n  puts \"Price above VWMP - bullish positioning\"\n  puts \"Distance: +#{((current_close - vwmp) / vwmp * 100).round(2)}%\"\nelse\n  puts \"Price below VWMP - bearish positioning\"\n  puts \"Distance: -#{((vwmp - current_close) / vwmp * 100).round(2)}%\"\nend\n</code></pre>"},{"location":"indicators/price_transform/medprice/#when-to-use-medprice-vs-close-price","title":"When to Use MEDPRICE vs Close Price","text":""},{"location":"indicators/price_transform/medprice/#use-median-price-when","title":"Use Median Price When:","text":"<ol> <li>Reducing Gap Impact: Median price ignores opening gaps, focusing on intraday range</li> <li>Smoothing Indicators: Building moving averages or oscillators with less noise</li> <li>Range Analysis: Studying where price action centers within each period</li> <li>Support/Resistance: Identifying typical price levels for pivot points</li> <li>Volume Studies: Creating volume-weighted price measures</li> <li>Commodity Trading: Common in commodity markets where range matters more</li> <li>Intraday Analysis: Understanding typical price levels within bars</li> </ol>"},{"location":"indicators/price_transform/medprice/#use-close-price-when","title":"Use Close Price When:","text":"<ol> <li>Momentum Analysis: Close reflects final trader sentiment</li> <li>Trend Following: Close shows direction of price resolution</li> <li>Pattern Recognition: Most candlestick patterns rely on close</li> <li>Gap Trading: Gaps are important signals in your strategy</li> <li>End-of-Day Systems: Trading on daily close signals</li> <li>Market Sentiment: Close shows who won the period (bulls or bears)</li> <li>Standard Indicators: Most indicators expect close price input</li> </ol>"},{"location":"indicators/price_transform/medprice/#key-differences","title":"Key Differences:","text":"Aspect Median Price Close Price Calculation (High + Low) / 2 Last trade of period Sensitivity Less volatile More volatile Gap Impact Not affected by gaps Reflects gaps Use Case Smoothing, range analysis Momentum, sentiment Noise Level Lower noise Higher noise Trading Style Range trading, mean reversion Trend following, breakouts"},{"location":"indicators/price_transform/medprice/#example-comparing-price-transforms","title":"Example: Comparing Price Transforms","text":"<pre><code>high_prices =  load_historical_data('NVDA', field: :high)\nlow_prices =   load_historical_data('NVDA', field: :low)\nclose_prices = load_historical_data('NVDA', field: :close)\n\n# Calculate all price transforms\nmedprice = SQA::TAI.medprice(high_prices, low_prices)\ntypprice = SQA::TAI.typprice(high_prices, low_prices, close_prices)\nwclprice = SQA::TAI.wclprice(high_prices, low_prices, close_prices)\n\ncurrent_close = close_prices.last\ncurrent_med = medprice.last\ncurrent_typ = typprice.last\ncurrent_wcl = wclprice.last\n\nputs \"Price Transform Comparison:\"\nputs \"Close Price:    #{current_close.round(2)}\"\nputs \"Median Price:   #{current_med.round(2)} (high+low)/2\"\nputs \"Typical Price:  #{current_typ.round(2)} (high+low+close)/3\"\nputs \"Weighted Close: #{current_wcl.round(2)} (high+low+2*close)/4\"\nputs\n\n# Analyze spreads\nmed_spread = (current_close - current_med).abs\ntyp_spread = (current_close - current_typ).abs\nwcl_spread = (current_close - current_wcl).abs\n\nputs \"Distance from Close:\"\nputs \"Median:   #{med_spread.round(2)} (#{(med_spread/current_close*100).round(2)}%)\"\nputs \"Typical:  #{typ_spread.round(2)} (#{(typ_spread/current_close*100).round(2)}%)\"\nputs \"Weighted: #{wcl_spread.round(2)} (#{(wcl_spread/current_close*100).round(2)}%)\"\nputs\n\n# MEDPRICE has largest deviation potential (ignores close)\n# WCLPRICE has smallest deviation (weighted toward close)\nif med_spread &gt; typ_spread * 1.5\n  puts \"Large median deviation suggests close near high or low extreme\"\n  if current_close &gt; current_med\n    puts \"Close near high - strong buying\"\n  else\n    puts \"Close near low - strong selling\"\n  end\nend\n</code></pre>"},{"location":"indicators/price_transform/medprice/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/price_transform/medprice/#1-median-price-channels","title":"1. Median Price Channels","text":"<p>Create channels using median price moving averages: - Upper channel: MA(Median) + N * ATR - Lower channel: MA(Median) - N * ATR - Smoother than close-based channels</p>"},{"location":"indicators/price_transform/medprice/#2-mean-reversion-trading","title":"2. Mean Reversion Trading","text":"<p>Median price naturally mean-reverts within ranges: - Buy when close &lt; median - threshold - Sell when close &gt; median + threshold - Works well in ranging markets</p>"},{"location":"indicators/price_transform/medprice/#3-filtered-indicators","title":"3. Filtered Indicators","text":"<p>Use median price input for cleaner signals: - RSI on median price (less whipsaw) - MACD on median price (smoother crossovers) - Bollinger Bands on median price (better range definition)</p>"},{"location":"indicators/price_transform/medprice/#4-intraday-position-analysis","title":"4. Intraday Position Analysis","text":"<p>Track where closes fall relative to median: - Consistent upper-half closes = bullish - Consistent lower-half closes = bearish - Useful for confirming trend strength</p>"},{"location":"indicators/price_transform/medprice/#common-settings","title":"Common Settings","text":"<p>MEDPRICE has no period parameter - it's calculated bar-by-bar. However, when used as input to other indicators:</p> Input Usage Period Use Case SMA(MEDPRICE) 10-20 Short-term trend SMA(MEDPRICE) 50 Intermediate trend SMA(MEDPRICE) 200 Long-term trend RSI(MEDPRICE) 14 Smoother momentum BBANDS(MEDPRICE) 20 Range-based volatility"},{"location":"indicators/price_transform/medprice/#advantages-and-limitations","title":"Advantages and Limitations","text":""},{"location":"indicators/price_transform/medprice/#advantages","title":"Advantages:","text":"<ul> <li>Simple, transparent calculation</li> <li>Filters gap-related noise</li> <li>Represents true intraday center</li> <li>Works well for range-based strategies</li> <li>Less affected by single-trade spikes</li> <li>Good input for volume-weighted studies</li> </ul>"},{"location":"indicators/price_transform/medprice/#limitations","title":"Limitations:","text":"<ul> <li>Ignores opening price completely</li> <li>Doesn't capture final sentiment (close)</li> <li>Less useful for momentum strategies</li> <li>May miss important closing patterns</li> <li>Not standard input for most indicators</li> <li>Less intuitive than close price</li> </ul>"},{"location":"indicators/price_transform/medprice/#related-indicators","title":"Related Indicators","text":"<ul> <li>TYPPRICE - Typical Price (includes close)</li> <li>WCLPRICE - Weighted Close Price (emphasizes close)</li> <li>AVGPRICE - Average Price (includes open)</li> <li>SMA - Often applied to median price</li> <li>CCI - Uses typical price (similar concept)</li> </ul>"},{"location":"indicators/price_transform/medprice/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> </ul> <ul> <li>Price Transform Overview</li> </ul>"},{"location":"indicators/price_transform/typprice/","title":"Typical Price (TYPPRICE)","text":"<p>The Typical Price is a price transformation that calculates a three-point average of the high, low, and close prices for each period. By giving equal weight to all three price points, it provides a more representative measure of price action than using the close alone. TYPPRICE smooths extreme price movements and is widely used as a preprocessor input for volume-weighted and momentum indicators.</p>"},{"location":"indicators/price_transform/typprice/#formula","title":"Formula","text":"<p>Typical Price = (High + Low + Close) / 3</p> <p>This simple arithmetic mean treats each of the three price components equally: - High: The period's maximum price - Low: The period's minimum price - Close: The period's final price</p>"},{"location":"indicators/price_transform/typprice/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices for each period <code>low</code> Array Yes - Array of low prices for each period <code>close</code> Array Yes - Array of close prices for each period"},{"location":"indicators/price_transform/typprice/#returns","title":"Returns","text":"<p>Returns an array of typical price values, one for each period. Each value represents the three-point average for that period.</p>"},{"location":"indicators/price_transform/typprice/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\ntypprice = SQA::TAI.typprice(high, low, close)\n\nputs \"Current Typical Price: #{typprice.last.round(2)}\"\n# Output: Current Typical Price: 48.60\n</code></pre>"},{"location":"indicators/price_transform/typprice/#interpretation","title":"Interpretation","text":"<p>The Typical Price provides a more balanced view of price action than using close prices alone:</p> Characteristic Interpretation Equal weighting Each price component (H, L, C) contributes 33.33% Smoothing effect Reduces impact of extreme highs or lows Centered measure Represents the \"middle ground\" of the period's action Volume neutral Does not incorporate volume data"},{"location":"indicators/price_transform/typprice/#why-use-typical-price","title":"Why Use Typical Price?","text":"<ol> <li> <p>More Representative Than Close: While the close is important, it's just one moment in time. The typical price captures the entire range of price movement.</p> </li> <li> <p>Reduces Noise: By averaging three prices, extreme movements in any single component are smoothed out.</p> </li> <li> <p>Foundation for Other Indicators: Many technical indicators use typical price as their base calculation, particularly volume-weighted indicators.</p> </li> <li> <p>Consistent Baseline: Provides a standardized price reference that works across all markets and timeframes.</p> </li> </ol>"},{"location":"indicators/price_transform/typprice/#example-comparing-price-measures","title":"Example: Comparing Price Measures","text":"<pre><code>high =  [50.00, 51.00, 49.50, 52.00, 51.50]\nlow =   [48.00, 49.00, 48.50, 50.00, 49.50]\nclose = [49.50, 50.50, 49.00, 51.50, 50.00]\n\ntypprice = SQA::TAI.typprice(high, low, close)\nmedprice = SQA::TAI.medprice(high, low)\nwclprice = SQA::TAI.wclprice(high, low, close)\n\n# Compare the different price measures\nputs \"Period | Close | Median | Typical | Weighted\"\nputs \"-------|-------|--------|---------|----------\"\nclose.each_with_index do |c, i|\n  puts \"  #{i+1}    | #{c}  | #{medprice[i].round(2)} | #{typprice[i].round(2)}  | #{wclprice[i].round(2)}\"\nend\n</code></pre>"},{"location":"indicators/price_transform/typprice/#example-typical-price-as-indicator-input","title":"Example: Typical Price as Indicator Input","text":"<pre><code># Using typical price for CCI calculation (built-in)\nhigh, low, close = load_historical_ohlc('AAPL')\ncci = SQA::TAI.cci(high, low, close, period: 14)\n\n# Manual typical price calculation for custom indicators\ntypprice = SQA::TAI.typprice(high, low, close)\n\n# Calculate simple moving average of typical price\ntp_sma = SQA::TAI.sma(typprice, period: 20)\n\nputs \"Typical Price SMA(20): #{tp_sma.last.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/typprice/#example-volume-weighted-typical-price","title":"Example: Volume-Weighted Typical Price","text":"<pre><code>high, low, close, volume = load_ohlcv_data('SPY')\n\ntypprice = SQA::TAI.typprice(high, low, close)\n\n# Calculate volume-weighted typical price (VWTP)\nvwtp_sum = 0.0\nvolume_sum = 0.0\n\ntypprice.last(20).each_with_index do |tp, i|\n  vwtp_sum += tp * volume[-(20-i)]\n  volume_sum += volume[-(20-i)]\nend\n\nvwtp = vwtp_sum / volume_sum\nputs \"20-period Volume-Weighted Typical Price: #{vwtp.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/typprice/#example-pivot-points-using-typical-price","title":"Example: Pivot Points Using Typical Price","text":"<pre><code># Daily pivot point calculations using previous day's data\nprev_high = 152.50\nprev_low = 150.25\nprev_close = 151.75\n\n# Calculate typical price (pivot point)\npivot = (prev_high + prev_low + prev_close) / 3\nputs \"Pivot Point: #{pivot.round(2)}\"\n\n# Support and resistance levels\nr1 = (2 * pivot) - prev_low\ns1 = (2 * pivot) - prev_high\nr2 = pivot + (prev_high - prev_low)\ns2 = pivot - (prev_high - prev_low)\n\nputs &lt;&lt;~LEVELS\n  Support/Resistance Levels:\n  R2: #{r2.round(2)}\n  R1: #{r1.round(2)}\n  PP: #{pivot.round(2)}\n  S1: #{s1.round(2)}\n  S2: #{s2.round(2)}\nLEVELS\n</code></pre>"},{"location":"indicators/price_transform/typprice/#common-use-cases","title":"Common Use Cases","text":""},{"location":"indicators/price_transform/typprice/#1-money-flow-index-mfi","title":"1. Money Flow Index (MFI)","text":"<p>MFI uses typical price to calculate raw money flow: <pre><code>high, low, close, volume = load_ohlcv_data('MSFT')\nmfi = SQA::TAI.mfi(high, low, close, volume, period: 14)\n</code></pre></p>"},{"location":"indicators/price_transform/typprice/#2-commodity-channel-index-cci","title":"2. Commodity Channel Index (CCI)","text":"<p>CCI measures deviation from the mean typical price: <pre><code>high, low, close = load_historical_ohlc('GLD')\ncci = SQA::TAI.cci(high, low, close, period: 20)\n</code></pre></p>"},{"location":"indicators/price_transform/typprice/#3-custom-volume-analysis","title":"3. Custom Volume Analysis","text":"<p>Typical price provides a fair value for volume-weighted calculations: <pre><code>typprice = SQA::TAI.typprice(high, low, close)\nmoney_flow = typprice.zip(volume).map { |tp, vol| tp * vol }\n</code></pre></p>"},{"location":"indicators/price_transform/typprice/#4-intraday-pivot-points","title":"4. Intraday Pivot Points","text":"<p>Day traders use typical price for support/resistance levels: <pre><code># Previous day's typical price becomes today's pivot\nyesterday_tp = SQA::TAI.typprice([prev_high], [prev_low], [prev_close]).first\n</code></pre></p>"},{"location":"indicators/price_transform/typprice/#comparison-with-other-price-transforms","title":"Comparison with Other Price Transforms","text":"Transform Formula Weights Use Case TYPPRICE (H+L+C)/3 Equal Balanced representation, volume indicators MEDPRICE (H+L)/2 H=50%, L=50% Simple midpoint, excludes close WCLPRICE (H+L+2C)/4 H=25%, L=25%, C=50% Emphasizes closing price AVGPRICE (O+H+L+C)/4 Equal Includes opening price <p>When to Use TYPPRICE vs Alternatives:</p> <ul> <li>Use TYPPRICE when you want equal weighting of high, low, and close</li> <li>Use MEDPRICE when you want a simple range midpoint without close bias</li> <li>Use WCLPRICE when you believe close is more significant than high/low</li> <li>Use AVGPRICE when you want to include the opening price</li> </ul>"},{"location":"indicators/price_transform/typprice/#trading-considerations","title":"Trading Considerations","text":""},{"location":"indicators/price_transform/typprice/#advantages","title":"Advantages","text":"<ul> <li>Mathematically simple and fast to calculate</li> <li>Provides balanced view of price action</li> <li>Standard input for many popular indicators</li> <li>Works well across all timeframes and markets</li> <li>Reduces impact of outlier prices</li> </ul>"},{"location":"indicators/price_transform/typprice/#limitations","title":"Limitations","text":"<ul> <li>Ignores opening price</li> <li>Does not account for volume</li> <li>Equal weighting may not reflect market reality</li> <li>Close price often considered most important</li> <li>Cannot capture intraday patterns</li> </ul>"},{"location":"indicators/price_transform/typprice/#best-practices","title":"Best Practices","text":"<ol> <li>Use as input to volume-weighted indicators</li> <li>Apply to pivot point calculations</li> <li>Smooth with moving averages for trend analysis</li> <li>Compare with other price transforms for divergences</li> <li>Consider timeframe - works well on all periods</li> </ol>"},{"location":"indicators/price_transform/typprice/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/price_transform/typprice/#price-transforms","title":"Price Transforms","text":"<ul> <li>AVGPRICE - Average Price (includes open)</li> <li>MEDPRICE - Median Price (excludes close)</li> <li>WCLPRICE - Weighted Close Price (emphasizes close)</li> </ul>"},{"location":"indicators/price_transform/typprice/#indicators-using-typprice","title":"Indicators Using TYPPRICE","text":"<ul> <li>CCI - Commodity Channel Index</li> <li>MFI - Money Flow Index</li> <li>Various pivot point systems</li> <li>Volume-weighted indicators</li> </ul>"},{"location":"indicators/price_transform/typprice/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Price Transform Overview</li> </ul>"},{"location":"indicators/price_transform/wclprice/","title":"Weighted Close Price (WCLPRICE)","text":"<p>The Weighted Close Price (WCLPRICE) is a price transformation that calculates a close-weighted average of the High, Low, and Close prices, giving double weight to the closing price. This indicator recognizes that the close price represents the final consensus of market participants and carries the most significance for technical analysis and trading decisions.</p>"},{"location":"indicators/price_transform/wclprice/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh =  [48.70, 48.72, 48.90, 48.87, 48.82]\nlow =   [47.79, 48.14, 48.39, 48.37, 48.24]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74]\n\nwclprice = SQA::TAI.wclprice(high, low, close)\n\nputs \"Current Weighted Close: #{wclprice.last.round(2)}\"\n</code></pre>"},{"location":"indicators/price_transform/wclprice/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices for each period <code>low</code> Array Yes - Array of low prices for each period <code>close</code> Array Yes - Array of close prices for each period"},{"location":"indicators/price_transform/wclprice/#returns","title":"Returns","text":"<p>Returns an array of weighted close price values, one for each input period. Each value is calculated on a bar-by-bar basis with no lookback period required.</p>"},{"location":"indicators/price_transform/wclprice/#formula","title":"Formula","text":"<p>WCLPRICE = (High + Low + 2 \u00d7 Close) / 4</p> <p>Or equivalently:</p> <p>WCLPRICE = (High + Low + Close + Close) / 4</p> <p>The close price is counted twice, giving it double the weight of the high or low prices.</p>"},{"location":"indicators/price_transform/wclprice/#interpretation","title":"Interpretation","text":""},{"location":"indicators/price_transform/wclprice/#why-double-weight-for-close","title":"Why Double Weight for Close?","text":"<p>The close price receives 2x weight because:</p> <ol> <li> <p>Final Market Consensus: The close represents the final agreed-upon price after all buyers and sellers have had their opportunity to act during the period.</p> </li> <li> <p>Continuation Price: The close is the reference point that connects one period to the next, establishing the baseline for gap analysis and price action.</p> </li> <li> <p>Decision Point: Most trading strategies use the close as the trigger price for entries, exits, and stop placements.</p> </li> <li> <p>Settlement Reference: Clearing and settlement processes typically use closing prices, making them the \"official\" price of record.</p> </li> <li> <p>Market Sentiment: The close reflects where traders were willing to hold positions overnight or into the next period, indicating conviction.</p> </li> </ol>"},{"location":"indicators/price_transform/wclprice/#price-weight-distribution","title":"Price Weight Distribution","text":"Component Weight Percentage High 1 25% Low 1 25% Close 2 50% Total 4 100%"},{"location":"indicators/price_transform/wclprice/#characteristics","title":"Characteristics","text":"<ul> <li>Close Emphasis: With 50% weight on close, values gravitate toward closing prices</li> <li>Smoothed Yet Responsive: Smoother than using close alone, but more responsive than equal-weighted averages</li> <li>Respects Final Sentiment: Reflects where the market \"settled\" rather than just range midpoints</li> <li>Better Price Representation: More accurately represents actual trading conditions than simple averages</li> </ul>"},{"location":"indicators/price_transform/wclprice/#example-comparing-price-transformations","title":"Example: Comparing Price Transformations","text":"<pre><code>high =  [50.00, 51.00, 52.00, 51.50, 52.50]\nlow =   [48.00, 49.00, 50.00, 49.50, 50.50]\nclose = [48.50, 49.50, 51.50, 51.00, 52.00]\n\n# Calculate different price transformations\nmedprice = SQA::TAI.medprice(high, low)\ntypprice = SQA::TAI.typprice(high, low, close)\nwclprice = SQA::TAI.wclprice(high, low, close)\n\nputs &lt;&lt;~COMPARISON\n  Price Transformation Comparison:\n\n  Latest Bar: H=#{high.last} L=#{low.last} C=#{close.last}\n\n  MEDPRICE: #{medprice.last.round(2)} (ignores close)\n  TYPPRICE: #{typprice.last.round(2)} (equal weights)\n  WCLPRICE: #{wclprice.last.round(2)} (2x weight on close)\n\n  Close is: #{close.last.round(2)}\n  Notice WCLPRICE is closest to close price\nCOMPARISON\n</code></pre>"},{"location":"indicators/price_transform/wclprice/#example-weighted-close-for-pivot-calculations","title":"Example: Weighted Close for Pivot Calculations","text":"<pre><code># Use WCLPRICE as base for pivot points\nhigh =  load_historical_data('AAPL', field: :high)\nlow =   load_historical_data('AAPL', field: :low)\nclose = load_historical_data('AAPL', field: :close)\n\nwclprice = SQA::TAI.wclprice(high, low, close)\n\n# Calculate pivot point using weighted close\npivot = wclprice.last\nrange = high.last - low.last\n\n# Support and resistance levels\nr1 = (2 * pivot) - low.last\ns1 = (2 * pivot) - high.last\nr2 = pivot + range\ns2 = pivot - range\n\nputs &lt;&lt;~PIVOTS\n  Weighted Close Pivot Analysis:\n\n  Weighted Close (Pivot): #{pivot.round(2)}\n\n  Resistance 2: #{r2.round(2)}\n  Resistance 1: #{r1.round(2)}\n  Pivot Point:  #{pivot.round(2)}\n  Support 1:    #{s1.round(2)}\n  Support 2:    #{s2.round(2)}\n\n  Using weighted close gives more weight to final sentiment\nPIVOTS\n</code></pre>"},{"location":"indicators/price_transform/wclprice/#example-wclprice-vs-close-price-divergence","title":"Example: WCLPRICE vs Close Price Divergence","text":"<pre><code>high =  load_historical_data('TSLA', field: :high)\nlow =   load_historical_data('TSLA', field: :low)\nclose = load_historical_data('TSLA', field: :close)\n\nwclprice = SQA::TAI.wclprice(high, low, close)\n\n# Compare weighted close to actual close\nlast_10_bars = (0...10).map do |i|\n  idx = -10 + i\n  wcl = wclprice[idx]\n  cls = close[idx]\n  diff = ((cls - wcl) / wcl * 100).round(2)\n\n  {\n    bar: i + 1,\n    weighted: wcl.round(2),\n    close: cls.round(2),\n    diff_pct: diff\n  }\nend\n\nlast_10_bars.each do |bar|\n  status = if bar[:diff_pct] &gt; 1\n    \"Close &gt; WCL by #{bar[:diff_pct]}% - Strong close\"\n  elsif bar[:diff_pct] &lt; -1\n    \"Close &lt; WCL by #{bar[:diff_pct]}% - Weak close\"\n  else\n    \"Close \u2248 WCL - Balanced\"\n  end\n\n  puts \"Bar #{bar[:bar]}: WCL=#{bar[:weighted]} Close=#{bar[:close]} #{status}\"\nend\n</code></pre>"},{"location":"indicators/price_transform/wclprice/#example-smoothed-price-input-for-indicators","title":"Example: Smoothed Price Input for Indicators","text":"<pre><code># Use WCLPRICE as smoothed input to other indicators\nhigh =  load_historical_data('MSFT', field: :high)\nlow =   load_historical_data('MSFT', field: :low)\nclose = load_historical_data('MSFT', field: :close)\n\nwclprice = SQA::TAI.wclprice(high, low, close)\n\n# Calculate moving averages on weighted close\nsma_close = SQA::TAI.sma(close, period: 20)\nsma_wcl = SQA::TAI.sma(wclprice, period: 20)\n\n# Weighted close MA will be smoother\nputs &lt;&lt;~SMOOTHING\n  Moving Average Comparison (20 periods):\n\n  SMA on Close:          #{sma_close.last.round(2)}\n  SMA on Weighted Close: #{sma_wcl.last.round(2)}\n\n  The weighted close reduces noise from extreme highs/lows\n  while maintaining the importance of closing prices\nSMOOTHING\n\n# Calculate RSI on weighted close for smoother signals\nrsi_close = SQA::TAI.rsi(close, period: 14)\nrsi_wcl = SQA::TAI.rsi(wclprice, period: 14)\n\nputs &lt;&lt;~RSI\n  RSI Comparison (14 periods):\n\n  RSI on Close:          #{rsi_close.last.round(2)}\n  RSI on Weighted Close: #{rsi_wcl.last.round(2)}\n\n  Weighted close RSI can reduce false signals\nRSI\n</code></pre>"},{"location":"indicators/price_transform/wclprice/#example-trend-analysis-with-weighted-close","title":"Example: Trend Analysis with Weighted Close","text":"<pre><code>high =  load_historical_data('SPY', field: :high)\nlow =   load_historical_data('TSLA', field: :low)\nclose = load_historical_data('SPY', field: :close)\n\nwclprice = SQA::TAI.wclprice(high, low, close)\n\n# Calculate trend using weighted close\nsma_fast = SQA::TAI.sma(wclprice, period: 10)\nsma_slow = SQA::TAI.sma(wclprice, period: 30)\n\ncurrent_wcl = wclprice.last\ncurrent_fast = sma_fast.last\ncurrent_slow = sma_slow.last\n\nif current_fast &gt; current_slow &amp;&amp; current_wcl &gt; current_fast\n  puts &lt;&lt;~TREND\n    Strong Uptrend Confirmed:\n\n    Weighted Close: #{current_wcl.round(2)}\n    Fast SMA (10):  #{current_fast.round(2)}\n    Slow SMA (30):  #{current_slow.round(2)}\n\n    Price above both moving averages with bullish alignment\n  TREND\nelsif current_fast &lt; current_slow &amp;&amp; current_wcl &lt; current_fast\n  puts &lt;&lt;~TREND\n    Strong Downtrend Confirmed:\n\n    Weighted Close: #{current_wcl.round(2)}\n    Fast SMA (10):  #{current_fast.round(2)}\n    Slow SMA (30):  #{current_slow.round(2)}\n\n    Price below both moving averages with bearish alignment\n  TREND\nend\n</code></pre>"},{"location":"indicators/price_transform/wclprice/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/price_transform/wclprice/#1-weighted-close-for-gap-analysis","title":"1. Weighted Close for Gap Analysis","text":"<p>When analyzing gaps, weighted close provides better context: - Gap Up: If WCLPRICE &lt; Close, shows strength (closed near highs) - Gap Down: If WCLPRICE &gt; Close, shows weakness (closed near lows)</p>"},{"location":"indicators/price_transform/wclprice/#2-range-contraction-detection","title":"2. Range Contraction Detection","text":"<p>Compare WCLPRICE to MEDPRICE: - When they converge, range is contracting - When they diverge, indicates directional bias</p>"},{"location":"indicators/price_transform/wclprice/#3-multiple-timeframe-analysis","title":"3. Multiple Timeframe Analysis","text":"<p>Use WCLPRICE across timeframes: - Daily WCLPRICE for swing trades - Hourly WCLPRICE for day trades - 15-min WCLPRICE for scalping</p>"},{"location":"indicators/price_transform/wclprice/#4-weighted-close-crossovers","title":"4. Weighted Close Crossovers","text":"<p>Monitor WCLPRICE crossing moving averages: - More reliable than close-only signals - Reduces whipsaw in choppy markets - Better confirmation of trend changes</p>"},{"location":"indicators/price_transform/wclprice/#common-use-cases","title":"Common Use Cases","text":"Use Case Why WCLPRICE Works Pivot Points Emphasizes actual settlement prices Moving Averages Smoother than close, more relevant than typical Indicator Input Reduces noise while respecting close Support/Resistance Reflects true market consensus Trend Following Weights the most important price Mean Reversion Better measure of fair value"},{"location":"indicators/price_transform/wclprice/#comparison-price-transformation-methods","title":"Comparison: Price Transformation Methods","text":"Method Formula Close Weight Best For MEDPRICE (H + L) / 2 0% Simple range midpoint TYPPRICE (H + L + C) / 3 33% Balanced view with close WCLPRICE (H + L + 2C) / 4 50% Close-weighted analysis Close Only C 100% Pure closing action"},{"location":"indicators/price_transform/wclprice/#when-to-use-each","title":"When to Use Each","text":"<ul> <li>MEDPRICE: When close is unreliable or you want pure range</li> <li>TYPPRICE: When all three prices deserve equal consideration</li> <li>WCLPRICE: When close matters most but you want smoothing (most common)</li> <li>Close Only: When you need pure closing momentum</li> </ul>"},{"location":"indicators/price_transform/wclprice/#key-advantages","title":"Key Advantages","text":"<ol> <li>Respects Market Consensus: 50% weight on close reflects real market sentiment</li> <li>Smoother Than Close Alone: Reduces impact of closing price spikes</li> <li>More Relevant Than Equal Weights: Close price deserves more weight</li> <li>Standard in Many Indicators: Widely used in pivot calculations</li> <li>Reduces Noise: Smooths price action while maintaining directional bias</li> <li>Better for Backtesting: More representative of actual trading prices</li> </ol>"},{"location":"indicators/price_transform/wclprice/#limitations","title":"Limitations","text":"<ol> <li>Still Lags Price: Like all averages, lags actual price movement</li> <li>Gap Sensitivity: Large gaps can skew weighted close values</li> <li>Not All Markets: Some markets don't have meaningful high/low ranges</li> <li>Closing Price Bias: Assumes close is always most important (not always true)</li> </ol>"},{"location":"indicators/price_transform/wclprice/#trading-applications","title":"Trading Applications","text":""},{"location":"indicators/price_transform/wclprice/#entry-signals","title":"Entry Signals","text":"<ul> <li>Price crosses above/below WCLPRICE moving average</li> <li>WCLPRICE confirms breakout when it crosses key levels</li> <li>Use for stop placement at WCLPRICE - (2 \u00d7 ATR)</li> </ul>"},{"location":"indicators/price_transform/wclprice/#exit-signals","title":"Exit Signals","text":"<ul> <li>Close below WCLPRICE in uptrend signals weakness</li> <li>WCLPRICE breaks support/resistance first = early warning</li> <li>Trail stops using WCLPRICE smoothing</li> </ul>"},{"location":"indicators/price_transform/wclprice/#position-sizing","title":"Position Sizing","text":"<ul> <li>Distance from WCLPRICE to entry determines risk</li> <li>WCLPRICE volatility influences position size</li> <li>Use WCLPRICE ATR for dynamic sizing</li> </ul>"},{"location":"indicators/price_transform/wclprice/#related-indicators","title":"Related Indicators","text":"<ul> <li>MEDPRICE - Median Price (no close weight)</li> <li>TYPPRICE - Typical Price (equal weights)</li> <li>AVGPRICE - Average Price (includes open)</li> <li>SMA - Often calculated on WCLPRICE</li> </ul> <ul> <li>Pivot Points - Uses weighted close</li> </ul>"},{"location":"indicators/price_transform/wclprice/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Price Transform Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/statistical/","title":"Statistical Indicators","text":"<p>Statistical indicators apply mathematical and statistical functions to price data to identify trends, measure correlation, and forecast future price movements. These indicators use regression analysis, standard deviation, and other statistical methods.</p>"},{"location":"indicators/statistical/#available-statistical-indicators","title":"Available Statistical Indicators","text":""},{"location":"indicators/statistical/#beta-beta","title":"Beta (BETA)","text":"<p>Measures correlation between a security and the overall market.</p>"},{"location":"indicators/statistical/#correlation-correl","title":"Correlation (CORREL)","text":"<p>Pearson's Correlation Coefficient between two price series.</p>"},{"location":"indicators/statistical/#linear-regression-linearreg","title":"Linear Regression (LINEARREG)","text":"<p>Fits a linear regression line through price data.</p>"},{"location":"indicators/statistical/#linear-regression-angle-linearreg_angle","title":"Linear Regression Angle (LINEARREG_ANGLE)","text":"<p>Angle of the linear regression line in degrees.</p>"},{"location":"indicators/statistical/#linear-regression-intercept-linearreg_intercept","title":"Linear Regression Intercept (LINEARREG_INTERCEPT)","text":"<p>Y-intercept of the linear regression line.</p>"},{"location":"indicators/statistical/#linear-regression-slope-linearreg_slope","title":"Linear Regression Slope (LINEARREG_SLOPE)","text":"<p>Slope of the linear regression line.</p>"},{"location":"indicators/statistical/#standard-deviation-stddev","title":"Standard Deviation (STDDEV)","text":"<p>Measures price volatility using statistical standard deviation.</p>"},{"location":"indicators/statistical/#time-series-forecast-tsf","title":"Time Series Forecast (TSF)","text":"<p>Projects future prices based on linear regression.</p>"},{"location":"indicators/statistical/#variance-var","title":"Variance (VAR)","text":"<p>Measures price dispersion (variance).</p>"},{"location":"indicators/statistical/#common-usage","title":"Common Usage","text":"<pre><code>require 'sqa/tai'\n\nclose = [45.0, 46.0, 45.5, 47.0, 46.5, 48.0, 47.5]\n\n# Linear regression\nlinearreg = SQA::TAI.linearreg(close, period: 14)\n\n# Standard deviation\nstddev = SQA::TAI.stddev(close, period: 14)\n\n# Correlation between two series\ncorrel = SQA::TAI.correl(series1, series2, period: 30)\n</code></pre>"},{"location":"indicators/statistical/#see-also","title":"See Also","text":"<ul> <li>All Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/statistical/beta/","title":"Beta Coefficient (BETA)","text":"<p>The Beta Coefficient measures the volatility and systematic risk of a security or portfolio relative to a benchmark (typically a market index). Beta quantifies how much a security's price moves in relation to overall market movements, making it a crucial metric for risk assessment and portfolio construction.</p>"},{"location":"indicators/statistical/beta/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Stock and benchmark prices (e.g., AAPL vs S&amp;P 500)\nstock_prices = [150.0, 152.5, 151.0, 153.5, 155.0, 154.0,\n                156.5, 158.0, 157.0, 159.5, 161.0, 160.0,\n                162.5, 164.0, 163.0, 165.5, 167.0, 166.0]\n\nbenchmark_prices = [4200, 4220, 4215, 4235, 4250, 4245,\n                    4260, 4275, 4270, 4285, 4300, 4295,\n                    4310, 4325, 4320, 4335, 4350, 4345]\n\n# Calculate 14-period Beta\nbeta = SQA::TAI.beta(stock_prices, benchmark_prices, period: 14)\n\nputs \"Current Beta: #{beta.last.round(2)}\"\n</code></pre>"},{"location":"indicators/statistical/beta/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices1</code> Array Yes - Array of stock/security prices <code>prices2</code> Array Yes - Array of benchmark prices (market index) <code>period</code> Integer No 5 Lookback period for calculation"},{"location":"indicators/statistical/beta/#returns","title":"Returns","text":"<p>Returns an array of beta coefficient values. The first <code>period</code> values will be <code>nil</code>. Beta can be any real number: - Positive values: Moves with the market - Negative values: Moves opposite to the market - Zero: Independent of market movements</p>"},{"location":"indicators/statistical/beta/#interpretation","title":"Interpretation","text":"Beta Range Interpretation Volatility Risk Profile \u03b2 &gt; 1.5 Highly aggressive Very high volatility High risk/high reward \u03b2 = 1.0 - 1.5 Aggressive Above market volatility Above-average risk \u03b2 = 1.0 Market neutral Same as market Average risk \u03b2 = 0.5 - 1.0 Defensive Below market volatility Below-average risk \u03b2 = 0.0 - 0.5 Highly defensive Low volatility Low risk/low reward \u03b2 \u2248 0 Market independent No correlation Diversification benefit \u03b2 &lt; 0 Inverse Negative correlation Hedge position"},{"location":"indicators/statistical/beta/#detailed-beta-values","title":"Detailed Beta Values","text":"Beta Meaning Example 2.0 Moves 2x the market If market rises 1%, stock rises 2% 1.5 50% more volatile If market rises 1%, stock rises 1.5% 1.0 Moves with market If market rises 1%, stock rises 1% 0.5 50% less volatile If market rises 1%, stock rises 0.5% 0.0 No correlation Stock moves independently of market -0.5 Moves opposite If market rises 1%, stock falls 0.5% -1.0 Perfect inverse If market rises 1%, stock falls 1%"},{"location":"indicators/statistical/beta/#example-basic-beta-analysis","title":"Example: Basic Beta Analysis","text":"<pre><code>stock_prices = load_historical_prices('TSLA')\nspy_prices = load_historical_prices('SPY')  # S&amp;P 500 ETF\n\nbeta = SQA::TAI.beta(stock_prices, spy_prices, period: 60)\ncurrent_beta = beta.last\n\nputs &lt;&lt;~ANALYSIS\n  Stock Beta Analysis:\n  Beta: #{current_beta.round(2)}\n\n  Risk Profile: #{\n    case current_beta\n    when 1.5..Float::INFINITY then \"Highly Aggressive - High Risk\"\n    when 1.0...1.5 then \"Aggressive - Above Average Risk\"\n    when 0.5...1.0 then \"Defensive - Below Average Risk\"\n    when 0.0...0.5 then \"Highly Defensive - Low Risk\"\n    when -Float::INFINITY...0.0 then \"Inverse - Hedge Position\"\n    end\n  }\n\n  Interpretation:\n  #{\n    if current_beta &gt; 1\n      \"Stock is #{((current_beta - 1) * 100).round(0)}% more volatile than the market\"\n    elsif current_beta &lt; 1 &amp;&amp; current_beta &gt; 0\n      \"Stock is #{((1 - current_beta) * 100).round(0)}% less volatile than the market\"\n    elsif current_beta &lt; 0\n      \"Stock moves inversely to the market (hedge)\"\n    else\n      \"Stock moves independently of the market\"\n    end\n  }\nANALYSIS\n</code></pre>"},{"location":"indicators/statistical/beta/#example-portfolio-beta-construction","title":"Example: Portfolio Beta Construction","text":"<pre><code># Portfolio allocation\nportfolio = {\n  'TSLA' =&gt; { weight: 0.20, prices: load_prices('TSLA') },\n  'AAPL' =&gt; { weight: 0.30, prices: load_prices('AAPL') },\n  'JNJ'  =&gt; { weight: 0.25, prices: load_prices('JNJ') },\n  'GLD'  =&gt; { weight: 0.15, prices: load_prices('GLD') },\n  'TLT'  =&gt; { weight: 0.10, prices: load_prices('TLT') }\n}\n\nspy_prices = load_prices('SPY')\n\n# Calculate individual betas\nportfolio_beta = 0.0\n\nportfolio.each do |ticker, data|\n  beta = SQA::TAI.beta(data[:prices], spy_prices, period: 252)\n  stock_beta = beta.last\n  weighted_beta = stock_beta * data[:weight]\n\n  portfolio_beta += weighted_beta\n\n  puts \"#{ticker}: Beta=#{stock_beta.round(2)}, Weight=#{(data[:weight]*100).round(0)}%, Contribution=#{weighted_beta.round(2)}\"\nend\n\nputs &lt;&lt;~PORTFOLIO\n\n  Portfolio Summary:\n  Overall Beta: #{portfolio_beta.round(2)}\n\n  Risk Profile: #{\n    if portfolio_beta &gt; 1.2\n      \"Aggressive - Outperforms in bull markets, underperforms in bear markets\"\n    elsif portfolio_beta &gt; 0.8\n      \"Balanced - Moves roughly with the market\"\n    else\n      \"Defensive - Better downside protection, lower upside potential\"\n    end\n  }\n\n  Expected Movement:\n  If market rises 10%, portfolio expected to rise #{(portfolio_beta * 10).round(1)}%\n  If market falls 10%, portfolio expected to fall #{(portfolio_beta * 10).round(1)}%\nPORTFOLIO\n</code></pre>"},{"location":"indicators/statistical/beta/#example-beta-based-market-strategy","title":"Example: Beta-Based Market Strategy","text":"<pre><code>stock_prices = load_prices('NVDA')\nspy_prices = load_prices('SPY')\n\nbeta = SQA::TAI.beta(stock_prices, spy_prices, period: 60)\ncurrent_beta = beta.last\n\n# Market trend detection\nsma_200 = SQA::TAI.sma(spy_prices, period: 200)\nmarket_trend = spy_prices.last &gt; sma_200.last ? :bullish : :bearish\n\nputs &lt;&lt;~STRATEGY\n  Market-Based Beta Strategy:\n\n  Market Trend: #{market_trend.to_s.upcase}\n  Stock Beta: #{current_beta.round(2)}\n\n  Trading Strategy:\nSTRATEGY\n\ncase market_trend\nwhen :bullish\n  if current_beta &gt; 1.5\n    puts \"  Action: OVERWEIGHT - High beta stock in bull market\"\n    puts \"  Rationale: Maximize upside capture\"\n    puts \"  Target allocation: 150% of benchmark weight\"\n  elsif current_beta &gt; 1.0\n    puts \"  Action: MARKET WEIGHT - Moderate beta\"\n    puts \"  Rationale: Participate in upside with reasonable risk\"\n    puts \"  Target allocation: 100% of benchmark weight\"\n  else\n    puts \"  Action: UNDERWEIGHT - Low beta in bull market\"\n    puts \"  Rationale: Look for higher beta opportunities\"\n    puts \"  Target allocation: 50% of benchmark weight\"\n  end\n\nwhen :bearish\n  if current_beta &lt; 0.5\n    puts \"  Action: OVERWEIGHT - Low beta stock in bear market\"\n    puts \"  Rationale: Defensive positioning for downside protection\"\n    puts \"  Target allocation: 150% of benchmark weight\"\n  elsif current_beta &lt; 1.0\n    puts \"  Action: MARKET WEIGHT - Moderate defensive position\"\n    puts \"  Rationale: Balance protection with opportunity\"\n    puts \"  Target allocation: 100% of benchmark weight\"\n  else\n    puts \"  Action: UNDERWEIGHT - High beta in bear market\"\n    puts \"  Rationale: Reduce exposure to volatility\"\n    puts \"  Target allocation: 25-50% of benchmark weight\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/beta/#example-beta-for-hedging","title":"Example: Beta for Hedging","text":"<pre><code># Portfolio to hedge\nportfolio_value = 1_000_000\nportfolio_prices = load_portfolio_prices('MY_PORTFOLIO')\nspy_prices = load_prices('SPY')\n\n# Calculate portfolio beta\nportfolio_beta = SQA::TAI.beta(portfolio_prices, spy_prices, period: 60).last\n\nputs &lt;&lt;~HEDGE\n  Portfolio Hedging Analysis:\n\n  Portfolio Value: $#{portfolio_value.to_s.reverse.gsub(/(\\d{3})(?=\\d)/, '\\\\1,').reverse}\n  Portfolio Beta: #{portfolio_beta.round(2)}\n\n  Hedge Requirements:\nHEDGE\n\nif portfolio_beta &gt; 1.0\n  # Need to hedge more than portfolio value\n  hedge_ratio = portfolio_beta\n  hedge_value = portfolio_value * hedge_ratio\n\n  puts \"  High Beta Portfolio - Requires enhanced hedge\"\n  puts \"  Hedge Ratio: #{hedge_ratio.round(2)}\"\n  puts \"  SPY Short Position Needed: $#{hedge_value.to_s.reverse.gsub(/(\\d{3})(?=\\d)/, '\\\\1,').reverse}\"\n  puts \"  SPY Shares to Short: #{(hedge_value / spy_prices.last).round(0)}\"\n\nelsif portfolio_beta &lt; 1.0 &amp;&amp; portfolio_beta &gt; 0\n  # Need to hedge less than portfolio value\n  hedge_ratio = portfolio_beta\n  hedge_value = portfolio_value * hedge_ratio\n\n  puts \"  Low Beta Portfolio - Requires reduced hedge\"\n  puts \"  Hedge Ratio: #{hedge_ratio.round(2)}\"\n  puts \"  SPY Short Position Needed: $#{hedge_value.to_s.reverse.gsub(/(\\d{3})(?=\\d)/, '\\\\1,').reverse}\"\n  puts \"  SPY Shares to Short: #{(hedge_value / spy_prices.last).round(0)}\"\n\nelse\n  puts \"  Portfolio beta near zero or negative - Review hedge strategy\"\nend\n</code></pre>"},{"location":"indicators/statistical/beta/#example-multi-period-beta-analysis","title":"Example: Multi-Period Beta Analysis","text":"<pre><code>stock_prices = load_prices('AMZN')\nspy_prices = load_prices('SPY')\n\n# Calculate different period betas\nbeta_30d = SQA::TAI.beta(stock_prices, spy_prices, period: 30).last\nbeta_90d = SQA::TAI.beta(stock_prices, spy_prices, period: 90).last\nbeta_252d = SQA::TAI.beta(stock_prices, spy_prices, period: 252).last\n\nputs &lt;&lt;~MULTIPERIOD\n  Multi-Period Beta Analysis:\n\n  30-Day Beta:  #{beta_30d.round(2)} (Short-term volatility)\n  90-Day Beta:  #{beta_90d.round(2)} (Medium-term trend)\n  252-Day Beta: #{beta_252d.round(2)} (Long-term characteristic)\n\n  Beta Stability: #{\n    if (beta_30d - beta_252d).abs &lt; 0.2\n      \"STABLE - Consistent risk profile across timeframes\"\n    elsif beta_30d &gt; beta_252d + 0.3\n      \"INCREASING - Short-term volatility rising\"\n    else\n      \"DECREASING - Short-term volatility falling\"\n    end\n  }\n\n  Risk Assessment:\n  - Current positioning reflects #{beta_30d &gt; 1 ? 'aggressive' : 'defensive'} short-term behavior\n  - Historical baseline shows #{beta_252d &gt; 1 ? 'aggressive' : 'defensive'} long-term character\n  #{\n    if (beta_30d - beta_252d).abs &gt; 0.5\n      \"- WARNING: Significant beta shift detected - review position sizing\"\n    else\n      \"- Risk profile stable - maintain current strategy\"\n    end\n  }\nMULTIPERIOD\n</code></pre>"},{"location":"indicators/statistical/beta/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/statistical/beta/#1-rolling-beta-analysis","title":"1. Rolling Beta Analysis","text":"<p>Track how beta changes over time to identify regime changes: <pre><code>stock_prices = load_prices('NFLX')\nspy_prices = load_prices('SPY')\n\n# Calculate rolling 60-day beta\nrolling_betas = []\n60.upto(stock_prices.length - 1) do |i|\n  beta = SQA::TAI.beta(\n    stock_prices[i-60..i],\n    spy_prices[i-60..i],\n    period: 60\n  ).last\n  rolling_betas &lt;&lt; beta\nend\n\navg_beta = rolling_betas.sum / rolling_betas.length\ncurrent_beta = rolling_betas.last\n\nif current_beta &gt; avg_beta * 1.3\n  puts \"Beta spike detected - increased market sensitivity\"\nelsif current_beta &lt; avg_beta * 0.7\n  puts \"Beta drop detected - reduced market correlation\"\nend\n</code></pre></p>"},{"location":"indicators/statistical/beta/#2-sector-beta-comparison","title":"2. Sector Beta Comparison","text":"<p>Compare individual stock beta to sector beta: <pre><code>stock_beta = SQA::TAI.beta(stock_prices, spy_prices, period: 252).last\nsector_beta = SQA::TAI.beta(sector_etf_prices, spy_prices, period: 252).last\n\nrelative_beta = stock_beta / sector_beta\n\nif relative_beta &gt; 1.2\n  puts \"Stock is significantly more volatile than its sector\"\nelsif relative_beta &lt; 0.8\n  puts \"Stock is defensive relative to its sector\"\nend\n</code></pre></p>"},{"location":"indicators/statistical/beta/#3-beta-adjusted-performance","title":"3. Beta-Adjusted Performance","text":"<p>Calculate risk-adjusted returns: <pre><code>stock_return = ((stock_prices.last - stock_prices.first) / stock_prices.first) * 100\nmarket_return = ((spy_prices.last - spy_prices.first) / spy_prices.first) * 100\nstock_beta = SQA::TAI.beta(stock_prices, spy_prices, period: 60).last\n\nexpected_return = market_return * stock_beta\nexcess_return = stock_return - expected_return\n\nputs \"Stock Return: #{stock_return.round(2)}%\"\nputs \"Expected Return (based on beta): #{expected_return.round(2)}%\"\nputs \"Alpha (Excess Return): #{excess_return.round(2)}%\"\n</code></pre></p>"},{"location":"indicators/statistical/beta/#4-down-market-beta","title":"4. Down-Market Beta","text":"<p>Calculate beta specifically during market declines: <pre><code># Separate up and down market periods\ndown_stock_prices = []\ndown_spy_prices = []\n\nspy_prices.each_with_index do |price, i|\n  next if i == 0\n  if price &lt; spy_prices[i-1]  # Market down day\n    down_stock_prices &lt;&lt; stock_prices[i]\n    down_spy_prices &lt;&lt; price\n  end\nend\n\ndown_beta = SQA::TAI.beta(down_stock_prices, down_spy_prices, period: 30).last\nfull_beta = SQA::TAI.beta(stock_prices, spy_prices, period: 60).last\n\nputs \"Full-Period Beta: #{full_beta.round(2)}\"\nputs \"Down-Market Beta: #{down_beta.round(2)}\"\n\nif down_beta &gt; full_beta * 1.2\n  puts \"WARNING: Stock is significantly more volatile during declines\"\nelsif down_beta &lt; full_beta * 0.8\n  puts \"POSITIVE: Stock shows resilience during market declines\"\nend\n</code></pre></p>"},{"location":"indicators/statistical/beta/#portfolio-applications","title":"Portfolio Applications","text":""},{"location":"indicators/statistical/beta/#high-beta-strategy-bull-market","title":"High Beta Strategy (Bull Market)","text":"<ul> <li>Target beta: 1.3 - 1.8</li> <li>Focus: Growth stocks, tech, small-caps</li> <li>Market view: Strong uptrend expected</li> <li>Risk: High volatility, larger drawdowns</li> </ul>"},{"location":"indicators/statistical/beta/#low-beta-strategy-bear-market-or-uncertainty","title":"Low Beta Strategy (Bear Market or Uncertainty)","text":"<ul> <li>Target beta: 0.4 - 0.7</li> <li>Focus: Utilities, consumer staples, bonds</li> <li>Market view: Decline or consolidation expected</li> <li>Risk: Lower returns in bull markets</li> </ul>"},{"location":"indicators/statistical/beta/#market-neutral-strategy","title":"Market Neutral Strategy","text":"<ul> <li>Target beta: 0.0 - 0.2</li> <li>Focus: Long/short combinations</li> <li>Market view: Stock picking, not market timing</li> <li>Risk: Position-specific risk only</li> </ul>"},{"location":"indicators/statistical/beta/#smart-beta-strategy","title":"Smart Beta Strategy","text":"<ul> <li>Adjust beta based on market conditions</li> <li>High beta in confirmed uptrends</li> <li>Low beta in downtrends or high volatility</li> <li>Rebalance quarterly or on trend changes</li> </ul>"},{"location":"indicators/statistical/beta/#common-settings","title":"Common Settings","text":"Period Use Case Typical Beta Range 30 Short-term trading More volatile, 0.5-2.0 60 Medium-term positioning Moderate stability, 0.6-1.8 252 Annual analysis (standard) Most stable, 0.7-1.5 504 Long-term investing Very stable, 0.8-1.3"},{"location":"indicators/statistical/beta/#limitations-and-considerations","title":"Limitations and Considerations","text":"<ol> <li>Historical Measure: Beta is backward-looking and may not predict future behavior</li> <li>Market Conditions: Beta can change during market regime changes</li> <li>Linear Assumption: Assumes linear relationship between stock and market</li> <li>Benchmark Selection: Different benchmarks yield different betas</li> <li>Time Period: Longer periods provide stability, shorter periods show current behavior</li> <li>Company Changes: Mergers, business model shifts can alter beta</li> <li>Not Absolute Risk: Only measures systematic (market) risk, not total risk</li> </ol>"},{"location":"indicators/statistical/beta/#related-indicators","title":"Related Indicators","text":"<ul> <li>CORREL - Correlation coefficient between securities</li> <li>STDDEV - Standard deviation for volatility measurement</li> <li>VAR - Variance calculation</li> <li>LINEARREG - Linear regression analysis</li> </ul>"},{"location":"indicators/statistical/beta/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Statistical Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/statistical/correl/","title":"CORREL (Pearson's Correlation Coefficient)","text":""},{"location":"indicators/statistical/correl/#overview","title":"Overview","text":"<p>The Pearson's Correlation Coefficient (CORREL) is a statistical indicator that measures the linear relationship between two price series over a specified period. It quantifies how closely two assets move together, producing values between -1 and +1. This indicator is essential for pair trading, portfolio diversification, and identifying correlation breakdowns that can signal trading opportunities.</p>"},{"location":"indicators/statistical/correl/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>prices1</code> Array Required Array of price values for first asset (typically close prices) <code>prices2</code> Array Required Array of price values for second asset (typically close prices) <code>period</code> Integer 30 Number of periods over which to calculate correlation"},{"location":"indicators/statistical/correl/#parameter-details","title":"Parameter Details","text":"<p>prices1 - First price series for correlation calculation - Should be synchronized with prices2 (same timestamps) - Typically closing prices, but can use any price type - Must have same length as prices2</p> <p>prices2 - Second price series for correlation calculation - Should be synchronized with prices1 (same timestamps) - Typically closing prices, but can use any price type - Must have same length as prices1</p> <p>period - Lookback window for correlation calculation - Shorter periods (10-20): More responsive, detects rapid correlation changes - Medium periods (20-40): Balanced view of correlation stability - Longer periods (50-100): Stable long-term correlation trends - Default 30 provides good balance for most pair trading applications</p>"},{"location":"indicators/statistical/correl/#usage","title":"Usage","text":""},{"location":"indicators/statistical/correl/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Calculate correlation between two assets\nspy_prices = [440.12, 441.35, 439.88, 442.17, 443.50, 442.90, 444.25,\n              445.10, 444.75, 446.30, 445.85, 447.20, 446.95, 448.10]\n\nqqq_prices = [368.45, 369.80, 368.20, 370.15, 371.25, 370.85, 372.10,\n              372.90, 372.45, 373.80, 373.40, 374.60, 374.35, 375.40]\n\ncorrelation = SQA::TAI.correl(spy_prices, qqq_prices, period: 10)\n\n# Current correlation value\ncurrent_corr = correlation.last\nputs \"SPY/QQQ Correlation: #{current_corr.round(3)}\"\n\nif current_corr &gt; 0.7\n  puts \"Strong positive correlation - assets moving together\"\nelsif current_corr &lt; -0.7\n  puts \"Strong negative correlation - assets moving opposite\"\nelse\n  puts \"Weak correlation - assets moving independently\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#practical-application","title":"Practical Application","text":"<pre><code># Pair trading setup - monitor correlation for trading opportunities\nstock_a = [100.0, 101.5, 102.0, 101.0, 102.5, 103.0, 102.5, 104.0,\n           105.0, 104.5, 106.0, 105.5, 107.0, 106.5, 108.0]\n\nstock_b = [50.0, 50.8, 51.0, 50.5, 51.2, 51.5, 51.2, 52.0,\n           52.5, 52.2, 53.0, 52.7, 53.5, 53.2, 54.0]\n\n# Calculate rolling correlation\ncorrelation = SQA::TAI.correl(stock_a, stock_b, period: 10)\n\n# Track correlation trend\nrecent_corr = correlation.last(5)\navg_corr = recent_corr.sum / recent_corr.size\ncurrent_corr = correlation.last\n\nputs \"Average correlation (5-period): #{avg_corr.round(3)}\"\nputs \"Current correlation: #{current_corr.round(3)}\"\n\n# Detect correlation breakdown\nif avg_corr &gt; 0.8 &amp;&amp; current_corr &lt; 0.5\n  puts \"CORRELATION BREAKDOWN DETECTED\"\n  puts \"Potential pair trading opportunity - investigate spread\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/statistical/correl/#what-it-measures","title":"What It Measures","text":"<p>CORREL measures the strength and direction of the linear relationship between two price series. It answers the question: \"How closely do these two assets move together?\"</p> <p>The correlation coefficient ranges from -1 to +1: - +1: Perfect positive correlation (assets move in lockstep) - 0: No correlation (assets move independently) - -1: Perfect negative correlation (assets move in opposite directions)</p>"},{"location":"indicators/statistical/correl/#why-its-important","title":"Why It's Important","text":"<p>Understanding correlation between assets is crucial for:</p> <p>Portfolio Management: - Diversification: Lower correlation reduces portfolio risk - Risk assessment: High correlation increases concentration risk - Hedging: Negative correlation provides natural hedges</p> <p>Pair Trading: - Identify cointegrated pairs with high correlation - Detect temporary correlation breakdowns for mean reversion trades - Monitor correlation stability for pair selection</p> <p>Market Analysis: - Sector rotation: Correlation shifts indicate changing market dynamics - Risk-on/risk-off: Correlation patterns reveal market sentiment - Intermarket relationships: Bonds, currencies, commodities</p>"},{"location":"indicators/statistical/correl/#calculation-method","title":"Calculation Method","text":"<p>The Pearson correlation coefficient is calculated using the formula:</p> <pre><code>r = \u03a3[(Xi - X\u0304)(Yi - \u0232)] / sqrt[\u03a3(Xi - X\u0304)\u00b2 \u00d7 \u03a3(Yi - \u0232)\u00b2]\n</code></pre> <p>Where: - Xi, Yi = Individual price values for assets 1 and 2 - X\u0304, \u0232 = Mean prices over the period - \u03a3 = Sum over the period</p> <p>Step-by-step process:</p> <ol> <li>Calculate means of both price series over the period</li> <li>Compute deviations from mean for each price point</li> <li>Calculate covariance (product of deviations)</li> <li>Calculate standard deviations for each series</li> <li>Divide covariance by product of standard deviations</li> <li>Result is correlation coefficient between -1 and +1</li> </ol> <p>Key Concept: The correlation coefficient is normalized, meaning it measures relationship strength independent of the actual price levels or volatility of the assets.</p>"},{"location":"indicators/statistical/correl/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: -1.0 to +1.0</li> <li>Type: Statistical, relationship indicator</li> <li>Lag: Moderate - requires lookback period to calculate</li> <li>Best Used: All market conditions, especially for relative value trading</li> </ul>"},{"location":"indicators/statistical/correl/#interpretation","title":"Interpretation","text":""},{"location":"indicators/statistical/correl/#value-ranges","title":"Value Ranges","text":"<p>Understanding correlation strength:</p> <ul> <li>Perfect Positive Correlation (+0.90 to +1.00)</li> <li>Assets move almost identically</li> <li>Common in same-sector stocks or index vs constituents</li> <li>Limited diversification benefit</li> <li> <p>Strong pair trading candidates</p> </li> <li> <p>Strong Positive Correlation (+0.70 to +0.89)</p> </li> <li>Assets generally move together</li> <li>Some independent price action</li> <li>Moderate diversification benefit</li> <li> <p>Good for momentum pair trades</p> </li> <li> <p>Moderate Positive Correlation (+0.40 to +0.69)</p> </li> <li>Noticeable relationship but significant independence</li> <li>Better diversification benefit</li> <li>Less reliable for pair trading</li> <li> <p>Consider spread volatility</p> </li> <li> <p>Weak Correlation (-0.39 to +0.39)</p> </li> <li>Assets move mostly independently</li> <li>Good diversification benefit</li> <li>Poor pair trading candidates</li> <li> <p>Focus on individual asset analysis</p> </li> <li> <p>Moderate Negative Correlation (-0.69 to -0.40)</p> </li> <li>Assets tend to move in opposite directions</li> <li>Natural hedging characteristics</li> <li>Interesting for spread trading</li> <li> <p>Risk-on/risk-off dynamics</p> </li> <li> <p>Strong Negative Correlation (-0.89 to -0.70)</p> </li> <li>Assets consistently move opposite</li> <li>Excellent hedging properties</li> <li>Consider inverse pair trades</li> <li> <p>Common in gold vs stocks, bonds vs stocks</p> </li> <li> <p>Perfect Negative Correlation (-1.00 to -0.90)</p> </li> <li>Assets move in exact opposite directions</li> <li>Rare in practice</li> <li>Perfect hedge if maintained</li> <li>Usually synthetic (leveraged ETFs)</li> </ul>"},{"location":"indicators/statistical/correl/#correlation-changes","title":"Correlation Changes","text":"<p>Increasing Correlation: When correlation coefficient rises over time: - Assets becoming more synchronized - Sector or market-wide forces strengthening - Diversification benefit decreasing - Increased systemic risk</p> <p>Decreasing Correlation: When correlation coefficient falls over time: - Assets diverging in behavior - Company-specific factors dominating - Diversification benefit increasing - Potential pair trading opportunities</p> <p>Correlation Breakdown: Rapid drop from high to low correlation: - Unexpected divergence in historically correlated assets - Often signals fundamental change in one asset - Prime opportunity for mean reversion trades (if temporary) - Or signal to exit pair trade (if permanent)</p>"},{"location":"indicators/statistical/correl/#stability-analysis","title":"Stability Analysis","text":"<ul> <li>Stable correlation (changes gradually): Reliable relationship for trading</li> <li>Volatile correlation (rapid swings): Unstable relationship, use with caution</li> <li>Trending correlation (steady increase/decrease): Changing market regime</li> </ul>"},{"location":"indicators/statistical/correl/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/statistical/correl/#pair-trading-setup","title":"Pair Trading Setup","text":"<p>Classic Pair Trading Strategy:</p> <pre><code># Identify highly correlated pair\nstock_a_prices = [...]  # Your data\nstock_b_prices = [...]  # Your data\n\n# Calculate correlation\ncorrelation = SQA::TAI.correl(stock_a_prices, stock_b_prices, period: 60)\ncurrent_corr = correlation.last\n\n# Qualify pair for trading\nif current_corr &gt; 0.80\n  puts \"PAIR QUALIFIED: Correlation = #{current_corr.round(3)}\"\n\n  # Calculate price spread\n  spread = stock_a_prices.zip(stock_b_prices).map { |a, b| a - b }\n\n  # Calculate spread statistics\n  spread_mean = spread.sum / spread.size\n  spread_stddev = Math.sqrt(spread.map { |x| (x - spread_mean)**2 }.sum / spread.size)\n\n  current_spread = spread.last\n  z_score = (current_spread - spread_mean) / spread_stddev\n\n  puts \"Spread Z-Score: #{z_score.round(2)}\"\n\n  # Generate signals based on spread\n  if z_score &gt; 2.0\n    puts \"SELL SIGNAL: Spread overextended\"\n    puts \"Action: Short Stock A, Long Stock B\"\n  elsif z_score &lt; -2.0\n    puts \"BUY SIGNAL: Spread overextended\"\n    puts \"Action: Long Stock A, Short Stock B\"\n  elsif z_score.abs &lt; 0.5\n    puts \"EXIT SIGNAL: Spread returned to mean\"\n  end\nelse\n  puts \"Pair not suitable - correlation too weak: #{current_corr.round(3)}\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#correlation-breakdown-trading","title":"Correlation Breakdown Trading","text":"<p>Entry Signals:</p> <ol> <li>Mean Reversion Entry</li> <li>Historical correlation &gt; 0.75</li> <li>Current correlation drops below 0.50</li> <li>Verify correlation drop is temporary, not fundamental</li> <li> <p>Enter spread trade expecting correlation to recover</p> </li> <li> <p>Divergence Trade</p> </li> <li>Long-term correlation stable and high</li> <li>Short-term divergence in price action</li> <li>One asset lags the other's move</li> <li>Trade the laggard to catch up</li> </ol> <p>Example Strategy: <pre><code># Monitor correlation stability\nlong_correlation = SQA::TAI.correl(prices1, prices2, period: 60)\nshort_correlation = SQA::TAI.correl(prices1, prices2, period: 10)\n\nlong_corr = long_correlation.last\nshort_corr = short_correlation.last\n\nputs \"Long-term correlation (60): #{long_corr.round(3)}\"\nputs \"Short-term correlation (10): #{short_corr.round(3)}\"\n\n# Detect breakdown\nif long_corr &gt; 0.75 &amp;&amp; short_corr &lt; 0.50\n  puts \"CORRELATION BREAKDOWN DETECTED\"\n\n  # Calculate which asset is outlier\n  returns1 = prices1.each_cons(2).map { |a, b| (b - a) / a }\n  returns2 = prices2.each_cons(2).map { |a, b| (b - a) / a }\n\n  recent_return1 = returns1.last(5).sum\n  recent_return2 = returns2.last(5).sum\n\n  if recent_return1 &gt; recent_return2 + 0.02\n    puts \"Asset 1 outperforming - consider shorting Asset 1 / buying Asset 2\"\n  elsif recent_return2 &gt; recent_return1 + 0.02\n    puts \"Asset 2 outperforming - consider buying Asset 1 / shorting Asset 2\"\n  end\n\n  puts \"Expected correlation reversion within 20-30 periods\"\nend\n</code></pre></p>"},{"location":"indicators/statistical/correl/#sector-rotation-trading","title":"Sector Rotation Trading","text":"<p>Use correlation to identify sector shifts:</p> <pre><code># Compare individual stock to sector ETF\nstock_prices = [...]\nsector_etf_prices = [...]\n\ncorrelation = SQA::TAI.correl(stock_prices, sector_etf_prices, period: 30)\ncorr_trend = correlation.last(10)\n\n# Calculate correlation trend\nrecent_corr = corr_trend.last\npast_corr = corr_trend.first\n\nif recent_corr &gt; past_corr + 0.20\n  puts \"INCREASING CORRELATION: Stock becoming sector-driven\"\n  puts \"Strategy: Use sector momentum for stock direction\"\nelsif recent_corr &lt; past_corr - 0.20\n  puts \"DECREASING CORRELATION: Stock developing independent story\"\n  puts \"Strategy: Focus on stock-specific fundamentals\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#portfolio-hedging","title":"Portfolio Hedging","text":"<p>Identify hedging opportunities:</p> <pre><code># Find negative correlation for hedging\nportfolio_prices = [...]  # Your portfolio value\nhedge_candidate = [...]   # Potential hedge (e.g., VIX, gold, bonds)\n\ncorrelation = SQA::TAI.correl(portfolio_prices, hedge_candidate, period: 40)\ncurrent_corr = correlation.last\n\nif current_corr &lt; -0.60\n  puts \"HEDGE CANDIDATE IDENTIFIED\"\n  puts \"Correlation: #{current_corr.round(3)}\"\n  puts \"Strong negative correlation provides downside protection\"\n\n  # Calculate hedge ratio\n  portfolio_stddev = calculate_stddev(portfolio_prices)\n  hedge_stddev = calculate_stddev(hedge_candidate)\n\n  hedge_ratio = current_corr * (portfolio_stddev / hedge_stddev)\n  puts \"Suggested hedge ratio: #{hedge_ratio.abs.round(3)}\"\n  puts \"For $100k portfolio, hedge with $#{(100000 * hedge_ratio.abs).round(0)} of hedge asset\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#best-practices","title":"Best Practices","text":""},{"location":"indicators/statistical/correl/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When CORREL works best: - Liquid pairs: High-volume stocks or ETFs - Same market hours: Both assets trade simultaneously - Similar sectors: Related industries or asset classes - Daily to weekly timeframes: More stable correlations than intraday - Established relationships: Historical precedent for correlation</p> <p>Less effective in: - Very short timeframes (&lt; 5 minutes) - too much noise - Low-liquidity assets - correlation may be spurious - Fundamentally unrelated assets - correlation likely random - Crisis periods - correlations converge to 1 (all assets fall together)</p>"},{"location":"indicators/statistical/correl/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With Spread Analysis: <pre><code># Correlation + spread for complete pair trading view\ncorrelation = SQA::TAI.correl(prices1, prices2, period: 30)\n\n# Calculate spread\nspread = prices1.zip(prices2).map { |a, b| a - b }\nspread_sma = SQA::TAI.sma(spread, period: 20)\nspread_stddev = SQA::TAI.stddev(spread, period: 20)\n\n# Bollinger Bands on spread\nupper_band = spread_sma.zip(spread_stddev).map { |m, s| m + (2 * s) }\nlower_band = spread_sma.zip(spread_stddev).map { |m, s| m - (2 * s) }\n\ncurrent_spread = spread.last\ncurrent_upper = upper_band.last\ncurrent_lower = lower_band.last\ncurrent_corr = correlation.last\n\nif current_corr &gt; 0.75\n  if current_spread &gt; current_upper\n    puts \"SELL SPREAD: High correlation + spread at upper band\"\n  elsif current_spread &lt; current_lower\n    puts \"BUY SPREAD: High correlation + spread at lower band\"\n  end\nend\n</code></pre></p> <p>With Beta Analysis: <pre><code># Correlation tells you relationship strength, beta tells you magnitude\ncorrelation = SQA::TAI.correl(stock_prices, market_prices, period: 60)\nbeta = SQA::TAI.beta(stock_prices, market_prices, period: 60)\n\ncurrent_corr = correlation.last\ncurrent_beta = beta.last\n\nputs \"Correlation: #{current_corr.round(3)}\"\nputs \"Beta: #{current_beta.round(3)}\"\n\nif current_corr &gt; 0.70\n  if current_beta &gt; 1.2\n    puts \"High correlation + high beta = Amplified market moves\"\n    puts \"Strategy: Use for leveraged market exposure\"\n  elsif current_beta &lt; 0.8\n    puts \"High correlation + low beta = Defensive with market\"\n    puts \"Strategy: Use for lower-risk market participation\"\n  end\nend\n</code></pre></p> <p>With Cointegration Tests: <pre><code># Correlation measures relationship, cointegration measures mean reversion\n# High correlation is necessary but not sufficient for pair trading\n# Need to verify cointegration separately (ADF test, etc.)\n\ncorrelation = SQA::TAI.correl(prices1, prices2, period: 60)\n\nif correlation.last &gt; 0.80\n  puts \"High correlation detected: #{correlation.last.round(3)}\"\n  puts \"Next step: Perform cointegration test (ADF/Johansen)\"\n  puts \"Only trade pairs that are both correlated AND cointegrated\"\nend\n</code></pre></p>"},{"location":"indicators/statistical/correl/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Confusing Correlation with Causation</li> <li>Correlation does not imply one asset causes the other to move</li> <li>Both may respond to common external factors</li> <li> <p>Use correlation for relationship measurement, not explanation</p> </li> <li> <p>Ignoring Changing Correlations</p> </li> <li>Correlation is not static - it changes over time</li> <li>Market regime changes alter correlations</li> <li>Crisis periods see correlations spike (diversification fails when needed most)</li> <li> <p>Always monitor correlation stability</p> </li> <li> <p>Using Only Correlation for Pair Trading</p> </li> <li>High correlation doesn't guarantee mean reversion</li> <li>Must also check cointegration</li> <li>Need to verify spreads are stationary</li> <li> <p>Correlation alone is insufficient</p> </li> <li> <p>Period Selection Issues</p> </li> <li>Too short: Noisy, unreliable correlations</li> <li>Too long: Misses recent regime changes</li> <li>Use multiple periods for comprehensive view</li> <li> <p>Typical range: 20-60 periods</p> </li> <li> <p>Spurious Correlations</p> </li> <li>Random correlations can appear with enough data</li> <li>Verify with economic logic</li> <li>Test across different time periods</li> <li>Don't trade based on correlation alone</li> </ol>"},{"location":"indicators/statistical/correl/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>For Day Trading: - Use very short periods (5-20) - Monitor intraday correlation changes - Focus on highly liquid pairs - Expect more volatile correlations</p> <p>For Swing Trading: - Use medium periods (20-40) - Look for multi-day correlation stability - Focus on established sector relationships - Balance responsiveness with stability</p> <p>For Position Trading: - Use longer periods (40-100) - Focus on long-term correlation trends - Suitable for portfolio hedging decisions - More stable but slower to adapt</p> <p>For Pair Trading: - Use multiple periods: 20, 40, 60 - Require correlation &gt; 0.75 on 60-period - Monitor 20-period for entry timing - Longer periods for pair selection, shorter for trade timing</p>"},{"location":"indicators/statistical/correl/#practical-example","title":"Practical Example","text":"<p>Complete pair trading system example:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data for two correlated stocks\n# Example: XLE (Energy ETF) and CVX (Chevron)\nxle_prices = [\n  78.50, 79.20, 78.90, 79.80, 80.50, 80.20, 81.00, 81.50,\n  81.20, 82.00, 82.50, 82.20, 83.00, 82.70, 83.50, 83.20,\n  84.00, 84.50, 84.20, 85.00, 85.50, 85.20, 86.00, 85.70,\n  86.50, 86.20, 87.00, 87.50, 87.20, 88.00, 88.50, 88.20,\n  89.00, 88.70, 89.50, 89.20, 90.00, 89.70, 90.50, 90.20,\n  91.00, 90.70, 91.50, 91.20, 92.00, 91.70, 92.50, 92.20,\n  93.00, 92.70, 93.50, 93.20, 94.00, 93.70, 94.50, 94.20,\n  95.00, 94.70, 95.50, 95.20, 96.00\n]\n\ncvx_prices = [\n  145.00, 146.50, 145.80, 147.20, 148.50, 148.00, 149.50, 150.20,\n  149.80, 151.00, 151.80, 151.20, 152.50, 152.00, 153.20, 152.80,\n  154.00, 154.80, 154.20, 155.50, 156.20, 155.80, 157.00, 156.50,\n  157.80, 157.20, 158.50, 159.20, 158.80, 160.00, 160.80, 160.20,\n  161.50, 161.00, 162.20, 161.80, 163.00, 162.50, 163.80, 163.20,\n  164.50, 164.00, 165.20, 164.80, 166.00, 165.50, 166.80, 166.20,\n  167.50, 167.00, 168.20, 167.80, 169.00, 168.50, 169.80, 169.20,\n  170.50, 170.00, 171.20, 170.80, 172.00\n]\n\n# Step 1: Calculate correlation across multiple periods\nlong_correlation = SQA::TAI.correl(xle_prices, cvx_prices, period: 60)\nmedium_correlation = SQA::TAI.correl(xle_prices, cvx_prices, period: 30)\nshort_correlation = SQA::TAI.correl(xle_prices, cvx_prices, period: 10)\n\nlong_corr = long_correlation.last\nmedium_corr = medium_correlation.last\nshort_corr = short_correlation.last\n\nputs \"=== CORRELATION ANALYSIS ===\"\nputs \"Long-term (60): #{long_corr.round(3)}\"\nputs \"Medium-term (30): #{medium_corr.round(3)}\"\nputs \"Short-term (10): #{short_corr.round(3)}\"\nputs \"\"\n\n# Step 2: Qualify pair for trading\nif long_corr &gt; 0.75\n  puts \"PAIR QUALIFIED: Strong long-term correlation\"\n  puts \"\"\n\n  # Step 3: Calculate spread\n  spread = xle_prices.zip(cvx_prices).map { |xle, cvx| xle - (cvx * 0.55) } # Ratio adjusted\n\n  # Step 4: Spread statistics\n  spread_mean = spread.last(30).sum / 30.0\n  spread_values = spread.last(30)\n  spread_stddev = Math.sqrt(\n    spread_values.map { |x| (x - spread_mean)**2 }.sum / 30.0\n  )\n\n  current_spread = spread.last\n  z_score = (current_spread - spread_mean) / spread_stddev\n\n  puts \"=== SPREAD ANALYSIS ===\"\n  puts \"Current spread: #{current_spread.round(3)}\"\n  puts \"30-period mean: #{spread_mean.round(3)}\"\n  puts \"Standard deviation: #{spread_stddev.round(3)}\"\n  puts \"Z-Score: #{z_score.round(2)}\"\n  puts \"\"\n\n  # Step 5: Check for correlation breakdown opportunity\n  if long_corr &gt; 0.75 &amp;&amp; short_corr &lt; 0.50\n    puts \"=== CORRELATION BREAKDOWN DETECTED ===\"\n    puts \"This may be a mean reversion opportunity\"\n    puts \"\"\n  end\n\n  # Step 6: Generate trading signals\n  puts \"=== TRADING SIGNALS ===\"\n\n  if z_score &gt; 2.0\n    stop_loss_z = z_score + 0.5\n    take_profit_z = 0.0\n\n    puts \"SELL SPREAD SIGNAL\"\n    puts \"Action: Short XLE / Long CVX\"\n    puts \"Rationale: Spread #{z_score.round(2)} std devs above mean\"\n    puts \"Entry Z-Score: #{z_score.round(2)}\"\n    puts \"Stop Loss Z-Score: #{stop_loss_z.round(2)}\"\n    puts \"Take Profit Z-Score: #{take_profit_z.round(2)}\"\n    puts \"Expected duration: 10-20 periods for mean reversion\"\n\n  elsif z_score &lt; -2.0\n    stop_loss_z = z_score - 0.5\n    take_profit_z = 0.0\n\n    puts \"BUY SPREAD SIGNAL\"\n    puts \"Action: Long XLE / Short CVX\"\n    puts \"Rationale: Spread #{z_score.abs.round(2)} std devs below mean\"\n    puts \"Entry Z-Score: #{z_score.round(2)}\"\n    puts \"Stop Loss Z-Score: #{stop_loss_z.round(2)}\"\n    puts \"Take Profit Z-Score: #{take_profit_z.round(2)}\"\n    puts \"Expected duration: 10-20 periods for mean reversion\"\n\n  elsif z_score.abs &lt; 0.5\n    puts \"EXIT SIGNAL: Spread near mean\"\n    puts \"Close any open positions - spread has reverted\"\n\n  else\n    puts \"NO SIGNAL: Spread at #{z_score.round(2)} std devs\"\n    puts \"Wait for |Z-Score| &gt; 2.0 for entry\"\n  end\n\n  # Step 7: Risk assessment\n  puts \"\"\n  puts \"=== RISK ASSESSMENT ===\"\n\n  if short_corr &lt; 0.50 &amp;&amp; long_corr &gt; 0.75\n    puts \"WARNING: Short-term correlation breakdown\"\n    puts \"Risk: Pair relationship may be unstable\"\n    puts \"Recommendation: Reduce position size by 50%\"\n  elsif short_corr &gt; 0.70\n    puts \"STABLE: Short and long correlations aligned\"\n    puts \"Risk: Normal pair trading risk\"\n    puts \"Recommendation: Use standard position size\"\n  end\n\n  # Calculate position sizing\n  portfolio_value = 100000\n  risk_per_trade = 0.02 # 2% risk\n\n  # Risk based on stop loss\n  risk_amount = portfolio_value * risk_per_trade\n  stop_distance = spread_stddev * 0.5 # 0.5 std dev stop\n\n  xle_position_size = risk_amount / stop_distance\n  cvx_position_size = xle_position_size * 0.55 # Ratio adjusted\n\n  puts \"\"\n  puts \"=== POSITION SIZING ===\"\n  puts \"Portfolio value: $#{portfolio_value}\"\n  puts \"Risk per trade: #{(risk_per_trade * 100).round(1)}%\"\n  puts \"XLE position: #{xle_position_size.round(0)} shares\"\n  puts \"CVX position: #{cvx_position_size.round(0)} shares\"\n\nelse\n  puts \"PAIR NOT SUITABLE\"\n  puts \"Reason: Long-term correlation too weak (#{long_corr.round(3)})\"\n  puts \"Requirement: Correlation &gt; 0.75 for pair trading\"\nend\n\n# Step 8: Monitor correlation stability\nputs \"\"\nputs \"=== CORRELATION STABILITY ===\"\n\nrecent_corrs = long_correlation.last(10)\ncorr_stddev = Math.sqrt(\n  recent_corrs.map { |c| (c - recent_corrs.sum/10.0)**2 }.sum / 10.0\n)\ncorr_cv = corr_stddev / (recent_corrs.sum / 10.0)\n\nif corr_cv &lt; 0.10\n  puts \"STABLE: Correlation coefficient of variation = #{corr_cv.round(3)}\"\n  puts \"Pair relationship is reliable\"\nelse\n  puts \"UNSTABLE: Correlation coefficient of variation = #{corr_cv.round(3)}\"\n  puts \"WARNING: Pair relationship is volatile - trade with caution\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/statistical/correl/#statistical-family","title":"Statistical Family","text":"<ul> <li>BETA: Measures systematic risk and return sensitivity</li> <li>VAR: Sample variance for volatility measurement</li> <li>STDDEV: Standard deviation for dispersion analysis</li> <li>TSF: Time series forecast for trend projection</li> <li>LINEARREG: Linear regression for trend analysis</li> </ul>"},{"location":"indicators/statistical/correl/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>ATR: Use for volatility-adjusted position sizing</li> <li>BBANDS: Apply to spread for entry/exit signals</li> <li>RSI: Additional confirmation for pair divergence</li> <li>ADX: Measure trend strength in spread</li> </ul>"},{"location":"indicators/statistical/correl/#alternative-correlation-approaches","title":"Alternative Correlation Approaches","text":"<p>While CORREL uses Pearson's coefficient, consider: - Spearman rank correlation (for non-linear relationships) - Rolling correlations with varying windows - Conditional correlations (regime-dependent) - Dynamic Conditional Correlation (DCC-GARCH)</p>"},{"location":"indicators/statistical/correl/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/statistical/correl/#multi-asset-correlation-analysis","title":"Multi-Asset Correlation Analysis","text":"<pre><code># Analyze correlation matrix for portfolio\nassets = {\n  'SPY' =&gt; spy_prices,\n  'TLT' =&gt; tlt_prices,\n  'GLD' =&gt; gld_prices,\n  'USO' =&gt; uso_prices\n}\n\nputs \"=== CORRELATION MATRIX ===\"\nputs \"        \" + assets.keys.join(\"    \")\n\nassets.each do |name1, prices1|\n  row = \"#{name1}   \"\n  assets.each do |name2, prices2|\n    corr = SQA::TAI.correl(prices1, prices2, period: 60).last\n    row += \"#{corr.round(2)}  \"\n  end\n  puts row\nend\n\n# Identify best diversification pairs\n# Look for correlations near 0 or negative\n</code></pre>"},{"location":"indicators/statistical/correl/#time-varying-correlation","title":"Time-Varying Correlation","text":"<pre><code># Track how correlation changes over time\ncorrelation_series = SQA::TAI.correl(prices1, prices2, period: 30)\n\n# Calculate correlation trend\nrecent_trend = correlation_series.last(10)\nolder_trend = correlation_series[-20..-11]\n\nrecent_avg = recent_trend.sum / recent_trend.size\nolder_avg = older_trend.sum / older_trend.size\n\ncorrelation_change = recent_avg - older_avg\n\nif correlation_change &gt; 0.15\n  puts \"RISING CORRELATION: Assets converging (+#{correlation_change.round(3)})\"\n  puts \"Implication: Reduced diversification benefit\"\nelsif correlation_change &lt; -0.15\n  puts \"FALLING CORRELATION: Assets diverging (#{correlation_change.round(3)})\"\n  puts \"Implication: Increased diversification benefit or breakdown\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#correlation-based-portfolio-optimization","title":"Correlation-Based Portfolio Optimization","text":"<pre><code># Find optimal portfolio weights using correlation\n# Lower correlation = better diversification = higher allocation\n\nasset_returns = {\n  'Asset A' =&gt; [0.01, 0.02, -0.01, 0.03],\n  'Asset B' =&gt; [-0.01, 0.01, 0.02, -0.02]\n}\n\ncorrelation = SQA::TAI.correl(\n  asset_returns['Asset A'],\n  asset_returns['Asset B'],\n  period: 30\n).last\n\n# Simple allocation based on correlation\nif correlation &lt; 0.30\n  puts \"Low correlation - equal weight portfolio optimal\"\n  puts \"Asset A: 50%, Asset B: 50%\"\nelsif correlation &gt; 0.70\n  puts \"High correlation - concentrated portfolio acceptable\"\n  puts \"Consider single asset or reduce allocation to weaker performer\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#statistical-significance-testing","title":"Statistical Significance Testing","text":"<pre><code># Test if correlation is statistically significant\n# Rule of thumb: For 95% confidence, need |r| &gt; 2/sqrt(n)\n\ncorrelation = SQA::TAI.correl(prices1, prices2, period: 30)\ncurrent_corr = correlation.last\nn = 30 # sample size\n\ncritical_value = 2.0 / Math.sqrt(n)\n\nputs \"Correlation: #{current_corr.round(3)}\"\nputs \"Critical value (95% confidence): #{critical_value.round(3)}\"\n\nif current_corr.abs &gt; critical_value\n  puts \"STATISTICALLY SIGNIFICANT: Correlation is likely real\"\nelse\n  puts \"NOT SIGNIFICANT: Correlation may be random noise\"\n  puts \"Need larger sample or stronger correlation\"\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#crisis-alpha-correlation-in-extreme-markets","title":"Crisis Alpha - Correlation in Extreme Markets","text":"<pre><code># Detect correlation regime shifts during volatility spikes\nnormal_correlation = SQA::TAI.correl(prices1, prices2, period: 60)\nrecent_correlation = SQA::TAI.correl(prices1, prices2, period: 10)\n\n# Calculate volatility\nreturns = prices1.each_cons(2).map { |a, b| (b - a) / a }\nrecent_volatility = Math.sqrt(returns.last(10).map { |r| r**2 }.sum / 10)\nnormal_volatility = Math.sqrt(returns.map { |r| r**2 }.sum / returns.size)\n\nif recent_volatility &gt; normal_volatility * 2.0\n  puts \"=== HIGH VOLATILITY REGIME ===\"\n  puts \"Recent vol: #{(recent_volatility * 100).round(2)}%\"\n  puts \"Normal vol: #{(normal_volatility * 100).round(2)}%\"\n\n  if recent_correlation.last &gt; normal_correlation.last + 0.20\n    puts \"WARNING: Correlation spike during stress\"\n    puts \"Diversification benefits reduced in crisis\"\n    puts \"Consider reducing overall exposure\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/correl/#references","title":"References","text":"<ul> <li>\"Quantitative Trading\" by Ernest Chan - Chapter on pair trading and correlation</li> <li>\"Algorithmic Trading\" by Ernest Chan - Statistical arbitrage using correlation</li> <li>\"Pairs Trading: Quantitative Methods and Analysis\" by Ganapathy Vidyamurthy</li> <li>\"Active Portfolio Management\" by Grinold &amp; Kahn - Correlation in portfolio construction</li> <li>Original Research: Karl Pearson (1896) - Mathematical theory of correlation</li> <li>TA-Lib Documentation: CORREL Function</li> </ul>"},{"location":"indicators/statistical/correl/#see-also","title":"See Also","text":"<ul> <li>Statistical Indicators Overview</li> </ul> <ul> <li>Pair Trading Guide</li> </ul> <ul> <li>Portfolio Optimization</li> <li>API Reference</li> </ul>"},{"location":"indicators/statistical/linearreg/","title":"Linear Regression (LINEARREG)","text":"<p>The Linear Regression indicator calculates the linear regression line (also known as the least squares line or trend line) over a specified period. It represents the expected price value based on the linear trend, providing a statistical forecast of where prices \"should\" be according to the underlying trend. Unlike moving averages, linear regression gives more weight to recent data through its mathematical formulation and adapts more quickly to changing price trends.</p> <p>Linear regression is the foundation for many advanced technical indicators and is widely used for trend identification, mean reversion trading, and determining dynamic support and resistance levels.</p>"},{"location":"indicators/statistical/linearreg/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nclose_prices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n                45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n                46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n                45.90, 46.78, 47.12, 47.45]\n\n# Calculate 14-period linear regression\nlinreg = SQA::TAI.linearreg(close_prices, period: 14)\n\nputs \"Current regression value: #{linreg.last.round(2)}\"\nputs \"Current price: #{close_prices.last.round(2)}\"\nputs \"Deviation: #{(close_prices.last - linreg.last).round(2)}\"\n</code></pre>"},{"location":"indicators/statistical/linearreg/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values (typically closing prices) <code>period</code> Integer No 14 Number of periods for regression calculation"},{"location":"indicators/statistical/linearreg/#returns","title":"Returns","text":"<p>Returns an array of linear regression values representing the fitted trend line. The first <code>period - 1</code> values will be <code>nil</code>.</p>"},{"location":"indicators/statistical/linearreg/#interpretation","title":"Interpretation","text":"Condition Interpretation Price &gt; LinReg Price is above trend - potential overbought or strong uptrend Price &lt; LinReg Price is below trend - potential oversold or strong downtrend Price = LinReg Price is on trend - equilibrium LinReg rising Uptrend in progress LinReg falling Downtrend in progress LinReg flat Sideways/consolidation phase"},{"location":"indicators/statistical/linearreg/#deviation-analysis","title":"Deviation Analysis","text":"<ul> <li>Small deviation: Price is following the trend closely</li> <li>Large deviation: Price has deviated significantly - mean reversion opportunity</li> <li>Increasing deviation: Trend acceleration or potential exhaustion</li> <li>Decreasing deviation: Trend weakening or price returning to trend</li> </ul>"},{"location":"indicators/statistical/linearreg/#example-basic-regression-trading","title":"Example: Basic Regression Trading","text":"<pre><code>close_prices = load_historical_data('AAPL', field: :close)\n\nlinreg = SQA::TAI.linearreg(close_prices, period: 20)\n\ncurrent_price = close_prices.last\ncurrent_linreg = linreg.last\ndeviation = current_price - current_linreg\ndeviation_pct = (deviation / current_linreg * 100).round(2)\n\nputs \"Price: #{current_price.round(2)}\"\nputs \"Linear Regression: #{current_linreg.round(2)}\"\nputs \"Deviation: #{deviation.round(2)} (#{deviation_pct}%)\"\n\n# Mean reversion trading\ncase deviation_pct\nwhen -3..-Float::INFINITY\n  puts \"Price #{deviation_pct}% below trend - OVERSOLD\"\n  puts \"Mean reversion BUY signal\"\nwhen 3..Float::INFINITY\n  puts \"Price #{deviation_pct}% above trend - OVERBOUGHT\"\n  puts \"Mean reversion SELL signal\"\nelse\n  puts \"Price near trend line - NEUTRAL\"\nend\n\n# Trend direction\nif linreg.last &gt; linreg[-5]\n  puts \"Trend: BULLISH (regression line rising)\"\nelsif linreg.last &lt; linreg[-5]\n  puts \"Trend: BEARISH (regression line falling)\"\nelse\n  puts \"Trend: SIDEWAYS (regression line flat)\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg/#example-linear-regression-channels","title":"Example: Linear Regression Channels","text":"<pre><code>close_prices = load_historical_data('TSLA', field: :close)\nhigh_prices = load_historical_data('TSLA', field: :high)\nlow_prices = load_historical_data('TSLA', field: :low)\n\nperiod = 20\nlinreg = SQA::TAI.linearreg(close_prices, period: period)\n\n# Calculate channel width using standard deviation\nstddev = SQA::TAI.stddev(close_prices, period: period)\n\n# Create upper and lower channel bands\nupper_channel = linreg.zip(stddev).map do |lr, sd|\n  lr &amp;&amp; sd ? lr + (2 * sd) : nil\nend\n\nlower_channel = linreg.zip(stddev).map do |lr, sd|\n  lr &amp;&amp; sd ? lr - (2 * sd) : nil\nend\n\ncurrent_price = close_prices.last\ncurrent_linreg = linreg.last\ncurrent_upper = upper_channel.last\ncurrent_lower = lower_channel.last\n\nputs \"Linear Regression Channel:\"\nputs \"Upper Band: #{current_upper.round(2)}\"\nputs \"Mid Line (LinReg): #{current_linreg.round(2)}\"\nputs \"Lower Band: #{current_lower.round(2)}\"\nputs \"Current Price: #{current_price.round(2)}\"\n\n# Channel trading signals\nif current_price &gt;= current_upper\n  puts \"Price at upper channel - potential SELL\"\n  puts \"Take profits or short opportunity\"\nelsif current_price &lt;= current_lower\n  puts \"Price at lower channel - potential BUY\"\n  puts \"Support level reached\"\nelsif current_price &gt; current_linreg\n  puts \"Price above mid-line - BULLISH position\"\nelse\n  puts \"Price below mid-line - BEARISH position\"\nend\n\n# Channel width indicates volatility\nchannel_width_pct = ((current_upper - current_lower) / current_linreg * 100).round(2)\nputs \"Channel width: #{channel_width_pct}%\"\n\nif channel_width_pct &lt; 5\n  puts \"Narrow channel - low volatility, breakout possible\"\nelsif channel_width_pct &gt; 15\n  puts \"Wide channel - high volatility, mean reversion likely\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg/#example-regression-slope-analysis","title":"Example: Regression Slope Analysis","text":"<pre><code>close_prices = load_historical_data('MSFT', field: :close)\n\n# Calculate regression and slope\nlinreg = SQA::TAI.linearreg(close_prices, period: 20)\nlinreg_slope = SQA::TAI.linearreg_slope(close_prices, period: 20)\n\ncurrent_linreg = linreg.last\nprev_linreg = linreg[-5]\ncurrent_slope = linreg_slope.last\n\n# Calculate trend strength\ntrend_change = ((current_linreg - prev_linreg) / prev_linreg * 100).round(2)\n\nputs \"Linear Regression: #{current_linreg.round(2)}\"\nputs \"Regression Slope: #{current_slope.round(4)}\"\nputs \"5-period change: #{trend_change}%\"\n\n# Interpret slope\nif current_slope &gt; 0.5\n  puts \"Strong uptrend - slope &gt; 0.5\"\n  puts \"Momentum strategy: Stay long\"\nelsif current_slope &gt; 0\n  puts \"Weak uptrend - slope between 0 and 0.5\"\n  puts \"Caution: Trend may be weakening\"\nelsif current_slope &lt; -0.5\n  puts \"Strong downtrend - slope &lt; -0.5\"\n  puts \"Momentum strategy: Stay short\"\nelse\n  puts \"Weak downtrend or sideways - slope between -0.5 and 0\"\n  puts \"Range trading or wait for trend\"\nend\n\n# Slope direction changes (trend reversals)\nprev_slope = linreg_slope[-2]\nif current_slope &gt; 0 &amp;&amp; prev_slope &lt;= 0\n  puts \"TREND REVERSAL: Slope crossed above zero\"\n  puts \"Potential trend change to bullish\"\nelsif current_slope &lt; 0 &amp;&amp; prev_slope &gt;= 0\n  puts \"TREND REVERSAL: Slope crossed below zero\"\n  puts \"Potential trend change to bearish\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg/#example-mean-reversion-strategy","title":"Example: Mean Reversion Strategy","text":"<pre><code>close_prices = load_historical_data('SPY', field: :close)\n\nperiod = 20\nlinreg = SQA::TAI.linearreg(close_prices, period: period)\nstddev = SQA::TAI.stddev(close_prices, period: period)\n\n# Calculate z-score (standard deviations from regression line)\nz_scores = close_prices.zip(linreg, stddev).map do |price, lr, sd|\n  if lr &amp;&amp; sd &amp;&amp; sd &gt; 0\n    (price - lr) / sd\n  else\n    nil\n  end\nend\n\ncurrent_price = close_prices.last\ncurrent_linreg = linreg.last\ncurrent_zscore = z_scores.last\n\nputs \"Mean Reversion Analysis:\"\nputs \"Price: #{current_price.round(2)}\"\nputs \"Regression: #{current_linreg.round(2)}\"\nputs \"Z-Score: #{current_zscore.round(2)}\"\n\n# Z-score based mean reversion\ncase current_zscore\nwhen -2..-Float::INFINITY\n  puts \"Extreme oversold (Z &lt; -2) - STRONG BUY\"\n  puts \"Price 2+ standard deviations below trend\"\n  puts \"High probability mean reversion trade\"\nwhen -1.5..-2\n  puts \"Oversold (Z between -2 and -1.5) - BUY signal\"\n  puts \"Good mean reversion opportunity\"\nwhen 1.5..2\n  puts \"Overbought (Z between 1.5 and 2) - SELL signal\"\n  puts \"Good mean reversion opportunity\"\nwhen 2..Float::INFINITY\n  puts \"Extreme overbought (Z &gt; 2) - STRONG SELL\"\n  puts \"Price 2+ standard deviations above trend\"\n  puts \"High probability mean reversion trade\"\nelse\n  puts \"Near trend (|Z| &lt; 1.5) - NEUTRAL\"\n  puts \"Wait for better entry\"\nend\n\n# Exit strategy\nif current_zscore.abs &lt; 0.5\n  puts \"EXIT signal: Price returned to trend line\"\nend\n\n# Position sizing based on z-score\nposition_size = [(current_zscore.abs - 1.5) * 10, 0].max.round(2)\nif position_size &gt; 0\n  puts \"Suggested position size: #{position_size}% of capital\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg/#example-trend-following-with-regression","title":"Example: Trend Following with Regression","text":"<pre><code>close_prices = load_historical_data('NVDA', field: :close)\n\n# Multiple timeframe regression\nlinreg_short = SQA::TAI.linearreg(close_prices, period: 10)\nlinreg_medium = SQA::TAI.linearreg(close_prices, period: 20)\nlinreg_long = SQA::TAI.linearreg(close_prices, period: 50)\n\ncurrent_price = close_prices.last\nlr_short = linreg_short.last\nlr_medium = linreg_medium.last\nlr_long = linreg_long.last\n\nputs \"Multi-Timeframe Regression Analysis:\"\nputs \"Price: #{current_price.round(2)}\"\nputs \"Short-term (10): #{lr_short.round(2)}\"\nputs \"Medium-term (20): #{lr_medium.round(2)}\"\nputs \"Long-term (50): #{lr_long.round(2)}\"\n\n# Trend alignment\nif lr_short &gt; lr_medium &amp;&amp; lr_medium &gt; lr_long\n  puts \"STRONG UPTREND: All timeframes aligned bullish\"\n  puts \"Aggressive long position justified\"\n\n  if current_price &lt; lr_short\n    puts \"Price pullback to short-term line - BUY opportunity\"\n  elsif current_price &gt; lr_short\n    puts \"Price above short-term line - hold long position\"\n  end\n\nelsif lr_short &lt; lr_medium &amp;&amp; lr_medium &lt; lr_long\n  puts \"STRONG DOWNTREND: All timeframes aligned bearish\"\n  puts \"Aggressive short position justified\"\n\n  if current_price &gt; lr_short\n    puts \"Price bounce to short-term line - SELL opportunity\"\n  elsif current_price &lt; lr_short\n    puts \"Price below short-term line - hold short position\"\n  end\n\nelse\n  puts \"MIXED SIGNALS: Timeframes not aligned\"\n  puts \"Range trading or reduce position size\"\n\n  # Identify specific conflicts\n  if lr_short &gt; lr_medium &amp;&amp; lr_medium &lt; lr_long\n    puts \"Short-term bullish, long-term bearish - consolidation\"\n  elsif lr_short &lt; lr_medium &amp;&amp; lr_medium &gt; lr_long\n    puts \"Short-term bearish, long-term bullish - correction\"\n  end\nend\n\n# Regression convergence/divergence\nspread_short_medium = ((lr_short - lr_medium) / lr_medium * 100).round(2)\nspread_medium_long = ((lr_medium - lr_long) / lr_long * 100).round(2)\n\nputs \"Short/Medium spread: #{spread_short_medium}%\"\nputs \"Medium/Long spread: #{spread_medium_long}%\"\n\nif spread_short_medium.abs &gt; 5\n  puts \"Wide spread indicates strong short-term trend\"\nelsif spread_short_medium.abs &lt; 1\n  puts \"Narrow spread indicates consolidation\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg/#example-breakout-trading-with-regression","title":"Example: Breakout Trading with Regression","text":"<pre><code>close_prices = load_historical_data('AMZN', field: :close)\nhigh_prices = load_historical_data('AMZN', field: :high)\nlow_prices = load_historical_data('AMZN', field: :low)\nvolume = load_historical_data('AMZN', field: :volume)\n\nperiod = 20\nlinreg = SQA::TAI.linearreg(close_prices, period: period)\nlinreg_slope = SQA::TAI.linearreg_slope(close_prices, period: period)\n\n# Calculate how long price has been near regression\nlookback = 10\nrecent_prices = close_prices.last(lookback)\nrecent_linreg = linreg.last(lookback)\n\nnear_line_count = recent_prices.zip(recent_linreg).count do |price, lr|\n  ((price - lr).abs / lr * 100) &lt; 2  # Within 2% of regression line\nend\n\nconsolidation_ratio = (near_line_count.to_f / lookback * 100).round(0)\n\nputs \"Breakout Analysis:\"\nputs \"Current Price: #{close_prices.last.round(2)}\"\nputs \"Regression Line: #{linreg.last.round(2)}\"\nputs \"Consolidation: #{consolidation_ratio}% of last #{lookback} periods\"\n\n# Detect consolidation\nif consolidation_ratio &gt; 70 &amp;&amp; linreg_slope.last.abs &lt; 0.1\n  puts \"CONSOLIDATION DETECTED - breakout imminent\"\n  puts \"Flat regression slope with tight price action\"\n\n  # Look for breakout\n  recent_high = high_prices.last(period).max\n  recent_low = low_prices.last(period).min\n  current_high = high_prices.last\n  current_low = low_prices.last\n\n  if current_high &gt; recent_high\n    puts \"UPSIDE BREAKOUT - BUY signal\"\n    puts \"Entry: #{current_high.round(2)}\"\n    puts \"Target: #{(current_high + (current_high - recent_low)).round(2)}\"\n    puts \"Stop: #{linreg.last.round(2)}\"\n\n    # Volume confirmation\n    avg_volume = volume.last(period).sum / period\n    if volume.last &gt; avg_volume * 1.5\n      puts \"Strong volume confirmation\"\n    end\n\n  elsif current_low &lt; recent_low\n    puts \"DOWNSIDE BREAKOUT - SELL signal\"\n    puts \"Entry: #{current_low.round(2)}\"\n    puts \"Target: #{(current_low - (recent_high - current_low)).round(2)}\"\n    puts \"Stop: #{linreg.last.round(2)}\"\n\n    if volume.last &gt; avg_volume * 1.5\n      puts \"Strong volume confirmation\"\n    end\n  else\n    puts \"No breakout yet - wait for range break\"\n    puts \"Resistance: #{recent_high.round(2)}\"\n    puts \"Support: #{recent_low.round(2)}\"\n  end\n\nelsif linreg_slope.last.abs &gt; 0.5\n  puts \"Strong trend in progress - not consolidating\"\n  puts \"Look for pullbacks to regression line instead\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/statistical/linearreg/#1-regression-channels-for-volatility","title":"1. Regression Channels for Volatility","text":"<p>Use the distance between price and regression line to measure volatility: - Narrowing channel: Volatility contracting (breakout setup) - Widening channel: Volatility expanding (mean reversion setup) - Parallel channel: Steady trend</p>"},{"location":"indicators/statistical/linearreg/#2-multiple-regression-periods","title":"2. Multiple Regression Periods","text":"<p>Compare different periods to identify trend structure: - Short period (10): Immediate trend - Medium period (20): Primary trend - Long period (50): Major trend - All aligned: High conviction trades</p>"},{"location":"indicators/statistical/linearreg/#3-regression-as-dynamic-supportresistance","title":"3. Regression as Dynamic Support/Resistance","text":"<p>The regression line acts as dynamic support in uptrends and resistance in downtrends: - Price bounces off line: Trend continuation - Price breaks through line: Trend reversal - Multiple touches: Strengthens the line</p>"},{"location":"indicators/statistical/linearreg/#4-regression-with-price-action","title":"4. Regression with Price Action","text":"<p>Combine regression with candlestick patterns: - Hammer at regression line: Strong buy - Shooting star at regression line: Strong sell - Doji at regression line: Indecision/reversal</p>"},{"location":"indicators/statistical/linearreg/#5-time-based-projections","title":"5. Time-Based Projections","text":"<p>Use the regression line to project future prices: - Extend the line forward for price targets - Compare actual vs projected: Measure trend strength - Acceleration/deceleration of trend</p>"},{"location":"indicators/statistical/linearreg/#example-complete-trading-system","title":"Example: Complete Trading System","text":"<pre><code>class RegressionTradingSystem\n  def initialize(symbol, period: 20)\n    @symbol = symbol\n    @period = period\n    @position = nil  # :long, :short, or nil\n  end\n\n  def analyze\n    close_prices = load_historical_data(@symbol, field: :close)\n\n    # Calculate indicators\n    linreg = SQA::TAI.linearreg(close_prices, period: @period)\n    linreg_slope = SQA::TAI.linearreg_slope(close_prices, period: @period)\n    stddev = SQA::TAI.stddev(close_prices, period: @period)\n\n    current_price = close_prices.last\n    current_linreg = linreg.last\n    current_slope = linreg_slope.last\n    current_stddev = stddev.last\n\n    # Calculate metrics\n    deviation = current_price - current_linreg\n    deviation_pct = (deviation / current_linreg * 100).round(2)\n    z_score = current_stddev &gt; 0 ? (deviation / current_stddev).round(2) : 0\n\n    # Trend determination\n    trend = if current_slope &gt; 0.3\n              :strong_uptrend\n            elsif current_slope &gt; 0\n              :weak_uptrend\n            elsif current_slope &lt; -0.3\n              :strong_downtrend\n            elsif current_slope &lt; 0\n              :weak_downtrend\n            else\n              :sideways\n            end\n\n    puts &lt;&lt;~ANALYSIS\n      === #{@symbol} Regression Analysis ===\n      Price: #{current_price.round(2)}\n      LinReg: #{current_linreg.round(2)}\n      Deviation: #{deviation_pct}%\n      Z-Score: #{z_score}\n      Slope: #{current_slope.round(4)}\n      Trend: #{trend}\n    ANALYSIS\n\n    # Trading logic\n    generate_signals(\n      current_price, current_linreg, z_score,\n      deviation_pct, trend, current_slope\n    )\n  end\n\n  def generate_signals(price, linreg, z_score, deviation_pct, trend, slope)\n    # Mean reversion in sideways markets\n    if trend == :sideways\n      if z_score &lt; -1.5 &amp;&amp; @position != :long\n        puts \"MEAN REVERSION BUY: Oversold in sideways market\"\n        @position = :long\n      elsif z_score &gt; 1.5 &amp;&amp; @position != :short\n        puts \"MEAN REVERSION SELL: Overbought in sideways market\"\n        @position = :short\n      elsif z_score.abs &lt; 0.5 &amp;&amp; @position\n        puts \"EXIT: Returned to mean\"\n        @position = nil\n      end\n\n    # Trend following in trending markets\n    elsif trend == :strong_uptrend\n      if deviation_pct &lt; -2 &amp;&amp; @position != :long\n        puts \"TREND BUY: Pullback to support in uptrend\"\n        @position = :long\n      elsif slope &lt; 0 &amp;&amp; @position == :long\n        puts \"EXIT LONG: Trend reversal\"\n        @position = nil\n      end\n\n    elsif trend == :strong_downtrend\n      if deviation_pct &gt; 2 &amp;&amp; @position != :short\n        puts \"TREND SELL: Rally to resistance in downtrend\"\n        @position = :short\n      elsif slope &gt; 0 &amp;&amp; @position == :short\n        puts \"EXIT SHORT: Trend reversal\"\n        @position = nil\n      end\n\n    # Reduced size in weak trends\n    elsif [:weak_uptrend, :weak_downtrend].include?(trend)\n      puts \"WEAK TREND: Reduce position size or wait\"\n    end\n\n    puts \"Current Position: #{@position || 'None'}\"\n  end\nend\n\n# Run the system\nsystem = RegressionTradingSystem.new('AAPL', period: 20)\nsystem.analyze\n</code></pre>"},{"location":"indicators/statistical/linearreg/#common-settings","title":"Common Settings","text":"Period Use Case Characteristics 10 Day trading Very responsive, frequent signals 14 Standard short-term Good balance of responsiveness 20 Swing trading Most common setting 50 Position trading Longer-term trend following 100 Long-term investing Major trend identification"},{"location":"indicators/statistical/linearreg/#advantages","title":"Advantages","text":"<ol> <li>Statistical Foundation: Based on rigorous mathematical principles</li> <li>Trend Identification: Clearly shows underlying trend direction</li> <li>Mean Reversion: Quantifies deviations from trend</li> <li>Predictive: Projects future price levels</li> <li>Versatile: Works in trending and ranging markets</li> <li>Objective: Removes emotional decision making</li> <li>Combinable: Integrates well with other indicators</li> </ol>"},{"location":"indicators/statistical/linearreg/#limitations","title":"Limitations","text":"<ol> <li>Lagging: Based on historical data, not predictive</li> <li>Trend Changes: Slow to adapt to sudden reversals</li> <li>Sideways Markets: Less useful in choppy conditions</li> <li>Whipsaws: Can generate false signals in volatile markets</li> <li>Parameter Sensitive: Results vary significantly with period choice</li> <li>Linear Assumption: Assumes linear relationships (markets aren't always linear)</li> </ol>"},{"location":"indicators/statistical/linearreg/#best-practices","title":"Best Practices","text":"<ol> <li>Combine with Slope: Use LINEARREG_SLOPE to confirm trend direction</li> <li>Use Multiple Timeframes: Align short and long-term regression</li> <li>Add Channels: Create bands using standard deviation</li> <li>Volume Confirmation: Confirm breakouts with volume</li> <li>Risk Management: Always use stops at regression line</li> <li>Market Conditions: Switch between mean reversion and trend following</li> <li>Regular Reoptimization: Adjust period based on market volatility</li> </ol>"},{"location":"indicators/statistical/linearreg/#related-indicators","title":"Related Indicators","text":"<ul> <li>LINEARREG_SLOPE - Slope of the regression line</li> <li>LINEARREG_ANGLE - Angle of the regression line</li> <li>LINEARREG_INTERCEPT - Y-intercept of regression line</li> <li>TSF - Time Series Forecast (regression projected forward)</li> <li>STDDEV - Standard deviation for channel bands</li> <li>CORREL - Correlation coefficient for trend strength</li> </ul>"},{"location":"indicators/statistical/linearreg/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Statistical Indicators Overview</li> <li>Basic Usage</li> </ul> <ul> <li>Trend Trading Examples</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/","title":"Linear Regression Angle (LINEARREG_ANGLE)","text":"<p>The Linear Regression Angle indicator measures the angle of the linear regression line in degrees. It quantifies the steepness and direction of price trends, providing a numerical measure of trend strength. Values range from -90 to +90 degrees, where steeper angles indicate stronger trends.</p>"},{"location":"indicators/statistical/linearreg_angle/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02, 46.55, 47.03]\n\n# Calculate 14-period Linear Regression Angle\nangle = SQA::TAI.linearreg_angle(prices, period: 14)\n\nputs \"Current angle: #{angle.last.round(2)} degrees\"\n</code></pre>"},{"location":"indicators/statistical/linearreg_angle/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 14 Number of periods for linear regression calculation"},{"location":"indicators/statistical/linearreg_angle/#returns","title":"Returns","text":"<p>Returns an array of angle values in degrees, ranging from -90 to +90. The first <code>period - 1</code> values will be <code>nil</code>.</p>"},{"location":"indicators/statistical/linearreg_angle/#interpretation","title":"Interpretation","text":"Angle Range Trend Direction Trend Strength Interpretation +45 to +90 Uptrend Very Strong Steep upward momentum - strong bull trend +30 to +45 Uptrend Strong Sustained upward momentum +15 to +30 Uptrend Moderate Gentle upward trend +5 to +15 Uptrend Weak Slight upward bias -5 to +5 Sideways Neutral Flat/consolidating market -15 to -5 Downtrend Weak Slight downward bias -30 to -15 Downtrend Moderate Gentle downward trend -45 to -30 Downtrend Strong Sustained downward momentum -90 to -45 Downtrend Very Strong Steep downward momentum - strong bear trend"},{"location":"indicators/statistical/linearreg_angle/#key-insights","title":"Key Insights","text":"<ul> <li>Positive angles: Indicate uptrends with steeper angles showing stronger upward momentum</li> <li>Negative angles: Indicate downtrends with steeper angles showing stronger downward momentum</li> <li>Near 0 degrees (-5 to +5): Market is moving sideways or consolidating</li> <li>45-degree angle: Considered the benchmark for a strong, sustainable trend</li> <li>Above 60 degrees: Extremely steep trend, may be unsustainable</li> <li>Angle flattening: Momentum is weakening, potential trend exhaustion</li> <li>Angle steepening: Momentum is accelerating</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/#example-basic-trend-strength-detection","title":"Example: Basic Trend Strength Detection","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nangle = SQA::TAI.linearreg_angle(prices, period: 14)\ncurrent_angle = angle.last\n\ncase current_angle\nwhen 45..90\n  puts \"Very strong uptrend (#{current_angle.round(2)}\u00b0) - Strong BUY\"\nwhen 30...45\n  puts \"Strong uptrend (#{current_angle.round(2)}\u00b0) - BUY\"\nwhen 15...30\n  puts \"Moderate uptrend (#{current_angle.round(2)}\u00b0) - Bullish bias\"\nwhen -15...15\n  puts \"Sideways market (#{current_angle.round(2)}\u00b0) - No clear trend\"\nwhen -30...-15\n  puts \"Moderate downtrend (#{current_angle.round(2)}\u00b0) - Bearish bias\"\nwhen -45...-30\n  puts \"Strong downtrend (#{current_angle.round(2)}\u00b0) - SELL\"\nwhen -90...-45\n  puts \"Very strong downtrend (#{current_angle.round(2)}\u00b0) - Strong SELL\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_angle/#example-trend-change-detection","title":"Example: Trend Change Detection","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nangle = SQA::TAI.linearreg_angle(prices, period: 14)\n\n# Detect trend changes\nprevious_angle = angle[-2]\ncurrent_angle = angle[-1]\n\n# Trend strengthening or weakening\nif current_angle &gt; previous_angle &amp;&amp; current_angle &gt; 0\n  puts \"Uptrend strengthening: #{previous_angle.round(2)}\u00b0 -&gt; #{current_angle.round(2)}\u00b0\"\nelsif current_angle &lt; previous_angle &amp;&amp; current_angle &lt; 0\n  puts \"Downtrend strengthening: #{previous_angle.round(2)}\u00b0 -&gt; #{current_angle.round(2)}\u00b0\"\nelsif current_angle.abs &lt; previous_angle.abs\n  puts \"Trend weakening: #{previous_angle.round(2)}\u00b0 -&gt; #{current_angle.round(2)}\u00b0\"\nend\n\n# Trend reversal detection\nif previous_angle &gt; 20 &amp;&amp; current_angle &lt; 5\n  puts \"Uptrend losing momentum - potential reversal signal\"\nelsif previous_angle &lt; -20 &amp;&amp; current_angle &gt; -5\n  puts \"Downtrend losing momentum - potential reversal signal\"\nend\n\n# Direction change\nif previous_angle &gt; 0 &amp;&amp; current_angle &lt; 0\n  puts \"Trend changed from UP to DOWN\"\nelsif previous_angle &lt; 0 &amp;&amp; current_angle &gt; 0\n  puts \"Trend changed from DOWN to UP\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_angle/#example-angle-based-entry-and-exit-strategy","title":"Example: Angle-Based Entry and Exit Strategy","text":"<pre><code>prices = load_historical_prices('MSFT')\n\nangle = SQA::TAI.linearreg_angle(prices, period: 14)\nslope = SQA::TAI.linearreg_slope(prices, period: 14)\n\ncurrent_angle = angle.last\nprevious_angle = angle[-2]\n\n# Entry signals based on angle strength\nif current_angle &gt; 30 &amp;&amp; previous_angle &lt; 30\n  puts \"Entering LONG position - angle crossed above 30\u00b0 threshold\"\n  puts \"Strong uptrend confirmed at #{current_angle.round(2)}\u00b0\"\nelsif current_angle &lt; -30 &amp;&amp; previous_angle &gt; -30\n  puts \"Entering SHORT position - angle crossed below -30\u00b0 threshold\"\n  puts \"Strong downtrend confirmed at #{current_angle.round(2)}\u00b0\"\nend\n\n# Exit signals based on angle flattening\nif current_angle &gt; 0 &amp;&amp; current_angle &lt; 15 &amp;&amp; previous_angle &gt; 15\n  puts \"Exiting LONG - uptrend weakening (#{current_angle.round(2)}\u00b0)\"\nelsif current_angle &lt; 0 &amp;&amp; current_angle &gt; -15 &amp;&amp; previous_angle &lt; -15\n  puts \"Exiting SHORT - downtrend weakening (#{current_angle.round(2)}\u00b0)\"\nend\n\n# Warning signals\nif current_angle &gt; 70\n  puts \"WARNING: Extremely steep uptrend (#{current_angle.round(2)}\u00b0)\"\n  puts \"May be unsustainable - consider taking profits\"\nelsif current_angle &lt; -70\n  puts \"WARNING: Extremely steep downtrend (#{current_angle.round(2)}\u00b0)\"\n  puts \"May be unsustainable - consider covering shorts\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_angle/#example-multiple-period-analysis","title":"Example: Multiple Period Analysis","text":"<pre><code>prices = load_historical_prices('NVDA')\n\n# Compare different timeframes\nangle_short = SQA::TAI.linearreg_angle(prices, period: 10)\nangle_medium = SQA::TAI.linearreg_angle(prices, period: 20)\nangle_long = SQA::TAI.linearreg_angle(prices, period: 50)\n\nputs \"Short-term angle (10): #{angle_short.last.round(2)}\u00b0\"\nputs \"Medium-term angle (20): #{angle_medium.last.round(2)}\u00b0\"\nputs \"Long-term angle (50): #{angle_long.last.round(2)}\u00b0\"\n\n# All timeframes aligned\nif angle_short.last &gt; 30 &amp;&amp; angle_medium.last &gt; 25 &amp;&amp; angle_long.last &gt; 20\n  puts \"All timeframes showing strong uptrend - HIGH CONFIDENCE BUY\"\nelsif angle_short.last &lt; -30 &amp;&amp; angle_medium.last &lt; -25 &amp;&amp; angle_long.last &lt; -20\n  puts \"All timeframes showing strong downtrend - HIGH CONFIDENCE SELL\"\nend\n\n# Divergence between timeframes\nif angle_short.last &gt; 30 &amp;&amp; angle_long.last &lt; 0\n  puts \"Short-term bullish but long-term bearish - CAUTION\"\nelsif angle_short.last &lt; -30 &amp;&amp; angle_long.last &gt; 0\n  puts \"Short-term bearish but long-term bullish - CAUTION\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_angle/#example-combining-with-linear-regression-slope","title":"Example: Combining with Linear Regression Slope","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\nangle = SQA::TAI.linearreg_angle(prices, period: 14)\nslope = SQA::TAI.linearreg_slope(prices, period: 14)\nlinreg = SQA::TAI.linearreg(prices, period: 14)\n\ncurrent_price = prices.last\ncurrent_angle = angle.last\ncurrent_slope = slope.last\ncurrent_linreg = linreg.last\n\nputs \"Current price: $#{current_price.round(2)}\"\nputs \"Linear regression value: $#{current_linreg.round(2)}\"\nputs \"Slope: #{current_slope.round(4)}\"\nputs \"Angle: #{current_angle.round(2)}\u00b0\"\n\n# Strong trend confirmation\nif current_angle &gt; 45 &amp;&amp; current_price &gt; current_linreg\n  puts \"Strong uptrend with price above regression line - STRONG BUY\"\n  puts \"Expected continuation of upward momentum\"\nelsif current_angle &lt; -45 &amp;&amp; current_price &lt; current_linreg\n  puts \"Strong downtrend with price below regression line - STRONG SELL\"\n  puts \"Expected continuation of downward momentum\"\nend\n\n# Mean reversion opportunities\nif current_angle.abs &lt; 10 &amp;&amp; (current_price - current_linreg).abs &gt; (current_price * 0.02)\n  if current_price &lt; current_linreg\n    puts \"Price below regression line in sideways market - potential BUY\"\n  else\n    puts \"Price above regression line in sideways market - potential SELL\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_angle/#example-angle-histogram-for-trend-analysis","title":"Example: Angle Histogram for Trend Analysis","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nangle = SQA::TAI.linearreg_angle(prices, period: 14)\n\n# Analyze recent angle history\nrecent_angles = angle.compact.last(20)\n\n# Calculate statistics\navg_angle = recent_angles.sum / recent_angles.size\nmax_angle = recent_angles.max\nmin_angle = recent_angles.min\n\nputs \"Average angle (last 20): #{avg_angle.round(2)}\u00b0\"\nputs \"Max angle: #{max_angle.round(2)}\u00b0\"\nputs \"Min angle: #{min_angle.round(2)}\u00b0\"\nputs \"Range: #{(max_angle - min_angle).round(2)}\u00b0\"\n\n# Trend consistency\nif recent_angles.all? { |a| a &gt; 20 }\n  puts \"Consistently strong uptrend\"\nelsif recent_angles.all? { |a| a &lt; -20 }\n  puts \"Consistently strong downtrend\"\nelsif recent_angles.all? { |a| a.abs &lt; 15 }\n  puts \"Consistently sideways/consolidating\"\nelse\n  puts \"Mixed trend - no clear consistency\"\nend\n\n# Volatility in angle\nangle_std = Math.sqrt(recent_angles.map { |a| (a - avg_angle)**2 }.sum / recent_angles.size)\nputs \"Angle standard deviation: #{angle_std.round(2)}\u00b0\"\n\nif angle_std &gt; 20\n  puts \"High angle volatility - unstable trend\"\nelsif angle_std &lt; 5\n  puts \"Low angle volatility - stable trend\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_angle/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/statistical/linearreg_angle/#1-strong-trend-following","title":"1. Strong Trend Following","text":"<ul> <li>Enter long when angle crosses above 30\u00b0</li> <li>Enter short when angle crosses below -30\u00b0</li> <li>Exit when angle flattens below 15\u00b0 (long) or above -15\u00b0 (short)</li> <li>Best for trending markets</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/#2-angle-momentum-strategy","title":"2. Angle Momentum Strategy","text":"<ul> <li>Buy when angle is rising and above 20\u00b0</li> <li>Sell when angle is falling and below -20\u00b0</li> <li>Hold positions as long as angle maintains direction</li> <li>Add to positions when angle steepens</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/#3-mean-reversion-in-sideways-markets","title":"3. Mean Reversion in Sideways Markets","text":"<ul> <li>Trade only when angle is between -10\u00b0 and +10\u00b0</li> <li>Buy when price is below regression line</li> <li>Sell when price is above regression line</li> <li>Exit when angle breaks out of range</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/#4-trend-exhaustion-detection","title":"4. Trend Exhaustion Detection","text":"<ul> <li>Watch for angles above 60\u00b0 or below -60\u00b0</li> <li>Reduce position size as angle becomes extreme</li> <li>Exit when angle starts to flatten</li> <li>Prepare for potential reversal</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/#common-period-settings","title":"Common Period Settings","text":"Period Use Case Sensitivity 7-10 Short-term trading High - More responsive, more signals 14 Standard analysis Medium - Balanced approach 20-25 Swing trading Medium-Low - Smoother trends 50+ Long-term trends Low - Very smooth, fewer signals"},{"location":"indicators/statistical/linearreg_angle/#angle-strength-guidelines","title":"Angle Strength Guidelines","text":""},{"location":"indicators/statistical/linearreg_angle/#uptrend-strength","title":"Uptrend Strength","text":"<ul> <li>Weak (5-15\u00b0): Gentle rise, be cautious</li> <li>Moderate (15-30\u00b0): Steady uptrend, good for accumulation</li> <li>Strong (30-45\u00b0): Solid uptrend, ideal for trend following</li> <li>Very Strong (45-60\u00b0): Powerful uptrend, monitor for sustainability</li> <li>Extreme (60-90\u00b0): Parabolic move, high risk of reversal</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/#downtrend-strength","title":"Downtrend Strength","text":"<ul> <li>Weak (-5 to -15\u00b0): Gentle decline, be cautious</li> <li>Moderate (-15 to -30\u00b0): Steady downtrend, consider shorts</li> <li>Strong (-30 to -45\u00b0): Solid downtrend, ideal for short selling</li> <li>Very Strong (-45 to -60\u00b0): Powerful downtrend, monitor for bounce</li> <li>Extreme (-60 to -90\u00b0): Capitulation, possible oversold</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/statistical/linearreg_angle/#1-angle-divergence","title":"1. Angle Divergence","text":"<p>Watch for divergence between price and angle: - Price making higher highs but angle decreasing = bearish divergence - Price making lower lows but angle increasing = bullish divergence</p>"},{"location":"indicators/statistical/linearreg_angle/#2-angle-channels","title":"2. Angle Channels","text":"<p>Track the range of angles over time: - Consistent angle range indicates stable trend - Expanding angle range indicates increasing volatility - Contracting angle range indicates consolidation</p>"},{"location":"indicators/statistical/linearreg_angle/#3-multi-timeframe-angle-alignment","title":"3. Multi-Timeframe Angle Alignment","text":"<p>Strongest signals when angles align across timeframes: - Daily, weekly, monthly all positive = strong bull market - Daily, weekly, monthly all negative = strong bear market</p>"},{"location":"indicators/statistical/linearreg_angle/#related-indicators","title":"Related Indicators","text":"<ul> <li>LINEARREG_SLOPE - Raw slope value (not in degrees)</li> <li>LINEARREG - Linear regression line value</li> <li>LINEARREG_INTERCEPT - Y-intercept of regression line</li> <li>TSF - Time Series Forecast</li> <li>ADX - Trend strength (different method)</li> </ul>"},{"location":"indicators/statistical/linearreg_angle/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Statistical Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/","title":"Linear Regression Intercept (LINEARREG_INTERCEPT)","text":"<p>The Linear Regression Intercept (LINEARREG_INTERCEPT) calculates the Y-intercept (b) of a linear regression line fitted over a specified period. This represents the starting point where the regression trendline crosses the Y-axis, providing the base level from which the trend begins. Combined with the slope, it allows complete reconstruction of the linear regression trendline for price projections and support/resistance identification.</p>"},{"location":"indicators/statistical/linearreg_intercept/#what-it-measures","title":"What It Measures","text":"<p>LINEARREG_INTERCEPT measures: - Y-axis Starting Point: The value where the regression line intersects the Y-axis (when X=0) - Base Level: The theoretical price at the beginning of the regression period - Trendline Foundation: Essential component for constructing the complete trendline equation - Support/Resistance Levels: Historical intercept values can indicate potential price levels</p> <p>The linear regression line equation is: <code>Price = Intercept + (Slope \u00d7 Time)</code></p>"},{"location":"indicators/statistical/linearreg_intercept/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [45.50, 46.20, 46.80, 47.10, 47.50,\n          48.00, 48.30, 48.70, 49.10, 49.50,\n          50.00, 50.40, 50.80, 51.20, 51.60]\n\n# Calculate 14-period linear regression intercept\nintercept = SQA::TAI.linearreg_intercept(prices, period: 14)\n\nputs \"Current Intercept: #{intercept.last.round(2)}\"\n</code></pre>"},{"location":"indicators/statistical/linearreg_intercept/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values (typically closing prices) <code>period</code> Integer No 14 Lookback period for regression calculation"},{"location":"indicators/statistical/linearreg_intercept/#returns","title":"Returns","text":"<p>Returns an array of intercept values. The first <code>period - 1</code> values will be <code>nil</code> since insufficient data exists for calculation.</p>"},{"location":"indicators/statistical/linearreg_intercept/#interpretation","title":"Interpretation","text":"Intercept Behavior Market Interpretation Rising Intercept Upward shift in base price level, bullish foundation Falling Intercept Downward shift in base price level, bearish foundation Stable Intercept Consistent base level, sideways trend foundation High vs Price Price trading below trendline, potential support Low vs Price Price trading above trendline, potential resistance"},{"location":"indicators/statistical/linearreg_intercept/#key-concepts","title":"Key Concepts","text":"<ol> <li>Trendline Construction: Intercept + Slope define the complete trendline</li> <li>Base Level Shift: Changes in intercept show shifts in trend foundation</li> <li>Support/Resistance: Historical intercepts mark significant price levels</li> <li>Price Projection: Use with slope to forecast future price levels</li> </ol>"},{"location":"indicators/statistical/linearreg_intercept/#example-complete-trendline-construction","title":"Example: Complete Trendline Construction","text":"<pre><code>prices = [100.00, 101.50, 102.00, 103.50, 104.00,\n          105.50, 106.00, 107.50, 108.00, 109.50,\n          110.00, 111.50, 112.00, 113.50, 114.00]\n\nperiod = 14\n\n# Get all three regression components\nintercept = SQA::TAI.linearreg_intercept(prices, period: period)\nslope = SQA::TAI.linearreg_slope(prices, period: period)\nregression_line = SQA::TAI.linearreg(prices, period: period)\n\ncurrent_intercept = intercept.last\ncurrent_slope = slope.last\ncurrent_regression = regression_line.last\n\nputs &lt;&lt;~TRENDLINE\n  === Complete Trendline Analysis ===\n  Intercept (b): #{current_intercept.round(2)}\n  Slope (m): #{current_slope.round(4)}\n  Current Regression Value: #{current_regression.round(2)}\n\n  Trendline Equation: Price = #{current_intercept.round(2)} + (#{current_slope.round(4)} \u00d7 Time)\n\n  Price Projections:\n  - Next period: #{(current_intercept + (current_slope * period)).round(2)}\n  - 2 periods ahead: #{(current_intercept + (current_slope * (period + 1))).round(2)}\n  - 3 periods ahead: #{(current_intercept + (current_slope * (period + 2))).round(2)}\nTRENDLINE\n</code></pre>"},{"location":"indicators/statistical/linearreg_intercept/#example-supportresistance-from-intercept","title":"Example: Support/Resistance from Intercept","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nperiod = 14\nintercept = SQA::TAI.linearreg_intercept(prices, period: period)\nslope = SQA::TAI.linearreg_slope(prices, period: period)\n\n# Track intercept levels for support/resistance\nintercept_levels = intercept.compact.each_cons(5).map do |window|\n  window.sum / window.size\nend\n\ncurrent_price = prices.last\ncurrent_intercept = intercept.last\n\n# Find nearby intercept levels\ntolerance = current_price * 0.02  # 2% tolerance\n\nnearby_levels = intercept_levels.select do |level|\n  (level - current_price).abs &lt;= tolerance\nend\n\nif nearby_levels.any?\n  puts &lt;&lt;~SUPPORT_RESISTANCE\n    === Support/Resistance Analysis ===\n    Current Price: #{current_price.round(2)}\n    Current Intercept: #{current_intercept.round(2)}\n\n    Historical Intercept Levels Nearby:\n  SUPPORT_RESISTANCE\n\n  nearby_levels.each do |level|\n    position = level &lt; current_price ? \"Support\" : \"Resistance\"\n    distance = ((level - current_price) / current_price * 100).round(2)\n    puts \"  #{position}: #{level.round(2)} (#{distance}%)\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_intercept/#example-intercept-shift-detection","title":"Example: Intercept Shift Detection","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nperiod = 14\nintercept = SQA::TAI.linearreg_intercept(prices, period: period)\n\n# Calculate rate of change in intercept\nintercept_changes = intercept.compact.each_cons(2).map do |prev, curr|\n  ((curr - prev) / prev * 100).round(2)\nend\n\nrecent_change = intercept_changes.last(5).sum / 5\n\nif recent_change &gt; 0.5\n  puts &lt;&lt;~ANALYSIS\n    === Intercept Rising ===\n    Average Change: +#{recent_change.round(2)}%\n    Interpretation: Base level shifting higher, bullish foundation\n    Action: Look for uptrend continuation\n  ANALYSIS\nelsif recent_change &lt; -0.5\n  puts &lt;&lt;~ANALYSIS\n    === Intercept Falling ===\n    Average Change: #{recent_change.round(2)}%\n    Interpretation: Base level shifting lower, bearish foundation\n    Action: Consider defensive positioning\n  ANALYSIS\nelse\n  puts &lt;&lt;~ANALYSIS\n    === Intercept Stable ===\n    Average Change: #{recent_change.round(2)}%\n    Interpretation: Consistent base level\n    Action: Monitor for breakout\n  ANALYSIS\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_intercept/#example-trendline-channel-construction","title":"Example: Trendline Channel Construction","text":"<pre><code>prices = load_historical_prices('MSFT')\nhighs = load_historical_highs('MSFT')\nlows = load_historical_lows('MSFT')\n\nperiod = 14\n\n# Calculate regression components for close, high, and low\nintercept_close = SQA::TAI.linearreg_intercept(prices, period: period)\nslope_close = SQA::TAI.linearreg_slope(prices, period: period)\n\nintercept_high = SQA::TAI.linearreg_intercept(highs, period: period)\nslope_high = SQA::TAI.linearreg_slope(highs, period: period)\n\nintercept_low = SQA::TAI.linearreg_intercept(lows, period: period)\nslope_low = SQA::TAI.linearreg_slope(lows, period: period)\n\n# Construct channel\ncurrent_price = prices.last\ncurrent_time = period\n\n# Calculate channel boundaries\nupper_channel = intercept_high.last + (slope_high.last * current_time)\nmiddle_line = intercept_close.last + (slope_close.last * current_time)\nlower_channel = intercept_low.last + (slope_low.last * current_time)\n\nchannel_width = upper_channel - lower_channel\nprice_position = ((current_price - lower_channel) / channel_width * 100).round(2)\n\nputs &lt;&lt;~CHANNEL\n  === Regression Channel ===\n  Upper Channel: #{upper_channel.round(2)}\n  Middle Line: #{middle_line.round(2)}\n  Lower Channel: #{lower_channel.round(2)}\n\n  Channel Width: #{channel_width.round(2)}\n  Current Price: #{current_price.round(2)}\n  Position in Channel: #{price_position}%\n\n  Trading Signals:\nCHANNEL\n\nif price_position &gt; 80\n  puts \"  - Price near upper channel: Consider taking profits\"\nelsif price_position &lt; 20\n  puts \"  - Price near lower channel: Consider buying opportunity\"\nelse\n  puts \"  - Price in middle range: Wait for better entry\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_intercept/#example-multi-period-intercept-analysis","title":"Example: Multi-Period Intercept Analysis","text":"<pre><code>prices = load_historical_prices('SPY')\n\nperiods = [10, 20, 50]\n\nputs \"=== Multi-Period Intercept Analysis ===\"\n\nperiods.each do |period|\n  intercept = SQA::TAI.linearreg_intercept(prices, period: period)\n  slope = SQA::TAI.linearreg_slope(prices, period: period)\n\n  current_intercept = intercept.last\n  current_slope = slope.last\n\n  # Project current value\n  projected_value = current_intercept + (current_slope * period)\n  current_price = prices.last\n\n  deviation = ((current_price - projected_value) / projected_value * 100).round(2)\n\n  puts &lt;&lt;~PERIOD_ANALYSIS\n\n    #{period}-Period Analysis:\n      Intercept: #{current_intercept.round(2)}\n      Slope: #{current_slope.round(4)}\n      Projected Value: #{projected_value.round(2)}\n      Current Price: #{current_price.round(2)}\n      Deviation: #{deviation}%\n  PERIOD_ANALYSIS\nend\n\n# Analyze trend consistency\nintercepts = periods.map do |period|\n  SQA::TAI.linearreg_intercept(prices, period: period).last\nend\n\nif intercepts.sort == intercepts\n  puts \"\\nAll intercepts rising: Strong uptrend structure\"\nelsif intercepts.sort.reverse == intercepts\n  puts \"\\nAll intercepts falling: Strong downtrend structure\"\nelse\n  puts \"\\nMixed intercept levels: Trend inconsistency\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_intercept/#example-intercept-with-angle-for-trend-strength","title":"Example: Intercept with Angle for Trend Strength","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\nperiod = 14\nintercept = SQA::TAI.linearreg_intercept(prices, period: period)\nslope = SQA::TAI.linearreg_slope(prices, period: period)\nangle = SQA::TAI.linearreg_angle(prices, period: period)\n\ncurrent_intercept = intercept.last\ncurrent_slope = slope.last\ncurrent_angle = angle.last\n\n# Calculate base level change\nprev_intercept = intercept[-5]\nintercept_change = ((current_intercept - prev_intercept) / prev_intercept * 100).round(2)\n\nputs &lt;&lt;~TREND_STRENGTH\n  === Trend Strength Analysis ===\n  Base Level (Intercept): #{current_intercept.round(2)}\n  Intercept Change (5 periods): #{intercept_change}%\n\n  Trend Slope: #{current_slope.round(4)}\n  Trend Angle: #{current_angle.round(2)}\u00b0\n\n  Interpretation:\nTREND_STRENGTH\n\ncase\nwhen current_angle &gt; 45\n  puts \"  - Very steep uptrend (#{current_angle.round(0)}\u00b0)\"\n  puts \"  - Intercept shift: #{intercept_change}%\"\n  puts \"  - Action: Caution on parabolic move, consider profit-taking\"\nwhen current_angle &gt; 20\n  puts \"  - Strong uptrend (#{current_angle.round(0)}\u00b0)\"\n  puts \"  - Intercept shift: #{intercept_change}%\"\n  puts \"  - Action: Hold positions, trend is healthy\"\nwhen current_angle &gt; 0\n  puts \"  - Mild uptrend (#{current_angle.round(0)}\u00b0)\"\n  puts \"  - Intercept shift: #{intercept_change}%\"\n  puts \"  - Action: Monitor for acceleration\"\nwhen current_angle &gt; -20\n  puts \"  - Mild downtrend (#{current_angle.round(0)}\u00b0)\"\n  puts \"  - Intercept shift: #{intercept_change}%\"\n  puts \"  - Action: Consider defensive measures\"\nwhen current_angle &gt; -45\n  puts \"  - Strong downtrend (#{current_angle.round(0)}\u00b0)\"\n  puts \"  - Intercept shift: #{intercept_change}%\"\n  puts \"  - Action: Avoid long positions\"\nelse\n  puts \"  - Very steep downtrend (#{current_angle.round(0)}\u00b0)\"\n  puts \"  - Intercept shift: #{intercept_change}%\"\n  puts \"  - Action: Stay in cash or short\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_intercept/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/statistical/linearreg_intercept/#1-trendline-equation-construction","title":"1. Trendline Equation Construction","text":"<p>Combine intercept with slope to create complete trendline equations: - <code>y = intercept + (slope \u00d7 x)</code> - Use for precise price projections - Calculate expected price at any future period</p>"},{"location":"indicators/statistical/linearreg_intercept/#2-historical-supportresistance","title":"2. Historical Support/Resistance","text":"<ul> <li>Track historical intercept values</li> <li>Previous intercepts often act as support/resistance</li> <li>Create a map of significant price levels</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/#3-channel-analysis","title":"3. Channel Analysis","text":"<ul> <li>Calculate intercepts for high, low, and close prices</li> <li>Construct regression channels</li> <li>Identify overbought/oversold conditions within channel</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/#4-intercept-divergence","title":"4. Intercept Divergence","text":"<ul> <li>Compare intercept direction with price direction</li> <li>Rising intercepts + falling prices = potential reversal</li> <li>Falling intercepts + rising prices = unsustainable rally</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/#5-multi-timeframe-intercepts","title":"5. Multi-Timeframe Intercepts","text":"<ul> <li>Calculate intercepts across multiple periods</li> <li>Aligned intercepts confirm trend strength</li> <li>Diverging intercepts signal trend weakness</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/#common-settings","title":"Common Settings","text":"Period Use Case Intercept Sensitivity 9-10 Short-term trading High - rapid base level changes 14 Standard analysis Medium - balanced responsiveness 20-21 Medium-term trends Lower - smoother base levels 50 Long-term analysis Low - major structural changes only 100+ Macro trends Very low - fundamental shifts"},{"location":"indicators/statistical/linearreg_intercept/#trading-applications","title":"Trading Applications","text":""},{"location":"indicators/statistical/linearreg_intercept/#entry-signals","title":"Entry Signals","text":"<ul> <li>Price returns to projected trendline (intercept + slope \u00d7 time)</li> <li>Intercept shifts upward after downtrend</li> <li>Price finds support at historical intercept level</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/#exit-signals","title":"Exit Signals","text":"<ul> <li>Price diverges significantly from trendline</li> <li>Intercept begins declining during uptrend</li> <li>Price breaks through multiple historical intercept levels</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/#risk-management","title":"Risk Management","text":"<ul> <li>Use channel width (based on intercepts of high/low) for stop placement</li> <li>Monitor intercept stability for trend confidence</li> <li>Adjust position size based on intercept change rate</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/#limitations-and-considerations","title":"Limitations and Considerations","text":"<ol> <li>Linear Assumption: Assumes linear relationships, may miss curved trends</li> <li>Historical Focus: Based on past data, doesn't predict external shocks</li> <li>Period Sensitivity: Different periods yield different intercepts</li> <li>Component Indicator: Most useful when combined with slope and angle</li> <li>Not a Standalone Signal: Requires confirmation from other indicators</li> </ol>"},{"location":"indicators/statistical/linearreg_intercept/#related-indicators","title":"Related Indicators","text":"<ul> <li>LINEARREG - Complete linear regression line</li> <li>LINEARREG_SLOPE - Slope of regression line</li> <li>LINEARREG_ANGLE - Angle of regression line</li> <li>TSF - Time Series Forecast</li> <li>STDDEV - Standard deviation for channel bands</li> </ul>"},{"location":"indicators/statistical/linearreg_intercept/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Statistical Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/statistical/linearreg_slope/","title":"Linear Regression Slope (LINEARREG_SLOPE)","text":"<p>The Linear Regression Slope indicator measures the slope (rate of change) of the linear regression line over a specified period. It quantifies the speed and direction of price movement, making it an excellent tool for identifying trend strength, momentum, and potential trend reversals.</p>"},{"location":"indicators/statistical/linearreg_slope/#what-it-measures","title":"What It Measures","text":"<p>LINEARREG_SLOPE calculates the slope coefficient (rise over run) of the best-fit linear regression line through price data. The slope value represents:</p> <ul> <li>Rate of Change: Points gained or lost per period</li> <li>Trend Direction: Positive (uptrend) or negative (downtrend)</li> <li>Trend Strength: Larger absolute values indicate stronger trends</li> <li>Momentum: Changes in slope indicate acceleration or deceleration</li> </ul>"},{"location":"indicators/statistical/linearreg_slope/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [100.0, 102.5, 104.0, 103.5, 105.0, 107.5,\n          109.0, 108.5, 110.0, 112.0, 113.5, 115.0,\n          114.5, 116.0, 118.5, 120.0, 119.5, 121.0]\n\n# Calculate 14-period linear regression slope\nslope = SQA::TAI.linearreg_slope(prices, period: 14)\n\nputs \"Current slope: #{slope.last.round(4)}\"\nputs \"Trend: #{slope.last &gt; 0 ? 'Uptrend' : 'Downtrend'}\"\nputs \"Strength: #{slope.last.abs.round(4)} points/period\"\n</code></pre>"},{"location":"indicators/statistical/linearreg_slope/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 14 Number of periods for regression calculation"},{"location":"indicators/statistical/linearreg_slope/#returns","title":"Returns","text":"<p>Returns an array of slope values representing the rate of price change per period. The first <code>period - 1</code> values will be <code>nil</code>. Slope values can be positive (uptrend), negative (downtrend), or near zero (sideways).</p>"},{"location":"indicators/statistical/linearreg_slope/#interpretation","title":"Interpretation","text":"Slope Value Interpretation &gt; 1.0 Strong uptrend - rapid price increase 0.1 to 1.0 Moderate uptrend - steady price increase -0.1 to 0.1 Sideways/neutral - no clear trend -1.0 to -0.1 Moderate downtrend - steady price decrease &lt; -1.0 Strong downtrend - rapid price decrease"},{"location":"indicators/statistical/linearreg_slope/#key-signals","title":"Key Signals","text":"<ol> <li>Slope Direction:</li> <li>Positive slope: Prices trending upward</li> <li>Negative slope: Prices trending downward</li> <li> <p>Zero slope: Prices moving sideways</p> </li> <li> <p>Slope Magnitude:</p> </li> <li>Large absolute value: Strong, consistent trend</li> <li>Small absolute value: Weak or choppy trend</li> <li>Increasing magnitude: Trend acceleration</li> <li> <p>Decreasing magnitude: Trend deceleration</p> </li> <li> <p>Slope Changes:</p> </li> <li>Slope crosses from negative to positive: Potential bullish reversal</li> <li>Slope crosses from positive to negative: Potential bearish reversal</li> <li>Slope diverges from price: Potential trend exhaustion</li> </ol>"},{"location":"indicators/statistical/linearreg_slope/#example-basic-slope-trading","title":"Example: Basic Slope Trading","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nslope = SQA::TAI.linearreg_slope(prices, period: 14)\ncurrent_slope = slope.last\n\n# Trend identification and strength\nif current_slope &gt; 0.5\n  puts \"Strong uptrend detected\"\n  puts \"Slope: +#{current_slope.round(4)} points/period\"\n  puts \"Signal: HOLD longs or BUY on pullbacks\"\nelsif current_slope &gt; 0\n  puts \"Weak uptrend detected\"\n  puts \"Slope: +#{current_slope.round(4)} points/period\"\n  puts \"Signal: Monitor for strengthening or reversal\"\nelsif current_slope &lt; -0.5\n  puts \"Strong downtrend detected\"\n  puts \"Slope: #{current_slope.round(4)} points/period\"\n  puts \"Signal: HOLD shorts or SELL on rallies\"\nelsif current_slope &lt; 0\n  puts \"Weak downtrend detected\"\n  puts \"Slope: #{current_slope.round(4)} points/period\"\n  puts \"Signal: Monitor for strengthening or reversal\"\nelse\n  puts \"Sideways/neutral trend\"\n  puts \"Slope: #{current_slope.round(4)} points/period\"\n  puts \"Signal: Wait for trend development\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_slope/#example-slope-reversal-detection","title":"Example: Slope Reversal Detection","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nslope = SQA::TAI.linearreg_slope(prices, period: 14)\n\n# Check for slope reversals\nprevious_slope = slope[-2]\ncurrent_slope = slope.last\n\nif previous_slope.nil? || current_slope.nil?\n  puts \"Insufficient data\"\nelse\n  # Bullish reversal: slope crosses from negative to positive\n  if previous_slope &lt; 0 &amp;&amp; current_slope &gt; 0\n    puts \"BULLISH REVERSAL SIGNAL\"\n    puts \"Slope changed from #{previous_slope.round(4)} to #{current_slope.round(4)}\"\n    puts \"Action: Consider LONG entry\"\n    puts \"Strength: #{current_slope &gt; 0.5 ? 'Strong' : 'Weak'}\"\n\n  # Bearish reversal: slope crosses from positive to negative\n  elsif previous_slope &gt; 0 &amp;&amp; current_slope &lt; 0\n    puts \"BEARISH REVERSAL SIGNAL\"\n    puts \"Slope changed from #{previous_slope.round(4)} to #{current_slope.round(4)}\"\n    puts \"Action: Consider SHORT entry or exit longs\"\n    puts \"Strength: #{current_slope &lt; -0.5 ? 'Strong' : 'Weak'}\"\n\n  # Trend acceleration\n  elsif current_slope.abs &gt; previous_slope.abs * 1.5\n    trend_direction = current_slope &gt; 0 ? \"upward\" : \"downward\"\n    puts \"TREND ACCELERATION\"\n    puts \"#{trend_direction.capitalize} trend is accelerating\"\n    puts \"Slope: #{previous_slope.round(4)} -&gt; #{current_slope.round(4)}\"\n\n  # Trend deceleration\n  elsif current_slope.abs &lt; previous_slope.abs * 0.5\n    trend_direction = current_slope &gt; 0 ? \"upward\" : \"downward\"\n    puts \"TREND DECELERATION WARNING\"\n    puts \"#{trend_direction.capitalize} trend is losing momentum\"\n    puts \"Slope: #{previous_slope.round(4)} -&gt; #{current_slope.round(4)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_slope/#example-slope-divergence-strategy","title":"Example: Slope Divergence Strategy","text":"<pre><code>prices = load_historical_prices('NVDA')\n\nslope = SQA::TAI.linearreg_slope(prices, period: 14)\n\n# Compare recent highs/lows\nprice_high_1 = prices[-20..-11].max\nprice_high_2 = prices[-10..-1].max\n\nslope_high_1 = slope[-20..-11].compact.max\nslope_high_2 = slope[-10..-1].compact.max\n\n# Bearish divergence: price makes higher high, slope makes lower high\nif price_high_2 &gt; price_high_1 &amp;&amp; slope_high_2 &lt; slope_high_1\n  puts \"BEARISH DIVERGENCE DETECTED\"\n  puts \"Price higher high: #{price_high_1} -&gt; #{price_high_2}\"\n  puts \"Slope lower high: #{slope_high_1.round(4)} -&gt; #{slope_high_2.round(4)}\"\n  puts \"Signal: Uptrend losing momentum - potential reversal\"\n  puts \"Action: Consider taking profits or preparing for short\"\nend\n\n# Check for bullish divergence\nprice_low_1 = prices[-20..-11].min\nprice_low_2 = prices[-10..-1].min\n\nslope_low_1 = slope[-20..-11].compact.min\nslope_low_2 = slope[-10..-1].compact.min\n\n# Bullish divergence: price makes lower low, slope makes higher low\nif price_low_2 &lt; price_low_1 &amp;&amp; slope_low_2 &gt; slope_low_1\n  puts \"BULLISH DIVERGENCE DETECTED\"\n  puts \"Price lower low: #{price_low_1} -&gt; #{price_low_2}\"\n  puts \"Slope higher low: #{slope_low_1.round(4)} -&gt; #{slope_low_2.round(4)}\"\n  puts \"Signal: Downtrend losing momentum - potential reversal\"\n  puts \"Action: Consider bottom fishing or preparing for long\"\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_slope/#example-slope-with-trend-filter","title":"Example: Slope with Trend Filter","text":"<pre><code>prices = load_historical_prices('MSFT')\n\nslope = SQA::TAI.linearreg_slope(prices, period: 14)\nsma_50 = SQA::TAI.sma(prices, period: 50)\nsma_200 = SQA::TAI.sma(prices, period: 200)\n\ncurrent_price = prices.last\ncurrent_slope = slope.last\n\n# Determine overall trend\ntrend = if sma_50.last &gt; sma_200.last\n  \"uptrend\"\nelsif sma_50.last &lt; sma_200.last\n  \"downtrend\"\nelse\n  \"sideways\"\nend\n\nputs \"Overall trend: #{trend.upcase}\"\nputs \"Current slope: #{current_slope.round(4)}\"\n\n# Trading signals aligned with trend\ncase trend\nwhen \"uptrend\"\n  if current_slope &gt; 0.5\n    puts \"Strong uptrend confirmed by slope\"\n    puts \"Signal: STRONG BUY - trend acceleration\"\n  elsif current_slope &gt; 0\n    puts \"Uptrend intact but weakening\"\n    puts \"Signal: HOLD or add on dips\"\n  elsif current_slope &lt; 0\n    puts \"WARNING: Negative slope in uptrend\"\n    puts \"Signal: Possible pullback - wait for confirmation\"\n  end\n\nwhen \"downtrend\"\n  if current_slope &lt; -0.5\n    puts \"Strong downtrend confirmed by slope\"\n    puts \"Signal: STRONG SELL or SHORT\"\n  elsif current_slope &lt; 0\n    puts \"Downtrend intact but weakening\"\n    puts \"Signal: HOLD shorts or add on rallies\"\n  elsif current_slope &gt; 0\n    puts \"WARNING: Positive slope in downtrend\"\n    puts \"Signal: Possible bounce - wait for confirmation\"\n  end\n\nwhen \"sideways\"\n  if current_slope.abs &lt; 0.1\n    puts \"Sideways trend confirmed by flat slope\"\n    puts \"Signal: Range trading strategy\"\n  else\n    puts \"Slope developing: #{current_slope &gt; 0 ? 'bullish' : 'bearish'}\"\n    puts \"Signal: Potential breakout forming\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_slope/#example-slope-acceleration-signals","title":"Example: Slope Acceleration Signals","text":"<pre><code>prices = load_historical_prices('AMZN')\n\nslope = SQA::TAI.linearreg_slope(prices, period: 14)\n\n# Calculate slope change rate (acceleration)\nslope_changes = []\n(1...slope.length).each do |i|\n  next if slope[i].nil? || slope[i-1].nil?\n  slope_changes &lt;&lt; slope[i] - slope[i-1]\nend\n\nrecent_acceleration = slope_changes.last(5).compact\n\nif recent_acceleration.any?\n  avg_acceleration = recent_acceleration.sum / recent_acceleration.length\n\n  puts \"Current slope: #{slope.last.round(4)}\"\n  puts \"Average acceleration: #{avg_acceleration.round(6)}\"\n\n  if avg_acceleration &gt; 0.1\n    puts \"STRONG ACCELERATION DETECTED\"\n    puts \"Trend is gaining momentum rapidly\"\n    puts \"Signal: Momentum trade opportunity\"\n    puts \"Action: #{slope.last &gt; 0 ? 'BUY breakout' : 'SELL breakdown'}\"\n\n  elsif avg_acceleration &gt; 0.01\n    puts \"Moderate acceleration detected\"\n    puts \"Trend is strengthening\"\n    puts \"Signal: Trend following opportunity\"\n\n  elsif avg_acceleration &lt; -0.1\n    puts \"STRONG DECELERATION DETECTED\"\n    puts \"Trend is losing momentum rapidly\"\n    puts \"Signal: Reversal warning\"\n    puts \"Action: Prepare to exit or reverse position\"\n\n  elsif avg_acceleration &lt; -0.01\n    puts \"Moderate deceleration detected\"\n    puts \"Trend is weakening\"\n    puts \"Signal: Take profits or tighten stops\"\n\n  else\n    puts \"Stable slope - consistent trend\"\n    puts \"Signal: Maintain current strategy\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_slope/#example-multi-period-slope-analysis","title":"Example: Multi-Period Slope Analysis","text":"<pre><code>prices = load_historical_prices('GOOGL')\n\n# Calculate slopes for different periods\nslope_short = SQA::TAI.linearreg_slope(prices, period: 7)\nslope_medium = SQA::TAI.linearreg_slope(prices, period: 14)\nslope_long = SQA::TAI.linearreg_slope(prices, period: 28)\n\nputs \"Short-term slope (7): #{slope_short.last.round(4)}\"\nputs \"Medium-term slope (14): #{slope_medium.last.round(4)}\"\nputs \"Long-term slope (28): #{slope_long.last.round(4)}\"\n\n# Analyze slope alignment\nall_positive = [slope_short.last, slope_medium.last, slope_long.last].all? { |s| s &gt; 0 }\nall_negative = [slope_short.last, slope_medium.last, slope_long.last].all? { |s| s &lt; 0 }\n\nif all_positive\n  puts \"\\nALL SLOPES POSITIVE - Strong uptrend\"\n\n  if slope_short.last &gt; slope_medium.last &amp;&amp; slope_medium.last &gt; slope_long.last\n    puts \"Accelerating uptrend - slopes increasing\"\n    puts \"Signal: STRONG BUY - momentum building\"\n  else\n    puts \"Mixed slope magnitudes\"\n    puts \"Signal: BUY but monitor for changes\"\n  end\n\nelsif all_negative\n  puts \"\\nALL SLOPES NEGATIVE - Strong downtrend\"\n\n  if slope_short.last &lt; slope_medium.last &amp;&amp; slope_medium.last &lt; slope_long.last\n    puts \"Accelerating downtrend - slopes steepening\"\n    puts \"Signal: STRONG SELL - momentum building\"\n  else\n    puts \"Mixed slope magnitudes\"\n    puts \"Signal: SELL but monitor for changes\"\n  end\n\nelse\n  puts \"\\nMIXED SLOPES - Conflicting signals\"\n\n  if slope_short.last &gt; 0 &amp;&amp; slope_medium.last &lt; 0\n    puts \"Short-term reversal in downtrend\"\n    puts \"Signal: Possible bottom forming\"\n  elsif slope_short.last &lt; 0 &amp;&amp; slope_medium.last &gt; 0\n    puts \"Short-term reversal in uptrend\"\n    puts \"Signal: Possible top forming\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/linearreg_slope/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/statistical/linearreg_slope/#1-slope-bands","title":"1. Slope Bands","text":"<p>Create bands around zero slope to identify trend zones: - Strong trend: |slope| &gt; 0.5 - Moderate trend: 0.1 &lt; |slope| &lt; 0.5 - Weak/sideways: |slope| &lt; 0.1</p>"},{"location":"indicators/statistical/linearreg_slope/#2-slope-rate-of-change","title":"2. Slope Rate of Change","text":"<p>Monitor how quickly the slope itself is changing to identify: - Trend acceleration (slope increasing) - Trend deceleration (slope decreasing) - Momentum exhaustion (slope rate flattening)</p>"},{"location":"indicators/statistical/linearreg_slope/#3-slope-supportresistance","title":"3. Slope Support/Resistance","text":"<p>Use historical slope levels as support/resistance: - Slopes often bounce at previous slope levels - Slope breakouts signal strong momentum shifts</p>"},{"location":"indicators/statistical/linearreg_slope/#4-slope-histogram","title":"4. Slope Histogram","text":"<p>Convert slope values to histogram format for visual clarity: - Positive bars: Uptrend strength - Negative bars: Downtrend strength - Bar height: Trend intensity</p>"},{"location":"indicators/statistical/linearreg_slope/#example-complete-slope-trading-system","title":"Example: Complete Slope Trading System","text":"<pre><code>class SlopeTradingSystem\n  def initialize(prices, short_period: 7, long_period: 21)\n    @prices = prices\n    @slope_short = SQA::TAI.linearreg_slope(prices, period: short_period)\n    @slope_long = SQA::TAI.linearreg_slope(prices, period: long_period)\n  end\n\n  def analyze\n    short = @slope_short.last\n    long = @slope_long.last\n\n    return nil if short.nil? || long.nil?\n\n    # Calculate slope characteristics\n    trend_strength = short.abs\n    trend_direction = short &gt; 0 ? \"bullish\" : \"bearish\"\n    alignment = (short &gt; 0 &amp;&amp; long &gt; 0) || (short &lt; 0 &amp;&amp; long &lt; 0)\n\n    # Generate signals\n    signal = generate_signal(short, long, alignment)\n\n    {\n      short_slope: short.round(4),\n      long_slope: long.round(4),\n      trend_direction: trend_direction,\n      trend_strength: classify_strength(trend_strength),\n      alignment: alignment,\n      signal: signal,\n      confidence: calculate_confidence(short, long, alignment)\n    }\n  end\n\n  private\n\n  def generate_signal(short, long, alignment)\n    if alignment &amp;&amp; short &gt; 0.5\n      \"STRONG BUY\"\n    elsif alignment &amp;&amp; short &gt; 0\n      \"BUY\"\n    elsif alignment &amp;&amp; short &lt; -0.5\n      \"STRONG SELL\"\n    elsif alignment &amp;&amp; short &lt; 0\n      \"SELL\"\n    elsif short &gt; 0 &amp;&amp; long &lt; 0\n      \"BULLISH REVERSAL\"\n    elsif short &lt; 0 &amp;&amp; long &gt; 0\n      \"BEARISH REVERSAL\"\n    else\n      \"NEUTRAL\"\n    end\n  end\n\n  def classify_strength(slope_abs)\n    case slope_abs\n    when 0...0.1 then \"weak\"\n    when 0.1...0.5 then \"moderate\"\n    when 0.5...1.0 then \"strong\"\n    else \"very strong\"\n    end\n  end\n\n  def calculate_confidence(short, long, alignment)\n    base = alignment ? 0.7 : 0.3\n    strength_bonus = [short.abs, 1.0].min * 0.3\n    (base + strength_bonus).round(2)\n  end\nend\n\n# Usage\nprices = load_historical_prices('AAPL')\nsystem = SlopeTradingSystem.new(prices)\nresult = system.analyze\n\nputs &lt;&lt;~ANALYSIS\n  === SLOPE TRADING ANALYSIS ===\n  Short-term slope: #{result[:short_slope]}\n  Long-term slope: #{result[:long_slope]}\n  Trend direction: #{result[:trend_direction].upcase}\n  Trend strength: #{result[:trend_strength].upcase}\n  Slopes aligned: #{result[:alignment] ? 'YES' : 'NO'}\n\n  SIGNAL: #{result[:signal]}\n  Confidence: #{(result[:confidence] * 100).round(0)}%\nANALYSIS\n</code></pre>"},{"location":"indicators/statistical/linearreg_slope/#common-settings","title":"Common Settings","text":"Period Use Case Sensitivity 5-7 Very short-term trading High - quick signals, more noise 10-14 Short-term trading (standard) Moderate - balanced approach 20-25 Swing trading Lower - smoother signals 50+ Position trading Low - major trend changes only"},{"location":"indicators/statistical/linearreg_slope/#advantages","title":"Advantages","text":"<ul> <li>Quantifies trend strength objectively</li> <li>Identifies trend acceleration/deceleration</li> <li>Easy to interpret (positive/negative/magnitude)</li> <li>Works well with other regression indicators</li> <li>Excellent for momentum trading</li> <li>Less lag than moving averages</li> </ul>"},{"location":"indicators/statistical/linearreg_slope/#limitations","title":"Limitations","text":"<ul> <li>Can be whipsawed in choppy markets</li> <li>Absolute slope values depend on price level</li> <li>No inherent overbought/oversold levels</li> <li>May give false signals in ranging markets</li> <li>Requires context (compare to historical slopes)</li> </ul>"},{"location":"indicators/statistical/linearreg_slope/#tips-for-use","title":"Tips for Use","text":"<ol> <li>Normalize slopes by dividing by price for cross-asset comparison</li> <li>Use multiple periods to confirm trend across timeframes</li> <li>Combine with price action to confirm slope signals</li> <li>Monitor slope changes as much as slope values</li> <li>Set thresholds based on historical slope distributions</li> <li>Use divergences to identify potential reversals early</li> </ol>"},{"location":"indicators/statistical/linearreg_slope/#related-indicators","title":"Related Indicators","text":"<ul> <li>LINEARREG - Linear regression forecast value</li> <li>LINEARREG_ANGLE - Slope expressed as angle in degrees</li> <li>LINEARREG_INTERCEPT - Y-intercept of regression line</li> <li>TSF - Time Series Forecast (regression + projection)</li> <li>ROC - Rate of Change (similar concept)</li> <li>MOM - Momentum indicator</li> </ul>"},{"location":"indicators/statistical/linearreg_slope/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Statistical Indicators Overview</li> <li>Basic Usage</li> <li>Trend Following Strategies</li> </ul>"},{"location":"indicators/statistical/stddev/","title":"Standard Deviation (STDDEV)","text":"<p>Standard Deviation measures the dispersion or volatility of price returns around their mean. It quantifies how much prices deviate from their average value, making it essential for volatility analysis, risk management, and position sizing. Higher standard deviation indicates greater volatility and price swings, while lower values suggest more stable price action.</p>"},{"location":"indicators/statistical/stddev/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.57, 45.95, 46.50, 46.02]\n\n# Calculate 20-period standard deviation\nstddev = SQA::TAI.stddev(prices, period: 20, nbdev: 1.0)\n\nputs \"Current Volatility: #{stddev.last.round(4)}\"\n</code></pre>"},{"location":"indicators/statistical/stddev/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 5 Number of periods for calculation <code>nbdev</code> Float No 1.0 Number of standard deviations (multiplier)"},{"location":"indicators/statistical/stddev/#returns","title":"Returns","text":"<p>Returns an array of standard deviation values. The first <code>period - 1</code> values will be <code>nil</code>. Values are scaled by <code>nbdev</code> parameter.</p>"},{"location":"indicators/statistical/stddev/#interpretation","title":"Interpretation","text":"STDDEV Value Market Condition Trading Implication High/Rising High volatility Wide price swings, larger stops, breakout potential Low/Falling Low volatility Tight range, squeeze pattern, consolidation Expanding Volatility increasing Trend acceleration, breakout occurring Contracting Volatility decreasing Range compression, pre-breakout squeeze"},{"location":"indicators/statistical/stddev/#example-volatility-regime-detection","title":"Example: Volatility Regime Detection","text":"<pre><code>prices = load_historical_prices('AAPL')\n\nstddev = SQA::TAI.stddev(prices, period: 20, nbdev: 1.0)\ncurrent_vol = stddev.last\n\n# Calculate volatility percentile\nrecent_vols = stddev.last(100).compact\npercentile = recent_vols.count { |v| v &lt; current_vol } / recent_vols.size.to_f * 100\n\nputs \"Current Volatility: #{current_vol.round(4)}\"\nputs \"Volatility Percentile: #{percentile.round(1)}%\"\n\ncase percentile\nwhen 0...20\n  puts \"Low Volatility Regime - Expect breakout soon\"\n  puts \"Strategy: Prepare for range expansion\"\nwhen 20...40\n  puts \"Below Average Volatility\"\n  puts \"Strategy: Look for squeeze setups\"\nwhen 40...60\n  puts \"Normal Volatility\"\n  puts \"Strategy: Standard position sizing\"\nwhen 60...80\n  puts \"Above Average Volatility\"\n  puts \"Strategy: Reduce position size\"\nwhen 80..100\n  puts \"High Volatility Regime - Exercise caution\"\n  puts \"Strategy: Smaller positions, wider stops\"\nend\n</code></pre>"},{"location":"indicators/statistical/stddev/#example-dynamic-position-sizing","title":"Example: Dynamic Position Sizing","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nstddev = SQA::TAI.stddev(prices, period: 20, nbdev: 1.0)\ncurrent_price = prices.last\ncurrent_vol = stddev.last\n\n# Risk-based position sizing\naccount_size = 100_000\nrisk_per_trade = 0.02  # 2% risk\nmax_position = account_size * 0.10  # Max 10% per position\n\n# Stop loss at 2 standard deviations\nstop_distance = current_vol * 2\nstop_price = current_price - stop_distance\nrisk_per_share = stop_distance\n\n# Calculate position size based on volatility\nshares = (account_size * risk_per_trade) / risk_per_share\nposition_value = shares * current_price\n\n# Cap at maximum position size\nif position_value &gt; max_position\n  shares = max_position / current_price\n  position_value = max_position\nend\n\nputs &lt;&lt;~POSITION_SIZING\n  === Volatility-Based Position Sizing ===\n  Current Price: $#{current_price.round(2)}\n  Standard Deviation: $#{current_vol.round(2)}\n  Stop Loss (2 SD): $#{stop_price.round(2)}\n  Risk per Share: $#{risk_per_share.round(2)}\n\n  Recommended Shares: #{shares.round(0)}\n  Position Value: $#{position_value.round(2)}\n  Max Risk: $#{(shares * risk_per_share).round(2)}\nPOSITION_SIZING\n</code></pre>"},{"location":"indicators/statistical/stddev/#example-volatility-squeeze-detection","title":"Example: Volatility Squeeze Detection","text":"<pre><code>prices = load_historical_prices('MSFT')\n\nstddev = SQA::TAI.stddev(prices, period: 20, nbdev: 1.0)\n\n# Calculate Bollinger Band width using standard deviation\nupper, middle, lower = SQA::TAI.bbands(prices, period: 20, nbdev_up: 2.0, nbdev_down: 2.0)\nbandwidth = (upper.last - lower.last) / middle.last * 100\n\n# Compare current volatility to recent range\nrecent_stddevs = stddev.last(100).compact\nmin_vol = recent_stddevs.min\nmax_vol = recent_stddevs.max\navg_vol = recent_stddevs.sum / recent_stddevs.size\ncurrent_vol = stddev.last\n\n# Squeeze detection\nvol_range = max_vol - min_vol\nvol_position = (current_vol - min_vol) / vol_range * 100\n\nputs \"=== Volatility Squeeze Analysis ===\"\nputs \"Current STDDEV: #{current_vol.round(4)}\"\nputs \"Average STDDEV: #{avg_vol.round(4)}\"\nputs \"Volatility Position: #{vol_position.round(1)}% of range\"\nputs \"Bollinger Bandwidth: #{bandwidth.round(2)}%\"\n\nif vol_position &lt; 25 &amp;&amp; bandwidth &lt; 10\n  puts \"\\n*** SQUEEZE ALERT ***\"\n  puts \"Extremely low volatility detected\"\n  puts \"Prepare for significant breakout\"\n  puts \"Watch for direction confirmation\"\nelsif vol_position &gt; 75\n  puts \"\\nHigh Volatility - Trend in motion\"\n  puts \"Consider trailing stops\"\nend\n</code></pre>"},{"location":"indicators/statistical/stddev/#example-volatility-breakout-strategy","title":"Example: Volatility Breakout Strategy","text":"<pre><code>prices = load_historical_prices('NVDA')\nhighs = load_historical_highs('NVDA')\nlows = load_historical_lows('NVDA')\n\nstddev = SQA::TAI.stddev(prices, period: 20, nbdev: 1.0)\nsma = SQA::TAI.sma(prices, period: 20)\n\n# Track volatility compression\nrecent_vols = stddev.last(10).compact\navg_recent_vol = recent_vols.sum / recent_vols.size\nlonger_vols = stddev.last(50).compact\navg_longer_vol = longer_vols.sum / longer_vols.size\n\nvolatility_ratio = avg_recent_vol / avg_longer_vol\ncurrent_price = prices.last\ncurrent_high = highs.last\ncurrent_low = lows.last\n\nputs \"=== Volatility Breakout Setup ===\"\nputs \"Volatility Ratio: #{(volatility_ratio * 100).round(1)}%\"\n\nif volatility_ratio &lt; 0.5\n  puts \"Volatility compressed to 50% of normal\"\n\n  # Set breakout levels\n  upper_breakout = sma.last + (stddev.last * 2.5)\n  lower_breakout = sma.last - (stddev.last * 2.5)\n\n  puts \"\\nBreakout Levels:\"\n  puts \"Upper: $#{upper_breakout.round(2)}\"\n  puts \"Lower: $#{lower_breakout.round(2)}\"\n\n  # Check for breakout\n  if current_high &gt; upper_breakout\n    puts \"\\n*** BULLISH BREAKOUT ***\"\n    puts \"Entry: $#{upper_breakout.round(2)}\"\n    puts \"Target: $#{(upper_breakout + stddev.last * 4).round(2)}\"\n    puts \"Stop: $#{(upper_breakout - stddev.last * 1.5).round(2)}\"\n  elsif current_low &lt; lower_breakout\n    puts \"\\n*** BEARISH BREAKOUT ***\"\n    puts \"Entry: $#{lower_breakout.round(2)}\"\n    puts \"Target: $#{(lower_breakout - stddev.last * 4).round(2)}\"\n    puts \"Stop: $#{(lower_breakout + stddev.last * 1.5).round(2)}\"\n  else\n    puts \"\\nWaiting for breakout direction...\"\n  end\nend\n</code></pre>"},{"location":"indicators/statistical/stddev/#example-volatility-adjusted-stop-loss","title":"Example: Volatility-Adjusted Stop Loss","text":"<pre><code>prices = load_historical_prices('AMZN')\n\nstddev = SQA::TAI.stddev(prices, period: 14, nbdev: 1.0)\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\ncurrent_price = prices.last\ncurrent_stddev = stddev.last\ncurrent_atr = atr.last\n\nputs \"=== Volatility-Based Stop Placement ===\"\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"Standard Deviation: $#{current_stddev.round(2)}\"\nputs \"ATR: $#{current_atr.round(2)}\"\n\n# Multiple stop loss approaches\nstop_1sd = current_price - (current_stddev * 1.0)\nstop_2sd = current_price - (current_stddev * 2.0)\nstop_3sd = current_price - (current_stddev * 3.0)\nstop_atr = current_price - (current_atr * 2.0)\n\nputs &lt;&lt;~STOPS\n\n  Stop Loss Options:\n  1. Tight (1 SD):    $#{stop_1sd.round(2)} - Risk: $#{(current_price - stop_1sd).round(2)}\n  2. Medium (2 SD):   $#{stop_2sd.round(2)} - Risk: $#{(current_price - stop_2sd).round(2)}\n  3. Wide (3 SD):     $#{stop_3sd.round(2)} - Risk: $#{(current_price - stop_3sd).round(2)}\n  4. ATR-based (2x):  $#{stop_atr.round(2)} - Risk: $#{(current_price - stop_atr).round(2)}\n\n  Recommendation:\n  - Day trades: Use 1-2 SD\n  - Swing trades: Use 2-3 SD\n  - Position trades: Use 3 SD or ATR\nSTOPS\n</code></pre>"},{"location":"indicators/statistical/stddev/#example-volatility-expansioncontraction-cycles","title":"Example: Volatility Expansion/Contraction Cycles","text":"<pre><code>prices = load_historical_prices('SPY')\n\nstddev = SQA::TAI.stddev(prices, period: 20, nbdev: 1.0)\n\n# Calculate volatility trend\nstddev_sma = SQA::TAI.sma(stddev.compact, period: 10)\ncurrent_vol = stddev.last\ntrend_vol = stddev_sma.last\n\n# Identify cycle phase\nvolatility_trend = current_vol &gt; trend_vol ? \"Expanding\" : \"Contracting\"\nvol_change = ((current_vol - trend_vol) / trend_vol * 100).round(2)\n\n# Historical context\nvols_50 = stddev.last(50).compact\nvols_200 = stddev.last(200).compact\n\navg_50 = vols_50.sum / vols_50.size\navg_200 = vols_200.sum / vols_200.size\n\nputs &lt;&lt;~CYCLES\n  === Volatility Cycle Analysis ===\n  Current Volatility: #{current_vol.round(4)}\n  Trend (10-period MA): #{trend_vol.round(4)}\n\n  Cycle Phase: #{volatility_trend}\n  Change from Trend: #{vol_change}%\n\n  Historical Context:\n  50-day Average: #{avg_50.round(4)}\n  200-day Average: #{avg_200.round(4)}\nCYCLES\n\nif volatility_trend == \"Expanding\"\n  puts \"\\nVolatility Expansion Phase:\"\n  puts \"- Expect larger price swings\"\n  puts \"- Widen stop losses\"\n  puts \"- Reduce position sizes\"\n  puts \"- Look for trend continuation\"\nelse\n  puts \"\\nVolatility Contraction Phase:\"\n  puts \"- Range-bound market likely\"\n  puts \"- Tighten stops\"\n  puts \"- Prepare for breakout\"\n  puts \"- Reduce directional bias\"\nend\n</code></pre>"},{"location":"indicators/statistical/stddev/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/statistical/stddev/#1-volatility-squeeze-breakout","title":"1. Volatility Squeeze Breakout","text":"<ul> <li>Setup: STDDEV contracts to historical lows</li> <li>Entry: Break of consolidation range</li> <li>Target: Move equal to previous volatility expansion</li> <li>Stop: Opposite side of consolidation range</li> </ul>"},{"location":"indicators/statistical/stddev/#2-volatility-mean-reversion","title":"2. Volatility Mean Reversion","text":"<ul> <li>Setup: STDDEV expands to extreme levels</li> <li>Entry: Price returns toward moving average</li> <li>Target: Return to normal volatility range</li> <li>Stop: Beyond recent volatility extreme</li> </ul>"},{"location":"indicators/statistical/stddev/#3-dynamic-stop-placement","title":"3. Dynamic Stop Placement","text":"<ul> <li>Conservative: 3 \u00d7 STDDEV from entry</li> <li>Moderate: 2 \u00d7 STDDEV from entry</li> <li>Aggressive: 1 \u00d7 STDDEV from entry</li> <li>Adjust: As volatility changes</li> </ul>"},{"location":"indicators/statistical/stddev/#4-position-sizing-by-volatility","title":"4. Position Sizing by Volatility","text":"<ul> <li>High Vol: Smaller positions (50-75% normal)</li> <li>Normal Vol: Standard position size</li> <li>Low Vol: Potentially larger (100-125% normal)</li> <li>Formula: Risk / (2 \u00d7 STDDEV) = Shares</li> </ul>"},{"location":"indicators/statistical/stddev/#common-settings","title":"Common Settings","text":"Period Use Case Typical NBDEV 5-10 Short-term trading 1.0-1.5 14-20 Swing trading 1.0-2.0 20-30 Bollinger Bands 2.0 50-100 Position trading 2.0-3.0"},{"location":"indicators/statistical/stddev/#volatility-interpretation","title":"Volatility Interpretation","text":"STDDEV/Price Ratio Volatility Level Market State &lt; 1% Very Low Extreme compression 1-2% Low Range-bound 2-4% Normal Typical market 4-6% Elevated Active trending &gt; 6% High Extreme conditions"},{"location":"indicators/statistical/stddev/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/statistical/stddev/#1-bollinger-band-construction","title":"1. Bollinger Band Construction","text":"<p>STDDEV is the foundation of Bollinger Bands: - Upper Band = SMA + (STDDEV \u00d7 2) - Middle Band = SMA - Lower Band = SMA - (STDDEV \u00d7 2)</p>"},{"location":"indicators/statistical/stddev/#2-statistical-significance","title":"2. Statistical Significance","text":"<ul> <li>1 SD: 68% of prices within range</li> <li>2 SD: 95% of prices within range</li> <li>3 SD: 99.7% of prices within range</li> </ul>"},{"location":"indicators/statistical/stddev/#3-volatility-clustering","title":"3. Volatility Clustering","text":"<p>Periods of high volatility tend to cluster together, as do periods of low volatility.</p>"},{"location":"indicators/statistical/stddev/#4-vix-correlation","title":"4. VIX Correlation","text":"<p>Compare equity STDDEV to VIX for broader market context.</p>"},{"location":"indicators/statistical/stddev/#related-indicators","title":"Related Indicators","text":"<ul> <li>Bollinger Bands (BBANDS) - Uses STDDEV for band width</li> <li>Average True Range (ATR) - Alternative volatility measure</li> <li>Variance (VAR) - STDDEV squared</li> <li>Normalized ATR (NATR) - Percentage-based volatility</li> </ul>"},{"location":"indicators/statistical/stddev/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Statistical Indicators Overview</li> </ul> <ul> <li>Volatility Analysis Example</li> </ul> <ul> <li>Risk Management Guide</li> </ul>"},{"location":"indicators/statistical/tsf/","title":"Time Series Forecast (TSF)","text":"<p>The Time Series Forecast (TSF) indicator projects where price is expected to be based on linear regression analysis. It extends the linear regression line one period forward, providing a statistical forecast of the next price point. This indicator is valuable for identifying trend direction, setting price targets, and detecting when actual prices deviate significantly from their expected trajectory.</p>"},{"location":"indicators/statistical/tsf/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.95, 47.25]\n\n# Calculate 14-period Time Series Forecast\ntsf = SQA::TAI.tsf(prices, period: 14)\n\nputs \"Current Price: #{prices.last.round(2)}\"\nputs \"TSF Forecast: #{tsf.last.round(2)}\"\nputs \"Deviation: #{(prices.last - tsf.last).round(2)}\"\n</code></pre>"},{"location":"indicators/statistical/tsf/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values (typically closing prices) <code>period</code> Integer No 14 Number of periods for linear regression calculation"},{"location":"indicators/statistical/tsf/#returns","title":"Returns","text":"<p>Returns an array of forecasted price values. Each value represents where the linear regression model expects price to be at that point. The first <code>period - 1</code> values will be <code>nil</code>.</p>"},{"location":"indicators/statistical/tsf/#what-it-measures","title":"What It Measures","text":"<p>TSF measures the forecasted price based on: - Linear trend: The consistent directional movement over the period - Statistical projection: Mathematical extension of the regression line - Expected value: Where price \"should be\" if trend continues</p> <p>The difference between actual price and TSF indicates: - Positive deviation: Price trading above forecast (bullish) - Negative deviation: Price trading below forecast (bearish) - Convergence: Price returning to expected trajectory</p>"},{"location":"indicators/statistical/tsf/#interpretation","title":"Interpretation","text":"Condition Interpretation Trading Implication Price &gt; TSF Bullish deviation Upward momentum exceeding trend Price &lt; TSF Bearish deviation Downward momentum below trend Price crosses above TSF Bullish signal Potential trend reversal up Price crosses below TSF Bearish signal Potential trend reversal down Widening gap Acceleration Strong momentum in direction Narrowing gap Deceleration Momentum weakening"},{"location":"indicators/statistical/tsf/#forecast-interpretation","title":"Forecast Interpretation","text":"TSF Pattern Market Condition Rising TSF Uptrend expected to continue Falling TSF Downtrend expected to continue Flat TSF Sideways movement expected Steep TSF slope Strong trend prediction Gradual TSF slope Weak trend prediction"},{"location":"indicators/statistical/tsf/#example-basic-tsf-crossover-strategy","title":"Example: Basic TSF Crossover Strategy","text":"<pre><code>prices = load_historical_prices('AAPL')\n\ntsf = SQA::TAI.tsf(prices, period: 14)\ncurrent_price = prices.last\nforecast = tsf.last\ndeviation = current_price - forecast\n\nputs &lt;&lt;~HEREDOC\n  Current Price: #{current_price.round(2)}\n  TSF Forecast: #{forecast.round(2)}\n  Deviation: #{deviation.round(2)} (#{((deviation / forecast) * 100).round(2)}%)\nHEREDOC\n\n# Trading signals\nif current_price &gt; forecast &amp;&amp; deviation &gt; (forecast * 0.02)\n  puts \"Strong BULLISH signal - Price significantly above forecast\"\nelsif current_price &lt; forecast &amp;&amp; deviation.abs &gt; (forecast * 0.02)\n  puts \"Strong BEARISH signal - Price significantly below forecast\"\nelsif current_price &gt; forecast\n  puts \"Mild bullish - Price above forecast\"\nelsif current_price &lt; forecast\n  puts \"Mild bearish - Price below forecast\"\nelse\n  puts \"Price at forecast - No clear signal\"\nend\n</code></pre>"},{"location":"indicators/statistical/tsf/#example-tsf-price-target-system","title":"Example: TSF Price Target System","text":"<pre><code>prices = load_historical_prices('TSLA')\n\ntsf = SQA::TAI.tsf(prices, period: 14)\ncurrent_price = prices.last\nforecast = tsf.last\n\n# Calculate standard deviation of price from TSF\ndeviations = []\nprices.last(14).each_with_index do |price, i|\n  next if tsf[-14 + i].nil?\n  deviations &lt;&lt; (price - tsf[-14 + i]).abs\nend\n\navg_deviation = deviations.sum / deviations.size\nstd_dev = Math.sqrt(deviations.map { |d| (d - avg_deviation) ** 2 }.sum / deviations.size)\n\n# Set price targets based on forecast and historical deviation\nupper_target_1 = forecast + std_dev\nupper_target_2 = forecast + (2 * std_dev)\nlower_target_1 = forecast - std_dev\nlower_target_2 = forecast - (2 * std_dev)\n\nputs &lt;&lt;~HEREDOC\n  TSF Price Target Analysis:\n  ===========================\n  Current Price: $#{current_price.round(2)}\n  TSF Forecast: $#{forecast.round(2)}\n\n  Resistance Targets:\n  - Target 1 (1 SD): $#{upper_target_1.round(2)}\n  - Target 2 (2 SD): $#{upper_target_2.round(2)}\n\n  Support Targets:\n  - Target 1 (1 SD): $#{lower_target_1.round(2)}\n  - Target 2 (2 SD): $#{lower_target_2.round(2)}\n\n  Average Deviation: $#{avg_deviation.round(2)}\nHEREDOC\n\n# Trading recommendations\nif current_price &gt; upper_target_1\n  puts \"Price extended above forecast - Consider profit taking\"\nelsif current_price &lt; lower_target_1\n  puts \"Price extended below forecast - Potential buying opportunity\"\nelsif current_price &gt; forecast\n  puts \"Price above forecast with room to run to $#{upper_target_1.round(2)}\"\nelse\n  puts \"Price below forecast with support at $#{lower_target_1.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/statistical/tsf/#example-tsf-trend-following-system","title":"Example: TSF Trend Following System","text":"<pre><code>prices = load_historical_prices('MSFT')\n\ntsf_short = SQA::TAI.tsf(prices, period: 10)\ntsf_long = SQA::TAI.tsf(prices, period: 20)\n\ncurrent_price = prices.last\nshort_forecast = tsf_short.last\nlong_forecast = tsf_long.last\n\nputs &lt;&lt;~HEREDOC\n  TSF Multi-Period Trend Analysis:\n  ================================\n  Current Price: $#{current_price.round(2)}\n  Short TSF (10): $#{short_forecast.round(2)}\n  Long TSF (20): $#{long_forecast.round(2)}\nHEREDOC\n\n# Trend determination\nif short_forecast &gt; long_forecast\n  trend = \"UPTREND\"\n  strength = ((short_forecast - long_forecast) / long_forecast * 100).round(2)\n  puts \"#{trend} - Short TSF above Long TSF by #{strength}%\"\n\n  if current_price &gt; short_forecast\n    puts \"BUY SIGNAL - Price above short-term forecast in uptrend\"\n  elsif current_price &lt; long_forecast\n    puts \"Potential trend reversal - Price below long-term forecast\"\n  end\nelsif short_forecast &lt; long_forecast\n  trend = \"DOWNTREND\"\n  strength = ((long_forecast - short_forecast) / long_forecast * 100).round(2)\n  puts \"#{trend} - Short TSF below Long TSF by #{strength}%\"\n\n  if current_price &lt; short_forecast\n    puts \"SELL SIGNAL - Price below short-term forecast in downtrend\"\n  elsif current_price &gt; long_forecast\n    puts \"Potential trend reversal - Price above long-term forecast\"\n  end\nelse\n  puts \"SIDEWAYS - Short and Long TSF aligned\"\nend\n</code></pre>"},{"location":"indicators/statistical/tsf/#example-tsf-mean-reversion-strategy","title":"Example: TSF Mean Reversion Strategy","text":"<pre><code>prices = load_historical_prices('SPY')\n\ntsf = SQA::TAI.tsf(prices, period: 20)\n\n# Calculate recent price deviations from forecast\nrecent_prices = prices.last(5)\nrecent_forecasts = tsf.last(5)\n\ncurrent_deviation = ((prices.last - tsf.last) / tsf.last * 100)\navg_recent_deviation = recent_prices.each_with_index.map do |price, i|\n  ((price - recent_forecasts[i]) / recent_forecasts[i] * 100)\nend.sum / 5\n\nputs &lt;&lt;~HEREDOC\n  TSF Mean Reversion Analysis:\n  ============================\n  Current Price: $#{prices.last.round(2)}\n  TSF Forecast: $#{tsf.last.round(2)}\n  Current Deviation: #{current_deviation.round(2)}%\n  5-Period Avg Deviation: #{avg_recent_deviation.round(2)}%\nHEREDOC\n\n# Mean reversion signals\ncase current_deviation\nwhen 3..Float::INFINITY\n  puts \"EXTREME OVERBOUGHT - High probability mean reversion SHORT\"\n  puts \"Target: Return to forecast at $#{tsf.last.round(2)}\"\nwhen 1.5..3\n  puts \"Moderately overbought - Watch for reversal signs\"\nwhen -1.5..1.5\n  puts \"Price near forecast - No mean reversion opportunity\"\nwhen -3..-1.5\n  puts \"Moderately oversold - Watch for reversal signs\"\nwhen -Float::INFINITY..-3\n  puts \"EXTREME OVERSOLD - High probability mean reversion LONG\"\n  puts \"Target: Return to forecast at $#{tsf.last.round(2)}\"\nend\n\n# Momentum check\nif current_deviation &gt; avg_recent_deviation + 1\n  puts \"Deviation accelerating - Momentum trade may continue\"\nelsif current_deviation &lt; avg_recent_deviation - 1\n  puts \"Deviation decelerating - Mean reversion likely starting\"\nend\n</code></pre>"},{"location":"indicators/statistical/tsf/#example-tsf-channel-breakout","title":"Example: TSF Channel Breakout","text":"<pre><code>prices = load_historical_prices('NVDA')\nhighs = load_historical_highs('NVDA')\nlows = load_historical_lows('NVDA')\n\ntsf = SQA::TAI.tsf(prices, period: 14)\n\n# Create forecast channel using high/low forecasts\ntsf_high = SQA::TAI.tsf(highs, period: 14)\ntsf_low = SQA::TAI.tsf(lows, period: 14)\n\ncurrent_price = prices.last\nforecast = tsf.last\nforecast_high = tsf_high.last\nforecast_low = tsf_low.last\nchannel_width = forecast_high - forecast_low\n\nputs &lt;&lt;~HEREDOC\n  TSF Channel Breakout Analysis:\n  ==============================\n  Current Price: $#{current_price.round(2)}\n  Forecast Center: $#{forecast.round(2)}\n  Forecast High: $#{forecast_high.round(2)}\n  Forecast Low: $#{forecast_low.round(2)}\n  Channel Width: $#{channel_width.round(2)}\nHEREDOC\n\n# Channel position\nposition_in_channel = ((current_price - forecast_low) / channel_width * 100).round(2)\nputs \"Channel Position: #{position_in_channel}%\"\n\n# Breakout signals\nif current_price &gt; forecast_high\n  breakout_strength = ((current_price - forecast_high) / forecast_high * 100).round(2)\n  puts \"BULLISH BREAKOUT - #{breakout_strength}% above forecast channel\"\n  puts \"Upside target: $#{(current_price + channel_width).round(2)}\"\nelsif current_price &lt; forecast_low\n  breakout_strength = ((forecast_low - current_price) / forecast_low * 100).round(2)\n  puts \"BEARISH BREAKDOWN - #{breakout_strength}% below forecast channel\"\n  puts \"Downside target: $#{(current_price - channel_width).round(2)}\"\nelsif position_in_channel &gt; 80\n  puts \"Near upper channel - Potential breakout or reversal\"\nelsif position_in_channel &lt; 20\n  puts \"Near lower channel - Potential breakdown or reversal\"\nelse\n  puts \"Mid-channel - No clear breakout signal\"\nend\n</code></pre>"},{"location":"indicators/statistical/tsf/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/statistical/tsf/#1-tsf-slope-analysis","title":"1. TSF Slope Analysis","text":"<p>Monitor the rate of change in TSF values to identify trend acceleration or deceleration.</p>"},{"location":"indicators/statistical/tsf/#2-multi-timeframe-tsf","title":"2. Multi-Timeframe TSF","text":"<p>Use TSF on different timeframes (daily, weekly) to identify aligned forecasts for higher probability trades.</p>"},{"location":"indicators/statistical/tsf/#3-tsf-with-volume","title":"3. TSF with Volume","text":"<p>Confirm TSF signals with volume analysis - high volume on price moves toward TSF suggests strong mean reversion.</p>"},{"location":"indicators/statistical/tsf/#4-adaptive-periods","title":"4. Adaptive Periods","text":"<p>Adjust the TSF period based on market volatility - shorter periods in volatile markets, longer in stable markets.</p>"},{"location":"indicators/statistical/tsf/#5-tsf-envelope","title":"5. TSF Envelope","text":"<p>Create upper and lower bands around TSF (\u00b11-2 standard deviations) for channel trading.</p>"},{"location":"indicators/statistical/tsf/#example-complete-tsf-trading-system","title":"Example: Complete TSF Trading System","text":"<pre><code>class TSFTradingSystem\n  attr_reader :prices, :tsf, :position\n\n  def initialize(prices, period: 14, deviation_threshold: 0.02)\n    @prices = prices\n    @period = period\n    @deviation_threshold = deviation_threshold\n    @tsf = SQA::TAI.tsf(prices, period: period)\n    @position = :flat\n  end\n\n  def analyze\n    current_price = @prices.last\n    forecast = @tsf.last\n    prev_price = @prices[-2]\n    prev_forecast = @tsf[-2]\n\n    deviation = (current_price - forecast) / forecast\n    prev_deviation = (prev_price - prev_forecast) / prev_forecast\n\n    signal = determine_signal(current_price, forecast, deviation, prev_deviation)\n\n    {\n      current_price: current_price.round(2),\n      forecast: forecast.round(2),\n      deviation_pct: (deviation * 100).round(2),\n      signal: signal,\n      trend: forecast &gt; @tsf[-5] ? 'UP' : 'DOWN',\n      strength: calculate_strength(deviation)\n    }\n  end\n\n  private\n\n  def determine_signal(current, forecast, deviation, prev_deviation)\n    # Crossover signals\n    if current &gt; forecast &amp;&amp; @prices[-2] &lt;= @tsf[-2]\n      @position = :long\n      return :buy_crossover\n    elsif current &lt; forecast &amp;&amp; @prices[-2] &gt;= @tsf[-2]\n      @position = :short\n      return :sell_crossover\n    end\n\n    # Extreme deviation signals (mean reversion)\n    if deviation &gt; @deviation_threshold * 2\n      return :extreme_overbought\n    elsif deviation &lt; -@deviation_threshold * 2\n      return :extreme_oversold\n    end\n\n    # Trend following signals\n    if deviation &gt; @deviation_threshold &amp;&amp; deviation &gt; prev_deviation\n      return :bullish_momentum\n    elsif deviation &lt; -@deviation_threshold &amp;&amp; deviation &lt; prev_deviation\n      return :bearish_momentum\n    end\n\n    :neutral\n  end\n\n  def calculate_strength(deviation)\n    strength = (deviation.abs / @deviation_threshold * 100).round(0)\n    strength &gt; 100 ? 100 : strength\n  end\nend\n\n# Usage\nprices = load_historical_prices('AAPL')\nsystem = TSFTradingSystem.new(prices, period: 14, deviation_threshold: 0.015)\nanalysis = system.analyze\n\nputs &lt;&lt;~HEREDOC\n  TSF Trading System Analysis:\n  ============================\n  Price: $#{analysis[:current_price]}\n  Forecast: $#{analysis[:forecast]}\n  Deviation: #{analysis[:deviation_pct]}%\n  Signal: #{analysis[:signal]}\n  Trend: #{analysis[:trend]}\n  Strength: #{analysis[:strength]}%\nHEREDOC\n</code></pre>"},{"location":"indicators/statistical/tsf/#common-use-cases","title":"Common Use Cases","text":""},{"location":"indicators/statistical/tsf/#1-trend-following","title":"1. Trend Following","text":"<ul> <li>Enter long when price crosses above TSF in uptrend</li> <li>Enter short when price crosses below TSF in downtrend</li> <li>Exit when price crosses back through TSF</li> </ul>"},{"location":"indicators/statistical/tsf/#2-mean-reversion","title":"2. Mean Reversion","text":"<ul> <li>Buy when price drops significantly below TSF</li> <li>Sell when price rises significantly above TSF</li> <li>Target: Return to TSF forecast level</li> </ul>"},{"location":"indicators/statistical/tsf/#3-price-targets","title":"3. Price Targets","text":"<ul> <li>Use TSF as dynamic support/resistance</li> <li>Set profit targets based on TSF \u00b1 standard deviations</li> <li>Adjust stops to TSF levels</li> </ul>"},{"location":"indicators/statistical/tsf/#4-breakout-confirmation","title":"4. Breakout Confirmation","text":"<ul> <li>Wait for price to break above/below TSF channel</li> <li>Use TSF slope to confirm breakout direction</li> <li>Higher TSF forecast suggests sustainable breakout</li> </ul>"},{"location":"indicators/statistical/tsf/#common-settings","title":"Common Settings","text":"Period Use Case Sensitivity 5-7 Day trading Very high - quick signals 10-14 Swing trading High - responsive to changes 20-30 Position trading Medium - smoother trends 50+ Long-term investing Low - major trends only"},{"location":"indicators/statistical/tsf/#tips-for-trading","title":"Tips for Trading","text":"<ol> <li>Combine with Trend Indicators: Use TSF with moving averages to filter signals in trend direction</li> <li>Volume Confirmation: Confirm TSF signals with above-average volume</li> <li>Multiple Periods: Use 2-3 TSF periods for confluence signals</li> <li>Risk Management: Set stops below/above TSF to limit losses</li> <li>Divergence Trading: Watch for price making new highs/lows while TSF doesn't</li> </ol>"},{"location":"indicators/statistical/tsf/#advantages","title":"Advantages","text":"<ul> <li>Forward-looking: Projects future price unlike lagging indicators</li> <li>Objective: Based on statistical calculation, not subjective</li> <li>Trend identification: Clearly shows expected price trajectory</li> <li>Dynamic levels: Automatically adjusts to market conditions</li> <li>Mean reversion: Shows when prices deviate from normal</li> </ul>"},{"location":"indicators/statistical/tsf/#limitations","title":"Limitations","text":"<ul> <li>Lagging component: Based on historical data</li> <li>Trending markets: Works best in trending conditions</li> <li>Whipsaws: Can generate false signals in choppy markets</li> <li>No volatility adjustment: Doesn't account for market volatility changes</li> <li>Linear assumption: Assumes trend continues linearly</li> </ul>"},{"location":"indicators/statistical/tsf/#related-indicators","title":"Related Indicators","text":"<ul> <li>Linear Regression (LINEARREG) - Current regression value</li> <li>Linear Regression Slope (LINEARREG_SLOPE) - Trend strength</li> <li>Linear Regression Angle (LINEARREG_ANGLE) - Trend angle</li> <li>Standard Deviation (STDDEV) - Forecast uncertainty</li> </ul>"},{"location":"indicators/statistical/tsf/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Statistical Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/statistical/var/","title":"Variance (VAR)","text":"<p>The Variance indicator measures the dispersion of price returns around their mean, representing volatility squared. It quantifies how much prices fluctuate from the average, providing a statistical measure of risk and uncertainty in asset prices.</p>"},{"location":"indicators/statistical/var/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46]\n\n# Calculate 5-period variance\nvariance = SQA::TAI.var(prices, period: 5)\n\ndebug_me \"Current variance: #{variance.last.round(4)}\"\n</code></pre>"},{"location":"indicators/statistical/var/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>period</code> Integer No 5 Number of periods for calculation <code>nbdev</code> Float/Array No 1.0 Number of standard deviations (for advanced calculations)"},{"location":"indicators/statistical/var/#returns","title":"Returns","text":"<p>Returns an array of variance values. The first <code>period-1</code> values will be <code>nil</code>. Variance is always non-negative, with higher values indicating greater dispersion/volatility.</p>"},{"location":"indicators/statistical/var/#formula","title":"Formula","text":"<pre><code>Variance = \u03a3(Price - Mean)\u00b2 / N\n\nWhere:\n  - N = number of periods\n  - Mean = average price over period\n  - Variance = VAR\n  - Standard Deviation = \u221aVariance\n</code></pre>"},{"location":"indicators/statistical/var/#interpretation","title":"Interpretation","text":"Variance Level Interpretation Risk Assessment High Variance Large price swings, high volatility Higher risk, wider stops needed Low Variance Stable prices, low volatility Lower risk, tighter stops possible Rising Variance Volatility expanding Risk increasing, position size down Falling Variance Volatility contracting Risk decreasing, may increase size"},{"location":"indicators/statistical/var/#example-variance-based-risk-assessment","title":"Example: Variance-Based Risk Assessment","text":"<pre><code>prices = load_historical_prices('AAPL')\n\n# Calculate variance with different periods\nvar_short = SQA::TAI.var(prices, period: 5)\nvar_medium = SQA::TAI.var(prices, period: 20)\nvar_long = SQA::TAI.var(prices, period: 60)\n\ncurrent_var = var_short.last\nmedium_var = var_medium.last\nlong_var = var_long.last\n\n# Compare current variance to longer-term averages\nif current_var &gt; medium_var * 2\n  debug_me \"HIGH RISK: Variance spike detected!\"\n  debug_me \"Current variance: #{current_var.round(4)}\"\n  debug_me \"20-period variance: #{medium_var.round(4)}\"\n  debug_me \"Risk level: ELEVATED - Consider reducing position size\"\nelsif current_var &lt; medium_var * 0.5\n  debug_me \"LOW RISK: Variance compression detected\"\n  debug_me \"Current variance: #{current_var.round(4)}\"\n  debug_me \"20-period variance: #{medium_var.round(4)}\"\n  debug_me \"Risk level: LOW - Market is quiet\"\nelse\n  debug_me \"NORMAL RISK: Variance in typical range\"\n  debug_me \"Current variance: #{current_var.round(4)}\"\nend\n</code></pre>"},{"location":"indicators/statistical/var/#example-position-sizing-based-on-variance","title":"Example: Position Sizing Based on Variance","text":"<pre><code>prices = load_historical_prices('TSLA')\n\nvariance = SQA::TAI.var(prices, period: 20)\nstddev = SQA::TAI.stddev(prices, period: 20)\n\ncurrent_price = prices.last\ncurrent_variance = variance.last\ncurrent_stddev = stddev.last\n\n# Risk parameters\naccount_value = 100_000\nrisk_per_trade = account_value * 0.02  # 2% risk\n\n# Average variance over last 60 days for comparison\navg_variance = variance.compact[-60..-1].sum / 60.0\n\n# Adjust position size based on current vs average variance\nvariance_ratio = current_variance / avg_variance\n\nif variance_ratio &gt; 2.0\n  # High volatility - reduce position size\n  risk_adjustment = 0.5  # Cut risk in half\n  adjusted_risk = risk_per_trade * risk_adjustment\n\n  debug_me &lt;&lt;~HEREDOC\n    HIGH VOLATILITY REGIME\n    Current variance: #{current_variance.round(4)}\n    Average variance: #{avg_variance.round(4)}\n    Variance ratio: #{variance_ratio.round(2)}x\n    Reducing position size by 50%\n    Risk allocation: $#{adjusted_risk.round(2)} (was $#{risk_per_trade.round(2)})\n  HEREDOC\nelsif variance_ratio &lt; 0.5\n  # Low volatility - can increase position size slightly\n  risk_adjustment = 1.25  # Increase risk by 25%\n  adjusted_risk = risk_per_trade * risk_adjustment\n\n  debug_me &lt;&lt;~HEREDOC\n    LOW VOLATILITY REGIME\n    Current variance: #{current_variance.round(4)}\n    Average variance: #{avg_variance.round(4)}\n    Variance ratio: #{variance_ratio.round(2)}x\n    Increasing position size by 25%\n    Risk allocation: $#{adjusted_risk.round(2)} (was $#{risk_per_trade.round(2)})\n  HEREDOC\nelse\n  # Normal volatility\n  adjusted_risk = risk_per_trade\n\n  debug_me &lt;&lt;~HEREDOC\n    NORMAL VOLATILITY REGIME\n    Current variance: #{current_variance.round(4)}\n    Average variance: #{avg_variance.round(4)}\n    Variance ratio: #{variance_ratio.round(2)}x\n    Using standard position size\n    Risk allocation: $#{adjusted_risk.round(2)}\n  HEREDOC\nend\n\n# Calculate position size using standard deviation (\u221avariance)\nstop_distance = current_stddev * 2  # 2 standard deviations\nposition_size = adjusted_risk / stop_distance\n\ndebug_me &lt;&lt;~HEREDOC\n  POSITION DETAILS\n  Entry price: $#{current_price.round(2)}\n  Stop distance: $#{stop_distance.round(2)} (2\u03c3)\n  Position size: #{position_size.round(0)} shares\n  Total value: $#{(position_size * current_price).round(2)}\n  Stop loss: $#{(current_price - stop_distance).round(2)}\nHEREDOC\n</code></pre>"},{"location":"indicators/statistical/var/#example-volatility-regime-detection","title":"Example: Volatility Regime Detection","text":"<pre><code>prices = load_historical_prices('SPY')\n\nvariance = SQA::TAI.var(prices, period: 20)\n\n# Calculate rolling statistics on variance\nrecent_variance = variance.compact[-60..-1]\nmean_variance = recent_variance.sum / recent_variance.length\nstddev_variance = Math.sqrt(\n  recent_variance.map { |v| (v - mean_variance) ** 2 }.sum / recent_variance.length\n)\n\ncurrent_var = variance.last\n\n# Classify volatility regime\nif current_var &gt; mean_variance + (2 * stddev_variance)\n  regime = \"EXTREME HIGH\"\n  color = :red\n  action = \"Defensive - reduce exposure, tighten stops\"\nelsif current_var &gt; mean_variance + stddev_variance\n  regime = \"ELEVATED\"\n  color = :yellow\n  action = \"Cautious - reduce position sizes\"\nelsif current_var &lt; mean_variance - stddev_variance\n  regime = \"LOW\"\n  color = :green\n  action = \"Opportunistic - can increase exposure\"\nelse\n  regime = \"NORMAL\"\n  color = :blue\n  action = \"Standard risk management\"\nend\n\ndebug_me &lt;&lt;~HEREDOC\n  VOLATILITY REGIME ANALYSIS\n  Current variance: #{current_var.round(4)}\n  Mean variance (60d): #{mean_variance.round(4)}\n  StdDev of variance: #{stddev_variance.round(4)}\n\n  Regime: #{regime}\n  Recommended action: #{action}\n\n  Z-Score: #{((current_var - mean_variance) / stddev_variance).round(2)}\nHEREDOC\n</code></pre>"},{"location":"indicators/statistical/var/#example-comparing-risk-across-assets","title":"Example: Comparing Risk Across Assets","text":"<pre><code># Compare variance across different assets for portfolio allocation\nsymbols = ['AAPL', 'MSFT', 'TSLA', 'SPY', 'TLT']\n\nrisk_analysis = symbols.map do |symbol|\n  prices = load_historical_prices(symbol)\n  variance = SQA::TAI.var(prices, period: 20)\n  stddev = SQA::TAI.stddev(prices, period: 20)\n\n  current_price = prices.last\n  current_variance = variance.last\n  current_stddev = stddev.last\n\n  # Normalize by price (coefficient of variation)\n  cv = (current_stddev / current_price) * 100  # As percentage\n\n  {\n    symbol: symbol,\n    price: current_price.round(2),\n    variance: current_variance.round(4),\n    stddev: current_stddev.round(2),\n    cv_percent: cv.round(2)\n  }\nend\n\n# Sort by coefficient of variation (relative risk)\ndebug_me \"COMPARATIVE RISK ANALYSIS (20-day period)\\n\"\ndebug_me \"=\" * 70\n\nrisk_analysis.sort_by { |d| d[:cv_percent] }.each do |data|\n  debug_me &lt;&lt;~HEREDOC\n    #{data[:symbol]}:\n      Price: $#{data[:price]}\n      Variance: #{data[:variance]}\n      Std Dev: $#{data[:stddev]}\n      Coefficient of Variation: #{data[:cv_percent]}% (relative risk)\n\n  HEREDOC\nend\n\n# Determine portfolio allocation based on variance\ntotal_cv = risk_analysis.sum { |d| d[:cv_percent] }\n\ndebug_me \"\\nRISK-ADJUSTED ALLOCATION (Inverse Variance Weighting):\\n\"\nrisk_analysis.each do |data|\n  # Inverse of CV for allocation (lower risk = higher allocation)\n  inverse_cv = 1.0 / data[:cv_percent]\n  total_inverse = risk_analysis.sum { |d| 1.0 / d[:cv_percent] }\n  allocation = (inverse_cv / total_inverse) * 100\n\n  debug_me \"#{data[:symbol]}: #{allocation.round(1)}% (lower variance = higher allocation)\"\nend\n</code></pre>"},{"location":"indicators/statistical/var/#example-variance-breakout-trading","title":"Example: Variance Breakout Trading","text":"<pre><code>prices = load_historical_prices('NVDA')\n\nvariance = SQA::TAI.var(prices, period: 20)\nstddev = SQA::TAI.stddev(prices, period: 20)\n\n# Calculate variance of variance (second moment)\nvar_history = variance.compact[-60..-1]\navg_variance = var_history.sum / var_history.length\n\ncurrent_var = variance.last\ncurrent_price = prices.last\n\n# Detect variance breakouts (volatility expansion)\nif current_var &gt; avg_variance * 2.0\n  debug_me &lt;&lt;~HEREDOC\n    VARIANCE BREAKOUT DETECTED!\n    Current variance: #{current_var.round(4)}\n    60-day avg variance: #{avg_variance.round(4)}\n    Ratio: #{(current_var / avg_variance).round(2)}x\n\n    INTERPRETATION:\n    - Volatility is expanding rapidly\n    - Expect larger price swings\n    - Potential trend change or acceleration\n    - Use wider stops\n    - Consider reducing position size\n    - Look for directional breakout\n  HEREDOC\n\n  # Calculate recommended stop based on expanded volatility\n  expanded_stop = current_price - (3 * stddev.last)  # 3\u03c3 for high vol\n  debug_me \"Recommended stop loss: $#{expanded_stop.round(2)} (3\u03c3)\"\n\nelsif current_var &lt; avg_variance * 0.3\n  debug_me &lt;&lt;~HEREDOC\n    VARIANCE COMPRESSION DETECTED!\n    Current variance: #{current_var.round(4)}\n    60-day avg variance: #{avg_variance.round(4)}\n    Ratio: #{(current_var / avg_variance).round(2)}x\n\n    INTERPRETATION:\n    - Volatility is contracting\n    - Market is consolidating\n    - Potential breakout pending\n    - Good time to establish positions\n    - Use tighter stops\n    - Wait for directional move\n  HEREDOC\n\n  # Tighter stops during compression\n  compressed_stop = current_price - (1.5 * stddev.last)  # 1.5\u03c3 for low vol\n  debug_me \"Recommended stop loss: $#{compressed_stop.round(2)} (1.5\u03c3)\"\nend\n</code></pre>"},{"location":"indicators/statistical/var/#example-rolling-variance-for-trend-analysis","title":"Example: Rolling Variance for Trend Analysis","text":"<pre><code>prices = load_historical_prices('BTC-USD')\n\n# Calculate variance with multiple periods\nvar_5 = SQA::TAI.var(prices, period: 5)\nvar_20 = SQA::TAI.var(prices, period: 20)\nvar_60 = SQA::TAI.var(prices, period: 60)\n\n# Analyze variance trend\nrecent_var_5 = var_5.compact.last(10)\nvar_trend = if recent_var_5.last &gt; recent_var_5.first * 1.5\n  \"INCREASING\"\nelsif recent_var_5.last &lt; recent_var_5.first * 0.67\n  \"DECREASING\"\nelse\n  \"STABLE\"\nend\n\ndebug_me &lt;&lt;~HEREDOC\n  VARIANCE TREND ANALYSIS\n\n  Current Variance (5-day): #{var_5.last.round(4)}\n  Current Variance (20-day): #{var_20.last.round(4)}\n  Current Variance (60-day): #{var_60.last.round(4)}\n\n  Short-term trend: #{var_trend}\n\n  MARKET REGIME:\nHEREDOC\n\nif var_5.last &gt; var_20.last &amp;&amp; var_20.last &gt; var_60.last\n  debug_me \"  - Accelerating volatility across all timeframes\"\n  debug_me \"  - Risk is increasing\"\n  debug_me \"  - Consider defensive positioning\"\nelsif var_5.last &lt; var_20.last &amp;&amp; var_20.last &lt; var_60.last\n  debug_me \"  - Volatility declining across all timeframes\"\n  debug_me \"  - Risk is decreasing\"\n  debug_me \"  - Market stabilizing\"\nelse\n  debug_me \"  - Mixed volatility signals\"\n  debug_me \"  - Monitor for regime change\"\nend\n</code></pre>"},{"location":"indicators/statistical/var/#common-period-settings","title":"Common Period Settings","text":"Period Use Case Risk Context 5 Short-term volatility Day trading, quick moves 10 Swing trading Multi-day holds 20 Standard (monthly) Position trading 60 Quarterly trends Long-term risk assessment 252 Annual variance Portfolio management"},{"location":"indicators/statistical/var/#risk-management-applications","title":"Risk Management Applications","text":""},{"location":"indicators/statistical/var/#1-dynamic-stop-losses","title":"1. Dynamic Stop Losses","text":"<pre><code># Adjust stop loss based on current variance\nstop_multiplier = current_var &gt; avg_var ? 3.0 : 2.0\nstop_loss = entry - (stop_multiplier * Math.sqrt(current_var))\n</code></pre>"},{"location":"indicators/statistical/var/#2-position-sizing","title":"2. Position Sizing","text":"<pre><code># Inverse variance weighting\nposition_size = (risk_capital / current_var) * scale_factor\n</code></pre>"},{"location":"indicators/statistical/var/#3-portfolio-allocation","title":"3. Portfolio Allocation","text":"<pre><code># Lower variance assets get higher allocation\nweight = (1.0 / variance) / total_inverse_variance\n</code></pre>"},{"location":"indicators/statistical/var/#4-volatility-filters","title":"4. Volatility Filters","text":"<pre><code># Only trade when variance is in acceptable range\ntrade_ok = current_var.between?(min_var, max_var)\n</code></pre>"},{"location":"indicators/statistical/var/#relationship-to-other-indicators","title":"Relationship to Other Indicators","text":"<p>Variance is the foundation for many other statistical measures:</p> <ul> <li>Standard Deviation (STDDEV): \u221aVariance - more intuitive scale</li> <li>Coefficient of Variation: (StdDev / Mean) \u00d7 100 - relative risk</li> <li>Bollinger Bands: Price \u00b1 (N \u00d7 StdDev)</li> <li>Value at Risk (VaR): Uses variance for risk estimation</li> <li>Sharpe Ratio: Return / StdDev - risk-adjusted return</li> </ul>"},{"location":"indicators/statistical/var/#advantages","title":"Advantages","text":"<ul> <li>Mathematically rigorous measure of dispersion</li> <li>Foundation for many risk metrics</li> <li>Useful for portfolio theory and optimization</li> <li>Works across all asset classes and timeframes</li> <li>Quantifies uncertainty objectively</li> </ul>"},{"location":"indicators/statistical/var/#limitations","title":"Limitations","text":"<ul> <li>Squared units (less intuitive than standard deviation)</li> <li>Assumes normal distribution (real markets have fat tails)</li> <li>Backward-looking (uses historical data)</li> <li>Sensitive to outliers</li> <li>Doesn't distinguish between upside and downside volatility</li> </ul>"},{"location":"indicators/statistical/var/#best-practices","title":"Best Practices","text":"<ol> <li>Use with Standard Deviation: Variance and StdDev complement each other</li> <li>Compare Relatively: Look at variance ratios, not absolute values</li> <li>Multiple Timeframes: Check variance across different periods</li> <li>Normalize by Price: Use coefficient of variation for cross-asset comparison</li> <li>Combine with Trend: Variance tells magnitude, not direction</li> <li>Regular Recalibration: Update risk models as market regimes change</li> </ol>"},{"location":"indicators/statistical/var/#related-indicators","title":"Related Indicators","text":"<ul> <li>STDDEV - Square root of variance (same scale as price)</li> <li>ATR - Alternative volatility measure</li> <li>BBANDS - Uses standard deviation</li> <li>BETA - Relative variance to market</li> </ul>"},{"location":"indicators/statistical/var/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Statistical Indicators Overview</li> </ul>"},{"location":"indicators/volatility/atr/","title":"Average True Range (ATR)","text":"<p>The Average True Range (ATR) is a volatility indicator that measures the degree of price volatility. It shows how much an asset moves, on average, during a given time frame.</p>"},{"location":"indicators/volatility/atr/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# OHLC data required\nhigh  = [46.08, 46.41, 46.46, 46.57, 46.50, 47.03, 47.35, 47.61, 48.12, 48.34,\n         48.21, 48.95, 49.13, 49.32, 49.78]\nlow   = [44.61, 44.83, 45.64, 45.95, 46.02, 46.50, 47.28, 47.28, 48.03, 48.21,\n         47.85, 48.45, 48.67, 48.94, 49.25]\nclose = [45.42, 45.84, 46.08, 46.46, 46.55, 47.03, 47.28, 47.61, 48.12, 48.21,\n         48.15, 48.85, 49.05, 49.25, 49.65]\n\n# Calculate 14-period ATR\natr = SQA::TAI.atr(high, low, close, period: 14)\n\nputs \"Current ATR: #{atr.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/atr/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of closing prices <code>period</code> Integer No 14 Number of periods for calculation"},{"location":"indicators/volatility/atr/#returns","title":"Returns","text":"<p>Returns an array of ATR values. The first <code>period</code> values will be <code>nil</code>.</p>"},{"location":"indicators/volatility/atr/#formula","title":"Formula","text":"<pre><code>True Range = Max of:\n  - Current High - Current Low\n  - |Current High - Previous Close|\n  - |Current Low - Previous Close|\n\nATR = Average of True Range over N periods\n</code></pre>"},{"location":"indicators/volatility/atr/#interpretation","title":"Interpretation","text":"<ul> <li>High ATR: High volatility, large price swings</li> <li>Low ATR: Low volatility, small price swings</li> <li>Rising ATR: Increasing volatility</li> <li>Falling ATR: Decreasing volatility</li> </ul> <p>ATR doesn't indicate direction, only volatility magnitude.</p>"},{"location":"indicators/volatility/atr/#example-volatility-based-position-sizing","title":"Example: Volatility-Based Position Sizing","text":"<pre><code>high, low, close = load_ohlc_data('AAPL')\n\natr = SQA::TAI.atr(high, low, close, period: 14)\ncurrent_atr = atr.last\ncurrent_price = close.last\n\n# Risk 1% of capital per trade\naccount_value = 100_000\nrisk_per_trade = account_value * 0.01  # $1,000\n\n# Use ATR for stop loss (2\u00d7 ATR is common)\nstop_distance = current_atr * 2\nposition_size = risk_per_trade / stop_distance\n\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"ATR: $#{current_atr.round(2)}\"\nputs \"Stop Distance: $#{stop_distance.round(2)}\"\nputs \"Position Size: #{position_size.round(0)} shares\"\nputs \"Stop Loss: $#{(current_price - stop_distance).round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/atr/#example-volatility-breakout","title":"Example: Volatility Breakout","text":"<pre><code>high, low, close = load_ohlc_data('TSLA')\n\natr = SQA::TAI.atr(high, low, close, period: 14)\n\n# Calculate average ATR\navg_atr = atr.compact[-20..-1].sum / 20.0\ncurrent_atr = atr.last\n\n# Look for volatility expansion\nif current_atr &gt; avg_atr * 1.5\n  puts \"Volatility breakout detected!\"\n  puts \"Current ATR: #{current_atr.round(2)}\"\n  puts \"20-day Average ATR: #{avg_atr.round(2)}\"\n  puts \"ATR #{((current_atr / avg_atr - 1) * 100).round(0)}% above average\"\n  puts \"Expect larger price moves\"\nend\n</code></pre>"},{"location":"indicators/volatility/atr/#example-atr-stop-loss-and-target","title":"Example: ATR Stop Loss and Target","text":"<pre><code>high, low, close = load_ohlc_data('MSFT')\n\natr = SQA::TAI.atr(high, low, close, period: 14)\ncurrent_atr = atr.last\ncurrent_price = close.last\n\n# For long positions\nentry_price = current_price\nstop_loss = entry_price - (2 * current_atr)\ntarget_1 = entry_price + (2 * current_atr)\ntarget_2 = entry_price + (3 * current_atr)\n\nputs \"Entry: $#{entry_price.round(2)}\"\nputs \"Stop Loss: $#{stop_loss.round(2)} (-#{((1 - stop_loss/entry_price) * 100).round(1)}%)\"\nputs \"Target 1: $#{target_1.round(2)} (+#{((target_1/entry_price - 1) * 100).round(1)}%)\"\nputs \"Target 2: $#{target_2.round(2)} (+#{((target_2/entry_price - 1) * 100).round(1)}%)\"\nputs \"Risk:Reward = 1:#{((target_1 - entry_price) / (entry_price - stop_loss)).round(1)}\"\n</code></pre>"},{"location":"indicators/volatility/atr/#example-comparing-volatility-across-assets","title":"Example: Comparing Volatility Across Assets","text":"<pre><code># Compare volatility of different stocks\nsymbols = ['AAPL', 'TSLA', 'SPY']\n\nvolatility_data = symbols.map do |symbol|\n  high, low, close = load_ohlc_data(symbol)\n  atr = SQA::TAI.atr(high, low, close, period: 14)\n  current_price = close.last\n  current_atr = atr.last\n\n  # Normalized ATR (as percentage of price)\n  atr_percent = (current_atr / current_price) * 100\n\n  {\n    symbol: symbol,\n    price: current_price.round(2),\n    atr: current_atr.round(2),\n    atr_percent: atr_percent.round(2)\n  }\nend\n\nvolatility_data.sort_by { |d| -d[:atr_percent] }.each do |data|\n  puts \"#{data[:symbol]}: ATR $#{data[:atr]} (#{data[:atr_percent]}% of price)\"\nend\n</code></pre>"},{"location":"indicators/volatility/atr/#example-atr-bands-chandelier-exit","title":"Example: ATR Bands (Chandelier Exit)","text":"<pre><code>high, low, close = load_ohlc_data('NVDA')\n\natr = SQA::TAI.atr(high, low, close, period: 14)\n\n# Calculate Chandelier Exit (ATR-based trailing stop)\nmultiplier = 3\nlookback = 22\n\nchandelier_long = high.each_with_index.map do |h, i|\n  next nil if i &lt; lookback || atr[i].nil?\n\n  highest_high = high[(i-lookback+1)..i].max\n  highest_high - (multiplier * atr[i])\nend\n\nchandelier_short = low.each_with_index.map do |l, i|\n  next nil if i &lt; lookback || atr[i].nil?\n\n  lowest_low = low[(i-lookback+1)..i].min\n  lowest_low + (multiplier * atr[i])\nend\n\nputs \"Current Price: #{close.last.round(2)}\"\nputs \"Chandelier Long Exit: #{chandelier_long.last.round(2)}\"\nputs \"Chandelier Short Exit: #{chandelier_short.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/atr/#common-uses","title":"Common Uses","text":""},{"location":"indicators/volatility/atr/#1-stop-loss-placement","title":"1. Stop Loss Placement","text":"<pre><code>stop_loss = entry_price - (2 * atr)  # For long\nstop_loss = entry_price + (2 * atr)  # For short\n</code></pre>"},{"location":"indicators/volatility/atr/#2-position-sizing","title":"2. Position Sizing","text":"<pre><code>position_size = account_risk / (atr_multiplier * atr)\n</code></pre>"},{"location":"indicators/volatility/atr/#3-profit-targets","title":"3. Profit Targets","text":"<pre><code>target = entry_price + (3 * atr)  # 3\u00d7 ATR target\n</code></pre>"},{"location":"indicators/volatility/atr/#4-volatility-filter","title":"4. Volatility Filter","text":"<pre><code># Only trade when ATR is above average\ntrade_signal = entry_signal &amp;&amp; atr &gt; avg_atr\n</code></pre>"},{"location":"indicators/volatility/atr/#atr-period-settings","title":"ATR Period Settings","text":"Period Use Case 7 Short-term, more sensitive 14 Standard (most common) 21 Medium-term 50 Long-term trends"},{"location":"indicators/volatility/atr/#advantages","title":"Advantages","text":"<ul> <li>Non-directional (works in any trend)</li> <li>Adapts to changing market conditions</li> <li>Useful for risk management</li> <li>Works across all timeframes</li> </ul>"},{"location":"indicators/volatility/atr/#limitations","title":"Limitations","text":"<ul> <li>Doesn't indicate trend direction</li> <li>Lagging indicator</li> <li>High ATR doesn't mean trend will continue</li> <li>Can be affected by gaps</li> </ul>"},{"location":"indicators/volatility/atr/#related-indicators","title":"Related Indicators","text":"<ul> <li>True Range (TRANGE) - Single period calculation</li> <li>Bollinger Bands - Another volatility measure</li> <li>Standard Deviation - Used in Bollinger Bands</li> </ul>"},{"location":"indicators/volatility/atr/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Volatility Analysis Example</li> </ul>"},{"location":"indicators/volatility/ht_trendline/","title":"HT_TRENDLINE (Hilbert Transform - Instantaneous Trendline)","text":""},{"location":"indicators/volatility/ht_trendline/#overview","title":"Overview","text":"<p>The Hilbert Transform - Instantaneous Trendline (HT_TRENDLINE) is an adaptive trendline indicator that automatically adjusts to the current market cycle. Unlike traditional moving averages with fixed periods, HT_TRENDLINE dynamically adapts to the dominant market cycle length, providing a trendline that responds appropriately to current market conditions. This results in less lag during trends and better responsiveness during cycle changes, making it superior to fixed-period moving averages for trend identification and following.</p>"},{"location":"indicators/volatility/ht_trendline/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>prices</code> Array Required Array of price values (typically close prices)"},{"location":"indicators/volatility/ht_trendline/#parameter-details","title":"Parameter Details","text":"<p>prices - Input data should be an array of closing prices - Minimum 32 data points required for reliable results (due to Hilbert Transform calculation requirements) - More data provides better accuracy and stability - Works best with at least 63+ data points for stable adaptive trendline - The indicator automatically detects the current market cycle and adapts the trendline smoothing accordingly</p>"},{"location":"indicators/volatility/ht_trendline/#usage","title":"Usage","text":""},{"location":"indicators/volatility/ht_trendline/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# Calculate adaptive trendline\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 45.61,\n          46.50, 47.20, 46.80, 47.50, 48.10, 48.30,\n          # ... more data points ...\n         ]\n\ntrendline = SQA::TAI.ht_trendline(prices)\n\n# Compare current price to adaptive trendline\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\n\nif current_price &gt; current_trendline\n  puts \"Price above trendline: UPTREND\"\n  puts \"Price: #{current_price.round(2)}\"\n  puts \"Trendline: #{current_trendline.round(2)}\"\nelse\n  puts \"Price below trendline: DOWNTREND\"\n  puts \"Price: #{current_price.round(2)}\"\n  puts \"Trendline: #{current_trendline.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#practical-application","title":"Practical Application","text":"<pre><code># Use trendline for trend following and crossover signals\ntrendline = SQA::TAI.ht_trendline(prices)\n\n# Detect crossovers\nif prices.size &gt;= 2 &amp;&amp; trendline.size &gt;= 2\n  prev_price = prices[-2]\n  prev_trendline = trendline[-2]\n\n  current_price = prices.last\n  current_trendline = trendline.last\n\n  # Bullish crossover: price crosses above trendline\n  if prev_price &lt;= prev_trendline &amp;&amp; current_price &gt; current_trendline\n    puts \"BULLISH CROSSOVER: Buy signal\"\n    puts \"Price crossed above adaptive trendline\"\n\n  # Bearish crossover: price crosses below trendline\n  elsif prev_price &gt;= prev_trendline &amp;&amp; current_price &lt; current_trendline\n    puts \"BEARISH CROSSOVER: Sell signal\"\n    puts \"Price crossed below adaptive trendline\"\n  end\nend\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/volatility/ht_trendline/#what-it-measures","title":"What It Measures","text":"<p>HT_TRENDLINE calculates an adaptive trendline that automatically adjusts its smoothing based on the current dominant market cycle. The trendline acts as a dynamic support/resistance level and trend direction indicator that:</p> <ul> <li>Follows trends with minimal lag</li> <li>Adapts to changing market cycle lengths</li> <li>Provides smoother trendline during longer cycles</li> <li>Becomes more responsive during shorter cycles</li> <li>Eliminates the need to manually adjust moving average periods</li> </ul> <p>The indicator answers the question: \"Where is the current trend center based on the market's natural rhythm?\"</p>"},{"location":"indicators/volatility/ht_trendline/#why-its-important","title":"Why It's Important","text":"<p>Traditional moving averages have a fundamental limitation: their fixed period may not match current market conditions:</p> <p>Problems with Fixed-Period MAs: - 20-period MA too slow during fast cycles (creates excessive lag) - 20-period MA too fast during slow cycles (generates false signals) - Constant parameter optimization required as market conditions change - Same period doesn't work well across different market regimes</p> <p>HT_TRENDLINE Solutions: - Automatically adapts to current cycle length (no optimization needed) - Reduces lag compared to traditional MAs of similar smoothness - Maintains effectiveness as market conditions change - Single indicator works across different market regimes - More reliable support/resistance levels</p> <p>By adapting to the market's natural cycle, HT_TRENDLINE provides a trendline that \"fits\" current conditions without manual adjustment.</p>"},{"location":"indicators/volatility/ht_trendline/#calculation-method","title":"Calculation Method","text":"<p>The Hilbert Transform uses digital signal processing to create an adaptive trendline:</p> <ol> <li>Detect Dominant Cycle: Apply Hilbert Transform to identify the current market cycle period</li> <li>Calculate Phase: Determine the instantaneous phase of the price cycle</li> <li>Adaptive Smoothing: Apply smoothing that adapts to the detected cycle length</li> <li>Generate Trendline: Produce an instantaneous trendline value that adjusts to cycle changes</li> <li>Output: Return adaptive trendline values that minimize lag while maintaining smoothness</li> </ol> <p>Key Concept: Think of it like a ship's autopilot that constantly adjusts to changing sea conditions. When waves (cycles) are short and choppy, it responds quickly. When waves are long and rolling, it makes smoother adjustments. The trendline automatically \"knows\" what kind of market cycle it's in and adjusts accordingly.</p>"},{"location":"indicators/volatility/ht_trendline/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Follows price, no fixed range</li> <li>Type: Adaptive trend-following indicator, dynamic support/resistance</li> <li>Lag: Lower lag than fixed-period MAs of comparable smoothness</li> <li>Best Used: Trend identification, crossover signals, support/resistance</li> <li>Adaptation: Automatically adjusts to market cycle changes</li> </ul>"},{"location":"indicators/volatility/ht_trendline/#interpretation","title":"Interpretation","text":""},{"location":"indicators/volatility/ht_trendline/#price-position-relative-to-trendline","title":"Price Position Relative to Trendline","text":"<p>Price Above Trendline (Bullish)</p> <p>Market characteristics: - Current uptrend in effect - Trendline acts as dynamic support - Buyers in control - Higher probability of continued upward movement - Pullbacks to trendline often provide buying opportunities</p> <p>What to do: - Look for long opportunities - Use trendline as support level for stop placement - Buy pullbacks to trendline - Hold long positions while price remains above trendline - Avoid short positions</p> <p>Price Below Trendline (Bearish)</p> <p>Market characteristics: - Current downtrend in effect - Trendline acts as dynamic resistance - Sellers in control - Higher probability of continued downward movement - Rallies to trendline often provide selling opportunities</p> <p>What to do: - Look for short opportunities - Use trendline as resistance level for stop placement - Sell rallies to trendline - Hold short positions while price remains below trendline - Avoid long positions</p>"},{"location":"indicators/volatility/ht_trendline/#crossover-signals","title":"Crossover Signals","text":"<p>Bullish Crossover (Price crosses above trendline)</p> <ul> <li>Potential trend change from down to up</li> <li>Buy signal</li> <li>Entry point for long positions</li> <li>Place stop loss below recent swing low</li> <li>Trendline becomes support going forward</li> </ul> <p>Bearish Crossover (Price crosses below trendline)</p> <ul> <li>Potential trend change from up to down</li> <li>Sell signal</li> <li>Exit point for long positions or short entry</li> <li>Place stop loss above recent swing high</li> <li>Trendline becomes resistance going forward</li> </ul>"},{"location":"indicators/volatility/ht_trendline/#trendline-slope-and-distance","title":"Trendline Slope and Distance","text":"<p>Steep Slope: - Strong trend - Rapid price movement - Higher volatility - Larger profit potential but also higher risk</p> <p>Gentle Slope: - Moderate trend - Steady price movement - Lower volatility - More sustainable trend</p> <p>Price Far from Trendline: - Overextended move - Potential for pullback to trendline - Profit-taking opportunity if already in position - Wait for better entry if considering new position</p> <p>Price Near Trendline: - Healthy trend with normal pullback - Good entry opportunity in direction of trend - Trendline testing support/resistance</p>"},{"location":"indicators/volatility/ht_trendline/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/volatility/ht_trendline/#crossover-trading-strategy","title":"Crossover Trading Strategy","text":"<p>Primary Use Case: Trend change and continuation signals</p> <pre><code># Calculate adaptive trendline\ntrendline = SQA::TAI.ht_trendline(prices)\n\n# Track current and previous positions\ncurrent_price = prices.last\nprev_price = prices[-2]\ncurrent_trendline = trendline.last\nprev_trendline = trendline[-2]\n\n# Calculate ATR for stops and targets\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\ncurrent_atr = atr.last\n\n# Detect crossovers\nbullish_cross = prev_price &lt;= prev_trendline &amp;&amp; current_price &gt; current_trendline\nbearish_cross = prev_price &gt;= prev_trendline &amp;&amp; current_price &lt; current_trendline\n\nif bullish_cross\n  entry = current_price\n  stop = entry - (2.0 * current_atr)\n  target = entry + (3.0 * current_atr)\n\n  puts \"BULLISH CROSSOVER SIGNAL\"\n  puts \"Entry: BUY at #{entry.round(2)}\"\n  puts \"Stop Loss: #{stop.round(2)} (below trendline)\"\n  puts \"Take Profit: #{target.round(2)} (3:1 R/R)\"\n  puts \"Trendline: #{current_trendline.round(2)} (now support)\"\n\nelsif bearish_cross\n  entry = current_price\n  stop = entry + (2.0 * current_atr)\n  target = entry - (3.0 * current_atr)\n\n  puts \"BEARISH CROSSOVER SIGNAL\"\n  puts \"Entry: SELL at #{entry.round(2)}\"\n  puts \"Stop Loss: #{stop.round(2)} (above trendline)\"\n  puts \"Take Profit: #{target.round(2)} (3:1 R/R)\"\n  puts \"Trendline: #{current_trendline.round(2)} (now resistance)\"\nend\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#trend-following-with-pullbacks","title":"Trend Following with Pullbacks","text":"<p>Use Case: Enter on pullbacks to trendline in established trend</p> <pre><code>trendline = SQA::TAI.ht_trendline(prices)\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\ncurrent_atr = atr.last\nlow_price = lows.last\nhigh_price = highs.last\n\n# Define pullback as price touching or approaching trendline\npullback_threshold = current_atr * 0.5\n\n# UPTREND: Buy pullbacks to trendline\nif current_price &gt; current_trendline\n  distance_to_trendline = low_price - current_trendline\n\n  if distance_to_trendline.abs &lt;= pullback_threshold\n    puts \"UPTREND PULLBACK BUY OPPORTUNITY\"\n    puts \"Price testing trendline support at #{current_trendline.round(2)}\"\n    puts \"Current price: #{current_price.round(2)}\"\n    puts \"Buy near: #{current_trendline.round(2)}\"\n    puts \"Stop: #{(current_trendline - current_atr).round(2)}\"\n    puts \"Target: #{(current_price + 3 * current_atr).round(2)}\"\n  end\n\n# DOWNTREND: Sell rallies to trendline\nelsif current_price &lt; current_trendline\n  distance_to_trendline = high_price - current_trendline\n\n  if distance_to_trendline.abs &lt;= pullback_threshold\n    puts \"DOWNTREND RALLY SELL OPPORTUNITY\"\n    puts \"Price testing trendline resistance at #{current_trendline.round(2)}\"\n    puts \"Current price: #{current_price.round(2)}\"\n    puts \"Sell near: #{current_trendline.round(2)}\"\n    puts \"Stop: #{(current_trendline + current_atr).round(2)}\"\n    puts \"Target: #{(current_price - 3 * current_atr).round(2)}\"\n  end\nend\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#dynamic-stop-loss-management","title":"Dynamic Stop Loss Management","text":"<p>Use Case: Trail stops using adaptive trendline</p> <pre><code># Position management example\ntrendline = SQA::TAI.ht_trendline(prices)\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\ncurrent_atr = atr.last\n\n# Assume we have a long position\nentry_price = 45.50  # example entry\nposition_type = :long\n\nif position_type == :long\n  # Trail stop below trendline\n  trailing_stop = current_trendline - (1.0 * current_atr)\n\n  puts \"LONG POSITION MANAGEMENT\"\n  puts \"Entry: #{entry_price}\"\n  puts \"Current Price: #{current_price.round(2)}\"\n  puts \"Trendline: #{current_trendline.round(2)}\"\n  puts \"Trailing Stop: #{trailing_stop.round(2)}\"\n  puts \"P/L: #{((current_price - entry_price) / entry_price * 100).round(2)}%\"\n\n  if current_price &lt; trailing_stop\n    puts \"STOP HIT - Exit long position\"\n    puts \"Price broke below trendline support\"\n  elsif current_price &lt; current_trendline\n    puts \"WARNING - Price below trendline (potential trend change)\"\n  else\n    puts \"HOLD - Price above trendline, trend intact\"\n  end\n\nelse  # short position\n  # Trail stop above trendline\n  trailing_stop = current_trendline + (1.0 * current_atr)\n\n  puts \"SHORT POSITION MANAGEMENT\"\n  puts \"Entry: #{entry_price}\"\n  puts \"Current Price: #{current_price.round(2)}\"\n  puts \"Trendline: #{current_trendline.round(2)}\"\n  puts \"Trailing Stop: #{trailing_stop.round(2)}\"\n  puts \"P/L: #{((entry_price - current_price) / entry_price * 100).round(2)}%\"\n\n  if current_price &gt; trailing_stop\n    puts \"STOP HIT - Exit short position\"\n    puts \"Price broke above trendline resistance\"\n  elsif current_price &gt; current_trendline\n    puts \"WARNING - Price above trendline (potential trend change)\"\n  else\n    puts \"HOLD - Price below trendline, downtrend intact\"\n  end\nend\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#best-practices","title":"Best Practices","text":""},{"location":"indicators/volatility/ht_trendline/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When HT_TRENDLINE works best: - Trend following: Primary use - identifying and following trends - Trending markets: More effective when clear trends exist - Medium to long-term trading: Daily to weekly charts - Dynamic support/resistance: Adaptive levels that adjust to market conditions - All asset classes: Stocks, forex, commodities, crypto - Crossover systems: Less whipsaw than fixed-period MA crossovers</p> <p>Less effective in: - Strongly ranging/sideways markets (use HT_TRENDMODE to detect) - Very short timeframes (&lt; 15 minute charts) - too much noise - Low-liquidity markets with erratic price movements - During major news events with sudden volatility spikes</p>"},{"location":"indicators/volatility/ht_trendline/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>With HT_TRENDMODE: <pre><code># Use HT_TRENDMODE to filter when to use trendline\nmode = SQA::TAI.ht_trendmode(prices)\ntrendline = SQA::TAI.ht_trendline(prices)\n\ncurrent_mode = mode.last\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\n\nif current_mode == 1\n  # TREND MODE: Trust trendline signals\n  puts \"Market in TREND MODE - HT_TRENDLINE reliable\"\n\n  if current_price &gt; current_trendline\n    puts \"Uptrend confirmed - follow long signals\"\n  else\n    puts \"Downtrend confirmed - follow short signals\"\n  end\n\nelse\n  # CYCLE MODE: Trendline less reliable, use oscillators instead\n  puts \"Market in CYCLE MODE - HT_TRENDLINE may whipsaw\"\n  puts \"Consider using oscillators (RSI, Stochastic) for mean-reversion instead\"\nend\n</code></pre></p> <p>With HT_DCPERIOD: <pre><code># Compare adaptive trendline to cycle-optimized moving average\ntrendline = SQA::TAI.ht_trendline(prices)\ncycle = SQA::TAI.ht_dcperiod(prices)\n\ncurrent_cycle = cycle.last.round\ncurrent_trendline = trendline.last\n\n# Create moving average based on detected cycle\ncycle_ma = SQA::TAI.sma(prices, period: current_cycle)\ncurrent_cycle_ma = cycle_ma.last\n\nputs \"Adaptive Trendline: #{current_trendline.round(2)}\"\nputs \"#{current_cycle}-period SMA: #{current_cycle_ma.round(2)}\"\nputs \"Difference: #{(current_trendline - current_cycle_ma).round(2)}\"\n\n# Both should be similar, confirming cycle-adaptive behavior\n</code></pre></p> <p>With Traditional Moving Averages: <pre><code># Compare adaptive trendline to fixed-period MAs\ntrendline = SQA::TAI.ht_trendline(prices)\nsma_20 = SQA::TAI.sma(prices, period: 20)\nema_20 = SQA::TAI.ema(prices, period: 20)\n\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\ncurrent_sma = sma_20.last\ncurrent_ema = ema_20.last\n\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"HT Trendline: #{current_trendline.round(2)} (adaptive)\"\nputs \"SMA(20): #{current_sma.round(2)} (fixed)\"\nputs \"EMA(20): #{current_ema.round(2)} (fixed)\"\nputs\n\n# Adaptive trendline often shows less lag\nputs \"Trendline lag: #{(current_price - current_trendline).round(2)}\"\nputs \"SMA lag: #{(current_price - current_sma).round(2)}\"\nputs \"EMA lag: #{(current_price - current_ema).round(2)}\"\n</code></pre></p> <p>With Volatility Indicators: <pre><code># Use ATR for stop placement relative to trendline\ntrendline = SQA::TAI.ht_trendline(prices)\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\nbb_upper, bb_middle, bb_lower = SQA::TAI.bbands(prices, period: 20)\n\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\ncurrent_atr = atr.last\n\n# Trendline with volatility-adjusted stops\nif current_price &gt; current_trendline\n  stop_loss = current_trendline - (1.5 * current_atr)\n  puts \"UPTREND: Trendline at #{current_trendline.round(2)}\"\n  puts \"Stop Loss: #{stop_loss.round(2)} (trendline - 1.5*ATR)\"\n\n  # Check if price overextended using Bollinger Bands\n  if current_price &gt; bb_upper.last\n    puts \"WARNING: Price above upper BB - overextended\"\n    puts \"Consider waiting for pullback to trendline\"\n  end\nend\n</code></pre></p> <p>With Oscillators: <pre><code># Use oscillators to time entries on pullbacks to trendline\ntrendline = SQA::TAI.ht_trendline(prices)\nrsi = SQA::TAI.rsi(prices, period: 14)\n\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\ncurrent_rsi = rsi.last\n\n# UPTREND: Look for oversold RSI near trendline support\nif current_price &gt; current_trendline\n  distance_pct = ((current_price - current_trendline) / current_price * 100).abs\n\n  if distance_pct &lt; 2 &amp;&amp; current_rsi &lt; 40\n    puts \"STRONG BUY SETUP\"\n    puts \"Uptrend + Pullback to trendline + Oversold RSI\"\n    puts \"Price near trendline: #{current_trendline.round(2)}\"\n    puts \"RSI: #{current_rsi.round(2)}\"\n  end\n\n# DOWNTREND: Look for overbought RSI near trendline resistance\nelsif current_price &lt; current_trendline\n  distance_pct = ((current_trendline - current_price) / current_price * 100).abs\n\n  if distance_pct &lt; 2 &amp;&amp; current_rsi &gt; 60\n    puts \"STRONG SELL SETUP\"\n    puts \"Downtrend + Rally to trendline + Overbought RSI\"\n    puts \"Price near trendline: #{current_trendline.round(2)}\"\n    puts \"RSI: #{current_rsi.round(2)}\"\n  end\nend\n</code></pre></p>"},{"location":"indicators/volatility/ht_trendline/#common-pitfalls","title":"Common Pitfalls","text":"<ol> <li>Insufficient Data</li> <li>Need minimum 32-63 bars for reliable trendline</li> <li>Initial values will be unstable or incorrect</li> <li>Always verify sufficient price history</li> <li> <p>Don't trade based on trendline with insufficient data</p> </li> <li> <p>Using in Ranging Markets</p> </li> <li>Adaptive trendline still generates whipsaws in tight ranges</li> <li>Check HT_TRENDMODE first (mode = 0 indicates ranging)</li> <li>In cycle mode, switch to oscillators instead</li> <li> <p>Not all markets are suitable for trend-following</p> </li> <li> <p>Ignoring Volatility</p> </li> <li>Trendline crossovers alone are insufficient</li> <li>Always use ATR or volatility measure for stops</li> <li>Wide stops in high volatility, tighter in low volatility</li> <li> <p>Distance from trendline should be volatility-adjusted</p> </li> <li> <p>Overtrading Crossovers</p> </li> <li>Not every crossover is a high-quality signal</li> <li>Require confirmation (volume, momentum, pattern)</li> <li>Avoid trading against higher timeframe trend</li> <li> <p>Wait for clear separation after crossover</p> </li> <li> <p>Fixed Stop Distance</p> </li> <li>Don't use fixed-point stops with adaptive trendline</li> <li>Stops should adapt to current volatility (ATR-based)</li> <li>Trail stops using trendline position</li> <li>Adjust stop distance based on market conditions</li> </ol>"},{"location":"indicators/volatility/ht_trendline/#strategy-guidelines","title":"Strategy Guidelines","text":"<p>For Day Trading: - Use HT_TRENDLINE on 15-minute to 1-hour charts - Trendline adapts to intraday cycles - Quick crossover signals for scalping and day trades - Combine with volume for confirmation - Use tight ATR-based stops</p> <p>For Swing Trading: - Use HT_TRENDLINE on daily charts (most effective) - Ideal timeframe for adaptive trendline - Hold positions while price remains on correct side - Trail stops below/above trendline - Multi-day to multi-week holding periods</p> <p>For Position Trading: - Use HT_TRENDLINE on weekly charts - Long-term trend identification - Major trend changes signaled by crossovers - Wide stops to avoid premature exits - Hold through normal volatility and pullbacks</p>"},{"location":"indicators/volatility/ht_trendline/#practical-example","title":"Practical Example","text":"<p>Complete trend-following system using adaptive trendline:</p> <pre><code>require 'sqa/tai'\n\n# Historical price data (need at least 63 bars)\nprices = [\n  # ... your price data ...\n]\nhighs = [...]\nlows = [...]\n\n# Calculate adaptive trendline and supporting indicators\ntrendline = SQA::TAI.ht_trendline(prices)\nmode = SQA::TAI.ht_trendmode(prices)\ncycle = SQA::TAI.ht_dcperiod(prices)\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\nrsi = SQA::TAI.rsi(prices, period: 14)\n\n# Current values\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\ncurrent_mode = mode.last\ncurrent_cycle = cycle.last.round\ncurrent_atr = atr.last\ncurrent_rsi = rsi.last\n\n# Previous values for crossover detection\nprev_price = prices[-2]\nprev_trendline = trendline[-2]\n\nputs \"=\" * 60\nputs \"HT_TRENDLINE ADAPTIVE TREND FOLLOWING SYSTEM\"\nputs \"=\" * 60\nputs\n\n# Market regime analysis\nputs \"MARKET ANALYSIS\"\nputs \"-\" * 60\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"Adaptive Trendline: #{current_trendline.round(2)}\"\nputs \"Market Mode: #{current_mode == 1 ? 'TREND' : 'CYCLE'}\"\nputs \"Dominant Cycle: #{current_cycle} periods\"\nputs \"ATR: #{current_atr.round(2)}\"\nputs \"RSI: #{current_rsi.round(2)}\"\nputs\n\n# Calculate trend characteristics\nprice_above_trendline = current_price &gt; current_trendline\ndistance_from_trendline = (current_price - current_trendline).abs\ndistance_pct = (distance_from_trendline / current_price * 100)\n\nputs \"TREND STATUS\"\nputs \"-\" * 60\nif price_above_trendline\n  puts \"Trend Direction: UPTREND\"\n  puts \"Trendline Support: #{current_trendline.round(2)}\"\nelse\n  puts \"Trend Direction: DOWNTREND\"\n  puts \"Trendline Resistance: #{current_trendline.round(2)}\"\nend\nputs \"Distance from Trendline: #{distance_from_trendline.round(2)} (#{distance_pct.round(2)}%)\"\nputs\n\n# Detect crossovers\nbullish_crossover = prev_price &lt;= prev_trendline &amp;&amp; current_price &gt; current_trendline\nbearish_crossover = prev_price &gt;= prev_trendline &amp;&amp; current_price &lt; current_trendline\n\n# Generate trading signals\nputs \"TRADING SIGNALS\"\nputs \"-\" * 60\n\n# Only trade in trend mode\nif current_mode == 1\n  puts \"Market Mode: TREND - Trendline signals ACTIVE\"\n  puts\n\n  # Bullish crossover signal\n  if bullish_crossover\n    entry = current_price\n    stop = current_trendline - (2.0 * current_atr)\n    target = current_price + (3.0 * current_atr)\n    risk = entry - stop\n    reward = target - entry\n    rr_ratio = reward / risk\n\n    puts \"BULLISH CROSSOVER DETECTED\"\n    puts \"=\" * 60\n    puts \"Signal: BUY (Long Entry)\"\n    puts\n    puts \"Entry Price: #{entry.round(2)}\"\n    puts \"Stop Loss: #{stop.round(2)} (below trendline - 2*ATR)\"\n    puts \"Take Profit: #{target.round(2)} (3*ATR target)\"\n    puts \"Risk: #{risk.round(2)}\"\n    puts \"Reward: #{reward.round(2)}\"\n    puts \"Risk/Reward: 1:#{rr_ratio.round(2)}\"\n    puts\n    puts \"Position Management:\"\n    puts \"- Trail stop to (trendline - 1*ATR) as trade progresses\"\n    puts \"- Exit if price closes below trendline\"\n    puts \"- Consider taking partial profits at 2*ATR\"\n    puts \"- Hold remainder for full target\"\n\n  # Bearish crossover signal\n  elsif bearish_crossover\n    entry = current_price\n    stop = current_trendline + (2.0 * current_atr)\n    target = current_price - (3.0 * current_atr)\n    risk = stop - entry\n    reward = entry - target\n    rr_ratio = reward / risk\n\n    puts \"BEARISH CROSSOVER DETECTED\"\n    puts \"=\" * 60\n    puts \"Signal: SELL (Short Entry or Exit Long)\"\n    puts\n    puts \"Entry Price: #{entry.round(2)}\"\n    puts \"Stop Loss: #{stop.round(2)} (above trendline + 2*ATR)\"\n    puts \"Take Profit: #{target.round(2)} (3*ATR target)\"\n    puts \"Risk: #{risk.round(2)}\"\n    puts \"Reward: #{reward.round(2)}\"\n    puts \"Risk/Reward: 1:#{rr_ratio.round(2)}\"\n    puts\n    puts \"Position Management:\"\n    puts \"- Trail stop to (trendline + 1*ATR) as trade progresses\"\n    puts \"- Exit if price closes above trendline\"\n    puts \"- Consider taking partial profits at 2*ATR\"\n    puts \"- Hold remainder for full target\"\n\n  # No crossover - check for pullback opportunities\n  else\n    puts \"No crossover detected - analyzing pullback opportunities\"\n    puts\n\n    # Uptrend pullback\n    if price_above_trendline\n      puts \"Current Uptrend: Look for pullback entries\"\n\n      # Check if near trendline\n      if distance_pct &lt; 2.0\n        puts\n        puts \"PULLBACK BUY OPPORTUNITY\"\n        puts \"Price near trendline support: #{current_trendline.round(2)}\"\n        puts \"Current price: #{current_price.round(2)}\"\n\n        # RSI confirmation\n        if current_rsi &lt; 50\n          puts \"RSI: #{current_rsi.round(2)} (oversold in uptrend)\"\n          puts \"STRONG BUY SETUP: Uptrend + Pullback + RSI confirmation\"\n          puts\n          puts \"Suggested Entry: #{current_price.round(2)}\"\n          puts \"Stop: #{(current_trendline - 1.5 * current_atr).round(2)}\"\n          puts \"Target: #{(current_price + 3 * current_atr).round(2)}\"\n        else\n          puts \"RSI: #{current_rsi.round(2)} (wait for deeper pullback)\"\n        end\n      else\n        puts \"Price #{distance_pct.round(2)}% above trendline\"\n        puts \"Wait for pullback closer to trendline support\"\n      end\n\n    # Downtrend rally\n    else\n      puts \"Current Downtrend: Look for rally sell opportunities\"\n\n      # Check if near trendline\n      if distance_pct &lt; 2.0\n        puts\n        puts \"RALLY SELL OPPORTUNITY\"\n        puts \"Price near trendline resistance: #{current_trendline.round(2)}\"\n        puts \"Current price: #{current_price.round(2)}\"\n\n        # RSI confirmation\n        if current_rsi &gt; 50\n          puts \"RSI: #{current_rsi.round(2)} (overbought in downtrend)\"\n          puts \"STRONG SELL SETUP: Downtrend + Rally + RSI confirmation\"\n          puts\n          puts \"Suggested Entry: #{current_price.round(2)}\"\n          puts \"Stop: #{(current_trendline + 1.5 * current_atr).round(2)}\"\n          puts \"Target: #{(current_price - 3 * current_atr).round(2)}\"\n        else\n          puts \"RSI: #{current_rsi.round(2)} (wait for stronger rally)\"\n        end\n      else\n        puts \"Price #{distance_pct.round(2)}% below trendline\"\n        puts \"Wait for rally closer to trendline resistance\"\n      end\n    end\n  end\n\nelse\n  # Cycle mode - trendline less reliable\n  puts \"Market Mode: CYCLE - Trendline signals DISABLED\"\n  puts\n  puts \"Market is ranging/cycling - not suitable for trend-following\"\n  puts \"Consider using oscillators for mean-reversion instead:\"\n  puts \"- RSI for overbought/oversold\"\n  puts \"- Stochastic for cycle timing\"\n  puts \"- Bollinger Bands for range boundaries\"\n  puts\n  puts \"Wait for HT_TRENDMODE to switch to 1 (TREND) before using trendline\"\nend\n\nputs\nputs \"=\" * 60\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/volatility/ht_trendline/#hilbert-transform-family","title":"Hilbert Transform Family","text":"<ul> <li>HT_TRENDMODE: Determines if market is trending or cycling - use as filter for HT_TRENDLINE</li> <li>HT_DCPERIOD: Identifies the dominant cycle period that HT_TRENDLINE adapts to</li> <li>HT_DCPHASE: Shows current phase within the cycle for timing entries</li> <li>HT_SINE: Generates sine wave signals based on cycle analysis</li> <li>HT_PHASOR: Provides in-phase and quadrature components for advanced analysis</li> </ul>"},{"location":"indicators/volatility/ht_trendline/#complementary-indicators","title":"Complementary Indicators","text":"<p>For Trend Confirmation: - ADX: Confirm trend strength when using trendline - MACD: Additional momentum confirmation - EMA: Compare adaptive vs fixed-period trendlines</p> <p>For Entry Timing: - RSI: Time pullback entries to trendline - STOCH: Identify oversold/overbought on pullbacks - CCI: Confirm extremes at trendline tests</p> <p>For Risk Management: - ATR: Volatility-based stop placement relative to trendline - BBANDS: Identify overextended moves from trendline - NATR: Normalized volatility for position sizing</p>"},{"location":"indicators/volatility/ht_trendline/#alternative-adaptive-indicators","title":"Alternative Adaptive Indicators","text":"<ul> <li>MAMA: MESA Adaptive Moving Average - another adaptive approach</li> <li>KAMA: Kaufman Adaptive Moving Average - efficiency-based adaptation</li> <li>T3: Tillson T3 - low-lag moving average (not adaptive but responsive)</li> </ul>"},{"location":"indicators/volatility/ht_trendline/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/volatility/ht_trendline/#comparing-adaptive-vs-fixed-trendlines","title":"Comparing Adaptive vs Fixed Trendlines","text":"<pre><code># Compare HT_TRENDLINE adaptation to traditional MAs\ntrendline = SQA::TAI.ht_trendline(prices)\nsma_10 = SQA::TAI.sma(prices, period: 10)\nsma_20 = SQA::TAI.sma(prices, period: 20)\nsma_30 = SQA::TAI.sma(prices, period: 30)\nema_20 = SQA::TAI.ema(prices, period: 20)\n\n# Analyze lag characteristics\nprices.each_with_index do |price, i|\n  next if i &lt; 30  # Skip initial unstable period\n\n  ht_lag = (price - trendline[i]).abs\n  sma10_lag = (price - sma_10[i]).abs\n  sma20_lag = (price - sma_20[i]).abs\n  sma30_lag = (price - sma_30[i]).abs\n  ema20_lag = (price - ema_20[i]).abs\n\n  puts \"Bar #{i}: Price=#{price.round(2)}\"\n  puts \"  HT Trendline lag: #{ht_lag.round(3)}\"\n  puts \"  SMA(10) lag: #{sma10_lag.round(3)}\"\n  puts \"  SMA(20) lag: #{sma20_lag.round(3)}\"\n  puts \"  SMA(30) lag: #{sma30_lag.round(3)}\"\n  puts \"  EMA(20) lag: #{ema20_lag.round(3)}\"\nend\n\n# HT_TRENDLINE typically shows:\n# - Less lag than SMA(20) with comparable smoothness\n# - More smoothness than SMA(10) with comparable responsiveness\n# - Automatic optimization without parameter adjustment\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#multi-timeframe-trendline-analysis","title":"Multi-Timeframe Trendline Analysis","text":"<pre><code># Align trendlines across timeframes for high-confidence signals\ndaily_prices = [...]    # Daily data\nhourly_prices = [...]   # Hourly data\n\ndaily_trendline = SQA::TAI.ht_trendline(daily_prices)\nhourly_trendline = SQA::TAI.ht_trendline(hourly_prices)\n\ndaily_price = daily_prices.last\nhourly_price = hourly_prices.last\ndaily_trend = daily_trendline.last\nhourly_trend = hourly_trendline.last\n\nputs \"Daily: #{daily_price &gt; daily_trend ? 'UPTREND' : 'DOWNTREND'}\"\nputs \"Hourly: #{hourly_price &gt; hourly_trend ? 'UPTREND' : 'DOWNTREND'}\"\n\n# Highest confidence when both aligned\nif daily_price &gt; daily_trend &amp;&amp; hourly_price &gt; hourly_trend\n  puts \"ALIGNED UPTREND - Highest confidence long signals\"\nelsif daily_price &lt; daily_trend &amp;&amp; hourly_price &lt; hourly_trend\n  puts \"ALIGNED DOWNTREND - Highest confidence short signals\"\nelse\n  puts \"MIXED SIGNALS - Use caution, possible consolidation\"\nend\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#trendline-as-dynamic-supportresistance","title":"Trendline as Dynamic Support/Resistance","text":"<pre><code># Track how price respects trendline as support/resistance\ntrendline = SQA::TAI.ht_trendline(prices)\ntouches = 0\nbounces = 0\n\nprices.each_with_index do |price, i|\n  next if i &lt; 63  # Skip initial period\n\n  trend_val = trendline[i]\n  prev_trend = trendline[i-1]\n\n  # Calculate distance from trendline as percentage\n  distance_pct = ((price - trend_val) / price * 100).abs\n\n  # Count touches (within 1% of trendline)\n  if distance_pct &lt; 1.0\n    touches += 1\n\n    # Check if price bounced (moved away from trendline)\n    if i &lt; prices.size - 1\n      next_distance = ((prices[i+1] - trendline[i+1]) / prices[i+1] * 100).abs\n      if next_distance &gt; distance_pct\n        bounces += 1\n      end\n    end\n  end\nend\n\nbounce_rate = touches &gt; 0 ? (bounces.to_f / touches * 100) : 0\nputs \"Trendline touches: #{touches}\"\nputs \"Successful bounces: #{bounces}\"\nputs \"Bounce rate: #{bounce_rate.round(2)}%\"\nputs \"Trendline reliability: #{bounce_rate &gt; 60 ? 'HIGH' : 'MODERATE'}\"\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#volatility-adjusted-trendline-channels","title":"Volatility-Adjusted Trendline Channels","text":"<pre><code># Create channel around adaptive trendline using ATR\ntrendline = SQA::TAI.ht_trendline(prices)\natr = SQA::TAI.atr(highs, lows, prices, period: 14)\n\n# Create upper and lower channel bands\nchannel_width = 2.0  # ATR multiplier\n\nupper_channel = trendline.zip(atr).map { |t, a| t + (channel_width * a) }\nlower_channel = trendline.zip(atr).map { |t, a| t - (channel_width * a) }\n\ncurrent_price = prices.last\ncurrent_trendline = trendline.last\ncurrent_upper = upper_channel.last\ncurrent_lower = lower_channel.last\n\nputs \"Adaptive Trendline Channel\"\nputs \"Upper Band: #{current_upper.round(2)}\"\nputs \"Trendline: #{current_trendline.round(2)}\"\nputs \"Lower Band: #{current_lower.round(2)}\"\nputs \"Current Price: #{current_price.round(2)}\"\nputs\n\n# Price position in channel\nif current_price &gt; current_upper\n  puts \"Price ABOVE channel - overextended uptrend\"\n  puts \"Consider taking profits or waiting for pullback\"\nelsif current_price &lt; current_lower\n  puts \"Price BELOW channel - overextended downtrend\"\n  puts \"Consider taking profits or waiting for bounce\"\nelsif current_price &gt; current_trendline\n  puts \"Price in UPPER half of uptrend channel\"\n  puts \"Healthy uptrend, but approaching resistance\"\nelse\n  puts \"Price in LOWER half of downtrend channel\"\n  puts \"Healthy downtrend, but approaching support\"\nend\n</code></pre>"},{"location":"indicators/volatility/ht_trendline/#references","title":"References","text":"<ul> <li>\"Rocket Science for Traders\" by John F. Ehlers - Comprehensive coverage of Hilbert Transform and adaptive indicators</li> <li>\"Cybernetic Analysis for Stocks and Futures\" by John F. Ehlers - Advanced applications including instantaneous trendline</li> <li>\"Cycle Analytics for Traders\" by John F. Ehlers - Detailed explanation of cycle-adaptive techniques</li> <li>Original Research: John F. Ehlers pioneered the application of Hilbert Transform to create adaptive trendlines</li> <li>TA-Lib Documentation: HT_TRENDLINE Function</li> </ul>"},{"location":"indicators/volatility/ht_trendline/#see-also","title":"See Also","text":"<ul> <li>Volatility Indicators Overview</li> <li>Hilbert Transform Indicators Family</li> <li>Adaptive Indicators Guide</li> <li>Trend Following Strategies</li> <li>API Reference</li> </ul>"},{"location":"indicators/volatility/keltner/","title":"Keltner Channels","text":"<p>Note: Keltner Channels are not a standard TA-Lib indicator and are not currently available in SQA::TAI. This page is provided for reference purposes as Keltner Channels are commonly used alongside other technical indicators like Bollinger Bands.</p>"},{"location":"indicators/volatility/keltner/#overview","title":"Overview","text":"<p>Keltner Channels are volatility-based envelopes set above and below an exponential moving average (EMA). Unlike Bollinger Bands which use standard deviation, Keltner Channels use Average True Range (ATR) to set channel distance, making them smoother and more adaptive to actual market volatility.</p>"},{"location":"indicators/volatility/keltner/#what-are-keltner-channels","title":"What are Keltner Channels?","text":"<p>Developed by Chester Keltner in the 1960s and refined by Linda Bradford Raschke in the 1980s, Keltner Channels consist of three lines: - Middle Line: 20-period EMA of typical price - Upper Channel: EMA + (2 \u00d7 ATR) - Lower Channel: EMA - (2 \u00d7 ATR)</p>"},{"location":"indicators/volatility/keltner/#formula","title":"Formula","text":"<pre><code>Typical Price = (High + Low + Close) / 3\nMiddle Line = EMA(Typical Price, 20)\nUpper Channel = Middle Line + (Multiplier \u00d7 ATR(14))\nLower Channel = Middle Line - (Multiplier \u00d7 ATR(14))\n\nDefault Multiplier = 2\n</code></pre>"},{"location":"indicators/volatility/keltner/#typical-usage","title":"Typical Usage","text":"<p>If Keltner Channels were available, they would be used like this:</p> <pre><code># Hypothetical usage (NOT currently available in SQA::TAI)\nrequire 'sqa/tai'\n\n# Note: This functionality is not implemented\n# upper, middle, lower = SQA::TAI.keltner_channels(high, low, close,\n#                                                    ema_period: 20,\n#                                                    atr_period: 14,\n#                                                    multiplier: 2)\n\n# Manual calculation approach using available SQA::TAI indicators:\ntypical_price = SQA::TAI.typprice(high, low, close)\nmiddle_line = SQA::TAI.ema(typical_price, period: 20)\natr = SQA::TAI.atr(high, low, close, period: 14)\n\nmultiplier = 2.0\nupper_channel = middle_line.zip(atr).map { |m, a| m + (multiplier * a) }\nlower_channel = middle_line.zip(atr).map { |m, a| m - (multiplier * a) }\n\nputs \"Keltner Channels:\"\nputs \"Upper: $#{upper_channel.last.round(2)}\"\nputs \"Middle: $#{middle_line.last.round(2)}\"\nputs \"Lower: $#{lower_channel.last.round(2)}\"\nputs \"Price: $#{close.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/keltner/#interpretation","title":"Interpretation","text":""},{"location":"indicators/volatility/keltner/#price-position","title":"Price Position","text":"<ul> <li>Price &gt; Upper Channel: Overbought condition</li> <li>Strong uptrend</li> <li>Potential exhaustion</li> <li> <p>Consider taking profits</p> </li> <li> <p>Price &lt; Lower Channel: Oversold condition</p> </li> <li>Strong downtrend</li> <li>Potential reversal</li> <li> <p>Look for buying opportunities</p> </li> <li> <p>Price within Channels: Normal trading range</p> </li> <li>Market in equilibrium</li> <li>Wait for breakout</li> <li>Use for mean reversion</li> </ul>"},{"location":"indicators/volatility/keltner/#channel-width","title":"Channel Width","text":"<ul> <li>Widening Channels: Increasing volatility</li> <li>Strong trends forming</li> <li>Breakout opportunities</li> <li> <p>Use wider stops</p> </li> <li> <p>Narrowing Channels: Decreasing volatility</p> </li> <li>Consolidation phase</li> <li>Breakout imminent</li> <li>Tighten stops</li> </ul>"},{"location":"indicators/volatility/keltner/#keltner-channels-vs-bollinger-bands","title":"Keltner Channels vs Bollinger Bands","text":"Feature Keltner Channels Bollinger Bands Calculation ATR-based Standard deviation Smoothness Smoother More reactive Volatility Measure Actual price range Statistical volatility False Signals Fewer More Trend Following Better Good Mean Reversion Good Better"},{"location":"indicators/volatility/keltner/#when-to-use-each","title":"When to Use Each","text":"<p>Use Keltner Channels when: - You want cleaner signals - Trading trending markets - Need consistent channel width - Following price action</p> <p>Use Bollinger Bands when: - You want more responsive signals - Trading ranging markets - Need volatility-based analysis - Looking for squeeze patterns</p>"},{"location":"indicators/volatility/keltner/#common-trading-strategies","title":"Common Trading Strategies","text":""},{"location":"indicators/volatility/keltner/#1-trend-following-strategy","title":"1. Trend Following Strategy","text":"<pre><code># Manual Keltner Channel calculation\ntypical = SQA::TAI.typprice(high, low, close)\nmiddle = SQA::TAI.ema(typical, period: 20)\natr = SQA::TAI.atr(high, low, close, period: 14)\n\nmultiplier = 2.0\nupper = middle.zip(atr).map { |m, a| m + (multiplier * a) }\nlower = middle.zip(atr).map { |m, a| m - (multiplier * a) }\n\n# Trend following rules\nif close.last &gt; upper.last\n  puts \"STRONG UPTREND - Hold longs or add on pullbacks\"\nelsif close.last &lt; lower.last\n  puts \"STRONG DOWNTREND - Hold shorts or add on rallies\"\nelse\n  puts \"NEUTRAL - Wait for trend signal\"\nend\n</code></pre>"},{"location":"indicators/volatility/keltner/#2-breakout-strategy","title":"2. Breakout Strategy","text":"<pre><code># Detect channel breakouts\ntypical = SQA::TAI.typprice(high, low, close)\nmiddle = SQA::TAI.ema(typical, period: 20)\natr = SQA::TAI.atr(high, low, close, period: 14)\n\nupper = middle.zip(atr).map { |m, a| m + (2.0 * a) }\nlower = middle.zip(atr).map { |m, a| m - (2.0 * a) }\n\n# Previous vs current position\nprev_above_upper = close[-2] &gt; upper[-2]\ncurr_above_upper = close.last &gt; upper.last\n\nprev_below_lower = close[-2] &lt; lower[-2]\ncurr_below_lower = close.last &lt; lower.last\n\nif !prev_above_upper &amp;&amp; curr_above_upper\n  puts \"BREAKOUT ABOVE - Enter LONG\"\n  puts \"Stop: Below middle line at $#{middle.last.round(2)}\"\nelsif !prev_below_lower &amp;&amp; curr_below_lower\n  puts \"BREAKOUT BELOW - Enter SHORT\"\n  puts \"Stop: Above middle line at $#{middle.last.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/volatility/keltner/#3-mean-reversion-strategy","title":"3. Mean Reversion Strategy","text":"<pre><code># Buy oversold, sell overbought within channels\ntypical = SQA::TAI.typprice(high, low, close)\nmiddle = SQA::TAI.ema(typical, period: 20)\natr = SQA::TAI.atr(high, low, close, period: 14)\nrsi = SQA::TAI.rsi(close, period: 14)\n\nupper = middle.zip(atr).map { |m, a| m + (2.0 * a) }\nlower = middle.zip(atr).map { |m, a| m - (2.0 * a) }\n\n# Mean reversion at extremes\nif close.last &lt; lower.last &amp;&amp; rsi.last &lt; 30\n  puts \"OVERSOLD at lower channel - BUY signal\"\n  puts \"Target: Middle line at $#{middle.last.round(2)}\"\nelsif close.last &gt; upper.last &amp;&amp; rsi.last &gt; 70\n  puts \"OVERBOUGHT at upper channel - SELL signal\"\n  puts \"Target: Middle line at $#{middle.last.round(2)}\"\nend\n</code></pre>"},{"location":"indicators/volatility/keltner/#4-squeeze-strategy","title":"4. Squeeze Strategy","text":"<pre><code># Detect volatility squeeze (narrow channels)\ntypical = SQA::TAI.typprice(high, low, close)\nmiddle = SQA::TAI.ema(typical, period: 20)\natr = SQA::TAI.atr(high, low, close, period: 14)\n\nupper = middle.zip(atr).map { |m, a| m + (2.0 * a) }\nlower = middle.zip(atr).map { |m, a| m - (2.0 * a) }\n\n# Calculate channel width\nchannel_width = upper.zip(lower).map { |u, l| u - l }\navg_width = channel_width[-20..-1].sum / 20.0\n\ncurrent_width = channel_width.last\nwidth_ratio = current_width / avg_width\n\nputs \"Channel Width Analysis:\"\nputs \"Current: $#{current_width.round(2)}\"\nputs \"Average: $#{avg_width.round(2)}\"\nputs \"Ratio: #{width_ratio.round(2)}x\"\n\nif width_ratio &lt; 0.7\n  puts \"\\nSQUEEZE DETECTED - Low volatility\"\n  puts \"Expect breakout soon\"\n  puts \"Prepare for large move\"\nelsif width_ratio &gt; 1.3\n  puts \"\\nEXPANSION - High volatility\"\n  puts \"Strong trend in progress\"\n  puts \"Trail stops, ride the trend\"\nend\n</code></pre>"},{"location":"indicators/volatility/keltner/#complete-keltner-channel-calculator","title":"Complete Keltner Channel Calculator","text":"<p>Here's a full Ruby implementation:</p> <pre><code>class KeltnerChannels\n  attr_reader :upper, :middle, :lower\n\n  def initialize(high, low, close, ema_period: 20, atr_period: 14, multiplier: 2.0)\n    @high = high\n    @low = low\n    @close = close\n    @ema_period = ema_period\n    @atr_period = atr_period\n    @multiplier = multiplier\n\n    calculate\n  end\n\n  def calculate\n    # Use SQA::TAI for calculations\n    typical = SQA::TAI.typprice(@high, @low, @close)\n    @middle = SQA::TAI.ema(typical, period: @ema_period)\n    atr = SQA::TAI.atr(@high, @low, @close, period: @atr_period)\n\n    # Calculate channels\n    @upper = @middle.zip(atr).map { |m, a| m + (@multiplier * a) }\n    @lower = @middle.zip(atr).map { |m, a| m - (@multiplier * a) }\n  end\n\n  def current_position\n    price = @close.last\n\n    if price &gt; @upper.last\n      :above_upper\n    elsif price &lt; @lower.last\n      :below_lower\n    else\n      :inside_channels\n    end\n  end\n\n  def channel_width\n    @upper.zip(@lower).map { |u, l| u - l }\n  end\n\n  def width_percentile(lookback = 100)\n    widths = channel_width[-lookback..-1]\n    current = widths.last\n    rank = widths.count { |w| w &lt;= current }\n    (rank.to_f / widths.length * 100).round(2)\n  end\n\n  def trading_signal\n    position = current_position\n    rsi = SQA::TAI.rsi(@close, period: 14)\n\n    case position\n    when :above_upper\n      if rsi.last &gt; 70\n        { signal: :overbought, action: :sell, strength: :strong }\n      else\n        { signal: :uptrend, action: :hold_long, strength: :moderate }\n      end\n    when :below_lower\n      if rsi.last &lt; 30\n        { signal: :oversold, action: :buy, strength: :strong }\n      else\n        { signal: :downtrend, action: :hold_short, strength: :moderate }\n      end\n    else\n      { signal: :neutral, action: :wait, strength: :weak }\n    end\n  end\n\n  def to_s\n    &lt;&lt;~INFO\n      Keltner Channels (EMA: #{@ema_period}, ATR: #{@atr_period}, Mult: #{@multiplier})\n      Upper:  $#{@upper.last.round(2)}\n      Middle: $#{@middle.last.round(2)}\n      Lower:  $#{@lower.last.round(2)}\n      Price:  $#{@close.last.round(2)}\n      Position: #{current_position}\n      Width Percentile: #{width_percentile}%\n    INFO\n  end\nend\n\n# Usage Example\nrequire 'sqa/tai'\n\nhigh = [100, 102, 104, 103, 105, 107, 106, 108, 110, 109]\nlow = [98, 100, 102, 101, 103, 105, 104, 106, 108, 107]\nclose = [99, 101, 103, 102, 104, 106, 105, 107, 109, 108]\n\nkc = KeltnerChannels.new(high, low, close)\nputs kc.to_s\n\nsignal = kc.trading_signal\nputs \"\\nTrading Signal:\"\nputs \"  Action: #{signal[:action]}\"\nputs \"  Strength: #{signal[:strength]}\"\nputs \"  Reason: #{signal[:signal]}\"\n</code></pre>"},{"location":"indicators/volatility/keltner/#advanced-applications","title":"Advanced Applications","text":""},{"location":"indicators/volatility/keltner/#multi-timeframe-keltner-channels","title":"Multi-Timeframe Keltner Channels","text":"<pre><code># Daily channels for trend\ndaily_kc = KeltnerChannels.new(daily_high, daily_low, daily_close)\n\n# Hourly channels for entries\nhourly_kc = KeltnerChannels.new(hourly_high, hourly_low, hourly_close)\n\n# Trade with both aligned\nif daily_kc.current_position == :above_upper &amp;&amp;\n   hourly_kc.current_position == :above_upper\n  puts \"Strong uptrend across timeframes\"\nend\n</code></pre>"},{"location":"indicators/volatility/keltner/#keltner-channel-squeeze","title":"Keltner Channel Squeeze","text":"<pre><code># Compare Keltner width to Bollinger Band width\nkc = KeltnerChannels.new(high, low, close)\nbb_upper, bb_middle, bb_lower = SQA::TAI.bbands(close, period: 20)\n\nkc_width = kc.channel_width.last\nbb_width = bb_upper.last - bb_lower.last\n\nif bb_width &lt; kc_width * 0.8\n  puts \"BOLLINGER SQUEEZE inside Keltner\"\n  puts \"Volatility compression - big move coming\"\nend\n</code></pre>"},{"location":"indicators/volatility/keltner/#best-practices","title":"Best Practices","text":""},{"location":"indicators/volatility/keltner/#1-parameter-selection","title":"1. Parameter Selection","text":"<ul> <li>Trending Markets: Use EMA 20, ATR 14, Multiplier 2.0 (standard)</li> <li>Volatile Markets: Increase multiplier to 2.5 or 3.0</li> <li>Choppy Markets: Decrease multiplier to 1.5</li> </ul>"},{"location":"indicators/volatility/keltner/#2-combine-with-trend-indicators","title":"2. Combine with Trend Indicators","text":"<pre><code># Use with EMA for trend confirmation\nema_50 = SQA::TAI.ema(close, period: 50)\nkc = KeltnerChannels.new(high, low, close)\n\n# Only take signals aligned with larger trend\nif close.last &gt; ema_50.last &amp;&amp; kc.current_position == :above_upper\n  puts \"Confirmed strong uptrend\"\nend\n</code></pre>"},{"location":"indicators/volatility/keltner/#3-volume-confirmation","title":"3. Volume Confirmation","text":"<pre><code># Breakouts should have volume support\nobv = SQA::TAI.obv(close, volume)\n\nif close.last &gt; kc.upper.last &amp;&amp; obv.last &gt; obv[-5]\n  puts \"Volume-confirmed breakout\"\nend\n</code></pre>"},{"location":"indicators/volatility/keltner/#see-also","title":"See Also","text":""},{"location":"indicators/volatility/keltner/#similar-volatility-indicators","title":"Similar Volatility Indicators","text":"<ul> <li>Bollinger Bands (BBANDS) - Standard deviation based bands</li> <li>Average True Range (ATR) - Volatility measurement used in Keltner</li> <li>MESA Adaptive Moving Average (MAMA) - Adaptive moving average</li> <li>Overlap Studies - Moving averages and bands</li> </ul>"},{"location":"indicators/volatility/keltner/#recommended-combinations","title":"Recommended Combinations","text":"<ul> <li>RSI - Confirm overbought/oversold</li> <li>MACD - Trend direction and momentum</li> <li>Volume Indicators - Validate breakouts</li> <li>EMA - Trend filter</li> </ul>"},{"location":"indicators/volatility/keltner/#resources","title":"Resources","text":"<ul> <li>Investopedia: Keltner Channels</li> <li>Bollinger Bands Comparison</li> <li>ATR Indicator</li> </ul> <p>Implementation Status: Not available in current TA-Lib/SQA::TAI version. Use manual calculation with ATR, EMA, and Typical Price.</p>"},{"location":"indicators/volatility/mama/","title":"MAMA (MESA Adaptive Moving Average)","text":"<p>The MESA Adaptive Moving Average (MAMA) is a sophisticated adaptive moving average developed by John F. Ehlers that automatically adjusts its period based on market phase measurements using MESA (Maximum Entropy Spectral Analysis). Unlike traditional moving averages with fixed periods, MAMA dynamically adapts to changing market conditions, providing faster response during trending markets and smoother behavior during ranging markets.</p>"},{"location":"indicators/volatility/mama/#formula","title":"Formula","text":"<p>MAMA uses phase rate of change to adjust its smoothing constant dynamically:</p> <ol> <li>Calculate Phase Rate of Change using Hilbert Transform</li> <li>Compute adaptive alpha from phase: alpha = fastlimit / (phase_rate + epsilon)</li> <li>Constrain alpha between slowlimit and fastlimit</li> <li>Apply: MAMA = alpha * Price + (1 - alpha) * MAMA_prev</li> <li>FAMA (Following Adaptive MA) uses MAMA as input with further smoothing</li> </ol> <p>The algorithm continuously measures the market's dominant cycle and adjusts the effective period between the fast and slow limits.</p>"},{"location":"indicators/volatility/mama/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values (typically close prices) <code>fast_limit</code> Float No 0.5 Upper limit for adaptation speed (0.01 to 0.99) <code>slow_limit</code> Float No 0.05 Lower limit for adaptation speed (0.01 to 0.99)"},{"location":"indicators/volatility/mama/#parameter-details","title":"Parameter Details","text":"<p>fast_limit - Controls maximum responsiveness during strong trends - Higher values (0.5-0.9) make MAMA more responsive but noisier - Lower values (0.3-0.5) provide smoother trending signals - Default 0.5 provides balanced adaptation</p> <p>slow_limit - Controls minimum responsiveness during ranging markets - Higher values (0.1-0.2) maintain some responsiveness in ranges - Lower values (0.01-0.05) provide maximum smoothing in choppy markets - Default 0.05 filters most noise in sideways markets</p>"},{"location":"indicators/volatility/mama/#returns","title":"Returns","text":"<p>Returns a two-element array containing: 1. MAMA line - The adaptive moving average 2. FAMA line - Following Adaptive Moving Average (smoothed MAMA)</p> <p>Both arrays will have initial <code>nil</code> values while calculations stabilize (typically first 32+ data points).</p>"},{"location":"indicators/volatility/mama/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70,\n          48.85, 49.00, 49.15, 49.30, 49.45, 49.60]\n\n# Calculate MAMA with default parameters\nmama, fama = SQA::TAI.mama(prices)\n\n# More responsive for short-term trading\nmama_fast, fama_fast = SQA::TAI.mama(prices, fast_limit: 0.8, slow_limit: 0.1)\n\n# Smoother for longer-term trends\nmama_smooth, fama_smooth = SQA::TAI.mama(prices, fast_limit: 0.4, slow_limit: 0.02)\n\nputs \"MAMA: #{mama.last.round(2)}\"\nputs \"FAMA: #{fama.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/mama/#interpretation","title":"Interpretation","text":"<p>MAMA's adaptive nature makes it superior to fixed-period moving averages in volatile or changing markets:</p>"},{"location":"indicators/volatility/mama/#signal-types","title":"Signal Types","text":"<ul> <li>MAMA crosses above FAMA: Bullish signal - potential buy</li> <li>MAMA crosses below FAMA: Bearish signal - potential sell</li> <li>Price above both MAMA and FAMA: Strong uptrend</li> <li>Price below both MAMA and FAMA: Strong downtrend</li> <li>MAMA slope: Indicates trend strength and direction</li> <li>MAMA/FAMA spread: Wider spread suggests stronger trend momentum</li> </ul>"},{"location":"indicators/volatility/mama/#adaptive-behavior","title":"Adaptive Behavior","text":"<ul> <li>Trending Markets: MAMA automatically shortens its effective period, reducing lag</li> <li>Ranging Markets: MAMA lengthens its effective period, filtering whipsaws</li> <li>Transition Periods: Smoothly adjusts between market phases</li> <li>Less Lag: Responds faster than fixed-period MAs in trend changes</li> </ul>"},{"location":"indicators/volatility/mama/#example-mamafama-crossover-trading","title":"Example: MAMA/FAMA Crossover Trading","text":"<pre><code>prices = load_historical_prices('AAPL')\nmama, fama = SQA::TAI.mama(prices, fast_limit: 0.5, slow_limit: 0.05)\n\n# Current and previous values\ncurr_mama = mama.last\nprev_mama = mama[-2]\ncurr_fama = fama.last\nprev_fama = fama[-2]\ncurrent_price = prices.last\n\n# Detect crossovers\nif prev_mama &lt;= prev_fama &amp;&amp; curr_mama &gt; curr_fama\n  puts \"BULLISH CROSSOVER: MAMA crossed above FAMA\"\n  puts \"Signal: BUY\"\n  puts \"Entry price: #{current_price.round(2)}\"\nelsif prev_mama &gt;= prev_fama &amp;&amp; curr_mama &lt; curr_fama\n  puts \"BEARISH CROSSOVER: MAMA crossed below FAMA\"\n  puts \"Signal: SELL/SHORT\"\n  puts \"Entry price: #{current_price.round(2)}\"\nend\n\n# Check trend strength\nspread = ((curr_mama - curr_fama).abs / curr_mama * 100).round(2)\nputs \"MAMA/FAMA spread: #{spread}%\"\n\nif spread &gt; 1.0\n  puts \"Strong trend momentum\"\nelsif spread &lt; 0.3\n  puts \"Weak trend - potential ranging market\"\nend\n</code></pre>"},{"location":"indicators/volatility/mama/#example-adaptive-support-and-resistance","title":"Example: Adaptive Support and Resistance","text":"<pre><code>prices = load_historical_prices('TSLA')\nmama, fama = SQA::TAI.mama(prices)\n\ncurrent_price = prices.last\nmama_value = mama.last\nfama_value = fama.last\n\n# MAMA acts as dynamic support in uptrends\nif current_price &gt; mama_value &amp;&amp; mama_value &gt; fama_value\n  distance_to_mama = ((current_price - mama_value) / current_price * 100).round(2)\n\n  puts \"UPTREND: Price above MAMA\"\n  puts \"MAMA acting as dynamic support at #{mama_value.round(2)}\"\n  puts \"Distance to support: #{distance_to_mama}%\"\n\n  if distance_to_mama &lt; 1.0\n    puts \"Price near MAMA support - potential bounce point\"\n  elsif distance_to_mama &gt; 5.0\n    puts \"Price extended above MAMA - possible pullback\"\n  end\nend\n\n# MAMA acts as dynamic resistance in downtrends\nif current_price &lt; mama_value &amp;&amp; mama_value &lt; fama_value\n  distance_to_mama = ((mama_value - current_price) / current_price * 100).round(2)\n\n  puts \"DOWNTREND: Price below MAMA\"\n  puts \"MAMA acting as dynamic resistance at #{mama_value.round(2)}\"\n  puts \"Distance to resistance: #{distance_to_mama}%\"\n\n  if distance_to_mama &lt; 1.0\n    puts \"Price near MAMA resistance - potential rejection point\"\n  end\nend\n</code></pre>"},{"location":"indicators/volatility/mama/#example-trend-confirmation-system","title":"Example: Trend Confirmation System","text":"<pre><code>prices = load_historical_prices('SPY')\nmama, fama = SQA::TAI.mama(prices)\n\ncurrent_price = prices.last\nmama_curr = mama.last\nmama_prev = mama[-5]  # 5 periods ago\nfama_curr = fama.last\nfama_prev = fama[-5]\n\n# Calculate slopes\nmama_slope = mama_curr - mama_prev\nfama_slope = fama_curr - fama_prev\n\n# Trend strength analysis\nmama_rising = mama_slope &gt; 0\nfama_rising = fama_slope &gt; 0\nprice_above_mama = current_price &gt; mama_curr\nprice_above_fama = current_price &gt; fama_curr\n\nputs &lt;&lt;~TREND_ANALYSIS\n  === MAMA Trend Analysis ===\n  Current Price: #{current_price.round(2)}\n  MAMA: #{mama_curr.round(2)} (#{mama_rising ? 'Rising' : 'Falling'})\n  FAMA: #{fama_curr.round(2)} (#{fama_rising ? 'Rising' : 'Falling'})\nTREND_ANALYSIS\n\nif mama_rising &amp;&amp; fama_rising &amp;&amp; price_above_mama &amp;&amp; price_above_fama\n  puts \"\\nSTRONG UPTREND CONFIRMED\"\n  puts \"- Both MAMA and FAMA rising\"\n  puts \"- Price above both adaptive MAs\"\n  puts \"- High probability continuation\"\nelsif !mama_rising &amp;&amp; !fama_rising &amp;&amp; !price_above_mama &amp;&amp; !price_above_fama\n  puts \"\\nSTRONG DOWNTREND CONFIRMED\"\n  puts \"- Both MAMA and FAMA falling\"\n  puts \"- Price below both adaptive MAs\"\n  puts \"- High probability continuation\"\nelsif mama_rising &amp;&amp; !fama_rising\n  puts \"\\nEARLY TREND CHANGE - Potential reversal forming\"\n  puts \"- MAMA turning before FAMA\"\n  puts \"- Watch for FAMA confirmation\"\nelse\n  puts \"\\nCONSOLIDATION/TRANSITION - No clear trend\"\n  puts \"- Mixed signals between MAMA and FAMA\"\n  puts \"- Wait for clearer alignment\"\nend\n</code></pre>"},{"location":"indicators/volatility/mama/#example-multi-parameter-comparison","title":"Example: Multi-Parameter Comparison","text":"<pre><code>prices = load_historical_prices('NVDA')\n\n# Fast adaptation - responsive to quick changes\nmama_fast, fama_fast = SQA::TAI.mama(prices, fast_limit: 0.8, slow_limit: 0.1)\n\n# Standard adaptation - balanced approach\nmama_std, fama_std = SQA::TAI.mama(prices, fast_limit: 0.5, slow_limit: 0.05)\n\n# Slow adaptation - smooth trending\nmama_slow, fama_slow = SQA::TAI.mama(prices, fast_limit: 0.3, slow_limit: 0.02)\n\ncurrent_price = prices.last\n\nputs &lt;&lt;~COMPARISON\n  === MAMA Parameter Comparison ===\n  Current Price: #{current_price.round(2)}\n\n  Fast MAMA (0.8/0.1): #{mama_fast.last.round(2)}\n  Standard MAMA (0.5/0.05): #{mama_std.last.round(2)}\n  Slow MAMA (0.3/0.02): #{mama_slow.last.round(2)}\nCOMPARISON\n\n# Check agreement across timeframes\nfast_above = current_price &gt; mama_fast.last\nstd_above = current_price &gt; mama_std.last\nslow_above = current_price &gt; mama_slow.last\n\nif fast_above &amp;&amp; std_above &amp;&amp; slow_above\n  puts \"\\nUNIVERSAL UPTREND - All MAMA settings bullish\"\n  puts \"Highest confidence long signal\"\nelsif !fast_above &amp;&amp; !std_above &amp;&amp; !slow_above\n  puts \"\\nUNIVERSAL DOWNTREND - All MAMA settings bearish\"\n  puts \"Highest confidence short signal\"\nelse\n  puts \"\\nMIXED SIGNALS - Use standard MAMA for primary guidance\"\nend\n</code></pre>"},{"location":"indicators/volatility/mama/#example-mama-with-price-action-confirmation","title":"Example: MAMA with Price Action Confirmation","text":"<pre><code>prices = load_historical_prices('MSFT')\nmama, fama = SQA::TAI.mama(prices)\n\n# Get recent price action\nrecent_high = prices[-10..-1].max\nrecent_low = prices[-10..-1].min\ncurrent_price = prices.last\nmama_value = mama.last\nfama_value = fama.last\n\n# Bullish setup\nif mama_value &gt; fama_value  # MAMA above FAMA (uptrend)\n  if current_price &lt;= mama_value &amp;&amp; current_price &gt;= fama_value\n    puts \"BULLISH PULLBACK SETUP\"\n    puts \"Price between MAMA and FAMA in uptrend\"\n    puts \"Support zone: #{fama_value.round(2)} - #{mama_value.round(2)}\"\n    puts \"Look for bullish price action reversal patterns\"\n  end\n\n  if current_price &gt; recent_high &amp;&amp; mama_value &gt; fama_value\n    puts \"BULLISH BREAKOUT\"\n    puts \"New high with MAMA/FAMA confirming uptrend\"\n    puts \"Strong momentum continuation signal\"\n  end\nend\n\n# Bearish setup\nif mama_value &lt; fama_value  # MAMA below FAMA (downtrend)\n  if current_price &gt;= mama_value &amp;&amp; current_price &lt;= fama_value\n    puts \"BEARISH RALLY SETUP\"\n    puts \"Price between MAMA and FAMA in downtrend\"\n    puts \"Resistance zone: #{mama_value.round(2)} - #{fama_value.round(2)}\"\n    puts \"Look for bearish price action reversal patterns\"\n  end\n\n  if current_price &lt; recent_low &amp;&amp; mama_value &lt; fama_value\n    puts \"BEARISH BREAKDOWN\"\n    puts \"New low with MAMA/FAMA confirming downtrend\"\n    puts \"Strong momentum continuation signal\"\n  end\nend\n</code></pre>"},{"location":"indicators/volatility/mama/#example-mama-adaptive-period-estimation","title":"Example: MAMA Adaptive Period Estimation","text":"<pre><code>prices = load_historical_prices('BTC-USD')\nmama, fama = SQA::TAI.mama(prices, fast_limit: 0.5, slow_limit: 0.05)\n\n# Estimate effective period from MAMA behavior\n# Compare MAMA responsiveness to known period MAs\nema_10 = SQA::TAI.ema(prices, period: 10)\nema_20 = SQA::TAI.ema(prices, period: 20)\nema_50 = SQA::TAI.ema(prices, period: 50)\n\nmama_value = mama.last\ndistance_10 = (mama_value - ema_10.last).abs\ndistance_20 = (mama_value - ema_20.last).abs\ndistance_50 = (mama_value - ema_50.last).abs\n\n# Find closest match\nmin_distance = [distance_10, distance_20, distance_50].min\n\neffective_period = case min_distance\nwhen distance_10 then \"~10 periods (fast adaptation)\"\nwhen distance_20 then \"~20 periods (moderate adaptation)\"\nwhen distance_50 then \"~50 periods (slow adaptation)\"\nend\n\nputs &lt;&lt;~ANALYSIS\n  === MAMA Adaptive Period Analysis ===\n  MAMA currently behaving like: #{effective_period}\n\n  This suggests the market is currently:\nANALYSIS\n\nif min_distance == distance_10\n  puts \"- In a strong trending phase (short effective period)\"\n  puts \"- High volatility and directional movement\"\n  puts \"- MAMA is maximally responsive\"\nelsif min_distance == distance_50\n  puts \"- In a ranging or choppy phase (long effective period)\"\n  puts \"- Lower volatility and sideways movement\"\n  puts \"- MAMA is maximally smooth\"\nelse\n  puts \"- In a transitional phase (medium effective period)\"\n  puts \"- Moderate volatility with developing trend\"\n  puts \"- MAMA is moderately adaptive\"\nend\n</code></pre>"},{"location":"indicators/volatility/mama/#advantages-over-fixed-period-moving-averages","title":"Advantages Over Fixed-Period Moving Averages","text":"<ol> <li>Automatic Adaptation: Adjusts period based on market phase without manual intervention</li> <li>Reduced Whipsaws: Lengthens period during ranging markets to filter noise</li> <li>Faster Trend Response: Shortens period during trending markets for timely signals</li> <li>Phase Detection: Built-in market phase analysis through MESA technology</li> <li>Dual Confirmation: MAMA/FAMA pair provides both signal and confirmation</li> <li>Universal Application: Works across all markets, timeframes, and volatility regimes</li> </ol>"},{"location":"indicators/volatility/mama/#mama-vs-other-adaptive-mas","title":"MAMA vs Other Adaptive MAs","text":"Feature MAMA KAMA Standard EMA Adaptation Method Phase rate (MESA) Efficiency Ratio Fixed alpha Speed Phase-dependent Volatility-dependent Constant Lag Minimal in trends Low in trends Moderate Noise Filtering Excellent Good Fair Complexity High Moderate Low Best For All market phases Trending markets Stable trends"},{"location":"indicators/volatility/mama/#common-parameter-settings","title":"Common Parameter Settings","text":"Setting Fast Limit Slow Limit Use Case Aggressive 0.8 0.1 Day trading, scalping, high-frequency signals Standard 0.5 0.05 Swing trading, default balanced approach Conservative 0.3 0.02 Position trading, long-term trends Custom Trend 0.6 0.03 Optimized for strong trending markets Custom Range 0.4 0.08 Optimized for choppy ranging markets"},{"location":"indicators/volatility/mama/#best-practices","title":"Best Practices","text":"<ol> <li>Use MAMA/FAMA Crossovers: Primary signal generation method</li> <li>Confirm with Price Action: Combine with support/resistance and patterns</li> <li>Consider Market Phase: MAMA works best when phase detection is accurate (requires sufficient data)</li> <li>Wait for Confirmation: Use FAMA to confirm MAMA signals, reducing false entries</li> <li>Minimum Data Requirement: Use at least 32+ data points, preferably 63+ for stability</li> <li>Combine with Volume: Confirm crossover signals with volume analysis</li> <li>Avoid in Extremely Choppy Markets: Even adaptive MAs struggle with pure noise</li> <li>Use Appropriate Timeframe: Works across timeframes but test settings for your specific use case</li> </ol>"},{"location":"indicators/volatility/mama/#limitations","title":"Limitations","text":"<ol> <li>Computational Complexity: More complex than traditional MAs, requires more processing</li> <li>Initial Instability: First 32+ values may be unreliable during calculation warm-up</li> <li>Not Predictive: Adapts to current phase but doesn't forecast future phase changes</li> <li>Occasional Lag: Still has some lag in rapid trend reversals</li> <li>Parameter Sensitivity: Fast/slow limits need adjustment for different market characteristics</li> <li>Black Box Component: Phase detection algorithm is not transparent</li> </ol>"},{"location":"indicators/volatility/mama/#market-applications","title":"Market Applications","text":""},{"location":"indicators/volatility/mama/#day-trading","title":"Day Trading","text":"<ul> <li>Use aggressive settings (0.8/0.1) for quick entries/exits</li> <li>Combine with volume and momentum indicators</li> <li>Watch for MAMA/FAMA alignment on multiple intraday timeframes</li> </ul>"},{"location":"indicators/volatility/mama/#swing-trading","title":"Swing Trading","text":"<ul> <li>Use standard settings (0.5/0.05) for balanced signals</li> <li>Use MAMA as dynamic support/resistance</li> <li>Confirm crossovers with daily trend direction</li> </ul>"},{"location":"indicators/volatility/mama/#position-trading","title":"Position Trading","text":"<ul> <li>Use conservative settings (0.3/0.02) for major trend changes</li> <li>Combine with weekly/monthly trend analysis</li> <li>Use MAMA slope for trend strength assessment</li> </ul>"},{"location":"indicators/volatility/mama/#trend-following","title":"Trend Following","text":"<ul> <li>Enter on MAMA/FAMA crossovers in direction of higher timeframe</li> <li>Use pullbacks to MAMA as entry opportunities</li> <li>Exit when price crosses below FAMA in uptrend (or above in downtrend)</li> </ul>"},{"location":"indicators/volatility/mama/#related-indicators","title":"Related Indicators","text":"<ul> <li>KAMA - Kaufman Adaptive Moving Average</li> <li>EMA - Exponential Moving Average</li> <li>DEMA - Double Exponential Moving Average</li> <li>T3 - Tillson T3 Moving Average</li> <li>HT_TRENDLINE - Hilbert Transform Trendline</li> <li>HT_DCPERIOD - Hilbert Transform Dominant Cycle Period</li> <li>HT_SINE - Hilbert Transform Sine Wave</li> </ul>"},{"location":"indicators/volatility/mama/#technical-background","title":"Technical Background","text":"<p>MAMA was developed by John F. Ehlers and introduced in his book \"Rocket Science for Traders: Digital Signal Processing Applications\". It represents a significant advancement in moving average technology by:</p> <ul> <li>Applying Maximum Entropy Spectral Analysis (MESA) to financial markets</li> <li>Using Hilbert Transform mathematics for phase detection</li> <li>Creating an adaptive smoothing constant based on dominant cycle measurements</li> <li>Providing a following moving average (FAMA) for signal confirmation</li> </ul> <p>The indicator is part of Ehlers' broader work on applying digital signal processing (DSP) techniques to trading, which includes cycle analysis, phase detection, and adaptive filtering.</p>"},{"location":"indicators/volatility/mama/#further-reading","title":"Further Reading","text":"<ul> <li>\"Rocket Science for Traders\" by John F. Ehlers - Original MAMA presentation</li> <li>\"Cybernetic Analysis for Stocks and Futures\" by John F. Ehlers - Advanced applications</li> <li>\"MESA and Trading Market Cycles\" by John F. Ehlers - MESA theory fundamentals</li> <li>\"Digital Signal Processing\" - General DSP principles applied to markets</li> </ul>"},{"location":"indicators/volatility/mama/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Volatility Indicators Overview</li> <li>Cycle Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/volatility/mavp/","title":"Moving Average with Variable Period (MAVP)","text":"<p>The Moving Average with Variable Period (MAVP) is a unique adaptive moving average that allows the smoothing period to change dynamically bar-by-bar based on an input array. Unlike traditional moving averages with fixed periods, MAVP adjusts its responsiveness based on external data such as volatility measurements, cycle periods, or custom adaptive logic.</p>"},{"location":"indicators/volatility/mavp/#formula","title":"Formula","text":"<p>MAVP calculates a moving average where the period varies for each data point:</p> <pre><code>For each bar i:\n  Period[i] = periods[i]  (from input array)\n  MAVP[i] = MA(prices, Period[i])  (using specified MA type)\n</code></pre> <p>The moving average type can be any standard MA: SMA, EMA, WMA, DEMA, TEMA, TRIMA, KAMA, MAMA, or T3.</p>"},{"location":"indicators/volatility/mavp/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values <code>periods</code> Array Yes - Array of period values (one per price point) <code>ma_type</code> Integer No 0 MA type: 0=SMA, 1=EMA, 2=WMA, 3=DEMA, 4=TEMA, 5=TRIMA, 6=KAMA, 7=MAMA, 8=T3"},{"location":"indicators/volatility/mavp/#returns","title":"Returns","text":"<p>Returns an array of MAVP values. The first several values will be <code>nil</code> based on the maximum period value in the periods array.</p>"},{"location":"indicators/volatility/mavp/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nprices = [44.34, 44.09, 44.15, 43.61, 44.33, 44.83,\n          45.10, 45.42, 45.84, 46.08, 46.03, 46.41,\n          46.22, 45.64, 46.21, 46.25, 46.08, 46.46,\n          46.82, 47.00, 47.32, 47.20, 47.57, 47.80,\n          48.00, 48.15, 48.30, 48.40, 48.55, 48.70]\n\n# Create a variable period array\n# For example: shorter periods in high volatility, longer in low volatility\nperiods = Array.new(prices.size, 10)  # Default to 10\nperiods[-5..-1] = [15, 18, 20, 18, 15]  # Increase period in recent bars\n\n# Calculate MAVP using SMA (default)\nmavp_sma = SQA::TAI.mavp(prices, periods)\n\n# Calculate MAVP using EMA\nmavp_ema = SQA::TAI.mavp(prices, periods, ma_type: 1)\n\nputs \"Current MAVP (SMA): #{mavp_sma.last.round(2)}\"\nputs \"Current MAVP (EMA): #{mavp_ema.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/mavp/#interpretation","title":"Interpretation","text":"<p>MAVP's adaptive period makes it highly flexible:</p> <ul> <li>Variable Responsiveness: Period adjusts based on input array</li> <li>Adapts to Conditions: Can use volatility, cycle data, or custom logic</li> <li>Short Periods: More responsive, tracks price closely</li> <li>Long Periods: Smoother, filters out noise</li> <li>Period Transitions: Gradual changes create smooth adaptive behavior</li> </ul>"},{"location":"indicators/volatility/mavp/#example-volatility-adaptive-mavp","title":"Example: Volatility-Adaptive MAVP","text":"<pre><code># Use ATR to create volatility-adaptive periods\nhigh, low, close = load_ohlc_data('AAPL')\n\n# Calculate ATR for volatility\natr = SQA::TAI.atr(high, low, close, period: 14)\n\n# Create adaptive periods based on volatility\n# High ATR -&gt; shorter period (more responsive)\n# Low ATR -&gt; longer period (smoother)\navg_atr = atr.compact.sum / atr.compact.size\n\nperiods = atr.map do |atr_val|\n  next 20 if atr_val.nil?\n\n  # Scale period inversely with volatility\n  # ATR above average -&gt; period 10-15\n  # ATR below average -&gt; period 20-30\n  if atr_val &gt; avg_atr * 1.5\n    10  # High volatility -&gt; fast MA\n  elsif atr_val &gt; avg_atr\n    15\n  elsif atr_val &gt; avg_atr * 0.5\n    20\n  else\n    30  # Low volatility -&gt; slow MA\n  end\nend\n\n# Calculate volatility-adaptive MAVP\nmavp = SQA::TAI.mavp(close, periods, ma_type: 1)  # Using EMA\n\nputs \"Current Price: #{close.last.round(2)}\"\nputs \"Current ATR: #{atr.last.round(2)}\"\nputs \"Current Period: #{periods.last}\"\nputs \"MAVP Value: #{mavp.last.round(2)}\"\nputs \"Signal: #{close.last &gt; mavp.last ? 'BULLISH' : 'BEARISH'}\"\n</code></pre>"},{"location":"indicators/volatility/mavp/#example-cycle-based-mavp","title":"Example: Cycle-Based MAVP","text":"<pre><code># Use Hilbert Transform Dominant Cycle Period for adaptive periods\nprices = load_historical_prices('SPY')\n\n# Get the dominant cycle period\ncycle_periods = SQA::TAI.ht_dcperiod(prices)\n\n# Use cycle period directly for MAVP\n# This makes the MA adapt to the market's natural cycle\nmavp_cycle = SQA::TAI.mavp(prices, cycle_periods, ma_type: 1)\n\n# Also calculate a fixed EMA for comparison\nema_20 = SQA::TAI.ema(prices, period: 20)\n\nputs \"Market Analysis:\"\nputs \"Current Price: #{prices.last.round(2)}\"\nputs \"Dominant Cycle: #{cycle_periods.last.round(1)} periods\"\nputs \"Cycle-based MAVP: #{mavp_cycle.last.round(2)}\"\nputs \"Fixed EMA(20): #{ema_20.last.round(2)}\"\n\n# Compare responsiveness\nif cycle_periods.last &lt; 20\n  puts \"Market in SHORT cycle - MAVP more responsive than EMA\"\nelsif cycle_periods.last &gt; 20\n  puts \"Market in LONG cycle - MAVP smoother than EMA\"\nelse\n  puts \"Cycle matches EMA period\"\nend\n</code></pre>"},{"location":"indicators/volatility/mavp/#example-custom-adaptive-logic","title":"Example: Custom Adaptive Logic","text":"<pre><code>prices = load_historical_prices('TSLA')\n\n# Create custom adaptive periods based on price momentum\nperiods = []\nbase_period = 20\n\nprices.each_with_index do |price, i|\n  if i &lt; 10\n    periods &lt;&lt; base_period\n    next\n  end\n\n  # Calculate 10-bar momentum\n  momentum = ((price - prices[i-10]) / prices[i-10] * 100).abs\n\n  # Adjust period based on momentum\n  # High momentum -&gt; shorter period (follow trends)\n  # Low momentum -&gt; longer period (filter noise)\n  if momentum &gt; 5.0\n    periods &lt;&lt; 10  # Strong move -&gt; fast MA\n  elsif momentum &gt; 2.0\n    periods &lt;&lt; 15\n  elsif momentum &gt; 1.0\n    periods &lt;&lt; 20\n  else\n    periods &lt;&lt; 30  # Slow market -&gt; slow MA\n  end\nend\n\nmavp = SQA::TAI.mavp(prices, periods, ma_type: 1)\n\nputs \"Current Momentum: #{(((prices.last - prices[-11]) / prices[-11]) * 100).round(2)}%\"\nputs \"Adaptive Period: #{periods.last}\"\nputs \"MAVP: #{mavp.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/mavp/#example-multi-condition-adaptive-periods","title":"Example: Multi-Condition Adaptive Periods","text":"<pre><code>high, low, close = load_ohlc_data('NVDA')\n\n# Combine multiple factors for period selection\natr = SQA::TAI.atr(high, low, close, period: 14)\nadx = SQA::TAI.adx(high, low, close, period: 14)\n\nperiods = []\n\nclose.each_with_index do |price, i|\n  if i &lt; 14 || atr[i].nil? || adx[i].nil?\n    periods &lt;&lt; 20\n    next\n  end\n\n  # Factor 1: Volatility (ATR)\n  avg_atr = atr.compact[0..i].sum / atr.compact[0..i].size\n  high_vol = atr[i] &gt; avg_atr * 1.2\n\n  # Factor 2: Trend Strength (ADX)\n  strong_trend = adx[i] &gt; 25\n\n  # Factor 3: Price momentum\n  momentum = i &gt;= 10 ? ((price - close[i-10]) / close[i-10] * 100).abs : 0\n  high_momentum = momentum &gt; 3.0\n\n  # Combine conditions\n  if strong_trend &amp;&amp; high_momentum\n    periods &lt;&lt; 10  # Strong trending market -&gt; fast MA\n  elsif strong_trend &amp;&amp; !high_vol\n    periods &lt;&lt; 15  # Trending but calm -&gt; medium-fast MA\n  elsif high_vol &amp;&amp; !strong_trend\n    periods &lt;&lt; 30  # Volatile but no trend -&gt; slow MA\n  else\n    periods &lt;&lt; 20  # Default\n  end\nend\n\nmavp = SQA::TAI.mavp(close, periods, ma_type: 1)\n\nputs &lt;&lt;~OUTPUT\n  Market State Analysis:\n  ATR: #{atr.last.round(2)} (Volatility)\n  ADX: #{adx.last.round(2)} (Trend Strength)\n  Adaptive Period: #{periods.last}\n  MAVP: #{mavp.last.round(2)}\n  Price: #{close.last.round(2)}\n  Position: #{close.last &gt; mavp.last ? 'Above MAVP (Bullish)' : 'Below MAVP (Bearish)'}\nOUTPUT\n</code></pre>"},{"location":"indicators/volatility/mavp/#example-stepped-period-zones","title":"Example: Stepped Period Zones","text":"<pre><code>prices = load_historical_prices('MSFT')\n\n# Create stepped zones based on price action\nperiods = []\nlookback = 20\n\nprices.each_with_index do |price, i|\n  if i &lt; lookback\n    periods &lt;&lt; 20\n    next\n  end\n\n  # Check where price is relative to recent range\n  recent_high = prices[(i-lookback)..i].max\n  recent_low = prices[(i-lookback)..i].min\n  range_position = (price - recent_low) / (recent_high - recent_low)\n\n  # Period zones based on range position\n  case range_position\n  when 0.0..0.2\n    periods &lt;&lt; 30  # Bottom zone -&gt; slow MA (support area)\n  when 0.2..0.4\n    periods &lt;&lt; 20  # Lower zone\n  when 0.4..0.6\n    periods &lt;&lt; 15  # Mid zone -&gt; responsive\n  when 0.6..0.8\n    periods &lt;&lt; 20  # Upper zone\n  else\n    periods &lt;&lt; 30  # Top zone -&gt; slow MA (resistance area)\n  end\nend\n\nmavp = SQA::TAI.mavp(prices, periods, ma_type: 0)  # SMA\n\n# Detect crossovers\nif prices[-2] &lt;= mavp[-2] &amp;&amp; prices.last &gt; mavp.last\n  puts \"BULLISH CROSSOVER detected\"\n  puts \"Period at crossover: #{periods.last}\"\nend\n</code></pre>"},{"location":"indicators/volatility/mavp/#example-mavp-trading-system","title":"Example: MAVP Trading System","text":"<pre><code>high, low, close = load_ohlc_data('QQQ')\n\n# Build adaptive periods from volatility\natr = SQA::TAI.atr(high, low, close, period: 14)\navg_atr = atr.compact.sum / atr.compact.size\n\nperiods = atr.map do |val|\n  next 20 if val.nil?\n  val &gt; avg_atr ? 12 : 25  # Binary: fast in volatility, slow in calm\nend\n\nmavp = SQA::TAI.mavp(close, periods, ma_type: 1)\n\n# Generate signals\nsignals = []\n\nclose.each_with_index do |price, i|\n  next if mavp[i].nil? || i &lt; 1\n\n  prev_price = close[i-1]\n  prev_mavp = mavp[i-1]\n  curr_mavp = mavp[i]\n\n  # Bullish crossover\n  if prev_price &lt;= prev_mavp &amp;&amp; price &gt; curr_mavp\n    signals &lt;&lt; {\n      index: i,\n      type: 'BUY',\n      price: price,\n      mavp: curr_mavp,\n      period: periods[i]\n    }\n  # Bearish crossover\n  elsif prev_price &gt;= prev_mavp &amp;&amp; price &lt; curr_mavp\n    signals &lt;&lt; {\n      index: i,\n      type: 'SELL',\n      price: price,\n      mavp: curr_mavp,\n      period: periods[i]\n    }\n  end\nend\n\n# Display recent signals\nputs \"Recent Trading Signals:\"\nsignals.last(5).each do |sig|\n  puts \"#{sig[:type]} at $#{sig[:price].round(2)} (MAVP: #{sig[:mavp].round(2)}, Period: #{sig[:period]})\"\nend\n\n# Current status\nputs \"\\nCurrent Status:\"\nputs \"Price: $#{close.last.round(2)}\"\nputs \"MAVP: $#{mavp.last.round(2)}\"\nputs \"Period: #{periods.last}\"\nputs \"Trend: #{close.last &gt; mavp.last ? 'BULLISH' : 'BEARISH'}\"\n</code></pre>"},{"location":"indicators/volatility/mavp/#ma-type-options","title":"MA Type Options","text":"<p>MAVP supports all standard moving average types:</p> MA Type Value Description SMA 0 Simple Moving Average (default) EMA 1 Exponential Moving Average WMA 2 Weighted Moving Average DEMA 3 Double Exponential MA TEMA 4 Triple Exponential MA TRIMA 5 Triangular Moving Average KAMA 6 Kaufman Adaptive MA MAMA 7 MESA Adaptive MA T3 8 Tillson T3"},{"location":"indicators/volatility/mavp/#common-period-sources","title":"Common Period Sources","text":""},{"location":"indicators/volatility/mavp/#1-volatility-based","title":"1. Volatility-Based","text":"<pre><code># ATR for volatility\natr = SQA::TAI.atr(high, low, close, period: 14)\nperiods = atr.map { |v| v.nil? ? 20 : (v &gt; avg_atr ? 10 : 30) }\n</code></pre>"},{"location":"indicators/volatility/mavp/#2-cycle-based","title":"2. Cycle-Based","text":"<pre><code># Dominant cycle period\nperiods = SQA::TAI.ht_dcperiod(prices)\n</code></pre>"},{"location":"indicators/volatility/mavp/#3-momentum-based","title":"3. Momentum-Based","text":"<pre><code># ROC for momentum\nroc = SQA::TAI.roc(prices, period: 10)\nperiods = roc.map { |v| v.nil? ? 20 : (v.abs &gt; 5 ? 10 : 30) }\n</code></pre>"},{"location":"indicators/volatility/mavp/#4-trend-strength","title":"4. Trend Strength","text":"<pre><code># ADX for trend strength\nadx = SQA::TAI.adx(high, low, close, period: 14)\nperiods = adx.map { |v| v.nil? ? 20 : (v &gt; 25 ? 12 : 28) }\n</code></pre>"},{"location":"indicators/volatility/mavp/#best-practices","title":"Best Practices","text":"<ol> <li>Smooth Period Changes: Avoid dramatic period jumps; use gradual transitions</li> <li>Set Bounds: Keep periods within reasonable range (e.g., 5-50)</li> <li>Test Logic: Backtest your adaptive period logic before live trading</li> <li>Combine Factors: Use multiple indicators for period determination</li> <li>Use Appropriate MA Type: EMA for trends, SMA for support/resistance</li> </ol>"},{"location":"indicators/volatility/mavp/#advantages","title":"Advantages","text":"<ul> <li>Maximum Flexibility: Period adapts to any custom logic</li> <li>Responsive to Conditions: Adjusts automatically to market changes</li> <li>Multi-Factor: Can combine multiple indicators for period selection</li> <li>Reduces Whipsaws: Slower periods in choppy markets</li> <li>Catches Trends: Faster periods in trending markets</li> </ul>"},{"location":"indicators/volatility/mavp/#limitations","title":"Limitations","text":"<ul> <li>Complexity: Requires good understanding of period logic</li> <li>Optimization Risk: Easy to over-optimize period selection</li> <li>Calculation Overhead: More complex than fixed-period MAs</li> <li>Look-Ahead Bias: Period array must be generated properly</li> <li>Requires External Data: Needs additional indicators for period selection</li> </ul>"},{"location":"indicators/volatility/mavp/#use-cases","title":"Use Cases","text":"<ol> <li>Volatility-Adaptive Systems: Adjust to market volatility automatically</li> <li>Cycle-Based Trading: Follow market's natural cycle rhythms</li> <li>Multi-Timeframe Analysis: Adapt period to timeframe characteristics</li> <li>Regime Detection: Different periods for trending vs ranging markets</li> <li>Custom Strategies: Implement proprietary adaptive logic</li> </ol>"},{"location":"indicators/volatility/mavp/#related-indicators","title":"Related Indicators","text":"<ul> <li>ATR - Use for volatility-based periods</li> <li>HT_DCPERIOD - Dominant cycle period for cycle-based MAVP</li> <li>ADX - Trend strength for period selection</li> <li>KAMA - Another adaptive moving average</li> <li>MAMA - MESA Adaptive Moving Average</li> <li>EMA - Standard exponential moving average</li> </ul>"},{"location":"indicators/volatility/mavp/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Volatility Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/volatility/midpoint/","title":"Midpoint Over Period (MIDPOINT)","text":"<p>The Midpoint indicator calculates the middle point between the highest and lowest prices over a specified period. It represents a dynamic central value that can act as a mean reversion level and helps identify the balance point of recent price action.</p>"},{"location":"indicators/volatility/midpoint/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# Basic usage with closing prices\ncloses = [45.15, 46.26, 46.5, 46.31, 46.89, 47.03, 47.28, 47.79, 48.12, 48.45,\n          48.67, 49.05, 49.32, 49.67, 49.89]\n\n# Calculate 14-period midpoint\nmidpoint = SQA::TAI.midpoint(closes, period: 14)\n\nputs \"Current Midpoint: #{midpoint.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/midpoint/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>prices</code> Array Yes - Array of price values (typically closing prices) <code>period</code> Integer No 14 Number of periods for calculation"},{"location":"indicators/volatility/midpoint/#returns","title":"Returns","text":"<p>Returns an array of midpoint values. The first <code>period - 1</code> values will be <code>nil</code>.</p>"},{"location":"indicators/volatility/midpoint/#formula","title":"Formula","text":"<pre><code>MIDPOINT = (Highest Price + Lowest Price) / 2\n\nWhere:\n  Highest Price = Maximum price over the period\n  Lowest Price = Minimum price over the period\n</code></pre>"},{"location":"indicators/volatility/midpoint/#interpretation","title":"Interpretation","text":""},{"location":"indicators/volatility/midpoint/#basic-signals","title":"Basic Signals","text":"<ul> <li>Price Above Midpoint: Bullish bias - price in upper half of recent range</li> <li>Price Below Midpoint: Bearish bias - price in lower half of recent range</li> <li>Price at Midpoint: Equilibrium - indecision or consolidation</li> <li>Midpoint Slope: Rising suggests uptrend, falling suggests downtrend</li> </ul>"},{"location":"indicators/volatility/midpoint/#market-context","title":"Market Context","text":"<p>The midpoint acts as a: - Dynamic Support/Resistance: Price tends to react at the midpoint level - Mean Reversion Target: Price often returns to midpoint after extremes - Range Center: Identifies the middle of recent price action - Fair Value: Represents balanced price level over the period</p>"},{"location":"indicators/volatility/midpoint/#trading-implications","title":"Trading Implications","text":"<ul> <li>Range Trading: Trade bounces off midpoint in sideways markets</li> <li>Breakouts: Strong moves through midpoint can signal trend changes</li> <li>Pullbacks: Midpoint often acts as pullback target in trends</li> <li>Risk Reference: Use for stop loss and target placement</li> </ul>"},{"location":"indicators/volatility/midpoint/#example-basic-midpoint-analysis","title":"Example: Basic Midpoint Analysis","text":"<pre><code>closes = load_price_data('AAPL')\n\nmidpoint = SQA::TAI.midpoint(closes, period: 14)\ncurrent_price = closes.last\ncurrent_midpoint = midpoint.last\n\n# Determine position relative to midpoint\ndistance = current_price - current_midpoint\ndistance_pct = (distance / current_midpoint) * 100\n\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"Midpoint: $#{current_midpoint.round(2)}\"\nputs \"Distance: $#{distance.round(2)} (#{distance_pct.round(2)}%)\"\n\nif distance_pct &gt; 2\n  puts \"Price significantly above midpoint - upper range, consider resistance\"\nelsif distance_pct &lt; -2\n  puts \"Price significantly below midpoint - lower range, consider support\"\nelse\n  puts \"Price near midpoint - equilibrium zone\"\nend\n</code></pre>"},{"location":"indicators/volatility/midpoint/#example-range-trading-with-midpoint","title":"Example: Range Trading with Midpoint","text":"<pre><code>closes = load_price_data('MSFT')\nhighs = load_high_data('MSFT')\nlows = load_low_data('MSFT')\n\nperiod = 20\nmidpoint = SQA::TAI.midpoint(closes, period: period)\n\n# Calculate range extremes\nupper_band = highs.each_with_index.map do |h, i|\n  next nil if i &lt; period - 1\n  highs[(i-period+1)..i].max\nend\n\nlower_band = lows.each_with_index.map do |l, i|\n  next nil if i &lt; period - 1\n  lows[(i-period+1)..i].min\nend\n\ncurrent_price = closes.last\ncurrent_mid = midpoint.last\ncurrent_upper = upper_band.last\ncurrent_lower = lower_band.last\n\nrange_size = current_upper - current_lower\nposition_in_range = (current_price - current_lower) / range_size * 100\n\nputs &lt;&lt;~ANALYSIS\n  Range Trading Analysis:\n  Upper Band: $#{current_upper.round(2)}\n  Midpoint:   $#{current_mid.round(2)}\n  Lower Band: $#{current_lower.round(2)}\n  Current:    $#{current_price.round(2)}\n\n  Range Size: $#{range_size.round(2)}\n  Position: #{position_in_range.round(0)}% of range\n\n  Trading Signal:\nANALYSIS\n\nif position_in_range &gt; 75\n  puts \"  Near upper extreme - consider selling or waiting for pullback\"\nelsif position_in_range &lt; 25\n  puts \"  Near lower extreme - consider buying or waiting for bounce\"\nelsif position_in_range &gt; 45 &amp;&amp; position_in_range &lt; 55\n  puts \"  At midpoint - neutral zone, watch for direction\"\nelse\n  puts \"  Mid-range - trend may be developing\"\nend\n</code></pre>"},{"location":"indicators/volatility/midpoint/#example-mean-reversion-strategy","title":"Example: Mean Reversion Strategy","text":"<pre><code>closes = load_price_data('SPY')\n\nshort_period = 10\nlong_period = 20\n\nmidpoint_short = SQA::TAI.midpoint(closes, period: short_period)\nmidpoint_long = SQA::TAI.midpoint(closes, period: long_period)\n\ncurrent_price = closes.last\nshort_mid = midpoint_short.last\nlong_mid = midpoint_long.last\n\n# Calculate distance from both midpoints\nshort_distance = ((current_price - short_mid) / short_mid) * 100\nlong_distance = ((current_price - long_mid) / long_mid) * 100\n\nputs &lt;&lt;~REVERSION\n  Mean Reversion Analysis:\n  Current Price: $#{current_price.round(2)}\n  10-period Midpoint: $#{short_mid.round(2)} (#{short_distance.round(2)}% away)\n  20-period Midpoint: $#{long_mid.round(2)} (#{long_distance.round(2)}% away)\nREVERSION\n\n# Look for mean reversion opportunities\nif short_distance &gt; 3 &amp;&amp; long_distance &gt; 2\n  puts \"\\nOVERBOUGHT - Price extended above both midpoints\"\n  puts \"Target: Return to $#{short_mid.round(2)} (-#{short_distance.abs.round(1)}%)\"\n  puts \"Stop: Above recent high\"\n\nelsif short_distance &lt; -3 &amp;&amp; long_distance &lt; -2\n  puts \"\\nOVERSOLD - Price extended below both midpoints\"\n  puts \"Target: Return to $#{short_mid.round(2)} (+#{short_distance.abs.round(1)}%)\"\n  puts \"Stop: Below recent low\"\n\nelsif short_distance.abs &lt; 1 &amp;&amp; long_distance.abs &lt; 1\n  puts \"\\nEQUILIBRIUM - Price at fair value\"\n  puts \"Wait for extension before entering\"\nend\n</code></pre>"},{"location":"indicators/volatility/midpoint/#example-midpoint-breakout-system","title":"Example: Midpoint Breakout System","text":"<pre><code>closes = load_price_data('NVDA')\nvolumes = load_volume_data('NVDA')\n\nperiod = 14\nmidpoint = SQA::TAI.midpoint(closes, period: period)\n\n# Track price position relative to midpoint\nposition_history = closes.each_with_index.map do |price, i|\n  next nil if midpoint[i].nil?\n  price &gt; midpoint[i] ? 1 : -1  # 1 = above, -1 = below\nend\n\n# Detect midpoint crossovers\ncrossovers = position_history.each_with_index.map do |pos, i|\n  next nil if i &lt; 1 || pos.nil? || position_history[i-1].nil?\n\n  if pos == 1 &amp;&amp; position_history[i-1] == -1\n    :bullish_cross  # Crossed above midpoint\n  elsif pos == -1 &amp;&amp; position_history[i-1] == 1\n    :bearish_cross  # Crossed below midpoint\n  else\n    :no_cross\n  end\nend\n\n# Analyze recent crossover\nif crossovers.last == :bullish_cross\n  avg_volume = volumes[-20..-1].sum / 20.0\n  current_volume = volumes.last\n\n  puts \"BULLISH MIDPOINT BREAKOUT\"\n  puts \"Price crossed above midpoint: $#{midpoint.last.round(2)}\"\n  puts \"Current price: $#{closes.last.round(2)}\"\n  puts \"Volume: #{current_volume.to_i} (avg: #{avg_volume.to_i})\"\n\n  if current_volume &gt; avg_volume * 1.5\n    puts \"Strong volume confirmation - high probability move\"\n    puts \"Target: Upper range boundary\"\n    puts \"Stop: Below midpoint at $#{(midpoint.last * 0.98).round(2)}\"\n  else\n    puts \"Weak volume - wait for confirmation\"\n  end\n\nelsif crossovers.last == :bearish_cross\n  puts \"BEARISH MIDPOINT BREAKDOWN\"\n  puts \"Price crossed below midpoint: $#{midpoint.last.round(2)}\"\n  puts \"Current price: $#{closes.last.round(2)}\"\n  puts \"Consider short entry or exit longs\"\nend\n</code></pre>"},{"location":"indicators/volatility/midpoint/#example-multi-timeframe-midpoint-analysis","title":"Example: Multi-Timeframe Midpoint Analysis","text":"<pre><code>closes = load_price_data('TSLA')\n\n# Calculate midpoints for different timeframes\nmidpoint_5 = SQA::TAI.midpoint(closes, period: 5)   # Short-term\nmidpoint_14 = SQA::TAI.midpoint(closes, period: 14)  # Medium-term\nmidpoint_50 = SQA::TAI.midpoint(closes, period: 50)  # Long-term\n\ncurrent_price = closes.last\n\n# Determine trend alignment\nshort_position = current_price &gt; midpoint_5.last ? \"above\" : \"below\"\nmedium_position = current_price &gt; midpoint_14.last ? \"above\" : \"below\"\nlong_position = current_price &gt; midpoint_50.last ? \"above\" : \"below\"\n\nputs &lt;&lt;~MULTI_TF\n  Multi-Timeframe Midpoint Analysis:\n  Current Price: $#{current_price.round(2)}\n\n  5-day Midpoint:  $#{midpoint_5.last.round(2)} (#{short_position})\n  14-day Midpoint: $#{midpoint_14.last.round(2)} (#{medium_position})\n  50-day Midpoint: $#{midpoint_50.last.round(2)} (#{long_position})\nMULTI_TF\n\n# Check for alignment\nif [short_position, medium_position, long_position].all? { |p| p == \"above\" }\n  puts \"\\nSTRONG BULLISH ALIGNMENT\"\n  puts \"Price above all timeframe midpoints - strong uptrend\"\n  puts \"Look for pullbacks to higher midpoints as buying opportunities\"\n\nelsif [short_position, medium_position, long_position].all? { |p| p == \"below\" }\n  puts \"\\nSTRONG BEARISH ALIGNMENT\"\n  puts \"Price below all timeframe midpoints - strong downtrend\"\n  puts \"Look for rallies to lower midpoints as selling opportunities\"\n\nelse\n  puts \"\\nMIXED SIGNALS - Transitional phase\"\n  puts \"Midpoints not aligned - wait for clearer trend\"\nend\n</code></pre>"},{"location":"indicators/volatility/midpoint/#example-midpoint-as-dynamic-supportresistance","title":"Example: Midpoint as Dynamic Support/Resistance","text":"<pre><code>closes = load_price_data('AAPL')\nhighs = load_high_data('AAPL')\nlows = load_low_data('AAPL')\n\nperiod = 20\nmidpoint = SQA::TAI.midpoint(closes, period: period)\n\n# Count touches of midpoint\ntouches = 0\nbounces = 0\n\ncloses.each_with_index do |price, i|\n  next if i &lt; period || midpoint[i].nil?\n\n  mid = midpoint[i]\n  tolerance = mid * 0.01  # 1% tolerance\n\n  # Check if price touched midpoint\n  if (lows[i] &lt;= mid + tolerance &amp;&amp; highs[i] &gt;= mid - tolerance)\n    touches += 1\n\n    # Check if it bounced (didn't close far from midpoint)\n    if (closes[i] - mid).abs &lt; tolerance\n      bounces += 1\n    end\n  end\nend\n\nbounce_rate = touches &gt; 0 ? (bounces.to_f / touches * 100) : 0\n\nputs &lt;&lt;~SUPPORT_RESISTANCE\n  Midpoint Support/Resistance Analysis (Last #{period} periods):\n  Midpoint Level: $#{midpoint.last.round(2)}\n  Times Tested: #{touches}\n  Successful Bounces: #{bounces}\n  Bounce Rate: #{bounce_rate.round(0)}%\n\n  Current Price: $#{closes.last.round(2)}\nSUPPORT_RESISTANCE\n\nif touches &gt; 3 &amp;&amp; bounce_rate &gt; 60\n  puts \"\\nMidpoint is STRONG support/resistance\"\n  puts \"High probability of reaction at $#{midpoint.last.round(2)}\"\nelsif touches &gt; 0\n  puts \"\\nMidpoint shows MODERATE support/resistance\"\nelse\n  puts \"\\nMidpoint not yet tested - significance unknown\"\nend\n\n# Check current proximity\ndistance = ((closes.last - midpoint.last) / midpoint.last).abs * 100\nif distance &lt; 1\n  puts \"\\nWARNING: Price approaching midpoint - watch for reaction\"\nend\n</code></pre>"},{"location":"indicators/volatility/midpoint/#example-midpoint-squeeze-detection","title":"Example: Midpoint Squeeze Detection","text":"<pre><code>closes = load_price_data('BTC')\n\nperiod = 14\nmidpoint = SQA::TAI.midpoint(closes, period: period)\n\n# Calculate range width over time\nrange_width = closes.each_with_index.map do |price, i|\n  next nil if i &lt; period - 1\n\n  window = closes[(i-period+1)..i]\n  high = window.max\n  low = window.min\n  (high - low) / midpoint[i] * 100  # Width as % of midpoint\nend\n\n# Calculate average range width\navg_width = range_width.compact[-50..-1].sum / 50.0\ncurrent_width = range_width.last\n\ncompression_ratio = (avg_width - current_width) / avg_width * 100\n\nputs &lt;&lt;~SQUEEZE\n  Midpoint Range Analysis:\n  Current Range Width: #{current_width.round(2)}%\n  50-Period Average: #{avg_width.round(2)}%\n  Compression: #{compression_ratio.round(0)}%\nSQUEEZE\n\nif compression_ratio &gt; 30\n  puts \"\\nRANGE COMPRESSION DETECTED\"\n  puts \"Price consolidating around midpoint\"\n  puts \"Prepare for potential breakout\"\n  puts \"Watch for volume expansion and directional move\"\n\nelsif compression_ratio &lt; -30\n  puts \"\\nRANGE EXPANSION\"\n  puts \"Large price swings - high volatility\"\n  puts \"Trend may be in progress\"\n\nelse\n  puts \"\\nNORMAL RANGE\"\n  puts \"No significant compression or expansion\"\nend\n</code></pre>"},{"location":"indicators/volatility/midpoint/#common-uses","title":"Common Uses","text":""},{"location":"indicators/volatility/midpoint/#1-range-center-identification","title":"1. Range Center Identification","text":"<pre><code>midpoint = SQA::TAI.midpoint(closes, period: 20)\n# Price above midpoint = upper half of range (bullish)\n# Price below midpoint = lower half of range (bearish)\n</code></pre>"},{"location":"indicators/volatility/midpoint/#2-mean-reversion-trading","title":"2. Mean Reversion Trading","text":"<pre><code>distance_pct = ((price - midpoint.last) / midpoint.last) * 100\n# Enter when distance &gt; threshold\n# Exit when price returns to midpoint\n</code></pre>"},{"location":"indicators/volatility/midpoint/#3-dynamic-supportresistance","title":"3. Dynamic Support/Resistance","text":"<pre><code># Use midpoint as dynamic level for:\n# - Stop loss placement\n# - Profit targets\n# - Entry triggers\n</code></pre>"},{"location":"indicators/volatility/midpoint/#4-trend-confirmation","title":"4. Trend Confirmation","text":"<pre><code># Uptrend: Price consistently above midpoint\n# Downtrend: Price consistently below midpoint\n# Reversal: Price crosses midpoint with volume\n</code></pre>"},{"location":"indicators/volatility/midpoint/#midpoint-period-settings","title":"Midpoint Period Settings","text":"Period Use Case Characteristics 5-7 Intraday/scalping Very responsive, frequent signals 10-14 Swing trading Balanced, standard setting 20-30 Position trading Smoother, less noise 50+ Long-term trends Very stable, major levels"},{"location":"indicators/volatility/midpoint/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/volatility/midpoint/#mean-reversion-strategy","title":"Mean Reversion Strategy","text":"<ol> <li>Wait for price to extend &gt;3% from midpoint</li> <li>Enter when price starts moving back toward midpoint</li> <li>Target: Return to midpoint</li> <li>Stop: Beyond recent extreme</li> </ol>"},{"location":"indicators/volatility/midpoint/#breakout-strategy","title":"Breakout Strategy","text":"<ol> <li>Identify consolidation around midpoint</li> <li>Wait for decisive break above/below</li> <li>Confirm with volume</li> <li>Enter on breakout, target range size move</li> </ol>"},{"location":"indicators/volatility/midpoint/#supportresistance-strategy","title":"Support/Resistance Strategy","text":"<ol> <li>Track historical bounces off midpoint</li> <li>Enter when price approaches tested level</li> <li>Use tight stops below/above midpoint</li> <li>Take profits at range extremes</li> </ol>"},{"location":"indicators/volatility/midpoint/#advantages","title":"Advantages","text":"<ul> <li>Simple calculation and interpretation</li> <li>Works in all market conditions</li> <li>Adapts to current price action</li> <li>Useful for both trend and range trading</li> <li>Provides objective fair value reference</li> <li>Combines well with other indicators</li> </ul>"},{"location":"indicators/volatility/midpoint/#limitations","title":"Limitations","text":"<ul> <li>Lagging indicator (based on historical data)</li> <li>No inherent directional bias</li> <li>Can whipsaw in choppy markets</li> <li>Doesn't account for volume or momentum</li> <li>Less effective in strongly trending markets</li> <li>Requires price to establish range first</li> </ul>"},{"location":"indicators/volatility/midpoint/#combining-with-other-indicators","title":"Combining with Other Indicators","text":""},{"location":"indicators/volatility/midpoint/#with-moving-averages","title":"With Moving Averages","text":"<pre><code>midpoint = SQA::TAI.midpoint(closes, period: 14)\nsma = SQA::TAI.sma(closes, period: 20)\n# Midpoint above SMA = short-term strength\n# Midpoint below SMA = short-term weakness\n</code></pre>"},{"location":"indicators/volatility/midpoint/#with-rsi","title":"With RSI","text":"<pre><code>midpoint = SQA::TAI.midpoint(closes, period: 14)\nrsi = SQA::TAI.rsi(closes, period: 14)\n# Price at midpoint + RSI extreme = strong reversal signal\n</code></pre>"},{"location":"indicators/volatility/midpoint/#with-volume","title":"With Volume","text":"<pre><code># Breakout through midpoint + high volume = strong signal\n# Touch midpoint + low volume = weak bounce\n</code></pre>"},{"location":"indicators/volatility/midpoint/#related-indicators","title":"Related Indicators","text":"<ul> <li>MIDPRICE - Midpoint using high/low instead of max/min</li> <li>ATR - Measure volatility around midpoint</li> <li>Bollinger Bands - Bands around moving average midpoint</li> <li>Donchian Channels - Channel with midpoint line</li> </ul>"},{"location":"indicators/volatility/midpoint/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Volatility Analysis Example</li> </ul>"},{"location":"indicators/volatility/midprice/","title":"Midpoint Price (MIDPRICE)","text":"<p>The Midpoint Price (MIDPRICE) indicator calculates the average of the highest high and lowest low over a specified period. It represents the midpoint of the recent price range and serves as a dynamic equilibrium level for the asset.</p> <p>Unlike MIDPOINT which uses a single price series, MIDPRICE specifically uses the high and low prices to define the range boundaries, making it particularly useful for identifying the center of trading ranges and potential support/resistance levels.</p>"},{"location":"indicators/volatility/midprice/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# OHLC data required\nhigh = [50.5, 51.2, 52.1, 51.8, 52.5, 53.0, 52.8, 53.5, 54.2, 53.8,\n        54.5, 55.0, 54.7, 55.5, 56.2]\nlow  = [48.5, 49.0, 50.2, 49.8, 50.5, 51.2, 50.8, 52.0, 52.5, 52.2,\n        53.0, 53.5, 53.2, 54.0, 54.5]\n\n# Calculate 14-period MIDPRICE\nmidprice = SQA::TAI.midprice(high, low, period: 14)\n\nputs \"Current MIDPRICE: #{midprice.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/midprice/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>period</code> Integer No 14 Number of periods for calculation"},{"location":"indicators/volatility/midprice/#returns","title":"Returns","text":"<p>Returns an array of MIDPRICE values. The first <code>period - 1</code> values will be <code>nil</code>.</p>"},{"location":"indicators/volatility/midprice/#formula","title":"Formula","text":"<pre><code>MIDPRICE = (Highest High + Lowest Low) / 2\n\nWhere:\n  Highest High = Maximum high over the period\n  Lowest Low = Minimum low over the period\n</code></pre>"},{"location":"indicators/volatility/midprice/#interpretation","title":"Interpretation","text":"<p>The MIDPRICE indicator provides several key insights:</p> <ul> <li>Range Center: Represents the equilibrium point of the recent price range</li> <li>Price Above MIDPRICE: Indicates price is in the upper half of the range (bullish bias)</li> <li>Price Below MIDPRICE: Indicates price is in the lower half of the range (bearish bias)</li> <li>Price at MIDPRICE: Suggests a balanced market with no clear directional bias</li> <li>Dynamic Support/Resistance: Acts as a pivot point within the range</li> <li>Mean Reversion: Price tends to gravitate toward the MIDPRICE in ranging markets</li> </ul>"},{"location":"indicators/volatility/midprice/#trading-signals","title":"Trading Signals","text":"<ul> <li>Buy Signal: Price bounces from below when approaching MIDPRICE in uptrend</li> <li>Sell Signal: Price rejects from above when approaching MIDPRICE in downtrend</li> <li>Range Trading: Buy near range lows, sell near range highs, with MIDPRICE as pivot</li> <li>Breakout: Strong move through MIDPRICE may signal trend continuation</li> </ul>"},{"location":"indicators/volatility/midprice/#example-range-trading-with-midprice","title":"Example: Range Trading with MIDPRICE","text":"<pre><code>high, low, close = load_ohlc_data('AAPL')\n\nmidprice = SQA::TAI.midprice(high, low, period: 14)\ncurrent_price = close.last\ncurrent_midprice = midprice.last\n\n# Calculate range boundaries\nlookback = 14\nhighest_high = high[-lookback..-1].max\nlowest_low = low[-lookback..-1].min\nrange_size = highest_high - lowest_low\n\n# Determine position within range\nposition_in_range = (current_price - lowest_low) / range_size * 100\n\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"MIDPRICE: $#{current_midprice.round(2)}\"\nputs \"Range: $#{lowest_low.round(2)} - $#{highest_high.round(2)}\"\nputs \"Position in Range: #{position_in_range.round(1)}%\"\n\n# Trading zones\nif position_in_range &lt; 30\n  puts \"Status: Lower third of range (potential BUY zone)\"\nelsif position_in_range &gt; 70\n  puts \"Status: Upper third of range (potential SELL zone)\"\nelse\n  puts \"Status: Middle of range (WAIT for better position)\"\nend\n\n# Check relationship to MIDPRICE\nif current_price &gt; current_midprice\n  distance = ((current_price / current_midprice - 1) * 100).round(2)\n  puts \"Price #{distance}% above MIDPRICE (bullish bias)\"\nelse\n  distance = ((1 - current_price / current_midprice) * 100).round(2)\n  puts \"Price #{distance}% below MIDPRICE (bearish bias)\"\nend\n</code></pre>"},{"location":"indicators/volatility/midprice/#example-midprice-mean-reversion-strategy","title":"Example: MIDPRICE Mean Reversion Strategy","text":"<pre><code>high, low, close = load_ohlc_data('MSFT')\n\nmidprice = SQA::TAI.midprice(high, low, period: 20)\natr = SQA::TAI.atr(high, low, close, period: 14)\n\ncurrent_price = close.last\ncurrent_midprice = midprice.last\ncurrent_atr = atr.last\n\n# Calculate distance from MIDPRICE in ATR units\ndistance_atr = (current_price - current_midprice) / current_atr\n\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"MIDPRICE: $#{current_midprice.round(2)}\"\nputs \"Distance: #{distance_atr.round(2)} ATR\"\n\n# Mean reversion signals\nif distance_atr &lt; -1.5\n  puts \"\\nMEAN REVERSION BUY SIGNAL\"\n  puts \"Price significantly below MIDPRICE\"\n  entry = current_price\n  target = current_midprice\n  stop = current_price - (0.5 * current_atr)\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Target (MIDPRICE): $#{target.round(2)}\"\n  puts \"Stop: $#{stop.round(2)}\"\n  puts \"Potential Gain: $#{(target - entry).round(2)}\"\nelsif distance_atr &gt; 1.5\n  puts \"\\nMEAN REVERSION SELL SIGNAL\"\n  puts \"Price significantly above MIDPRICE\"\n  entry = current_price\n  target = current_midprice\n  stop = current_price + (0.5 * current_atr)\n  puts \"Entry: $#{entry.round(2)}\"\n  puts \"Target (MIDPRICE): $#{target.round(2)}\"\n  puts \"Stop: $#{stop.round(2)}\"\n  puts \"Potential Gain: $#{(entry - target).round(2)}\"\nelse\n  puts \"\\nPrice within normal range of MIDPRICE - NO SIGNAL\"\nend\n</code></pre>"},{"location":"indicators/volatility/midprice/#example-midprice-breakout-detection","title":"Example: MIDPRICE Breakout Detection","text":"<pre><code>high, low, close = load_ohlc_data('TSLA')\n\n# Multiple timeframe MIDPRICE\nmidprice_short = SQA::TAI.midprice(high, low, period: 10)\nmidprice_medium = SQA::TAI.midprice(high, low, period: 20)\nmidprice_long = SQA::TAI.midprice(high, low, period: 50)\n\ncurrent_price = close.last\n\n# Check alignment\nshort_mp = midprice_short.last\nmedium_mp = midprice_medium.last\nlong_mp = midprice_long.last\n\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"10-period MIDPRICE: $#{short_mp.round(2)}\"\nputs \"20-period MIDPRICE: $#{medium_mp.round(2)}\"\nputs \"50-period MIDPRICE: $#{long_mp.round(2)}\"\n\n# Trend detection through MIDPRICE alignment\nif short_mp &gt; medium_mp &amp;&amp; medium_mp &gt; long_mp &amp;&amp; current_price &gt; short_mp\n  puts \"\\nSTRONG BULLISH SETUP\"\n  puts \"All MIDPRICE levels aligned upward\"\n  puts \"Price above short-term MIDPRICE\"\n  puts \"Consider long positions on pullbacks to MIDPRICE\"\nelsif short_mp &lt; medium_mp &amp;&amp; medium_mp &lt; long_mp &amp;&amp; current_price &lt; short_mp\n  puts \"\\nSTRONG BEARISH SETUP\"\n  puts \"All MIDPRICE levels aligned downward\"\n  puts \"Price below short-term MIDPRICE\"\n  puts \"Consider short positions on rallies to MIDPRICE\"\nelse\n  puts \"\\nRANGING MARKET\"\n  puts \"MIDPRICE levels not aligned\"\n  puts \"Use mean reversion strategies\"\nend\n</code></pre>"},{"location":"indicators/volatility/midprice/#example-midprice-support-and-resistance","title":"Example: MIDPRICE Support and Resistance","text":"<pre><code>high, low, close = load_ohlc_data('NVDA')\n\nmidprice = SQA::TAI.midprice(high, low, period: 20)\n\n# Track MIDPRICE touches\ntouches = []\nlookback = 50\n\n(lookback..close.length-1).each do |i|\n  next if midprice[i].nil?\n\n  # Check if price touched MIDPRICE (within 0.5%)\n  mp = midprice[i]\n  tolerance = mp * 0.005\n\n  if (low[i] - tolerance &lt;= mp) &amp;&amp; (high[i] + tolerance &gt;= mp)\n    # Determine if it acted as support or resistance\n    prior_close = close[i-1]\n    current_close = close[i]\n\n    if prior_close &lt; mp &amp;&amp; current_close &gt; mp\n      touches &lt;&lt; { index: i, type: 'support', price: mp }\n    elsif prior_close &gt; mp &amp;&amp; current_close &lt; mp\n      touches &lt;&lt; { index: i, type: 'resistance', price: mp }\n    end\n  end\nend\n\nputs \"MIDPRICE Touch Analysis (last #{lookback} periods):\"\nputs \"Total touches: #{touches.length}\"\nputs \"Support touches: #{touches.count { |t| t[:type] == 'support' }}\"\nputs \"Resistance touches: #{touches.count { |t| t[:type] == 'resistance' }}\"\n\n# Recent behavior\nrecent_touches = touches.last(5)\nputs \"\\nRecent MIDPRICE interactions:\"\nrecent_touches.each do |touch|\n  puts \"Period #{touch[:index]}: #{touch[:type].upcase} at $#{touch[:price].round(2)}\"\nend\n\n# Current status\ncurrent_mp = midprice.last\ncurrent_price = close.last\nif current_price &gt; current_mp\n  puts \"\\nCurrent: Price trading above MIDPRICE ($#{current_mp.round(2)})\"\n  puts \"Watch MIDPRICE as potential support on pullback\"\nelse\n  puts \"\\nCurrent: Price trading below MIDPRICE ($#{current_mp.round(2)})\"\n  puts \"Watch MIDPRICE as potential resistance on rally\"\nend\n</code></pre>"},{"location":"indicators/volatility/midprice/#example-range-contractionexpansion","title":"Example: Range Contraction/Expansion","text":"<pre><code>high, low, close = load_ohlc_data('SPY')\n\nperiod = 20\nmidprice = SQA::TAI.midprice(high, low, period: period)\n\n# Calculate range size over time\nrange_sizes = high.each_with_index.map do |h, i|\n  next nil if i &lt; period - 1\n\n  lookback_high = high[(i-period+1)..i]\n  lookback_low = low[(i-period+1)..i]\n\n  lookback_high.max - lookback_low.min\nend\n\n# Find average range\navg_range = range_sizes.compact[-50..-1].sum / 50.0\ncurrent_range = range_sizes.last\n\nputs \"Range Analysis:\"\nputs \"Current Range: $#{current_range.round(2)}\"\nputs \"50-period Average Range: $#{avg_range.round(2)}\"\n\nrange_ratio = current_range / avg_range\nputs \"Range Ratio: #{range_ratio.round(2)}\"\n\nif range_ratio &lt; 0.7\n  puts \"\\nRANGE CONTRACTION\"\n  puts \"Range #{((1 - range_ratio) * 100).round(0)}% below average\"\n  puts \"Potential for volatility expansion ahead\"\n  puts \"Strategy: Prepare for breakout, use tight stops\"\n\n  # Calculate potential breakout levels\n  current_mp = midprice.last\n  breakout_up = current_mp + (avg_range / 2)\n  breakout_down = current_mp - (avg_range / 2)\n\n  puts \"Watch for breakout above: $#{breakout_up.round(2)}\"\n  puts \"Watch for breakdown below: $#{breakout_down.round(2)}\"\n\nelsif range_ratio &gt; 1.3\n  puts \"\\nRANGE EXPANSION\"\n  puts \"Range #{((range_ratio - 1) * 100).round(0)}% above average\"\n  puts \"High volatility period\"\n  puts \"Strategy: Expect mean reversion toward MIDPRICE\"\nelse\n  puts \"\\nNORMAL RANGE\"\n  puts \"Standard trading range\"\n  puts \"Strategy: Use standard range trading around MIDPRICE\"\nend\n</code></pre>"},{"location":"indicators/volatility/midprice/#example-midprice-vs-midpoint-comparison","title":"Example: MIDPRICE vs MIDPOINT Comparison","text":"<pre><code>high, low, close = load_ohlc_data('AAPL')\n\nmidprice = SQA::TAI.midprice(high, low, period: 14)\nmidpoint = SQA::TAI.midpoint(close, period: 14)\n\ncurrent_price = close.last\ncurrent_midprice = midprice.last\ncurrent_midpoint = midpoint.last\n\nputs \"Comparison of MIDPRICE vs MIDPOINT:\"\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"MIDPRICE (High/Low midpoint): $#{current_midprice.round(2)}\"\nputs \"MIDPOINT (Close midpoint): $#{current_midpoint.round(2)}\"\nputs \"Difference: $#{(current_midprice - current_midpoint).round(2)}\"\n\n# The difference reveals range characteristics\nif current_midprice &gt; current_midpoint\n  puts \"\\nMIDPRICE &gt; MIDPOINT:\"\n  puts \"Highs are more elevated relative to lows\"\n  puts \"Suggests bullish bias in recent range\"\nelsif current_midprice &lt; current_midpoint\n  puts \"\\nMIDPRICE &lt; MIDPOINT:\"\n  puts \"Lows are more depressed relative to highs\"\n  puts \"Suggests bearish bias in recent range\"\nelse\n  puts \"\\nMIDPRICE = MIDPOINT:\"\n  puts \"Symmetric range, no directional bias\"\nend\n\n# Trading implications\nif current_price &gt; current_midprice &amp;&amp; current_price &gt; current_midpoint\n  puts \"\\nPrice above both: Strong bullish position\"\nelsif current_price &lt; current_midprice &amp;&amp; current_price &lt; current_midpoint\n  puts \"\\nPrice below both: Strong bearish position\"\nelsif current_price &gt; current_midprice &amp;&amp; current_price &lt; current_midpoint\n  puts \"\\nPrice between indicators: Mixed signals, wait for clarity\"\nelsif current_price &lt; current_midprice &amp;&amp; current_price &gt; current_midpoint\n  puts \"\\nPrice between indicators: Mixed signals, wait for clarity\"\nend\n</code></pre>"},{"location":"indicators/volatility/midprice/#common-uses","title":"Common Uses","text":""},{"location":"indicators/volatility/midprice/#1-range-midpoint-trading","title":"1. Range Midpoint Trading","text":"<pre><code># Buy near lows, sell near highs, pivot at MIDPRICE\nif current_price &lt; midprice &amp;&amp; position_in_range &lt; 30\n  signal = :buy\nelsif current_price &gt; midprice &amp;&amp; position_in_range &gt; 70\n  signal = :sell\nend\n</code></pre>"},{"location":"indicators/volatility/midprice/#2-mean-reversion","title":"2. Mean Reversion","text":"<pre><code># Trade when price deviates significantly from MIDPRICE\ndeviation = (current_price - midprice) / atr\nentry_signal = deviation.abs &gt; 1.5\n</code></pre>"},{"location":"indicators/volatility/midprice/#3-dynamic-supportresistance","title":"3. Dynamic Support/Resistance","text":"<pre><code># Use MIDPRICE as pivot for support/resistance\nif price_above_midprice\n  role = :support  # MIDPRICE acts as support\nelse\n  role = :resistance  # MIDPRICE acts as resistance\nend\n</code></pre>"},{"location":"indicators/volatility/midprice/#4-breakout-confirmation","title":"4. Breakout Confirmation","text":"<pre><code># Confirm breakout when price clears MIDPRICE with momentum\nbreakout = close &gt; midprice &amp;&amp; close &gt; prior_high\n</code></pre>"},{"location":"indicators/volatility/midprice/#midprice-period-settings","title":"MIDPRICE Period Settings","text":"Period Use Case Characteristics 5-10 Short-term Very responsive, frequent signals 14-20 Standard Balanced view, most common 30-50 Medium-term Smoother, less noise 100+ Long-term Major range levels"},{"location":"indicators/volatility/midprice/#midprice-vs-similar-indicators","title":"MIDPRICE vs Similar Indicators","text":"Indicator Input Use Case Key Difference MIDPRICE High/Low Range midpoint Uses extreme prices MIDPOINT Close Price midpoint Uses closing prices only SMA Close Trend following Moving average vs midpoint MEDPRICE High/Low Daily midpoint Single period vs range"},{"location":"indicators/volatility/midprice/#advantages","title":"Advantages","text":"<ul> <li>Simple and intuitive calculation</li> <li>Clearly defines range center</li> <li>Works well in ranging markets</li> <li>Non-lagging within the defined period</li> <li>Useful for both support/resistance and mean reversion</li> <li>Objective measure of range equilibrium</li> </ul>"},{"location":"indicators/volatility/midprice/#limitations","title":"Limitations","text":"<ul> <li>Less effective in strong trending markets</li> <li>Doesn't account for volume or momentum</li> <li>Can change significantly with new highs/lows</li> <li>May generate false signals during consolidation</li> <li>Requires range-bound conditions for best results</li> <li>Period selection significantly affects behavior</li> </ul>"},{"location":"indicators/volatility/midprice/#tips-for-using-midprice","title":"Tips for Using MIDPRICE","text":"<ol> <li>Combine with Volatility: Use ATR to measure distance from MIDPRICE</li> <li>Multiple Timeframes: Compare short and long-term MIDPRICE for context</li> <li>Range Confirmation: Verify price is actually ranging before using</li> <li>Volume Analysis: Confirm signals with volume at MIDPRICE levels</li> <li>Trend Filter: Best used when price is not in strong directional trend</li> <li>Adjust Period: Shorter periods for day trading, longer for swing trading</li> </ol>"},{"location":"indicators/volatility/midprice/#related-indicators","title":"Related Indicators","text":"<ul> <li>Midpoint (MIDPOINT) - Uses closing prices instead of high/low</li> <li>Median Price (MEDPRICE) - Single period high/low average</li> <li>Average True Range (ATR) - Measure deviation from MIDPRICE</li> <li>Bollinger Bands - Envelope around moving average</li> </ul>"},{"location":"indicators/volatility/midprice/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> </ul> <ul> <li>Range Trading Strategies</li> </ul>"},{"location":"indicators/volatility/natr/","title":"NATR (Normalized Average True Range)","text":""},{"location":"indicators/volatility/natr/#overview","title":"Overview","text":"<p>The Normalized Average True Range (NATR) is a volatility indicator that expresses the Average True Range (ATR) as a percentage of the closing price. By normalizing ATR, NATR allows traders to compare volatility across different securities regardless of their price levels, making it ideal for portfolio analysis, cross-asset comparisons, and relative volatility assessments. A stock trading at $10 with an ATR of $0.50 has the same NATR as a stock at $100 with an ATR of $5.00 (both 5%).</p>"},{"location":"indicators/volatility/natr/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period <code>period</code> Integer 14 Number of periods for ATR calculation"},{"location":"indicators/volatility/natr/#parameter-details","title":"Parameter Details","text":"<p>high, low, close - Same requirements as ATR calculation - Must have same length - Need sufficient data (at least period + 1 values) - NATR first calculates ATR, then normalizes by close price</p> <p>period - Default is 14 periods (Wilder's original ATR setting) - Represents lookback period for averaging true range - Shorter periods (7-10): More responsive to recent volatility changes - Longer periods (21-30): Smoother, better for long-term volatility assessment - Common settings:   - Day trading: 7-10 periods   - Swing trading: 14 periods (standard)   - Position trading: 21-30 periods</p>"},{"location":"indicators/volatility/natr/#usage","title":"Usage","text":""},{"location":"indicators/volatility/natr/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh  = [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35,\n         49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow   = [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03,\n         49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\nclose = [48.20, 48.61, 48.75, 48.63, 48.74, 49.03, 49.07, 49.32,\n         49.91, 50.13, 49.53, 49.50, 49.25, 49.20, 49.45]\n\n# Calculate NATR with default 14-period setting\nnatr = SQA::TAI.natr(high, low, close, period: 14)\n\nputs \"Current NATR: #{natr.last.round(2)}%\"\n</code></pre>"},{"location":"indicators/volatility/natr/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># Short-term volatility (7-period)\nnatr_short = SQA::TAI.natr(high, low, close, period: 7)\n\n# Long-term volatility (21-period)\nnatr_long = SQA::TAI.natr(high, low, close, period: 21)\n\nputs \"7-day NATR: #{natr_short.last.round(2)}%\"\nputs \"14-day NATR: #{natr.last.round(2)}%\"\nputs \"21-day NATR: #{natr_long.last.round(2)}%\"\n</code></pre>"},{"location":"indicators/volatility/natr/#comparing-multiple-assets","title":"Comparing Multiple Assets","text":"<pre><code># Compare volatility across different securities\nsymbols = ['AAPL', 'GOOGL', 'TSLA', 'SPY']\n\nvolatility_comparison = symbols.map do |symbol|\n  high, low, close = load_ohlc_data(symbol)\n  natr = SQA::TAI.natr(high, low, close, period: 14)\n\n  {\n    symbol: symbol,\n    price: close.last.round(2),\n    natr: natr.last.round(2)\n  }\nend\n\n# Sort by volatility (highest to lowest)\nvolatility_comparison.sort_by { |v| -v[:natr] }.each do |data|\n  puts \"#{data[:symbol]}: #{data[:natr]}% (Price: $#{data[:price]})\"\nend\n</code></pre>"},{"location":"indicators/volatility/natr/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/volatility/natr/#what-it-measures","title":"What It Measures","text":"<p>NATR measures volatility relative to price level:</p> <ul> <li>Relative Volatility: Percentage-based volatility that's comparable across assets</li> <li>Price-Adjusted Risk: How much an asset moves relative to its price</li> <li>Normalized Comparison: Enables direct comparison between $10 and $1000 stocks</li> <li>Portfolio Balancing: Helps identify which positions have similar risk profiles</li> </ul> <p>NATR answers: \"What percentage of its price does this security typically move per period?\"</p>"},{"location":"indicators/volatility/natr/#calculation-method","title":"Calculation Method","text":"<p>NATR is calculated in two steps:</p> <ol> <li>Calculate ATR: Standard Average True Range over the specified period</li> <li>Normalize by Close: Divide ATR by current close price and multiply by 100</li> </ol> <p>Formula: <pre><code>NATR = (ATR / Close) \u00d7 100\n\nWhere:\n- ATR = Average True Range over period\n- Close = Current closing price\n- Result expressed as percentage\n</code></pre></p> <p>Example Calculation: <pre><code>Stock A: Price = $100, ATR = $3.00\nNATR = (3.00 / 100) \u00d7 100 = 3.0%\n\nStock B: Price = $20, ATR = $0.60\nNATR = (0.60 / 20) \u00d7 100 = 3.0%\n\nBoth stocks have same relative volatility despite different prices\n</code></pre></p>"},{"location":"indicators/volatility/natr/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded positive percentage (typically 0.5% to 10%+)</li> <li>Type: Volatility measure, normalized oscillator</li> <li>Lag: Moderate (inherits ATR's smoothing lag)</li> <li>Best Used: Cross-asset comparisons, portfolio construction, relative risk assessment</li> <li>Limitations: Doesn't indicate direction, requires multiple assets for context</li> </ul>"},{"location":"indicators/volatility/natr/#interpretation","title":"Interpretation","text":""},{"location":"indicators/volatility/natr/#value-ranges","title":"Value Ranges","text":"<p>Understanding NATR percentages:</p> <ul> <li>Below 1%: Very low volatility, stable price action. Common for utility stocks, bonds, stable large-caps.</li> <li>1-2%: Low to moderate volatility. Typical for established blue-chip stocks in normal conditions.</li> <li>2-4%: Moderate to elevated volatility. Common for growth stocks, mid-caps, or markets with some uncertainty.</li> <li>4-7%: High volatility. Seen in small-caps, growth stocks during earnings, or market stress periods.</li> <li>Above 7%: Very high volatility. Typical for speculative stocks, during major news, or market crashes.</li> </ul> <p>Context Matters: Compare NATR to the asset's historical range and peer group averages.</p>"},{"location":"indicators/volatility/natr/#key-patterns","title":"Key Patterns","text":"<ul> <li>Rising NATR: Volatility expanding, risk increasing, uncertainty growing</li> <li>Falling NATR: Volatility contracting, risk decreasing, price stabilizing</li> <li>Stable NATR: Consistent volatility environment</li> <li>NATR Spikes: Sudden volatility events (earnings, news, market shocks)</li> <li>Relative NATR: High NATR vs peers suggests higher risk/reward potential</li> </ul>"},{"location":"indicators/volatility/natr/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to use NATR signals:</p> <ol> <li>Portfolio Risk Management</li> <li>High NATR assets: Reduce position size to maintain consistent portfolio risk</li> <li>Low NATR assets: Can increase position size for balanced exposure</li> <li> <p>Target equal risk contribution across positions</p> </li> <li> <p>Asset Selection</p> </li> <li>Compare NATR within sector to find outliers</li> <li>High NATR = higher risk but potentially higher returns</li> <li>Low NATR = lower risk but potentially lower returns</li> <li> <p>Match NATR to risk tolerance</p> </li> <li> <p>Market Regime Identification</p> </li> <li>Rising NATR across market = increasing uncertainty</li> <li>Falling NATR across market = stabilizing conditions</li> <li>Divergent NATR = sector rotation or stock-specific issues</li> </ol>"},{"location":"indicators/volatility/natr/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/volatility/natr/#position-sizing-based-on-natr","title":"Position Sizing Based on NATR","text":"<p>NATR is primarily used for risk management rather than entry/exit signals:</p> <ol> <li> <p>Equal Risk Position Sizing <pre><code># Size positions inversely to NATR for equal risk\naccount_risk = 10000  # Risk $10k on this trade\nnatr = 3.5  # 3.5% NATR\n\n# Stop loss at 2x NATR\nstop_distance_pct = natr * 2  # 7%\nposition_value = account_risk / (stop_distance_pct / 100)\n\nshares = (position_value / current_price).floor\n</code></pre></p> </li> <li> <p>Volatility Filtering</p> </li> <li>Only trade assets with NATR in acceptable range</li> <li>Example: Only trade stocks with 2-5% NATR</li> <li> <p>Avoids extremely volatile (whipsaw) or dead (no movement) stocks</p> </li> <li> <p>Dynamic Stop Losses</p> </li> <li>Use NATR to set percentage-based stops</li> <li>High NATR = wider stops, Low NATR = tighter stops</li> <li>Example: Stop = 2 \u00d7 NATR percentage</li> </ol>"},{"location":"indicators/volatility/natr/#risk-adjustment-signals","title":"Risk Adjustment Signals","text":"<p>High NATR Alert (Above 6%): - Reduce position size by 30-50% - Widen stop losses to avoid normal volatility - Consider options strategies instead of stock - Monitor more frequently for sudden moves</p> <p>Low NATR Alert (Below 1%): - Can increase position size moderately - Tighten stop losses (less room needed) - Suitable for larger positions - Less frequent monitoring needed</p> <p>NATR Spike (2x average): - Volatility event occurring - Avoid new entries until stabilization - Widen existing stops temporarily - May signal earnings, news, or market event</p>"},{"location":"indicators/volatility/natr/#best-practices","title":"Best Practices","text":""},{"location":"indicators/volatility/natr/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When NATR works best:</p> <ul> <li>Portfolio construction: Creating balanced risk exposure across multiple assets</li> <li>Position sizing: Determining appropriate position sizes based on volatility</li> <li>Asset comparison: Comparing relative volatility across different price levels</li> <li>Risk management: Setting stops and targets based on normalized volatility</li> <li>Sector rotation: Identifying changing volatility patterns by sector</li> </ul>"},{"location":"indicators/volatility/natr/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended combinations:</p> <ul> <li> <p>With ATR: Use NATR for comparison, ATR for absolute dollar risk on specific positions</p> </li> <li> <p>With RSI/MACD: Combine NATR (volatility) with momentum indicators for complete picture</p> </li> <li>High NATR + oversold RSI = high-risk reversal opportunity</li> <li> <p>Low NATR + strong MACD = stable trending opportunity</p> </li> <li> <p>With Bollinger Bands: NATR confirms Band width changes</p> </li> <li>Rising NATR + expanding Bands = confirmed volatility increase</li> <li>Falling NATR + contracting Bands = consolidation phase</li> </ul>"},{"location":"indicators/volatility/natr/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Using as entry/exit signal: NATR measures volatility, not direction. Don't use crosses or levels as trade signals.</p> </li> <li> <p>Ignoring historical context: 3% NATR means different things for tech stocks vs utilities. Always compare to historical norms.</p> </li> <li> <p>Not adjusting for market conditions: During market stress, \"normal\" NATR levels shift higher across all assets.</p> </li> <li> <p>Comparing across asset classes: Don't compare stock NATR to forex or commodity NATR directly.</p> </li> </ol>"},{"location":"indicators/volatility/natr/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<ul> <li>Short-term traders (day trading): 7-10 period NATR for recent volatility</li> <li>Swing traders: 14 period NATR (standard) for medium-term volatility</li> <li>Position traders: 21-30 period NATR for longer-term volatility profile</li> <li>Backtesting: Use period matching your typical holding period</li> </ul>"},{"location":"indicators/volatility/natr/#practical-example","title":"Practical Example","text":"<p>Complete portfolio risk management example:</p> <pre><code>require 'sqa/tai'\n\n# Portfolio of different stocks\nportfolio = [\n  { symbol: 'AAPL', shares: 100, price: 175.0 },\n  { symbol: 'TSLA', shares: 50, price: 250.0 },\n  { symbol: 'KO', shares: 200, price: 60.0 },\n  { symbol: 'SPY', shares: 150, price: 450.0 }\n]\n\n# Calculate NATR for each position\nportfolio.each do |position|\n  high, low, close = load_ohlc_data(position[:symbol])\n  natr = SQA::TAI.natr(high, low, close, period: 14)\n  atr = SQA::TAI.atr(high, low, close, period: 14)\n\n  position[:natr] = natr.last\n  position[:atr] = atr.last\n  position[:value] = position[:shares] * position[:price]\n  position[:dollar_risk] = position[:shares] * (2 * atr.last)  # 2xATR stop\n  position[:pct_risk] = (position[:dollar_risk] / position[:value]) * 100\nend\n\nputs \"=== Portfolio Risk Analysis ===\"\nputs\n\nportfolio.each do |pos|\n  puts \"#{pos[:symbol]}:\"\n  puts \"  Position Value: $#{pos[:value].round(0)}\"\n  puts \"  NATR: #{pos[:natr].round(2)}%\"\n  puts \"  Dollar Risk (2xATR stop): $#{pos[:dollar_risk].round(0)}\"\n  puts \"  % Risk of Position: #{pos[:pct_risk].round(2)}%\"\n  puts\nend\n\n# Identify high and low volatility positions\nhigh_vol = portfolio.select { |p| p[:natr] &gt; 4.0 }\nlow_vol = portfolio.select { |p| p[:natr] &lt; 2.0 }\n\nputs \"High Volatility Positions (&gt;4% NATR):\"\nhigh_vol.each { |p| puts \"  #{p[:symbol]}: #{p[:natr].round(2)}%\" }\n\nputs \"\\nLow Volatility Positions (&lt;2% NATR):\"\nlow_vol.each { |p| puts \"  #{p[:symbol]}: #{p[:natr].round(2)}%\" }\n\n# Calculate total portfolio dollar risk\ntotal_risk = portfolio.sum { |p| p[:dollar_risk] }\ntotal_value = portfolio.sum { |p| p[:value] }\nportfolio_risk_pct = (total_risk / total_value) * 100\n\nputs \"\\nPortfolio Summary:\"\nputs \"  Total Value: $#{total_value.round(0)}\"\nputs \"  Total Dollar Risk: $#{total_risk.round(0)}\"\nputs \"  Portfolio Risk %: #{portfolio_risk_pct.round(2)}%\"\n</code></pre>"},{"location":"indicators/volatility/natr/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/volatility/natr/#similar-indicators","title":"Similar Indicators","text":"<ul> <li> <p>Average True Range (ATR): The foundation of NATR. ATR for absolute dollar risk, NATR for relative percentage risk.</p> </li> <li> <p>Bollinger Band Width: Another normalized volatility measure. Band Width uses standard deviation, NATR uses average true range.</p> </li> </ul>"},{"location":"indicators/volatility/natr/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li> <p>ATR: Use together - NATR for comparison, ATR for position-specific risk calculations</p> </li> <li> <p>Standard Deviation: Alternative volatility measure. NATR captures gaps and full range, StdDev focuses on close-to-close changes</p> </li> </ul>"},{"location":"indicators/volatility/natr/#indicator-family","title":"Indicator Family","text":"<p>NATR is part of the volatility measurement family: - True Range: Single period volatility - ATR: Average volatility in dollars - NATR: Average volatility as percentage - Bollinger Bands: Volatility bands around price</p> <p>When to prefer NATR: For comparing volatility across different price levels, portfolio risk management, and cross-asset analysis. Use NATR when you need to answer \"which asset is more volatile relative to its price?\"</p>"},{"location":"indicators/volatility/natr/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/volatility/natr/#multi-timeframe-volatility-analysis","title":"Multi-Timeframe Volatility Analysis","text":"<p>Using NATR across timeframes:</p> <ul> <li>Daily NATR: Standard reference for volatility</li> <li>Weekly NATR: Long-term volatility regime</li> <li>Hourly NATR: Intraday volatility patterns</li> </ul> <p>Mismatches can reveal important insights (e.g., low daily NATR but high hourly NATR suggests intraday chop within tight daily range).</p>"},{"location":"indicators/volatility/natr/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>NATR in different market conditions:</p> <ul> <li>Bull Markets: Average NATR tends lower as prices grind higher</li> <li>Bear Markets: Average NATR spikes as fear drives volatility</li> <li>Crisis Periods: NATR can exceed 10-15% even for large-caps</li> <li>Low Volatility Regimes: NATR under 1% common for indexes and blue-chips</li> </ul>"},{"location":"indicators/volatility/natr/#statistical-validation","title":"Statistical Validation","text":"<p>NATR characteristics:</p> <ul> <li>Mean Reversion: High NATR tends to revert to average over time</li> <li>Typical Ranges: Most stocks have 1-5% NATR in normal conditions</li> <li>Extreme Values: NATR above 10% suggests special situation (earnings, news, crisis)</li> <li>Correlation: Rising NATR often coincides with downtrends (volatility and price negatively correlated)</li> </ul>"},{"location":"indicators/volatility/natr/#references","title":"References","text":"<ul> <li>Wilder, J. Welles Jr. \"New Concepts in Technical Trading Systems\" (1978) - ATR foundation</li> <li>StockCharts: ATR and NATR</li> <li>TradingView: NATR Documentation</li> </ul>"},{"location":"indicators/volatility/natr/#see-also","title":"See Also","text":"<ul> <li>Volatility Indicators Overview</li> <li>ATR - Average True Range</li> <li>TRANGE - True Range</li> <li>Basic Usage Guide</li> </ul>"},{"location":"indicators/volatility/sar/","title":"Parabolic SAR (Stop and Reverse)","text":"<p>The Parabolic SAR (Stop and Reverse) is a trend-following indicator that provides entry and exit points. It appears as dots above or below price, indicating the direction of the trend and potential reversal points.</p>"},{"location":"indicators/volatility/sar/#formula","title":"Formula","text":"<p>SAR is calculated using an acceleration factor that increases as the trend develops: - If long: SAR = Prior SAR + AF * (Prior EP - Prior SAR) - If short: SAR = Prior SAR - AF * (Prior SAR - Prior EP)</p> <p>Where EP is the Extreme Point (highest high or lowest low) and AF is the Acceleration Factor.</p>"},{"location":"indicators/volatility/sar/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>acceleration</code> Float No 0.02 Acceleration factor <code>maximum</code> Float No 0.20 Maximum acceleration"},{"location":"indicators/volatility/sar/#returns","title":"Returns","text":"<p>Returns an array of SAR values. When SAR is below price, the trend is up; when above, the trend is down.</p>"},{"location":"indicators/volatility/sar/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh = [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow =  [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\n\nsar = SQA::TAI.sar(high, low)\n\nputs \"Current SAR: #{sar.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/sar/#interpretation","title":"Interpretation","text":"<ul> <li>SAR below price: Uptrend - hold long positions</li> <li>SAR above price: Downtrend - hold short positions</li> <li>Price crosses SAR: Trend reversal signal</li> </ul>"},{"location":"indicators/volatility/sar/#example-sar-trend-following","title":"Example: SAR Trend Following","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\nsar = SQA::TAI.sar(high, low)\n\ncurrent_price = close.last\ncurrent_sar = sar.last\n\nif current_price &gt; current_sar\n  puts \"UPTREND - Price above SAR (#{current_sar.round(2)})\"\n  puts \"Hold long / Look for buy opportunities\"\nelse\n  puts \"DOWNTREND - Price below SAR (#{current_sar.round(2)})\"\n  puts \"Hold short / Look for sell opportunities\"\nend\n</code></pre>"},{"location":"indicators/volatility/sar/#example-sar-reversal-detection","title":"Example: SAR Reversal Detection","text":"<pre><code>high, low, close = load_historical_ohlc('SPY')\nsar = SQA::TAI.sar(high, low, acceleration: 0.02, maximum: 0.20)\n\nprev_price = close[-2]\ncurr_price = close.last\nprev_sar = sar[-2]\ncurr_sar = sar.last\n\n# Bullish reversal\nif prev_price &lt; prev_sar &amp;&amp; curr_price &gt; curr_sar\n  puts \"BULLISH REVERSAL - Price crossed above SAR\"\n  puts \"New uptrend beginning - BUY signal\"\n# Bearish reversal\nelsif prev_price &gt; prev_sar &amp;&amp; curr_price &lt; curr_sar\n  puts \"BEARISH REVERSAL - Price crossed below SAR\"\n  puts \"New downtrend beginning - SELL signal\"\nend\n</code></pre>"},{"location":"indicators/volatility/sar/#acceleration-factor-guidelines","title":"Acceleration Factor Guidelines","text":"<ul> <li>Default (0.02, 0.20): Standard settings for most markets</li> <li>More sensitive (0.03, 0.25): Faster reversals, more signals</li> <li>Less sensitive (0.01, 0.15): Slower reversals, fewer signals</li> </ul>"},{"location":"indicators/volatility/sar/#common-settings","title":"Common Settings","text":"Accel Maximum Use Case 0.02 0.20 Standard (Wilder's original) 0.01 0.15 Trending markets 0.03 0.25 Volatile markets"},{"location":"indicators/volatility/sar/#best-practices","title":"Best Practices","text":"<ol> <li>Works best in trending markets</li> <li>Can produce whipsaws in sideways markets</li> <li>Use with trend filters (ADX, moving averages)</li> <li>SAR provides stop-loss levels naturally</li> </ol>"},{"location":"indicators/volatility/sar/#related-indicators","title":"Related Indicators","text":"<ul> <li>SAREXT - Parabolic SAR Extended</li> <li>ADX - Trend strength filter</li> </ul>"},{"location":"indicators/volatility/sar/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Volatility Indicators Overview</li> </ul>"},{"location":"indicators/volatility/sarext/","title":"Parabolic SAR Extended (SAREXT)","text":"<p>The Parabolic SAR Extended (SAREXT) is an advanced version of the standard Parabolic SAR that provides asymmetric control over long and short positions. While the standard SAR uses the same acceleration parameters for both directions, SAREXT allows traders to set different acceleration factors, starting values, and offsets for long versus short positions. This is particularly valuable in markets that exhibit different momentum characteristics in uptrends versus downtrends.</p>"},{"location":"indicators/volatility/sarext/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh = [48.70, 48.72, 48.90, 48.87, 48.82, 49.05, 49.20, 49.35, 49.92, 50.19, 50.12, 50.10, 50.00, 49.75, 49.80]\nlow =  [47.79, 48.14, 48.39, 48.37, 48.24, 48.64, 48.94, 49.03, 49.50, 49.87, 49.20, 49.00, 48.90, 49.00, 49.10]\n\n# Basic usage with defaults (symmetric behavior like standard SAR)\nsarext = SQA::TAI.sarext(high, low)\n\n# Asymmetric parameters for different long/short characteristics\nsarext = SQA::TAI.sarext(\n  high, low,\n  start_value: 0.0,\n  offset_on_reverse: 0.0,\n  accel_init_long: 0.02,    # Initial acceleration for longs\n  accel_long: 0.02,         # Acceleration step for longs\n  accel_max_long: 0.20,     # Maximum acceleration for longs\n  accel_init_short: 0.03,   # Initial acceleration for shorts (more aggressive)\n  accel_short: 0.03,        # Acceleration step for shorts\n  accel_max_short: 0.25     # Maximum acceleration for shorts\n)\n\nputs \"Current SAREXT: #{sarext.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/sarext/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>start_value</code> Float No 0.0 Starting SAR value (0.0 = automatic) <code>offset_on_reverse</code> Float No 0.0 Offset applied when trend reverses <code>accel_init_long</code> Float No 0.02 Initial acceleration factor for long positions <code>accel_long</code> Float No 0.02 Acceleration increment for long positions <code>accel_max_long</code> Float No 0.20 Maximum acceleration for long positions <code>accel_init_short</code> Float No 0.02 Initial acceleration factor for short positions <code>accel_short</code> Float No 0.02 Acceleration increment for short positions <code>accel_max_short</code> Float No 0.20 Maximum acceleration for short positions"},{"location":"indicators/volatility/sarext/#returns","title":"Returns","text":"<p>Returns an array of SAREXT values. When SAREXT is below price, the trend is up; when above, the trend is down. Values may differ from standard SAR due to asymmetric parameters.</p>"},{"location":"indicators/volatility/sarext/#interpretation","title":"Interpretation","text":"<p>SAREXT follows the same basic interpretation as standard SAR: - SAREXT below price: Uptrend - hold long positions - SAREXT above price: Downtrend - hold short positions - Price crosses SAREXT: Trend reversal signal</p> <p>However, with asymmetric parameters: - Long positions can have tighter or looser stops than shorts - Reversal sensitivity can differ between bullish and bearish signals - Stop-loss progression speed can match market characteristics</p>"},{"location":"indicators/volatility/sarext/#understanding-extended-parameters","title":"Understanding Extended Parameters","text":""},{"location":"indicators/volatility/sarext/#start-value","title":"Start Value","text":"<p>The initial SAR value when a new trend begins: - 0.0 (default): Automatically calculated from recent price action - Custom value: Useful for starting SAR at a known support/resistance level - Rarely changed from default in practice</p>"},{"location":"indicators/volatility/sarext/#offset-on-reverse","title":"Offset on Reverse","text":"<p>An additional offset applied when the trend reverses: - 0.0 (default): No offset - Positive value: Adds buffer space on reversal to avoid premature re-entries - Use case: Volatile markets where whipsaws are common - Example: 0.01 adds 1% buffer on trend reversals</p>"},{"location":"indicators/volatility/sarext/#acceleration-parameters-long-vs-short","title":"Acceleration Parameters (Long vs Short)","text":"<p>The key advantage of SAREXT is independent control of acceleration for longs and shorts:</p> <p>Initial Acceleration (accel_init_long/short) - Starting acceleration factor when entering a new trend - Higher values = SAR moves faster initially - Lower values = More conservative initial stop placement</p> <p>Acceleration Step (accel_long/short) - How much acceleration increases each period a trend continues - Higher values = SAR accelerates faster over time - Lower values = More gradual SAR progression</p> <p>Maximum Acceleration (accel_max_long/short) - Cap on how fast SAR can move - Higher values = SAR can catch price more aggressively - Lower values = More conservative trailing stops</p>"},{"location":"indicators/volatility/sarext/#example-basic-sarext-vs-standard-sar","title":"Example: Basic SAREXT vs Standard SAR","text":"<pre><code>high, low, close = load_historical_ohlc('AAPL')\n\n# Standard SAR (symmetric parameters)\nsar = SQA::TAI.sar(high, low, acceleration: 0.02, maximum: 0.20)\n\n# SAREXT with same parameters (should match standard SAR)\nsarext = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.02, accel_long: 0.02, accel_max_long: 0.20,\n  accel_init_short: 0.02, accel_short: 0.02, accel_max_short: 0.20\n)\n\nputs \"Standard SAR: #{sar.last.round(2)}\"\nputs \"SAREXT (symmetric): #{sarext.last.round(2)}\"\nputs \"Should be identical: #{(sar.last - sarext.last).abs &lt; 0.01}\"\n</code></pre>"},{"location":"indicators/volatility/sarext/#example-asymmetric-parameters-for-crypto-markets","title":"Example: Asymmetric Parameters for Crypto Markets","text":"<pre><code># Cryptocurrencies often fall faster than they rise\nhigh, low, close = load_historical_ohlc('BTC-USD')\n\nsarext = SQA::TAI.sarext(\n  high, low,\n  # Conservative longs (slower acceleration)\n  accel_init_long: 0.015,\n  accel_long: 0.015,\n  accel_max_long: 0.15,\n  # Aggressive shorts (faster acceleration to protect against dumps)\n  accel_init_short: 0.03,\n  accel_short: 0.03,\n  accel_max_short: 0.30\n)\n\ncurrent_price = close.last\ncurrent_sarext = sarext.last\n\nif current_price &gt; current_sarext\n  puts \"LONG POSITION - Conservative trailing stop\"\n  puts \"SAREXT at #{current_sarext.round(2)} (wider stop for volatility)\"\nelse\n  puts \"SHORT POSITION - Aggressive trailing stop\"\n  puts \"SAREXT at #{current_sarext.round(2)} (tighter stop for quick moves)\"\nend\n</code></pre>"},{"location":"indicators/volatility/sarext/#example-stock-market-asymmetry","title":"Example: Stock Market Asymmetry","text":"<pre><code># Stocks often have slower downtrends than uptrends (sell-offs are gradual)\nhigh, low, close = load_historical_ohlc('SPY')\n\nsarext = SQA::TAI.sarext(\n  high, low,\n  # Standard longs\n  accel_init_long: 0.02,\n  accel_long: 0.02,\n  accel_max_long: 0.20,\n  # Slower shorts (stocks grind down, not crash)\n  accel_init_short: 0.01,\n  accel_short: 0.01,\n  accel_max_short: 0.15\n)\n\ncurrent_price = close.last\ncurrent_sarext = sarext.last\n\nif current_price &gt; current_sarext\n  puts \"UPTREND - Standard trailing stop\"\nelse\n  puts \"DOWNTREND - Wider stop for grinding declines\"\n  puts \"Avoiding premature exits in slow downtrends\"\nend\n</code></pre>"},{"location":"indicators/volatility/sarext/#example-adding-offset-for-whipsaw-protection","title":"Example: Adding Offset for Whipsaw Protection","text":"<pre><code>high, low, close = load_historical_ohlc('EURUSD', interval: '1h')\n\n# Add offset on reverse to avoid immediate re-entry\nsarext = SQA::TAI.sarext(\n  high, low,\n  offset_on_reverse: 0.0005,  # 5 pip buffer on forex\n  accel_init_long: 0.02,\n  accel_long: 0.02,\n  accel_max_long: 0.20,\n  accel_init_short: 0.02,\n  accel_short: 0.02,\n  accel_max_short: 0.20\n)\n\nprev_price = close[-2]\ncurr_price = close.last\nprev_sarext = sarext[-2]\ncurr_sarext = sarext.last\n\n# Detect reversal with offset protection\nif prev_price &lt; prev_sarext &amp;&amp; curr_price &gt; curr_sarext\n  puts \"BULLISH REVERSAL with #{(curr_sarext - prev_sarext).round(5)} offset buffer\"\n  puts \"Reduces whipsaw risk by requiring clear break\"\nelsif prev_price &gt; prev_sarext &amp;&amp; curr_price &lt; curr_sarext\n  puts \"BEARISH REVERSAL with #{(prev_sarext - curr_sarext).round(5)} offset buffer\"\n  puts \"Reduces false signals in choppy markets\"\nend\n</code></pre>"},{"location":"indicators/volatility/sarext/#example-institutional-trading-strategy","title":"Example: Institutional Trading Strategy","text":"<pre><code># Large positions need wider stops on entry, tighter on exit\nhigh, low, close = load_historical_ohlc('AAPL')\nvolume = load_historical_data('AAPL', field: :volume)\n\nsarext = SQA::TAI.sarext(\n  high, low,\n  # Slower initial acceleration (wider stops for position building)\n  accel_init_long: 0.01,\n  accel_init_short: 0.01,\n  # Faster progression (tighter stops once position established)\n  accel_long: 0.03,\n  accel_short: 0.03,\n  # High maximum (aggressive trailing once in profit)\n  accel_max_long: 0.25,\n  accel_max_short: 0.25\n)\n\ncurrent_price = close.last\ncurrent_sarext = sarext.last\navg_volume = volume[-20..-1].sum / 20.0\n\nif current_price &gt; current_sarext\n  distance = ((current_price - current_sarext) / current_price * 100)\n  puts \"LONG POSITION active\"\n  puts \"Stop distance: #{distance.round(2)}%\"\n\n  if distance &lt; 2.0\n    puts \"Initial accumulation phase - wide stop allows position building\"\n  elsif distance &gt; 5.0\n    puts \"Established position - stop has tightened significantly\"\n    puts \"Protecting profits with aggressive trailing\"\n  end\nend\n</code></pre>"},{"location":"indicators/volatility/sarext/#example-comparing-sarext-configurations","title":"Example: Comparing SAREXT Configurations","text":"<pre><code>high, low, close = load_historical_ohlc('MSFT')\n\n# Standard SAR\nsar_standard = SQA::TAI.sar(high, low, acceleration: 0.02, maximum: 0.20)\n\n# Conservative SAREXT (wider stops)\nsarext_conservative = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.01, accel_long: 0.01, accel_max_long: 0.15,\n  accel_init_short: 0.01, accel_short: 0.01, accel_max_short: 0.15\n)\n\n# Aggressive SAREXT (tighter stops)\nsarext_aggressive = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.03, accel_long: 0.03, accel_max_long: 0.30,\n  accel_init_short: 0.03, accel_short: 0.03, accel_max_short: 0.30\n)\n\n# Asymmetric SAREXT (different long/short)\nsarext_asymmetric = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.015, accel_long: 0.015, accel_max_long: 0.15,\n  accel_init_short: 0.025, accel_short: 0.025, accel_max_short: 0.25\n)\n\ncurrent_price = close.last\n\nputs \"Current Price: #{current_price.round(2)}\"\nputs \"Standard SAR: #{sar_standard.last.round(2)}\"\nputs \"Conservative SAREXT: #{sarext_conservative.last.round(2)} (widest stop)\"\nputs \"Aggressive SAREXT: #{sarext_aggressive.last.round(2)} (tightest stop)\"\nputs \"Asymmetric SAREXT: #{sarext_asymmetric.last.round(2)} (balanced)\"\n\n# Calculate stop distances\nputs \"\\nStop Distances:\"\n[\n  ['Standard', sar_standard.last],\n  ['Conservative', sarext_conservative.last],\n  ['Aggressive', sarext_aggressive.last],\n  ['Asymmetric', sarext_asymmetric.last]\n].each do |name, sar_value|\n  distance = ((current_price - sar_value).abs / current_price * 100)\n  puts \"#{name}: #{distance.round(2)}%\"\nend\n</code></pre>"},{"location":"indicators/volatility/sarext/#when-to-use-asymmetric-acceleration","title":"When to Use Asymmetric Acceleration","text":""},{"location":"indicators/volatility/sarext/#1-market-structure-differences","title":"1. Market Structure Differences","text":"<p>Use faster short acceleration when: - Markets tend to crash/dump quickly (crypto, small caps) - Bear markets are violent and fast - You need tight stops to limit downside risk</p> <p>Use faster long acceleration when: - Markets rally strongly (momentum stocks, IPOs) - Bull runs are explosive - You want to capture upward momentum aggressively</p>"},{"location":"indicators/volatility/sarext/#2-risk-management-preferences","title":"2. Risk Management Preferences","text":"<p>Conservative longs + Aggressive shorts: - Risk-averse approach - Willing to hold longs through volatility - Quick to exit shorts to avoid unlimited risk</p> <p>Aggressive longs + Conservative shorts: - Aggressive trader profile - Chase momentum on longs - Patient with shorts in grinding downtrends</p>"},{"location":"indicators/volatility/sarext/#3-asset-class-characteristics","title":"3. Asset Class Characteristics","text":"Asset Class Long Accel Short Accel Reasoning Large Cap Stocks Standard (0.02/0.20) Slower (0.01/0.15) Slow grinds down Crypto Conservative (0.015/0.15) Aggressive (0.03/0.30) Fast crashes Forex Symmetric (0.02/0.20) Symmetric (0.02/0.20) Balanced moves Small Caps Aggressive (0.03/0.25) Aggressive (0.03/0.25) High volatility both ways Commodities Depends Depends Market-specific"},{"location":"indicators/volatility/sarext/#4-position-size-considerations","title":"4. Position Size Considerations","text":"<p>Larger positions: - Use lower initial acceleration (wider entry stops) - Use higher acceleration step (faster tightening) - Allows position building without premature stops</p> <p>Smaller positions: - Can use standard parameters - Less slippage risk on stops - More flexibility to re-enter</p>"},{"location":"indicators/volatility/sarext/#advanced-techniques","title":"Advanced Techniques","text":""},{"location":"indicators/volatility/sarext/#1-dynamic-parameter-selection","title":"1. Dynamic Parameter Selection","text":"<p>Adjust SAREXT parameters based on market conditions: <pre><code>atr = SQA::TAI.atr(high, low, close, period: 14)\nvolatility = atr.last / close.last\n\nif volatility &gt; 0.03  # High volatility (&gt;3%)\n  accel_long = 0.01   # Wider stops\n  accel_max_long = 0.15\nelse  # Low volatility\n  accel_long = 0.03   # Tighter stops\n  accel_max_long = 0.25\nend\n</code></pre></p>"},{"location":"indicators/volatility/sarext/#2-combining-with-trend-filters","title":"2. Combining with Trend Filters","text":"<p>Use SAREXT with ADX to avoid choppy markets: <pre><code>adx = SQA::TAI.adx(high, low, close, period: 14)\n\nif adx.last &gt; 25  # Strong trend\n  # Use SAREXT for trend following\n  sarext = SQA::TAI.sarext(high, low, accel_long: 0.02, accel_max_long: 0.20)\nelse\n  # Skip trading or use different strategy\n  puts \"ADX below 25 - market too choppy for SAR\"\nend\n</code></pre></p>"},{"location":"indicators/volatility/sarext/#3-multi-timeframe-sarext","title":"3. Multi-Timeframe SAREXT","text":"<p>Use different parameters on different timeframes: <pre><code># Daily: Conservative for position management\nsarext_daily = SQA::TAI.sarext(\n  high_daily, low_daily,\n  accel_long: 0.01, accel_max_long: 0.15\n)\n\n# Hourly: Aggressive for tactical entries/exits\nsarext_hourly = SQA::TAI.sarext(\n  high_hourly, low_hourly,\n  accel_long: 0.03, accel_max_long: 0.30\n)\n</code></pre></p>"},{"location":"indicators/volatility/sarext/#4-optimization-for-specific-assets","title":"4. Optimization for Specific Assets","text":"<p>Backtest to find optimal asymmetric parameters: <pre><code># Example optimization results for BTC\n# Win rate: 58%, Profit factor: 1.8\nsarext_btc_optimized = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.018,\n  accel_long: 0.018,\n  accel_max_long: 0.16,\n  accel_init_short: 0.028,\n  accel_short: 0.028,\n  accel_max_short: 0.28\n)\n</code></pre></p>"},{"location":"indicators/volatility/sarext/#common-configuration-patterns","title":"Common Configuration Patterns","text":""},{"location":"indicators/volatility/sarext/#pattern-1-risk-averse-trader","title":"Pattern 1: Risk-Averse Trader","text":"<pre><code>sarext = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.01,    # Wide stops on longs\n  accel_long: 0.01,\n  accel_max_long: 0.15,\n  accel_init_short: 0.03,   # Tight stops on shorts\n  accel_short: 0.03,\n  accel_max_short: 0.25,\n  offset_on_reverse: 0.001  # Buffer against whipsaws\n)\n</code></pre>"},{"location":"indicators/volatility/sarext/#pattern-2-momentum-trader","title":"Pattern 2: Momentum Trader","text":"<pre><code>sarext = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.03,    # Tight stops, chase momentum\n  accel_long: 0.03,\n  accel_max_long: 0.30,\n  accel_init_short: 0.03,   # Symmetrical aggression\n  accel_short: 0.03,\n  accel_max_short: 0.30\n)\n</code></pre>"},{"location":"indicators/volatility/sarext/#pattern-3-position-trader","title":"Pattern 3: Position Trader","text":"<pre><code>sarext = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.005,   # Very wide initial stops\n  accel_long: 0.01,         # Gradual tightening\n  accel_max_long: 0.10,     # Conservative max\n  accel_init_short: 0.005,\n  accel_short: 0.01,\n  accel_max_short: 0.10\n)\n</code></pre>"},{"location":"indicators/volatility/sarext/#pattern-4-scalperday-trader","title":"Pattern 4: Scalper/Day Trader","text":"<pre><code>sarext = SQA::TAI.sarext(\n  high, low,\n  accel_init_long: 0.05,    # Very tight stops\n  accel_long: 0.05,\n  accel_max_long: 0.40,     # Aggressive max\n  accel_init_short: 0.05,\n  accel_short: 0.05,\n  accel_max_short: 0.40,\n  offset_on_reverse: 0.0    # No buffer needed in liquid markets\n)\n</code></pre>"},{"location":"indicators/volatility/sarext/#sarext-vs-standard-sar","title":"SAREXT vs Standard SAR","text":"Feature Standard SAR SAREXT Parameters 2 (acceleration, maximum) 10+ (separate long/short control) Long/Short Settings Symmetric (same for both) Asymmetric (independent control) Complexity Simple, easy to understand Complex, requires optimization Best For General trading, beginners Advanced traders, specific markets Optimization Limited (2 parameters) Extensive (many combinations) Customization Low High Market Adaptation Fixed behavior Can match market characteristics Backtesting Time Fast Slower (more parameters)"},{"location":"indicators/volatility/sarext/#advantages-of-sarext","title":"Advantages of SAREXT","text":"<ol> <li>Market-Specific Tuning: Match acceleration to actual market behavior</li> <li>Risk Management Flexibility: Different stops for longs vs shorts</li> <li>Asymmetric Trading: Reflect that markets rise and fall differently</li> <li>Institutional Capability: Complex position management strategies</li> <li>Optimization Potential: More parameters to fit historical data</li> <li>Whipsaw Control: Offset parameter reduces false signals</li> </ol>"},{"location":"indicators/volatility/sarext/#disadvantages-of-sarext","title":"Disadvantages of SAREXT","text":"<ol> <li>Increased Complexity: Many more parameters to understand and optimize</li> <li>Overfitting Risk: Easy to over-optimize on historical data</li> <li>Harder to Test: More combinations require extensive backtesting</li> <li>Not Standard: Most literature covers standard SAR only</li> <li>Parameter Sensitivity: Small changes can significantly impact results</li> </ol>"},{"location":"indicators/volatility/sarext/#best-practices","title":"Best Practices","text":"<ol> <li>Start with standard SAR: Use symmetric parameters first</li> <li>Document market behavior: Analyze if long/short characteristics differ</li> <li>Test incrementally: Change one parameter set at a time</li> <li>Use walk-forward testing: Avoid overfitting to historical data</li> <li>Monitor performance: Track if asymmetric parameters actually help</li> <li>Consider simplicity: Don't use SAREXT just because it's \"advanced\"</li> <li>Match time horizon: Faster parameters for shorter timeframes</li> <li>Asset class research: Study how your specific market moves</li> </ol>"},{"location":"indicators/volatility/sarext/#when-not-to-use-sarext","title":"When NOT to Use SAREXT","text":"<ol> <li>Symmetric markets: Forex majors, large-cap indexes</li> <li>Learning SAR: Start with standard SAR first</li> <li>Lack of data: Need sufficient history to optimize parameters</li> <li>Simple strategies: Don't add complexity unnecessarily</li> <li>Short backtesting: Insufficient data to validate asymmetric benefits</li> </ol>"},{"location":"indicators/volatility/sarext/#related-indicators","title":"Related Indicators","text":"<ul> <li>SAR - Standard Parabolic SAR (simpler, symmetric parameters)</li> <li>ATR - Average True Range (volatility for parameter selection)</li> <li>ADX - Trend strength (filter for SAR usage)</li> </ul>"},{"location":"indicators/volatility/sarext/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Volatility Indicators Overview</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/volatility/trange/","title":"True Range (TRANGE)","text":"<p>True Range measures the price volatility of an asset for a single period. It's the foundation for the Average True Range (ATR) indicator.</p>"},{"location":"indicators/volatility/trange/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\n# OHLC data required\nhigh  = [46.08, 46.41, 46.46, 46.57, 46.50, 47.03]\nlow   = [44.61, 44.83, 45.64, 45.95, 46.02, 46.50]\nclose = [45.42, 45.84, 46.08, 46.46, 46.55, 47.03]\n\n# Calculate True Range\ntrange = SQA::TAI.trange(high, low, close)\n\nputs \"Current True Range: #{trange.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volatility/trange/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>high</code> Array Yes - Array of high prices <code>low</code> Array Yes - Array of low prices <code>close</code> Array Yes - Array of closing prices"},{"location":"indicators/volatility/trange/#returns","title":"Returns","text":"<p>Returns an array of True Range values. The first value will be <code>nil</code> (no previous close to compare).</p>"},{"location":"indicators/volatility/trange/#formula","title":"Formula","text":"<p>True Range is the greatest of: 1. Current High - Current Low 2. |Current High - Previous Close| 3. |Current Low - Previous Close|</p> <pre><code>tr1 = high[i] - low[i]\ntr2 = (high[i] - close[i-1]).abs\ntr3 = (low[i] - close[i-1]).abs\ntrue_range = [tr1, tr2, tr3].max\n</code></pre>"},{"location":"indicators/volatility/trange/#interpretation","title":"Interpretation","text":"<ul> <li>Large True Range: High volatility for that period</li> <li>Small True Range: Low volatility for that period</li> <li>Increasing True Range: Volatility expanding</li> <li>Decreasing True Range: Volatility contracting</li> </ul>"},{"location":"indicators/volatility/trange/#why-use-true-range","title":"Why Use True Range?","text":"<p>Simple High-Low range doesn't account for gaps:</p> <pre><code># Example: Gap up opening\n\n# Day 1: High=50, Low=48, Close=49\n# Simple range = 2\n\n# Day 2: High=55, Low=53, Close=54 (gap up from 49 to 53)\n# Simple range = 2 (but price moved 6 points from previous close!)\n# True Range = 6 (captures the gap)\n</code></pre>"},{"location":"indicators/volatility/trange/#example-daily-volatility-analysis","title":"Example: Daily Volatility Analysis","text":"<pre><code>high, low, close = load_ohlc_data('AAPL')\n\ntrange = SQA::TAI.trange(high, low, close)\n\n# Get recent true ranges\nrecent_tr = trange.compact.last(20)\n\navg_tr = recent_tr.sum / recent_tr.size\ncurrent_tr = trange.last\n\nputs \"Current True Range: $#{current_tr.round(2)}\"\nputs \"20-day Average TR: $#{avg_tr.round(2)}\"\n\nif current_tr &gt; avg_tr * 1.5\n  puts \"Today's range #{((current_tr / avg_tr - 1) * 100).round(0)}% above average\"\n  puts \"Higher than normal volatility\"\nelsif current_tr &lt; avg_tr * 0.5\n  puts \"Today's range #{((1 - current_tr / avg_tr) * 100).round(0)}% below average\"\n  puts \"Lower than normal volatility\"\nend\n</code></pre>"},{"location":"indicators/volatility/trange/#example-identifying-range-expansion","title":"Example: Identifying Range Expansion","text":"<pre><code>high, low, close = load_ohlc_data('TSLA')\n\ntrange = SQA::TAI.trange(high, low, close)\n\n# Look for range expansion days\n(5...trange.length).each do |i|\n  next if trange[i].nil?\n\n  recent_avg = trange[(i-5)...i].compact.sum / 5.0\n\n  if trange[i] &gt; recent_avg * 2\n    puts \"Range expansion on day #{i}\"\n    puts \"True Range: #{trange[i].round(2)} (5-day avg: #{recent_avg.round(2)})\"\n    puts \"High: #{high[i]}, Low: #{low[i]}, Close: #{close[i]}\"\n  end\nend\n</code></pre>"},{"location":"indicators/volatility/trange/#example-true-range-vs-simple-range","title":"Example: True Range vs Simple Range","text":"<pre><code>high, low, close = load_ohlc_data('MSFT')\n\ntrange = SQA::TAI.trange(high, low, close)\n\n# Compare True Range with simple High-Low range\ncomparisons = (1...high.length).map do |i|\n  simple_range = high[i] - low[i]\n  true_range = trange[i]\n  difference = true_range - simple_range\n\n  {\n    date: i,\n    simple: simple_range.round(2),\n    true_range: true_range.round(2),\n    diff: difference.round(2),\n    gap: difference &gt; 0.1  # True Range captures gap\n  }\nend\n\n# Show cases where True Range differs significantly\ngaps = comparisons.select { |c| c[:gap] }\nputs \"Found #{gaps.size} days with significant gaps\"\n\ngaps.last(5).each do |data|\n  puts \"Day #{data[:date]}: Simple Range=$#{data[:simple]}, \" \\\n       \"True Range=$#{data[:true_range]}, Gap=$#{data[:diff]}\"\nend\n</code></pre>"},{"location":"indicators/volatility/trange/#example-building-atr-from-true-range","title":"Example: Building ATR from True Range","text":"<pre><code>high, low, close = load_ohlc_data('NVDA')\n\n# Calculate True Range\ntrange = SQA::TAI.trange(high, low, close)\n\n# Manually calculate ATR from True Range (for understanding)\nperiod = 14\nmanual_atr = []\n\ntrange.each_with_index do |tr, i|\n  if i &lt; period || tr.nil?\n    manual_atr &lt;&lt; nil\n  else\n    # Simple moving average of True Range\n    avg_tr = trange[(i-period+1)..i].compact.sum / period.0\n    manual_atr &lt;&lt; avg_tr\n  end\nend\n\n# Compare with actual ATR\nactual_atr = SQA::TAI.atr(high, low, close, period: period)\n\nputs \"Manual ATR: #{manual_atr.last.round(4)}\"\nputs \"Actual ATR: #{actual_atr.last.round(4)}\"\nputs \"(Note: Actual ATR uses exponential smoothing, so values may differ slightly)\"\n</code></pre>"},{"location":"indicators/volatility/trange/#use-cases","title":"Use Cases","text":""},{"location":"indicators/volatility/trange/#1-volatility-measurement","title":"1. Volatility Measurement","text":"<p>Single period volatility snapshot</p>"},{"location":"indicators/volatility/trange/#2-atr-calculation","title":"2. ATR Calculation","text":"<p>Foundation for Average True Range</p>"},{"location":"indicators/volatility/trange/#3-range-analysis","title":"3. Range Analysis","text":"<p>Identify expansion/contraction days</p>"},{"location":"indicators/volatility/trange/#4-gap-detection","title":"4. Gap Detection","text":"<p>Captures overnight price gaps</p>"},{"location":"indicators/volatility/trange/#true-range-components","title":"True Range Components","text":"<pre><code>high, low, close = load_ohlc_data('AAPL')\n\n# Break down True Range calculation\ni = -1  # Current bar\nh = high[i]\nl = low[i]\nc_prev = close[i-1]\n\nmethod1 = h - l  # Current range\nmethod2 = (h - c_prev).abs  # High to previous close\nmethod3 = (l - c_prev).abs  # Low to previous close\n\nputs \"Current High - Low: #{method1.round(2)}\"\nputs \"High - Previous Close: #{method2.round(2)}\"\nputs \"Low - Previous Close: #{method3.round(2)}\"\nputs \"True Range (max): #{[method1, method2, method3].max.round(2)}\"\n\n# Which method gave the True Range?\nif method2 &gt; method1 || method3 &gt; method1\n  puts \"Gap detected - True Range captures it!\"\nend\n</code></pre>"},{"location":"indicators/volatility/trange/#related-indicators","title":"Related Indicators","text":"<ul> <li>Average True Range (ATR) - Smoothed average of True Range</li> <li>Bollinger Bands - Alternative volatility measure</li> <li>Standard Deviation - Statistical volatility</li> </ul>"},{"location":"indicators/volatility/trange/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Volatility Analysis Example</li> </ul>"},{"location":"indicators/volume/","title":"Volume Indicators","text":"<p>Volume indicators analyze trading volume to confirm price movements, identify trend strength, and detect potential reversals. Volume is often called the \"fuel\" of price movements - significant price changes on high volume are more reliable than those on low volume.</p>"},{"location":"indicators/volume/#overview","title":"Overview","text":"<p>Volume indicators help traders understand: - Trend Confirmation: High volume validates price trends - Buying/Selling Pressure: Who's in control - bulls or bears - Divergences: When price and volume disagree (warning signal) - Breakout Validation: Real breakouts occur on high volume</p>"},{"location":"indicators/volume/#available-volume-indicators","title":"Available Volume Indicators","text":""},{"location":"indicators/volume/#accumulationdistribution-line-ad","title":"Accumulation/Distribution Line (AD)","text":"<p>Cumulative indicator that uses volume flow to assess buying/selling pressure.</p> <pre><code>ad = SQA::TAI.ad(high, low, close, volume)\n</code></pre> <p>Key Features: - Cumulative volume-weighted price indicator - Identifies money flow into or out of asset - Useful for divergence analysis</p>"},{"location":"indicators/volume/#chaikin-ad-oscillator-adosc","title":"Chaikin A/D Oscillator (ADOSC)","text":"<p>Momentum indicator derived from the Accumulation/Distribution Line.</p> <pre><code>adosc = SQA::TAI.adosc(high, low, close, volume, fast_period: 3, slow_period: 10)\n</code></pre> <p>Key Features: - MACD of the A/D Line - Shows momentum of accumulation/distribution - Earlier warning signals than A/D Line</p>"},{"location":"indicators/volume/#on-balance-volume-obv","title":"On Balance Volume (OBV)","text":"<p>Simple but powerful cumulative volume indicator.</p> <pre><code>obv = SQA::TAI.obv(close, volume)\n</code></pre> <p>Key Features: - Adds volume on up days, subtracts on down days - Leading indicator for price movements - Excellent for divergence detection</p>"},{"location":"indicators/volume/#common-usage-patterns","title":"Common Usage Patterns","text":""},{"location":"indicators/volume/#volume-confirmation","title":"Volume Confirmation","text":"<pre><code>require 'sqa/tai'\n\n# Load price and volume data\nclose, volume = load_price_volume('AAPL')\n\n# Calculate volume indicators\nobv = SQA::TAI.obv(close, volume)\nad = SQA::TAI.ad(high, low, close, volume)\n\n# Check if price move confirmed by volume\nif close.last &gt; close[-2] &amp;&amp; obv.last &gt; obv[-2]\n  puts \"Price rise confirmed by OBV\"\nend\n</code></pre>"},{"location":"indicators/volume/#divergence-detection","title":"Divergence Detection","text":"<pre><code>require 'sqa/tai'\n\nhigh, low, close, volume = load_ohlc_volume('MSFT')\n\n# Calculate indicators\nobv = SQA::TAI.obv(close, volume)\nad = SQA::TAI.ad(high, low, close, volume)\n\n# Check for bearish divergence\nif close.last &gt; close[-10] &amp;&amp; obv.last &lt; obv[-10]\n  puts \"Bearish divergence: Price up but OBV down\"\n  puts \"Potential trend reversal warning\"\nend\n\n# Check for bullish divergence\nif close.last &lt; close[-10] &amp;&amp; obv.last &gt; obv[-10]\n  puts \"Bullish divergence: Price down but OBV up\"\n  puts \"Potential bottom forming\"\nend\n</code></pre>"},{"location":"indicators/volume/#breakout-validation","title":"Breakout Validation","text":"<pre><code>require 'sqa/tai'\n\nhigh, low, close, volume = load_ohlc_volume('TSLA')\n\n# Calculate indicators\nobv = SQA::TAI.obv(close, volume)\nresistance = 250.0  # Key resistance level\n\n# Validate breakout\nif close.last &gt; resistance\n  obv_momentum = (obv.last - obv[-5]) / obv[-5] * 100\n\n  if obv_momentum &gt; 2.0\n    puts \"Valid breakout with strong volume confirmation\"\n    puts \"OBV momentum: #{obv_momentum.round(2)}%\"\n  else\n    puts \"Breakout on weak volume - may be false\"\n  end\nend\n</code></pre>"},{"location":"indicators/volume/#volume-analysis-best-practices","title":"Volume Analysis Best Practices","text":""},{"location":"indicators/volume/#1-volume-leads-price","title":"1. Volume Leads Price","text":"<p>Volume often changes direction before price. Watch for: <pre><code># Volume increasing while price consolidates\n# Often signals big move coming\n</code></pre></p>"},{"location":"indicators/volume/#2-confirm-trends-with-volume","title":"2. Confirm Trends with Volume","text":"<pre><code># Uptrend should have higher volume on up days\n# Downtrend should have higher volume on down days\n# Decreasing volume in trend = potential reversal\n</code></pre>"},{"location":"indicators/volume/#3-use-multiple-volume-indicators","title":"3. Use Multiple Volume Indicators","text":"<pre><code># Combine OBV, AD, and ADOSC for stronger signals\n# Agreement between indicators increases reliability\n</code></pre>"},{"location":"indicators/volume/#4-watch-for-divergences","title":"4. Watch for Divergences","text":"<pre><code># Price making new highs but volume declining = bearish\n# Price making new lows but volume declining = bullish\n</code></pre>"},{"location":"indicators/volume/#example-complete-volume-analysis","title":"Example: Complete Volume Analysis","text":"<pre><code>require 'sqa/tai'\n\n# Load data\nhigh, low, close, volume = load_ohlc_volume('NVDA')\n\n# Calculate volume indicators\nobv = SQA::TAI.obv(close, volume)\nad = SQA::TAI.ad(high, low, close, volume)\nadosc = SQA::TAI.adosc(high, low, close, volume, fast_period: 3, slow_period: 10)\n\n# Calculate price indicators for context\nsma_20 = SQA::TAI.sma(close, period: 20)\nrsi = SQA::TAI.rsi(close, period: 14)\n\n# Analyze current conditions\nputs \"Volume Analysis for NVDA\"\nputs \"=\" * 50\n\n# Trend analysis\ntrend = close.last &gt; sma_20.last ? \"Uptrend\" : \"Downtrend\"\nputs \"\\nTrend: #{trend}\"\nputs \"Price: $#{close.last.round(2)}\"\nputs \"RSI: #{rsi.last.round(2)}\"\n\n# Volume confirmation\nobv_change = ((obv.last - obv[-5]) / obv[-5].abs * 100).round(2)\nad_change = ((ad.last - ad[-5]) / ad[-5].abs * 100).round(2)\n\nputs \"\\nVolume Indicators:\"\nputs \"OBV Change (5 bars): #{obv_change}%\"\nputs \"AD Change (5 bars): #{ad_change}%\"\nputs \"ADOSC: #{adosc.last.round(2)}\"\n\n# Signal generation\nscore = 0\nsignals = []\n\n# OBV confirmation\nif trend == \"Uptrend\" &amp;&amp; obv_change &gt; 0\n  score += 2\n  signals &lt;&lt; \"OBV confirms uptrend\"\nelsif trend == \"Downtrend\" &amp;&amp; obv_change &lt; 0\n  score += 2\n  signals &lt;&lt; \"OBV confirms downtrend\"\nend\n\n# A/D confirmation\nif trend == \"Uptrend\" &amp;&amp; ad_change &gt; 0\n  score += 2\n  signals &lt;&lt; \"A/D confirms uptrend\"\nelsif trend == \"Downtrend\" &amp;&amp; ad_change &lt; 0\n  score += 2\n  signals &lt;&lt; \"A/D confirms downtrend\"\nend\n\n# ADOSC momentum\nif adosc.last &gt; 0 &amp;&amp; adosc.last &gt; adosc[-1]\n  score += 1\n  signals &lt;&lt; \"ADOSC positive and rising\"\nelsif adosc.last &lt; 0 &amp;&amp; adosc.last &lt; adosc[-1]\n  score += 1\n  signals &lt;&lt; \"ADOSC negative and falling\"\nend\n\n# Divergence check\nprice_direction = close.last &gt; close[-10] ? \"up\" : \"down\"\nobv_direction = obv.last &gt; obv[-10] ? \"up\" : \"down\"\n\nif price_direction != obv_direction\n  signals &lt;&lt; \"WARNING: Divergence detected (Price #{price_direction}, OBV #{obv_direction})\"\n  score -= 2\nend\n\nputs \"\\nSignals:\"\nsignals.each { |s| puts \"- #{s}\" }\n\nputs \"\\nOverall Score: #{score}/5\"\nif score &gt;= 4\n  puts \"Strong volume confirmation - high confidence\"\nelsif score &gt;= 2\n  puts \"Moderate volume confirmation\"\nelse\n  puts \"Weak or conflicting volume signals\"\nend\n</code></pre>"},{"location":"indicators/volume/#key-concepts","title":"Key Concepts","text":""},{"location":"indicators/volume/#volume-trends","title":"Volume Trends","text":"<ul> <li>Increasing Volume: Growing interest, trend likely to continue</li> <li>Decreasing Volume: Waning interest, trend may be exhausting</li> <li>Volume Spikes: Potential climax or reversal points</li> </ul>"},{"location":"indicators/volume/#volume-and-price-relationships","title":"Volume and Price Relationships","text":"<ul> <li>Price up + Volume up: Healthy uptrend</li> <li>Price up + Volume down: Weak rally, potential reversal</li> <li>Price down + Volume up: Strong selling pressure</li> <li>Price down + Volume down: Weak decline, potential bottom</li> </ul>"},{"location":"indicators/volume/#volume-divergences","title":"Volume Divergences","text":"<ul> <li>Bullish: Price lower but volume indicators higher</li> <li>Bearish: Price higher but volume indicators lower</li> </ul>"},{"location":"indicators/volume/#see-also","title":"See Also","text":"<ul> <li>Accumulation/Distribution (AD)</li> <li>Chaikin A/D Oscillator (ADOSC)</li> <li>On Balance Volume (OBV)</li> <li>Back to Indicators</li> <li>Basic Usage</li> </ul>"},{"location":"indicators/volume/ad/","title":"AD (Chaikin Accumulation/Distribution Line)","text":""},{"location":"indicators/volume/ad/#overview","title":"Overview","text":"<p>The Chaikin Accumulation/Distribution Line (AD) is a cumulative volume-based indicator that measures the flow of money into and out of a security. Developed by Marc Chaikin, it uses both price location within the bar's range and volume to determine whether a security is being accumulated (bought) or distributed (sold). Unlike simple volume indicators, AD considers where the price closes within the period's range, making it more sophisticated for identifying true buying or selling pressure.</p>"},{"location":"indicators/volume/ad/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period <code>volume</code> Array Required Array of volume values for each period"},{"location":"indicators/volume/ad/#parameter-details","title":"Parameter Details","text":"<p>high - The highest price reached during each period - Must have same length as other price arrays - Required for calculating the price range and money flow multiplier - Essential for determining how close the close price is to the high</p> <p>low - The lowest price reached during each period - Must have same length as other price arrays - Required for calculating the price range and money flow multiplier - Essential for determining how close the close price is to the low</p> <p>close - The final price at the end of each period - Must have same length as other price arrays - Critical for determining accumulation or distribution - Position within high-low range determines the money flow multiplier</p> <p>volume - The trading volume for each period - Must have same length as price arrays - Weights the money flow by actual trading activity - Higher volume periods have greater impact on the cumulative line</p>"},{"location":"indicators/volume/ad/#usage","title":"Usage","text":""},{"location":"indicators/volume/ad/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\n# OHLC data + Volume required\nhigh   = [46.08, 46.41, 46.46, 46.57, 46.50, 47.03, 47.35]\nlow    = [44.61, 44.83, 45.64, 45.95, 46.02, 46.50, 47.28]\nclose  = [45.42, 45.84, 46.08, 46.46, 46.55, 47.03, 47.28]\nvolume = [2500, 3200, 2800, 4100, 3500, 4200, 3600]\n\n# Calculate A/D Line\nad = SQA::TAI.ad(high, low, close, volume)\n\nputs \"Current A/D: #{ad.last.round(0)}\"\n</code></pre>"},{"location":"indicators/volume/ad/#trend-analysis","title":"Trend Analysis","text":"<pre><code># Analyze A/D trend with moving average\nhigh, low, close, volume = load_ohlc_volume_data('AAPL')\n\nad = SQA::TAI.ad(high, low, close, volume)\nad_ma = SQA::TAI.sma(ad, period: 20)\n\nif ad.last &gt; ad_ma.last\n  puts \"A/D above MA: Accumulation phase\"\nelse\n  puts \"A/D below MA: Distribution phase\"\nend\n</code></pre>"},{"location":"indicators/volume/ad/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/volume/ad/#what-it-measures","title":"What It Measures","text":"<p>The AD Line measures the cumulative flow of money based on where prices close within their daily range:</p> <ul> <li>Money Flow Direction: Whether buyers or sellers are in control</li> <li>Volume Confirmation: If price moves are supported by volume</li> <li>Accumulation vs Distribution: Whether smart money is buying or selling</li> <li>Trend Strength: If price trends are supported by volume flow</li> </ul> <p>AD answers the question: \"Is volume flowing into or out of this security, and does it confirm the price action?\"</p>"},{"location":"indicators/volume/ad/#calculation-method","title":"Calculation Method","text":"<p>The AD Line is calculated using a multi-step process:</p> <ol> <li>Calculate Money Flow Multiplier: Determines where the close is within the period's range</li> <li>Calculate Money Flow Volume: Multiplies the multiplier by the period's volume</li> <li>Accumulate: Adds the money flow volume to the running total</li> </ol> <p>Formula: <pre><code>Money Flow Multiplier = ((Close - Low) - (High - Close)) / (High - Low)\nMoney Flow Volume = Money Flow Multiplier \u00d7 Volume\nA/D Line = Previous A/D + Current Money Flow Volume\n\nWhere Money Flow Multiplier ranges from -1 to +1:\n- Close near high = ~+1 (accumulation)\n- Close near low = ~-1 (distribution)\n- Close in middle = ~0 (neutral)\n</code></pre></p> <p>Example Calculation: If High=50, Low=45, Close=49, Volume=1000: - Money Flow Multiplier = ((49-45) - (50-49)) / (50-45) = \u2157 = 0.6 - Money Flow Volume = 0.6 \u00d7 1000 = 600 - AD Line increases by 600</p>"},{"location":"indicators/volume/ad/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded (can be any value, positive or negative)</li> <li>Type: Cumulative volume indicator</li> <li>Lag: Low to moderate (responds to price/volume immediately)</li> <li>Best Used: Trending markets, divergence analysis, confirming breakouts</li> <li>Limitations: Cumulative nature means absolute values can't be compared across securities</li> </ul>"},{"location":"indicators/volume/ad/#interpretation","title":"Interpretation","text":""},{"location":"indicators/volume/ad/#value-ranges","title":"Value Ranges","text":"<p>Understanding AD Line values:</p> <ul> <li>Rising AD Line: Indicates accumulation with buying pressure dominating. Volume is flowing into the security as prices close near highs.</li> <li>Falling AD Line: Indicates distribution with selling pressure dominating. Volume is flowing out as prices close near lows.</li> <li>Flat AD Line: Indicates balance or neutral money flow. Neither buyers nor sellers have clear control.</li> </ul> <p>Important: AD is cumulative and unbounded, so absolute values are not meaningful. Focus on the direction and changes in the line rather than specific numbers.</p>"},{"location":"indicators/volume/ad/#key-patterns","title":"Key Patterns","text":"<ul> <li>AD Confirms Price Trend: When both price and AD move in same direction, trend is healthy and supported by volume</li> <li>Bullish Divergence: Price makes lower low, AD makes higher low - suggests selling pressure weakening</li> <li>Bearish Divergence: Price makes higher high, AD makes lower high - suggests buying pressure weakening</li> <li>AD Leading Price: AD changes direction before price, providing early warning of potential reversal</li> </ul>"},{"location":"indicators/volume/ad/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read the AD Line's signals:</p> <ol> <li>Trend Confirmation</li> <li>Price rising, AD rising: Strong uptrend with accumulation</li> <li>Price falling, AD falling: Strong downtrend with distribution</li> <li> <p>Both moving together: High confidence in trend continuation</p> </li> <li> <p>Divergence Warnings</p> </li> <li>Price makes new high, AD doesn't: Warning of weak buying, potential top</li> <li>Price makes new low, AD doesn't: Warning of weak selling, potential bottom</li> <li> <p>Divergences work best when price is at extremes or key levels</p> </li> <li> <p>Breakout Confirmation</p> </li> <li>Price breaks resistance, AD breaks to new high: Validated breakout</li> <li>Price breaks support, AD breaks to new low: Validated breakdown</li> <li>Lack of AD confirmation: Suspect breakout, likely false signal</li> </ol>"},{"location":"indicators/volume/ad/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/volume/ad/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: AD Line crosses above its moving average</li> <li>Confirms shift from distribution to accumulation</li> <li> <p>Best when price is in uptrend or breaking resistance</p> </li> <li> <p>Divergence Signal: Price makes lower low, AD makes higher low</p> </li> <li>Bullish divergence indicates weakening selling pressure</li> <li>Strongest when occurring near support levels</li> <li> <p>Requires confirmation from price action</p> </li> <li> <p>Breakout Confirmation: Price breaks above resistance AND AD breaks to new high</p> </li> <li>Validates breakout with volume support</li> <li>High probability of sustained move</li> </ol> <p>Example Scenario: <pre><code>When price breaks above resistance at $100 and AD Line simultaneously\nmakes a new high, consider a long position:\n- Entry: $100.50 (above resistance)\n- Stop loss: $97.50 (below breakout level)\n- Target: Based on prior range or resistance levels\n</code></pre></p>"},{"location":"indicators/volume/ad/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: AD Line crosses below its moving average</li> <li>Confirms shift from accumulation to distribution</li> <li> <p>Best when price is in downtrend or breaking support</p> </li> <li> <p>Divergence Signal: Price makes higher high, AD makes lower high</p> </li> <li>Bearish divergence indicates weakening buying pressure</li> <li>Strongest when occurring near resistance levels</li> <li> <p>Requires confirmation from price action</p> </li> <li> <p>Breakdown Confirmation: Price breaks below support AND AD breaks to new low</p> </li> <li>Validates breakdown with volume support</li> <li>High probability of continued decline</li> </ol> <p>Example Scenario: <pre><code>When price makes new high at $115 but AD Line fails to make new high\n(bearish divergence), consider closing longs or initiating shorts:\n- Wait for price confirmation (break below support)\n- Entry: After break of nearest support\n- Stop loss: Above recent high\n- Target: Based on divergence magnitude\n</code></pre></p>"},{"location":"indicators/volume/ad/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Pattern: Price makes lower lows, AD makes higher lows - Identification: Compare price troughs with AD troughs over 20-60 bars - Significance: Sellers losing control despite lower prices, potential reversal ahead - Reliability: High when combined with oversold conditions or major support - Example: Stock drops from $100 to $90, then to $85. AD drops from 50000 to 45000, then only to 47000.</p> <p>Bearish Divergence: - Pattern: Price makes higher highs, AD makes lower highs - Identification: Compare price peaks with AD peaks over 20-60 bars - Significance: Buyers losing control despite higher prices, potential reversal ahead - Reliability: High when combined with overbought conditions or major resistance - Example: Stock rises from $100 to $110, then to $115. AD rises from 50000 to 60000, then only to 58000.</p>"},{"location":"indicators/volume/ad/#best-practices","title":"Best Practices","text":""},{"location":"indicators/volume/ad/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When AD works best:</p> <ul> <li>Market conditions: Most effective in trending markets. Ranging markets produce less meaningful signals as money flow oscillates.</li> <li>Time frames: Works on all timeframes but most reliable on daily and weekly charts. Intraday can be noisy.</li> <li>Asset classes: Excellent for stocks and ETFs where volume is meaningful. Less reliable for forex (no centralized volume). Works well for cryptocurrencies with reliable volume data.</li> </ul>"},{"location":"indicators/volume/ad/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended indicator combinations:</p> <ul> <li> <p>With Trend Indicators: Use with moving averages or MACD to confirm trend direction. Only take AD signals aligned with the major trend.</p> </li> <li> <p>With Price Patterns: AD is powerful for confirming breakouts, head and shoulders patterns, and double tops/bottoms. Look for AD confirmation before entering.</p> </li> <li> <p>With OBV: Compare AD with On Balance Volume for comprehensive volume analysis. AD is more sophisticated (considers close location), OBV is simpler (just direction).</p> </li> </ul>"},{"location":"indicators/volume/ad/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Comparing absolute values across securities: AD is cumulative and starting point is arbitrary. Only compare direction and changes, not absolute numbers.</p> </li> <li> <p>Ignoring price action: AD divergences need price confirmation. Don't trade divergences alone without waiting for price reversal signal.</p> </li> <li> <p>Using in ranging markets: AD oscillates in choppy markets, generating many false signals. Works best in clear trends.</p> </li> <li> <p>Expecting immediate results: AD is sometimes a leading indicator, but divergences can persist for extended periods. Be patient and wait for confirmation.</p> </li> </ol>"},{"location":"indicators/volume/ad/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<p>AD has no adjustable parameters, but you can optimize how you use it:</p> <ul> <li>Moving Average Period: Apply 10-20 period MA to AD for trend identification</li> <li>10-period: More responsive, catches changes faster</li> <li>20-period: Smoother, fewer false signals</li> <li> <p>50-period: Long-term trend identification</p> </li> <li> <p>Divergence Lookback: When scanning for divergences</p> </li> <li>Short-term: 20-30 bars for swing trading</li> <li>Medium-term: 40-60 bars for position trading</li> <li>Long-term: 100+ bars for major trend changes</li> </ul>"},{"location":"indicators/volume/ad/#practical-example","title":"Practical Example","text":"<p>Complete trading example with context:</p> <pre><code>require 'sqa/tai'\n\n# Load historical data\nhigh, low, close, volume = load_ohlc_volume_data('AAPL')\n\n# Calculate AD and supporting indicators\nad = SQA::TAI.ad(high, low, close, volume)\nad_ma_20 = SQA::TAI.sma(ad, period: 20)\nprice_ma_50 = SQA::TAI.sma(close, period: 50)\n\n# Current values\ncurrent_price = close.last\ncurrent_ad = ad.last\nprice_trend = current_price &gt; price_ma_50.last ? \"UPTREND\" : \"DOWNTREND\"\n\nputs \"=== AD Line Trading Analysis ===\"\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"Current AD: #{current_ad.round(0)}\"\nputs \"Price Trend: #{price_trend}\"\nputs\n\n# Trend alignment analysis\nad_above_ma = current_ad &gt; ad_ma_20.last\nprice_above_ma = current_price &gt; price_ma_50.last\n\nif price_above_ma &amp;&amp; ad_above_ma\n  puts \"STRONG BULL SIGNAL: Both price and AD above their MAs\"\n  puts \"Healthy uptrend supported by accumulation\"\n  puts \"Strategy: Hold longs, look for dip entries\"\n\nelsif !price_above_ma &amp;&amp; !ad_above_ma\n  puts \"STRONG BEAR SIGNAL: Both price and AD below their MAs\"\n  puts \"Healthy downtrend supported by distribution\"\n  puts \"Strategy: Avoid longs, consider shorts on rallies\"\n\nelsif price_above_ma &amp;&amp; !ad_above_ma\n  puts \"WARNING: Price above MA but AD below MA\"\n  puts \"Uptrend not supported by money flow\"\n  puts \"Strategy: Take profits, avoid new longs\"\n\nelsif !price_above_ma &amp;&amp; ad_above_ma\n  puts \"POTENTIAL REVERSAL: Price below MA but AD above MA\"\n  puts \"Accumulation occurring during weakness\"\n  puts \"Strategy: Watch for price trend change\"\nend\n\n# Divergence detection\nputs \"\\n=== Divergence Analysis ===\"\nrecent_price_high = close[-30..-1].max\nrecent_price_low = close[-30..-1].min\nrecent_ad_high = ad[-30..-1].max\nrecent_ad_low = ad[-30..-1].min\n\nprior_price_high = close[-60..-31].max\nprior_price_low = close[-60..-31].min\nprior_ad_high = ad[-60..-31].max\nprior_ad_low = ad[-60..-31].min\n\n# Bearish divergence check\nif recent_price_high &gt; prior_price_high &amp;&amp; recent_ad_high &lt; prior_ad_high\n  puts \"BEARISH DIVERGENCE DETECTED\"\n  puts \"Price: #{prior_price_high.round(2)} -&gt; #{recent_price_high.round(2)} (higher)\"\n  puts \"AD: #{prior_ad_high.round(0)} -&gt; #{recent_ad_high.round(0)} (lower)\"\n  puts \"Action: Consider profit taking or short positions\"\nend\n\n# Bullish divergence check\nif recent_price_low &lt; prior_price_low &amp;&amp; recent_ad_low &gt; prior_ad_low\n  puts \"BULLISH DIVERGENCE DETECTED\"\n  puts \"Price: #{prior_price_low.round(2)} -&gt; #{recent_price_low.round(2)} (lower)\"\n  puts \"AD: #{prior_ad_low.round(0)} -&gt; #{recent_ad_low.round(0)} (higher)\"\n  puts \"Action: Watch for price reversal, consider long positions\"\nend\n\n# Money flow momentum\nad_5day_change = ad.last - ad[-5]\nputs \"\\n=== Short-term Money Flow ===\"\nputs \"5-day AD Change: #{ad_5day_change.round(0)}\"\nif ad_5day_change &gt; 0\n  puts \"Recent money flow: BULLISH (accumulation)\"\nelse\n  puts \"Recent money flow: BEARISH (distribution)\"\nend\n</code></pre>"},{"location":"indicators/volume/ad/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/volume/ad/#similar-indicators","title":"Similar Indicators","text":"<ul> <li> <p>On Balance Volume (OBV): Simpler volume indicator that adds/subtracts entire volume based on price direction. OBV is easier to understand but less sophisticated than AD. Use OBV for simple confirmation, AD for detailed analysis.</p> </li> <li> <p>Money Flow Index (MFI): Similar concept but expressed as an oscillator (0-100). MFI includes volume in RSI-like calculation. Use MFI for overbought/oversold, AD for trend and divergence.</p> </li> </ul>"},{"location":"indicators/volume/ad/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li> <p>MACD: Trend-following momentum indicator. Use MACD for trend direction, AD for volume confirmation.</p> </li> <li> <p>RSI: Momentum oscillator. Combine RSI extremes with AD divergences for high-probability setups.</p> </li> <li> <p>Moving Averages: Apply MAs to both price and AD to identify trend alignment and divergences.</p> </li> </ul>"},{"location":"indicators/volume/ad/#indicator-family","title":"Indicator Family","text":"<p>AD belongs to the volume flow indicator family: - AD (Chaikin): Considers close location within range - OBV: Simple binary (up day/down day) - Chaikin Money Flow: AD expressed as oscillator - Money Flow Index: Volume-weighted RSI</p> <p>When to prefer AD: For detailed volume flow analysis, identifying divergences, and confirming breakouts. AD's consideration of close location makes it more nuanced than OBV.</p>"},{"location":"indicators/volume/ad/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/volume/ad/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Use AD across multiple timeframes for comprehensive analysis:</p> <ul> <li>Daily AD: Shows intermediate trend and money flow direction</li> <li>Weekly AD: Identifies major accumulation/distribution phases</li> <li>Intraday AD: Provides entry timing (though noisier)</li> </ul> <p>Strongest signals occur when multiple timeframes align (e.g., weekly AD rising, daily AD rising, confirms strong accumulation).</p>"},{"location":"indicators/volume/ad/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>AD behavior in different market conditions:</p> <ul> <li>Bull Markets: AD tends to rise steadily. Pullbacks with flat/rising AD are buying opportunities.</li> <li>Bear Markets: AD tends to fall steadily. Rallies with flat/falling AD are selling opportunities.</li> <li>Ranging Markets: AD oscillates, less useful. Focus more on divergences at range extremes.</li> <li>High Volatility: AD becomes more erratic. Use longer MAs (30-50 period) to smooth the signal.</li> </ul>"},{"location":"indicators/volume/ad/#statistical-validation","title":"Statistical Validation","text":"<p>AD reliability considerations:</p> <ul> <li>Divergence Success Rate: Studies show AD divergences have 60-70% success rate when confirmed by price action</li> <li>Lead Time: AD often leads price by 3-10 bars, providing early warning</li> <li>Best with Volume: Works best on high-volume securities where volume data is reliable and meaningful</li> <li>Confirmation Importance: Waiting for price confirmation of AD signals improves success rate from ~50% to 70%+</li> </ul>"},{"location":"indicators/volume/ad/#references","title":"References","text":"<ul> <li>Chaikin, Marc. \"The Chaikin Oscillator\" - Original development by Marc Chaikin</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999) - Comprehensive coverage of volume indicators</li> <li>StockCharts: Accumulation/Distribution Line</li> <li>TradingView: AD Line Guide</li> </ul>"},{"location":"indicators/volume/ad/#see-also","title":"See Also","text":"<ul> <li>Volume Indicators Overview</li> <li>ADOSC - Chaikin A/D Oscillator</li> <li>OBV - On Balance Volume</li> <li>Basic Usage Guide</li> </ul>"},{"location":"indicators/volume/adosc/","title":"ADOSC (Chaikin A/D Oscillator)","text":""},{"location":"indicators/volume/adosc/#overview","title":"Overview","text":"<p>The Chaikin A/D Oscillator (ADOSC) is a momentum indicator derived from the Accumulation/Distribution Line. Developed by Marc Chaikin, it measures the momentum of money flow by calculating the difference between fast and slow exponential moving averages of the AD Line. ADOSC helps identify changes in accumulation/distribution trends earlier than the AD Line alone, making it useful for spotting potential reversals and confirming price movements.</p>"},{"location":"indicators/volume/adosc/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>high</code> Array Required Array of high prices for each period <code>low</code> Array Required Array of low prices for each period <code>close</code> Array Required Array of closing prices for each period <code>volume</code> Array Required Array of volume values for each period <code>fast_period</code> Integer 3 Period for fast EMA <code>slow_period</code> Integer 10 Period for slow EMA"},{"location":"indicators/volume/adosc/#parameter-details","title":"Parameter Details","text":"<p>high, low, close, volume - Same requirements as AD Line (see AD documentation) - All arrays must be same length - ADOSC first calculates the AD Line, then applies EMAs</p> <p>fast_period - Default is 3 periods (Chaikin's original setting) - Controls the fast EMA applied to the AD Line - Shorter periods (2) make oscillator more sensitive - Longer periods (5-7) smooth out noise</p> <p>slow_period - Default is 10 periods (Chaikin's original setting) - Controls the slow EMA applied to the AD Line - Should always be longer than fast_period - Common alternatives: 8, 12, or 15</p>"},{"location":"indicators/volume/adosc/#usage","title":"Usage","text":""},{"location":"indicators/volume/adosc/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'sqa/tai'\n\nhigh   = [48.70, 48.72, 48.90, 48.87, 48.82]\nlow    = [47.79, 48.14, 48.39, 48.37, 48.24]\nclose  = [48.20, 48.61, 48.75, 48.63, 48.74]\nvolume = [10000, 12000, 11500, 13000, 11000]\n\n# Calculate ADOSC with default settings\nadosc = SQA::TAI.adosc(high, low, close, volume)\n\nputs \"Current ADOSC: #{adosc.last.round(2)}\"\n</code></pre>"},{"location":"indicators/volume/adosc/#with-custom-parameters","title":"With Custom Parameters","text":"<pre><code># More responsive settings\nadosc_fast = SQA::TAI.adosc(high, low, close, volume,\n                             fast_period: 2, slow_period: 8)\n\n# Smoother settings\nadosc_smooth = SQA::TAI.adosc(high, low, close, volume,\n                               fast_period: 5, slow_period: 15)\n</code></pre>"},{"location":"indicators/volume/adosc/#understanding-the-indicator","title":"Understanding the Indicator","text":""},{"location":"indicators/volume/adosc/#what-it-measures","title":"What It Measures","text":"<p>ADOSC measures the rate of change in accumulation/distribution:</p> <ul> <li>Money Flow Momentum: How quickly accumulation or distribution is changing</li> <li>Trend Acceleration: Whether money flow is accelerating or decelerating</li> <li>Divergences: Early warnings when momentum diverges from price</li> <li>Zero Line Crosses: Shifts between accumulation and distribution phases</li> </ul> <p>ADOSC answers: \"Is money flow accelerating into or out of this security?\"</p>"},{"location":"indicators/volume/adosc/#calculation-method","title":"Calculation Method","text":"<p>ADOSC is calculated in these steps:</p> <ol> <li>Calculate AD Line: Using standard AD formula (see AD documentation)</li> <li>Apply Fast EMA: Calculate fast period EMA of AD Line</li> <li>Apply Slow EMA: Calculate slow period EMA of AD Line</li> <li>Calculate Difference: Subtract slow EMA from fast EMA</li> </ol> <p>Formula: <pre><code>ADOSC = EMA(AD, fast_period) - EMA(AD, slow_period)\n\nWhere AD is the Accumulation/Distribution Line\n</code></pre></p>"},{"location":"indicators/volume/adosc/#indicator-characteristics","title":"Indicator Characteristics","text":"<ul> <li>Range: Unbounded oscillator (can be positive or negative)</li> <li>Type: Momentum oscillator based on volume</li> <li>Lag: Moderate (uses EMAs for smoothing)</li> <li>Best Used: Identifying momentum shifts, divergence analysis, trend confirmation</li> <li>Limitations: Can whipsaw in ranging markets, requires OHLC + volume data</li> </ul>"},{"location":"indicators/volume/adosc/#interpretation","title":"Interpretation","text":""},{"location":"indicators/volume/adosc/#value-ranges","title":"Value Ranges","text":"<p>Understanding ADOSC values:</p> <ul> <li>Positive Values: Fast EMA above slow EMA, indicating accelerating accumulation or buying pressure</li> <li>Negative Values: Fast EMA below slow EMA, indicating accelerating distribution or selling pressure</li> <li>Near Zero: Little difference between fast and slow EMAs, weak or changing momentum</li> <li>Increasing Values: Strengthening buying pressure or accelerating accumulation</li> <li>Decreasing Values: Strengthening selling pressure or accelerating distribution</li> </ul>"},{"location":"indicators/volume/adosc/#key-levels","title":"Key Levels","text":"<ul> <li>Zero Line: Critical level separating accumulation from distribution</li> <li>Above zero: Bullish momentum (accumulation)</li> <li> <p>Below zero: Bearish momentum (distribution)</p> </li> <li> <p>Zero Line Crosses:</p> </li> <li>Cross above: Shift from distribution to accumulation (bullish)</li> <li> <p>Cross below: Shift from accumulation to distribution (bearish)</p> </li> <li> <p>Extreme Readings: Very high or low values indicate strong momentum but may signal overextension</p> </li> </ul>"},{"location":"indicators/volume/adosc/#signal-interpretation","title":"Signal Interpretation","text":"<p>How to read ADOSC signals:</p> <ol> <li>Momentum Direction</li> <li>ADOSC rising: Increasing buying pressure</li> <li>ADOSC falling: Increasing selling pressure</li> <li> <p>ADOSC flat: Momentum stable or transitioning</p> </li> <li> <p>Position Relative to Zero</p> </li> <li>Above zero: In accumulation phase</li> <li>Below zero: In distribution phase</li> <li> <p>At zero: Neutral or transition point</p> </li> <li> <p>Divergence Patterns</p> </li> <li>Price rising, ADOSC falling: Momentum weakening (bearish divergence)</li> <li>Price falling, ADOSC rising: Selling pressure weakening (bullish divergence)</li> </ol>"},{"location":"indicators/volume/adosc/#trading-signals","title":"Trading Signals","text":""},{"location":"indicators/volume/adosc/#buy-signals","title":"Buy Signals","text":"<p>Specific conditions that generate buy signals:</p> <ol> <li>Primary Signal: ADOSC crosses above zero line</li> <li>Indicates shift from distribution to accumulation</li> <li> <p>Best when price is in uptrend or near support</p> </li> <li> <p>Momentum Signal: ADOSC rising while positive</p> </li> <li>Shows strengthening accumulation</li> <li> <p>Confirms ongoing uptrend</p> </li> <li> <p>Divergence Signal: Price makes lower low, ADOSC makes higher low</p> </li> <li>Bullish divergence suggests selling pressure weakening</li> <li>Strongest near oversold price levels</li> </ol> <p>Example Scenario: <pre><code>When ADOSC crosses above zero while price is above its 50-day MA:\n- Entry: On close above recent resistance\n- Confirmation: ADOSC continues rising\n- Stop loss: Below recent swing low\n- Target: Previous highs or resistance levels\n</code></pre></p>"},{"location":"indicators/volume/adosc/#sell-signals","title":"Sell Signals","text":"<p>Specific conditions that generate sell signals:</p> <ol> <li>Primary Signal: ADOSC crosses below zero line</li> <li>Indicates shift from accumulation to distribution</li> <li> <p>Best when price is in downtrend or near resistance</p> </li> <li> <p>Momentum Signal: ADOSC falling while negative</p> </li> <li>Shows strengthening distribution</li> <li> <p>Confirms ongoing downtrend</p> </li> <li> <p>Divergence Signal: Price makes higher high, ADOSC makes lower high</p> </li> <li>Bearish divergence suggests buying pressure weakening</li> <li>Strongest near overbought price levels</li> </ol> <p>Example Scenario: <pre><code>When ADOSC crosses below zero while price is below its 50-day MA:\n- Entry: On close below recent support\n- Confirmation: ADOSC continues falling\n- Stop loss: Above recent swing high\n- Target: Previous lows or support levels\n</code></pre></p>"},{"location":"indicators/volume/adosc/#divergence-analysis","title":"Divergence Analysis","text":"<p>Bullish Divergence: - Pattern: Price makes lower low, ADOSC makes higher low or fails to make new low - Identification: Compare recent price lows with ADOSC lows over 20-40 bars - Significance: Distribution phase losing momentum, potential reversal - Reliability: High when ADOSC is below zero and showing clear divergence - Example: Stock falls from $100 to $95 to $92. ADOSC falls from -500 to -800, then only to -600.</p> <p>Bearish Divergence: - Pattern: Price makes higher high, ADOSC makes lower high or fails to make new high - Identification: Compare recent price highs with ADOSC highs over 20-40 bars - Significance: Accumulation phase losing momentum, potential reversal - Reliability: High when ADOSC is above zero and showing clear divergence - Example: Stock rises from $100 to $108 to $112. ADOSC rises from 300 to 600, then only to 450.</p>"},{"location":"indicators/volume/adosc/#best-practices","title":"Best Practices","text":""},{"location":"indicators/volume/adosc/#optimal-use-cases","title":"Optimal Use Cases","text":"<p>When ADOSC works best:</p> <ul> <li>Market conditions: Most effective in trending markets. Generates whipsaws in tight ranges.</li> <li>Time frames: Works on all timeframes; daily provides best signal quality. 4-hour also reliable.</li> <li>Asset classes: Excellent for stocks and ETFs with reliable volume. Works for cryptos. Limited use for forex.</li> </ul>"},{"location":"indicators/volume/adosc/#combining-with-other-indicators","title":"Combining with Other Indicators","text":"<p>Recommended combinations:</p> <ul> <li> <p>With Price Action: Use ADOSC to confirm breakouts, support/resistance tests. ADOSC confirmation increases probability.</p> </li> <li> <p>With Trend Indicators: Combine with 50/200 MA or MACD. Only take ADOSC signals aligned with major trend.</p> </li> <li> <p>With AD Line: Use AD Line for overall trend, ADOSC for timing entries/exits within that trend.</p> </li> </ul>"},{"location":"indicators/volume/adosc/#common-pitfalls","title":"Common Pitfalls","text":"<p>What to avoid:</p> <ol> <li> <p>Trading all zero crosses: Not all crosses are quality signals. Filter with trend or price action.</p> </li> <li> <p>Ignoring divergence confirmation: ADOSC divergences need price confirmation. Don't anticipate reversals.</p> </li> <li> <p>Wrong parameter settings: Default 3/10 works well. Over-optimization leads to curve fitting.</p> </li> <li> <p>Using in low volume: ADOSC requires reliable volume data. Avoid on thinly traded securities.</p> </li> </ol>"},{"location":"indicators/volume/adosc/#parameter-selection-guidelines","title":"Parameter Selection Guidelines","text":"<ul> <li>Default (3/10): Works well for most situations, recommended starting point</li> <li>Sensitive (2/7): For faster signals, use in volatile markets or shorter timeframes</li> <li>Smooth (5/15): For slower, more reliable signals, use in less volatile markets</li> <li>Avoid extremes: Very short or very long periods reduce indicator effectiveness</li> </ul>"},{"location":"indicators/volume/adosc/#practical-example","title":"Practical Example","text":"<p>Complete trading example:</p> <pre><code>require 'sqa/tai'\n\n# Load historical data\nhigh, low, close, volume = load_ohlc_volume_data('AAPL')\n\n# Calculate ADOSC and supporting indicators\nadosc = SQA::TAI.adosc(high, low, close, volume, fast_period: 3, slow_period: 10)\nprice_ma_50 = SQA::TAI.sma(close, period: 50)\n\n# Current values\ncurrent_price = close.last\ncurrent_adosc = adosc.last\nprevious_adosc = adosc[-2]\n\n# Trend determination\ntrend = current_price &gt; price_ma_50.last ? \"UPTREND\" : \"DOWNTREND\"\n\nputs \"=== ADOSC Trading Analysis ===\"\nputs \"Current Price: $#{current_price.round(2)}\"\nputs \"Current ADOSC: #{current_adosc.round(2)}\"\nputs \"Price Trend: #{trend}\"\nputs\n\n# Zero line cross detection\nif previous_adosc &lt; 0 &amp;&amp; current_adosc &gt;= 0\n  puts \"BUY SIGNAL: ADOSC crossed above zero\"\n  puts \"Shift from distribution to accumulation\"\n  if trend == \"UPTREND\"\n    puts \"STRONG BUY: Signal aligned with uptrend\"\n  else\n    puts \"CAUTION: Signal against trend, wait for confirmation\"\n  end\n\nelsif previous_adosc &gt; 0 &amp;&amp; current_adosc &lt;= 0\n  puts \"SELL SIGNAL: ADOSC crossed below zero\"\n  puts \"Shift from accumulation to distribution\"\n  if trend == \"DOWNTREND\"\n    puts \"STRONG SELL: Signal aligned with downtrend\"\n  else\n    puts \"CAUTION: Signal against trend, wait for confirmation\"\n  end\n\nelse\n  # Momentum analysis\n  if current_adosc &gt; 0\n    if current_adosc &gt; previous_adosc\n      puts \"BULLISH: ADOSC positive and rising\"\n      puts \"Accumulation accelerating\"\n    else\n      puts \"CAUTION: ADOSC positive but falling\"\n      puts \"Accumulation momentum slowing\"\n    end\n  else\n    if current_adosc &lt; previous_adosc\n      puts \"BEARISH: ADOSC negative and falling\"\n      puts \"Distribution accelerating\"\n    else\n      puts \"CAUTION: ADOSC negative but rising\"\n      puts \"Distribution momentum slowing\"\n    end\n  end\nend\n\n# Divergence detection\nputs \"\\n=== Divergence Check ===\"\nrecent_price_high = close[-20..-1].max\nrecent_adosc_high = adosc[-20..-1].compact.max\nprior_price_high = close[-40..-21].max\nprior_adosc_high = adosc[-40..-21].compact.max\n\nif recent_price_high &gt; prior_price_high &amp;&amp; recent_adosc_high &lt; prior_adosc_high\n  puts \"BEARISH DIVERGENCE\"\n  puts \"Price making higher highs, ADOSC not confirming\"\n  puts \"Warning: Accumulation momentum weakening\"\nend\n\nrecent_price_low = close[-20..-1].min\nrecent_adosc_low = adosc[-20..-1].compact.min\nprior_price_low = close[-40..-21].min\nprior_adosc_low = adosc[-40..-21].compact.min\n\nif recent_price_low &lt; prior_price_low &amp;&amp; recent_adosc_low &gt; prior_adosc_low\n  puts \"BULLISH DIVERGENCE\"\n  puts \"Price making lower lows, ADOSC not confirming\"\n  puts \"Opportunity: Distribution momentum weakening\"\nend\n</code></pre>"},{"location":"indicators/volume/adosc/#related-indicators","title":"Related Indicators","text":""},{"location":"indicators/volume/adosc/#similar-indicators","title":"Similar Indicators","text":"<ul> <li>Chaikin Money Flow (CMF): Oscillator version of AD with fixed period. CMF is bounded, ADOSC is not. CMF for overbought/oversold, ADOSC for momentum changes.</li> </ul>"},{"location":"indicators/volume/adosc/#complementary-indicators","title":"Complementary Indicators","text":"<ul> <li>AD Line: The foundation of ADOSC. Use AD for trend, ADOSC for momentum and timing.</li> <li>MACD: Similar oscillator structure but price-based. Combining MACD + ADOSC confirms both price and volume momentum.</li> <li>RSI: Price momentum oscillator. RSI extremes + ADOSC confirmation = high probability setups.</li> </ul>"},{"location":"indicators/volume/adosc/#indicator-family","title":"Indicator Family","text":"<p>ADOSC is part of the Chaikin volume indicator family: - AD Line: Cumulative money flow - ADOSC: Momentum of money flow - Chaikin Money Flow: Money flow oscillator with fixed period</p> <p>When to prefer ADOSC: For identifying momentum shifts and getting earlier signals than AD Line alone. More responsive than AD Line but less noisy than raw volume.</p>"},{"location":"indicators/volume/adosc/#advanced-topics","title":"Advanced Topics","text":""},{"location":"indicators/volume/adosc/#multi-timeframe-analysis","title":"Multi-Timeframe Analysis","text":"<p>Using ADOSC across timeframes:</p> <ul> <li>Weekly ADOSC: Identifies major money flow shifts</li> <li>Daily ADOSC: Provides trade timing and confirmation</li> <li>4-hour ADOSC: Fine-tunes entries within daily signals</li> </ul> <p>Best signals when timeframes align (weekly ADOSC positive, daily ADOSC crosses above zero).</p>"},{"location":"indicators/volume/adosc/#market-regime-adaptation","title":"Market Regime Adaptation","text":"<p>ADOSC in different conditions:</p> <ul> <li>Trending Markets: ADOSC stays predominantly above/below zero. Focus on momentum (rising/falling) rather than zero crosses.</li> <li>Ranging Markets: ADOSC oscillates around zero frequently. Reduce position sizes or skip marginal signals.</li> <li>High Volatility: ADOSC becomes more erratic. Consider using slower settings (5/15) to filter noise.</li> <li>Low Volume: ADOSC less reliable. Confirm all signals with price action.</li> </ul>"},{"location":"indicators/volume/adosc/#statistical-validation","title":"Statistical Validation","text":"<p>ADOSC reliability metrics:</p> <ul> <li>Zero Cross Success: 55-60% win rate standalone, 65-75% when filtered by trend</li> <li>Divergence Reliability: Bullish divergences work better (70%) than bearish (60%)</li> <li>Best Timeframe: Daily charts show highest success rates</li> <li>Volume Quality: Accuracy directly correlates with volume data reliability</li> </ul>"},{"location":"indicators/volume/adosc/#references","title":"References","text":"<ul> <li>Chaikin, Marc. \"Chaikin Analytics\" - Original development and applications</li> <li>Murphy, John J. \"Technical Analysis of the Financial Markets\" (1999)</li> <li>StockCharts: Chaikin Oscillator</li> <li>TradingView: ADOSC Documentation</li> </ul>"},{"location":"indicators/volume/adosc/#see-also","title":"See Also","text":"<ul> <li>Volume Indicators Overview</li> <li>AD - Accumulation/Distribution Line</li> <li>OBV - On Balance Volume</li> <li>Basic Usage Guide</li> </ul>"},{"location":"indicators/volume/cmf/","title":"CMF (Chaikin Money Flow)","text":"<p>Note: CMF (Chaikin Money Flow) is not a standard TA-Lib indicator and is not currently available in SQA::TAI. This page is provided for reference purposes as CMF is commonly used alongside other volume indicators. However, similar functionality is available through ADOSC (Chaikin A/D Oscillator).</p>"},{"location":"indicators/volume/cmf/#overview","title":"Overview","text":"<p>Chaikin Money Flow (CMF) is a volume-weighted average of accumulation and distribution over a specified period. Created by Marc Chaikin, it measures the amount of Money Flow Volume over a specific period, helping traders identify buying and selling pressure.</p>"},{"location":"indicators/volume/cmf/#what-is-chaikin-money-flow","title":"What is Chaikin Money Flow?","text":"<p>CMF oscillates between -1 and +1, with: - Positive values: Buying pressure (accumulation) - Negative values: Selling pressure (distribution) - Zero line: Equilibrium between buyers and sellers</p> <p>Unlike the unbounded Accumulation/Distribution Line (AD), CMF is normalized and bounded, making it easier to compare across different securities and time periods.</p>"},{"location":"indicators/volume/cmf/#formula","title":"Formula","text":"<pre><code>Money Flow Multiplier = ((Close - Low) - (High - Close)) / (High - Low)\nMoney Flow Volume = Money Flow Multiplier \u00d7 Volume\nCMF = Sum(Money Flow Volume, N periods) / Sum(Volume, N periods)\n\nTypical Period: 20 or 21 days\n</code></pre>"},{"location":"indicators/volume/cmf/#typical-usage","title":"Typical Usage","text":"<p>If CMF were available, it would be used like this:</p> <pre><code># Hypothetical usage (NOT currently available in SQA::TAI)\nrequire 'sqa/tai'\n\n# Note: This functionality is not implemented\n# cmf = SQA::TAI.cmf(high, low, close, volume, period: 20)\n\n# Manual calculation approach:\ndef calculate_cmf(high, low, close, volume, period = 20)\n  # Calculate money flow multiplier\n  mf_multiplier = high.zip(low, close).map do |h, l, c|\n    next 0 if h == l  # Avoid division by zero\n    ((c - l) - (h - c)) / (h - l)\n  end\n\n  # Calculate money flow volume\n  mf_volume = mf_multiplier.zip(volume).map { |m, v| m * v }\n\n  # Calculate CMF using rolling window\n  result = Array.new(close.length, nil)\n\n  (period - 1...close.length).each do |i|\n    start_idx = i - period + 1\n    period_mf_volume = mf_volume[start_idx..i].sum\n    period_volume = volume[start_idx..i].sum\n\n    result[i] = period_volume.zero? ? 0 : period_mf_volume / period_volume\n  end\n\n  result\nend\n\n# Usage\nhigh = [...]\nlow = [...]\nclose = [...]\nvolume = [...]\n\ncmf = calculate_cmf(high, low, close, volume, period: 20)\nputs \"CMF(20): #{cmf.last.round(4)}\"\n\nif cmf.last &gt; 0\n  puts \"Buying pressure dominant\"\nelsif cmf.last &lt; 0\n  puts \"Selling pressure dominant\"\nend\n</code></pre>"},{"location":"indicators/volume/cmf/#interpretation","title":"Interpretation","text":""},{"location":"indicators/volume/cmf/#signal-ranges","title":"Signal Ranges","text":"CMF Value Interpretation Action +0.25 to +1.0 Strong buying pressure Confirm uptrend, hold longs +0.05 to +0.25 Moderate buying pressure Cautiously bullish -0.05 to +0.05 Neutral No clear edge -0.25 to -0.05 Moderate selling pressure Cautiously bearish -1.0 to -0.25 Strong selling pressure Confirm downtrend, hold shorts"},{"location":"indicators/volume/cmf/#key-signals","title":"Key Signals","text":"<p>1. Zero Line Crosses <pre><code># CMF crosses above zero = Bullish\n# CMF crosses below zero = Bearish\n\nif cmf.last &gt; 0 &amp;&amp; cmf[-2] &lt;= 0\n  puts \"CMF Cross Above Zero - BULLISH\"\nelsif cmf.last &lt; 0 &amp;&amp; cmf[-2] &gt;= 0\n  puts \"CMF Cross Below Zero - BEARISH\"\nend\n</code></pre></p> <p>2. Divergences <pre><code># Price makes new high, CMF makes lower high = Bearish divergence\n# Price makes new low, CMF makes higher low = Bullish divergence\n\nif close.last &gt; close[-10..-1].max &amp;&amp; cmf.last &lt; cmf[-10..-1].max\n  puts \"Bearish Divergence - Weakening uptrend\"\nend\n</code></pre></p> <p>3. Extreme Readings <pre><code># Sustained CMF &gt; +0.25 = Very strong accumulation\n# Sustained CMF &lt; -0.25 = Very strong distribution\n\nif cmf.last &gt; 0.25\n  puts \"Strong accumulation phase\"\nelsif cmf.last &lt; -0.25\n  puts \"Strong distribution phase\"\nend\n</code></pre></p>"},{"location":"indicators/volume/cmf/#comparison-with-related-indicators","title":"Comparison with Related Indicators","text":""},{"location":"indicators/volume/cmf/#cmf-vs-ad-vs-adosc","title":"CMF vs AD vs ADOSC","text":"Feature CMF AD ADOSC Bounded Yes (-1 to +1) No No Calculation Fixed period average Cumulative MACD of AD Best For Comparing securities Long-term trends Momentum shifts Availability Not in TA-Lib Available Available"},{"location":"indicators/volume/cmf/#alternative-indicators-in-sqatai","title":"Alternative Indicators in SQA::TAI","text":"<p>Since CMF is not available, use these similar indicators:</p>"},{"location":"indicators/volume/cmf/#1-chaikin-ad-oscillator-adosc","title":"1. Chaikin A/D Oscillator (ADOSC)","text":"<p>Most similar to CMF: <pre><code>require 'sqa/tai'\n\n# ADOSC is available and similar to CMF\nadosc = SQA::TAI.adosc(high, low, close, volume,\n                        fast_period: 3,\n                        slow_period: 10)\n\nputs \"ADOSC: #{adosc.last.round(2)}\"\n\nif adosc.last &gt; 0\n  puts \"Accumulation (similar to positive CMF)\"\nelsif adosc.last &lt; 0\n  puts \"Distribution (similar to negative CMF)\"\nend\n</code></pre></p>"},{"location":"indicators/volume/cmf/#2-accumulationdistribution-line-ad","title":"2. Accumulation/Distribution Line (AD)","text":"<p>Underlying indicator: <pre><code>require 'sqa/tai'\n\nad = SQA::TAI.ad(high, low, close, volume)\n\n# Look at AD trend\nad_trend = ad.last &gt; ad[-5] ? \"Rising\" : \"Falling\"\nputs \"A/D Line: #{ad_trend}\"\n</code></pre></p>"},{"location":"indicators/volume/cmf/#3-money-flow-index-mfi","title":"3. Money Flow Index (MFI)","text":"<p>Volume-weighted RSI: <pre><code>require 'sqa/tai'\n\nmfi = SQA::TAI.mfi(high, low, close, volume, period: 14)\n\nputs \"MFI: #{mfi.last.round(2)}\"\n\nif mfi.last &gt; 80\n  puts \"Overbought with volume\"\nelsif mfi.last &lt; 20\n  puts \"Oversold with volume\"\nend\n</code></pre></p>"},{"location":"indicators/volume/cmf/#4-on-balance-volume-obv","title":"4. On Balance Volume (OBV)","text":"<p>Simple volume indicator: <pre><code>require 'sqa/tai'\n\nobv = SQA::TAI.obv(close, volume)\n\n# OBV trend\nif obv.last &gt; obv[-5]\n  puts \"Volume supporting price (like positive CMF)\"\nelse\n  puts \"Volume not supporting price (like negative CMF)\"\nend\n</code></pre></p>"},{"location":"indicators/volume/cmf/#trading-strategies-with-cmf","title":"Trading Strategies with CMF","text":""},{"location":"indicators/volume/cmf/#strategy-1-trend-confirmation","title":"Strategy 1: Trend Confirmation","text":"<pre><code># Confirm trends with CMF\nema_20 = SQA::TAI.ema(close, period: 20)\ncmf = calculate_cmf(high, low, close, volume, 20)\n\n# Uptrend confirmation\nif close.last &gt; ema_20.last &amp;&amp; cmf.last &gt; 0.1\n  puts \"CONFIRMED UPTREND\"\n  puts \"Price above EMA and CMF positive\"\n\n# Downtrend confirmation\nelsif close.last &lt; ema_20.last &amp;&amp; cmf.last &lt; -0.1\n  puts \"CONFIRMED DOWNTREND\"\n  puts \"Price below EMA and CMF negative\"\nend\n</code></pre>"},{"location":"indicators/volume/cmf/#strategy-2-divergence-trading","title":"Strategy 2: Divergence Trading","text":"<pre><code># Look for divergences between price and CMF\ncmf = calculate_cmf(high, low, close, volume, 20)\n\n# Bearish divergence\nrecent_high_price = close[-20..-1].max\nrecent_high_cmf = cmf[-20..-1].max\n\nif close.last &gt;= recent_high_price &amp;&amp; cmf.last &lt; recent_high_cmf\n  puts \"BEARISH DIVERGENCE\"\n  puts \"Price new high, CMF lower high\"\n  puts \"Consider taking profits or going short\"\nend\n\n# Bullish divergence\nrecent_low_price = close[-20..-1].min\nrecent_low_cmf = cmf[-20..-1].min\n\nif close.last &lt;= recent_low_price &amp;&amp; cmf.last &gt; recent_low_cmf\n  puts \"BULLISH DIVERGENCE\"\n  puts \"Price new low, CMF higher low\"\n  puts \"Consider buying opportunity\"\nend\n</code></pre>"},{"location":"indicators/volume/cmf/#strategy-3-breakout-validation","title":"Strategy 3: Breakout Validation","text":"<pre><code># Validate breakouts with CMF\nresistance = 250.0  # Key level\ncmf = calculate_cmf(high, low, close, volume, 20)\n\nif close.last &gt; resistance\n  if cmf.last &gt; 0.15\n    puts \"VALID BREAKOUT\"\n    puts \"Price above resistance with strong CMF\"\n    puts \"High probability continuation\"\n  else\n    puts \"WEAK BREAKOUT\"\n    puts \"Price above resistance but CMF weak\"\n    puts \"Potential false breakout\"\n  end\nend\n</code></pre>"},{"location":"indicators/volume/cmf/#complete-cmf-calculator-class","title":"Complete CMF Calculator Class","text":"<pre><code>require 'sqa/tai'\n\nclass ChaikinMoneyFlow\n  attr_reader :values\n\n  def initialize(high, low, close, volume, period: 20)\n    @high = high\n    @low = low\n    @close = close\n    @volume = volume\n    @period = period\n    calculate\n  end\n\n  def calculate\n    # Calculate money flow multiplier\n    mf_multiplier = @high.zip(@low, @close).map do |h, l, c|\n      next 0 if (h - l).zero?\n      ((c - l) - (h - c)) / (h - l)\n    end\n\n    # Calculate money flow volume\n    mf_volume = mf_multiplier.zip(@volume).map { |m, v| m * v }\n\n    # Calculate CMF for each period\n    @values = Array.new(@close.length, nil)\n\n    (@period - 1...@close.length).each do |i|\n      start_idx = i - @period + 1\n      sum_mf_volume = mf_volume[start_idx..i].sum\n      sum_volume = @volume[start_idx..i].sum\n\n      @values[i] = sum_volume.zero? ? 0 : sum_mf_volume / sum_volume\n    end\n  end\n\n  def last\n    @values.last\n  end\n\n  def signal\n    return :neutral if last.nil?\n\n    case last\n    when 0.25..Float::INFINITY\n      :strong_buying\n    when 0.05..0.25\n      :moderate_buying\n    when -0.05..0.05\n      :neutral\n    when -0.25..-0.05\n      :moderate_selling\n    when -Float::INFINITY..-0.25\n      :strong_selling\n    end\n  end\n\n  def trend\n    return :unknown if @values.compact.length &lt; 5\n\n    recent = @values.compact.last(5)\n    avg = recent.sum / recent.length\n\n    if avg &gt; 0.1\n      :accumulation\n    elsif avg &lt; -0.1\n      :distribution\n    else\n      :neutral\n    end\n  end\n\n  def divergence?(price_data)\n    return nil if @values.compact.length &lt; 10\n\n    # Check last 10 periods for divergence\n    recent_prices = price_data.last(10)\n    recent_cmf = @values.compact.last(10)\n\n    price_trend = recent_prices.last &gt; recent_prices.first ? :up : :down\n    cmf_trend = recent_cmf.last &gt; recent_cmf.first ? :up : :down\n\n    if price_trend == :up &amp;&amp; cmf_trend == :down\n      :bearish_divergence\n    elsif price_trend == :down &amp;&amp; cmf_trend == :up\n      :bullish_divergence\n    else\n      :no_divergence\n    end\n  end\n\n  def trading_signal(price)\n    sig = signal\n    div = divergence?(price)\n\n    case sig\n    when :strong_buying\n      if div == :bearish_divergence\n        { action: :caution, reason: \"Strong buying but bearish divergence\" }\n      else\n        { action: :buy, reason: \"Strong accumulation\" }\n      end\n    when :strong_selling\n      if div == :bullish_divergence\n        { action: :caution, reason: \"Strong selling but bullish divergence\" }\n      else\n        { action: :sell, reason: \"Strong distribution\" }\n      end\n    when :moderate_buying\n      { action: :hold_long, reason: \"Moderate accumulation\" }\n    when :moderate_selling\n      { action: :hold_short, reason: \"Moderate distribution\" }\n    else\n      { action: :wait, reason: \"Neutral money flow\" }\n    end\n  end\n\n  def to_s\n    &lt;&lt;~INFO\n      Chaikin Money Flow (#{@period})\n      Current Value: #{last.nil? ? 'N/A' : last.round(4)}\n      Signal: #{signal}\n      Trend: #{trend}\n      Divergence: #{divergence?(@close)}\n    INFO\n  end\nend\n\n# Usage Example\nhigh = [100, 102, 105, 104, 106, 108, 107, 109, 111, 110]\nlow = [98, 100, 103, 102, 104, 106, 105, 107, 109, 108]\nclose = [99, 101, 104, 103, 105, 107, 106, 108, 110, 109]\nvolume = [1000, 1500, 2000, 1200, 1800, 2200, 1400, 1900, 2500, 1600]\n\ncmf = ChaikinMoneyFlow.new(high, low, close, volume, period: 5)\nputs cmf.to_s\n\nsignal = cmf.trading_signal(close)\nputs \"\\nTrading Signal:\"\nputs \"  Action: #{signal[:action]}\"\nputs \"  Reason: #{signal[:reason]}\"\n</code></pre>"},{"location":"indicators/volume/cmf/#best-practices","title":"Best Practices","text":""},{"location":"indicators/volume/cmf/#1-use-with-trend-indicators","title":"1. Use with Trend Indicators","text":"<pre><code># Combine CMF with moving averages\ncmf = ChaikinMoneyFlow.new(high, low, close, volume, period: 20)\nema_50 = SQA::TAI.ema(close, period: 50)\n\n# Only take signals aligned with trend\nif close.last &gt; ema_50.last &amp;&amp; cmf.last &gt; 0\n  puts \"Aligned bullish signals\"\nend\n</code></pre>"},{"location":"indicators/volume/cmf/#2-multiple-timeframe-confirmation","title":"2. Multiple Timeframe Confirmation","text":"<pre><code># Use CMF on different timeframes\ndaily_cmf = ChaikinMoneyFlow.new(daily_high, daily_low, daily_close,\n                                  daily_volume, period: 20)\nhourly_cmf = ChaikinMoneyFlow.new(hourly_high, hourly_low, hourly_close,\n                                   hourly_volume, period: 20)\n\n# Both timeframes aligned\nif daily_cmf.last &gt; 0 &amp;&amp; hourly_cmf.last &gt; 0\n  puts \"Multi-timeframe accumulation confirmed\"\nend\n</code></pre>"},{"location":"indicators/volume/cmf/#3-combine-with-other-volume-indicators","title":"3. Combine with Other Volume Indicators","text":"<pre><code># Use multiple volume indicators for confirmation\ncmf = ChaikinMoneyFlow.new(high, low, close, volume, period: 20)\nobv = SQA::TAI.obv(close, volume)\nmfi = SQA::TAI.mfi(high, low, close, volume, period: 14)\n\n# All volume indicators aligned\nif cmf.last &gt; 0 &amp;&amp; obv.last &gt; obv[-5] &amp;&amp; mfi.last &gt; 50\n  puts \"Strong volume confirmation of uptrend\"\nend\n</code></pre>"},{"location":"indicators/volume/cmf/#limitations","title":"Limitations","text":"<ol> <li>Lagging Indicator: CMF uses historical data and may lag price action</li> <li>False Signals: Can give false signals in choppy, low-volume markets</li> <li>Period Sensitivity: Different periods can give conflicting signals</li> <li>Volume Quality: Accuracy depends on reliable volume data</li> </ol>"},{"location":"indicators/volume/cmf/#see-also","title":"See Also","text":""},{"location":"indicators/volume/cmf/#related-volume-indicators","title":"Related Volume Indicators","text":"<ul> <li>Accumulation/Distribution (AD) - Cumulative volume indicator</li> <li>Chaikin A/D Oscillator (ADOSC) - Similar momentum indicator</li> <li>On Balance Volume (OBV) - Simple volume flow indicator</li> <li>Money Flow Index (MFI) - Volume-weighted RSI</li> </ul>"},{"location":"indicators/volume/cmf/#recommended-combinations","title":"Recommended Combinations","text":"<ul> <li>EMA - Trend direction</li> <li>RSI - Momentum confirmation</li> <li>MACD - Trend strength</li> <li>Bollinger Bands - Volatility context</li> </ul>"},{"location":"indicators/volume/cmf/#resources","title":"Resources","text":"<ul> <li>Investopedia: Chaikin Money Flow</li> <li>StockCharts: CMF</li> <li>Volume Indicators Overview</li> </ul> <p>Implementation Status: Not available in current TA-Lib/SQA::TAI version. Use manual calculation or ADOSC as alternative. The provided Ruby implementation can be used for custom CMF calculations.</p>"},{"location":"indicators/volume/obv/","title":"On Balance Volume (OBV)","text":"<p>On Balance Volume (OBV) is a momentum indicator that uses volume flow to predict changes in stock price. It adds volume on up days and subtracts volume on down days, creating a cumulative total.</p>"},{"location":"indicators/volume/obv/#usage","title":"Usage","text":"<pre><code>require 'sqa/tai'\n\nclose = [45.15, 46.26, 46.50, 45.21, 44.34, 44.09, 45.42, 46.08, 47.03, 47.28]\nvolume = [2500, 3200, 2800, 4100, 3500, 3800, 4200, 3600, 5100, 4800]\n\n# Calculate OBV\nobv = SQA::TAI.obv(close, volume)\n\nputs \"Current OBV: #{obv.last.round(0)}\"\n</code></pre>"},{"location":"indicators/volume/obv/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>close</code> Array Yes - Array of closing prices <code>volume</code> Array Yes - Array of volume values"},{"location":"indicators/volume/obv/#returns","title":"Returns","text":"<p>Returns an array of cumulative OBV values.</p>"},{"location":"indicators/volume/obv/#formula","title":"Formula","text":"<pre><code>If Close &gt; Previous Close:\n  OBV = Previous OBV + Current Volume\n\nIf Close &lt; Previous Close:\n  OBV = Previous OBV - Current Volume\n\nIf Close = Previous Close:\n  OBV = Previous OBV\n</code></pre>"},{"location":"indicators/volume/obv/#interpretation","title":"Interpretation","text":"<ul> <li>Rising OBV: Buying pressure, accumulation</li> <li>Falling OBV: Selling pressure, distribution</li> <li>OBV confirms price: Healthy trend</li> <li>OBV diverges from price: Potential reversal</li> </ul>"},{"location":"indicators/volume/obv/#example-obv-trend-analysis","title":"Example: OBV Trend Analysis","text":"<pre><code>close, volume = load_price_volume_data('AAPL')\n\nobv = SQA::TAI.obv(close, volume)\n\n# Calculate OBV trend\nobv_ma = SQA::TAI.sma(obv, period: 20)\n\ncurrent_obv = obv.last\ncurrent_obv_ma = obv_ma.last\n\nif current_obv &gt; current_obv_ma\n  puts \"OBV above 20-day MA: Bullish accumulation\"\n  if obv[-5..-1].all? { |v| v &gt; obv[-6] }\n    puts \"OBV trending higher - strong buying pressure\"\n  end\nelsif current_obv &lt; current_obv_ma\n  puts \"OBV below 20-day MA: Bearish distribution\"\n  if obv[-5..-1].all? { |v| v &lt; obv[-6] }\n    puts \"OBV trending lower - strong selling pressure\"\n  end\nend\n</code></pre>"},{"location":"indicators/volume/obv/#example-obv-divergence","title":"Example: OBV Divergence","text":"<pre><code>close, volume = load_price_volume_data('TSLA')\n\nobv = SQA::TAI.obv(close, volume)\n\n# Find recent highs\nprice_high_1 = close[-30..-15].max\nprice_high_2 = close[-14..-1].max\n\nprice_high_1_idx = close[-30..-15].index(price_high_1) - 30\nprice_high_2_idx = close[-14..-1].index(price_high_2) - 14\n\nobv_at_high_1 = obv[price_high_1_idx]\nobv_at_high_2 = obv[price_high_2_idx]\n\n# Bearish divergence\nif price_high_2 &gt; price_high_1 &amp;&amp; obv_at_high_2 &lt; obv_at_high_1\n  puts \"Bearish Divergence!\"\n  puts \"Price: #{price_high_1.round(2)} -&gt; #{price_high_2.round(2)} (higher high)\"\n  puts \"OBV: #{obv_at_high_1.round(0)} -&gt; #{obv_at_high_2.round(0)} (lower high)\"\n  puts \"Selling pressure despite higher prices - potential reversal\"\nend\n\n# Bullish divergence\nprice_low_1 = close[-30..-15].min\nprice_low_2 = close[-14..-1].min\n\nprice_low_1_idx = close[-30..-15].index(price_low_1) - 30\nprice_low_2_idx = close[-14..-1].index(price_low_2) - 14\n\nobv_at_low_1 = obv[price_low_1_idx]\nobv_at_low_2 = obv[price_low_2_idx]\n\nif price_low_2 &lt; price_low_1 &amp;&amp; obv_at_low_2 &gt; obv_at_low_1\n  puts \"Bullish Divergence!\"\n  puts \"Price: #{price_low_1.round(2)} -&gt; #{price_low_2.round(2)} (lower low)\"\n  puts \"OBV: #{obv_at_low_1.round(0)} -&gt; #{obv_at_low_2.round(0)} (higher low)\"\n  puts \"Buying pressure despite lower prices - potential reversal\"\nend\n</code></pre>"},{"location":"indicators/volume/obv/#example-obv-breakout-confirmation","title":"Example: OBV Breakout Confirmation","text":"<pre><code>close, volume = load_price_volume_data('MSFT')\n\nobv = SQA::TAI.obv(close, volume)\nprice_high_52w = close[-252..-1].max\n\n# Check if price breaking out\nif close.last &gt; price_high_52w\n  # Is OBV also breaking out?\n  obv_high_52w = obv[-252..-1].max\n\n  if obv.last &gt; obv_high_52w\n    puts \"Confirmed Breakout!\"\n    puts \"Both price and OBV at new highs\"\n    puts \"Strong buying pressure supports breakout\"\n  else\n    puts \"Weak Breakout\"\n    puts \"Price at new high but OBV is not\"\n    puts \"Lack of volume confirmation - be cautious\"\n  end\nend\n</code></pre>"},{"location":"indicators/volume/obv/#example-volume-accumulationdistribution","title":"Example: Volume Accumulation/Distribution","text":"<pre><code>close, volume = load_price_volume_data('NVDA')\n\nobv = SQA::TAI.obv(close, volume)\n\n# Compare OBV change with price change\nlookback = 20\nobv_change = obv.last - obv[-lookback]\nprice_change = close.last - close[-lookback]\nprice_change_pct = (price_change / close[-lookback]) * 100\n\nputs \"#{lookback}-day Price Change: #{price_change_pct.round(2)}%\"\nputs \"#{lookback}-day OBV Change: #{obv_change.round(0)}\"\n\nif price_change &gt; 0 &amp;&amp; obv_change &gt; 0\n  puts \"Price and OBV both rising - healthy uptrend\"\nelsif price_change &gt; 0 &amp;&amp; obv_change &lt; 0\n  puts \"Price rising but OBV falling - weak advance, possible distribution\"\nelsif price_change &lt; 0 &amp;&amp; obv_change &gt; 0\n  puts \"Price falling but OBV rising - possible accumulation\"\nelsif price_change &lt; 0 &amp;&amp; obv_change &lt; 0\n  puts \"Price and OBV both falling - confirmed downtrend\"\nend\n</code></pre>"},{"location":"indicators/volume/obv/#trading-strategies","title":"Trading Strategies","text":""},{"location":"indicators/volume/obv/#1-obv-trend-following","title":"1. OBV Trend Following","text":"<pre><code># Buy when OBV crosses above its MA\n# Sell when OBV crosses below its MA\n</code></pre>"},{"location":"indicators/volume/obv/#2-divergence-trading","title":"2. Divergence Trading","text":"<pre><code># Bullish divergence: Price lower, OBV higher\n# Bearish divergence: Price higher, OBV lower\n</code></pre>"},{"location":"indicators/volume/obv/#3-breakout-confirmation","title":"3. Breakout Confirmation","text":"<pre><code># Only trade breakouts confirmed by OBV\n</code></pre>"},{"location":"indicators/volume/obv/#4-volume-trend-analysis","title":"4. Volume Trend Analysis","text":"<pre><code># Rising OBV = Accumulation\n# Falling OBV = Distribution\n</code></pre>"},{"location":"indicators/volume/obv/#key-concepts","title":"Key Concepts","text":""},{"location":"indicators/volume/obv/#accumulation-phase","title":"Accumulation Phase","text":"<ul> <li>Price flat or slightly up</li> <li>OBV rising</li> <li>Smart money buying</li> </ul>"},{"location":"indicators/volume/obv/#distribution-phase","title":"Distribution Phase","text":"<ul> <li>Price flat or slightly down</li> <li>OBV falling</li> <li>Smart money selling</li> </ul>"},{"location":"indicators/volume/obv/#confirmation","title":"Confirmation","text":"<ul> <li>Price and OBV move together</li> <li>Trend is healthy</li> </ul>"},{"location":"indicators/volume/obv/#divergence","title":"Divergence","text":"<ul> <li>Price and OBV move apart</li> <li>Warning of potential reversal</li> </ul>"},{"location":"indicators/volume/obv/#example-complete-obv-analysis","title":"Example: Complete OBV Analysis","text":"<pre><code>close, volume = load_price_volume_data('GOOGL')\n\nobv = SQA::TAI.obv(close, volume)\nobv_ma_20 = SQA::TAI.sma(obv, period: 20)\nobv_ma_50 = SQA::TAI.sma(obv, period: 50)\n\ncurrent_obv = obv.last\ncurrent_price = close.last\n\n# Trend direction\nobv_trend = if current_obv &gt; obv_ma_20.last &amp;&amp; obv_ma_20.last &gt; obv_ma_50.last\n  \"Strong Bullish\"\nelsif current_obv &lt; obv_ma_20.last &amp;&amp; obv_ma_20.last &lt; obv_ma_50.last\n  \"Strong Bearish\"\nelse\n  \"Neutral/Transitioning\"\nend\n\n# Recent momentum\nobv_5day_change = obv.last - obv[-5]\nobv_momentum = obv_5day_change &gt; 0 ? \"Increasing\" : \"Decreasing\"\n\nputs \"OBV Analysis:\"\nputs \"Current OBV: #{current_obv.round(0)}\"\nputs \"Trend: #{obv_trend}\"\nputs \"5-day Momentum: #{obv_momentum}\"\n\n# Divergence check\nprice_trend = close[-20..-1].each_cons(2).count { |a, b| b &gt; a }\nobv_trend_count = obv[-20..-1].each_cons(2).count { |a, b| b &gt; a }\n\nif (price_trend &gt; 15 &amp;&amp; obv_trend_count &lt; 10) ||\n   (price_trend &lt; 5 &amp;&amp; obv_trend_count &gt; 10)\n  puts \"Warning: Potential divergence detected\"\nend\n</code></pre>"},{"location":"indicators/volume/obv/#limitations","title":"Limitations","text":"<ul> <li>OBV is cumulative and can't be compared across stocks</li> <li>Doesn't show volume intensity (10% move on low volume = 1% move on high volume)</li> <li>Subject to false signals in choppy markets</li> <li>No standardized overbought/oversold levels</li> </ul>"},{"location":"indicators/volume/obv/#advantages","title":"Advantages","text":"<ul> <li>Simple and easy to understand</li> <li>Excellent for spotting divergences</li> <li>Works well for confirmation</li> <li>Applicable to all timeframes</li> </ul>"},{"location":"indicators/volume/obv/#related-indicators","title":"Related Indicators","text":"<ul> <li>Chaikin A/D Line (AD) - Similar volume indicator</li> <li>MACD - Often used together</li> <li>RSI - Combine for confirmation</li> </ul>"},{"location":"indicators/volume/obv/#see-also","title":"See Also","text":"<ul> <li>Back to Indicators</li> <li>Basic Usage</li> <li>Volume Analysis Example</li> </ul>"}]}